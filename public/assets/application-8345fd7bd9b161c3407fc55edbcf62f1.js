/*!
 * jQuery JavaScript Library v1.7.1
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Mon Nov 21 21:11:03 2011 -0500
 */
function preinit(){var a;(a=tinyMCEPopup.getParam("external_link_list_url"))&&document.write('<script language="javascript" type="text/javascript" src="'+tinyMCEPopup.editor.documentBaseURI.toAbsolute(a)+'"></script>')}function changeClass(){var a=document.forms[0];a.classes.value=getSelectValue(a,"classlist")}function init(){tinyMCEPopup.resizeToInnerSize();var a=document.forms[0],b=tinyMCEPopup.editor,c=b.selection.getNode(),d="insert",e;document.getElementById("hrefbrowsercontainer").innerHTML=getBrowserHTML("hrefbrowser","href","file","advlink"),document.getElementById("popupurlbrowsercontainer").innerHTML=getBrowserHTML("popupurlbrowser","popupurl","file","advlink"),document.getElementById("targetlistcontainer").innerHTML=getTargetListHTML("targetlist","target"),e=getLinkListHTML("linklisthref","href"),e==""?document.getElementById("linklisthrefrow").style.display="none":document.getElementById("linklisthrefcontainer").innerHTML=e,e=getAnchorListHTML("anchorlist","href"),e==""?document.getElementById("anchorlistrow").style.display="none":document.getElementById("anchorlistcontainer").innerHTML=e,isVisible("hrefbrowser")&&(document.getElementById("href").style.width="260px"),isVisible("popupurlbrowser")&&(document.getElementById("popupurl").style.width="180px"),c=b.dom.getParent(c,"A"),c!=null&&c.nodeName=="A"&&(d="update"),a.insert.value=tinyMCEPopup.getLang(d,"Insert",!0),setPopupControlsDisabled(!0);if(d=="update"){var f=b.dom.getAttrib(c,"href"),g=b.dom.getAttrib(c,"onclick");setFormValue("href",f),setFormValue("title",b.dom.getAttrib(c,"title")),setFormValue("id",b.dom.getAttrib(c,"id")),setFormValue("style",b.dom.getAttrib(c,"style")),setFormValue("rel",b.dom.getAttrib(c,"rel")),setFormValue("rev",b.dom.getAttrib(c,"rev")),setFormValue("charset",b.dom.getAttrib(c,"charset")),setFormValue("hreflang",b.dom.getAttrib(c,"hreflang")),setFormValue("dir",b.dom.getAttrib(c,"dir")),setFormValue("lang",b.dom.getAttrib(c,"lang")),setFormValue("tabindex",b.dom.getAttrib(c,"tabindex",typeof c.tabindex!="undefined"?c.tabindex:"")),setFormValue("accesskey",b.dom.getAttrib(c,"accesskey",typeof c.accesskey!="undefined"?c.accesskey:"")),setFormValue("type",b.dom.getAttrib(c,"type")),setFormValue("onfocus",b.dom.getAttrib(c,"onfocus")),setFormValue("onblur",b.dom.getAttrib(c,"onblur")),setFormValue("onclick",g),setFormValue("ondblclick",b.dom.getAttrib(c,"ondblclick")),setFormValue("onmousedown",b.dom.getAttrib(c,"onmousedown")),setFormValue("onmouseup",b.dom.getAttrib(c,"onmouseup")),setFormValue("onmouseover",b.dom.getAttrib(c,"onmouseover")),setFormValue("onmousemove",b.dom.getAttrib(c,"onmousemove")),setFormValue("onmouseout",b.dom.getAttrib(c,"onmouseout")),setFormValue("onkeypress",b.dom.getAttrib(c,"onkeypress")),setFormValue("onkeydown",b.dom.getAttrib(c,"onkeydown")),setFormValue("onkeyup",b.dom.getAttrib(c,"onkeyup")),setFormValue("target",b.dom.getAttrib(c,"target")),setFormValue("classes",b.dom.getAttrib(c,"class")),g!=null&&g.indexOf("window.open")!=-1?parseWindowOpen(g):parseFunction(g),selectByValue(a,"dir",b.dom.getAttrib(c,"dir")),selectByValue(a,"rel",b.dom.getAttrib(c,"rel")),selectByValue(a,"rev",b.dom.getAttrib(c,"rev")),selectByValue(a,"linklisthref",f),f.charAt(0)=="#"&&selectByValue(a,"anchorlist",f),addClassesToList("classlist","advlink_styles"),selectByValue(a,"classlist",b.dom.getAttrib(c,"class"),!0),selectByValue(a,"targetlist",b.dom.getAttrib(c,"target"),!0)}else addClassesToList("classlist","advlink_styles")}function checkPrefix(a){a.value&&Validator.isEmail(a)&&!/^\s*mailto:/i.test(a.value)&&confirm(tinyMCEPopup.getLang("advlink_dlg.is_email"))&&(a.value="mailto:"+a.value),/^\s*www\./i.test(a.value)&&confirm(tinyMCEPopup.getLang("advlink_dlg.is_external"))&&(a.value="http://"+a.value)}function setFormValue(a,b){document.forms[0].elements[a].value=b}function parseWindowOpen(a){var b=document.forms[0];a.indexOf("return false;")!=-1?(b.popupreturn.checked=!0,a=a.replace("return false;","")):b.popupreturn.checked=!1;var c=parseLink(a);if(c!=null){b.ispopup.checked=!0,setPopupControlsDisabled(!1);var d=parseOptions(c.options),e=c.url;b.popupname.value=c.target,b.popupurl.value=e,b.popupwidth.value=getOption(d,"width"),b.popupheight.value=getOption(d,"height"),b.popupleft.value=getOption(d,"left"),b.popuptop.value=getOption(d,"top"),b.popupleft.value.indexOf("screen")!=-1&&(b.popupleft.value="c"),b.popuptop.value.indexOf("screen")!=-1&&(b.popuptop.value="c"),b.popuplocation.checked=getOption(d,"location")=="yes",b.popupscrollbars.checked=getOption(d,"scrollbars")=="yes",b.popupmenubar.checked=getOption(d,"menubar")=="yes",b.popupresizable.checked=getOption(d,"resizable")=="yes",b.popuptoolbar.checked=getOption(d,"toolbar")=="yes",b.popupstatus.checked=getOption(d,"status")=="yes",b.popupdependent.checked=getOption(d,"dependent")=="yes",buildOnClick()}}function parseFunction(a){var b=document.forms[0],c=parseLink(a)}function getOption(a,b){return typeof a[b]=="undefined"?"":a[b]}function setPopupControlsDisabled(a){var b=document.forms[0];b.popupname.disabled=a,b.popupurl.disabled=a,b.popupwidth.disabled=a,b.popupheight.disabled=a,b.popupleft.disabled=a,b.popuptop.disabled=a,b.popuplocation.disabled=a,b.popupscrollbars.disabled=a,b.popupmenubar.disabled=a,b.popupresizable.disabled=a,b.popuptoolbar.disabled=a,b.popupstatus.disabled=a,b.popupreturn.disabled=a,b.popupdependent.disabled=a,setBrowserDisabled("popupurlbrowser",a)}function parseLink(a){a=a.replace(new RegExp("&#39;","g"),"'");var b=a.replace(new RegExp("\\s*([A-Za-z0-9.]*)\\s*\\(.*","gi"),"$1"),c=templates[b];if(c){var d=c.match(new RegExp("'?\\$\\{[A-Za-z0-9.]*\\}'?","gi")),e="\\s*[A-Za-z0-9.]*\\s*\\(",f="";for(var g=0;g<d.length;g++)d[g].indexOf("'${")!=-1?e+="'(.*)'":e+="([0-9]*)",f+="$"+(g+1),d[g]=d[g].replace(new RegExp("[^A-Za-z0-9]","gi"),""),g!=d.length-1?(e+="\\s*,\\s*",f+="<delim>"):e+=".*";e+="\\);?";var h=[];h._function=b;var i=a.replace(new RegExp(e,"gi"),f).split("<delim>");for(var g=0;g<d.length;g++)h[d[g]]=i[g];return h}return null}function parseOptions(a){if(a==null||a=="")return[];a=a.toLowerCase(),a=a.replace(/;/g,","),a=a.replace(/[^0-9a-z=,]/g,"");var b=a.split(","),c=[];for(var d=0;d<b.length;d++){var e=b[d].split("=");e.length==2&&(c[e[0]]=e[1])}return c}function buildOnClick(){var a=document.forms[0];if(!a.ispopup.checked){a.onclick.value="";return}var b="window.open('",c=a.popupurl.value;b+=c+"','",b+=a.popupname.value+"','",a.popuplocation.checked&&(b+="location=yes,"),a.popupscrollbars.checked&&(b+="scrollbars=yes,"),a.popupmenubar.checked&&(b+="menubar=yes,"),a.popupresizable.checked&&(b+="resizable=yes,"),a.popuptoolbar.checked&&(b+="toolbar=yes,"),a.popupstatus.checked&&(b+="status=yes,"),a.popupdependent.checked&&(b+="dependent=yes,"),a.popupwidth.value!=""&&(b+="width="+a.popupwidth.value+","),a.popupheight.value!=""&&(b+="height="+a.popupheight.value+","),a.popupleft.value!=""&&(a.popupleft.value!="c"?b+="left="+a.popupleft.value+",":b+="left='+(screen.availWidth/2-"+a.popupwidth.value/2+")+',"),a.popuptop.value!=""&&(a.popuptop.value!="c"?b+="top="+a.popuptop.value+",":b+="top='+(screen.availHeight/2-"+a.popupheight.value/2+")+',"),b.charAt(b.length-1)==","&&(b=b.substring(0,b.length-1)),b+="');",a.popupreturn.checked&&(b+="return false;"),a.onclick.value=b,a.href.value==""&&(a.href.value=c)}function setAttrib(a,b,c){var d=document.forms[0],e=d.elements[b.toLowerCase()],f=tinyMCEPopup.editor.dom;if(typeof c=="undefined"||c==null)c="",e&&(c=e.value);b=="style"&&(c=f.serializeStyle(f.parseStyle(c),"a")),f.setAttrib(a,b,c)}function getAnchorListHTML(a,b){var c=tinyMCEPopup.editor,d=c.dom.select("a"),e,f,g,h="";for(f=0,g=d.length;f<g;f++)(e=c.dom.getAttrib(d[f],"name"))!=""&&(h+='<option value="#'+e+'">'+e+"</option>");return h==""?"":(h='<select id="'+a+'" name="'+a+'" class="mceAnchorList"'+' onchange="this.form.'+b+'.value=this.options[this.selectedIndex].value"'+">"+'<option value="">---</option>'+h+"</select>",h)}function insertAction(){var a=tinyMCEPopup.editor,b,c,d;b=a.selection.getNode(),checkPrefix(document.forms[0].href),b=a.dom.getParent(b,"A");if(!document.forms[0].href.value){d=a.selection.getBookmark(),a.dom.remove(b,1),a.selection.moveToBookmark(d),tinyMCEPopup.execCommand("mceEndUndoLevel"),tinyMCEPopup.close();return}if(b==null){a.getDoc().execCommand("unlink",!1,null),tinyMCEPopup.execCommand("mceInsertLink",!1,"#mce_temp_url#",{skip_undo:1}),c=tinymce.grep(a.dom.select("a"),function(b){return a.dom.getAttrib(b,"href")=="#mce_temp_url#"});for(d=0;d<c.length;d++)setAllAttribs(b=c[d])}else setAllAttribs(b);if(b.childNodes.length!=1||b.firstChild.nodeName!="IMG")a.focus(),a.selection.select(b),a.selection.collapse(0),tinyMCEPopup.storeSelection();tinyMCEPopup.execCommand("mceEndUndoLevel"),tinyMCEPopup.close()}function setAllAttribs(a){var b=document.forms[0],c=b.href.value.replace(/ /g,"%20"),d=getSelectValue(b,"targetlist");setAttrib(a,"href",c),setAttrib(a,"title"),setAttrib(a,"target",d=="_self"?"":d),setAttrib(a,"id"),setAttrib(a,"style"),setAttrib(a,"class",getSelectValue(b,"classlist")),setAttrib(a,"rel"),setAttrib(a,"rev"),setAttrib(a,"charset"),setAttrib(a,"hreflang"),setAttrib(a,"dir"),setAttrib(a,"lang"),setAttrib(a,"tabindex"),setAttrib(a,"accesskey"),setAttrib(a,"type"),setAttrib(a,"onfocus"),setAttrib(a,"onblur"),setAttrib(a,"onclick"),setAttrib(a,"ondblclick"),setAttrib(a,"onmousedown"),setAttrib(a,"onmouseup"),setAttrib(a,"onmouseover"),setAttrib(a,"onmousemove"),setAttrib(a,"onmouseout"),setAttrib(a,"onkeypress"),setAttrib(a,"onkeydown"),setAttrib(a,"onkeyup"),tinyMCE.isMSIE5&&(a.outerHTML=a.outerHTML)}function getSelectValue(a,b){var c=a.elements[b];return!c||c.options==null||c.selectedIndex==-1?"":c.options[c.selectedIndex].value}function getLinkListHTML(a,b,c){if(typeof tinyMCELinkList=="undefined"||tinyMCELinkList.length==0)return"";var d="";d+='<select id="'+a+'" name="'+a+'"',d+=' class="mceLinkList" onfoc2us="tinyMCE.addSelectAccessibility(event, this, window);" onchange="this.form.'+b+".value=",d+="this.options[this.selectedIndex].value;",typeof c!="undefined"&&(d+=c+"('"+b+"',this.options[this.selectedIndex].text,this.options[this.selectedIndex].value);"),d+='"><option value="">---</option>';for(var e=0;e<tinyMCELinkList.length;e++)d+='<option value="'+tinyMCELinkList[e][1]+'">'+tinyMCELinkList[e][0]+"</option>";return d+="</select>",d}function getTargetListHTML(a,b){var c=tinyMCEPopup.getParam("theme_advanced_link_targets","").split(";"),d="";d+='<select id="'+a+'" name="'+a+'" onf2ocus="tinyMCE.addSelectAccessibility(event, this, window);" onchange="this.form.'+b+".value=",d+='this.options[this.selectedIndex].value;">',d+='<option value="_self">'+tinyMCEPopup.getLang("advlink_dlg.target_same")+"</option>",d+='<option value="_blank">'+tinyMCEPopup.getLang("advlink_dlg.target_blank")+" (_blank)</option>",d+='<option value="_parent">'+tinyMCEPopup.getLang("advlink_dlg.target_parent")+" (_parent)</option>",d+='<option value="_top">'+tinyMCEPopup.getLang("advlink_dlg.target_top")+" (_top)</option>";for(var e=0;e<c.length;e++){var f,g;if(c[e]=="")continue;f=c[e].split("=")[0],g=c[e].split("=")[1],d+='<option value="'+f+'">'+g+" ("+f+")</option>"}return d+="</select>",d}function writeFlash(a){writeEmbed("D27CDB6E-AE6D-11cf-96B8-444553540000","http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0","application/x-shockwave-flash",a)}function writeShockWave(a){writeEmbed("166B1BCA-3F9C-11CF-8075-444553540000","http://download.macromedia.com/pub/shockwave/cabs/director/sw.cab#version=8,5,1,0","application/x-director",a)}function writeQuickTime(a){writeEmbed("02BF25D5-8C17-4B23-BC80-D3488ABDDC6B","http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0","video/quicktime",a)}function writeRealMedia(a){writeEmbed("CFCDAA03-8BE4-11cf-B84B-0020AFBBCCFA","http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0","audio/x-pn-realaudio-plugin",a)}function writeWindowsMedia(a){a.url=a.src,writeEmbed("6BF52A52-394A-11D3-B153-00C04F79FAA6","http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701","application/x-mplayer2",a)}function writeEmbed(a,b,c,d){var e="",f;e+='<object classid="clsid:'+a+'" codebase="'+b+'"',e+=typeof d.id!="undefined"?'id="'+d.id+'"':"",e+=typeof d.name!="undefined"?'name="'+d.name+'"':"",e+=typeof d.width!="undefined"?'width="'+d.width+'"':"",e+=typeof d.height!="undefined"?'height="'+d.height+'"':"",e+=typeof d.align!="undefined"?'align="'+d.align+'"':"",e+=">";for(f in d)e+='<param name="'+f+'" value="'+d[f]+'">';e+='<embed type="'+c+'"';for(f in d)e+=f+'="'+d[f]+'" ';e+="></embed></object>",document.write(e)}function writeFlash(a){writeEmbed("D27CDB6E-AE6D-11cf-96B8-444553540000","http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0","application/x-shockwave-flash",a)}function writeShockWave(a){writeEmbed("166B1BCA-3F9C-11CF-8075-444553540000","http://download.macromedia.com/pub/shockwave/cabs/director/sw.cab#version=8,5,1,0","application/x-director",a)}function writeQuickTime(a){writeEmbed("02BF25D5-8C17-4B23-BC80-D3488ABDDC6B","http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0","video/quicktime",a)}function writeRealMedia(a){writeEmbed("CFCDAA03-8BE4-11cf-B84B-0020AFBBCCFA","http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0","audio/x-pn-realaudio-plugin",a)}function writeWindowsMedia(a){a.url=a.src,writeEmbed("6BF52A52-394A-11D3-B153-00C04F79FAA6","http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701","application/x-mplayer2",a)}function writeEmbed(a,b,c,d){var e="",f;e+='<object classid="clsid:'+a+'" codebase="'+b+'"',e+=typeof d.id!="undefined"?'id="'+d.id+'"':"",e+=typeof d.name!="undefined"?'name="'+d.name+'"':"",e+=typeof d.width!="undefined"?'width="'+d.width+'"':"",e+=typeof d.height!="undefined"?'height="'+d.height+'"':"",e+=typeof d.align!="undefined"?'align="'+d.align+'"':"",e+=">";for(f in d)e+='<param name="'+f+'" value="'+d[f]+'">';e+='<embed type="'+c+'"';for(f in d)e+=f+'="'+d[f]+'" ';e+="></embed></object>",document.write(e)}function init(){var a=document.getElementById("container"),b;a.style.cssText=tinyMCEPopup.getWindowArg("style_text"),b=getBrowserHTML("background_image_browser","background_image","image","advimage"),document.getElementById("background_image_browser").innerHTML=b,document.getElementById("text_color_pickcontainer").innerHTML=getColorPickerHTML("text_color_pick","text_color"),document.getElementById("background_color_pickcontainer").innerHTML=getColorPickerHTML("background_color_pick","background_color"),document.getElementById("border_color_top_pickcontainer").innerHTML=getColorPickerHTML("border_color_top_pick","border_color_top"),document.getElementById("border_color_right_pickcontainer").innerHTML=getColorPickerHTML("border_color_right_pick","border_color_right"),document.getElementById("border_color_bottom_pickcontainer").innerHTML=getColorPickerHTML("border_color_bottom_pick","border_color_bottom"),document.getElementById("border_color_left_pickcontainer").innerHTML=getColorPickerHTML("border_color_left_pick","border_color_left"),fillSelect(0,"text_font","style_font",defaultFonts,";",!0),fillSelect(0,"text_size","style_font_size",defaultSizes,";",!0),fillSelect(0,"text_size_measurement","style_font_size_measurement",defaultMeasurement,";",!0),fillSelect(0,"text_case","style_text_case","capitalize;uppercase;lowercase",";",!0),fillSelect(0,"text_weight","style_font_weight",defaultWeight,";",!0),fillSelect(0,"text_style","style_font_style",defaultTextStyle,";",!0),fillSelect(0,"text_variant","style_font_variant",defaultVariant,";",!0),fillSelect(0,"text_lineheight","style_font_line_height",defaultLineHeight,";",!0),fillSelect(0,"text_lineheight_measurement","style_font_line_height_measurement",defaultMeasurement,";",!0),fillSelect(0,"background_attachment","style_background_attachment",defaultAttachment,";",!0),fillSelect(0,"background_repeat","style_background_repeat",defaultRepeat,";",!0),fillSelect(0,"background_hpos_measurement","style_background_hpos_measurement",defaultMeasurement,";",!0),fillSelect(0,"background_vpos_measurement","style_background_vpos_measurement",defaultMeasurement,";",!0),fillSelect(0,"background_hpos","style_background_hpos",defaultPosH,";",!0),fillSelect(0,"background_vpos","style_background_vpos",defaultPosV,";",!0),fillSelect(0,"block_wordspacing","style_wordspacing","normal",";",!0),fillSelect(0,"block_wordspacing_measurement","style_wordspacing_measurement",defaultSpacingMeasurement,";",!0),fillSelect(0,"block_letterspacing","style_letterspacing","normal",";",!0),fillSelect(0,"block_letterspacing_measurement","style_letterspacing_measurement",defaultSpacingMeasurement,";",!0),fillSelect(0,"block_vertical_alignment","style_vertical_alignment",defaultVAlign,";",!0),fillSelect(0,"block_text_align","style_text_align","left;right;center;justify",";",!0),fillSelect(0,"block_whitespace","style_whitespace","normal;pre;nowrap",";",!0),fillSelect(0,"block_display","style_display",defaultDisplay,";",!0),fillSelect(0,"block_text_indent_measurement","style_text_indent_measurement",defaultIndentMeasurement,";",!0),fillSelect(0,"box_width_measurement","style_box_width_measurement",defaultMeasurement,";",!0),fillSelect(0,"box_height_measurement","style_box_height_measurement",defaultMeasurement,";",!0),fillSelect(0,"box_float","style_float","left;right;none",";",!0),fillSelect(0,"box_clear","style_clear","left;right;both;none",";",!0),fillSelect(0,"box_padding_left_measurement","style_padding_left_measurement",defaultMeasurement,";",!0),fillSelect(0,"box_padding_top_measurement","style_padding_top_measurement",defaultMeasurement,";",!0),fillSelect(0,"box_padding_bottom_measurement","style_padding_bottom_measurement",defaultMeasurement,";",!0),fillSelect(0,"box_padding_right_measurement","style_padding_right_measurement",defaultMeasurement,";",!0),fillSelect(0,"box_margin_left_measurement","style_margin_left_measurement",defaultMeasurement,";",!0),fillSelect(0,"box_margin_top_measurement","style_margin_top_measurement",defaultMeasurement,";",!0),fillSelect(0,"box_margin_bottom_measurement","style_margin_bottom_measurement",defaultMeasurement,";",!0),fillSelect(0,"box_margin_right_measurement","style_margin_right_measurement",defaultMeasurement,";",!0),fillSelect(0,"border_style_top","style_border_style_top",defaultBorderStyle,";",!0),fillSelect(0,"border_style_right","style_border_style_right",defaultBorderStyle,";",!0),fillSelect(0,"border_style_bottom","style_border_style_bottom",defaultBorderStyle,";",!0),fillSelect(0,"border_style_left","style_border_style_left",defaultBorderStyle,";",!0),fillSelect(0,"border_width_top","style_border_width_top",defaultBorderWidth,";",!0),fillSelect(0,"border_width_right","style_border_width_right",defaultBorderWidth,";",!0),fillSelect(0,"border_width_bottom","style_border_width_bottom",defaultBorderWidth,";",!0),fillSelect(0,"border_width_left","style_border_width_left",defaultBorderWidth,";",!0),fillSelect(0,"border_width_top_measurement","style_border_width_top_measurement",defaultMeasurement,";",!0),fillSelect(0,"border_width_right_measurement","style_border_width_right_measurement",defaultMeasurement,";",!0),fillSelect(0,"border_width_bottom_measurement","style_border_width_bottom_measurement",defaultMeasurement,";",!0),fillSelect(0,"border_width_left_measurement","style_border_width_left_measurement",defaultMeasurement,";",!0),fillSelect(0,"list_type","style_list_type",defaultListType,";",!0),fillSelect(0,"list_position","style_list_position","inside;outside",";",!0),fillSelect(0,"positioning_type","style_positioning_type","absolute;relative;static",";",!0),fillSelect(0,"positioning_visibility","style_positioning_visibility","inherit;visible;hidden",";",!0),fillSelect(0,"positioning_width_measurement","style_positioning_width_measurement",defaultMeasurement,";",!0),fillSelect(0,"positioning_height_measurement","style_positioning_height_measurement",defaultMeasurement,";",!0),fillSelect(0,"positioning_overflow","style_positioning_overflow","visible;hidden;scroll;auto",";",!0),fillSelect(0,"positioning_placement_top_measurement","style_positioning_placement_top_measurement",defaultMeasurement,";",!0),fillSelect(0,"positioning_placement_right_measurement","style_positioning_placement_right_measurement",defaultMeasurement,";",!0),fillSelect(0,"positioning_placement_bottom_measurement","style_positioning_placement_bottom_measurement",defaultMeasurement,";",!0),fillSelect(0,"positioning_placement_left_measurement","style_positioning_placement_left_measurement",defaultMeasurement,";",!0),fillSelect(0,"positioning_clip_top_measurement","style_positioning_clip_top_measurement",defaultMeasurement,";",!0),fillSelect(0,"positioning_clip_right_measurement","style_positioning_clip_right_measurement",defaultMeasurement,";",!0),fillSelect(0,"positioning_clip_bottom_measurement","style_positioning_clip_bottom_measurement",defaultMeasurement,";",!0),fillSelect(0,"positioning_clip_left_measurement","style_positioning_clip_left_measurement",defaultMeasurement,";",!0),TinyMCE_EditableSelects.init(),setupFormData(),showDisabledControls()}function setupFormData(){var a=document.getElementById("container"),b=document.forms[0],c,d,e;selectByValue(b,"text_font",a.style.fontFamily,!0,!0),selectByValue(b,"text_size",getNum(a.style.fontSize),!0,!0),selectByValue(b,"text_size_measurement",getMeasurement(a.style.fontSize)),selectByValue(b,"text_weight",a.style.fontWeight,!0,!0),selectByValue(b,"text_style",a.style.fontStyle,!0,!0),selectByValue(b,"text_lineheight",getNum(a.style.lineHeight),!0,!0),selectByValue(b,"text_lineheight_measurement",getMeasurement(a.style.lineHeight)),selectByValue(b,"text_case",a.style.textTransform,!0,!0),selectByValue(b,"text_variant",a.style.fontVariant,!0,!0),b.text_color.value=tinyMCEPopup.editor.dom.toHex(a.style.color),updateColor("text_color_pick","text_color"),b.text_underline.checked=inStr(a.style.textDecoration,"underline"),b.text_overline.checked=inStr(a.style.textDecoration,"overline"),b.text_linethrough.checked=inStr(a.style.textDecoration,"line-through"),b.text_blink.checked=inStr(a.style.textDecoration,"blink"),b.background_color.value=tinyMCEPopup.editor.dom.toHex(a.style.backgroundColor),updateColor("background_color_pick","background_color"),b.background_image.value=a.style.backgroundImage.replace(new RegExp("url\\('?([^']*)'?\\)","gi"),"$1"),selectByValue(b,"background_repeat",a.style.backgroundRepeat,!0,!0),selectByValue(b,"background_attachment",a.style.backgroundAttachment,!0,!0),selectByValue(b,"background_hpos",getNum(getVal(a.style.backgroundPosition,0)),!0,!0),selectByValue(b,"background_hpos_measurement",getMeasurement(getVal(a.style.backgroundPosition,0))),selectByValue(b,"background_vpos",getNum(getVal(a.style.backgroundPosition,1)),!0,!0),selectByValue(b,"background_vpos_measurement",getMeasurement(getVal(a.style.backgroundPosition,1))),selectByValue(b,"block_wordspacing",getNum(a.style.wordSpacing),!0,!0),selectByValue(b,"block_wordspacing_measurement",getMeasurement(a.style.wordSpacing)),selectByValue(b,"block_letterspacing",getNum(a.style.letterSpacing),!0,!0),selectByValue(b,"block_letterspacing_measurement",getMeasurement(a.style.letterSpacing)),selectByValue(b,"block_vertical_alignment",a.style.verticalAlign,!0,!0),selectByValue(b,"block_text_align",a.style.textAlign,!0,!0),b.block_text_indent.value=getNum(a.style.textIndent),selectByValue(b,"block_text_indent_measurement",getMeasurement(a.style.textIndent)),selectByValue(b,"block_whitespace",a.style.whiteSpace,!0,!0),selectByValue(b,"block_display",a.style.display,!0,!0),b.box_width.value=getNum(a.style.width),selectByValue(b,"box_width_measurement",getMeasurement(a.style.width)),b.box_height.value=getNum(a.style.height),selectByValue(b,"box_height_measurement",getMeasurement(a.style.height)),selectByValue(b,"box_float",a.style.cssFloat||a.style.styleFloat,!0,!0),selectByValue(b,"box_clear",a.style.clear,!0,!0),setupBox(b,a,"box_padding","padding",""),setupBox(b,a,"box_margin","margin",""),setupBox(b,a,"border_style","border","Style"),setupBox(b,a,"border_width","border","Width"),setupBox(b,a,"border_color","border","Color"),updateColor("border_color_top_pick","border_color_top"),updateColor("border_color_right_pick","border_color_right"),updateColor("border_color_bottom_pick","border_color_bottom"),updateColor("border_color_left_pick","border_color_left"),b.elements.border_color_top.value=tinyMCEPopup.editor.dom.toHex(b.elements.border_color_top.value),b.elements.border_color_right.value=tinyMCEPopup.editor.dom.toHex(b.elements.border_color_right.value),b.elements.border_color_bottom.value=tinyMCEPopup.editor.dom.toHex(b.elements.border_color_bottom.value),b.elements.border_color_left.value=tinyMCEPopup.editor.dom.toHex(b.elements.border_color_left.value),selectByValue(b,"list_type",a.style.listStyleType,!0,!0),selectByValue(b,"list_position",a.style.listStylePosition,!0,!0),b.list_bullet_image.value=a.style.listStyleImage.replace(new RegExp("url\\('?([^']*)'?\\)","gi"),"$1"),selectByValue(b,"positioning_type",a.style.position,!0,!0),selectByValue(b,"positioning_visibility",a.style.visibility,!0,!0),selectByValue(b,"positioning_overflow",a.style.overflow,!0,!0),b.positioning_zindex.value=a.style.zIndex?a.style.zIndex:"",b.positioning_width.value=getNum(a.style.width),selectByValue(b,"positioning_width_measurement",getMeasurement(a.style.width)),b.positioning_height.value=getNum(a.style.height),selectByValue(b,"positioning_height_measurement",getMeasurement(a.style.height)),setupBox(b,a,"positioning_placement","","",["top","right","bottom","left"]),c=a.style.clip.replace(new RegExp("rect\\('?([^']*)'?\\)","gi"),"$1"),c=c.replace(/,/g," "),hasEqualValues([getVal(c,0),getVal(c,1),getVal(c,2),getVal(c,3)])?(b.positioning_clip_top.value=getNum(getVal(c,0)),selectByValue(b,"positioning_clip_top_measurement",getMeasurement(getVal(c,0))),b.positioning_clip_right.value=b.positioning_clip_bottom.value=b.positioning_clip_left.value):(b.positioning_clip_top.value=getNum(getVal(c,0)),selectByValue(b,"positioning_clip_top_measurement",getMeasurement(getVal(c,0))),b.positioning_clip_right.value=getNum(getVal(c,1)),selectByValue(b,"positioning_clip_right_measurement",getMeasurement(getVal(c,1))),b.positioning_clip_bottom.value=getNum(getVal(c,2)),selectByValue(b,"positioning_clip_bottom_measurement",getMeasurement(getVal(c,2))),b.positioning_clip_left.value=getNum(getVal(c,3)),selectByValue(b,"positioning_clip_left_measurement",getMeasurement(getVal(c,3))))}function getMeasurement(a){return a.replace(/^([0-9.]+)(.*)$/,"$2")}function getNum(a){return(new RegExp("^(?:[0-9.]+)(?:[a-z%]+)$","gi")).test(a)?a.replace(/[^0-9.]/g,""):a}function inStr(a,b){return(new RegExp(b,"gi")).test(a)}function getVal(a,b){var c=a.split(" ");return c.length>1?c[b]:""}function setValue(a,b,c){a.elements[b].type=="text"?a.elements[b].value=c:selectByValue(a,b,c,!0,!0)}function setupBox(a,b,c,d,e,f){typeof f=="undefined"&&(f=["Top","Right","Bottom","Left"]),isSame(b,d,e,f)?(a.elements[c+"_same"].checked=!0,setValue(a,c+"_top",getNum(b.style[d+f[0]+e])),a.elements[c+"_top"].disabled=!1,a.elements[c+"_right"].value="",a.elements[c+"_right"].disabled=!0,a.elements[c+"_bottom"].value="",a.elements[c+"_bottom"].disabled=!0,a.elements[c+"_left"].value="",a.elements[c+"_left"].disabled=!0,a.elements[c+"_top_measurement"]&&(selectByValue(a,c+"_top_measurement",getMeasurement(b.style[d+f[0]+e])),a.elements[c+"_left_measurement"].disabled=!0,a.elements[c+"_bottom_measurement"].disabled=!0,a.elements[c+"_right_measurement"].disabled=!0)):(a.elements[c+"_same"].checked=!1,setValue(a,c+"_top",getNum(b.style[d+f[0]+e])),a.elements[c+"_top"].disabled=!1,setValue(a,c+"_right",getNum(b.style[d+f[1]+e])),a.elements[c+"_right"].disabled=!1,setValue(a,c+"_bottom",getNum(b.style[d+f[2]+e])),a.elements[c+"_bottom"].disabled=!1,setValue(a,c+"_left",getNum(b.style[d+f[3]+e])),a.elements[c+"_left"].disabled=!1,a.elements[c+"_top_measurement"]&&(selectByValue(a,c+"_top_measurement",getMeasurement(b.style[d+f[0]+e])),selectByValue(a,c+"_right_measurement",getMeasurement(b.style[d+f[1]+e])),selectByValue(a,c+"_bottom_measurement",getMeasurement(b.style[d+f[2]+e])),selectByValue(a,c+"_left_measurement",getMeasurement(b.style[d+f[3]+e])),a.elements[c+"_left_measurement"].disabled=!1,a.elements[c+"_bottom_measurement"].disabled=!1,a.elements[c+"_right_measurement"].disabled=!1))}function isSame(a,b,c,d){var e=[],f,g;typeof d=="undefined"&&(d=["Top","Right","Bottom","Left"]);if(typeof c=="undefined"||c==null)c="";e[0]=a.style[b+d[0]+c],e[1]=a.style[b+d[1]+c],e[2]=a.style[b+d[2]+c],e[3]=a.style[b+d[3]+c];for(f=0;f<e.length;f++){if(e[f]==null)return!1;for(g=0;g<e.length;g++)if(e[g]!=e[f])return!1}return!0}function hasEqualValues(a){var b,c;for(b=0;b<a.length;b++){if(a[b]==null)return!1;for(c=0;c<a.length;c++)if(a[c]!=a[b])return!1}return!0}function applyAction(){var a=document.getElementById("container"),b=tinyMCEPopup.editor;generateCSS(),tinyMCEPopup.restoreSelection(),b.dom.setAttrib(b.selection.getSelectedBlocks(),"style",tinyMCEPopup.editor.dom.serializeStyle(tinyMCEPopup.editor.dom.parseStyle(a.style.cssText)))}function updateAction(){applyAction(),tinyMCEPopup.close()}function generateCSS(){var a=document.getElementById("container"),b=document.forms[0],c=new RegExp("[0-9]+","g"),d,e;a.style.cssText="",a.style.fontFamily=b.text_font.value,a.style.fontSize=b.text_size.value+(isNum(b.text_size.value)?b.text_size_measurement.value||"px":""),a.style.fontStyle=b.text_style.value,a.style.lineHeight=b.text_lineheight.value+(isNum(b.text_lineheight.value)?b.text_lineheight_measurement.value:""),a.style.textTransform=b.text_case.value,a.style.fontWeight=b.text_weight.value,a.style.fontVariant=b.text_variant.value,a.style.color=b.text_color.value,d="",d+=b.text_underline.checked?" underline":"",d+=b.text_overline.checked?" overline":"",d+=b.text_linethrough.checked?" line-through":"",d+=b.text_blink.checked?" blink":"",d=d.length>0?d.substring(1):d,b.text_none.checked&&(d="none"),a.style.textDecoration=d,a.style.backgroundColor=b.background_color.value,a.style.backgroundImage=b.background_image.value!=""?"url("+b.background_image.value+")":"",a.style.backgroundRepeat=b.background_repeat.value,a.style.backgroundAttachment=b.background_attachment.value,b.background_hpos.value!=""&&(d="",d+=b.background_hpos.value+(isNum(b.background_hpos.value)?b.background_hpos_measurement.value:"")+" ",d+=b.background_vpos.value+(isNum(b.background_vpos.value)?b.background_vpos_measurement.value:""),a.style.backgroundPosition=d),a.style.wordSpacing=b.block_wordspacing.value+(isNum(b.block_wordspacing.value)?b.block_wordspacing_measurement.value:""),a.style.letterSpacing=b.block_letterspacing.value+(isNum(b.block_letterspacing.value)?b.block_letterspacing_measurement.value:""),a.style.verticalAlign=b.block_vertical_alignment.value,a.style.textAlign=b.block_text_align.value,a.style.textIndent=b.block_text_indent.value+(isNum(b.block_text_indent.value)?b.block_text_indent_measurement.value:""),a.style.whiteSpace=b.block_whitespace.value,a.style.display=b.block_display.value,a.style.width=b.box_width.value+(isNum(b.box_width.value)?b.box_width_measurement.value:""),a.style.height=b.box_height.value+(isNum(b.box_height.value)?b.box_height_measurement.value:""),a.style.styleFloat=b.box_float.value,a.style.cssFloat=b.box_float.value,a.style.clear=b.box_clear.value,b.box_padding_same.checked?a.style.padding=b.box_padding_top.value+(isNum(b.box_padding_top.value)?b.box_padding_top_measurement.value:""):(a.style.paddingTop=b.box_padding_top.value+(isNum(b.box_padding_top.value)?b.box_padding_top_measurement.value:""),a.style.paddingRight=b.box_padding_right.value+(isNum(b.box_padding_right.value)?b.box_padding_right_measurement.value:""),a.style.paddingBottom=b.box_padding_bottom.value+(isNum(b.box_padding_bottom.value)?b.box_padding_bottom_measurement.value:""),a.style.paddingLeft=b.box_padding_left.value+(isNum(b.box_padding_left.value)?b.box_padding_left_measurement.value:"")),b.box_margin_same.checked?a.style.margin=b.box_margin_top.value+(isNum(b.box_margin_top.value)?b.box_margin_top_measurement.value:""):(a.style.marginTop=b.box_margin_top
.value+(isNum(b.box_margin_top.value)?b.box_margin_top_measurement.value:""),a.style.marginRight=b.box_margin_right.value+(isNum(b.box_margin_right.value)?b.box_margin_right_measurement.value:""),a.style.marginBottom=b.box_margin_bottom.value+(isNum(b.box_margin_bottom.value)?b.box_margin_bottom_measurement.value:""),a.style.marginLeft=b.box_margin_left.value+(isNum(b.box_margin_left.value)?b.box_margin_left_measurement.value:"")),b.border_style_same.checked?a.style.borderStyle=b.border_style_top.value:(a.style.borderTopStyle=b.border_style_top.value,a.style.borderRightStyle=b.border_style_right.value,a.style.borderBottomStyle=b.border_style_bottom.value,a.style.borderLeftStyle=b.border_style_left.value),b.border_width_same.checked?a.style.borderWidth=b.border_width_top.value+(isNum(b.border_width_top.value)?b.border_width_top_measurement.value:""):(a.style.borderTopWidth=b.border_width_top.value+(isNum(b.border_width_top.value)?b.border_width_top_measurement.value:""),a.style.borderRightWidth=b.border_width_right.value+(isNum(b.border_width_right.value)?b.border_width_right_measurement.value:""),a.style.borderBottomWidth=b.border_width_bottom.value+(isNum(b.border_width_bottom.value)?b.border_width_bottom_measurement.value:""),a.style.borderLeftWidth=b.border_width_left.value+(isNum(b.border_width_left.value)?b.border_width_left_measurement.value:"")),b.border_color_same.checked?a.style.borderColor=b.border_color_top.value:(a.style.borderTopColor=b.border_color_top.value,a.style.borderRightColor=b.border_color_right.value,a.style.borderBottomColor=b.border_color_bottom.value,a.style.borderLeftColor=b.border_color_left.value),a.style.listStyleType=b.list_type.value,a.style.listStylePosition=b.list_position.value,a.style.listStyleImage=b.list_bullet_image.value!=""?"url("+b.list_bullet_image.value+")":"",a.style.position=b.positioning_type.value,a.style.visibility=b.positioning_visibility.value,a.style.width==""&&(a.style.width=b.positioning_width.value+(isNum(b.positioning_width.value)?b.positioning_width_measurement.value:"")),a.style.height==""&&(a.style.height=b.positioning_height.value+(isNum(b.positioning_height.value)?b.positioning_height_measurement.value:"")),a.style.zIndex=b.positioning_zindex.value,a.style.overflow=b.positioning_overflow.value,b.positioning_placement_same.checked?(d=b.positioning_placement_top.value+(isNum(b.positioning_placement_top.value)?b.positioning_placement_top_measurement.value:""),a.style.top=d,a.style.right=d,a.style.bottom=d,a.style.left=d):(a.style.top=b.positioning_placement_top.value+(isNum(b.positioning_placement_top.value)?b.positioning_placement_top_measurement.value:""),a.style.right=b.positioning_placement_right.value+(isNum(b.positioning_placement_right.value)?b.positioning_placement_right_measurement.value:""),a.style.bottom=b.positioning_placement_bottom.value+(isNum(b.positioning_placement_bottom.value)?b.positioning_placement_bottom_measurement.value:""),a.style.left=b.positioning_placement_left.value+(isNum(b.positioning_placement_left.value)?b.positioning_placement_left_measurement.value:"")),b.positioning_clip_same.checked?(d="rect(",e=isNum(b.positioning_clip_top.value)?b.positioning_clip_top.value+b.positioning_clip_top_measurement.value:"auto",d+=e+" ",d+=e+" ",d+=e+" ",d+=e+")",d!="rect(auto auto auto auto)"&&(a.style.clip=d)):(d="rect(",d+=(isNum(b.positioning_clip_top.value)?b.positioning_clip_top.value+b.positioning_clip_top_measurement.value:"auto")+" ",d+=(isNum(b.positioning_clip_right.value)?b.positioning_clip_right.value+b.positioning_clip_right_measurement.value:"auto")+" ",d+=(isNum(b.positioning_clip_bottom.value)?b.positioning_clip_bottom.value+b.positioning_clip_bottom_measurement.value:"auto")+" ",d+=isNum(b.positioning_clip_left.value)?b.positioning_clip_left.value+b.positioning_clip_left_measurement.value:"auto",d+=")",d!="rect(auto auto auto auto)"&&(a.style.clip=d)),a.style.cssText=a.style.cssText}function isNum(a){return(new RegExp("[0-9]+","g")).test(a)}function showDisabledControls(){var a=document.forms,b,c;for(b=0;b<a.length;b++)for(c=0;c<a[b].elements.length;c++)a[b].elements[c].disabled?tinyMCEPopup.editor.dom.addClass(a[b].elements[c],"disabled"):tinyMCEPopup.editor.dom.removeClass(a[b].elements[c],"disabled")}function fillSelect(a,b,c,d,e,f){var g,h,i,j;a=document.forms[a],e=typeof e=="undefined"?";":e,f&&addSelectValue(a,b,"",""),h=tinyMCEPopup.getParam(c,d).split(e);for(g=0;g<h.length;g++)j=!1,h[g].charAt(0)=="+"&&(h[g]=h[g].substring(1),j=!0),i=h[g].split("="),i.length>1?(addSelectValue(a,b,i[0],i[1]),j&&selectByValue(a,b,i[1])):(addSelectValue(a,b,i[0],i[0]),j&&selectByValue(a,b,i[0]))}function toggleSame(a,b){var c=document.forms[0].elements,d;a.checked?(c[b+"_top"].disabled=!1,c[b+"_right"].disabled=!0,c[b+"_bottom"].disabled=!0,c[b+"_left"].disabled=!0,c[b+"_top_measurement"]&&(c[b+"_top_measurement"].disabled=!1,c[b+"_right_measurement"].disabled=!0,c[b+"_bottom_measurement"].disabled=!0,c[b+"_left_measurement"].disabled=!0)):(c[b+"_top"].disabled=!1,c[b+"_right"].disabled=!1,c[b+"_bottom"].disabled=!1,c[b+"_left"].disabled=!1,c[b+"_top_measurement"]&&(c[b+"_top_measurement"].disabled=!1,c[b+"_right_measurement"].disabled=!1,c[b+"_bottom_measurement"].disabled=!1,c[b+"_left_measurement"].disabled=!1)),showDisabledControls()}function synch(a,b){var c=document.forms[0];c.elements[b].value=c.elements[a].value,c.elements[a+"_measurement"]&&selectByValue(c,b+"_measurement",c.elements[a+"_measurement"].value)}function init(){ed=tinyMCEPopup.editor,tinyMCEPopup.resizeToInnerSize(),document.getElementById("backgroundimagebrowsercontainer").innerHTML=getBrowserHTML("backgroundimagebrowser","backgroundimage","image","table"),document.getElementById("bordercolor_pickcontainer").innerHTML=getColorPickerHTML("bordercolor_pick","bordercolor"),document.getElementById("bgcolor_pickcontainer").innerHTML=getColorPickerHTML("bgcolor_pick","bgcolor");var a=ed,b=ed.dom.getParent(ed.selection.getStart(),"td,th"),c=document.forms[0],d=ed.dom.parseStyle(ed.dom.getAttrib(b,"style")),e=b.nodeName.toLowerCase(),f=ed.dom.getAttrib(b,"align"),g=ed.dom.getAttrib(b,"valign"),h=trimSize(getStyle(b,"width","width")),i=trimSize(getStyle(b,"height","height")),j=convertRGBToHex(getStyle(b,"bordercolor","borderLeftColor")),k=convertRGBToHex(getStyle(b,"bgcolor","backgroundColor")),l=ed.dom.getAttrib(b,"class"),m=getStyle(b,"background","backgroundImage").replace(new RegExp("url\\(['\"]?([^'\"]*)['\"]?\\)","gi"),"$1"),n=ed.dom.getAttrib(b,"id"),o=ed.dom.getAttrib(b,"lang"),p=ed.dom.getAttrib(b,"dir"),q=ed.dom.getAttrib(b,"scope");addClassesToList("class","table_cell_styles"),TinyMCE_EditableSelects.init(),ed.dom.hasClass(b,"mceSelected")?tinyMCEPopup.dom.hide("action"):(c.bordercolor.value=j,c.bgcolor.value=k,c.backgroundimage.value=m,c.width.value=h,c.height.value=i,c.id.value=n,c.lang.value=o,c.style.value=ed.dom.serializeStyle(d),selectByValue(c,"align",f),selectByValue(c,"valign",g),selectByValue(c,"class",l,!0,!0),selectByValue(c,"celltype",e),selectByValue(c,"dir",p),selectByValue(c,"scope",q),isVisible("backgroundimagebrowser")&&(document.getElementById("backgroundimage").style.width="180px"),updateColor("bordercolor_pick","bordercolor"),updateColor("bgcolor_pick","bgcolor"))}function updateAction(){var a,b=ed,c,d,e,f=document.forms[0];if(!AutoValidator.validate(f))return tinyMCEPopup.alert(AutoValidator.getErrorMessages(f).join(". ")+"."),!1;tinyMCEPopup.restoreSelection(),a=ed.selection.getStart(),c=ed.dom.getParent(a,"td,th"),d=ed.dom.getParent(a,"tr"),e=ed.dom.getParent(a,"table");if(ed.dom.hasClass(c,"mceSelected")){tinymce.each(ed.dom.select("td.mceSelected,th.mceSelected"),function(a){updateCell(a)}),ed.addVisual(),ed.nodeChanged(),b.execCommand("mceEndUndoLevel"),tinyMCEPopup.close();return}switch(getSelectValue(f,"action")){case"cell":var g=getSelectValue(f,"celltype"),h=getSelectValue(f,"scope");function i(a){a&&(updateCell(c),ed.addVisual(),ed.nodeChanged(),b.execCommand("mceEndUndoLevel"),tinyMCEPopup.close())}if(ed.getParam("accessibility_warnings",1)){g=="th"&&h==""?tinyMCEPopup.confirm(ed.getLang("table_dlg.missing_scope","",!0),i):i(1);return}updateCell(c);break;case"row":var j=d.firstChild;j.nodeName!="TD"&&j.nodeName!="TH"&&(j=nextCell(j));do j=updateCell(j,!0);while((j=nextCell(j))!=null);break;case"col":var k,l=0,j=d.firstChild,m=e.getElementsByTagName("tr");j.nodeName!="TD"&&j.nodeName!="TH"&&(j=nextCell(j));do{if(j==c)break;l+=j.getAttribute("colspan")}while((j=nextCell(j))!=null);for(var n=0;n<m.length;n++){j=m[n].firstChild,j.nodeName!="TD"&&j.nodeName!="TH"&&(j=nextCell(j)),k=0;do{if(k==l){j=updateCell(j,!0);break}k+=j.getAttribute("colspan")}while((j=nextCell(j))!=null)}break;case"all":var m=e.getElementsByTagName("tr");for(var n=0;n<m.length;n++){var j=m[n].firstChild;j.nodeName!="TD"&&j.nodeName!="TH"&&(j=nextCell(j));do j=updateCell(j,!0);while((j=nextCell(j))!=null)}}ed.addVisual(),ed.nodeChanged(),b.execCommand("mceEndUndoLevel"),tinyMCEPopup.close()}function nextCell(a){while((a=a.nextSibling)!=null)if(a.nodeName=="TD"||a.nodeName=="TH")return a;return null}function updateCell(a,b){var c=ed,d=document.forms[0],e=a.nodeName.toLowerCase(),f=getSelectValue(d,"celltype"),g=c.getDoc(),h=ed.dom;b||h.setAttrib(a,"id",d.id.value),h.setAttrib(a,"align",d.align.value),h.setAttrib(a,"vAlign",d.valign.value),h.setAttrib(a,"lang",d.lang.value),h.setAttrib(a,"dir",getSelectValue(d,"dir")),h.setAttrib(a,"style",ed.dom.serializeStyle(ed.dom.parseStyle(d.style.value))),h.setAttrib(a,"scope",d.scope.value),h.setAttrib(a,"class",getSelectValue(d,"class")),ed.dom.setAttrib(a,"width",""),ed.dom.setAttrib(a,"height",""),ed.dom.setAttrib(a,"bgColor",""),ed.dom.setAttrib(a,"borderColor",""),ed.dom.setAttrib(a,"background",""),a.style.width=getCSSSize(d.width.value),a.style.height=getCSSSize(d.height.value),d.bordercolor.value!=""?(a.style.borderColor=d.bordercolor.value,a.style.borderStyle=a.style.borderStyle==""?"solid":a.style.borderStyle,a.style.borderWidth=a.style.borderWidth==""?"1px":a.style.borderWidth):a.style.borderColor="",a.style.backgroundColor=d.bgcolor.value,d.backgroundimage.value!=""?a.style.backgroundImage="url('"+d.backgroundimage.value+"')":a.style.backgroundImage="";if(e!=f){var i=g.createElement(f);for(var j=0;j<a.childNodes.length;j++)i.appendChild(a.childNodes[j].cloneNode(1));for(var k=0;k<a.attributes.length;k++)ed.dom.setAttrib(i,a.attributes[k].name,ed.dom.getAttrib(a,a.attributes[k].name));a.parentNode.replaceChild(i,a),a=i}return h.setAttrib(a,"style",h.serializeStyle(h.parseStyle(a.style.cssText))),a}function changedBackgroundImage(){var a=document.forms[0],b=ed.dom.parseStyle(a.style.value);b["background-image"]="url('"+a.backgroundimage.value+"')",a.style.value=ed.dom.serializeStyle(b)}function changedSize(){var a=document.forms[0],b=ed.dom.parseStyle(a.style.value),c=a.width.value;c!=""?b.width=getCSSSize(c):b.width="";var d=a.height.value;d!=""?b.height=getCSSSize(d):b.height="",a.style.value=ed.dom.serializeStyle(b)}function changedColor(){var a=document.forms[0],b=ed.dom.parseStyle(a.style.value);b["background-color"]=a.bgcolor.value,b["border-color"]=a.bordercolor.value,a.style.value=ed.dom.serializeStyle(b)}function changedStyle(){var a=document.forms[0],b=ed.dom.parseStyle(a.style.value);b["background-image"]?a.backgroundimage.value=b["background-image"].replace(new RegExp("url\\('?([^']*)'?\\)","gi"),"$1"):a.backgroundimage.value="",b.width&&(a.width.value=trimSize(b.width)),b.height&&(a.height.value=trimSize(b.height)),b["background-color"]&&(a.bgcolor.value=b["background-color"],updateColor("bgcolor_pick","bgcolor")),b["border-color"]&&(a.bordercolor.value=b["border-color"],updateColor("bordercolor_pick","bordercolor"))}function init(){tinyMCEPopup.resizeToInnerSize(),document.getElementById("backgroundimagebrowsercontainer").innerHTML=getBrowserHTML("backgroundimagebrowser","backgroundimage","image","table"),document.getElementById("bgcolor_pickcontainer").innerHTML=getColorPickerHTML("bgcolor_pick","bgcolor");var a=tinyMCEPopup.editor,b=a.dom,c=b.getParent(a.selection.getStart(),"tr"),d=document.forms[0],e=b.parseStyle(b.getAttrib(c,"style")),f=c.parentNode.nodeName.toLowerCase(),g=b.getAttrib(c,"align"),h=b.getAttrib(c,"valign"),i=trimSize(getStyle(c,"height","height")),j=b.getAttrib(c,"class"),k=convertRGBToHex(getStyle(c,"bgcolor","backgroundColor")),l=getStyle(c,"background","backgroundImage").replace(new RegExp("url\\(['\"]?([^'\"]*)['\"]?\\)","gi"),"$1"),m=b.getAttrib(c,"id"),n=b.getAttrib(c,"lang"),o=b.getAttrib(c,"dir");selectByValue(d,"rowtype",f),b.select("td.mceSelected,th.mceSelected",c).length==0?(addClassesToList("class","table_row_styles"),TinyMCE_EditableSelects.init(),d.bgcolor.value=k,d.backgroundimage.value=l,d.height.value=i,d.id.value=m,d.lang.value=n,d.style.value=b.serializeStyle(e),selectByValue(d,"align",g),selectByValue(d,"valign",h),selectByValue(d,"class",j,!0,!0),selectByValue(d,"dir",o),isVisible("backgroundimagebrowser")&&(document.getElementById("backgroundimage").style.width="180px"),updateColor("bgcolor_pick","bgcolor")):tinyMCEPopup.dom.hide("action")}function updateAction(){var a=tinyMCEPopup.editor,b=a.dom,c,d,e=document.forms[0],f=getSelectValue(e,"action");if(!AutoValidator.validate(e))return tinyMCEPopup.alert(AutoValidator.getErrorMessages(e).join(". ")+"."),!1;tinyMCEPopup.restoreSelection(),c=b.getParent(a.selection.getStart(),"tr"),d=b.getParent(a.selection.getStart(),"table");if(b.select("td.mceSelected,th.mceSelected",c).length>0){tinymce.each(d.rows,function(a){var c;for(c=0;c<a.cells.length;c++)if(b.hasClass(a.cells[c],"mceSelected")){updateRow(a,!0);return}}),a.addVisual(),a.nodeChanged(),a.execCommand("mceEndUndoLevel"),tinyMCEPopup.close();return}switch(f){case"row":updateRow(c);break;case"all":var g=d.getElementsByTagName("tr");for(var h=0;h<g.length;h++)updateRow(g[h],!0);break;case"odd":case"even":var g=d.getElementsByTagName("tr");for(var h=0;h<g.length;h++)(h%2==0&&f=="odd"||h%2!=0&&f=="even")&&updateRow(g[h],!0,!0)}a.addVisual(),a.nodeChanged(),a.execCommand("mceEndUndoLevel"),tinyMCEPopup.close()}function updateRow(a,b,c){var d=tinyMCEPopup.editor,e=document.forms[0],f=d.dom,g=a.parentNode.nodeName.toLowerCase(),h=getSelectValue(e,"rowtype"),i=d.getDoc();b||f.setAttrib(a,"id",e.id.value),f.setAttrib(a,"align",getSelectValue(e,"align")),f.setAttrib(a,"vAlign",getSelectValue(e,"valign")),f.setAttrib(a,"lang",e.lang.value),f.setAttrib(a,"dir",getSelectValue(e,"dir")),f.setAttrib(a,"style",f.serializeStyle(f.parseStyle(e.style.value))),f.setAttrib(a,"class",getSelectValue(e,"class")),f.setAttrib(a,"background",""),f.setAttrib(a,"bgColor",""),f.setAttrib(a,"height",""),a.style.height=getCSSSize(e.height.value),a.style.backgroundColor=e.bgcolor.value,e.backgroundimage.value!=""?a.style.backgroundImage="url('"+e.backgroundimage.value+"')":a.style.backgroundImage="";if(g!=h&&!c){var j=a.cloneNode(1),k=f.getParent(a,"table"),l=h,m=null;for(var n=0;n<k.childNodes.length;n++)k.childNodes[n].nodeName.toLowerCase()==l&&(m=k.childNodes[n]);m==null&&(m=i.createElement(l),k.firstChild.nodeName=="CAPTION"?d.dom.insertAfter(m,k.firstChild):k.insertBefore(m,k.firstChild)),m.appendChild(j),a.parentNode.removeChild(a),a=j}f.setAttrib(a,"style",f.serializeStyle(f.parseStyle(a.style.cssText)))}function changedBackgroundImage(){var a=document.forms[0],b=tinyMCEPopup.editor.dom,c=b.parseStyle(a.style.value);c["background-image"]="url('"+a.backgroundimage.value+"')",a.style.value=b.serializeStyle(c)}function changedStyle(){var a=document.forms[0],b=tinyMCEPopup.editor.dom,c=b.parseStyle(a.style.value);c["background-image"]?a.backgroundimage.value=c["background-image"].replace(new RegExp("url\\('?([^']*)'?\\)","gi"),"$1"):a.backgroundimage.value="",c.height&&(a.height.value=trimSize(c.height)),c["background-color"]&&(a.bgcolor.value=c["background-color"],updateColor("bgcolor_pick","bgcolor"))}function changedSize(){var a=document.forms[0],b=tinyMCEPopup.editor.dom,c=b.parseStyle(a.style.value),d=a.height.value;d!=""?c.height=getCSSSize(d):c.height="",a.style.value=b.serializeStyle(c)}function changedColor(){var a=document.forms[0],b=tinyMCEPopup.editor.dom,c=b.parseStyle(a.style.value);c["background-color"]=a.bgcolor.value,a.style.value=b.serializeStyle(c)}function insertTable(){var a=document.forms[0],b=tinyMCEPopup.editor,c=b.dom,d=2,e=2,f=0,g=-1,h=-1,i,j,k,l,m,n,o,p="",q,r,s,t,u;tinyMCEPopup.restoreSelection();if(!AutoValidator.validate(a))return tinyMCEPopup.alert(AutoValidator.getErrorMessages(a).join(". ")+"."),!1;r=c.getParent(b.selection.getNode(),"table"),d=a.elements.cols.value,e=a.elements.rows.value,f=a.elements["border"].value!=""?a.elements.border.value:0,g=a.elements["cellpadding"].value!=""?a.elements.cellpadding.value:"",h=a.elements["cellspacing"].value!=""?a.elements.cellspacing.value:"",i=getSelectValue(a,"align"),n=getSelectValue(a,"tframe"),o=getSelectValue(a,"rules"),j=a.elements.width.value,k=a.elements.height.value,bordercolor=a.elements.bordercolor.value,bgcolor=a.elements.bgcolor.value,l=getSelectValue(a,"class"),id=a.elements.id.value,summary=a.elements.summary.value,style=a.elements.style.value,dir=a.elements.dir.value,lang=a.elements.lang.value,background=a.elements.backgroundimage.value,m=a.elements.caption.checked,s=tinyMCEPopup.getParam("table_cell_limit",!1),t=tinyMCEPopup.getParam("table_row_limit",!1),u=tinyMCEPopup.getParam("table_col_limit",!1);if(u&&d>u)return tinyMCEPopup.alert(b.getLang("table_dlg.col_limit").replace(/\{\$cols\}/g,u)),!1;if(t&&e>t)return tinyMCEPopup.alert(b.getLang("table_dlg.row_limit").replace(/\{\$rows\}/g,t)),!1;if(s&&d*e>s)return tinyMCEPopup.alert(b.getLang("table_dlg.cell_limit").replace(/\{\$cells\}/g,s)),!1;if(action=="update")return c.setAttrib(r,"cellPadding",g,!0),c.setAttrib(r,"cellSpacing",h,!0),isCssSize(f)?c.setAttrib(r,"border",""):c.setAttrib(r,"border",f),f==""&&(c.setStyle(r,"border-width",""),c.setStyle(r,"border",""),c.setAttrib(r,"border","")),c.setAttrib(r,"align",i),c.setAttrib(r,"frame",n),c.setAttrib(r,"rules",o),c.setAttrib(r,"class",l),c.setAttrib(r,"style",style),c.setAttrib(r,"id",id),c.setAttrib(r,"summary",summary),c.setAttrib(r,"dir",dir),c.setAttrib(r,"lang",lang),q=b.dom.select("caption",r)[0],q&&!m&&q.parentNode.removeChild(q),!q&&m&&(q=r.ownerDocument.createElement("caption"),tinymce.isIE||(q.innerHTML='<br data-mce-bogus="1"/>'),r.insertBefore(q,r.firstChild)),j&&b.settings.inline_styles?(c.setStyle(r,"width",j),c.setAttrib(r,"width","")):(c.setAttrib(r,"width",j,!0),c.setStyle(r,"width","")),c.setAttrib(r,"borderColor",""),c.setAttrib(r,"bgColor",""),c.setAttrib(r,"background",""),k&&b.settings.inline_styles?(c.setStyle(r,"height",k),c.setAttrib(r,"height","")):(c.setAttrib(r,"height",k,!0),c.setStyle(r,"height","")),background!=""?r.style.backgroundImage="url('"+background+"')":r.style.backgroundImage="",bordercolor!=""?(r.style.borderColor=bordercolor,r.style.borderStyle=r.style.borderStyle==""?"solid":r.style.borderStyle,r.style.borderWidth=cssSize(f)):r.style.borderColor="",r.style.backgroundColor=bgcolor,r.style.height=getCSSSize(k),b.addVisual(),b.nodeChanged(),b.execCommand("mceEndUndoLevel"),(a.width.value!=orgTableWidth||a.height.value!=orgTableHeight)&&b.execCommand("mceRepaint"),tinyMCEPopup.close(),!0;p+="<table",p+=makeAttrib("id",id),isCssSize(f)||(p+=makeAttrib("border",f)),p+=makeAttrib("cellpadding",g),p+=makeAttrib("cellspacing",h),p+=makeAttrib("data-mce-new","1"),j&&b.settings.inline_styles?(style&&(style+="; "),/^[0-9\.]+$/.test(j)&&(j+="px"),style+="width: "+j):p+=makeAttrib("width",j),p+=makeAttrib("align",i),p+=makeAttrib("frame",n),p+=makeAttrib("rules",o),p+=makeAttrib("class",l),p+=makeAttrib("style",style),p+=makeAttrib("summary",summary),p+=makeAttrib("dir",dir),p+=makeAttrib("lang",lang),p+=">",m&&(tinymce.isIE?p+="<caption></caption>":p+='<caption><br data-mce-bogus="1"/></caption>');for(var v=0;v<e;v++){p+="<tr>";for(var w=0;w<d;w++)tinymce.isIE?p+="<td></td>":p+='<td><br data-mce-bogus="1"/></td>';p+="</tr>"}p+="</table>";if(b.settings.fix_table_elements){var x="";b.focus(),b.selection.setContent('<br class="_mce_marker" />'),tinymce.each("h1,h2,h3,h4,h5,h6,p".split(","),function(a){x&&(x+=","),x+=a+" ._mce_marker"}),tinymce.each(b.dom.select(x),function(a){b.dom.split(b.dom.getParent(a,"h1,h2,h3,h4,h5,h6,p"),a)}),c.setOuterHTML(c.select("br._mce_marker")[0],p)}else b.execCommand("mceInsertContent",!1,p);tinymce.each(c.select("table[data-mce-new]"),function(a){var d=c.select("td,th",a);try{b.selection.setCursorLocation(d[0],0)}catch(e){}c.setAttrib(a,"data-mce-new","")}),b.addVisual(),b.execCommand("mceEndUndoLevel"),tinyMCEPopup.close()}function makeAttrib(a,b){var c=document.forms[0],d=c.elements[a];if(typeof b=="undefined"||b==null)b="",d&&(b=d.value);return b==""?"":(b=b.replace(/&/g,"&amp;"),b=b.replace(/\"/g,"&quot;"),b=b.replace(/</g,"&lt;"),b=b.replace(/>/g,"&gt;")," "+a+'="'+b+'"')}function init(){tinyMCEPopup.resizeToInnerSize(),document.getElementById("backgroundimagebrowsercontainer").innerHTML=getBrowserHTML("backgroundimagebrowser","backgroundimage","image","table"),document.getElementById("backgroundimagebrowsercontainer").innerHTML=getBrowserHTML("backgroundimagebrowser","backgroundimage","image","table"),document.getElementById("bordercolor_pickcontainer").innerHTML=getColorPickerHTML("bordercolor_pick","bordercolor"),document.getElementById("bgcolor_pickcontainer").innerHTML=getColorPickerHTML("bgcolor_pick","bgcolor");var a=2,b=2,c=tinyMCEPopup.getParam("table_default_border","0"),d=tinyMCEPopup.getParam("table_default_cellpadding",""),e=tinyMCEPopup.getParam("table_default_cellspacing",""),f="",g="",h="",i="",j="",k="",l="",m="",n="",o="",p="",q="",j="",i="",r="",s="",t=tinyMCEPopup.editor,u=t.dom,v=document.forms[0],w=u.getParent(t.selection.getNode(),"table");action=tinyMCEPopup.getWindowArg("action"),action||(action=w?"update":"insert");if(w&&action!="insert"){var x=w.rows,a=0;for(var y=0;y<x.length;y++)x[y].cells.length>a&&(a=x[y].cells.length);a=a,b=x.length,st=u.parseStyle(u.getAttrib(w,"style")),c=trimSize(getStyle(w,"border","borderWidth")),d=u.getAttrib(w,"cellpadding",""),e=u.getAttrib(w,"cellspacing",""),g=trimSize(getStyle(w,"width","width")),h=trimSize(getStyle(w,"height","height")),i=convertRGBToHex(getStyle(w,"bordercolor","borderLeftColor")),j=convertRGBToHex(getStyle(w,"bgcolor","backgroundColor")),f=u.getAttrib(w,"align",f),s=u.getAttrib(w,"frame"),r=u.getAttrib(w,"rules"),k=tinymce.trim(u.getAttrib(w,"class").replace(/mceItem.+/g,"")),l=u.getAttrib(w,"id"),m=u.getAttrib(w,"summary"),n=u.serializeStyle(st),o=u.getAttrib(w,"dir"),p=u.getAttrib(w,"lang"),q=getStyle(w,"background","backgroundImage").replace(new RegExp("url\\(['\"]?([^'\"]*)['\"]?\\)","gi"),"$1"),v.caption.checked=w.getElementsByTagName("caption").length>0,orgTableWidth=g,orgTableHeight=h,action="update",v.insert.value=t.getLang("update")}addClassesToList("class","table_styles"),TinyMCE_EditableSelects.init(),selectByValue(v,"align",f),selectByValue(v,"tframe",s),selectByValue(v,"rules",r),selectByValue(v,"class",k,!0,!0),v.cols.value=a,v.rows.value=b,v.border.value=c,v.cellpadding.value=d,v.cellspacing.value=e,v.width.value=g,v.height.value=h,v.bordercolor.value=i,v.bgcolor.value=j,v.id.value=l,v.summary.value=m,v.style.value=n,v.dir.value=o,v.lang.value=p,v.backgroundimage.value=q,updateColor("bordercolor_pick","bordercolor"),updateColor("bgcolor_pick","bgcolor"),isVisible("backgroundimagebrowser")&&(document.getElementById("backgroundimage").style.width="180px"),action=="update"&&(v.cols.disabled=!0,v.rows.disabled=!0)}function changedSize(){var a=document.forms[0],b=dom.parseStyle(a.style.value),c=a.height.value;c!=""?b.height=getCSSSize(c):b.height="",a.style.value=dom.serializeStyle(b)}function isCssSize(a){return/^[0-9.]+(%|in|cm|mm|em|ex|pt|pc|px)$/.test(a)}function cssSize(a,b){return a=tinymce.trim(a||b),isCssSize(a)?a:parseInt(a,10)+"px"}function changedBackgroundImage(){var a=document.forms[0],b=dom.parseStyle(a.style.value);b["background-image"]="url('"+a.backgroundimage.value+"')",a.style.value=dom.serializeStyle(b)}function changedBorder(){var a=document.forms[0],b=dom.parseStyle(a.style.value);a.border.value==""||!isCssSize(a.border.value)&&a.bordercolor.value==""?a.border.value||(b.border="",b["border-width"]=""):b["border-width"]=cssSize(a.border.value),a.style.value=dom.serializeStyle(b)}function changedColor(){var a=document.forms[0],b=dom.parseStyle(a.style.value);b["background-color"]=a.bgcolor.value,a.bordercolor.value!=""&&(b["border-color"]=a.bordercolor.value,b["border-width"]||(b["border-width"]=cssSize(a.border.value,1))),a.style.value=dom.serializeStyle(b)}function changedStyle(){var a=document.forms[0],b=dom.parseStyle(a.style.value);b["background-image"]?a.backgroundimage.value=b["background-image"].replace(new RegExp("url\\(['\"]?([^'\"]*)['\"]?\\)","gi"),"$1"):a.backgroundimage.value="",b.width&&(a.width.value=trimSize(b.width)),b.height&&(a.height.value=trimSize(b.height)),b["background-color"]&&(a.bgcolor.value=b["background-color"],updateColor("bgcolor_pick","bgcolor")),b["border-color"]&&(a.bordercolor.value=b["border-color"],updateColor("bordercolor_pick","bordercolor"))}function init(){SXE.initElementDialog("abbr"),SXE.currentAction=="update"&&SXE.showRemoveButton()}function insertAbbr(){SXE.insertElement("abbr"),tinyMCEPopup.close()}function removeAbbr(){SXE.removeElement("abbr"),tinyMCEPopup.close()}function init(){SXE.initElementDialog("acronym"),SXE.currentAction=="update"&&SXE.showRemoveButton()}function insertAcronym(){SXE.insertElement("acronym"),tinyMCEPopup.close()}function removeAcronym(){SXE.removeElement("acronym"),tinyMCEPopup.close()}function init(){tinyMCEPopup.resizeToInnerSize();var a=tinyMCEPopup.editor,b=a.dom,c=a.selection.getNode(),d=document.forms[0],e=b.getAttrib(c,"onclick");setFormValue("title",b.getAttrib(c,"title")),setFormValue("id",b.getAttrib(c,"id")),setFormValue("style",b.getAttrib(c,"style")),setFormValue("dir",b.getAttrib(c,"dir")),setFormValue("lang",b.getAttrib(c,"lang")),setFormValue("tabindex",b.getAttrib(c,"tabindex",typeof c.tabindex!="undefined"?c.tabindex:"")),setFormValue("accesskey",b.getAttrib(c,"accesskey",typeof c.accesskey!="undefined"?c.accesskey:"")),setFormValue("onfocus",b.getAttrib(c,"onfocus")),setFormValue("onblur",b.getAttrib(c,"onblur")),setFormValue("onclick",e),setFormValue("ondblclick",b.getAttrib(c,"ondblclick")),setFormValue("onmousedown",b.getAttrib(c,"onmousedown")),setFormValue("onmouseup",b.getAttrib(c,"onmouseup")),setFormValue("onmouseover",b.getAttrib(c,"onmouseover")),setFormValue("onmousemove",b.getAttrib(c,"onmousemove")),setFormValue("onmouseout",b.getAttrib(c,"onmouseout")),setFormValue("onkeypress",b.getAttrib(c,"onkeypress")),setFormValue("onkeydown",b.getAttrib(c,"onkeydown")),setFormValue("onkeyup",b.getAttrib(c,"onkeyup")),className=b.getAttrib(c,"class"),addClassesToList("classlist","advlink_styles"),selectByValue(d,"classlist",className,!0),TinyMCE_EditableSelects.init()}function setFormValue(a,b){b&&document.forms[0].elements[a]&&(document.forms[0].elements[a].value=b)}function insertAction(){var a=tinyMCEPopup.editor,b=a.selection.getNode();setAllAttribs(b),tinyMCEPopup.execCommand("mceEndUndoLevel"),tinyMCEPopup.close()}function setAttrib(a,b,c){var d=document.forms[0],e=d.elements[b.toLowerCase()],f=tinyMCEPopup.editor,g=f.dom;if(typeof c=="undefined"||c==null)c="",e&&(c=e.value);g.setAttrib(a,b.toLowerCase(),c)}function setAllAttribs(a){var b=document.forms[0];setAttrib(a,"title"),setAttrib(a,"id"),setAttrib(a,"style"),setAttrib(a,"class",getSelectValue(b,"classlist")),setAttrib(a,"dir"),setAttrib(a,"lang"),setAttrib(a,"tabindex"),setAttrib(a,"accesskey"),setAttrib(a,"onfocus"),setAttrib(a,"onblur"),setAttrib(a,"onclick"),setAttrib(a,"ondblclick"),setAttrib(a,"onmousedown"),setAttrib(a,"onmouseup"),setAttrib(a,"onmouseover"),setAttrib(a,"onmousemove"),setAttrib(a,"onmouseout"),setAttrib(a,"onkeypress"),setAttrib(a,"onkeydown"),setAttrib(a,"onkeyup")}function insertAttribute(){tinyMCEPopup.close()}function init(){SXE.initElementDialog("cite"),SXE.currentAction=="update"&&SXE.showRemoveButton()}function insertCite(){SXE.insertElement("cite"),tinyMCEPopup.close()}function removeCite(){SXE.removeElement("cite"),tinyMCEPopup.close()}function init(){SXE.initElementDialog("del"),SXE.currentAction=="update"&&(setFormValue("datetime",tinyMCEPopup.editor.dom.getAttrib(SXE.updateElement,"datetime")),setFormValue("cite",tinyMCEPopup.editor.dom.getAttrib(SXE.updateElement,"cite")),SXE.showRemoveButton())}function setElementAttribs(a){setAllCommonAttribs(a),setAttrib(a,"datetime"),setAttrib(a,"cite"),a.removeAttribute("data-mce-new")}function insertDel(){var a=tinyMCEPopup.editor.dom.getParent(SXE.focusElement,"DEL");if(a==null){var b=SXE.inst.selection.getContent();if(b.length>0){insertInlineElement("del");var c=SXE.inst.dom.select("del[data-mce-new]");for(var d=0;d<c.length;d++){var a=c[d];setElementAttribs(a)}}}else setElementAttribs(a);tinyMCEPopup.editor.nodeChanged(),tinyMCEPopup.execCommand("mceEndUndoLevel"),tinyMCEPopup.close()}function removeDel(){SXE.removeElement("del"),tinyMCEPopup.close()}function initCommonAttributes(a){var b=document.forms[0],c=tinyMCEPopup.editor.dom;setFormValue("title",c.getAttrib(a,"title")),setFormValue("id",c.getAttrib(a,"id")),selectByValue(b,"class",c.getAttrib(a,"class"),!0),setFormValue("style",c.getAttrib(a,"style")),selectByValue(b,"dir",c.getAttrib(a,"dir")),setFormValue("lang",c.getAttrib(a,"lang")),setFormValue("onfocus",c.getAttrib(a,"onfocus")),setFormValue("onblur",c.getAttrib(a,"onblur")),setFormValue("onclick",c.getAttrib(a,"onclick")),setFormValue("ondblclick",c.getAttrib(a,"ondblclick")),setFormValue("onmousedown",c.getAttrib(a,"onmousedown")),setFormValue("onmouseup",c.getAttrib(a,"onmouseup")),setFormValue("onmouseover",c.getAttrib(a,"onmouseover")),setFormValue("onmousemove",c.getAttrib(a,"onmousemove")),setFormValue("onmouseout",c.getAttrib(a,"onmouseout")),setFormValue("onkeypress",c.getAttrib(a,"onkeypress")),setFormValue("onkeydown",c.getAttrib(a,"onkeydown")),setFormValue("onkeyup",c.getAttrib(a,"onkeyup"))}function setFormValue(a,b){document.forms[0].elements[a]&&(document.forms[0].elements[a].value=b)}function insertDateTime(a){document.getElementById(a).value=getDateTime(new Date,"%Y-%m-%dT%H:%M:%S")}function getDateTime(a,b){return b=b.replace("%D","%m/%d/%y"),b=b.replace("%r","%I:%M:%S %p"),b=b.replace("%Y",""+a.getFullYear()),b=b.replace("%y",""+a.getYear()),b=b.replace("%m",addZeros(a.getMonth()+1,2)),b=b.replace("%d",addZeros(a.getDate(),2)),b=b.replace("%H",""+addZeros(a.getHours(),2)),b=b.replace("%M",""+addZeros(a.getMinutes(),2)),b=b.replace("%S",""+addZeros(a.getSeconds(),2)),b=b.replace("%I",""+((a.getHours()+11)%12+1)),b=b.replace("%p",""+(a.getHours()<12?"AM":"PM")),b=b.replace("%%","%"),b}function addZeros(a,b){var c;a=""+a;if(a.length<b)for(c=0;c<b-a.length;c++)a="0"+a;return a}function selectByValue(a,b,c,d,e){if(!a||!a.elements[b])return;var f=a.elements[b],g=!1;for(var h=0;h<f.options.length;h++){var i=f.options[h];i.value==c||e&&i.value.toLowerCase()==c.toLowerCase()?(i.selected=!0,g=!0):i.selected=!1}if(!g&&d&&c!=""){var i=new Option("Value: "+c,c);i.selected=!0,f.options[f.options.length]=i}return g}function setAttrib(a,b,c){var d=document.forms[0],e=d.elements[b.toLowerCase()];tinyMCEPopup.editor.dom.setAttrib(a,b,c||e.value)}function setAllCommonAttribs(a){setAttrib(a,"title"),setAttrib(a,"id"),setAttrib(a,"class"),setAttrib(a,"style"),setAttrib(a,"dir"),setAttrib(a,"lang")}function insertInlineElement(a){var b=tinyMCEPopup.editor,c=b.dom;b.getDoc().execCommand("FontName",!1,"mceinline"),tinymce.each(c.select("span,font"),function(b){(b.style.fontFamily=="mceinline"||b.face=="mceinline")&&c.replace(c.create(a,{"data-mce-new":1}),b,1)})}function init(){SXE.initElementDialog("ins"),SXE.currentAction=="update"&&(setFormValue("datetime",tinyMCEPopup.editor.dom.getAttrib(SXE.updateElement,"datetime")),setFormValue("cite",tinyMCEPopup.editor.dom.getAttrib(SXE.updateElement,"cite")),SXE.showRemoveButton())}function setElementAttribs(a){setAllCommonAttribs(a),setAttrib(a,"datetime"),setAttrib(a,"cite"),a.removeAttribute("data-mce-new")}function insertIns(){var a=tinyMCEPopup.editor.dom.getParent(SXE.focusElement,"INS");if(a==null){var b=SXE.inst.selection.getContent();if(b.length>0){insertInlineElement("ins");var c=SXE.inst.dom.select("ins[data-mce-new]");for(var d=0;d<c.length;d++){var a=c[d];setElementAttribs(a)}}}else setElementAttribs(a);tinyMCEPopup.editor.nodeChanged(),tinyMCEPopup.execCommand("mceEndUndoLevel"),tinyMCEPopup.close()}function removeIns(){SXE.removeElement
("ins"),tinyMCEPopup.close()}function init(){var a,b;tinyMCEPopup.resizeToInnerSize(),a=tinyMCEPopup.editor,window.setTimeout(insertHelpIFrame,10),b=document.getElementById("plugintablecontainer"),document.getElementById("plugins_tab").style.display="none";var c="";c+='<table id="plugintable">',c+="<thead>",c+="<tr>",c+="<td>"+a.getLang("advanced_dlg.about_plugin")+"</td>",c+="<td>"+a.getLang("advanced_dlg.about_author")+"</td>",c+="<td>"+a.getLang("advanced_dlg.about_version")+"</td>",c+="</tr>",c+="</thead>",c+="<tbody>",tinymce.each(a.plugins,function(a,b){var d;if(!a.getInfo)return;c+="<tr>",d=a.getInfo(),d.infourl!=null&&d.infourl!=""?c+='<td width="50%" title="'+b+'"><a href="'+d.infourl+'" target="_blank">'+d.longname+"</a></td>":c+='<td width="50%" title="'+b+'">'+d.longname+"</td>",d.authorurl!=null&&d.authorurl!=""?c+='<td width="35%"><a href="'+d.authorurl+'" target="_blank">'+d.author+"</a></td>":c+='<td width="35%">'+d.author+"</td>",c+='<td width="15%">'+d.version+"</td>",c+="</tr>",document.getElementById("plugins_tab").style.display=""}),c+="</tbody>",c+="</table>",b.innerHTML=c,tinyMCEPopup.dom.get("version").innerHTML=tinymce.majorVersion+"."+tinymce.minorVersion,tinyMCEPopup.dom.get("date").innerHTML=tinymce.releaseDate}function insertHelpIFrame(){var a;tinyMCEPopup.getParam("docs_url")&&(a='<iframe width="100%" height="300" src="'+tinyMCEPopup.editor.baseURI.toAbsolute(tinyMCEPopup.getParam("docs_url"))+'"></iframe>',document.getElementById("iframecontainer").innerHTML=a,document.getElementById("help_tab").style.display="block",document.getElementById("help_tab").setAttribute("aria-hidden","false"))}function addKeyboardNavigation(){var a,b,c;b=tinyMCEPopup.dom.select("a.charmaplink","charmapgroup"),c={root:"charmapgroup",items:b},b[0].tabindex=0,tinyMCEPopup.dom.addClass(b[0],"mceFocus"),tinymce.isGecko?b[0].focus():setTimeout(function(){b[0].focus()},100),tinyMCEPopup.editor.windowManager.createInstance("tinymce.ui.KeyboardNavigation",c,tinyMCEPopup.dom)}function renderCharMapHTML(){var a=20,b=20,c=20,d,e='<div id="charmapgroup" aria-labelledby="charmap_label" tabindex="0" role="listbox"><table role="presentation" border="0" cellspacing="1" cellpadding="0" width="'+b*a+'"><tr height="'+c+'">',f=-1;for(d=0;d<charmap.length;d++){var g;charmap[d][2]==1&&(f++,g="previewChar('"+charmap[d][1].substring(1,charmap[d][1].length)+"','"+charmap[d][0].substring(1,charmap[d][0].length)+"','"+charmap[d][3]+"');",e+='<td class="charmap"><a class="charmaplink" role="button" onmouseover="'+g+'" onfocus="'+g+'" href="javascript:void(0)" onclick="insertChar(\''+charmap[d][1].substring(2,charmap[d][1].length-1)+'\');" onclick="return false;" onmousedown="return false;" title="'+charmap[d][3]+" "+tinyMCEPopup.editor.translate("advanced_dlg.charmap_usage")+'">'+charmap[d][1]+"</a></td>",(f+1)%a==0&&(e+='</tr><tr height="'+c+'">'))}if(f%a>0){var h=a-f%a;for(var d=0;d<h-1;d++)e+='<td width="'+b+'" height="'+c+'" class="charmap">&nbsp;</td>'}return e+="</tr></table></div>",e=e.replace(/<tr height="20"><\/tr>/g,""),e}function insertChar(a){tinyMCEPopup.execCommand("mceInsertContent",!1,"&#"+a+";"),tinyMCEPopup.isWindow&&window.focus(),tinyMCEPopup.editor.focus(),tinyMCEPopup.close()}function previewChar(a,b,c){var d=document.getElementById("codeA"),e=document.getElementById("codeB"),f=document.getElementById("codeV"),g=document.getElementById("codeN");a=="#160;"?f.innerHTML="__":f.innerHTML="&"+a,e.innerHTML="&amp;"+a,d.innerHTML="&amp;"+b,g.innerHTML=c}function init(){var a=convertRGBToHex(tinyMCEPopup.getWindowArg("input_color")),b,c;tinyMCEPopup.resizeToInnerSize(),generatePicker(),generateWebColors(),generateNamedColors(),a&&(changeFinalColor(a),col=convertHexToRGB(a),col&&updateLight(col.r,col.g,col.b));for(b in named)c=named[b],namedLookup[c.replace(/\s+/,"").toLowerCase()]=b.replace(/#/,"").toLowerCase()}function toHexColor(a){function g(a){return a=parseInt(a).toString(16),a.length>1?a:"0"+a}var b,c,d,e,f=parseInt;return a=a.replace(/[\s#]+/g,"").toLowerCase(),a=namedLookup[a]||a,b=/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)|([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})|([a-f0-9])([a-f0-9])([a-f0-9])$/.exec(a),b?(b[1]?(c=f(b[1]),d=f(b[2]),e=f(b[3])):b[4]?(c=f(b[4],16),d=f(b[5],16),e=f(b[6],16)):b[7]&&(c=f(b[7]+b[7],16),d=f(b[8]+b[8],16),e=f(b[9]+b[9],16)),"#"+g(c)+g(d)+g(e)):""}function insertAction(){var a=document.getElementById("color").value,b=tinyMCEPopup.getWindowArg("func");tinyMCEPopup.restoreSelection(),b&&b(toHexColor(a)),tinyMCEPopup.close()}function showColor(a,b){b&&(document.getElementById("colorname").innerHTML=b),document.getElementById("preview").style.backgroundColor=a,document.getElementById("color").value=a.toUpperCase()}function convertRGBToHex(a){var c=new RegExp("rgb\\s*\\(\\s*([0-9]+).*,\\s*([0-9]+).*,\\s*([0-9]+).*\\)","gi");if(!a)return a;var d=a.replace(c,"$1,$2,$3").split(",");return d.length==3?(r=parseInt(d[0]).toString(16),g=parseInt(d[1]).toString(16),b=parseInt(d[2]).toString(16),r=r.length==1?"0"+r:r,g=g.length==1?"0"+g:g,b=b.length==1?"0"+b:b,"#"+r+g+b):a}function convertHexToRGB(a){return a.indexOf("#")!=-1?(a=a.replace(new RegExp("[^0-9A-F]","gi"),""),r=parseInt(a.substring(0,2),16),g=parseInt(a.substring(2,4),16),b=parseInt(a.substring(4,6),16),{r:r,g:g,b:b}):null}function generatePicker(){var a=document.getElementById("light"),b="",c;for(c=0;c<detail;c++)b+='<div id="gs'+c+'" style="background-color:#000000; width:15px; height:3px; border-style:none; border-width:0px;"'+' onclick="changeFinalColor(this.style.backgroundColor)"'+' onmousedown="isMouseDown = true; return false;"'+' onmouseup="isMouseDown = false;"'+' onmousemove="if (isMouseDown && isMouseOver) changeFinalColor(this.style.backgroundColor); return false;"'+' onmouseover="isMouseOver = true;"'+' onmouseout="isMouseOver = false;"'+"></div>";a.innerHTML=b}function generateWebColors(){var a=document.getElementById("webcolors"),b="",c;if(a.className=="generated")return;b+='<div role="listbox" aria-labelledby="webcolors_title" tabindex="0"><table role="presentation" border="0" cellspacing="1" cellpadding="0"><tr>';for(c=0;c<colors.length;c++)b+='<td bgcolor="'+colors[c]+'" width="10" height="10">'+'<a href="javascript:insertAction();" role="option" tabindex="-1" aria-labelledby="web_colors_'+c+'" onfocus="showColor(\''+colors[c]+"');\" onmouseover=\"showColor('"+colors[c]+'\');" style="display:block;width:10px;height:10px;overflow:hidden;">',tinyMCEPopup.editor.forcedHighContrastMode&&(b+='<canvas class="mceColorSwatch" height="10" width="10" data-color="'+colors[c]+'"></canvas>'),b+='<span class="mceVoiceLabel" style="display:none;" id="web_colors_'+c+'">'+colors[c].toUpperCase()+"</span>",b+="</a></td>",(c+1)%18==0&&(b+="</tr><tr>");b+="</table></div>",a.innerHTML=b,a.className="generated",paintCanvas(a),enableKeyboardNavigation(a.firstChild)}function paintCanvas(a){tinyMCEPopup.getWin().tinymce.each(tinyMCEPopup.dom.select("canvas.mceColorSwatch",a),function(a){var b;a.getContext&&(b=a.getContext("2d"))&&(b.fillStyle=a.getAttribute("data-color"),b.fillRect(0,0,10,10))})}function generateNamedColors(){var a=document.getElementById("namedcolors"),b="",c,d,e=0;if(a.className=="generated")return;for(c in named)d=named[c],b+='<a href="javascript:insertAction();" role="option" tabindex="-1" aria-labelledby="named_colors_'+e+'" onfocus="showColor(\''+c+"','"+d+"');\" onmouseover=\"showColor('"+c+"','"+d+'\');" style="background-color: '+c+'">',tinyMCEPopup.editor.forcedHighContrastMode&&(b+='<canvas class="mceColorSwatch" height="10" width="10" data-color="'+colors[e]+'"></canvas>'),b+='<span class="mceVoiceLabel" style="display:none;" id="named_colors_'+e+'">'+d+"</span>",b+="</a>",e++;a.innerHTML=b,a.className="generated",paintCanvas(a),enableKeyboardNavigation(a)}function enableKeyboardNavigation(a){tinyMCEPopup.editor.windowManager.createInstance("tinymce.ui.KeyboardNavigation",{root:a,items:tinyMCEPopup.dom.select("a",a)},tinyMCEPopup.dom)}function dechex(a){return strhex.charAt(Math.floor(a/16))+strhex.charAt(a%16)}function computeColor(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p=tinyMCEPopup.dom.getPos(a.target);b=a.offsetX?a.offsetX:a.target?a.clientX-p.x:0,c=a.offsetY?a.offsetY:a.target?a.clientY-p.y:0,d=document.getElementById("colors").width/6,e=detail/2,f=document.getElementById("colors").height,g=(b>=0)*(b<d)*255+(b>=d)*(b<2*d)*(510-b*255/d)+(b>=4*d)*(b<5*d)*(-1020+b*255/d)+(b>=5*d)*(b<6*d)*255,h=(b>=0)*(b<d)*(b*255/d)+(b>=d)*(b<3*d)*255+(b>=3*d)*(b<4*d)*(1020-b*255/d),i=(b>=2*d)*(b<3*d)*(-510+b*255/d)+(b>=3*d)*(b<5*d)*255+(b>=5*d)*(b<6*d)*(1530-b*255/d),j=(f-c)/f,g=128+(g-128)*j,h=128+(h-128)*j,i=128+(i-128)*j,changeFinalColor("#"+dechex(g)+dechex(h)+dechex(i)),updateLight(g,h,i)}function updateLight(a,b,c){var d,e=detail/2,f,g,h,i,j;for(d=0;d<detail;d++)d>=0&&d<e?(f=d/e,g=dechex(255-(255-a)*f),h=dechex(255-(255-b)*f),i=dechex(255-(255-c)*f)):(f=2-d/e,g=dechex(a*f),h=dechex(b*f),i=dechex(c*f)),j=g+h+i,setCol("gs"+d,"#"+j)}function changeFinalColor(a){a.indexOf("#")==-1&&(a=convertRGBToHex(a)),setCol("preview",a),document.getElementById("color").value=a}function setCol(a,b){try{document.getElementById(a).style.backgroundColor=b}catch(c){}}function saveContent(){tinyMCEPopup.editor.setContent(document.getElementById("htmlSource").value,{source_view:!0}),tinyMCEPopup.close()}function onLoadInit(){tinyMCEPopup.resizeToInnerSize(),tinymce.isGecko&&(document.body.spellcheck=tinyMCEPopup.editor.getParam("gecko_spellcheck")),document.getElementById("htmlSource").value=tinyMCEPopup.editor.getContent({source_view:!0}),tinyMCEPopup.editor.getParam("theme_advanced_source_editor_wrap",!0)&&(setWrap("soft"),document.getElementById("wraped").checked=!0),resizeInputs()}function setWrap(a){var b,c,d=document.getElementById("htmlSource");d.wrap=a,tinymce.isIE||(b=d.value,c=d.cloneNode(!1),c.setAttribute("wrap",a),d.parentNode.replaceChild(c,d),c.value=b)}function toggleWordWrap(a){a.checked?setWrap("soft"):setWrap("off")}function resizeInputs(){var a=tinyMCEPopup.dom.getViewPort(window),b;b=document.getElementById("htmlSource"),b&&(b.style.width=a.w-20+"px",b.style.height=a.h-65+"px")}function getColorPickerHTML(a,b){var c="",d=tinyMCEPopup.dom;if(label=d.select("label[for="+b+"]")[0])label.id=label.id||d.uniqueId();return c+='<a role="button" aria-labelledby="'+a+'_label" id="'+a+'_link" href="javascript:;" onclick="tinyMCEPopup.pickColor(event,\''+b+'\');" onmousedown="return false;" class="pickcolor">',c+='<span id="'+a+'" title="'+tinyMCEPopup.getLang("browse")+'">&nbsp;<span id="'+a+'_label" class="mceVoiceLabel mceIconOnly" style="display:none;">'+tinyMCEPopup.getLang("browse")+"</span></span></a>",c}function updateColor(a,b){document.getElementById(a).style.backgroundColor=document.forms[0].elements[b].value}function setBrowserDisabled(a,b){var c=document.getElementById(a),d=document.getElementById(a+"_link");d&&(b?(d.setAttribute("realhref",d.getAttribute("href")),d.removeAttribute("href"),tinyMCEPopup.dom.addClass(c,"disabled")):(d.getAttribute("realhref")&&d.setAttribute("href",d.getAttribute("realhref")),tinyMCEPopup.dom.removeClass(c,"disabled")))}function getBrowserHTML(a,b,c,d){var e=d+"_"+c+"_browser_callback",f,g;return f=tinyMCEPopup.getParam(e,tinyMCEPopup.getParam("file_browser_callback")),f?(g="",g+='<a id="'+a+'_link" href="javascript:openBrowser(\''+a+"','"+b+"', '"+c+"','"+e+'\');" onmousedown="return false;" class="browse">',g+='<span id="'+a+'" title="'+tinyMCEPopup.getLang("browse")+'">&nbsp;</span></a>',g):""}function openBrowser(a,b,c,d){var e=document.getElementById(a);e.className!="mceButtonDisabled"&&tinyMCEPopup.openBrowser(b,c,d)}function selectByValue(a,b,c,d,e){if(!a||!a.elements[b])return;c||(c="");var f=a.elements[b],g=!1;for(var h=0;h<f.options.length;h++){var i=f.options[h];i.value==c||e&&i.value.toLowerCase()==c.toLowerCase()?(i.selected=!0,g=!0):i.selected=!1}if(!g&&d&&c!=""){var i=new Option(c,c);i.selected=!0,f.options[f.options.length]=i,f.selectedIndex=f.options.length-1}return g}function getSelectValue(a,b){var c=a.elements[b];return c==null||c.options==null||c.selectedIndex===-1?"":c.options[c.selectedIndex].value}function addSelectValue(a,b,c,d){var e=a.elements[b],f=new Option(c,d);e.options[e.options.length]=f}function addClassesToList(a,b){var c=document.getElementById(a),d=tinyMCEPopup.getParam("theme_advanced_styles",!1);d=tinyMCEPopup.getParam(b,d);if(d){var e=d.split(";");for(var f=0;f<e.length;f++)if(e!=""){var g,h;g=e[f].split("=")[0],h=e[f].split("=")[1],c.options[c.length]=new Option(g,h)}}else tinymce.each(tinyMCEPopup.editor.dom.getClasses(),function(a){c.options[c.length]=new Option(a.title||a["class"],a["class"])})}function isVisible(a){var b=document.getElementById(a);return b&&b.style.display!="none"}function convertRGBToHex(a){var c=new RegExp("rgb\\s*\\(\\s*([0-9]+).*,\\s*([0-9]+).*,\\s*([0-9]+).*\\)","gi"),d=a.replace(c,"$1,$2,$3").split(",");return d.length==3?(r=parseInt(d[0]).toString(16),g=parseInt(d[1]).toString(16),b=parseInt(d[2]).toString(16),r=r.length==1?"0"+r:r,g=g.length==1?"0"+g:g,b=b.length==1?"0"+b:b,"#"+r+g+b):a}function convertHexToRGB(a){return a.indexOf("#")!=-1?(a=a.replace(new RegExp("[^0-9A-F]","gi"),""),r=parseInt(a.substring(0,2),16),g=parseInt(a.substring(2,4),16),b=parseInt(a.substring(4,6),16),"rgb("+r+","+g+","+b+")"):a}function trimSize(a){return a.replace(/([0-9\.]+)(px|%|in|cm|mm|em|ex|pt|pc)/i,"$1$2")}function getCSSSize(a){a=trimSize(a);if(a=="")return"";if(/^[0-9]+$/.test(a))a+="px";else if(!/^[0-9\.]+(px|%|in|cm|mm|em|ex|pt|pc)$/i.test(a))return"";return a}function getStyle(a,b,c){var d=tinyMCEPopup.dom.getAttrib(a,b);return d!=""?""+d:(typeof c=="undefined"&&(c=b),tinyMCEPopup.dom.getStyle(a,c))}function MCTabs(){this.settings=[],this.onChange=tinyMCEPopup.editor.windowManager.createInstance("tinymce.util.Dispatcher")}(function(a,b){function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++)b[a[c]]=!0;return b}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?parseFloat(d):j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else d=b}return d}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b]))continue;if(b!=="toJSON")return!1}return!0}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function J(){return!1}function K(){return!0}function S(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function T(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(O.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function bj(a,b){if(b.nodeType!==1||!f.hasData(a))return;var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i)for(d=0,e=i[c].length;d<e;d++)f.event.add(b,c+(i[c][d].namespace?".":"")+i[c][d].namespace,i[c][d],i[c][d].data)}h.data&&(h.data=f.extend({},h.data))}function bk(a,b){var c;if(b.nodeType!==1)return;b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c==="object")b.outerHTML=a.outerHTML;else if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option")b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}else a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);b.removeAttribute(f.expando)}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bm(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)}function bo(a){var b=c.createElement("div");return bh.appendChild(b),b.innerHTML=a.outerHTML,b.firstChild}function bp(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function bC(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?bx:by,g=0,h=e.length;if(d>0){if(c!=="border")for(;g<h;g++)c||(d-=parseFloat(f.css(a,"padding"+e[g]))||0),c==="margin"?d+=parseFloat(f.css(a,c+e[g]))||0:d-=parseFloat(f.css(a,"border"+e[g]+"Width"))||0;return d+"px"}d=bz(a,b,b);if(d<0||d==null)d=a.style[b]||0;d=parseFloat(d)||0;if(c)for(;g<h;g++)d+=parseFloat(f.css(a,"padding"+e[g]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+e[g]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+e[g]))||0);return d+"px"}function bZ(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bP),e=0,g=d.length,h,i,j;for(;e<g;e++)h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}function b$(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bT,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=b$(a,c,d,e,l,g)));return(k||!l)&&!g["*"]&&(l=b$(a,c,d,e,"*",g)),l}function b_(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d]);e&&f.extend(!0,a,e)}function ca(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bE.test(a)?d(a,e):ca(a+"["+(typeof e=="object"||f.isArray(e)?b:"")+"]",e,c,d)});else if(!c&&b!=null&&typeof b=="object")for(var e in b)ca(a+"["+e+"]",b[e],c,d);else d(a,b)}function cb(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j)return j!==f[0]&&f.unshift(j),d[j]}function cc(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k==="*")k=l;else if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function ci(){try{return new a.XMLHttpRequest}catch(b){}}function cj(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function cs(){return setTimeout(ct,0),cr=f.now()}function ct(){cr=b}function cu(a,b){var c={};return f.each(cq.concat.apply([],cq.slice(0,b)),function(){c[this]=a}),c}function cv(a){if(!ck[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){cl||(cl=c.createElement("iframe"),cl.frameBorder=cl.width=cl.height=0),b.appendChild(cl);if(!cm||!cl.createElement)cm=(cl.contentWindow||cl.contentDocument).document,cm.write((c.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),cm.close();d=cm.createElement(a),cm.body.appendChild(d),e=f.css(d,"display"),b.removeChild(cl)}ck[a]=e}return ck[a]}function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(e.isReady)return;try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};return e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(a==="body"&&!d&&c.body)return this.context=c,this[0]=c.body,this.selector=a,this.length=1,this;if(typeof a=="string"){a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3?g=[null,a,null]:g=i.exec(a);if(g&&(g[1]||!d)){if(g[1])return d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes),e.merge(this,a);h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}return this.context=c,this.selector=a,this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}return e.isFunction(a)?f.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),e.makeArray(a,this))},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();return e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d},each:function(a,b){return e.each(this,a,b)},ready:function(a){return e.bindReady(),A.add(a),this},eq:function(a){return a=+a,a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}return i},e.extend({noConflict:function(b){return a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f),e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&&--e.readyWait>0)return;A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")}},bindReady:function(){if(A)return;A=e.Callbacks("once memory");if(c.readyState==="complete")return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval"in a},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=e.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(n.test(b.replace(o,"@").replace(p,"]").replace(q,"")))return(new Function("return "+b))();e.error("Invalid JSON: "+b)},parseXML:function(c){var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}return(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":a.toString().replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H)return H.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];return a.length=d,a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};return g.guid=a.guid=a.guid||g.guid||e.guid++,g},access:function(a,c,d,f,g,h){var i=a.length;if(typeof c=="object"){for(var j in c)e.access(a,j,c[j],f,g,d);return a}if(d!==b){f=!h&&f&&e.isFunction(d);for(var k=0;k<i;k++)g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){return f&&f instanceof e&&!(f instanceof a)&&(f=a(f)),e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())}),e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++)g=b[d],h=f.type(g),h==="array"?m(g):h==="function"&&(!a.unique||!o.has(g))&&c.push(g)},n=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,l=j||0,j=0,k=c.length;for(;c&&l<k;l++)if(c[l].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}i=!1,c&&(a.once?e===!0?o.disable():c=[]:d&&d.length&&(e=d.shift(),o.fireWith(e[0],e[1])))},o={add:function(){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++)for(var f=0;f<c.length;f++)if(b[d]===c[f]){i&&f<=k&&(k--,f<=l&&l--),c.splice(f--,1);if(a.unique)break}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++)if(a===c[b])return!0}return!1},empty:function(){return c=[],this},disable:function(){return c=d=e=b,this},disabled:function(){return!c},lock:function(){return d=b,(!e||e===!0)&&o.disable(),this},locked:function(){return!d},fireWith:function(b,c){return d&&(i?a.once||d.push([b,c]):(!a.once||!e)&&n(b,c)),this},fire:function(){return o.fireWith(this,arguments),this},fired:function(){return!!e}};return o};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){return i.done(a).fail(b).progress(c),this},always:function(){return i.done.apply(i,arguments).fail.apply(i,arguments),this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({}),j;for(j in g)i[j]=g[j].fire,i[j+"With"]=g[j].fireWith;return i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i),i},when:function(a){function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}var b=i.call(arguments,0),c=0,d=b.length,e=new Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++)b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g;g||j.resolveWith(j,b)}else j!==a&&j.resolveWith(j,d?[a]:[]);return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p,q=c.createElement("div"),r=c.documentElement;q.setAttribute("className","t"),q.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=q.getElementsByTagName("*"),e=q.getElementsByTagName("a")[0];if(!d||!d.length||!e)return{};g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=q.getElementsByTagName("input")[0],b={leadingWhitespace:q.firstChild.nodeType===3,tbody:!q.getElementsByTagName("tbody").length,htmlSerialize:!!q.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:q.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete q.test}catch(s){b.deleteExpando=!1}!q.addEventListener&&q.attachEvent&&q.fireEvent&&(q.attachEvent("onclick",function(){b.noCloneEvent=!1}),q.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),q.appendChild(i),k=c.createDocumentFragment(),k.appendChild(q.lastChild),b.checkClone=k.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=
i.checked,k.removeChild(i),k.appendChild(q),q.innerHTML="",a.getComputedStyle&&(j=c.createElement("div"),j.style.width="0",j.style.marginRight="0",q.style.width="2px",q.appendChild(j),b.reliableMarginRight=(parseInt((a.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0);if(q.attachEvent)for(o in{submit:1,change:1,focusin:1})n="on"+o,p=n in q,p||(q.setAttribute(n,"return;"),p=typeof q[n]=="function"),b[o+"Bubbles"]=p;return k.removeChild(q),k=g=h=j=q=i=null,f(function(){var a,d,e,g,h,i,j,k,m,n,o,r=c.getElementsByTagName("body")[0];if(!r)return;j=1,k="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",m="visibility:hidden;border:0;",n="style='"+k+"border:5px solid #000;padding:0;'",o="<div "+n+"><div></div></div>"+"<table "+n+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",a=c.createElement("div"),a.style.cssText=m+"width:0;height:0;position:static;top:0;margin-top:"+j+"px",r.insertBefore(a,r.firstChild),q=c.createElement("div"),a.appendChild(q),q.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",l=q.getElementsByTagName("td"),p=l[0].offsetHeight===0,l[0].style.display="",l[1].style.display="none",b.reliableHiddenOffsets=p&&l[0].offsetHeight===0,q.innerHTML="",q.style.width=q.style.paddingLeft="1px",f.boxModel=b.boxModel=q.offsetWidth===2,typeof q.style.zoom!="undefined"&&(q.style.display="inline",q.style.zoom=1,b.inlineBlockNeedsLayout=q.offsetWidth===2,q.style.display="",q.innerHTML="<div style='width:4px;'></div>",b.shrinkWrapBlocks=q.offsetWidth!==2),q.style.cssText=k+m,q.innerHTML=o,d=q.firstChild,e=d.firstChild,h=d.nextSibling.firstChild.firstChild,i={doesNotAddBorder:e.offsetTop!==5,doesAddBorderForTableAndCells:h.offsetTop===5},e.style.position="fixed",e.style.top="20px",i.fixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",i.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,i.doesNotIncludeMarginInBodyOffset=r.offsetTop!==j,r.removeChild(a),q=a=null,f.extend(b,i)}),b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?f.cache[a[f.expando]]:a[f.expando],!!a&&!m(a)},data:function(a,c,d,e){if(!f.acceptData(a))return;var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b)return;n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function")e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c);return g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d),o&&!h[c]?g.events:(k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h,i)},removeData:function(a,b,c){if(!f.acceptData(a))return;var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k])return;if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++)delete d[b[e]];if(!(c?m:f.isEmptyObject)(d))return}}if(!c){delete j[k].data;if(!m(j[k]))return}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),f.fn.extend({data:function(a,c){var d,e,g,h=null;if(typeof a=="undefined"){if(this.length){h=f.data(this[0]);if(this[0].nodeType===1&&!f._data(this[0],"parsedAttrs")){e=this[0].attributes;for(var i=0,j=e.length;i<j;i++)g=e[i].name,g.indexOf("data-")===0&&(g=f.camelCase(g.substring(5)),l(this[0],g,h[g]));f._data(this[0],"parsedAttrs",!0)}}return h}return typeof a=="object"?this.each(function(){f.data(this,a)}):(d=a.split("."),d[1]=d[1]?"."+d[1]:"",c===b?(h=this.triggerHandler("getData"+d[1]+"!",[d[0]]),h===b&&this.length&&(h=f.data(this[0],a),h=l(this[0],a,h)),h===b&&d[1]?this.data(d[0]):h):this.each(function(){var b=f(this),e=[d[0],c];b.triggerHandler("setData"+d[1]+"!",e),f.data(this,a,c),b.triggerHandler("changeData"+d[1]+"!",e)}))},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){return typeof a!="string"&&(c=a,a="fx"),c===b?f.queue(this[0],a):this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){return a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0))h++,l.add(m);return m(),d.promise()}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,a,b,!0,f.prop)},removeProp:function(a){return a=f.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className)if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");g.className=f.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";return f.isFunction(a)?this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,g=this[0];if(!arguments.length){if(g)return c=f.valHooks[g.nodeName.toLowerCase()]||f.valHooks[g.type],c&&"get"in c&&(d=c.get(g,"value"))!==b?d:(d=g.value,typeof d=="string"?d.replace(q,""):d==null?"":d);return}return e=f.isFunction(a),this.each(function(d){var g=f(this),h;if(this.nodeType!==1)return;e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!c||!("set"in c)||c.set(this,h,"value")===b)this.value=h})}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0)return null;c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j)return b;h.push(b)}}return j&&!h.length&&i.length?f(i[g]).val():h},set:function(a,b){var c=f.makeArray(b);return f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!a||j===3||j===8||j===2)return;if(e&&c in f.attrFn)return f(a)[c](d);if(typeof a.getAttribute=="undefined")return f.prop(a,c,d);i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return}return h&&"set"in h&&i&&(g=h.set(a,d,c))!==b?g:(a.setAttribute(c,""+d),d)}return h&&"get"in h&&i&&(g=h.get(a,c))!==null?g:(g=a.getAttribute(c),g===null?b:g)},removeAttr:function(a,b){var c,d,e,g,h=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;h<g;h++)e=d[h],e&&(c=f.propFix[e]||e,f.attr(a,e,""),a.removeAttribute(v?e:c),u.test(e)&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},value:{get:function(a,b){return w&&f.nodeName(a,"button")?w.get(a,b):b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button"))return w.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!a||i===3||i===8||i===2)return;return h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]),d!==b?g&&"set"in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get"in g&&(e=g.get(a,c))!==null?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},v||(y={name:!0,id:!0},w=f.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);return e||(e=c.createAttribute(d),a.setAttributeNode(e)),e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c==="")return a.setAttribute(b,"auto"),c}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)>=0}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/\bhover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(a){var b=F.exec(a);return b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)")),b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")};f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))return;d.handler&&(p=d,d=p.handler),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f=="undefined"||!!a&&f.event.triggered===a.type?b:f.event.dispatch.apply(i.elem,arguments)},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1)a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!g||!(o=g.events))return;b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o)f.event.remove(a,j+b[h],c,d,!0);continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++)s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s));r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered))return;h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h])return;c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j)j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0);return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1)return;r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode)r.push([m,s]),n=m;n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++)m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault();return c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n)),c.result}return},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=[],j,k,l,m,n,o,p,q,r,s,t;g[0]=c,c.delegateTarget=this;if(e&&!c.target.disabled&&(!c.button||c.type!=="click")){m=f(this),m.context=this.ownerDocument||this;for(l=c.target;l!=this;l=l.parentNode||this){o={},q=[],m[0]=l;for(j=0;j<e;j++)r=d[j],s=r.selector,o[s]===b&&(o[s]=r.quick?H(l,r.quick):m.is(s)),o[s]&&q.push(r);q.length&&i.push({elem:l,matches:q})}}d.length>e&&i.push({elem:this,matches:d.slice(e)});for(j=0;j<i.length&&!c.isPropagationStopped();j++){p=i[j],c.currentTarget=p.elem;for(k=0;k<p.matches.length&&!c.isImmediatePropagationStopped();k++){r=p.matches[k];if(h||!c.namespace&&!r.namespace||c.namespace_re&&c.namespace_re.test(r.namespace))c.data=r.data,c.handleObj=r,n=((f.event.special[r.origType]||{}).handle||r.handler).apply(p.elem,g),n!==b&&(c.result=n,n===!1&&(c.preventDefault(),c.stopPropagation()))}}return c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;return a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0),a}},fix:function(a){if(a[f.expando])return a;var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;)e=i[--d],a[e]=g[e];return a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey),h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event))return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;if(!a)return;a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;if(!a)return;a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d))a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b;return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return!1;f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0)}),d._submit_attached=!0)})},teardown:function(){if(f.nodeName(this,"form"))return!1;f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))});return!1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){return f.event.remove(this,"._change"),z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=J;else if(!e)return this;return g===1&&(h=e,e=function(a){return f().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++)),this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on.call(this,a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;return f(a.delegateTarget).off(e.namespace?e.type+"."+e.namespace:e.type,e.selector,e.handler),this}if(typeof a=="object"){for(var g in a)this.off(g,c,a[g]);return this}if(c===!1||typeof c=="function")d=c,c=b;return d===!1&&(d=J),this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return f(this.context).on(a,this.selector,b,c),this},die:function(a,b){return f(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;return f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){return c==null&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){return i=!1,0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return e;var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b))if(w.length===2&&o.relative[w[0]])j=y(w[0]+w[1],d,f);else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length)b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length!==1||w[0]!=="~"&&w[0]!=="+"||!d.parentNode?d:d.parentNode,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length)q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}else k=w=[]}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]")if(!u)e.push.apply(e,k);else if(d&&d.nodeType===1)for(t=0;k[t]!=null;t++)k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t]);else for(t=0;k[t]!=null;t++)k[t]&&k[t].nodeType===1&&e.push(j[t]);else s(k,e);return l&&(m(l,h,e,f),m.uniqueSort(e)),e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}return d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]),{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter)if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\")continue;s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f)g=i=!0;else if(f===!0)continue}if(f)for(n=0;(j=s[n])!=null;n++)j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g)return[];break}}if(a===q){if(g!=null)break;m.error(a)}q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9){if(typeof a.textContent=="string")return a.textContent;if(typeof a.innerText=="string")return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(d===3||d===4)return a.nodeValue}else for(b=0;c=a[b];b++)c.nodeType!==8&&(e+=n(c));return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);return a[0]=e++,a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");return!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" "),a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not"){if(!((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))){var g=m.filter(b[3],c,d,!0^f);return d||e.push.apply(e,g),!1}b[3]=m(b[3],null,null,c)}else if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0]))return!0;return b},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},
button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling)if(l.nodeType===1)return!1;if(k==="first")return!0;l=a;case"last":while(l=l.nextSibling)if(l.nodeType===1)return!1;return!0;case"nth":c=b[2],e=b[3];if(c===1&&e===0)return!0;f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling)l.nodeType===1&&(l.nodeIndex=++i);g[d]=f}return j=a.nodeIndex-e,c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f)return f(a,c,b,d)}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));var s=function(a,b){return a=Array.prototype.slice.call(a,0),b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){return a===b?(h=!0,0):!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition?-1:1:a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b)return h=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return v(a,b);if(!g)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return v(e[k],f[k]);return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(b.querySelectorAll&&b.querySelectorAll(".TEST").length===0)return;m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return s(e.getElementsByTagName(b),f);if(h[2]&&o.find.CLASS&&e.getElementsByClassName)return s(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b==="body"&&e.body)return s([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return s([],f);if(i.id===h[3])return s([i],f)}try{return s(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p)return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}catch(r){}finally{l||k.removeAttribute("id")}}}return a(b,e,f,g)};for(var e in a)m[e]=a[e];b=null}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a))try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!a.getElementsByClassName||a.getElementsByClassName("e").length===0)return;a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a))f+=d[0],a=a.replace(o.match.PSEUDO,"");a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++)m(a,g[h],e,c);return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.POS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++)f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h});g=g.parentNode,h++}return c}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}return c=c.length>1?f.unique(c):c,this.pushStack(c,"closest",a)},index:function(a){return a?typeof a=="string"?f.inArray(this[0],f(a)):f.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);return L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse()),this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var V="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){return f.isFunction(a)?this.each(function(b){var c=f(this);c.text(a.call(this,b,c.text()))}):typeof a!="object"&&a!==b?this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a)):f.text(this)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return f.isFunction(a)?this.each(function(b){f(this).wrapInner(a.call(this,b))}):this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f.clean(arguments);return a.push.apply(a,this.toArray()),this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);return a.push.apply(a,f.clean(arguments)),a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return f.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(W,""):null;if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)this[c].nodeType===1&&(f.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}else f.isFunction(a)?this.each(function(b){var c=f(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);return this},replaceWith:function(a){return this[0]&&this[0].parentNode?f.isFunction(a)?this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))}):(typeof a!="string"&&(a=f(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})):this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,bp)}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];return b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1),{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1)return e[b](this[0]),this;for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||!bc.test("<"+a.nodeName)?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g)e[g]&&bk(d[g],e[g])}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g)bj(d[g],e[g])}}return d=e=null,h},clean:function(a,b,d,e){var g;b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);var h=[],i;for(var j=0,k;(k=a[j])!=null;j++){typeof k=="number"&&(k+="");if(!k)continue;if(typeof k=="string")if(!_.test(k))k=b.createTextNode(k);else{k=k.replace(Y,"<$1></$2>");var l=(Z.exec(k)||["",""])[1].toLowerCase(),m=bg[l]||bg._default,n=m[0],o=b.createElement("div");b===c?bh.appendChild(o):U(b).appendChild(o),o.innerHTML=m[1]+k+m[2];while(n--)o=o.lastChild;if(!f.support.tbody){var p=$.test(k),q=l==="table"&&!p?o.firstChild&&o.firstChild.childNodes:m[1]==="<table>"&&!p?o.childNodes:[];for(i=q.length-1;i>=0;--i)f.nodeName(q[i],"tbody")&&!q[i].childNodes.length&&q[i].parentNode.removeChild(q[i])}!f.support.leadingWhitespace&&X.test(k)&&o.insertBefore(b.createTextNode(X.exec(k)[0]),o.firstChild),k=o.childNodes}var r;if(!f.support.appendChecked)if(k[0]&&typeof (r=k.length)=="number")for(i=0;i<r;i++)bn(k[i]);else bn(k);k.nodeType?h.push(k):h=f.merge(h,k)}if(d){g=function(a){return!a.type||be.test(a.type)};for(j=0;h[j];j++)if(e&&f.nodeName(h[j],"script")&&(!h[j].type||h[j].type.toLowerCase()==="text/javascript"))e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j]);else{if(h[j].nodeType===1){var s=f.grep(h[j].getElementsByTagName("script"),g);h.splice.apply(h,[j+1,0].concat(s))}d.appendChild(h[j])}}return h},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()])continue;c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events)e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle);b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bq=/alpha\([^)]*\)/i,br=/opacity=([^)]*)/,bs=/([A-Z]|^ms)/g,bt=/^-?\d+(?:px)?$/i,bu=/^-?\d/,bv=/^([\-+])=([\-+.\de]+)/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Left","Right"],by=["Top","Bottom"],bz,bA,bB;f.fn.css=function(a,c){return arguments.length===2&&c===b?this:f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)})},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bz(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!a||a.nodeType===3||a.nodeType===8||!a.style)return;var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b)return k&&"get"in k&&(g=k.get(a,!1,e))!==b?g:j[c];h=typeof d,h==="string"&&(g=bv.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d))return;h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set"in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(bz)return bz(a,c)},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}}),f.curCSS=f.css,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;if(c)return a.offsetWidth!==0?bC(a,b,d):(f.swap(a,bw,function(){e=bC(a,b,d)}),e)},set:function(a,b){if(!bt.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return br.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bq,""))===""){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bq.test(g)?g.replace(bq,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;return f.swap(a,{display:"inline-block"},function(){b?c=bz(a,"margin-right","marginRight"):c=a.style.marginRight}),c}})}),c.defaultView&&c.defaultView.getComputedStyle&&(bA=function(a,b){var c,d,e;return b=b.replace(bs,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b))),c}),c.documentElement.currentStyle&&(bB=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;return f===null&&g&&(e=g[b])&&(f=e),!bt.test(f)&&bu.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f||0,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d)),f===""?"auto":f}),bz=bA||bB,f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)});var bD=/%20/g,bE=/\[\]$/,bF=/\r?\n/g,bG=/#.*$/,bH=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bI=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bJ=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bK=/^(?:GET|HEAD)$/,bL=/^\/\//,bM=/\?/,bN=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bO=/^(?:select|textarea)/i,bP=/\s+/,bQ=/([?&])_=[^&]*/,bR=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bS=f.fn.load,bT={},bU={},bV,bW,bX=["*/"]+["*"];try{bV=e.href}catch(bY){bV=c.createElement("a"),bV.href="",bV=bV.href}bW=bR.exec(bV.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bS)return bS.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;return f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bN,"")).find(g):c)),d&&i.each(d,[c,b,a])}}),this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bO.test(this.nodeName)||bI.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bF,"\r\n")}}):{name:b.name,value:c.replace(bF,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){return f.isFunction(d)&&(g=g||e,e=d,d=b),f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?b_(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b_(a,b),a},ajaxSettings:{url:bV,isLocal:bJ.test(bW[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bX},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bZ(bT),ajaxTransport:bZ(bU),ajax:function(a,c){function w(a,c,l,m){if(s===2)return;s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?cb(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified"))f.lastModified[k]=y;if(z=v.getResponseHeader("Etag"))f.etag[k]=z}if(a===304)w="notmodified",o=!0;else try{r=cc(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}else{u=w;if(!w||a)w="error",a<0&&(a=0)}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bH.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return s||(d.mimeType=a),this},abort:function(a){return a=a||"abort",p&&p.abort(a),w(0,a),this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+"").replace(bG,"").replace(bL,bW[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bP),d.crossDomain==null&&(r=bR.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bW[1]&&r[2]==bW[2]&&(r[3]||(r[1]==="http:"?80:443))==(bW[3]||(bW[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),b$(bT,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bK.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bM.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bQ,"$1_="+x);d.url=y+(y===d.url?(bM.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bX+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(!d.beforeSend||d.beforeSend.call(e,v,d)!==!1&&s!==2){for(u in{success:1,error:1,complete:1})v[u](d[u]);p=b$(bU,d,c,v);if(!p)w(-1,"No Transport");else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(!(s<2))throw z;w(-1,z)}}return v}return v.abort(),!1},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)ca(g,a[g],c,e);return d.join("&").replace(bD,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cd=f.now(),ce=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cd++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(ce.test(b.url)||e&&ce.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";return b.jsonp!==!1&&(j=j.replace(ce,l),b.url===j&&(e&&(k=k.replace(ce,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){return g||f.error(h+" was not called"),g[0]},b.dataTypes[0]="json","script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return f.globalEval(a),a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var cf=a.ActiveXObject?function(){for(var a in ch)ch[a](0,1)}:!1,cg=0,ch;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ci()||cj()}:ci,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,cf&&delete ch[i]);if(e)h.readyState!==4&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n),m.text=h.responseText;try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cg,cf&&(ch||(ch={},f(a).unload(cf)),ch[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var ck={},cl,cm,cn=/^(?:toggle|show|hide)$/,co=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cp,cq=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cr;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(cu("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),e===""&&f.css(d,"display")==="none"&&f._data(d,"olddisplay",cv(d.nodeName)));for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none")d.style.display=f._data(d,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(cu("hide",3),a,b,c);var d,e,g=0,h=this.length;for(;g<h;g++)d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e));for(g=0;g<h;g++)this[g].style&&(this[g].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";return f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(cu("toggle",3),a,b,c),this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cv(this.nodeName)==="inline"?this.style.display="inline-block"
:this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)j=new f.fx(this,b,i),h=a[i],cn.test(h)?(o=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),o?(f._data(this,"toggle"+i,o==="show"?"hide":"show"),j[o]()):j[h]()):(k=co.exec(h),l=j.cur(),k?(m=parseFloat(k[2]),n=k[3]||(f.cssNumber[i]?"":"px"),n!=="px"&&(f.style(this,i,(m||1)+n),l=(m||1)/j.cur()*l,f.style(this,i,l+n)),k[1]&&(m=(k[1]==="-="?-1:1)*m+l),j.custom(l,m,n)):j.custom(l,h,""));return!0}var e=f.speed(b,c,d);return f.isEmptyObject(a)?this.each(e.complete,[!1]):(a=f.extend({},a),e.queue===!1?this.each(g):this.queue(e.queue,g))},stop:function(a,c,d){return typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null)for(b in g)g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b);else g[b=a+".run"]&&g[b].stop&&h(this,g,b);for(b=e.length;b--;)e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1));(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:cu("show",1),slideUp:cu("hide",1),slideToggle:cu("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";return d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)},d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a}return this.elem[this.prop]},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cr||cs(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){e.options.hide&&f._data(e.elem,"fxshow"+e.prop)===b&&f._data(e.elem,"fxshow"+e.prop,e.start)},h()&&f.timers.push(h)&&!cp&&(cp=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cr||cs(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties)i.animatedProperties[b]!==!0&&(g=!1);if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show)for(b in i.animatedProperties)f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0);d=i.complete,d&&(i.complete=!1,d.call(h))}return!1}return i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(cp),cp=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(["width","height"],function(a,b){f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)}}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?f.fn.offset=function(a){var b=this[0],c;if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);try{c=b.getBoundingClientRect()}catch(d){}var e=b.ownerDocument,g=e.documentElement;if(!c||!f.contains(g,b))return c?{top:c.top,left:c.left}:{top:0,left:0};var h=e.body,i=cy(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;return{top:n,left:o}}:f.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;while((b=b.parentNode)&&b!==i&&b!==h){if(f.support.fixedPosition&&k.position==="fixed")break;c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c}if(k.position==="relative"||k.position==="static")l+=i.offsetTop,m+=i.offsetLeft;return f.support.fixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft)),{top:l,left:m}},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static")a=a.offsetParent;return a})}}),f.each(["Left","Top"],function(a,c){var d="scroll"+c;f.fn[d]=function(c){var e,g;return c===b?(e=this[0],e?(g=cy(e),g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:f.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:e[d]):null):this.each(function(){g=cy(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c})}}),f.each(["Height","Width"],function(a,c){var d=c.toLowerCase();f.fn["inner"+c]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,d,"padding")):this[d]():null},f.fn["outer"+c]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,d,a?"margin":"border")):this[d]():null},f.fn[d]=function(a){var e=this[0];if(!e)return a==null?null:this;if(f.isFunction(a))return this.each(function(b){var c=f(this);c[d](a.call(this,b,c[d]()))});if(f.isWindow(e)){var g=e.document.documentElement["client"+c],h=e.document.body;return e.document.compatMode==="CSS1Compat"&&g||h&&h["client"+c]||g}if(e.nodeType===9)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var i=f.css(e,d),j=parseFloat(i);return f.isNumeric(j)?j:i}return this.css(d,typeof a=="string"?a:a+"px")}}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window),function(a,b){var c;a.rails=c={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not(button[type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(b){var c=a('meta[name="csrf-token"]').attr("content");c&&b.setRequestHeader("X-CSRF-Token",c)},fire:function(b,c,d){var e=a.Event(c);return b.trigger(e,d),e.result!==!1},confirm:function(a){return confirm(a)},ajax:function(b){return a.ajax(b)},handleRemote:function(d){var e,f,g,h=d.data("cross-domain")||null,i=d.data("type")||a.ajaxSettings&&a.ajaxSettings.dataType,j;if(c.fire(d,"ajax:before")){if(d.is("form")){e=d.attr("method"),f=d.attr("action"),g=d.serializeArray();var k=d.data("ujs:submit-button");k&&(g.push(k),d.data("ujs:submit-button",null))}else d.is(c.inputChangeSelector)?(e=d.data("method"),f=d.data("url"),g=d.serialize(),d.data("params")&&(g=g+"&"+d.data("params"))):(e=d.data("method"),f=d.attr("href"),g=d.data("params")||null);return j={type:e||"GET",data:g,dataType:i,crossDomain:h,beforeSend:function(a,e){return e.dataType===b&&a.setRequestHeader("accept","*/*;q=0.5, "+e.accepts.script),c.fire(d,"ajax:beforeSend",[a,e])},success:function(a,b,c){d.trigger("ajax:success",[a,b,c])},complete:function(a,b){d.trigger("ajax:complete",[a,b])},error:function(a,b,c){d.trigger("ajax:error",[a,b,c])}},f&&(j.url=f),c.ajax(j)}return!1},handleMethod:function(c){var d=c.attr("href"),e=c.data("method"),f=c.attr("target"),g=a("meta[name=csrf-token]").attr("content"),h=a("meta[name=csrf-param]").attr("content"),i=a('<form method="post" action="'+d+'"></form>'),j='<input name="_method" value="'+e+'" type="hidden" />';h!==b&&g!==b&&(j+='<input name="'+h+'" value="'+g+'" type="hidden" />'),f&&i.attr("target",f),i.hide().append(j).appendTo("body"),i.submit()},disableFormElements:function(b){b.find(c.disableSelector).each(function(){var b=a(this),c=b.is("button")?"html":"val";b.data("ujs:enable-with",b[c]()),b[c](b.data("disable-with")),b.prop("disabled",!0)})},enableFormElements:function(b){b.find(c.enableSelector).each(function(){var b=a(this),c=b.is("button")?"html":"val";b.data("ujs:enable-with")&&b[c](b.data("ujs:enable-with")),b.prop("disabled",!1)})},allowAction:function(a){var b=a.data("confirm"),d=!1,e;return b?(c.fire(a,"confirm")&&(d=c.confirm(b),e=c.fire(a,"confirm:complete",[d])),d&&e):!0},blankInputs:function(b,c,d){var e=a(),f,g=c||"input,textarea";return b.find(g).each(function(){f=a(this);if(d?f.val():!f.val())e=e.add(f)}),e.length?e:!1},nonBlankInputs:function(a,b){return c.blankInputs(a,b,!0)},stopEverything:function(b){return a(b.target).trigger("ujs:everythingStopped"),b.stopImmediatePropagation(),!1},callFormSubmitBindings:function(c,d){var e=c.data("events"),f=!0;return e!==b&&e.submit!==b&&a.each(e.submit,function(a,b){if(typeof b.handler=="function")return f=b.handler(d)}),f},disableElement:function(a){a.data("ujs:enable-with",a.html()),a.html(a.data("disable-with")),a.bind("click.railsDisable",function(a){return c.stopEverything(a)})},enableElement:function(a){a.data("ujs:enable-with")!==b&&(a.html(a.data("ujs:enable-with")),a.data("ujs:enable-with",!1)),a.unbind("click.railsDisable")}},a.ajaxPrefilter(function(a,b,d){a.crossDomain||c.CSRFProtection(d)}),a(document).delegate(c.linkDisableSelector,"ajax:complete",function(){c.enableElement(a(this))}),a(document).delegate(c.linkClickSelector,"click.rails",function(d){var e=a(this),f=e.data("method"),g=e.data("params");if(!c.allowAction(e))return c.stopEverything(d);e.is(c.linkDisableSelector)&&c.disableElement(e);if(e.data("remote")!==b)return(d.metaKey||d.ctrlKey)&&(!f||f==="GET")&&!g?!0:(c.handleRemote(e)===!1&&c.enableElement(e),!1);if(e.data("method"))return c.handleMethod(e),!1}),a(document).delegate(c.inputChangeSelector,"change.rails",function(b){var d=a(this);return c.allowAction(d)?(c.handleRemote(d),!1):c.stopEverything(b)}),a(document).delegate(c.formSubmitSelector,"submit.rails",function(d){var e=a(this),f=e.data("remote")!==b,g=c.blankInputs(e,c.requiredInputSelector),h=c.nonBlankInputs(e,c.fileInputSelector);if(!c.allowAction(e))return c.stopEverything(d);if(g&&e.attr("novalidate")==b&&c.fire(e,"ajax:aborted:required",[g]))return c.stopEverything(d);if(f)return h?c.fire(e,"ajax:aborted:file",[h]):!a.support.submitBubbles&&a().jquery<"1.7"&&c.callFormSubmitBindings(e,d)===!1?c.stopEverything(d):(c.handleRemote(e),!1);setTimeout(function(){c.disableFormElements(e)},13)}),a(document).delegate(c.formInputClickSelector,"click.rails",function(b){var d=a(this);if(!c.allowAction(d))return c.stopEverything(b);var e=d.attr("name"),f=e?{name:e,value:d.val()}:null;d.closest("form").data("ujs:submit-button",f)}),a(document).delegate(c.formSubmitSelector,"ajax:beforeSend.rails",function(b){this==b.target&&c.disableFormElements(a(this))}),a(document).delegate(c.formSubmitSelector,"ajax:complete.rails",function(b){this==b.target&&c.enableFormElements(a(this))})}(jQuery),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(a){function b(){function b(a){a==="remove"&&this.each(function(a,b){var c=e(b);c&&c.remove()}),this.find("span.mceEditor,div.mceEditor").each(function(a,b){var c=tinyMCE.get(b.id.replace(/_parent$/,""));c&&c.remove()})}function d(a){var d=this,e;if(a!==c)b.call(d),d.each(function(b,c){var d;(d=tinyMCE.get(c.id))&&d.setContent(a)});else if(d.length>0)if(e=tinyMCE.get(d[0].id))return e.getContent()}function e(a){var b=null;return a&&a.id&&f.tinymce&&(b=tinyMCE.get(a.id)),b}function g(a){return!!(a&&a.length&&f.tinymce&&a.is(":tinymce"))}var h={};a.each(["text","html","val"],function(b,f){var i=h[f]=a.fn[f],j=f==="text";a.fn[f]=function(b){var f=this;if(!g(f))return i.apply(f,arguments);if(b!==c)return d.call(f.filter(":tinymce"),b),i.apply(f.not(":tinymce"),arguments),f;var h="",k=arguments;return(j?f:f.eq(0)).each(function(b,c){var d=e(c);h+=d?j?d.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):d.getContent():i.apply(a(c),k)}),h}}),a.each(["append","prepend"],function(b,d){var f=h[d]=a.fn[d],i=d==="prepend";a.fn[d]=function(a){var b=this;if(!g(b))return f.apply(b,arguments);if(a!==c)return b.filter(":tinymce").each(function(b,c){var d=e(c);d&&d.setContent(i?a+d.getContent():d.getContent()+a)}),f.apply(b.not(":tinymce"),arguments),b}}),a.each(["remove","replaceWith","replaceAll","empty"],function(c,d){var e=h[d]=a.fn[d];a.fn[d]=function(){return b.call(this,d),e.apply(this,arguments)}}),h.attr=a.fn.attr,a.fn.attr=function(b,f,i){var j=this;if(!b||b!=="value"||!g(j))return h.attr.call(j,b,f,i);if(f!==c)return d.call(j.filter(":tinymce"),f),h.attr.call(j.not(":tinymce"),b,f,i),j;var k=j[0],l=e(k);return l?l.getContent():h.attr.call(a(k),b,f,i)}}var c,d,e=[],f=window;a.fn.tinymce=function(c){function g(){var d=[],e=0;b&&(b(),b=null),h.each(function(a,b){var f,g=b.id,i=c.oninit;g||(b.id=g=tinymce.DOM.uniqueId()),f=new tinymce.Editor(g,c),d.push(f),f.onInit.add(function(){var a,b=i;h.css("visibility",""),i&&++e==d.length&&(tinymce.is(b,"string")&&(a=b.indexOf(".")===-1?null:tinymce.resolve(b.replace(/\.\w+$/,"")),b=tinymce.resolve(b)),b.apply(a||tinymce,d))})}),a.each(d,function(a,b){b.render()})}var h=this,i,j,k,l,m,n="",o="";return h.length?c?(h.css("visibility","hidden"),!f.tinymce&&!d&&(i=c.script_url)?(d=1,k=i.substring(0,i.lastIndexOf("/")),/_(src|dev)\.js/g.test(i)&&(o="_src"),l=i.lastIndexOf("?"),l!=-1&&(n=i.substring(l+1)),f.tinyMCEPreInit=f.tinyMCEPreInit||{base:k,suffix:o,query:n},i.indexOf("gzip")!=-1&&(m=c.language||"en",i=i+(/\?/.test(i)?"&":"?")+"js=true&core=true&suffix="+escape(o)+"&themes="+escape(c.theme)+"&plugins="+escape(c.plugins)+"&languages="+m,f.tinyMCE_GZ||(tinyMCE_GZ={start:function(){function b(a){tinymce.ScriptLoader.markDone(tinyMCE.baseURI.toAbsolute(a))}tinymce.suffix=o,b("langs/"+m+".js"),b("themes/"+c.theme+"/editor_template"+o+".js"),b("themes/"+c.theme+"/langs/"+m+".js"),a.each(c.plugins.split(","),function(a,c){c&&(b("plugins/"+c+"/editor_plugin"+o+".js"),b("plugins/"+c+"/langs/"+m+".js"))})},end:function(){}})),a.ajax({type:"GET",url:i,dataType:"script",cache:!0,success:function(){tinymce.dom.Event.domLoaded=1,d=2,c.script_loaded&&c.script_loaded(),g(),a.each(e,function(a,b){b()})}})):d===1?e.push(g):g(),h):tinyMCE.get(h[0].id):h},a.extend(a.expr[":"],{tinymce:function(a){return a.id&&!!tinyMCE.get(a.id)}})}(jQuery),function(a){function b(){function b(a){a==="remove"&&this.each(function(a,b){var c=e(b);c&&c.remove()}),this.find("span.mceEditor,div.mceEditor").each(function(a,b){var c=tinyMCE.get(b.id.replace(/_parent$/,""));c&&c.remove()})}function d(a){var d=this,e;if(a!==c)b.call(d),d.each(function(b,c){var d;(d=tinyMCE.get(c.id))&&d.setContent(a)});else if(d.length>0)if(e=tinyMCE.get(d[0].id))return e.getContent()}function e(a){var b=null;return a&&a.id&&f.tinymce&&(b=tinyMCE.get(a.id)),b}function g(a){return!!(a&&a.length&&f.tinymce&&a.is(":tinymce"))}var h={};a.each(["text","html","val"],function(b,f){var i=h[f]=a.fn[f],j=f==="text";a.fn[f]=function(b){var f=this;if(!g(f))return i.apply(f,arguments);if(b!==c)return d.call(f.filter(":tinymce"),b),i.apply(f.not(":tinymce"),arguments),f;var h="",k=arguments;return(j?f:f.eq(0)).each(function(b,c){var d=e(c);h+=d?j?d.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):d.getContent():i.apply(a(c),k)}),h}}),a.each(["append","prepend"],function(b,d){var f=h[d]=a.fn[d],i=d==="prepend";a.fn[d]=function(a){var b=this;if(!g(b))return f.apply(b,arguments);if(a!==c)return b.filter(":tinymce").each(function(b,c){var d=e(c);d&&d.setContent(i?a+d.getContent():d.getContent()+a)}),f.apply(b.not(":tinymce"),arguments),b}}),a.each(["remove","replaceWith","replaceAll","empty"],function(c,d){var e=h[d]=a.fn[d];a.fn[d]=function(){return b.call(this,d),e.apply(this,arguments)}}),h.attr=a.fn.attr,a.fn.attr=function(b,f,i){var j=this;if(!b||b!=="value"||!g(j))return h.attr.call(j,b,f,i);if(f!==c)return d.call(j.filter(":tinymce"),f),h.attr.call(j.not(":tinymce"),b,f,i),j;var k=j[0],l=e(k);return l?l.getContent():h.attr.call(a(k),b,f,i)}}var c,d,e=[],f=window;a.fn.tinymce=function(c){function g(){var d=[],e=0;b&&(b(),b=null),h.each(function(a,b){var f,g=b.id,i=c.oninit;g||(b.id=g=tinymce.DOM.uniqueId()),f=new tinymce.Editor(g,c),d.push(f),f.onInit.add(function(){var a,b=i;h.css("visibility",""),i&&++e==d.length&&(tinymce.is(b,"string")&&(a=b.indexOf(".")===-1?null:tinymce.resolve(b.replace(/\.\w+$/,"")),b=tinymce.resolve(b)),b.apply(a||tinymce,d))})}),a.each(d,function(a,b){b.render()})}var h=this,i,j,k,l,m,n="",o="";return h.length?c?(h.css("visibility","hidden"),!f.tinymce&&!d&&(i=c.script_url)?(d=1,k=i.substring(0,i.lastIndexOf("/")),/_(src|dev)\.js/g.test(i)&&(o="_src"),l=i.lastIndexOf("?"),l!=-1&&(n=i.substring(l+1)),f.tinyMCEPreInit=f.tinyMCEPreInit||{base:k,suffix:o,query:n},i.indexOf("gzip")!=-1&&(m=c.language||"en",i=i+(/\?/.test(i)?"&":"?")+"js=true&core=true&suffix="+escape(o)+"&themes="+escape(c.theme)+"&plugins="+escape(c.plugins)+"&languages="+m,f.tinyMCE_GZ||(tinyMCE_GZ={start:function(){function b(a){tinymce.ScriptLoader.markDone(tinyMCE.baseURI.toAbsolute(a))}tinymce.suffix=o,b("langs/"+m+".js"),b("themes/"+c.theme+"/editor_template"+o+".js"),b("themes/"+c.theme+"/langs/"+m+".js"),a.each(c.plugins.split(","),function(a,c){c&&(b("plugins/"+c+"/editor_plugin"+o+".js"),b("plugins/"+c+"/langs/"+m+".js"))})},end:function(){}})),a.ajax({type:"GET",url:i,dataType:"script",cache:!0,success:function(){tinymce.dom.Event.domLoaded=1,d=2,c.script_loaded&&c.script_loaded(),g(),a.each(e,function(a,b){b()})}})):d===1?e.push(g):g(),h):tinyMCE.get(h[0].id):h},a.extend(a.expr[":"],{tinymce:function(a){return a.id&&!!tinyMCE.get(a.id)}})}(jQuery),function(a){function f(){function c(a){a==="remove"&&this.each(function(a,b){var c=f(b);c&&c.remove()}),this.find("span.mceEditor,div.mceEditor").each(function(a,b){var c=tinyMCE.get(b.id.replace(/_parent$/,""));c&&c.remove()})}function d(a){var d=this,e;if(a!==b)c.call(d),d.each(function(b,c){var d;(d=tinyMCE.get(c.id))&&d.setContent(a)});else if(d.length>0)if(e=tinyMCE.get(d[0].id))return e.getContent()}function f(a){var b=null;return a&&a.id&&e.tinymce&&(b=tinyMCE.get(a.id)),b}function g(a){return!!(a&&a.length&&e.tinymce&&a.is(":tinymce"))}var h={};a.each(["text","html","val"],function(c,e){var i=h[e]=a.fn[e],l=e==="text";a.fn[e]=function(c){var e=this;if(!g(e))return i.apply(e,arguments);if(c!==b)return d.call(e.filter(":tinymce"),c),i.apply(e.not(":tinymce"),arguments),e;var h="",j=arguments;return(l?e:e.eq(0)).each(function(b,c){var d=f(c);h+=d?l?d.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):d.getContent():i.apply(a(c),j)}),h}}),a.each(["append","prepend"],function(c,d){var e=h[d]=a.fn[d],i=d==="prepend";a.fn[d]=function(a){var c=this;if(!g(c))return e.apply(c,arguments);if(a!==b)return c.filter(":tinymce").each(function(b,c){var d=f(c);d&&d.setContent(i?a+d.getContent():d.getContent()+a)}),e.apply(c.not(":tinymce"),arguments),c}}),a.each(["remove","replaceWith","replaceAll","empty"],function(b,d){var e=h[d]=a.fn[d];a.fn[d]=function(){return c.call(this,d),e.apply(this,arguments)}}),h.attr=a.fn.attr,a.fn.attr=function(c,e,i){var l=this;if(!c||c!=="value"||!g(l))return h.attr.call(l,c,e,i);if(e!==b)return d.call(l.filter(":tinymce"),e),h.attr.call(l.not(":tinymce"),c,e,i),l;var m=l[0],n=f(m);return n?n.getContent():h.attr.call(a(m),c,e,i)}}var b,c,d=[],e=window;a.fn.tinymce=function(b){function o(){var c=[],d=0;f&&(f(),f=null),g.each(function(a,e){var f,h=e.id,i=b.oninit;h||(e.id=h=tinymce.DOM.uniqueId()),f=new tinymce.Editor(h,b),c.push(f),f.onInit.add(function(){var a,b=i;g.css("visibility",""),i&&++d==c.length&&(tinymce.is(b,"string")&&(a=b.indexOf(".")===-1?null:tinymce.resolve(b.replace(/\.\w+$/,"")),b=tinymce.resolve(b)),b.apply(a||tinymce,c))})}),a.each(c,function(a,b){b.render()})}var g=this,h,i,j,k,l,m="",n="";return g.length?b?(g.css("visibility","hidden"),!e.tinymce&&!c&&(h=b.script_url)?(c=1,j=h.substring(0,h.lastIndexOf("/")),/_(src|dev)\.js/g.test(h)&&(n="_src"),k=h.lastIndexOf("?"),k!=-1&&(m=h.substring(k+1)),e.tinyMCEPreInit=e.tinyMCEPreInit||{base:j,suffix:n,query:m},h.indexOf("gzip")!=-1&&(l=b.language||"en",h=h+(/\?/.test(h)?"&":"?")+"js=true&core=true&suffix="+escape(n)+"&themes="+escape(b.theme)+"&plugins="+escape(b.plugins)+"&languages="+l,e.tinyMCE_GZ||(tinyMCE_GZ={start:function(){function c(a){tinymce.ScriptLoader.markDone(tinyMCE.baseURI.toAbsolute(a))}tinymce.suffix=n,c("langs/"+l+".js"),c("themes/"+b.theme+"/editor_template"+n+".js"),c("themes/"+b.theme+"/langs/"+l+".js"),a.each(b.plugins.split(","),function(a,b){b&&(c("plugins/"+b+"/editor_plugin"+n+".js"),c("plugins/"+b+"/langs/"+l+".js"))})},end:function(){}})),a.ajax({type:"GET",url:h,dataType:"script",cache:!0,success:function(){tinymce.dom.Event.domLoaded=1,c=2,b.script_loaded&&b.script_loaded(),o(),a.each(d,function(a,b){b()})}})):c===1?d.push(o):o(),g):tinyMCE.get(g[0].id):g},a.extend(a.expr[":"],{tinymce:function(a){return a.id&&!!tinyMCE.get(a.id)}})}(jQuery),tinyMCE.addI18n({en:{common:{more_colors:"More Colors...",invalid_data:"Error: Invalid values entered, these are marked in red.",popup_blocked:"Sorry, but we have noticed that your popup-blocker has disabled a window that provides application functionality. You will need to disable popup blocking on this site in order to fully utilize this tool.",clipboard_no_support:"Currently not supported by your browser, use keyboard shortcuts instead.",clipboard_msg:"Copy/Cut/Paste is not available in Mozilla and Firefox.\nDo you want more information about this issue?",not_set:"-- Not Set --",class_name:"Class",browse:"Browse",close:"Close",cancel:"Cancel",update:"Update",insert:"Insert",apply:"Apply",edit_confirm:"Do you want to use the WYSIWYG mode for this textarea?",invalid_data_number:"{#field} must be a number",invalid_data_min:"{#field} must be a number greater than {#min}",invalid_data_size:"{#field} must be a number or percentage",value:"(value)"},contextmenu:{full:"Full",right:"Right",center:"Center",left:"Left",align:"Alignment"},insertdatetime:{day_short:"Sun,Mon,Tue,Wed,Thu,Fri,Sat,Sun",day_long:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday,Sunday",months_short:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",months_long:"January,February,March,April,May,June,July,August,September,October,November,December",inserttime_desc:"Insert Time",insertdate_desc:"Insert Date",time_fmt:"%H:%M:%S",date_fmt:"%Y-%m-%d"},print:{print_desc:"Print"},preview:{preview_desc:"Preview"},directionality:{rtl_desc:"Direction Right to Left",ltr_desc:"Direction Left to Right"},layer:{content:"New layer...",absolute_desc:"Toggle Absolute Positioning",backward_desc:"Move Backward",forward_desc:"Move Forward",insertlayer_desc:"Insert New Layer"},save:{save_desc:"Save",cancel_desc:"Cancel All Changes"},nonbreaking:{nonbreaking_desc:"Insert Non-Breaking Space Character"},iespell:{download:"ieSpell not detected. Do you want to install it now?",iespell_desc:"Check Spelling"},advhr:{delta_height:"",delta_width:"",advhr_desc:"Insert Horizontal Line"},emotions:{delta_height:"",delta_width:"",emotions_desc:"Emotions"},searchreplace:{replace_desc:"Find/Replace",delta_width:"",delta_height:"",search_desc:"Find"},advimage:{delta_width:"",image_desc:"Insert/Edit Image",delta_height:""},advlink:{delta_height:"",delta_width:"",link_desc:"Insert/Edit Link"},xhtmlxtras:{attribs_delta_height:"",attribs_delta_width:"",ins_delta_height:"",ins_delta_width:"",del_delta_height:"",del_delta_width:"",acronym_delta_height:"",acronym_delta_width:"",abbr_delta_height:"",abbr_delta_width:"",cite_delta_height:"",cite_delta_width:"",attribs_desc:"Insert/Edit Attributes",ins_desc:"Insertion",del_desc:"Deletion",acronym_desc:"Acronym",abbr_desc:"Abbreviation",cite_desc:"Citation"},style:{delta_height:"",delta_width:"",desc:"Edit CSS Style"},paste:{plaintext_mode_stick:"Paste is now in plain text mode. Click again to toggle back to regular paste mode.",plaintext_mode:"Paste is now in plain text mode. Click again to toggle back to regular paste mode. After you paste something you will be returned to regular paste mode.",selectall_desc:"Select All",paste_word_desc:"Paste from Word",paste_text_desc:"Paste as Plain Text"},paste_dlg:{word_title:"Use Ctrl+V on your keyboard to paste the text into the window.",text_linebreaks:"Keep Linebreaks",text_title:"Use Ctrl+V on your keyboard to paste the text into the window."},table:{merge_cells_delta_height:"",merge_cells_delta_width:"",table_delta_height:"",table_delta_width:"",cellprops_delta_height:"",cellprops_delta_width:"",rowprops_delta_height:"",rowprops_delta_width:"",cell:"Cell",col:"Column",row:"Row",del:"Delete Table",copy_row_desc:"Copy Table Row",cut_row_desc:"Cut Table Row",paste_row_after_desc:"Paste Table Row After",paste_row_before_desc:"Paste Table Row Before",props_desc:"Table Properties",cell_desc:"Table Cell Properties",row_desc:"Table Row Properties",merge_cells_desc:"Merge Table Cells",split_cells_desc:"Split Merged Table Cells",delete_col_desc:"Delete Column",col_after_desc:"Insert Column After",col_before_desc:"Insert Column Before",delete_row_desc:"Delete Row",row_after_desc:"Insert Row After",row_before_desc:"Insert Row Before",desc:"Insert/Edit Table"},autosave:{warning_message:"If you restore the saved content, you will lose all the content that is currently in the editor.\n\nAre you sure you want to restore the saved content?",restore_content:"Restore auto-saved content.",unload_msg:"The changes you made will be lost if you navigate away from this page."},fullscreen:{desc:"Toggle Full Screen Mode"},media:{delta_height:"",delta_width:"",edit:"Edit Embedded Media",desc:"Insert/Edit Embedded Media"},fullpage:{desc:"Document Properties",delta_width:"",delta_height:""},template:{desc:"Insert Predefined Template Content"},visualchars:{desc:"Show/Hide Visual Control Characters"},spellchecker:{desc:"Toggle Spell Checker",menu:"Spell Checker Settings",ignore_word:"Ignore Word",ignore_words:"Ignore All",langs:"Languages",wait:"Please wait...",sug:"Suggestions",no_sug:"No Suggestions",no_mpell:"No misspellings found.",learn_word:"Learn word"},pagebreak:{desc:"Insert Page Break for Printing"},advlist:{types:"Types",def:"Default",lower_alpha:"Lower Alpha",lower_greek:"Lower Greek",lower_roman:"Lower Roman",upper_alpha:"Upper Alpha",upper_roman:"Upper Roman",circle:"Circle",disc:"Disc",square:"Square"},colors:{333300:"Dark olive",993300:"Burnt orange","000000":"Black","003300":"Dark green","003366":"Dark azure","000080":"Navy Blue",333399:"Indigo",333333:"Very dark gray",8e5:"Maroon",FF6600:"Orange",808e3:"Olive","008000":"Green","008080":"Teal","0000FF":"Blue",666699:"Grayish blue",808080:"Gray",FF0000:"Red",FF9900:"Amber","99CC00":"Yellow green",339966:"Sea green","33CCCC":"Turquoise","3366FF":"Royal blue",800080:"Purple",999999:"Medium gray",FF00FF:"Magenta",FFCC00:"Gold",FFFF00:"Yellow","00FF00":"Lime","00FFFF":"Aqua","00CCFF":"Sky blue",993366:"Brown",C0C0C0:"Silver",FF99CC:"Pink",FFCC99:"Peach",FFFF99:"Light yellow",CCFFCC:"Pale green",CCFFFF:"Pale cyan","99CCFF":"Light sky blue",CC99FF:"Plum",FFFFFF:"White"},aria:{rich_text_area:"Rich Text Area"},wordcount:{words:"Words:"}}}),function(){tinymce.create("tinymce.plugins.AdvancedHRPlugin",{init:function(a,b){a.addCommand("mceAdvancedHr",function(){a.windowManager.open({file:b+"/rule.htm",width:250+parseInt(a.getLang("advhr.delta_width",0)),height:160+parseInt(a.getLang("advhr.delta_height",0)),inline:1},{plugin_url:b})}),a.addButton("advhr",{title:"advhr.advhr_desc",cmd:"mceAdvancedHr"}),a.onNodeChange.add(function(a,b,c){b.setActive("advhr",c.nodeName=="HR")}),a.onClick.add(function(a,b){b=b.target,b.nodeName==="HR"&&a.selection.select(b)})},getInfo:function(){return{longname:"Advanced HR",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advhr",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("advhr",tinymce.plugins.AdvancedHRPlugin)}(),function(){tinymce.create("tinymce.plugins.AdvancedHRPlugin",{init:function(a,b){a.addCommand("mceAdvancedHr",function(){a.windowManager.open({file:b+"/rule.htm",width:250+parseInt(a.getLang("advhr.delta_width",0)),height:160+parseInt(a.getLang("advhr.delta_height",0)),inline:1},{plugin_url:b})}),a.addButton("advhr",{title:"advhr.advhr_desc",cmd:"mceAdvancedHr"}),a.onNodeChange.add(function(a,b,c){b.setActive("advhr",c.nodeName=="HR")}),a.onClick.add(function(a,b){b=b.target,b.nodeName==="HR"&&a.selection.select(b)})},getInfo:function(){return{longname:"Advanced HR",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advhr",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("advhr",tinymce.plugins.AdvancedHRPlugin)}();var AdvHRDialog={init:function(a){var b=a.dom,c=document.forms[0],d=a.selection.getNode(),e;e=b.getAttrib(d,"width"),c.width
.value=e?parseInt(e):b.getStyle("width")||"",c.size.value=b.getAttrib(d,"size")||parseInt(b.getStyle("height"))||"",c.noshade.checked=!!b.getAttrib(d,"noshade")||!!b.getStyle("border-width"),selectByValue(c,"width2",e.indexOf("%")!=-1?"%":"px")},update:function(){var a=tinyMCEPopup.editor,b,c=document.forms[0],d="";b="<hr",c.size.value&&(b+=' size="'+c.size.value+'"',d+=" height:"+c.size.value+"px;"),c.width.value&&(b+=' width="'+c.width.value+(c.width2.value=="%"?"%":"")+'"',d+=" width:"+c.width.value+(c.width2.value=="%"?"%":"px")+";"),c.noshade.checked&&(b+=' noshade="noshade"',d+=" border-width: 1px; border-style: solid; border-color: #CCCCCC; color: #ffffff;"),a.settings.inline_styles&&(b+=' style="'+tinymce.trim(d)+'"'),b+=" />",a.execCommand("mceInsertContent",!1,b),tinyMCEPopup.close()}};tinyMCEPopup.requireLangPack(),tinyMCEPopup.onInit.add(AdvHRDialog.init,AdvHRDialog),tinyMCE.addI18n("en.advhr_dlg",{size:"Height",noshade:"No Shadow",width:"Width",normal:"Normal",widthunits:"Units"}),function(){tinymce.create("tinymce.plugins.AdvancedImagePlugin",{init:function(a,b){a.addCommand("mceAdvImage",function(){if(a.dom.getAttrib(a.selection.getNode(),"class","").indexOf("mceItem")!=-1)return;a.windowManager.open({file:b+"/image.htm",width:480+parseInt(a.getLang("advimage.delta_width",0)),height:385+parseInt(a.getLang("advimage.delta_height",0)),inline:1},{plugin_url:b})}),a.addButton("image",{title:"advimage.image_desc",cmd:"mceAdvImage"})},getInfo:function(){return{longname:"Advanced image",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advimage",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("advimage",tinymce.plugins.AdvancedImagePlugin)}(),function(){tinymce.create("tinymce.plugins.AdvancedImagePlugin",{init:function(a,b){a.addCommand("mceAdvImage",function(){if(a.dom.getAttrib(a.selection.getNode(),"class","").indexOf("mceItem")!=-1)return;a.windowManager.open({file:b+"/image.htm",width:480+parseInt(a.getLang("advimage.delta_width",0)),height:385+parseInt(a.getLang("advimage.delta_height",0)),inline:1},{plugin_url:b})}),a.addButton("image",{title:"advimage.image_desc",cmd:"mceAdvImage"})},getInfo:function(){return{longname:"Advanced image",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advimage",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("advimage",tinymce.plugins.AdvancedImagePlugin)}();var ImageDialog={preInit:function(){var a;tinyMCEPopup.requireLangPack(),(a=tinyMCEPopup.getParam("external_image_list_url"))&&document.write('<script language="javascript" type="text/javascript" src="'+tinyMCEPopup.editor.documentBaseURI.toAbsolute(a)+'"></script>')},init:function(a){var b=document.forms[0],c=b.elements,a=tinyMCEPopup.editor,d=a.dom,e=a.selection.getNode(),f=tinyMCEPopup.getParam("external_image_list","tinyMCEImageList");tinyMCEPopup.resizeToInnerSize(),this.fillClassList("class_list"),this.fillFileList("src_list",f),this.fillFileList("over_list",f),this.fillFileList("out_list",f),TinyMCE_EditableSelects.init(),e.nodeName=="IMG"&&(c.src.value=d.getAttrib(e,"src"),c.width.value=d.getAttrib(e,"width"),c.height.value=d.getAttrib(e,"height"),c.alt.value=d.getAttrib(e,"alt"),c.title.value=d.getAttrib(e,"title"),c.vspace.value=this.getAttrib(e,"vspace"),c.hspace.value=this.getAttrib(e,"hspace"),c.border.value=this.getAttrib(e,"border"),selectByValue(b,"align",this.getAttrib(e,"align")),selectByValue(b,"class_list",d.getAttrib(e,"class"),!0,!0),c.style.value=d.getAttrib(e,"style"),c.id.value=d.getAttrib(e,"id"),c.dir.value=d.getAttrib(e,"dir"),c.lang.value=d.getAttrib(e,"lang"),c.usemap.value=d.getAttrib(e,"usemap"),c.longdesc.value=d.getAttrib(e,"longdesc"),c.insert.value=a.getLang("update"),/^\s*this.src\s*=\s*\'([^\']+)\';?\s*$/.test(d.getAttrib(e,"onmouseover"))&&(c.onmouseoversrc.value=d.getAttrib(e,"onmouseover").replace(/^\s*this.src\s*=\s*\'([^\']+)\';?\s*$/,"$1")),/^\s*this.src\s*=\s*\'([^\']+)\';?\s*$/.test(d.getAttrib(e,"onmouseout"))&&(c.onmouseoutsrc.value=d.getAttrib(e,"onmouseout").replace(/^\s*this.src\s*=\s*\'([^\']+)\';?\s*$/,"$1")),a.settings.inline_styles&&(d.getAttrib(e,"align")&&this.updateStyle("align"),d.getAttrib(e,"hspace")&&this.updateStyle("hspace"),d.getAttrib(e,"border")&&this.updateStyle("border"),d.getAttrib(e,"vspace")&&this.updateStyle("vspace"))),document.getElementById("srcbrowsercontainer").innerHTML=getBrowserHTML("srcbrowser","src","image","theme_advanced_image"),isVisible("srcbrowser")&&(document.getElementById("src").style.width="260px"),document.getElementById("onmouseoversrccontainer").innerHTML=getBrowserHTML("overbrowser","onmouseoversrc","image","theme_advanced_image"),isVisible("overbrowser")&&(document.getElementById("onmouseoversrc").style.width="260px"),document.getElementById("onmouseoutsrccontainer").innerHTML=getBrowserHTML("outbrowser","onmouseoutsrc","image","theme_advanced_image"),isVisible("outbrowser")&&(document.getElementById("onmouseoutsrc").style.width="260px"),a.getParam("advimage_constrain_proportions",!0)&&(b.constrain.checked=!0),c.onmouseoversrc.value||c.onmouseoutsrc.value?this.setSwapImage(!0):this.setSwapImage(!1),this.changeAppearance(),this.showPreviewImage(c.src.value,1)},insert:function(a,b){var c=tinyMCEPopup.editor,d=this,e=document.forms[0];if(e.src.value===""){c.selection.getNode().nodeName=="IMG"&&(c.dom.remove(c.selection.getNode()),c.execCommand("mceRepaint")),tinyMCEPopup.close();return}if(tinyMCEPopup.getParam("accessibility_warnings",1)&&!e.alt.value){tinyMCEPopup.confirm(tinyMCEPopup.getLang("advimage_dlg.missing_alt"),function(a){a&&d.insertAndClose()});return}d.insertAndClose()},insertAndClose:function(){var a=tinyMCEPopup.editor,b=document.forms[0],c=b.elements,d,e={},f;tinyMCEPopup.restoreSelection(),tinymce.isWebKit&&a.getWin().focus(),a.settings.inline_styles?e={vspace:"",hspace:"",border:"",align:""}:e={vspace:c.vspace.value,hspace:c.hspace.value,border:c.border.value,align:getSelectValue(b,"align")},tinymce.extend(e,{src:c.src.value.replace(/ /g,"%20"),width:c.width.value,height:c.height.value,alt:c.alt.value,title:c.title.value,"class":getSelectValue(b,"class_list"),style:c.style.value,id:c.id.value,dir:c.dir.value,lang:c.lang.value,usemap:c.usemap.value,longdesc:c.longdesc.value}),e.onmouseover=e.onmouseout="",b.onmousemovecheck.checked&&(c.onmouseoversrc.value&&(e.onmouseover="this.src='"+c.onmouseoversrc.value+"';"),c.onmouseoutsrc.value&&(e.onmouseout="this.src='"+c.onmouseoutsrc.value+"';")),f=a.selection.getNode(),f&&f.nodeName=="IMG"?a.dom.setAttribs(f,e):(tinymce.each(e,function(a,b){a===""&&delete e[b]}),a.execCommand("mceInsertContent",!1,tinyMCEPopup.editor.dom.createHTML("img",e),{skip_undo:1}),a.undoManager.add()),tinyMCEPopup.editor.execCommand("mceRepaint"),tinyMCEPopup.editor.focus(),tinyMCEPopup.close()},getAttrib:function(a,b){var c=tinyMCEPopup.editor,d=c.dom,e,f;if(c.settings.inline_styles)switch(b){case"align":if(e=d.getStyle(a,"float"))return e;if(e=d.getStyle(a,"vertical-align"))return e;break;case"hspace":e=d.getStyle(a,"margin-left"),f=d.getStyle(a,"margin-right");if(e&&e==f)return parseInt(e.replace(/[^0-9]/g,""));break;case"vspace":e=d.getStyle(a,"margin-top"),f=d.getStyle(a,"margin-bottom");if(e&&e==f)return parseInt(e.replace(/[^0-9]/g,""));break;case"border":e=0,tinymce.each(["top","right","bottom","left"],function(b){b=d.getStyle(a,"border-"+b+"-width");if(!b||b!=e&&e!==0)return e=0,!1;b&&(e=b)});if(e)return parseInt(e.replace(/[^0-9]/g,""))}return(e=d.getAttrib(a,b))?e:""},setSwapImage:function(a){var b=document.forms[0];b.onmousemovecheck.checked=a,setBrowserDisabled("overbrowser",!a),setBrowserDisabled("outbrowser",!a),b.over_list&&(b.over_list.disabled=!a),b.out_list&&(b.out_list.disabled=!a),b.onmouseoversrc.disabled=!a,b.onmouseoutsrc.disabled=!a},fillClassList:function(a){var b=tinyMCEPopup.dom,c=b.get(a),d,e;(d=tinyMCEPopup.getParam("theme_advanced_styles"))?(e=[],tinymce.each(d.split(";"),function(a){var b=a.split("=");e.push({title:b[0],"class":b[1]})})):e=tinyMCEPopup.editor.dom.getClasses(),e.length>0?(c.options.length=0,c.options[c.options.length]=new Option(tinyMCEPopup.getLang("not_set"),""),tinymce.each(e,function(a){c.options[c.options.length]=new Option(a.title||a["class"],a["class"])})):b.remove(b.getParent(a,"tr"))},fillFileList:function(a,b){var c=tinyMCEPopup.dom,d=c.get(a),e,f;b=typeof b=="function"?b():window[b],d.options.length=0,b&&b.length>0?(d.options[d.options.length]=new Option("",""),tinymce.each(b,function(a){d.options[d.options.length]=new Option(a[0],a[1])})):c.remove(c.getParent(a,"tr"))},resetImageData:function(){var a=document.forms[0];a.elements.width.value=a.elements.height.value=""},updateImageData:function(a,b){var c=document.forms[0];b||(c.elements.width.value=a.width,c.elements.height.value=a.height),this.preloadImg=a},changeAppearance:function(){var a=tinyMCEPopup.editor,b=document.forms[0],c=document.getElementById("alignSampleImg");c&&(a.getParam("inline_styles")?a.dom.setAttrib(c,"style",b.style.value):(c.align=b.align.value,c.border=b.border.value,c.hspace=b.hspace.value,c.vspace=b.vspace.value))},changeHeight:function(){var a=document.forms[0],b,c=this;if(!a.constrain.checked||!c.preloadImg)return;if(a.width.value==""||a.height.value=="")return;b=parseInt(a.width.value)/parseInt(c.preloadImg.width)*c.preloadImg.height,a.height.value=b.toFixed(0)},changeWidth:function(){var a=document.forms[0],b,c=this;if(!a.constrain.checked||!c.preloadImg)return;if(a.width.value==""||a.height.value=="")return;b=parseInt(a.height.value)/parseInt(c.preloadImg.height)*c.preloadImg.width,a.width.value=b.toFixed(0)},updateStyle:function(a){var b=tinyMCEPopup.dom,c,d,e,f,g=tinymce.isIE,h=document.forms[0],i=b.create("img",{style:b.get("style").value});if(tinyMCEPopup.editor.settings.inline_styles){a=="align"&&(b.setStyle(i,"float",""),b.setStyle(i,"vertical-align",""),f=getSelectValue(h,"align"),f&&(f=="left"||f=="right"?b.setStyle(i,"float",f):i.style.verticalAlign=f));if(a=="border"){c=i.style.border?i.style.border.split(" "):[],d=b.getStyle(i,"border-style"),e=b.getStyle(i,"border-color"),b.setStyle(i,"border",""),f=h.border.value;if(f||f=="0")if(f=="0")i.style.border=g?"0":"0 none none";else{if(c.length==3&&c[g?2:1])d=c[g?2:1];else if(!d||d=="none")d="solid";if(c.length==3&&c[g?0:2])e=c[g?0:2];else if(!e||e=="none")e="black";i.style.border=f+"px "+d+" "+e}}a=="hspace"&&(b.setStyle(i,"marginLeft",""),b.setStyle(i,"marginRight",""),f=h.hspace.value,f&&(i.style.marginLeft=f+"px",i.style.marginRight=f+"px")),a=="vspace"&&(b.setStyle(i,"marginTop",""),b.setStyle(i,"marginBottom",""),f=h.vspace.value,f&&(i.style.marginTop=f+"px",i.style.marginBottom=f+"px")),b.get("style").value=b.serializeStyle(b.parseStyle(i.style.cssText),"img")}},changeMouseMove:function(){},showPreviewImage:function(a,b){if(!a){tinyMCEPopup.dom.setHTML("prev","");return}!b&&tinyMCEPopup.getParam("advimage_update_dimensions_onchange",!0)&&this.resetImageData(),a=tinyMCEPopup.editor.documentBaseURI.toAbsolute(a),b?tinyMCEPopup.dom.setHTML("prev",'<img id="previewImg" src="'+a+'" border="0" onload="ImageDialog.updateImageData(this, 1);" />'):tinyMCEPopup.dom.setHTML("prev",'<img id="previewImg" src="'+a+'" border="0" onload="ImageDialog.updateImageData(this);" onerror="ImageDialog.resetImageData();" />')}};ImageDialog.preInit(),tinyMCEPopup.onInit.add(ImageDialog.init,ImageDialog),tinyMCE.addI18n("en.advimage_dlg",{image_list:"Image List",align_right:"Right",align_left:"Left",align_textbottom:"Text Bottom",align_texttop:"Text Top",align_bottom:"Bottom",align_middle:"Middle",align_top:"Top",align_baseline:"Baseline",align:"Alignment",hspace:"Horizontal Space",vspace:"Vertical Space",dimensions:"Dimensions",border:"Border",list:"Image List",alt:"Image Description",src:"Image URL",dialog_title:"Insert/Edit Image",missing_alt:"Are you sure you want to continue without including an Image Description? Without it the image may not be accessible to some users with disabilities, or to those using a text browser, or browsing the Web with images turned off.",example_img:"Appearance Preview Image",misc:"Miscellaneous",mouseout:"For Mouse Out",mouseover:"For Mouse Over",alt_image:"Alternative Image",swap_image:"Swap Image",map:"Image Map",id:"ID",rtl:"Right to Left",ltr:"Left to Right",classes:"Classes",style:"Style",long_desc:"Long Description Link",langcode:"Language Code",langdir:"Language Direction",constrain_proportions:"Constrain Proportions",preview:"Preview",title:"Title",general:"General",tab_advanced:"Advanced",tab_appearance:"Appearance",tab_general:"General",width:"Width",height:"Height"}),function(){tinymce.create("tinymce.plugins.AdvancedLinkPlugin",{init:function(a,b){this.editor=a,a.addCommand("mceAdvLink",function(){var c=a.selection;if(c.isCollapsed()&&!a.dom.getParent(c.getNode(),"A"))return;a.windowManager.open({file:b+"/link.htm",width:480+parseInt(a.getLang("advlink.delta_width",0)),height:400+parseInt(a.getLang("advlink.delta_height",0)),inline:1},{plugin_url:b})}),a.addButton("link",{title:"advlink.link_desc",cmd:"mceAdvLink"}),a.addShortcut("ctrl+k","advlink.advlink_desc","mceAdvLink"),a.onNodeChange.add(function(a,b,c,d){b.setDisabled("link",d&&c.nodeName!="A"),b.setActive("link",c.nodeName=="A"&&!c.name)})},getInfo:function(){return{longname:"Advanced link",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advlink",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("advlink",tinymce.plugins.AdvancedLinkPlugin)}(),function(){tinymce.create("tinymce.plugins.AdvancedLinkPlugin",{init:function(a,b){this.editor=a,a.addCommand("mceAdvLink",function(){var c=a.selection;if(c.isCollapsed()&&!a.dom.getParent(c.getNode(),"A"))return;a.windowManager.open({file:b+"/link.htm",width:480+parseInt(a.getLang("advlink.delta_width",0)),height:400+parseInt(a.getLang("advlink.delta_height",0)),inline:1},{plugin_url:b})}),a.addButton("link",{title:"advlink.link_desc",cmd:"mceAdvLink"}),a.addShortcut("ctrl+k","advlink.advlink_desc","mceAdvLink"),a.onNodeChange.add(function(a,b,c,d){b.setDisabled("link",d&&c.nodeName!="A"),b.setActive("link",c.nodeName=="A"&&!c.name)})},getInfo:function(){return{longname:"Advanced link",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advlink",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("advlink",tinymce.plugins.AdvancedLinkPlugin)}(),tinyMCEPopup.requireLangPack();var templates={"window.open":"window.open('${url}','${target}','${options}')"};preinit(),tinyMCEPopup.onInit.add(init),tinyMCE.addI18n("en.advlink_dlg",{target_name:"Target Name",classes:"Classes",style:"Style",id:"ID",popup_position:"Position (X/Y)",langdir:"Language Direction",popup_size:"Size",popup_dependent:"Dependent (Mozilla/Firefox Only)",popup_resizable:"Make Window Resizable",popup_location:"Show Location Bar",popup_menubar:"Show Menu Bar",popup_toolbar:"Show Toolbars",popup_statusbar:"Show Status Bar",popup_scrollbars:"Show Scrollbars",popup_return:"Insert 'return false'",popup_name:"Window Name",popup_url:"Popup URL",popup:"JavaScript Popup",target_blank:"Open in New Window",target_top:"Open in Top Frame (Replaces All Frames)",target_parent:"Open in Parent Window/Frame",target_same:"Open in This Window/Frame",anchor_names:"Anchors",popup_opts:"Options",advanced_props:"Advanced Properties",event_props:"Events",popup_props:"Popup Properties",general_props:"General Properties",advanced_tab:"Advanced",events_tab:"Events",popup_tab:"Popup",general_tab:"General",list:"Link List",is_external:"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",is_email:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",titlefield:"Title",target:"Target",url:"Link URL",title:"Insert/Edit Link",link_list:"Link List",rtl:"Right to Left",ltr:"Left to Right",accesskey:"AccessKey",tabindex:"TabIndex",rev:"Relationship Target to Page",rel:"Relationship Page to Target",mime:"Target MIME Type",encoding:"Target Character Encoding",langcode:"Language Code",target_langcode:"Target Language",width:"Width",height:"Height"}),function(){var a=tinymce.each;tinymce.create("tinymce.plugins.AdvListPlugin",{init:function(b,c){function e(b){var c=[];return a(b.split(/,/),function(a){c.push({title:"advlist."+(a=="default"?"def":a.replace(/-/g,"_")),styles:{listStyleType:a=="default"?"":a}})}),c}var d=this;d.editor=b,d.numlist=b.getParam("advlist_number_styles")||e("default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman"),d.bullist=b.getParam("advlist_bullet_styles")||e("default,circle,disc,square"),tinymce.isIE&&/MSIE [2-7]/.test(navigator.userAgent)&&(d.isIE7=!0)},createControl:function(b,c){var d=this,e,f,g=d.editor;if(b=="numlist"||b=="bullist"){d[b][0].title=="advlist.def"&&(f=d[b][0]);function h(b,c){var d=!0;return a(c.styles,function(a,c){if(g.dom.getStyle(b,c)!=a)return d=!1,!1}),d}function i(){var a,c=g.dom,d=g.selection;a=c.getParent(d.getNode(),"ol,ul"),(!a||a.nodeName==(b=="bullist"?"OL":"UL")||h(a,f))&&g.execCommand(b=="bullist"?"InsertUnorderedList":"InsertOrderedList"),f&&(a=c.getParent(d.getNode(),"ol,ul"),a&&(c.setStyles(a,f.styles),a.removeAttribute("data-mce-style"))),g.focus()}return e=c.createSplitButton(b,{title:"advanced."+b+"_desc","class":"mce_"+b,onclick:function(){i()}}),e.onRenderMenu.add(function(c,e){e.onHideMenu.add(function(){d.bookmark&&(g.selection.moveToBookmark(d.bookmark),d.bookmark=0)}),e.onShowMenu.add(function(){var c=g.dom,i=c.getParent(g.selection.getNode(),"ol,ul"),j;if(i||f)j=d[b],a(e.items,function(b){var c=!0;b.setSelected(0),i&&!b.isDisabled()&&(a(j,function(a){if(a.id==b.id&&!h(i,a))return c=!1,!1}),c&&b.setSelected(1))}),i||e.items[f.id].setSelected(1);g.focus(),tinymce.isIE&&(d.bookmark=g.selection.getBookmark(1))}),e.add({id:g.dom.uniqueId(),title:"advlist.types","class":"mceMenuItemTitle",titleItem:!0}).setDisabled(1),a(d[b],function(a){if(d.isIE7&&a.styles.listStyleType=="lower-greek")return;a.id=g.dom.uniqueId(),e.add({id:a.id,title:a.title,onclick:function(){f=a,i()}})})}),e}},getInfo:function(){return{longname:"Advanced lists",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advlist",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("advlist",tinymce.plugins.AdvListPlugin)}(),function(){var a=tinymce.each;tinymce.create("tinymce.plugins.AdvListPlugin",{init:function(b,c){function e(b){var c=[];return a(b.split(/,/),function(a){c.push({title:"advlist."+(a=="default"?"def":a.replace(/-/g,"_")),styles:{listStyleType:a=="default"?"":a}})}),c}var d=this;d.editor=b,d.numlist=b.getParam("advlist_number_styles")||e("default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman"),d.bullist=b.getParam("advlist_bullet_styles")||e("default,circle,disc,square"),tinymce.isIE&&/MSIE [2-7]/.test(navigator.userAgent)&&(d.isIE7=!0)},createControl:function(b,c){var d=this,e,f,g=d.editor;if(b=="numlist"||b=="bullist"){d[b][0].title=="advlist.def"&&(f=d[b][0]);function h(b,c){var d=!0;return a(c.styles,function(a,c){if(g.dom.getStyle(b,c)!=a)return d=!1,!1}),d}function i(){var a,c=g.dom,d=g.selection;a=c.getParent(d.getNode(),"ol,ul"),(!a||a.nodeName==(b=="bullist"?"OL":"UL")||h(a,f))&&g.execCommand(b=="bullist"?"InsertUnorderedList":"InsertOrderedList"),f&&(a=c.getParent(d.getNode(),"ol,ul"),a&&(c.setStyles(a,f.styles),a.removeAttribute("data-mce-style"))),g.focus()}return e=c.createSplitButton(b,{title:"advanced."+b+"_desc","class":"mce_"+b,onclick:function(){i()}}),e.onRenderMenu.add(function(c,e){e.onHideMenu.add(function(){d.bookmark&&(g.selection.moveToBookmark(d.bookmark),d.bookmark=0)}),e.onShowMenu.add(function(){var c=g.dom,i=c.getParent(g.selection.getNode(),"ol,ul"),j;if(i||f)j=d[b],a(e.items,function(b){var c=!0;b.setSelected(0),i&&!b.isDisabled()&&(a(j,function(a){if(a.id==b.id&&!h(i,a))return c=!1,!1}),c&&b.setSelected(1))}),i||e.items[f.id].setSelected(1);g.focus(),tinymce.isIE&&(d.bookmark=g.selection.getBookmark(1))}),e.add({id:g.dom.uniqueId(),title:"advlist.types","class":"mceMenuItemTitle",titleItem:!0}).setDisabled(1),a(d[b],function(a){if(d.isIE7&&a.styles.listStyleType=="lower-greek")return;a.id=g.dom.uniqueId(),e.add({id:a.id,title:a.title,onclick:function(){f=a,i()}})})}),e}},getInfo:function(){return{longname:"Advanced lists",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advlist",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("advlist",tinymce.plugins.AdvListPlugin)}(),function(){tinymce.create("tinymce.plugins.AutolinkPlugin",{init:function(a,b){var c=this;if(tinyMCE.isIE)return;a.onKeyDown.add(function(a,b){if(b.keyCode==13)return c.handleEnter(a)}),a.onKeyPress.add(function(a,b){if(b.which==41)return c.handleEclipse(a)}),a.onKeyUp.add(function(a,b){if(b.keyCode==32)return c.handleSpacebar(a)})},handleEclipse:function(a){this.parseCurrentLine(a,-1,"(",!0)},handleSpacebar:function(a){this.parseCurrentLine(a,0,"",!0)},handleEnter:function(a){this.parseCurrentLine(a,-1,"",!1)},parseCurrentLine:function(a,b,c,d){var e,f,g,h,i,j,k,l,m;e=a.selection.getRng().cloneRange();if(e.startOffset<5){l=e.endContainer.previousSibling;if(l==null){if(e.endContainer.firstChild==null||e.endContainer.firstChild.nextSibling==null)return;l=e.endContainer.firstChild.nextSibling}m=l.length,e.setStart(l,m),e.setEnd(l,m);if(e.endOffset<5)return;f=e.endOffset,h=l}else{h=e.endContainer;if(h.nodeType!=3&&h.firstChild){while(h.nodeType!=3&&h.firstChild)h=h.firstChild;e.setStart(h,0),e.setEnd(h,h.nodeValue.length)}e.endOffset==1?f=2:f=e.endOffset-1-b}g=f;do e.setStart(h,f-2),e.setEnd(h,f-1),f-=1;while(e.toString()!=" "&&e.toString()!=""&&e.toString().charCodeAt(0)!=160&&f-2>=0&&e.toString()!=c);e.toString()==c||e.toString().charCodeAt(0)==160?(e.setStart(h,f),e.setEnd(h,g),f+=1):e.startOffset==0?(e.setStart(h,0),e.setEnd(h,g)):(e.setStart(h,f),e.setEnd(h,g)),j=e.toString(),k=j.match(/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)(.+)$/i);if(k){k[1]=="www."&&(k[1]="http://www."),i=a.selection.getBookmark(),a.selection.setRng(e),tinyMCE.execCommand("createlink",!1,k[1]+k[2]),a.selection.moveToBookmark(i);if(tinyMCE.isWebKit){a.selection.collapse(!1);var n=Math.min(h.length,g+1);e.setStart(h,n),e.setEnd(h,n),a.selection.setRng(e)}}},getInfo:function(){return{longname:"Autolink",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/autolink",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("autolink",tinymce.plugins.AutolinkPlugin)}(),function(){tinymce.create("tinymce.plugins.AutolinkPlugin",{init:function(a,b){var c=this;if(tinyMCE.isIE)return;a.onKeyDown.add(function(a,b){if(b.keyCode==13)return c.handleEnter(a)}),a.onKeyPress.add(function(a,b){if(b.which==41)return c.handleEclipse(a)}),a.onKeyUp.add(function(a,b){if(b.keyCode==32)return c.handleSpacebar(a)})},handleEclipse:function(a){this.parseCurrentLine(a,-1,"(",!0)},handleSpacebar:function(a){this.parseCurrentLine(a,0,"",!0)},handleEnter:function(a){this.parseCurrentLine(a,-1,"",!1)},parseCurrentLine:function(a,b,c,d){var e,f,g,h,i,j,k,l,m;e=a.selection.getRng().cloneRange();if(e.startOffset<5){l=e.endContainer.previousSibling;if(l==null){if(e.endContainer.firstChild==null||e.endContainer.firstChild.nextSibling==null)return;l=e.endContainer.firstChild.nextSibling}m=l.length,e.setStart(l,m),e.setEnd(l,m);if(e.endOffset<5)return;f=e.endOffset,h=l}else{h=e.endContainer;if(h.nodeType!=3&&h.firstChild){while(h.nodeType!=3&&h.firstChild)h=h.firstChild;e.setStart(h,0),e.setEnd(h,h.nodeValue.length)}e.endOffset==1?f=2:f=e.endOffset-1-b}g=f;do e.setStart(h,f-2),e.setEnd(h,f-1),f-=1;while(e.toString()!=" "&&e.toString()!=""&&e.toString().charCodeAt(0)!=160&&f-2>=0&&e.toString()!=c);e.toString()==c||e.toString().charCodeAt(0)==160?(e.setStart(h,f),e.setEnd(h,g),f+=1):e.startOffset==0?(e.setStart(h,0),e.setEnd(h,g)):(e.setStart(h,f),e.setEnd(h,g)),j=e.toString(),k=j.match(/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)(.+)$/i);if(k){k[1]=="www."&&(k[1]="http://www."),i=a.selection.getBookmark(),a.selection.setRng(e),tinyMCE.execCommand("createlink",!1,k[1]+k[2]),a.selection.moveToBookmark(i);if(tinyMCE.isWebKit){a.selection.collapse(!1);var n=Math.min(h.length,g+1);e.setStart(h,n),e.setEnd(h,n),a.selection.setRng(e)}}},getInfo:function(){return{longname:"Autolink",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/autolink",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("autolink",tinymce.plugins.AutolinkPlugin)}(),function(){tinymce.create("tinymce.plugins.AutoResizePlugin",{init:function(a,b){function e(){var b=a.getDoc(),e=b.body,f=b.documentElement,g=tinymce.DOM,h=c.autoresize_min_height,i;i=tinymce.isIE?e.scrollHeight:b.body.offsetHeight,i>c.autoresize_min_height&&(h=i),c.autoresize_max_height&&i>c.autoresize_max_height?(h=c.autoresize_max_height,a.getBody().style.overflowY="auto"):a.getBody().style.overflowY="hidden",h!==d&&(g.setStyle(g.get(a.id+"_ifr"),"height",h+"px"),d=h),c.throbbing&&(a.setProgressState(!1),a.setProgressState(!0))}var c=this,d=0;if(a.getParam("fullscreen_is_enabled"))return;c.editor=a,c.autoresize_min_height=parseInt(a.getParam("autoresize_min_height",a.getElement().offsetHeight)),c.autoresize_max_height=parseInt(a.getParam("autoresize_max_height",0)),a.onInit.add(function(a){a.dom.setStyle(a.getBody(),"paddingBottom",a.getParam("autoresize_bottom_margin",50)+"px")}),a.onChange.add(e),a.onSetContent.add(e),a.onPaste.add(e),a.onKeyUp.add(e),a.onPostRender.add(e),a.getParam("autoresize_on_init",!0)&&(a.onInit.add(function(a,b){a.setProgressState(!0),c.throbbing=!0,a.getBody().style.overflowY="hidden"}),a.onLoadContent.add(function(a,b){e(),setTimeout(function(){e(),a.setProgressState(!1),c.throbbing=!1},1250)})),a.addCommand("mceAutoResize",e)},getInfo:function(){return{longname:"Auto Resize",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/autoresize",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("autoresize",tinymce.plugins.AutoResizePlugin)}(),function(){tinymce.create("tinymce.plugins.AutoResizePlugin",{init:function(a,b){function e(){var b=a.getDoc(),e=b.body,f=b.documentElement,g=tinymce.DOM,h=c.autoresize_min_height,i;i=tinymce.isIE?e.scrollHeight:b.body.offsetHeight,i>c.autoresize_min_height&&(h=i),c.autoresize_max_height&&i>c.autoresize_max_height?(h=c.autoresize_max_height,a.getBody().style.overflowY="auto"):a.getBody().style.overflowY="hidden",h!==d&&(g.setStyle(g.get(a.id+"_ifr"),"height",h+"px"),d=h),c.throbbing&&(a.setProgressState(!1),a.setProgressState(!0))}var c=this,d=0;if(a.getParam("fullscreen_is_enabled"))return;c.editor=a,c.autoresize_min_height=parseInt(a.getParam("autoresize_min_height",a.getElement().offsetHeight)),c.autoresize_max_height=parseInt(a.getParam("autoresize_max_height",0)),a.onInit.add(function(a){a.dom.setStyle(a.getBody(),"paddingBottom",a.getParam("autoresize_bottom_margin",50)+"px")}),a.onChange.add(e),a.onSetContent.add(e),a.onPaste.add(e),a.onKeyUp.add(e),a.onPostRender.add(e),a.getParam("autoresize_on_init",!0)&&(a.onInit.add(function(a,b){a.setProgressState(!0),c.throbbing=!0,a.getBody().style.overflowY="hidden"}),a.onLoadContent.add(function(a,b){e(),setTimeout(function(){e(),a.setProgressState(!1),c.throbbing=!1},1250)})),a.addCommand("mceAutoResize",e)},getInfo:function(){return{longname:"Auto Resize",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/autoresize",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("autoresize",tinymce.plugins.AutoResizePlugin)}(),function(a){var b="autosave",c="restoredraft",d=!0,e,f,g=a.util.Dispatcher;a.create("tinymce.plugins.AutoSave",{init:function(h,i){function l(a){var b={s:1e3,m:6e4};return a=/^(\d+)([ms]?)$/.exec(""+a),(a[2]?b[a[2]]:1)*parseInt(a)}var j=this,k=h.settings;j.editor=h,a.each({ask_before_unload:d,interval:"30s",retention:"20m",minlength:50},function(a,c){c=b+"_"+c,k[c]===e&&(k[c]=a)}),k.autosave_interval=l(k.autosave_interval),k.autosave_retention=l(k.autosave_retention),h.addButton(c,{title:b+".restore_content",onclick:function(){h.getContent({draft:!0}).replace(/\s|&nbsp;|<\/?p[^>]*>|<br[^>]*>/gi,"").length>0?h.windowManager.confirm(b+".warning_message",function(a){a&&j.restoreDraft()}):j.restoreDraft()}}),h.onNodeChange.add(function(){var a=h.controlManager;a.get(c)&&a.setDisabled(c,!j.hasDraft())}),h.onInit.add(function(){h.controlManager.get(c)&&(j.setupStorage(h),setInterval(function(){j.storeDraft(),h.nodeChanged()},k.autosave_interval))}),j.onStoreDraft=new g(j),j.onRestoreDraft=new g(j),j.onRemoveDraft=new g(j),f||(window.onbeforeunload=a.plugins.AutoSave._beforeUnloadHandler,f=d)},getInfo:function(){return{longname:"Auto save",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/autosave",version:a.majorVersion+"."+a.minorVersion}},getExpDate:function(){return(new Date((new Date).getTime()+this.editor.settings.autosave_retention)).toUTCString()},setupStorage:function(c){var e=this,f=b+"_test",g="OK";e.key=b+c.id,a.each([function(){if(localStorage){localStorage.setItem(f,g);if(localStorage.getItem(f)===g)return localStorage.removeItem(f),localStorage}},function(){if(sessionStorage){sessionStorage.setItem(f,g);if(sessionStorage.getItem(f)===g)return sessionStorage.removeItem(f),sessionStorage}},function(){if(a.isIE)return c.getElement().style.behavior="url('#default#userData')",{autoExpires:d,setItem:function(a,b){var d=c.getElement();d.setAttribute(a,b),d.expires=e.getExpDate();try{d.save("TinyMCE")}catch(f){}},getItem:function(a){var b=c.getElement();try{return b.load("TinyMCE"),b.getAttribute(a)}catch(d){return null}},removeItem:function(a){c.getElement().removeAttribute(a)}}}],function(a){try{e.storage=a();if(e.storage)return!1}catch(b){}})},storeDraft:function(){var a=this,b=a.storage,c=a.editor,d,e;if(b){if(!b.getItem(a.key)&&!c.isDirty())return;e=c.getContent({draft:!0}),e.length>c.settings.autosave_minlength&&(d=a.getExpDate(),a.storage.autoExpires||a.storage.setItem(a.key+"_expires",d),a.storage.setItem(a.key,e),a.onStoreDraft.dispatch(a,{expires:d,content:e}))}},restoreDraft:function(){var a=this,b=a.storage,c;b&&(c=b.getItem(a.key),c&&(a.editor.setContent(c),a.onRestoreDraft.dispatch(a,{content:c})))},hasDraft:function(){var a=this,b=a.storage,c,e;if(b){e=!!b.getItem(a.key);if(e){if(!!a.storage.autoExpires)return d;c=new Date(b.getItem(a.key+"_expires"));if((new Date).getTime()<c.getTime())return d;a.removeDraft()}}return!1},removeDraft:function(){var a=this,b=a.storage,c=a.key,d;b&&(d=b.getItem(c),b.removeItem(c),b.removeItem(c+"_expires"),d&&a.onRemoveDraft.dispatch(a,{content:d}))},"static":{_beforeUnloadHandler:function(b){var c;return a.each(tinyMCE.editors,function(a){a.plugins.autosave&&a.plugins.autosave.storeDraft();if(a.getParam("fullscreen_is_enabled"))return;!c&&a.isDirty()&&a.getParam("autosave_ask_before_unload")&&(c=a.getLang("autosave.unload_msg"))}),c}}}),a.PluginManager.add("autosave",a.plugins.AutoSave)}(tinymce),function(a){var b="autosave",c="restoredraft",d=!0,e,f,g=a.util.Dispatcher;a.create("tinymce.plugins.AutoSave",{init:function(h,i){function l(a){var b={s:1e3,m:6e4};return a=/^(\d+)([ms]?)$/.exec(""+a),(a[2]?b[a[2]]:1)*parseInt(a)}var j=this,k=h.settings;j.editor=h,a.each({ask_before_unload:d,interval:"30s",retention:"20m",minlength:50},function(a,c){c=b+"_"+c,k[c]===e&&(k[c]=a)}),k.autosave_interval=l(k.autosave_interval),k.autosave_retention=l(k.autosave_retention),h.addButton(c,{title:b+".restore_content",onclick:function(){h.getContent({draft:!0}).replace(/\s|&nbsp;|<\/?p[^>]*>|<br[^>]*>/gi,"").length>0?h.windowManager.confirm(b+".warning_message",function(a){a&&j.restoreDraft()}):j.restoreDraft()}}),h.onNodeChange.add(function(){var a=h.controlManager;a.get(c)&&a.setDisabled(c,!j.hasDraft())}),h.onInit.add(function(){h.controlManager.get(c)&&(j.setupStorage
(h),setInterval(function(){j.storeDraft(),h.nodeChanged()},k.autosave_interval))}),j.onStoreDraft=new g(j),j.onRestoreDraft=new g(j),j.onRemoveDraft=new g(j),f||(window.onbeforeunload=a.plugins.AutoSave._beforeUnloadHandler,f=d)},getInfo:function(){return{longname:"Auto save",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/autosave",version:a.majorVersion+"."+a.minorVersion}},getExpDate:function(){return(new Date((new Date).getTime()+this.editor.settings.autosave_retention)).toUTCString()},setupStorage:function(c){var e=this,f=b+"_test",g="OK";e.key=b+c.id,a.each([function(){if(localStorage){localStorage.setItem(f,g);if(localStorage.getItem(f)===g)return localStorage.removeItem(f),localStorage}},function(){if(sessionStorage){sessionStorage.setItem(f,g);if(sessionStorage.getItem(f)===g)return sessionStorage.removeItem(f),sessionStorage}},function(){if(a.isIE)return c.getElement().style.behavior="url('#default#userData')",{autoExpires:d,setItem:function(a,b){var d=c.getElement();d.setAttribute(a,b),d.expires=e.getExpDate();try{d.save("TinyMCE")}catch(f){}},getItem:function(a){var b=c.getElement();try{return b.load("TinyMCE"),b.getAttribute(a)}catch(d){return null}},removeItem:function(a){c.getElement().removeAttribute(a)}}}],function(a){try{e.storage=a();if(e.storage)return!1}catch(b){}})},storeDraft:function(){var a=this,b=a.storage,c=a.editor,d,e;if(b){if(!b.getItem(a.key)&&!c.isDirty())return;e=c.getContent({draft:!0}),e.length>c.settings.autosave_minlength&&(d=a.getExpDate(),a.storage.autoExpires||a.storage.setItem(a.key+"_expires",d),a.storage.setItem(a.key,e),a.onStoreDraft.dispatch(a,{expires:d,content:e}))}},restoreDraft:function(){var a=this,b=a.storage,c;b&&(c=b.getItem(a.key),c&&(a.editor.setContent(c),a.onRestoreDraft.dispatch(a,{content:c})))},hasDraft:function(){var a=this,b=a.storage,c,e;if(b){e=!!b.getItem(a.key);if(e){if(!!a.storage.autoExpires)return d;c=new Date(b.getItem(a.key+"_expires"));if((new Date).getTime()<c.getTime())return d;a.removeDraft()}}return!1},removeDraft:function(){var a=this,b=a.storage,c=a.key,d;b&&(d=b.getItem(c),b.removeItem(c),b.removeItem(c+"_expires"),d&&a.onRemoveDraft.dispatch(a,{content:d}))},"static":{_beforeUnloadHandler:function(b){var c;return a.each(tinyMCE.editors,function(a){a.plugins.autosave&&a.plugins.autosave.storeDraft();if(a.getParam("fullscreen_is_enabled"))return;!c&&a.isDirty()&&a.getParam("autosave_ask_before_unload")&&(c=a.getLang("autosave.unload_msg"))}),c}}}),a.PluginManager.add("autosave",a.plugins.AutoSave)}(tinymce),tinyMCE.addI18n("en.autosave",{restore_content:"Restore auto-saved content",warning_message:"If you restore the saved content, you will lose all the content that is currently in the editor.\n\nAre you sure you want to restore the saved content?"}),function(){tinymce.create("tinymce.plugins.BBCodePlugin",{init:function(a,b){var c=this,d=a.getParam("bbcode_dialect","punbb").toLowerCase();a.onBeforeSetContent.add(function(a,b){b.content=c["_"+d+"_bbcode2html"](b.content)}),a.onPostProcess.add(function(a,b){b.set&&(b.content=c["_"+d+"_bbcode2html"](b.content)),b.get&&(b.content=c["_"+d+"_html2bbcode"](b.content))})},getInfo:function(){return{longname:"BBCode Plugin",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/bbcode",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_punbb_html2bbcode:function(a){function b(b,c){a=a.replace(b,c)}return a=tinymce.trim(a),b(/<a.*?href=\"(.*?)\".*?>(.*?)<\/a>/gi,"[url=$1]$2[/url]"),b(/<font.*?color=\"(.*?)\".*?class=\"codeStyle\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),b(/<font.*?color=\"(.*?)\".*?class=\"quoteStyle\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),b(/<font.*?class=\"codeStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),b(/<font.*?class=\"quoteStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),b(/<span style=\"color: ?(.*?);\">(.*?)<\/span>/gi,"[color=$1]$2[/color]"),b(/<font.*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[color=$1]$2[/color]"),b(/<span style=\"font-size:(.*?);\">(.*?)<\/span>/gi,"[size=$1]$2[/size]"),b(/<font>(.*?)<\/font>/gi,"$1"),b(/<img.*?src=\"(.*?)\".*?\/>/gi,"[img]$1[/img]"),b(/<span class=\"codeStyle\">(.*?)<\/span>/gi,"[code]$1[/code]"),b(/<span class=\"quoteStyle\">(.*?)<\/span>/gi,"[quote]$1[/quote]"),b(/<strong class=\"codeStyle\">(.*?)<\/strong>/gi,"[code][b]$1[/b][/code]"),b(/<strong class=\"quoteStyle\">(.*?)<\/strong>/gi,"[quote][b]$1[/b][/quote]"),b(/<em class=\"codeStyle\">(.*?)<\/em>/gi,"[code][i]$1[/i][/code]"),b(/<em class=\"quoteStyle\">(.*?)<\/em>/gi,"[quote][i]$1[/i][/quote]"),b(/<u class=\"codeStyle\">(.*?)<\/u>/gi,"[code][u]$1[/u][/code]"),b(/<u class=\"quoteStyle\">(.*?)<\/u>/gi,"[quote][u]$1[/u][/quote]"),b(/<\/(strong|b)>/gi,"[/b]"),b(/<(strong|b)>/gi,"[b]"),b(/<\/(em|i)>/gi,"[/i]"),b(/<(em|i)>/gi,"[i]"),b(/<\/u>/gi,"[/u]"),b(/<span style=\"text-decoration: ?underline;\">(.*?)<\/span>/gi,"[u]$1[/u]"),b(/<u>/gi,"[u]"),b(/<blockquote[^>]*>/gi,"[quote]"),b(/<\/blockquote>/gi,"[/quote]"),b(/<br \/>/gi,"\n"),b(/<br\/>/gi,"\n"),b(/<br>/gi,"\n"),b(/<p>/gi,""),b(/<\/p>/gi,"\n"),b(/&nbsp;|\u00a0/gi," "),b(/&quot;/gi,'"'),b(/&lt;/gi,"<"),b(/&gt;/gi,">"),b(/&amp;/gi,"&"),a},_punbb_bbcode2html:function(a){function b(b,c){a=a.replace(b,c)}return a=tinymce.trim(a),b(/\n/gi,"<br />"),b(/\[b\]/gi,"<strong>"),b(/\[\/b\]/gi,"</strong>"),b(/\[i\]/gi,"<em>"),b(/\[\/i\]/gi,"</em>"),b(/\[u\]/gi,"<u>"),b(/\[\/u\]/gi,"</u>"),b(/\[url=([^\]]+)\](.*?)\[\/url\]/gi,'<a href="$1">$2</a>'),b(/\[url\](.*?)\[\/url\]/gi,'<a href="$1">$1</a>'),b(/\[img\](.*?)\[\/img\]/gi,'<img src="$1" />'),b(/\[color=(.*?)\](.*?)\[\/color\]/gi,'<font color="$1">$2</font>'),b(/\[code\](.*?)\[\/code\]/gi,'<span class="codeStyle">$1</span>&nbsp;'),b(/\[quote.*?\](.*?)\[\/quote\]/gi,'<span class="quoteStyle">$1</span>&nbsp;'),a}}),tinymce.PluginManager.add("bbcode",tinymce.plugins.BBCodePlugin)}(),function(){tinymce.create("tinymce.plugins.BBCodePlugin",{init:function(a,b){var c=this,d=a.getParam("bbcode_dialect","punbb").toLowerCase();a.onBeforeSetContent.add(function(a,b){b.content=c["_"+d+"_bbcode2html"](b.content)}),a.onPostProcess.add(function(a,b){b.set&&(b.content=c["_"+d+"_bbcode2html"](b.content)),b.get&&(b.content=c["_"+d+"_html2bbcode"](b.content))})},getInfo:function(){return{longname:"BBCode Plugin",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/bbcode",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_punbb_html2bbcode:function(a){function b(b,c){a=a.replace(b,c)}return a=tinymce.trim(a),b(/<a.*?href=\"(.*?)\".*?>(.*?)<\/a>/gi,"[url=$1]$2[/url]"),b(/<font.*?color=\"(.*?)\".*?class=\"codeStyle\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),b(/<font.*?color=\"(.*?)\".*?class=\"quoteStyle\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),b(/<font.*?class=\"codeStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),b(/<font.*?class=\"quoteStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),b(/<span style=\"color: ?(.*?);\">(.*?)<\/span>/gi,"[color=$1]$2[/color]"),b(/<font.*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[color=$1]$2[/color]"),b(/<span style=\"font-size:(.*?);\">(.*?)<\/span>/gi,"[size=$1]$2[/size]"),b(/<font>(.*?)<\/font>/gi,"$1"),b(/<img.*?src=\"(.*?)\".*?\/>/gi,"[img]$1[/img]"),b(/<span class=\"codeStyle\">(.*?)<\/span>/gi,"[code]$1[/code]"),b(/<span class=\"quoteStyle\">(.*?)<\/span>/gi,"[quote]$1[/quote]"),b(/<strong class=\"codeStyle\">(.*?)<\/strong>/gi,"[code][b]$1[/b][/code]"),b(/<strong class=\"quoteStyle\">(.*?)<\/strong>/gi,"[quote][b]$1[/b][/quote]"),b(/<em class=\"codeStyle\">(.*?)<\/em>/gi,"[code][i]$1[/i][/code]"),b(/<em class=\"quoteStyle\">(.*?)<\/em>/gi,"[quote][i]$1[/i][/quote]"),b(/<u class=\"codeStyle\">(.*?)<\/u>/gi,"[code][u]$1[/u][/code]"),b(/<u class=\"quoteStyle\">(.*?)<\/u>/gi,"[quote][u]$1[/u][/quote]"),b(/<\/(strong|b)>/gi,"[/b]"),b(/<(strong|b)>/gi,"[b]"),b(/<\/(em|i)>/gi,"[/i]"),b(/<(em|i)>/gi,"[i]"),b(/<\/u>/gi,"[/u]"),b(/<span style=\"text-decoration: ?underline;\">(.*?)<\/span>/gi,"[u]$1[/u]"),b(/<u>/gi,"[u]"),b(/<blockquote[^>]*>/gi,"[quote]"),b(/<\/blockquote>/gi,"[/quote]"),b(/<br \/>/gi,"\n"),b(/<br\/>/gi,"\n"),b(/<br>/gi,"\n"),b(/<p>/gi,""),b(/<\/p>/gi,"\n"),b(/&nbsp;|\u00a0/gi," "),b(/&quot;/gi,'"'),b(/&lt;/gi,"<"),b(/&gt;/gi,">"),b(/&amp;/gi,"&"),a},_punbb_bbcode2html:function(a){function b(b,c){a=a.replace(b,c)}return a=tinymce.trim(a),b(/\n/gi,"<br />"),b(/\[b\]/gi,"<strong>"),b(/\[\/b\]/gi,"</strong>"),b(/\[i\]/gi,"<em>"),b(/\[\/i\]/gi,"</em>"),b(/\[u\]/gi,"<u>"),b(/\[\/u\]/gi,"</u>"),b(/\[url=([^\]]+)\](.*?)\[\/url\]/gi,'<a href="$1">$2</a>'),b(/\[url\](.*?)\[\/url\]/gi,'<a href="$1">$1</a>'),b(/\[img\](.*?)\[\/img\]/gi,'<img src="$1" />'),b(/\[color=(.*?)\](.*?)\[\/color\]/gi,'<font color="$1">$2</font>'),b(/\[code\](.*?)\[\/code\]/gi,'<span class="codeStyle">$1</span>&nbsp;'),b(/\[quote.*?\](.*?)\[\/quote\]/gi,'<span class="quoteStyle">$1</span>&nbsp;'),a}}),tinymce.PluginManager.add("bbcode",tinymce.plugins.BBCodePlugin)}(),function(){var a=tinymce.dom.Event,b=tinymce.each,c=tinymce.DOM;tinymce.create("tinymce.plugins.ContextMenu",{init:function(b){function g(b,d){f=0;if(d&&d.button==2){f=d.ctrlKey;return}c._menu&&(c._menu.removeAll(),c._menu.destroy(),a.remove(b.getDoc(),"click",g))}var c=this,d,e,f;c.editor=b,e=b.settings.contextmenu_never_use_native,c.onContextMenu=new tinymce.util.Dispatcher(this),d=b.onContextMenu.add(function(b,d){if((f!==0?f:d.ctrlKey)&&!e)return;a.cancel(d),d.target.nodeName=="IMG"&&b.selection.select(d.target),c._getMenu(b).showMenu(d.clientX||d.pageX,d.clientY||d.pageY),a.add(b.getDoc(),"click",function(a){g(b,a)}),b.nodeChanged()}),b.onRemove.add(function(){c._menu&&c._menu.removeAll()}),b.onMouseDown.add(g),b.onKeyDown.add(g),b.onKeyDown.add(function(b,c){c.shiftKey&&!c.ctrlKey&&!c.altKey&&c.keyCode===121&&(a.cancel(c),d(b,c))})},getInfo:function(){return{longname:"Contextmenu",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/contextmenu",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_getMenu:function(a){var b=this,d=b._menu,e=a.selection,f=e.isCollapsed(),g=e.getNode()||a.getBody(),h,i;d&&(d.removeAll(),d.destroy()),i=c.getPos(a.getContentAreaContainer()),d=a.controlManager.createDropMenu("contextmenu",{offset_x:i.x+a.getParam("contextmenu_offset_x",0),offset_y:i.y+a.getParam("contextmenu_offset_y",0),constrain:1,keyboard_focus:!0}),b._menu=d,d.add({title:"advanced.cut_desc",icon:"cut",cmd:"Cut"}).setDisabled(f),d.add({title:"advanced.copy_desc",icon:"copy",cmd:"Copy"}).setDisabled(f),d.add({title:"advanced.paste_desc",icon:"paste",cmd:"Paste"});if(g.nodeName=="A"&&!a.dom.getAttrib(g,"name")||!f)d.addSeparator(),d.add({title:"advanced.link_desc",icon:"link",cmd:a.plugins.advlink?"mceAdvLink":"mceLink",ui:!0}),d.add({title:"advanced.unlink_desc",icon:"unlink",cmd:"UnLink"});return d.addSeparator(),d.add({title:"advanced.image_desc",icon:"image",cmd:a.plugins.advimage?"mceAdvImage":"mceImage",ui:!0}),d.addSeparator(),h=d.addMenu({title:"contextmenu.align"}),h.add({title:"contextmenu.left",icon:"justifyleft",cmd:"JustifyLeft"}),h.add({title:"contextmenu.center",icon:"justifycenter",cmd:"JustifyCenter"}),h.add({title:"contextmenu.right",icon:"justifyright",cmd:"JustifyRight"}),h.add({title:"contextmenu.full",icon:"justifyfull",cmd:"JustifyFull"}),b.onContextMenu.dispatch(b,d,g,f),d}}),tinymce.PluginManager.add("contextmenu",tinymce.plugins.ContextMenu)}(),function(){var a=tinymce.dom.Event,b=tinymce.each,c=tinymce.DOM;tinymce.create("tinymce.plugins.ContextMenu",{init:function(b){function g(b,d){f=0;if(d&&d.button==2){f=d.ctrlKey;return}c._menu&&(c._menu.removeAll(),c._menu.destroy(),a.remove(b.getDoc(),"click",g))}var c=this,d,e,f;c.editor=b,e=b.settings.contextmenu_never_use_native,c.onContextMenu=new tinymce.util.Dispatcher(this),d=b.onContextMenu.add(function(b,d){if((f!==0?f:d.ctrlKey)&&!e)return;a.cancel(d),d.target.nodeName=="IMG"&&b.selection.select(d.target),c._getMenu(b).showMenu(d.clientX||d.pageX,d.clientY||d.pageY),a.add(b.getDoc(),"click",function(a){g(b,a)}),b.nodeChanged()}),b.onRemove.add(function(){c._menu&&c._menu.removeAll()}),b.onMouseDown.add(g),b.onKeyDown.add(g),b.onKeyDown.add(function(b,c){c.shiftKey&&!c.ctrlKey&&!c.altKey&&c.keyCode===121&&(a.cancel(c),d(b,c))})},getInfo:function(){return{longname:"Contextmenu",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/contextmenu",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_getMenu:function(a){var b=this,d=b._menu,e=a.selection,f=e.isCollapsed(),g=e.getNode()||a.getBody(),h,i;d&&(d.removeAll(),d.destroy()),i=c.getPos(a.getContentAreaContainer()),d=a.controlManager.createDropMenu("contextmenu",{offset_x:i.x+a.getParam("contextmenu_offset_x",0),offset_y:i.y+a.getParam("contextmenu_offset_y",0),constrain:1,keyboard_focus:!0}),b._menu=d,d.add({title:"advanced.cut_desc",icon:"cut",cmd:"Cut"}).setDisabled(f),d.add({title:"advanced.copy_desc",icon:"copy",cmd:"Copy"}).setDisabled(f),d.add({title:"advanced.paste_desc",icon:"paste",cmd:"Paste"});if(g.nodeName=="A"&&!a.dom.getAttrib(g,"name")||!f)d.addSeparator(),d.add({title:"advanced.link_desc",icon:"link",cmd:a.plugins.advlink?"mceAdvLink":"mceLink",ui:!0}),d.add({title:"advanced.unlink_desc",icon:"unlink",cmd:"UnLink"});return d.addSeparator(),d.add({title:"advanced.image_desc",icon:"image",cmd:a.plugins.advimage?"mceAdvImage":"mceImage",ui:!0}),d.addSeparator(),h=d.addMenu({title:"contextmenu.align"}),h.add({title:"contextmenu.left",icon:"justifyleft",cmd:"JustifyLeft"}),h.add({title:"contextmenu.center",icon:"justifycenter",cmd:"JustifyCenter"}),h.add({title:"contextmenu.right",icon:"justifyright",cmd:"JustifyRight"}),h.add({title:"contextmenu.full",icon:"justifyfull",cmd:"JustifyFull"}),b.onContextMenu.dispatch(b,d,g,f),d}}),tinymce.PluginManager.add("contextmenu",tinymce.plugins.ContextMenu)}(),function(){tinymce.create("tinymce.plugins.Directionality",{init:function(a,b){var c=this;c.editor=a,a.addCommand("mceDirectionLTR",function(){var b=a.dom.getParent(a.selection.getNode(),a.dom.isBlock);b&&(a.dom.getAttrib(b,"dir")!="ltr"?a.dom.setAttrib(b,"dir","ltr"):a.dom.setAttrib(b,"dir","")),a.nodeChanged()}),a.addCommand("mceDirectionRTL",function(){var b=a.dom.getParent(a.selection.getNode(),a.dom.isBlock);b&&(a.dom.getAttrib(b,"dir")!="rtl"?a.dom.setAttrib(b,"dir","rtl"):a.dom.setAttrib(b,"dir","")),a.nodeChanged()}),a.addButton("ltr",{title:"directionality.ltr_desc",cmd:"mceDirectionLTR"}),a.addButton("rtl",{title:"directionality.rtl_desc",cmd:"mceDirectionRTL"}),a.onNodeChange.add(c._nodeChange,c)},getInfo:function(){return{longname:"Directionality",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/directionality",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_nodeChange:function(a,b,c){var d=a.dom,e;c=d.getParent(c,d.isBlock);if(!c){b.setDisabled("ltr",1),b.setDisabled("rtl",1);return}e=d.getAttrib(c,"dir"),b.setActive("ltr",e=="ltr"),b.setDisabled("ltr",0),b.setActive("rtl",e=="rtl"),b.setDisabled("rtl",0)}}),tinymce.PluginManager.add("directionality",tinymce.plugins.Directionality)}(),function(){tinymce.create("tinymce.plugins.Directionality",{init:function(a,b){var c=this;c.editor=a,a.addCommand("mceDirectionLTR",function(){var b=a.dom.getParent(a.selection.getNode(),a.dom.isBlock);b&&(a.dom.getAttrib(b,"dir")!="ltr"?a.dom.setAttrib(b,"dir","ltr"):a.dom.setAttrib(b,"dir","")),a.nodeChanged()}),a.addCommand("mceDirectionRTL",function(){var b=a.dom.getParent(a.selection.getNode(),a.dom.isBlock);b&&(a.dom.getAttrib(b,"dir")!="rtl"?a.dom.setAttrib(b,"dir","rtl"):a.dom.setAttrib(b,"dir","")),a.nodeChanged()}),a.addButton("ltr",{title:"directionality.ltr_desc",cmd:"mceDirectionLTR"}),a.addButton("rtl",{title:"directionality.rtl_desc",cmd:"mceDirectionRTL"}),a.onNodeChange.add(c._nodeChange,c)},getInfo:function(){return{longname:"Directionality",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/directionality",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_nodeChange:function(a,b,c){var d=a.dom,e;c=d.getParent(c,d.isBlock);if(!c){b.setDisabled("ltr",1),b.setDisabled("rtl",1);return}e=d.getAttrib(c,"dir"),b.setActive("ltr",e=="ltr"),b.setDisabled("ltr",0),b.setActive("rtl",e=="rtl"),b.setDisabled("rtl",0)}}),tinymce.PluginManager.add("directionality",tinymce.plugins.Directionality)}(),function(a){a.create("tinymce.plugins.EmotionsPlugin",{init:function(a,b){a.addCommand("mceEmotion",function(){a.windowManager.open({file:b+"/emotions.htm",width:250+parseInt(a.getLang("emotions.delta_width",0)),height:160+parseInt(a.getLang("emotions.delta_height",0)),inline:1},{plugin_url:b})}),a.addButton("emotions",{title:"emotions.emotions_desc",cmd:"mceEmotion"})},getInfo:function(){return{longname:"Emotions",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/emotions",version:a.majorVersion+"."+a.minorVersion}}}),a.PluginManager.add("emotions",a.plugins.EmotionsPlugin)}(tinymce),function(a){a.create("tinymce.plugins.EmotionsPlugin",{init:function(a,b){a.addCommand("mceEmotion",function(){a.windowManager.open({file:b+"/emotions.htm",width:250+parseInt(a.getLang("emotions.delta_width",0)),height:160+parseInt(a.getLang("emotions.delta_height",0)),inline:1},{plugin_url:b})}),a.addButton("emotions",{title:"emotions.emotions_desc",cmd:"mceEmotion"})},getInfo:function(){return{longname:"Emotions",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/emotions",version:a.majorVersion+"."+a.minorVersion}}}),a.PluginManager.add("emotions",a.plugins.EmotionsPlugin)}(tinymce),tinyMCEPopup.requireLangPack();var EmotionsDialog={addKeyboardNavigation:function(){var a,b,c;b=tinyMCEPopup.dom.select("a.emoticon_link","emoticon_table"),c={root:"emoticon_table",items:b},b[0].tabindex=0,tinyMCEPopup.dom.addClass(b[0],"mceFocus"),tinymce.isGecko?b[0].focus():setTimeout(function(){b[0].focus()},100),tinyMCEPopup.editor.windowManager.createInstance("tinymce.ui.KeyboardNavigation",c,tinyMCEPopup.dom)},init:function(a){tinyMCEPopup.resizeToInnerSize(),this.addKeyboardNavigation()},insert:function(a,b){var c=tinyMCEPopup.editor,d=c.dom;tinyMCEPopup.execCommand("mceInsertContent",!1,d.createHTML("img",{src:tinyMCEPopup.getWindowArg("plugin_url")+"/img/"+a,alt:c.getLang(b),title:c.getLang(b),border:0})),tinyMCEPopup.close()}};tinyMCEPopup.onInit.add(EmotionsDialog.init,EmotionsDialog),tinyMCE.addI18n("en.emotions_dlg",{cry:"Cry",cool:"Cool",desc:"Emotions",title:"Insert Emotion",usage:"Use left and right arrows to navigate.",yell:"Yell",wink:"Wink",undecided:"Undecided",tongue_out:"Tongue Out",surprised:"Surprised",smile:"Smile",sealed:"Sealed",money_mouth:"Money Mouth",laughing:"Laughing",kiss:"Kiss",innocent:"Innocent",frown:"Frown",foot_in_mouth:"Foot in Mouth",embarassed:"Embarassed"}),function(){tinymce.PluginManager.requireLangPack("example"),tinymce.create("tinymce.plugins.ExamplePlugin",{init:function(a,b){a.addCommand("mceExample",function(){a.windowManager.open({file:b+"/dialog.htm",width:320+parseInt(a.getLang("example.delta_width",0)),height:120+parseInt(a.getLang("example.delta_height",0)),inline:1},{plugin_url:b,some_custom_arg:"custom arg"})}),a.addButton("example",{title:"example.desc",cmd:"mceExample",image:b+"/img/example.gif"}),a.onNodeChange.add(function(a,b,c){b.setActive("example",c.nodeName=="IMG")})},createControl:function(a,b){return null},getInfo:function(){return{longname:"Example plugin",author:"Some author",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/example",version:"1.0"}}}),tinymce.PluginManager.add("example",tinymce.plugins.ExamplePlugin)}(),function(){tinymce.PluginManager.requireLangPack("example"),tinymce.create("tinymce.plugins.ExamplePlugin",{init:function(a,b){a.addCommand("mceExample",function(){a.windowManager.open({file:b+"/dialog.htm",width:320+parseInt(a.getLang("example.delta_width",0)),height:120+parseInt(a.getLang("example.delta_height",0)),inline:1},{plugin_url:b,some_custom_arg:"custom arg"})}),a.addButton("example",{title:"example.desc",cmd:"mceExample",image:b+"/img/example.gif"}),a.onNodeChange.add(function(a,b,c){b.setActive("example",c.nodeName=="IMG")})},createControl:function(a,b){return null},getInfo:function(){return{longname:"Example plugin",author:"Some author",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/example",version:"1.0"}}}),tinymce.PluginManager.add("example",tinymce.plugins.ExamplePlugin)}(),tinyMCEPopup.requireLangPack();var ExampleDialog={init:function(){var a=document.forms[0];a.someval.value=tinyMCEPopup.editor.selection.getContent({format:"text"}),a.somearg.value=tinyMCEPopup.getWindowArg("some_custom_arg")},insert:function(){tinyMCEPopup.editor.execCommand("mceInsertContent",!1,document.forms[0].someval.value),tinyMCEPopup.close()}};tinyMCEPopup.onInit.add(ExampleDialog.init,ExampleDialog),tinyMCE.addI18n("en.example",{desc:"This is just a template button"}),tinyMCE.addI18n("en.example_dlg",{title:"This is just a example title"}),function(){tinymce.create("tinymce.plugins.ExampleDependencyPlugin",{init:function(a,b){},getInfo:function(){return{longname:"Example Dependency plugin",author:"Some author",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/example_dependency",version:"1.0"}}}),tinymce.PluginManager.add("example_dependency",tinymce.plugins.ExampleDependencyPlugin,["example"])}(),function(){tinymce.create("tinymce.plugins.ExampleDependencyPlugin",{init:function(a,b){},getInfo:function(){return{longname:"Example Dependency plugin",author:"Some author",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/example_dependency",version:"1.0"}}}),tinymce.PluginManager.add("example_dependency",tinymce.plugins.ExampleDependencyPlugin,["example"])}(),function(){var a=tinymce.each,b=tinymce.html.Node;tinymce.create("tinymce.plugins.FullPagePlugin",{init:function(a,b){var c=this;c.editor=a,a.addCommand("mceFullPageProperties",function(){a.windowManager.open({file:b+"/fullpage.htm",width:430+parseInt(a.getLang("fullpage.delta_width",0)),height:495+parseInt(a.getLang("fullpage.delta_height",0)),inline:1},{plugin_url:b,data:c._htmlToData()})}),a.addButton("fullpage",{title:"fullpage.desc",cmd:"mceFullPageProperties"}),a.onBeforeSetContent.add(c._setContent,c),a.onGetContent.add(c._getContent,c)},getInfo:function(){return{longname:"Fullpage",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/fullpage",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_htmlToData:function(){function h(a,b){var c=a.attr(b);return c||""}var b=this._parseHeader(),c={},d,e,f,g=this.editor;return c.fontface=g.getParam("fullpage_default_fontface",""),c.fontsize=g.getParam("fullpage_default_fontsize",""),e=b.firstChild,e.type==7&&(c.xml_pi=!0,f=/encoding="([^"]+)"/.exec(e.value),f&&(c.docencoding=f[1])),e=b.getAll("#doctype")[0],e&&(c.doctype="<!DOCTYPE"+e.value+">"),e=b.getAll("title")[0],e&&e.firstChild&&(c.metatitle=e.firstChild.value),a(b.getAll("meta"),function(a){var b=a.attr("name"),d=a.attr("http-equiv"),e;b?c["meta"+b.toLowerCase()]=a.attr("content"):d=="Content-Type"&&(e=/charset\s*=\s*(.*)\s*/gi.exec(a.attr("content")),e&&(c.docencoding=e[1]))}),e=b.getAll("html")[0],e&&(c.langcode=h(e,"lang")||h(e,"xml:lang")),e=b.getAll("link")[0],e&&e.attr("rel")=="stylesheet"&&(c.stylesheet=e.attr("href")),e=b.getAll("body")[0],e&&(c.langdir=h(e,"dir"),c.style=h(e,"style"),c.visited_color=h(e,"vlink"),c.link_color=h(e,"link"),c.active_color=h(e,"alink")),c},_dataToHtml:function(c){function j(a,b,c){a.attr(b,c?c:undefined)}function k(a){e.firstChild?e.insert(a,e.firstChild):e.append(a)}var d,e,f,g,h,i=this.editor.dom;d=this._parseHeader(),e=d.getAll("head")[0],e||(g=d.getAll("html")[0],e=new b("head",1),g.firstChild?g.insert(e,g.firstChild,!0):g.append(e)),g=d.firstChild,c.xml_pi?(h='version="1.0"',c.docencoding&&(h+=' encoding="'+c.docencoding+'"'),g.type!=7&&(g=new b("xml",7),d.insert(g,d.firstChild,!0)),g.value=h):g&&g.type==7&&g.remove(),g=d.getAll("#doctype")[0],c.doctype?(g||(g=new b("#doctype",10),c.xml_pi?d.insert(g,d.firstChild):k(g)),g.value=c.doctype.substring(9,c.doctype.length-1)):g&&g.remove(),g=d.getAll("title")[0],c.metatitle&&(g||(g=new b("title",1),g.append(new b("#text",3)).value=c.metatitle,k(g))),c.docencoding&&(g=null,a(d.getAll("meta"),function(a){a.attr("http-equiv")=="Content-Type"&&(g=a)}),g||(g=new b("meta",1),g.attr("http-equiv","Content-Type"),g.shortEnded=!0,k(g)),g.attr("content","text/html; charset="+c.docencoding)),a("keywords,description,author,copyright,robots".split(","),function(a){var e=d.getAll("meta"),f,h,i=c["meta"+a];for(f=0;f<e.length;f++){h=e[f];if(h.attr("name")==a){i?h.attr("content",i):h.remove();return}}i&&(g=new b("meta",1),g.attr("name",a),g.attr("content",i),g.shortEnded=!0,k(g))}),g=d.getAll("link")[0],g&&g.attr("rel")=="stylesheet"?c.stylesheet?g.attr("href",c.stylesheet):g.remove():c.stylesheet&&(g=new b("link",1),g.attr({rel:"stylesheet",text:"text/css",href:c.stylesheet}),g.shortEnded=!0,k(g)),g=d.getAll("body")[0],g&&(j(g,"dir",c.langdir),j(g,"style",c.style),j(g,"vlink",c.visited_color),j(g,"link",c.link_color),j(g,"alink",c.active_color),i.setAttribs(this.editor.getBody(),{style:c.style,dir:c.dir,vLink:c.visited_color,link:c.link_color,aLink:c.active_color})),g=d.getAll("html")[0],g&&(j(g,"lang",c.langcode),j(g,"xml:lang",c.langcode)),f=(new tinymce.html.Serializer({validate:!1,indent:!0,apply_source_formatting:!0,indent_before:"head,html,body,meta,title,script,link,style",indent_after:"head,html,body,meta,title,script,link,style"})).serialize(d),this.head=f.substring(0,f.indexOf("</body>"))},_parseHeader:function(){return(new tinymce.html.DomParser({validate:!1,root_name:"#document"})).parse(this.head)},_setContent:function(b,c){function l(a){return a.replace(/<\/?[A-Z]+/g,function(a){return a.toLowerCase()})}var d=this,e,f,g=c.content,h,i="",j=d.editor.dom,k;if(c.format=="raw"&&d.head)return;if(c.source_view&&b.getParam("fullpage_hide_in_source_view"))return;g=g.replace(/<(\/?)BODY/gi,"<$1body"),e=g.indexOf("<body"),e!=-1?(e=g.indexOf(">",e),d.head=l(g.substring(0,e+1)),f=g.indexOf("</body",e),f==-1&&(f=g.length),c.content=g.substring(e+1,f),d.foot=l(g.substring(f))):(d.head=this._getDefaultHeader(),d.foot="\n</body>\n</html>"),h=d._parseHeader(),a(h.getAll("style"),function(a){a.firstChild&&(i+=a.firstChild.value)}),k=h.getAll("body")[0],k&&j.setAttribs(d.editor.getBody(),{style:k.attr("style")||"",dir:k.attr("dir")||"",vLink:k.attr("vlink")||"",link:k.attr("link")||"",aLink:k.attr("alink")||""}),j.remove("fullpage_styles"),i&&(j.add(d.editor.getDoc().getElementsByTagName("head")[0],"style",{id:"fullpage_styles"},i),k=j.get("fullpage_styles"),k.styleSheet&&(k.styleSheet.cssText=i))},_getDefaultHeader:function(){var a="",b=this.editor,c,d="";b.getParam("fullpage_default_xml_pi")&&(a+='<?xml version="1.0" encoding="'+b.getParam("fullpage_default_encoding","ISO-8859-1")+'" ?>\n'),a+=b.getParam("fullpage_default_doctype",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'),a+="\n<html>\n<head>\n";if(c=b.getParam("fullpage_default_title"))a+="<title>"+c+"</title>\n";if(c=b.getParam("fullpage_default_encoding"))a+='<meta http-equiv="Content-Type" content="text/html; charset='+c+'" />\n';if(c=b.getParam("fullpage_default_font_family"))d+="font-family: "+c+";";if(c=b.getParam("fullpage_default_font_size"))d+="font-size: "+c+";";if(c=b.getParam("fullpage_default_text_color"))d+="color: "+c+";";return a+="</head>\n<body"+(d?' style="'+d+'"':"")+">\n",a},_getContent:function(a,b){var c=this;if(!b.source_view||!a.getParam("fullpage_hide_in_source_view"))b.content=tinymce.trim(c.head)+"\n"+tinymce.trim(b.content)+"\n"+tinymce.trim(c.foot)}}),tinymce.PluginManager.add("fullpage",tinymce.plugins.FullPagePlugin)}(),function(){var a=tinymce.each,b=tinymce.html.Node;tinymce.create("tinymce.plugins.FullPagePlugin",{init:function(a,b){var c=this;c.editor=a,a.addCommand("mceFullPageProperties",function(){a.windowManager.open({file:b+"/fullpage.htm",width:430+parseInt(a.getLang("fullpage.delta_width",0)),height:495+parseInt(a.getLang("fullpage.delta_height",0)),inline:1},{plugin_url:b,data:c._htmlToData()})}),a.addButton("fullpage",{title:"fullpage.desc",cmd:"mceFullPageProperties"}),a.onBeforeSetContent.add(c._setContent,c),a.onGetContent.add(c._getContent,c)},getInfo:function(){return{longname:"Fullpage",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/fullpage",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_htmlToData:function(){function h(a,b){var c=a.attr(b);return c||""}var b=this._parseHeader(),c={},d,e,f,g=this.editor;return c.fontface=g.getParam("fullpage_default_fontface",""),c.fontsize=g.getParam("fullpage_default_fontsize",""),e=b.firstChild,e.type==7&&(c.xml_pi=!0,f=/encoding="([^"]+)"/.exec(e.value),f&&(c.docencoding=f[1])),e=b.getAll("#doctype")[0],e&&(c.doctype="<!DOCTYPE"+e.value+">"),e=b.getAll("title")[0],e&&e.firstChild&&(c.metatitle=e.firstChild.value),a(b.getAll("meta"),function(a){var b=a.attr("name"),d=a.attr("http-equiv"),e;b?c["meta"+b.toLowerCase()]=a.attr("content"):d=="Content-Type"&&(e=/charset\s*=\s*(.*)\s*/gi.exec(a.attr("content")),e&&(c.docencoding=e[1]))}),e=b.getAll("html")[0],e&&(c.langcode=h(e,"lang")||h(e,"xml:lang")),e=b.getAll("link")[0],e&&e.attr("rel")=="stylesheet"&&(c.stylesheet=e.attr("href")),e=b.getAll("body")[0],e&&(c.langdir=h(e,"dir"),c.style=h(e,"style"),c.visited_color=h(e,"vlink"),c.link_color=h(e,"link"),c.active_color=h(e,"alink")),c},_dataToHtml:function(c){function j(a,b,c){a.attr(b,c?c:undefined)}function k(a){e.firstChild?e.insert(a,e.firstChild):e.append(a)}var d,e,f,g,h,i=this.editor.dom;d=this._parseHeader(),e=d.getAll("head")[0],e||(g=d.getAll("html")[0],e=new b("head",1),g.firstChild?g.insert(e,g.firstChild,!0):g.append(e)),g=d.firstChild,c.xml_pi?(h='version="1.0"',c.docencoding&&(h+=' encoding="'+c.docencoding+'"'),g.type!=7&&(g=new b("xml",7),d.insert(g,d.firstChild,!0)),g.value=h):g&&g.type==7&&g.remove(),g=d.getAll("#doctype")[0],c.doctype?(g||(g=new b("#doctype",10),c.xml_pi?d.insert(g,d.firstChild):k(g)),g.value=c.doctype.substring(9,c.doctype.length-1)):g&&g.remove(),g=d.getAll("title")[0],c.metatitle&&(g||(g=new b("title",1),g.append(new b("#text",3)).value=c.metatitle,k(g))),c.docencoding&&(g=null,a(d.getAll("meta"),function(a){a.attr("http-equiv")=="Content-Type"&&(g=a)}),g||(g=new b("meta",1),g.attr("http-equiv","Content-Type"),g.shortEnded=!0,k(g)),g.attr("content","text/html; charset="+c.docencoding)),a("keywords,description,author,copyright,robots".split(","),function(a){var e=d.getAll("meta"),f,h,i=c["meta"+a];for(f=0;f<e.length;f++){h=e[f];if(h.attr("name")==a){i?h.attr("content",i):h.remove();return}}i&&(g=new b("meta",1),g.attr("name",a),g.attr("content",i),g.shortEnded=!0,k(g))}),g=d.getAll("link")[0],g&&g.attr("rel")=="stylesheet"?c.stylesheet?g.attr("href",c.stylesheet):g.remove():c.stylesheet&&(g=new b("link",1),g.attr({rel:"stylesheet",text:"text/css",href:c.stylesheet}),g.shortEnded=!0,k(g)),g=d.getAll("body")[0],g&&(j(g,"dir",c.langdir),j(g,"style",c.style),j(g,"vlink",c.visited_color),j(g,"link",c.link_color),j(g,"alink",c.active_color),i.setAttribs(this.editor.getBody(),{style:c.style,dir:c.dir,vLink:c.visited_color,link:c.link_color,aLink:c.active_color})),g=d.getAll("html")[0],g&&(j(g,"lang",c.langcode),j(g,"xml:lang",c.langcode)),f=(new tinymce.html.Serializer({validate:!1,indent:!0,apply_source_formatting:!0,indent_before:"head,html,body,meta,title,script,link,style",indent_after:"head,html,body,meta,title,script,link,style"})).serialize(d),this.head=f.substring(0,f.indexOf("</body>"))},_parseHeader:function(){return(new tinymce.html.DomParser({validate:!1,root_name:"#document"
})).parse(this.head)},_setContent:function(b,c){function l(a){return a.replace(/<\/?[A-Z]+/g,function(a){return a.toLowerCase()})}var d=this,e,f,g=c.content,h,i="",j=d.editor.dom,k;if(c.format=="raw"&&d.head)return;if(c.source_view&&b.getParam("fullpage_hide_in_source_view"))return;g=g.replace(/<(\/?)BODY/gi,"<$1body"),e=g.indexOf("<body"),e!=-1?(e=g.indexOf(">",e),d.head=l(g.substring(0,e+1)),f=g.indexOf("</body",e),f==-1&&(f=g.length),c.content=g.substring(e+1,f),d.foot=l(g.substring(f))):(d.head=this._getDefaultHeader(),d.foot="\n</body>\n</html>"),h=d._parseHeader(),a(h.getAll("style"),function(a){a.firstChild&&(i+=a.firstChild.value)}),k=h.getAll("body")[0],k&&j.setAttribs(d.editor.getBody(),{style:k.attr("style")||"",dir:k.attr("dir")||"",vLink:k.attr("vlink")||"",link:k.attr("link")||"",aLink:k.attr("alink")||""}),j.remove("fullpage_styles"),i&&(j.add(d.editor.getDoc().getElementsByTagName("head")[0],"style",{id:"fullpage_styles"},i),k=j.get("fullpage_styles"),k.styleSheet&&(k.styleSheet.cssText=i))},_getDefaultHeader:function(){var a="",b=this.editor,c,d="";b.getParam("fullpage_default_xml_pi")&&(a+='<?xml version="1.0" encoding="'+b.getParam("fullpage_default_encoding","ISO-8859-1")+'" ?>\n'),a+=b.getParam("fullpage_default_doctype",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'),a+="\n<html>\n<head>\n";if(c=b.getParam("fullpage_default_title"))a+="<title>"+c+"</title>\n";if(c=b.getParam("fullpage_default_encoding"))a+='<meta http-equiv="Content-Type" content="text/html; charset='+c+'" />\n';if(c=b.getParam("fullpage_default_font_family"))d+="font-family: "+c+";";if(c=b.getParam("fullpage_default_font_size"))d+="font-size: "+c+";";if(c=b.getParam("fullpage_default_text_color"))d+="color: "+c+";";return a+="</head>\n<body"+(d?' style="'+d+'"':"")+">\n",a},_getContent:function(a,b){var c=this;if(!b.source_view||!a.getParam("fullpage_hide_in_source_view"))b.content=tinymce.trim(c.head)+"\n"+tinymce.trim(b.content)+"\n"+tinymce.trim(c.foot)}}),tinymce.PluginManager.add("fullpage",tinymce.plugins.FullPagePlugin)}(),function(){function e(a,b){var c=document.getElementById(a);c&&(b=b||"",c.nodeName=="SELECT"?selectByValue(document.forms[0],a,b):c.type=="checkbox"?c.checked=!!b:c.value=b)}function f(a){var b=document.getElementById(a);return b.nodeName=="SELECT"?b.options[b.selectedIndex].value:b.type=="checkbox"?b.checked:b.value}function g(){var f=document.forms[0],g,h,i,j=tinyMCEPopup.editor;i=j.getParam("fullpage_doctypes",a).split(",");for(g=0;g<i.length;g++)h=i[g].split("="),h.length>1&&addSelectValue(f,"doctype",h[0],h[1]);i=j.getParam("fullpage_fonts",c).split(";");for(g=0;g<i.length;g++)h=i[g].split("="),h.length>1&&addSelectValue(f,"fontface",h[0],h[1]);i=j.getParam("fullpage_fontsizes",d).split(",");for(g=0;g<i.length;g++)addSelectValue(f,"fontsize",i[g],i[g]);i=j.getParam("fullpage_encodings",b).split(",");for(g=0;g<i.length;g++)h=i[g].split("="),h.length>1&&addSelectValue(f,"docencoding",h[0],h[1]);document.getElementById("bgcolor_pickcontainer").innerHTML=getColorPickerHTML("bgcolor_pick","bgcolor"),document.getElementById("link_color_pickcontainer").innerHTML=getColorPickerHTML("link_color_pick","link_color"),document.getElementById("visited_color_pickcontainer").innerHTML=getColorPickerHTML("visited_color_pick","visited_color"),document.getElementById("active_color_pickcontainer").innerHTML=getColorPickerHTML("active_color_pick","active_color"),document.getElementById("textcolor_pickcontainer").innerHTML=getColorPickerHTML("textcolor_pick","textcolor"),document.getElementById("stylesheet_browsercontainer").innerHTML=getBrowserHTML("stylesheetbrowser","stylesheet","file","fullpage"),document.getElementById("bgimage_pickcontainer").innerHTML=getBrowserHTML("bgimage_browser","bgimage","image","fullpage"),isVisible("stylesheetbrowser")&&(document.getElementById("stylesheet").style.width="220px"),isVisible("link_href_browser")&&(document.getElementById("element_link_href").style.width="230px"),isVisible("bgimage_browser")&&(document.getElementById("bgimage").style.width="210px"),tinymce.each(tinyMCEPopup.getWindowArg("data"),function(a,b){e(b,a)}),FullPageDialog.changedStyle(),updateColor("textcolor_pick","textcolor"),updateColor("bgcolor_pick","bgcolor"),updateColor("visited_color_pick","visited_color"),updateColor("active_color_pick","active_color"),updateColor("link_color_pick","link_color")}tinyMCEPopup.requireLangPack();var a='XHTML 1.0 Transitional=<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">,XHTML 1.0 Frameset=<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">,XHTML 1.0 Strict=<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">,XHTML 1.1=<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">,HTML 4.01 Transitional=<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">,HTML 4.01 Strict=<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">,HTML 4.01 Frameset=<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd">',b="Western european (iso-8859-1)=iso-8859-1,Central European (iso-8859-2)=iso-8859-2,Unicode (UTF-8)=utf-8,Chinese traditional (Big5)=big5,Cyrillic (iso-8859-5)=iso-8859-5,Japanese (iso-2022-jp)=iso-2022-jp,Greek (iso-8859-7)=iso-8859-7,Korean (iso-2022-kr)=iso-2022-kr,ASCII (us-ascii)=us-ascii",c="Arial=arial,helvetica,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,times new roman,times,serif;Tahoma=tahoma,arial,helvetica,sans-serif;Times New Roman=times new roman,times,serif;Verdana=verdana,arial,helvetica,sans-serif;Impact=impact;WingDings=wingdings",d="10px,11px,12px,13px,14px,15px,16px";window.FullPageDialog={changedStyle:function(){var a,b=tinyMCEPopup.editor.dom.parseStyle(f("style"));e("fontface",b["font-face"]),e("fontsize",b["font-size"]),e("textcolor",b.color),(a=b["background-image"])?e("bgimage",a.replace(new RegExp("url\\('?([^']*)'?\\)","gi"),"$1")):e("bgimage",""),e("bgcolor",b["background-color"]),e("topmargin",""),e("rightmargin",""),e("bottommargin",""),e("leftmargin","");if(a=b.margin)a=a.split(" "),b["margin-top"]=a[0]||"",b["margin-right"]=a[1]||a[0]||"",b["margin-bottom"]=a[2]||a[0]||"",b["margin-left"]=a[3]||a[0]||"";(a=b["margin-top"])&&e("topmargin",a.replace(/px/,"")),(a=b["margin-right"])&&e("rightmargin",a.replace(/px/,"")),(a=b["margin-bottom"])&&e("bottommargin",a.replace(/px/,"")),(a=b["margin-left"])&&e("leftmargin",a.replace(/px/,"")),updateColor("bgcolor_pick","bgcolor"),updateColor("textcolor_pick","textcolor")},changedStyleProp:function(){var a,b=tinyMCEPopup.editor.dom,c=b.parseStyle(f("style"));c["font-face"]=f("fontface"),c["font-size"]=f("fontsize"),c.color=f("textcolor"),c["background-color"]=f("bgcolor"),(a=f("bgimage"))?c["background-image"]="url('"+a+"')":c["background-image"]="",delete c.margin,(a=f("topmargin"))?c["margin-top"]=a+"px":c["margin-top"]="",(a=f("rightmargin"))?c["margin-right"]=a+"px":c["margin-right"]="",(a=f("bottommargin"))?c["margin-bottom"]=a+"px":c["margin-bottom"]="",(a=f("leftmargin"))?c["margin-left"]=a+"px":c["margin-left"]="",e("style",b.serializeStyle(b.parseStyle(b.serializeStyle(c)))),this.changedStyle()},update:function(){var a={};tinymce.each(tinyMCEPopup.dom.select("select,input,textarea"),function(b){a[b.id]=f(b.id)}),tinyMCEPopup.editor.plugins.fullpage._dataToHtml(a),tinyMCEPopup.close()}},tinyMCEPopup.onInit.add(g)}(),tinyMCE.addI18n("en.fullpage_dlg",{title:"Document Properties",meta_tab:"General",appearance_tab:"Appearance",advanced_tab:"Advanced",meta_props:"Meta Information",langprops:"Language and Encoding",meta_title:"Title",meta_keywords:"Keywords",meta_description:"Description",meta_robots:"Robots",doctypes:"Doctype",langcode:"Language Code",langdir:"Language Direction",ltr:"Left to Right",rtl:"Right to Left",xml_pi:"XML Declaration",encoding:"Character Encoding",appearance_bgprops:"Background Properties",appearance_marginprops:"Body Margins",appearance_linkprops:"Link Colors",appearance_textprops:"Text Properties",bgcolor:"Background Color",bgimage:"Background Image",left_margin:"Left Margin",right_margin:"Right Margin",top_margin:"Top Margin",bottom_margin:"Bottom Margin",text_color:"Text Color",font_size:"Font Size",font_face:"Font Face",link_color:"Link Color",hover_color:"Hover Color",visited_color:"Visited Color",active_color:"Active Color",textcolor:"Color",fontsize:"Font Size",fontface:"Font Family",meta_index_follow:"Index and Follow the Links",meta_index_nofollow:"Index and Don't Follow the Links",meta_noindex_follow:"Do Not Index but Follow the Links",meta_noindex_nofollow:"Do Not Index and Don't Follow the Links",appearance_style:"Stylesheet and Style Properties",stylesheet:"Stylesheet",style:"Style",author:"Author",copyright:"Copyright",add:"Add New Element",remove:"Remove Selected Element",moveup:"Move Selected Element Up",movedown:"Move Selected Element Down",head_elements:"Head Elements",info:"Information",add_title:"Title Element",add_meta:"Meta Element",add_script:"Script Element",add_style:"Style Element",add_link:"Link Element",add_base:"Base Element",add_comment:"Comment Node",title_element:"Title Element",script_element:"Script Element",style_element:"Style Element",base_element:"Base Element",link_element:"Link Element",meta_element:"Meta Element",comment_element:"Comment",src:"Source",language:"Language",href:"HREF",target:"Target",type:"Type",charset:"Charset",defer:"Defer",media:"Media",properties:"Properties",name:"Name",value:"Value",content:"Content",rel:"Rel",rev:"Rev",hreflang:"HREF Lang",general_props:"General",advanced_props:"Advanced"}),function(){var a=tinymce.DOM;tinymce.create("tinymce.plugins.FullScreenPlugin",{init:function(b,c){var d=this,e={},f,g;d.editor=b,b.addCommand("mceFullScreen",function(){var h,i=a.doc.documentElement;if(b.getParam("fullscreen_is_enabled")){b.getParam("fullscreen_new_window")?closeFullscreen():a.win.setTimeout(function(){tinymce.dom.Event.remove(a.win,"resize",d.resizeFunc),tinyMCE.get(b.getParam("fullscreen_editor_id")).setContent(b.getContent()),tinyMCE.remove(b),a.remove("mce_fullscreen_container"),i.style.overflow=b.getParam("fullscreen_html_overflow"),a.setStyle(a.doc.body,"overflow",b.getParam("fullscreen_overflow")),a.win.scrollTo(b.getParam("fullscreen_scrollx"),b.getParam("fullscreen_scrolly")),tinyMCE.settings=tinyMCE.oldSettings},10);return}if(b.getParam("fullscreen_new_window")){h=a.win.open(c+"/fullscreen.htm","mceFullScreenPopup","fullscreen=yes,menubar=no,toolbar=no,scrollbars=no,resizable=yes,left=0,top=0,width="+screen.availWidth+",height="+screen.availHeight);try{h.resizeTo(screen.availWidth,screen.availHeight)}catch(j){}}else tinyMCE.oldSettings=tinyMCE.settings,e.fullscreen_overflow=a.getStyle(a.doc.body,"overflow",1)||"auto",e.fullscreen_html_overflow=a.getStyle(i,"overflow",1),f=a.getViewPort(),e.fullscreen_scrollx=f.x,e.fullscreen_scrolly=f.y,tinymce.isOpera&&e.fullscreen_overflow=="visible"&&(e.fullscreen_overflow="auto"),tinymce.isIE&&e.fullscreen_overflow=="scroll"&&(e.fullscreen_overflow="auto"),tinymce.isIE&&(e.fullscreen_html_overflow=="visible"||e.fullscreen_html_overflow=="scroll")&&(e.fullscreen_html_overflow="auto"),e.fullscreen_overflow=="0px"&&(e.fullscreen_overflow=""),a.setStyle(a.doc.body,"overflow","hidden"),i.style.overflow="hidden",f=a.getViewPort(),a.win.scrollTo(0,0),tinymce.isIE&&(f.h-=1),tinymce.isIE6?g="absolute;top:"+f.y:g="fixed;top:0",n=a.add(a.doc.body,"div",{id:"mce_fullscreen_container",style:"position:"+g+";left:0;width:"+f.w+"px;height:"+f.h+"px;z-index:200000;"}),a.add(n,"div",{id:"mce_fullscreen"}),tinymce.each(b.settings,function(a,b){e[b]=a}),e.id="mce_fullscreen",e.width=n.clientWidth,e.height=n.clientHeight-15,e.fullscreen_is_enabled=!0,e.fullscreen_editor_id=b.id,e.theme_advanced_resizing=!1,e.save_onsavecallback=function(){b.setContent(tinyMCE.get(e.id).getContent()),b.execCommand("mceSave")},tinymce.each(b.getParam("fullscreen_settings"),function(a,b){e[b]=a}),e.theme_advanced_toolbar_location==="external"&&(e.theme_advanced_toolbar_location="top"),d.fullscreenEditor=new tinymce.Editor("mce_fullscreen",e),d.fullscreenEditor.onInit.add(function(){d.fullscreenEditor.setContent(b.getContent()),d.fullscreenEditor.focus()}),d.fullscreenEditor.render(),d.fullscreenElement=new tinymce.dom.Element("mce_fullscreen_container"),d.fullscreenElement.update(),d.resizeFunc=tinymce.dom.Event.add(a.win,"resize",function(){var a=tinymce.DOM.getViewPort(),b=d.fullscreenEditor,c,e;c=b.dom.getSize(b.getContainer().firstChild),e=b.dom.getSize(b.getContainer().getElementsByTagName("iframe")[0]),b.theme.resizeTo(a.w-c.w+e.w,a.h-c.h+e.h)})}),b.addButton("fullscreen",{title:"fullscreen.desc",cmd:"mceFullScreen"}),b.onNodeChange.add(function(a,b){b.setActive("fullscreen",a.getParam("fullscreen_is_enabled"))})},getInfo:function(){return{longname:"Fullscreen",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/fullscreen",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("fullscreen",tinymce.plugins.FullScreenPlugin)}(),function(){var a=tinymce.DOM;tinymce.create("tinymce.plugins.FullScreenPlugin",{init:function(b,c){var d=this,e={},f,g;d.editor=b,b.addCommand("mceFullScreen",function(){var h,i=a.doc.documentElement;if(b.getParam("fullscreen_is_enabled")){b.getParam("fullscreen_new_window")?closeFullscreen():a.win.setTimeout(function(){tinymce.dom.Event.remove(a.win,"resize",d.resizeFunc),tinyMCE.get(b.getParam("fullscreen_editor_id")).setContent(b.getContent()),tinyMCE.remove(b),a.remove("mce_fullscreen_container"),i.style.overflow=b.getParam("fullscreen_html_overflow"),a.setStyle(a.doc.body,"overflow",b.getParam("fullscreen_overflow")),a.win.scrollTo(b.getParam("fullscreen_scrollx"),b.getParam("fullscreen_scrolly")),tinyMCE.settings=tinyMCE.oldSettings},10);return}if(b.getParam("fullscreen_new_window")){h=a.win.open(c+"/fullscreen.htm","mceFullScreenPopup","fullscreen=yes,menubar=no,toolbar=no,scrollbars=no,resizable=yes,left=0,top=0,width="+screen.availWidth+",height="+screen.availHeight);try{h.resizeTo(screen.availWidth,screen.availHeight)}catch(j){}}else tinyMCE.oldSettings=tinyMCE.settings,e.fullscreen_overflow=a.getStyle(a.doc.body,"overflow",1)||"auto",e.fullscreen_html_overflow=a.getStyle(i,"overflow",1),f=a.getViewPort(),e.fullscreen_scrollx=f.x,e.fullscreen_scrolly=f.y,tinymce.isOpera&&e.fullscreen_overflow=="visible"&&(e.fullscreen_overflow="auto"),tinymce.isIE&&e.fullscreen_overflow=="scroll"&&(e.fullscreen_overflow="auto"),tinymce.isIE&&(e.fullscreen_html_overflow=="visible"||e.fullscreen_html_overflow=="scroll")&&(e.fullscreen_html_overflow="auto"),e.fullscreen_overflow=="0px"&&(e.fullscreen_overflow=""),a.setStyle(a.doc.body,"overflow","hidden"),i.style.overflow="hidden",f=a.getViewPort(),a.win.scrollTo(0,0),tinymce.isIE&&(f.h-=1),tinymce.isIE6?g="absolute;top:"+f.y:g="fixed;top:0",n=a.add(a.doc.body,"div",{id:"mce_fullscreen_container",style:"position:"+g+";left:0;width:"+f.w+"px;height:"+f.h+"px;z-index:200000;"}),a.add(n,"div",{id:"mce_fullscreen"}),tinymce.each(b.settings,function(a,b){e[b]=a}),e.id="mce_fullscreen",e.width=n.clientWidth,e.height=n.clientHeight-15,e.fullscreen_is_enabled=!0,e.fullscreen_editor_id=b.id,e.theme_advanced_resizing=!1,e.save_onsavecallback=function(){b.setContent(tinyMCE.get(e.id).getContent()),b.execCommand("mceSave")},tinymce.each(b.getParam("fullscreen_settings"),function(a,b){e[b]=a}),e.theme_advanced_toolbar_location==="external"&&(e.theme_advanced_toolbar_location="top"),d.fullscreenEditor=new tinymce.Editor("mce_fullscreen",e),d.fullscreenEditor.onInit.add(function(){d.fullscreenEditor.setContent(b.getContent()),d.fullscreenEditor.focus()}),d.fullscreenEditor.render(),d.fullscreenElement=new tinymce.dom.Element("mce_fullscreen_container"),d.fullscreenElement.update(),d.resizeFunc=tinymce.dom.Event.add(a.win,"resize",function(){var a=tinymce.DOM.getViewPort(),b=d.fullscreenEditor,c,e;c=b.dom.getSize(b.getContainer().firstChild),e=b.dom.getSize(b.getContainer().getElementsByTagName("iframe")[0]),b.theme.resizeTo(a.w-c.w+e.w,a.h-c.h+e.h)})}),b.addButton("fullscreen",{title:"fullscreen.desc",cmd:"mceFullScreen"}),b.onNodeChange.add(function(a,b){b.setActive("fullscreen",a.getParam("fullscreen_is_enabled"))})},getInfo:function(){return{longname:"Fullscreen",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/fullscreen",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("fullscreen",tinymce.plugins.FullScreenPlugin)}(),function(){tinymce.create("tinymce.plugins.IESpell",{init:function(a,b){var c=this,d;if(!tinymce.isIE)return;c.editor=a,a.addCommand("mceIESpell",function(){try{d=new ActiveXObject("ieSpell.ieSpellExtension"),d.CheckDocumentNode(a.getDoc().documentElement)}catch(b){b.number==-2146827859?a.windowManager.confirm(a.getLang("iespell.download"),function(a){a&&window.open("http://www.iespell.com/download.php","ieSpellDownload","")}):a.windowManager.alert("Error Loading ieSpell: Exception "+b.number)}}),a.addButton("iespell",{title:"iespell.iespell_desc",cmd:"mceIESpell"})},getInfo:function(){return{longname:"IESpell (IE Only)",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/iespell",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("iespell",tinymce.plugins.IESpell)}(),function(){tinymce.create("tinymce.plugins.IESpell",{init:function(a,b){var c=this,d;if(!tinymce.isIE)return;c.editor=a,a.addCommand("mceIESpell",function(){try{d=new ActiveXObject("ieSpell.ieSpellExtension"),d.CheckDocumentNode(a.getDoc().documentElement)}catch(b){b.number==-2146827859?a.windowManager.confirm(a.getLang("iespell.download"),function(a){a&&window.open("http://www.iespell.com/download.php","ieSpellDownload","")}):a.windowManager.alert("Error Loading ieSpell: Exception "+b.number)}}),a.addButton("iespell",{title:"iespell.iespell_desc",cmd:"mceIESpell"})},getInfo:function(){return{longname:"IESpell (IE Only)",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/iespell",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("iespell",tinymce.plugins.IESpell)}(),function(){var a=tinymce.DOM,b=tinymce.dom.Element,c=tinymce.dom.Event,d=tinymce.each,e=tinymce.is;tinymce.create("tinymce.plugins.InlinePopups",{init:function(b,c){b.onBeforeRenderUI.add(function(){b.windowManager=new tinymce.InlineWindowManager(b),a.loadCSS(c+"/skins/"+(b.settings.inlinepopups_skin||"clearlooks2")+"/window.css")})},getInfo:function(){return{longname:"InlinePopups",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/inlinepopups",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.create("tinymce.InlineWindowManager:tinymce.WindowManager",{InlineWindowManager:function(a){var b=this;b.parent(a),b.zIndex=3e5,b.count=0,b.windows={}},open:function(d,e){var f=this,g,h="",i=f.editor,j=0,k=0,l,m,n,o,p,q,r,s;return d=d||{},e=e||{},d.inline?(s=f._frontWindow(),s&&a.get(s.id+"_ifr")&&(s.focussedElement=a.get(s.id+"_ifr").contentWindow.document.activeElement),d.type||(f.bookmark=i.selection.getBookmark(1)),g=a.uniqueId(),l=a.getViewPort(),d.width=parseInt(d.width||320),d.height=parseInt(d.height||240)+(tinymce.isIE?8:0),d.min_width=parseInt(d.min_width||150),d.min_height=parseInt(d.min_height||100),d.max_width=parseInt(d.max_width||2e3),d.max_height=parseInt(d.max_height||2e3),d.left=d.left||Math.round(Math.max(l.x,l.x+l.w/2-d.width/2)),d.top=d.top||Math.round(Math.max(l.y,l.y+l.h/2-d.height/2)),d.movable=d.resizable=!0,e.mce_width=d.width,e.mce_height=d.height,e.mce_inline=!0,e.mce_window_id=g,e.mce_auto_focus=d.auto_focus,f.features=d,f.params=e,f.onOpen.dispatch(f,d,e),d.type&&(h+=" mceModal",d.type&&(h+=" mce"+d.type.substring(0,1).toUpperCase()+d.type.substring(1)),d.resizable=!1),d.statusbar&&(h+=" mceStatusbar"),d.resizable&&(h+=" mceResizable"),d.minimizable&&(h+=" mceMinimizable"),d.maximizable&&(h+=" mceMaximizable"),d.movable&&(h+=" mceMovable"),f._addAll(a.doc.body,["div",{id:g,role:"dialog","aria-labelledby":d.type?g+"_content":g+"_title","class":(i.settings.inlinepopups_skin||"clearlooks2")+(tinymce.isIE&&window.getSelection?" ie9":""),style:"width:100px;height:100px"},["div",{id:g+"_wrapper","class":"mceWrapper"+h},["div",{id:g+"_top","class":"mceTop"},["div",{"class":"mceLeft"}],["div",{"class":"mceCenter"}],["div",{"class":"mceRight"}],["span",{id:g+"_title"},d.title||""]],["div",{id:g+"_middle","class":"mceMiddle"},["div",{id:g+"_left","class":"mceLeft",tabindex:"0"}],["span",{id:g+"_content"}],["div",{id:g+"_right","class":"mceRight",tabindex:"0"}]],["div",{id:g+"_bottom","class":"mceBottom"},["div",{"class":"mceLeft"}],["div",{"class":"mceCenter"}],["div",{"class":"mceRight"}],["span",{id:g+"_status"},"Content"]],["a",{"class":"mceMove",tabindex:"-1",href:"javascript:;"}],["a",{"class":"mceMin",tabindex:"-1",href:"javascript:;",onmousedown:"return false;"}],["a",{"class":"mceMax",tabindex:"-1",href:"javascript:;",onmousedown:"return false;"}],["a",{"class":"mceMed",tabindex:"-1",href:"javascript:;",onmousedown:"return false;"}],["a",{"class":"mceClose",tabindex:"-1",href:"javascript:;",onmousedown:"return false;"}],["a",{id:g+"_resize_n","class":"mceResize mceResizeN",tabindex:"-1",href:"javascript:;"}],["a",{id:g+"_resize_s","class":"mceResize mceResizeS",tabindex:"-1",href:"javascript:;"}],["a",{id:g+"_resize_w","class":"mceResize mceResizeW",tabindex:"-1",href:"javascript:;"}],["a",{id:g+"_resize_e","class":"mceResize mceResizeE",tabindex:"-1",href:"javascript:;"}],["a",{id:g+"_resize_nw","class":"mceResize mceResizeNW",tabindex:"-1",href:"javascript:;"}],["a",{id:g+"_resize_ne","class":"mceResize mceResizeNE",tabindex:"-1",href:"javascript:;"}],["a",{id:g+"_resize_sw","class":"mceResize mceResizeSW",tabindex:"-1",href:"javascript:;"}],["a",{id:g+"_resize_se","class":"mceResize mceResizeSE",tabindex:"-1",href:"javascript:;"}]]]),a.setStyles(g,{top:-1e4,left:-1e4}),tinymce.isGecko&&a.setStyle(g,"overflow","auto"),d.type||(j+=a.get(g+"_left").clientWidth,j+=a.get(g+"_right").clientWidth,k+=a.get(g+"_top").clientHeight,k+=a.get(g+"_bottom").clientHeight),a.setStyles(g,{top:d.top,left:d.left,width:d.width+j,height:d.height+k}),r=d.url||d.file,r&&(tinymce.relaxedDomain&&(r+=(r.indexOf("?")==-1?"?":"&")+"mce_rdomain="+tinymce.relaxedDomain),r=tinymce._addVer(r)),d.type?(a.add(g+"_wrapper","a",{id:g+"_ok","class":"mceButton mceOk",href:"javascript:;",onmousedown:"return false;"},"Ok"),d.type=="confirm"&&a.add(g+"_wrapper","a",{"class":"mceButton mceCancel",href:"javascript:;",onmousedown:"return false;"},"Cancel"),a.add(g+"_middle","div",{"class":"mceIcon"}),a.setHTML(g+"_content",d.content.replace("\n","<br />")),c.add(g,"keyup",function(a){var b=27;if(a.keyCode===b)return d.button_func(!1),c.cancel(a)}),c.add(g,"keydown",function(b){var d,e=9;if(b.keyCode===e)return d=a.select("a.mceCancel",g+"_wrapper")[0],d&&d!==b.target?d.focus():a.get(g+"_ok").focus(),c.cancel(b)})):(a.add(g+"_content","iframe",{id:g+"_ifr",src:'javascript:""',frameBorder:0,style:"border:0;width:10px;height:10px"}),a.setStyles(g+"_ifr",{width:d.width,height:d.height}),a.setAttrib(g+"_ifr","src",r)),n=c.add(g,"mousedown",function(b){var d=b.target,e,h;e=f.windows[g],f.focus(g);if(d.nodeName=="A"||d.nodeName=="a"){if(d.className=="mceClose")return f.close(null,g),c.cancel(b);if(d.className=="mceMax")e.oldPos=e.element.getXY(),e.oldSize=e.element.getSize(),h=a.getViewPort(),h.w-=2,h.h-=2,e.element.moveTo(h.x,h.y),e.element.resizeTo(h.w,h.h),a.setStyles(g+"_ifr",{width:h.w-e.deltaWidth,height:h.h-e.deltaHeight}),a.addClass(g+"_wrapper","mceMaximized");else if(d.className=="mceMed")e.element.moveTo(e.oldPos.x,e.oldPos.y),e.element.resizeTo(e.oldSize.w,e.oldSize.h),e.iframeElement.resizeTo(e.oldSize.w-e.deltaWidth,e.oldSize.h-e.deltaHeight),a.removeClass(g+"_wrapper","mceMaximized");else{if(d.className=="mceMove")return f._startDrag(g,b,d.className);if(a.hasClass(d,"mceResize"))return f._startDrag(g,b,d.className.substring(13))}}}),o=c.add(g,"click",function(a){var b=a.target;f.focus(g);if(b.nodeName=="A"||b.nodeName=="a")switch(b.className){case"mceClose":return f.close(null,g),c.cancel(a);case"mceButton mceOk":case"mceButton mceCancel":return d.button_func(b.className=="mceButton mceOk"),c.cancel(a)}}),c.add([g+"_left",g+"_right"],"focus",function(b){var c=a.get(g+"_ifr");if(c){var d=c.contentWindow.document.body,e=a.select(":input:enabled,*[tabindex=0]",d);b.target.id===g+"_left"?e[e.length-1].focus():e[0].focus()}else a.get(g+"_ok").focus()}),q=f.windows[g]={id:g,mousedown_func:n,click_func:o,element:new b(g,{blocker:1,container:i.getContainer()}),iframeElement:new b(g+"_ifr"),features:d,deltaWidth:j,deltaHeight:k},q.iframeElement.on("focus",function(){f.focus(g)}),f.count==0&&f.editor.getParam("dialog_type","modal")=="modal"?(a.add(a.doc.body,"div",{id:"mceModalBlocker","class":(f.editor.settings.inlinepopups_skin||"clearlooks2")+"_modalBlocker",style:{zIndex:f.zIndex-1}}),a.show("mceModalBlocker"),a.setAttrib(a.doc.body,"aria-hidden","true")):a.setStyle("mceModalBlocker","z-index",f.zIndex-1),(tinymce.isIE6||/Firefox\/2\./.test(navigator.userAgent)||tinymce.isIE&&!a.boxModel)&&a.setStyles("mceModalBlocker",{position:"absolute",left:l.x,top:l.y,width:l.w-2,height:l.h-2}),a.setAttrib(g,"aria-hidden","false"),f.focus(g),f._fixIELayout(g,1),a.get(g+"_ok")&&a.get(g+"_ok").focus(),f.count++,q):f.parent(d,e)},focus:function(b){var c=this,d;if(d=c.windows[b])d.zIndex=this.zIndex++,d.element.setStyle("zIndex",d.zIndex),d.element.update(),b+="_wrapper",a.removeClass(c.lastId,"mceFocus"),a.addClass(b,"mceFocus"),c.lastId=b,d.focussedElement?d.focussedElement.focus():a.get(b+"_ok")?a.get(d.id+"_ok").focus():a.get(d.id+"_ifr")&&a.get(d.id+"_ifr").focus()},_addAll:function(a,b){var c,d,f=this,g=tinymce.DOM;if(e(b,"string"))a.appendChild(g.doc.createTextNode(b));else if(b.length){a=a.appendChild(g.create(b[0],b[1]));for(c=2;c<b.length;c++)f._addAll(a,b[c])}},_startDrag:function(d,e,f){function B(){if(k)return;g._fixIELayout(d,0),a.add(j.body,"div",{id:"mceEventBlocker","class":"mceEventBlocker "+(g.editor.settings.inlinepopups_skin||"clearlooks2"),style:{zIndex:g.zIndex+1}}),(tinymce.isIE6||tinymce.isIE&&!a.boxModel)&&a.setStyles("mceEventBlocker",{position:"absolute",left:s.x,top:s.y,width:s.w-2,height:s.h-2}),k=new b("mceEventBlocker"),k.update(),o=m.getXY(),p=m.getSize(),t=r.x+o.x-s.x,u=r.y+o.y-s.y,a.add(k.get(),"div",{id:"mcePlaceHolder","class":"mcePlaceHolder",style:{left:t,top:u,width:p.w,height:p.h}}),q=new b("mcePlaceHolder")}var g=this,h,i,j=a.doc,k,l=g.windows[d],m=l.element,n=m.getXY(),o,p,q,r,s,t,u,v,w,x,y,z,A;return r={x:0,y:0},s=a.getViewPort(),s.w-=2,s.h-=2,v=e.screenX,w=e.screenY,x=y=z=A=0,h=c.add(j,"mouseup",function(b){return c.remove(j,"mouseup",h),c.remove(j,"mousemove",i),k&&k.remove(),m.moveBy(x,y),m.resizeBy(z,A),p=m.getSize(),a.setStyles(d+"_ifr",{width:p.w-l.deltaWidth,height:p.h-l.deltaHeight}),g._fixIELayout(d,1),c.cancel(b)}),f!="Move"&&B(),i=c.add(j,"mousemove",function(a){var b,d,e;B(),b=a.screenX-v,d=a.screenY-w;switch(f){case"ResizeW":x=b,z=0-b;break;case"ResizeE":z=b;break;case"ResizeN":case"ResizeNW":case"ResizeNE":f=="ResizeNW"?(x=b,z=0-b):f=="ResizeNE"&&(z=b),y=d,A=0-d;break;case"ResizeS":case"ResizeSW":case"ResizeSE":f=="ResizeSW"?(x=b,z=0-b):f=="ResizeSE"&&(z=b),A=d;break;case"mceMove":x=b,y=d}return z<(e=l.features.min_width-p.w)&&(x!==0&&(x+=z-e),z=e),A<(e=l.features.min_height-p.h)&&(y!==0&&(y+=A-e),A=e),z=Math.min(z,l.features.max_width-p.w),A=Math.min(A,l.features.max_height-p.h),x=Math.max(x,s.x-(t+s.x)),y=Math.max(y,s.y-(u+s.y)),x=Math.min(x,s.w+s.x-(t+p.w+s.x)),y=Math.min(y,s.h+s.y-(u+p.h+s.y)),x+y!==0&&(t+x<0&&(x=0),u+y<0&&(y=0),q.moveTo(t+x,u+y)),z+A!==0&&q.resizeTo(p.w+z,p.h+A),c.cancel(a)}),c.cancel(e)},resizeBy:function(a,b,c){var d=this.windows[c];d&&(d.element.resizeBy(a,b),d.iframeElement.resizeBy(a,b))},close:function(b,d){var e=this,f,g=a.doc,h,d;d=e._findId(d||b);if(!e.windows[d]){e.parent(b);return}e.count--,e.count==0&&(a.remove("mceModalBlocker"),a.setAttrib(a.doc.body,"aria-hidden","false"),e.editor.focus());if(f=e.windows[d])e.onClose.dispatch(e),c.remove(g,"mousedown",f.mousedownFunc),c.remove(g,"click",f.clickFunc),c.clear(d),c.clear(d+"_ifr"),a.setAttrib(d+"_ifr","src",'javascript:""'),f.element.remove(),delete e.windows[d],h=e._frontWindow(),h&&e.focus(h.id)},_frontWindow:function(){var a,b=0;return d(this.windows,function(c){c.zIndex>b&&(a=c,b=c.zIndex)}),a},setTitle:function(b,c){var d;b=this._findId(b);if(d=a.get(b+"_title"))d.innerHTML=a.encode(c)},alert:function(b,c,d){var e=this,f;f=e.open({title:e,type:"alert",button_func:function(a){c&&c.call(a||e,a),e.close(null,f.id)},content:a.encode(e.editor.getLang(b,b)),inline:1,width:400,height:130})},confirm:function(b,c,d){var e=this,f;f=e.open({title:e,type:"confirm",button_func:function(a){c&&c.call(a||e,a),e.close(null,f.id)},content:a.encode(e.editor.getLang(b,b)),inline:1,width:400,height:130})},_findId:function(b){var c=this;return typeof b=="string"?b:(d(c.windows,function(c){var d=a.get(c.id+"_ifr");if(d&&b==d.contentWindow)return b=c.id,!1}),b)},_fixIELayout:function(b,c){var e,f;if(!tinymce.isIE6)return;d(["n","s","w","e","nw","ne","sw","se"],function(d){var e=a.get(b+"_resize_"+d);a.setStyles(e,{width:c?e.clientWidth:"",height:c?e.clientHeight:"",cursor:a.getStyle(e,"cursor",1)}),a.setStyle(b+"_bottom","bottom","-1px"),e=0});if(e=this.windows[b])e.element.hide(),e.element.show(),d(a.select("div,a",b),function(a,b){a.currentStyle.backgroundImage!="none"&&(f=new Image,f.src=a.currentStyle.backgroundImage.replace(/url\(\"(.+)\"\)/,"$1"))}),a.get(b).style.filter=""}}),tinymce.PluginManager.add("inlinepopups",tinymce.plugins.InlinePopups)}(),function(){var a=tinymce.DOM,b=tinymce.dom.Element,c=tinymce.dom.Event,d=tinymce.each,e=tinymce.is;tinymce.create("tinymce.plugins.InlinePopups",{init:function(b,c){b.onBeforeRenderUI.add(function(){b.windowManager=new tinymce.InlineWindowManager(b),a.loadCSS(c+"/skins/"+(b.settings.inlinepopups_skin||"clearlooks2")+"/window.css")})},getInfo:function(){return{longname:"InlinePopups",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/inlinepopups",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.create("tinymce.InlineWindowManager:tinymce.WindowManager",{InlineWindowManager:function(a){var b=this;b.parent(a),b.zIndex=3e5,b.count=0,b.windows={}},open:function(d,e){var f=this,g,h="",i=f.editor,j=0,k=0,l,m,n,o,p,q,r,s;return d=d||{},e=e||{},d.inline?(s=f._frontWindow(),s&&a.get(s.id+"_ifr")&&(s.focussedElement=a.get(s.id+"_ifr").contentWindow.document.activeElement),d.type||(f.bookmark=i.selection.getBookmark(1)),g=a.uniqueId(),l=a.getViewPort(),d.width=parseInt(d.width||320),d.height=parseInt(d.height||240)+(tinymce.isIE?8:0),d.min_width=parseInt(d.min_width||150),d.min_height=parseInt(d.min_height||100),d.max_width=parseInt(d.max_width||2e3),d.max_height=parseInt(d.max_height||2e3),d.left=d.left||Math.round(Math.max(l.x,l.x+l.w/2-d.width/2)),d.top=d.top||Math.round(Math.max(l.y,l.y+l.h/2-d.height/2)),d.movable=d.resizable=!0,e.mce_width=d.width,e.mce_height=d.height,e.mce_inline=!0,e.mce_window_id=g,e.mce_auto_focus=d.auto_focus,f.features=d,f.params=e,f.onOpen.dispatch(f,d,e),d.type&&(h+=" mceModal",d.type&&(h+=" mce"+d.type.substring(0,1).toUpperCase()+d.type.substring(1)),d.resizable=!1),d.statusbar&&(h+=" mceStatusbar"),d.resizable&&(h+=" mceResizable"),d.minimizable&&(h+=" mceMinimizable"),d.maximizable&&(h+=" mceMaximizable"),d.movable&&(h+=" mceMovable"),f._addAll(a.doc.body,["div",{id:g,role:"dialog","aria-labelledby":d.type?g+"_content":g+"_title","class":(i.settings.inlinepopups_skin||"clearlooks2")+(tinymce.isIE&&window.getSelection?" ie9":""),style:"width:100px;height:100px"},["div",{id:g+"_wrapper","class":"mceWrapper"+h},["div",{id:g+"_top","class":"mceTop"},["div",{"class":"mceLeft"}],["div",{"class":"mceCenter"}],["div",{"class":"mceRight"}],["span",{id:g+"_title"},d.title||""]],["div",{id:g+"_middle","class":"mceMiddle"
},["div",{id:g+"_left","class":"mceLeft",tabindex:"0"}],["span",{id:g+"_content"}],["div",{id:g+"_right","class":"mceRight",tabindex:"0"}]],["div",{id:g+"_bottom","class":"mceBottom"},["div",{"class":"mceLeft"}],["div",{"class":"mceCenter"}],["div",{"class":"mceRight"}],["span",{id:g+"_status"},"Content"]],["a",{"class":"mceMove",tabindex:"-1",href:"javascript:;"}],["a",{"class":"mceMin",tabindex:"-1",href:"javascript:;",onmousedown:"return false;"}],["a",{"class":"mceMax",tabindex:"-1",href:"javascript:;",onmousedown:"return false;"}],["a",{"class":"mceMed",tabindex:"-1",href:"javascript:;",onmousedown:"return false;"}],["a",{"class":"mceClose",tabindex:"-1",href:"javascript:;",onmousedown:"return false;"}],["a",{id:g+"_resize_n","class":"mceResize mceResizeN",tabindex:"-1",href:"javascript:;"}],["a",{id:g+"_resize_s","class":"mceResize mceResizeS",tabindex:"-1",href:"javascript:;"}],["a",{id:g+"_resize_w","class":"mceResize mceResizeW",tabindex:"-1",href:"javascript:;"}],["a",{id:g+"_resize_e","class":"mceResize mceResizeE",tabindex:"-1",href:"javascript:;"}],["a",{id:g+"_resize_nw","class":"mceResize mceResizeNW",tabindex:"-1",href:"javascript:;"}],["a",{id:g+"_resize_ne","class":"mceResize mceResizeNE",tabindex:"-1",href:"javascript:;"}],["a",{id:g+"_resize_sw","class":"mceResize mceResizeSW",tabindex:"-1",href:"javascript:;"}],["a",{id:g+"_resize_se","class":"mceResize mceResizeSE",tabindex:"-1",href:"javascript:;"}]]]),a.setStyles(g,{top:-1e4,left:-1e4}),tinymce.isGecko&&a.setStyle(g,"overflow","auto"),d.type||(j+=a.get(g+"_left").clientWidth,j+=a.get(g+"_right").clientWidth,k+=a.get(g+"_top").clientHeight,k+=a.get(g+"_bottom").clientHeight),a.setStyles(g,{top:d.top,left:d.left,width:d.width+j,height:d.height+k}),r=d.url||d.file,r&&(tinymce.relaxedDomain&&(r+=(r.indexOf("?")==-1?"?":"&")+"mce_rdomain="+tinymce.relaxedDomain),r=tinymce._addVer(r)),d.type?(a.add(g+"_wrapper","a",{id:g+"_ok","class":"mceButton mceOk",href:"javascript:;",onmousedown:"return false;"},"Ok"),d.type=="confirm"&&a.add(g+"_wrapper","a",{"class":"mceButton mceCancel",href:"javascript:;",onmousedown:"return false;"},"Cancel"),a.add(g+"_middle","div",{"class":"mceIcon"}),a.setHTML(g+"_content",d.content.replace("\n","<br />")),c.add(g,"keyup",function(a){var b=27;if(a.keyCode===b)return d.button_func(!1),c.cancel(a)}),c.add(g,"keydown",function(b){var d,e=9;if(b.keyCode===e)return d=a.select("a.mceCancel",g+"_wrapper")[0],d&&d!==b.target?d.focus():a.get(g+"_ok").focus(),c.cancel(b)})):(a.add(g+"_content","iframe",{id:g+"_ifr",src:'javascript:""',frameBorder:0,style:"border:0;width:10px;height:10px"}),a.setStyles(g+"_ifr",{width:d.width,height:d.height}),a.setAttrib(g+"_ifr","src",r)),n=c.add(g,"mousedown",function(b){var d=b.target,e,h;e=f.windows[g],f.focus(g);if(d.nodeName=="A"||d.nodeName=="a"){if(d.className=="mceClose")return f.close(null,g),c.cancel(b);if(d.className=="mceMax")e.oldPos=e.element.getXY(),e.oldSize=e.element.getSize(),h=a.getViewPort(),h.w-=2,h.h-=2,e.element.moveTo(h.x,h.y),e.element.resizeTo(h.w,h.h),a.setStyles(g+"_ifr",{width:h.w-e.deltaWidth,height:h.h-e.deltaHeight}),a.addClass(g+"_wrapper","mceMaximized");else if(d.className=="mceMed")e.element.moveTo(e.oldPos.x,e.oldPos.y),e.element.resizeTo(e.oldSize.w,e.oldSize.h),e.iframeElement.resizeTo(e.oldSize.w-e.deltaWidth,e.oldSize.h-e.deltaHeight),a.removeClass(g+"_wrapper","mceMaximized");else{if(d.className=="mceMove")return f._startDrag(g,b,d.className);if(a.hasClass(d,"mceResize"))return f._startDrag(g,b,d.className.substring(13))}}}),o=c.add(g,"click",function(a){var b=a.target;f.focus(g);if(b.nodeName=="A"||b.nodeName=="a")switch(b.className){case"mceClose":return f.close(null,g),c.cancel(a);case"mceButton mceOk":case"mceButton mceCancel":return d.button_func(b.className=="mceButton mceOk"),c.cancel(a)}}),c.add([g+"_left",g+"_right"],"focus",function(b){var c=a.get(g+"_ifr");if(c){var d=c.contentWindow.document.body,e=a.select(":input:enabled,*[tabindex=0]",d);b.target.id===g+"_left"?e[e.length-1].focus():e[0].focus()}else a.get(g+"_ok").focus()}),q=f.windows[g]={id:g,mousedown_func:n,click_func:o,element:new b(g,{blocker:1,container:i.getContainer()}),iframeElement:new b(g+"_ifr"),features:d,deltaWidth:j,deltaHeight:k},q.iframeElement.on("focus",function(){f.focus(g)}),f.count==0&&f.editor.getParam("dialog_type","modal")=="modal"?(a.add(a.doc.body,"div",{id:"mceModalBlocker","class":(f.editor.settings.inlinepopups_skin||"clearlooks2")+"_modalBlocker",style:{zIndex:f.zIndex-1}}),a.show("mceModalBlocker"),a.setAttrib(a.doc.body,"aria-hidden","true")):a.setStyle("mceModalBlocker","z-index",f.zIndex-1),(tinymce.isIE6||/Firefox\/2\./.test(navigator.userAgent)||tinymce.isIE&&!a.boxModel)&&a.setStyles("mceModalBlocker",{position:"absolute",left:l.x,top:l.y,width:l.w-2,height:l.h-2}),a.setAttrib(g,"aria-hidden","false"),f.focus(g),f._fixIELayout(g,1),a.get(g+"_ok")&&a.get(g+"_ok").focus(),f.count++,q):f.parent(d,e)},focus:function(b){var c=this,d;if(d=c.windows[b])d.zIndex=this.zIndex++,d.element.setStyle("zIndex",d.zIndex),d.element.update(),b+="_wrapper",a.removeClass(c.lastId,"mceFocus"),a.addClass(b,"mceFocus"),c.lastId=b,d.focussedElement?d.focussedElement.focus():a.get(b+"_ok")?a.get(d.id+"_ok").focus():a.get(d.id+"_ifr")&&a.get(d.id+"_ifr").focus()},_addAll:function(a,b){var c,d,f=this,g=tinymce.DOM;if(e(b,"string"))a.appendChild(g.doc.createTextNode(b));else if(b.length){a=a.appendChild(g.create(b[0],b[1]));for(c=2;c<b.length;c++)f._addAll(a,b[c])}},_startDrag:function(d,e,f){function B(){if(k)return;g._fixIELayout(d,0),a.add(j.body,"div",{id:"mceEventBlocker","class":"mceEventBlocker "+(g.editor.settings.inlinepopups_skin||"clearlooks2"),style:{zIndex:g.zIndex+1}}),(tinymce.isIE6||tinymce.isIE&&!a.boxModel)&&a.setStyles("mceEventBlocker",{position:"absolute",left:s.x,top:s.y,width:s.w-2,height:s.h-2}),k=new b("mceEventBlocker"),k.update(),o=m.getXY(),p=m.getSize(),t=r.x+o.x-s.x,u=r.y+o.y-s.y,a.add(k.get(),"div",{id:"mcePlaceHolder","class":"mcePlaceHolder",style:{left:t,top:u,width:p.w,height:p.h}}),q=new b("mcePlaceHolder")}var g=this,h,i,j=a.doc,k,l=g.windows[d],m=l.element,n=m.getXY(),o,p,q,r,s,t,u,v,w,x,y,z,A;return r={x:0,y:0},s=a.getViewPort(),s.w-=2,s.h-=2,v=e.screenX,w=e.screenY,x=y=z=A=0,h=c.add(j,"mouseup",function(b){return c.remove(j,"mouseup",h),c.remove(j,"mousemove",i),k&&k.remove(),m.moveBy(x,y),m.resizeBy(z,A),p=m.getSize(),a.setStyles(d+"_ifr",{width:p.w-l.deltaWidth,height:p.h-l.deltaHeight}),g._fixIELayout(d,1),c.cancel(b)}),f!="Move"&&B(),i=c.add(j,"mousemove",function(a){var b,d,e;B(),b=a.screenX-v,d=a.screenY-w;switch(f){case"ResizeW":x=b,z=0-b;break;case"ResizeE":z=b;break;case"ResizeN":case"ResizeNW":case"ResizeNE":f=="ResizeNW"?(x=b,z=0-b):f=="ResizeNE"&&(z=b),y=d,A=0-d;break;case"ResizeS":case"ResizeSW":case"ResizeSE":f=="ResizeSW"?(x=b,z=0-b):f=="ResizeSE"&&(z=b),A=d;break;case"mceMove":x=b,y=d}return z<(e=l.features.min_width-p.w)&&(x!==0&&(x+=z-e),z=e),A<(e=l.features.min_height-p.h)&&(y!==0&&(y+=A-e),A=e),z=Math.min(z,l.features.max_width-p.w),A=Math.min(A,l.features.max_height-p.h),x=Math.max(x,s.x-(t+s.x)),y=Math.max(y,s.y-(u+s.y)),x=Math.min(x,s.w+s.x-(t+p.w+s.x)),y=Math.min(y,s.h+s.y-(u+p.h+s.y)),x+y!==0&&(t+x<0&&(x=0),u+y<0&&(y=0),q.moveTo(t+x,u+y)),z+A!==0&&q.resizeTo(p.w+z,p.h+A),c.cancel(a)}),c.cancel(e)},resizeBy:function(a,b,c){var d=this.windows[c];d&&(d.element.resizeBy(a,b),d.iframeElement.resizeBy(a,b))},close:function(b,d){var e=this,f,g=a.doc,h,d;d=e._findId(d||b);if(!e.windows[d]){e.parent(b);return}e.count--,e.count==0&&(a.remove("mceModalBlocker"),a.setAttrib(a.doc.body,"aria-hidden","false"),e.editor.focus());if(f=e.windows[d])e.onClose.dispatch(e),c.remove(g,"mousedown",f.mousedownFunc),c.remove(g,"click",f.clickFunc),c.clear(d),c.clear(d+"_ifr"),a.setAttrib(d+"_ifr","src",'javascript:""'),f.element.remove(),delete e.windows[d],h=e._frontWindow(),h&&e.focus(h.id)},_frontWindow:function(){var a,b=0;return d(this.windows,function(c){c.zIndex>b&&(a=c,b=c.zIndex)}),a},setTitle:function(b,c){var d;b=this._findId(b);if(d=a.get(b+"_title"))d.innerHTML=a.encode(c)},alert:function(b,c,d){var e=this,f;f=e.open({title:e,type:"alert",button_func:function(a){c&&c.call(a||e,a),e.close(null,f.id)},content:a.encode(e.editor.getLang(b,b)),inline:1,width:400,height:130})},confirm:function(b,c,d){var e=this,f;f=e.open({title:e,type:"confirm",button_func:function(a){c&&c.call(a||e,a),e.close(null,f.id)},content:a.encode(e.editor.getLang(b,b)),inline:1,width:400,height:130})},_findId:function(b){var c=this;return typeof b=="string"?b:(d(c.windows,function(c){var d=a.get(c.id+"_ifr");if(d&&b==d.contentWindow)return b=c.id,!1}),b)},_fixIELayout:function(b,c){var e,f;if(!tinymce.isIE6)return;d(["n","s","w","e","nw","ne","sw","se"],function(d){var e=a.get(b+"_resize_"+d);a.setStyles(e,{width:c?e.clientWidth:"",height:c?e.clientHeight:"",cursor:a.getStyle(e,"cursor",1)}),a.setStyle(b+"_bottom","bottom","-1px"),e=0});if(e=this.windows[b])e.element.hide(),e.element.show(),d(a.select("div,a",b),function(a,b){a.currentStyle.backgroundImage!="none"&&(f=new Image,f.src=a.currentStyle.backgroundImage.replace(/url\(\"(.+)\"\)/,"$1"))}),a.get(b).style.filter=""}}),tinymce.PluginManager.add("inlinepopups",tinymce.plugins.InlinePopups)}(),function(){tinymce.create("tinymce.plugins.InsertDateTime",{init:function(a,b){var c=this;c.editor=a,a.addCommand("mceInsertDate",function(){var b=c._getDateTime(new Date,a.getParam("plugin_insertdate_dateFormat",a.getLang("insertdatetime.date_fmt")));a.execCommand("mceInsertContent",!1,b)}),a.addCommand("mceInsertTime",function(){var b=c._getDateTime(new Date,a.getParam("plugin_insertdate_timeFormat",a.getLang("insertdatetime.time_fmt")));a.execCommand("mceInsertContent",!1,b)}),a.addButton("insertdate",{title:"insertdatetime.insertdate_desc",cmd:"mceInsertDate"}),a.addButton("inserttime",{title:"insertdatetime.inserttime_desc",cmd:"mceInsertTime"})},getInfo:function(){return{longname:"Insert date/time",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/insertdatetime",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_getDateTime:function(a,b){function d(a,b){a=""+a;if(a.length<b)for(var c=0;c<b-a.length;c++)a="0"+a;return a}var c=this.editor;return b=b.replace("%D","%m/%d/%y"),b=b.replace("%r","%I:%M:%S %p"),b=b.replace("%Y",""+a.getFullYear()),b=b.replace("%y",""+a.getYear()),b=b.replace("%m",d(a.getMonth()+1,2)),b=b.replace("%d",d(a.getDate(),2)),b=b.replace("%H",""+d(a.getHours(),2)),b=b.replace("%M",""+d(a.getMinutes(),2)),b=b.replace("%S",""+d(a.getSeconds(),2)),b=b.replace("%I",""+((a.getHours()+11)%12+1)),b=b.replace("%p",""+(a.getHours()<12?"AM":"PM")),b=b.replace("%B",""+c.getLang("insertdatetime.months_long").split(",")[a.getMonth()]),b=b.replace("%b",""+c.getLang("insertdatetime.months_short").split(",")[a.getMonth()]),b=b.replace("%A",""+c.getLang("insertdatetime.day_long").split(",")[a.getDay()]),b=b.replace("%a",""+c.getLang("insertdatetime.day_short").split(",")[a.getDay()]),b=b.replace("%%","%"),b}}),tinymce.PluginManager.add("insertdatetime",tinymce.plugins.InsertDateTime)}(),function(){tinymce.create("tinymce.plugins.InsertDateTime",{init:function(a,b){var c=this;c.editor=a,a.addCommand("mceInsertDate",function(){var b=c._getDateTime(new Date,a.getParam("plugin_insertdate_dateFormat",a.getLang("insertdatetime.date_fmt")));a.execCommand("mceInsertContent",!1,b)}),a.addCommand("mceInsertTime",function(){var b=c._getDateTime(new Date,a.getParam("plugin_insertdate_timeFormat",a.getLang("insertdatetime.time_fmt")));a.execCommand("mceInsertContent",!1,b)}),a.addButton("insertdate",{title:"insertdatetime.insertdate_desc",cmd:"mceInsertDate"}),a.addButton("inserttime",{title:"insertdatetime.inserttime_desc",cmd:"mceInsertTime"})},getInfo:function(){return{longname:"Insert date/time",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/insertdatetime",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_getDateTime:function(a,b){function d(a,b){a=""+a;if(a.length<b)for(var c=0;c<b-a.length;c++)a="0"+a;return a}var c=this.editor;return b=b.replace("%D","%m/%d/%y"),b=b.replace("%r","%I:%M:%S %p"),b=b.replace("%Y",""+a.getFullYear()),b=b.replace("%y",""+a.getYear()),b=b.replace("%m",d(a.getMonth()+1,2)),b=b.replace("%d",d(a.getDate(),2)),b=b.replace("%H",""+d(a.getHours(),2)),b=b.replace("%M",""+d(a.getMinutes(),2)),b=b.replace("%S",""+d(a.getSeconds(),2)),b=b.replace("%I",""+((a.getHours()+11)%12+1)),b=b.replace("%p",""+(a.getHours()<12?"AM":"PM")),b=b.replace("%B",""+c.getLang("insertdatetime.months_long").split(",")[a.getMonth()]),b=b.replace("%b",""+c.getLang("insertdatetime.months_short").split(",")[a.getMonth()]),b=b.replace("%A",""+c.getLang("insertdatetime.day_long").split(",")[a.getDay()]),b=b.replace("%a",""+c.getLang("insertdatetime.day_short").split(",")[a.getDay()]),b=b.replace("%%","%"),b}}),tinymce.PluginManager.add("insertdatetime",tinymce.plugins.InsertDateTime)}(),function(){function a(a){do if(a.className&&a.className.indexOf("mceItemLayer")!=-1)return a;while(a=a.parentNode)}tinymce.create("tinymce.plugins.Layer",{init:function(b,c){var d=this;d.editor=b,b.addCommand("mceInsertLayer",d._insertLayer,d),b.addCommand("mceMoveForward",function(){d._move(1)}),b.addCommand("mceMoveBackward",function(){d._move(-1)}),b.addCommand("mceMakeAbsolute",function(){d._toggleAbsolute()}),b.addButton("moveforward",{title:"layer.forward_desc",cmd:"mceMoveForward"}),b.addButton("movebackward",{title:"layer.backward_desc",cmd:"mceMoveBackward"}),b.addButton("absolute",{title:"layer.absolute_desc",cmd:"mceMakeAbsolute"}),b.addButton("insertlayer",{title:"layer.insertlayer_desc",cmd:"mceInsertLayer"}),b.onInit.add(function(){var a=b.dom;tinymce.isIE&&b.getDoc().execCommand("2D-Position",!1,!0)}),b.onMouseUp.add(function(b,c){var d=a(c.target);d&&b.dom.setAttrib(d,"data-mce-style","")}),b.onMouseDown.add(function(b,c){var d=c.target,e=b.getDoc(),f;tinymce.isGecko&&(a(d)?e.designMode!=="on"&&(e.designMode="on",d=e.body,f=d.parentNode,f.removeChild(d),f.appendChild(d)):e.designMode=="on"&&(e.designMode="off"))}),b.onNodeChange.add(d._nodeChange,d),b.onVisualAid.add(d._visualAid,d)},getInfo:function(){return{longname:"Layer",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/layer",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_nodeChange:function(a,b,c){var d,e;d=this._getParentLayer(c),e=a.dom.getParent(c,"DIV,P,IMG"),e?(b.setDisabled("absolute",0),b.setDisabled("moveforward",!d),b.setDisabled("movebackward",!d),b.setActive("absolute",d&&d.style.position.toLowerCase()=="absolute")):(b.setDisabled("absolute",1),b.setDisabled("moveforward",1),b.setDisabled("movebackward",1))},_visualAid:function(a,b,c){var d=a.dom;tinymce.each(d.select("div,p",b),function(a){/^(absolute|relative|fixed)$/i.test(a.style.position)&&(c?d.addClass(a,"mceItemVisualAid"):d.removeClass(a,"mceItemVisualAid"),d.addClass(a,"mceItemLayer"))})},_move:function(a){var b=this.editor,c,d=[],e=this._getParentLayer(b.selection.getNode()),f=-1,g=-1,h;h=[],tinymce.walk(b.getBody(),function(a){a.nodeType==1&&/^(absolute|relative|static)$/i.test(a.style.position)&&h.push(a)},"childNodes");for(c=0;c<h.length;c++)d[c]=h[c].style.zIndex?parseInt(h[c].style.zIndex):0,f<0&&h[c]==e&&(f=c);if(a<0){for(c=0;c<d.length;c++)if(d[c]<d[f]){g=c;break}g>-1?(h[f].style.zIndex=d[g],h[g].style.zIndex=d[f]):d[f]>0&&(h[f].style.zIndex=d[f]-1)}else{for(c=0;c<d.length;c++)if(d[c]>d[f]){g=c;break}g>-1?(h[f].style.zIndex=d[g],h[g].style.zIndex=d[f]):h[f].style.zIndex=d[f]+1}b.execCommand("mceRepaint")},_getParentLayer:function(a){return this.editor.dom.getParent(a,function(a){return a.nodeType==1&&/^(absolute|relative|static)$/i.test(a.style.position)})},_insertLayer:function(){var a=this.editor,b=a.dom,c=b.getPos(b.getParent(a.selection.getNode(),"*")),d=a.getBody();a.dom.add(d,"div",{style:{position:"absolute",left:c.x,top:c.y>20?c.y:20,width:100,height:100},"class":"mceItemVisualAid mceItemLayer"},a.selection.getContent()||a.getLang("layer.content")),tinymce.isIE&&b.setHTML(d,d.innerHTML)},_toggleAbsolute:function(){var a=this.editor,b=this._getParentLayer(a.selection.getNode());b||(b=a.dom.getParent(a.selection.getNode(),"DIV,P,IMG")),b&&(b.style.position.toLowerCase()=="absolute"?(a.dom.setStyles(b,{position:"",left:"",top:"",width:"",height:""}),a.dom.removeClass(b,"mceItemVisualAid"),a.dom.removeClass(b,"mceItemLayer")):(b.style.left==""&&(b.style.left="20px"),b.style.top==""&&(b.style.top="20px"),b.style.width==""&&(b.style.width=b.width?b.width+"px":"100px"),b.style.height==""&&(b.style.height=b.height?b.height+"px":"100px"),b.style.position="absolute",a.dom.setAttrib(b,"data-mce-style",""),a.addVisual(a.getBody())),a.execCommand("mceRepaint"),a.nodeChanged())}}),tinymce.PluginManager.add("layer",tinymce.plugins.Layer)}(),function(){function a(a){do if(a.className&&a.className.indexOf("mceItemLayer")!=-1)return a;while(a=a.parentNode)}tinymce.create("tinymce.plugins.Layer",{init:function(b,c){var d=this;d.editor=b,b.addCommand("mceInsertLayer",d._insertLayer,d),b.addCommand("mceMoveForward",function(){d._move(1)}),b.addCommand("mceMoveBackward",function(){d._move(-1)}),b.addCommand("mceMakeAbsolute",function(){d._toggleAbsolute()}),b.addButton("moveforward",{title:"layer.forward_desc",cmd:"mceMoveForward"}),b.addButton("movebackward",{title:"layer.backward_desc",cmd:"mceMoveBackward"}),b.addButton("absolute",{title:"layer.absolute_desc",cmd:"mceMakeAbsolute"}),b.addButton("insertlayer",{title:"layer.insertlayer_desc",cmd:"mceInsertLayer"}),b.onInit.add(function(){var a=b.dom;tinymce.isIE&&b.getDoc().execCommand("2D-Position",!1,!0)}),b.onMouseUp.add(function(b,c){var d=a(c.target);d&&b.dom.setAttrib(d,"data-mce-style","")}),b.onMouseDown.add(function(b,c){var d=c.target,e=b.getDoc(),f;tinymce.isGecko&&(a(d)?e.designMode!=="on"&&(e.designMode="on",d=e.body,f=d.parentNode,f.removeChild(d),f.appendChild(d)):e.designMode=="on"&&(e.designMode="off"))}),b.onNodeChange.add(d._nodeChange,d),b.onVisualAid.add(d._visualAid,d)},getInfo:function(){return{longname:"Layer",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/layer",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_nodeChange:function(a,b,c){var d,e;d=this._getParentLayer(c),e=a.dom.getParent(c,"DIV,P,IMG"),e?(b.setDisabled("absolute",0),b.setDisabled("moveforward",!d),b.setDisabled("movebackward",!d),b.setActive("absolute",d&&d.style.position.toLowerCase()=="absolute")):(b.setDisabled("absolute",1),b.setDisabled("moveforward",1),b.setDisabled("movebackward",1))},_visualAid:function(a,b,c){var d=a.dom;tinymce.each(d.select("div,p",b),function(a){/^(absolute|relative|fixed)$/i.test(a.style.position)&&(c?d.addClass(a,"mceItemVisualAid"):d.removeClass(a,"mceItemVisualAid"),d.addClass(a,"mceItemLayer"))})},_move:function(a){var b=this.editor,c,d=[],e=this._getParentLayer(b.selection.getNode()),f=-1,g=-1,h;h=[],tinymce.walk(b.getBody(),function(a){a.nodeType==1&&/^(absolute|relative|static)$/i.test(a.style.position)&&h.push(a)},"childNodes");for(c=0;c<h.length;c++)d[c]=h[c].style.zIndex?parseInt(h[c].style.zIndex):0,f<0&&h[c]==e&&(f=c);if(a<0){for(c=0;c<d.length;c++)if(d[c]<d[f]){g=c;break}g>-1?(h[f].style.zIndex=d[g],h[g].style.zIndex=d[f]):d[f]>0&&(h[f].style.zIndex=d[f]-1)}else{for(c=0;c<d.length;c++)if(d[c]>d[f]){g=c;break}g>-1?(h[f].style.zIndex=d[g],h[g].style.zIndex=d[f]):h[f].style.zIndex=d[f]+1}b.execCommand("mceRepaint")},_getParentLayer:function(a){return this.editor.dom.getParent(a,function(a){return a.nodeType==1&&/^(absolute|relative|static)$/i.test(a.style.position)})},_insertLayer:function(){var a=this.editor,b=a.dom,c=b.getPos(b.getParent(a.selection.getNode(),"*")),d=a.getBody();a.dom.add(d,"div",{style:{position:"absolute",left:c.x,top:c.y>20?c.y:20,width:100,height:100},"class":"mceItemVisualAid mceItemLayer"},a.selection.getContent()||a.getLang("layer.content")),tinymce.isIE&&b.setHTML(d,d.innerHTML)},_toggleAbsolute:function(){var a=this.editor,b=this._getParentLayer(a.selection.getNode());b||(b=a.dom.getParent(a.selection.getNode(),"DIV,P,IMG")),b&&(b.style.position.toLowerCase()=="absolute"?(a.dom.setStyles(b,{position:"",left:"",top:"",width:"",height:""}),a.dom.removeClass(b,"mceItemVisualAid"),a.dom.removeClass(b,"mceItemLayer")):(b.style.left==""&&(b.style.left="20px"),b.style.top==""&&(b.style.top="20px"),b.style.width==""&&(b.style.width=b.width?b.width+"px":"100px"),b.style.height==""&&(b.style.height=b.height?b.height+"px":"100px"),b.style.position="absolute",a.dom.setAttrib(b,"data-mce-style",""),a.addVisual(a.getBody())),a.execCommand("mceRepaint"),a.nodeChanged())}}),tinymce.PluginManager.add("layer",tinymce.plugins.Layer)}(),function(a){a.onAddEditor.addToTop(function(a,b){b.settings.inline_styles=!1}),a.create("tinymce.plugins.LegacyOutput",{init:function(b){b.onInit.add(function(){var c="p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",d=a.explode(b.settings.font_size_style_values),e=b.schema;b.formatter.register({alignleft:{selector:c,attributes:{align:"left"}},aligncenter:{selector:c,attributes:{align:"center"}},alignright:{selector:c,attributes:{align:"right"}},alignfull:{selector:c,attributes:{align:"justify"}},bold:[{inline:"b",remove:"all"},{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"i",remove:"all"},{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"strike",remove:"all"},{inline:"span",styles:{textDecoration:"line-through"},exact:!0}],fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(b){return a.inArray(d,b.value)+1}}},forecolor:{inline:"font",styles:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}}),a.each("b,i,u,strike".split(","),function(a){e.addValidElements(a+"[*]")}),e.getElementRule("font")||e.addValidElements("font[face|size|color|style]"),a.each(c.split(","),function(a){var b=e.getElementRule(a),c;b&&(b.attributes.align||(b.attributes.align={},b.attributesOrder.push("align")))}),b.onNodeChange.add(function(b,c){var e,f,g,h;f=b.dom.getParent(b.selection.getNode(),"font"),f&&(g=f.face,h=f.size),(e=c.get("fontselect"))&&e.select(function(a){return a==g}),(e=c.get("fontsizeselect"))&&e.select(function(b){var c=a.inArray(d,b.fontSize);return c+1==h})})})},getInfo:function(){return{longname:"LegacyOutput",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/legacyoutput",version:a.majorVersion+"."+a.minorVersion}}}),a.PluginManager.add("legacyoutput",a.plugins.LegacyOutput)}(tinymce),function(a){a.onAddEditor.addToTop(function(a,b){b.settings.inline_styles=!1}),a.create("tinymce.plugins.LegacyOutput",{init:function(b){b.onInit.add(function(){var c="p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",d=a.explode(b.settings.font_size_style_values),e=b.schema;b.formatter.register({alignleft:{selector:c,attributes:{align:"left"}},aligncenter:{selector:c,attributes:{align:"center"}},alignright:{selector:c,attributes:{align:"right"}},alignfull:{selector:c,attributes:{align:"justify"}},bold:[{inline:"b",remove:"all"},{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"i",remove:"all"},{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"strike",remove:"all"},{inline:"span",styles:{textDecoration:"line-through"},exact:!0}],fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(b){return a.inArray(d,b.value)+1}}},forecolor:{inline:"font",styles:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}}),a.each("b,i,u,strike".split(","),function(a){e.addValidElements(a+"[*]")}),e.getElementRule("font")||e.addValidElements("font[face|size|color|style]"),a.each(c.split(","),function(a){var b=e.getElementRule(a),c;b&&(b.attributes.align||(b.attributes.align={},b.attributesOrder.push("align")))}),b.onNodeChange.add(function(b,c){var e,f,g,h;f=b.dom.getParent(b.selection.getNode(),"font"),f&&(g=f.face,h=f.size),(e=c.get("fontselect"))&&e.select(function(a){return a==g}),(e=c.get("fontsizeselect"))&&e.select(function(b){var c=a.inArray(d,b.fontSize);return c+1==h})})})},getInfo:function(){return{longname:"LegacyOutput",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/legacyoutput",version:a.majorVersion+"."+a.minorVersion}}}),a.PluginManager.add("legacyoutput",a.plugins.LegacyOutput)}(tinymce),function(){function d(a,b){while(a&&(a.nodeType===8||a.nodeType===3&&/^[ \t\n\r]*$/.test(a.nodeValue)))a=b(a);return a}function e(a){return d(a,function(a){return a.previousSibling})}function f(a){return d(a,function(a){return a.nextSibling})}function g(a,b,c){return a.dom.getParent(b,function(a){return tinymce.inArray(c,a)!==-1})}function h(a){return a&&(a.tagName==="OL"||a.tagName==="UL")}function i(a,b){var c,d,f;c=e(a.lastChild);while(h(c))d=c,c=e(d.previousSibling);return d&&(f=b.create("li",{style:"list-style-type: none;"}),b.split(a,d),b.insertAfter(f,d),f.appendChild(d),f.appendChild(d),a=f.previousSibling),a}function j(a,b,c){return a=k(a,b,c),l(a,b,c)}function k(a,b,c){var d=e(a.previousSibling);return d?m(d,a,b?d:!1,c):a}function l(a,b,c){var d=f(a.nextSibling);return d?m(a,d,b?d:!1,c):a}function m(a,b,c,d){return n(a,b,!!c,d)?q(a,b,c):(a&&a.tagName==="LI"&&h(b)&&a.appendChild(b),b)}function n(a,b,c,d){return!a||!b?!1:a.tagName==="LI"&&b.tagName==="LI"?b.style.listStyleType==="none"||p(b):h(a)?a.tagName===b.tagName&&(c||a.style.listStyleType===b.style.listStyleType)||o(b):d&&a.tagName==="P"&&b.tagName==="P"}function o(a){var b=f(a.firstChild),c=e(a.lastChild);return b&&c&&h(a)&&b===c&&(h(b)||b.style.listStyleType==="none"||p(b))}function p(a){var b=f(a.firstChild),c=e(a.lastChild);return b&&c&&b===c&&h(b)}function q(a,b,c){var d=e(a.lastChild),g=f(b.firstChild);a.tagName==="P"&&a.appendChild(a.ownerDocument.createElement("br"));while(b.firstChild)a.appendChild(b.firstChild);return c&&(a.style.listStyleType=c.style.listStyleType),b.parentNode.removeChild(b),m(d,g,!1),a}function r(a,b){var c;return b.is(a,"li,ol,ul")||(c=b.getParent(a,"li"),c&&(a=c)),a}var a=tinymce.each,b=tinymce.dom.Event,c;tinymce.create("tinymce.plugins.Lists",{init:function(a){function j(b){return b.keyCode===tinymce.VK.TAB&&!b.altKey&&!b.ctrlKey&&(a.queryCommandState("InsertUnorderedList")||a.queryCommandState("InsertOrderedList"))}function k(){var b=a.selection.getRng(),c=b.startContainer;return c.nodeType==3?b.endOffset==c.nodeValue.length:c.nodeType==1?b.endOffset==c.childNodes.length:!1}function l(){var b=a.selection.getNode(),c=b.tagName==="P"&&b.parentNode.tagName==="LI"&&b.parentNode.lastChild===b;return a.selection.isCollapsed()&&c&&k()}function m(){var a=p(),b=a.parentNode.parentNode,c=a.parentNode.lastChild===a;return c&&!n(b)&&q(a)}function n(a){return h(a)?a.parentNode&&a.parentNode.tagName==="LI":a.tagName==="LI"}function o(){return a.selection.isCollapsed()&&q(p())}function p(){var b=a.selection.getStart();return b.tagName!="BR"&&b.tagName!=""||b.parentNode.tagName!="LI"?b:b.parentNode}function q(a){var b=a.childNodes.length;return a.tagName==="LI"?b==0?!0:b==1&&(a.firstChild.tagName==""||a.firstChild.tagName=="BR"||r(a)):!1}function r(a){var b=tinymce.grep(a.parentNode.childNodes,function(a){return a.tagName=="LI"}),c=a==b[b.length-1],d=a.firstChild;return tinymce.isIE9&&c&&(d.nodeValue==String.fromCharCode(160)||d.nodeValue==String.fromCharCode(32))}function s(a){return a.keyCode===tinymce.VK.ENTER}function t(a){return s(a)&&!a.shiftKey}function u(a){return j(a)?c:t(a)&&m()?e:t(a)&&o()?d:t(a)&&l()?f:g}function v(a,f){(i==c||i==d||tinymce.isGecko&&i==e)&&b.cancel(f)}function w(a,c){if(i==f){var d=a.selection.getNode(),e=a.dom.create("li"),g=a.dom.getParent(d,"li");a.dom.insertAfter(e,g),tinyMCE.isIE8?(e.appendChild(a.dom.create("&nbsp;")),a.selection.setCursorLocation(e,1)):tinyMCE.isGecko?setTimeout(function(){var b=a.getDoc().createTextNode("﻿");e.appendChild(b),a.selection.setCursorLocation(e,0)},0):a.selection.setCursorLocation(e,0),b.cancel(c)}}function x(a,b){function e(a){var b=a.firstChild,c=null;do{if(!b)break;b.tagName==="LI"&&(c=b)}while(b=b.nextSibling);return c}function f(a,b){while(a.childNodes.length>0)b.appendChild(a.childNodes[0])}var c;if(!tinymce.isGecko)return;var d=a.selection.getStart();if(b.keyCode!=tinymce.VK.BACKSPACE||d.tagName!=="IMG")return;c=d.parentNode.previousSibling;if(!c)return;var g;if(c.tagName==="UL"||c.tagName==="OL")g=c;else{if(!c.previousSibling||c.previousSibling.tagName!=="UL"&&c.previousSibling.tagName!=="OL")return;g=c.previousSibling}var h=e(g),i=a.dom.createRng();i.setStart(h,1),i.setEnd(h,1),a.selection.setRng(i),a.selection.collapse(!0);var j=a.selection.getBookmark(),k=d.parentNode.cloneNode(!0);k.tagName==="P"||k.tagName==="DIV"?f(k,h):h.appendChild(k),d.parentNode.parentNode.removeChild(d.parentNode),a.selection.moveToBookmark(j)}function y(b){var c=a.dom.getParent(b,"ol,ul");if(c!=null){var d=c.lastChild;d.appendChild(a.getDoc().createElement("")),a.selection.setCursorLocation(d,0)}}function z(b,c){var d=a.getDoc().createTextNode("﻿");b.insertBefore(d,c),a.selection.setCursorLocation(d,0),a.execCommand("mceRepaint")}function A(a,b){if(s(b)){var c=p();if(c){var d=c.parentNode,e=d&&d.parentNode;e&&e.nodeName=="LI"&&e.firstChild==d&&c==d.firstChild&&z(e,d)}}}function B(a,b){if(s(b)){var c=p();if(a.dom.select("ul li",c).length===1){var d=c.firstChild;z(c,d)}}}function C(a,c){function d(b,c){var d=[],e=new tinymce.dom.TreeWalker(c,b);for(var f=e.current();f;f=e.next())a.dom.is(f,"ol,ul,li")&&d.push(f);return d}if(c.keyCode==tinymce.VK.BACKSPACE){var e=p();if(e){var f=a.dom.getParent(e,"ol,ul");if(f&&f.firstChild===e){var g=d(f,e);return a.execCommand("Outdent",!1,g),a.undoManager.add(),b.cancel(c)}}}}var c="TABBING",d="EMPTY",e="ESCAPE",f="PARAGRAPH",g="UNKNOWN",i=g;this.ed=a,a.addCommand("Indent",this.indent,this),a.addCommand("Outdent",this.outdent,this),a.addCommand("InsertUnorderedList",function(){this.applyList("UL","OL")},this),a.addCommand("InsertOrderedList",function(){this.applyList("OL","UL")},this),a.onInit.add(function(){a.editorCommands.addCommands({outdent:function(){function d(b){return b=c.getParent(b,c.isBlock),b&&parseInt(a.dom.getStyle(b,"margin-left")||0,10)+parseInt(a.dom.getStyle(b,"padding-left")||0,10)>0}var b=a.selection,c=a.dom;return d(b.getStart())||d(b.getEnd())||a.queryCommandState("InsertOrderedList")||a.queryCommandState("InsertUnorderedList")}},"state")}),a.onKeyUp.add(function(a,f){if(i==c)return a.execCommand(f.shiftKey?"Outdent":"Indent",!0,null),i=g,b.cancel(f);if(i==d){var h=p(),j=a.settings.list_outdent_on_enter===!0||f.shiftKey;return a.execCommand(j?"Outdent":"Indent",!0,null),tinymce.isIE&&y(h),b.cancel(f)}if(i==e)if(tinymce.isIE8){var k=a.getDoc().createTextNode("﻿");a.selection.getNode().appendChild(k)}else if(tinymce.isIE9||tinymce.isGecko)return a.execCommand("Outdent"),b.cancel(f)}),a.onKeyDown.add(function(a,b){i=u(b)}),a.onKeyDown.add(v),a.onKeyDown.add(x),a.onKeyDown.add(w),tinymce.isGecko&&a.onKeyUp.add(A),tinymce.isIE8&&a.onKeyUp.add(B),(tinymce.isGecko||tinymce.isWebKit)&&a.onKeyDown.add(C)},applyList:function(b,d){function q(a){a&&a.tagName==="BR"&&g.remove(a)}function s(a){function f(a){(a.style.marginLeft||a.style.paddingLeft)&&e.adjustPaddingFunction(!1)(a)}var c=g.create(b),d;if(a.tagName!=="LI"){if(a.tagName==="P"||a.tagName==="DIV"||a.tagName==="BODY"){u(a,function(b,c){t(b,c,a.tagName==="BODY"?null:b.parentNode),d=b.parentNode,f(d),q(c)}),d&&(d.tagName==="LI"&&(a.tagName==="P"||p.length>1)&&g.split(d.parentNode.parentNode,d.parentNode),j(d.parentNode,!0));return}d=g.create("li"),g.insertAfter(d,a),d.appendChild(a),f(a),a=d}g.insertAfter(c,a),c.appendChild(a),j(c,!0),h.push(a)}function t(a,b,c){var d,e=a,f;while(!g.isBlock(a.parentNode)&&a.parentNode!==g.getRoot())a=g.split(a.parentNode,a.previousSibling),a=a.nextSibling,e=a;if(c){d=c.cloneNode(!0),a.parentNode.insertBefore(d,a);while(d.firstChild)g.remove(d.firstChild);d=g.rename(d,"li")}else d=g.create("li"),a.parentNode.insertBefore(d,a);while(
e&&e!=b)f=e.nextSibling,d.appendChild(e),e=f;d.childNodes.length===0&&(d.innerHTML='<br _mce_bogus="1" />'),s(d)}function u(b,d){function l(a,b){var d=g.createRng(),e;return c.keep=!0,f.selection.moveToBookmark(c),c.keep=!1,e=f.selection.getRng(!0),b||(b=a.parentNode.lastChild),d.setStartBefore(a),d.setEndAfter(b),!(d.compareBoundaryPoints(i,e)>0||d.compareBoundaryPoints(j,e)<=0)}function m(a){if(a.nextSibling)return a.nextSibling;if(!g.isBlock(a.parentNode)&&a.parentNode!==g.getRoot())return m(a.parentNode)}var e,h,i=3,j=1,k="br,ul,ol,p,div,h1,h2,h3,h4,h5,h6,table,blockquote,address,pre,form,center,dl";e=b.firstChild;var n=!1;a(g.select(k,b),function(a){if(a.hasAttribute&&a.hasAttribute("_mce_bogus"))return!0;l(e,a)&&(g.addClass(a,"_mce_tagged_br"),e=m(a))}),n=e&&l(e,undefined),e=b.firstChild,a(g.select(k,b),function(a){var b=m(a);if(a.hasAttribute&&a.hasAttribute("_mce_bogus"))return!0;g.hasClass(a,"_mce_tagged_br")?(d(e,a,h),h=null):h=a,e=b}),n&&d(e,undefined,h)}function v(a){u(a,function(a,b,c){t(a,b),q(b),q(c)})}function w(a){if(tinymce.inArray(h,a)!==-1)return;a.parentNode.tagName===d&&(g.split(a.parentNode,a),s(a),l(a.parentNode,!1)),h.push(a)}function x(a){var b,c,d,e;if(tinymce.inArray(h,a)!==-1)return;a=i(a,g);while(g.is(a.parentNode,"ol,ul,li"))g.split(a.parentNode,a);h.push(a),a=g.rename(a,"p"),d=j(a,!1,f.settings.force_br_newlines);if(d===a){b=a.firstChild;while(b)g.isBlock(b)?(b=g.split(b.parentNode,b),e=!0,c=b.nextSibling&&b.nextSibling.firstChild):(c=b.nextSibling,e&&b.tagName==="BR"&&g.remove(b),e=!1),b=c}}var e=this,f=e.ed,g=f.dom,h=[],k=!1,m=!1,n=!1,o,p=f.selection.getSelectedBlocks();a(p,function(a){a=r(a,g),a.tagName===d||a.tagName==="LI"&&a.parentNode.tagName===d?m=!0:a.tagName===b||a.tagName==="LI"&&a.parentNode.tagName===b?k=!0:n=!0}),n&&!k||m||p.length===0?o={LI:w,H1:s,H2:s,H3:s,H4:s,H5:s,H6:s,P:s,BODY:s,DIV:p.length>1?s:v,defaultAction:v,elements:this.selectedBlocks()}:o={defaultAction:x,elements:this.selectedBlocks()},this.process(o)},indent:function(){function d(a){var c=b.create("li",{style:"list-style-type: none;"});return b.insertAfter(c,a),c}function e(a){var c=d(a),e=b.getParent(a,"ol,ul"),f=e.tagName,g=b.getStyle(e,"list-style-type"),h={},i;return g!==""&&(h.style="list-style-type: "+g+";"),i=b.create(f,h),c.appendChild(i),i}function f(d){if(!g(a,d,c)){d=i(d,b);var f=e(d);f.appendChild(d),j(f.parentNode,!1),j(f,!1),c.push(d)}}var a=this.ed,b=a.dom,c=[];this.process({LI:f,defaultAction:this.adjustPaddingFunction(!0),elements:this.selectedBlocks()})},outdent:function(b,c){function k(a){var b,c,j;if(!g(e,a,h)){if(f.getStyle(a,"margin-left")!==""||f.getStyle(a,"padding-left")!=="")return d.adjustPaddingFunction(!1)(a);j=f.getStyle(a,"text-align",!0);if(j==="center"||j==="right"){f.setStyle(a,"text-align","left");return}a=i(a,f),b=a.parentNode,c=a.parentNode.parentNode,c.tagName==="P"?f.split(c,a.parentNode):(f.split(b,a),c.tagName==="LI"?f.split(c,a):f.is(c,"ol,ul")||f.rename(a,"p")),h.push(a)}}var d=this,e=d.ed,f=e.dom,h=[],l=c&&tinymce.is(c,"array")?c:this.selectedBlocks();this.process({LI:k,defaultAction:this.adjustPaddingFunction(!1),elements:l}),a(h,j)},process:function(a){function h(a){var b=tinymce.grep(a.childNodes,function(a){return a.nodeName!=="BR"&&(a.nodeName!=="SPAN"||e.getAttrib(a,"data-mce-type")!="bookmark")&&(a.nodeType!=3||a.nodeValue!=String.fromCharCode(160)&&a.nodeValue!="")});return b.length===0}function i(b){e.removeClass(b,"_mce_act_on");if(!b||b.nodeType!==1||f.length>1&&h(b))return;b=r(b,e);var c=a[b.tagName];c||(c=a.defaultAction),c(b)}function j(a){b.splitSafeEach(a.childNodes,i)}function k(a,b){return b>=0&&a.hasChildNodes()&&b<a.childNodes.length&&a.childNodes[b].tagName==="BR"}function l(){var a=d.getNode(),b=e.getParent(a,"td");return b!==null}var b=this,d=b.ed.selection,e=b.ed.dom,f,g;f=a.elements,g=d.getRng(!0),g.collapsed||(k(g.endContainer,g.endOffset-1)&&(g.setEnd(g.endContainer,g.endOffset-1),d.setRng(g)),k(g.startContainer,g.startOffset)&&(g.setStart(g.startContainer,g.startOffset+1),d.setRng(g)));if(tinymce.isIE8){var m=b.ed.selection.getNode();if(m.tagName==="LI"&&m.parentNode.lastChild!==m){var n=b.ed.getDoc().createTextNode("﻿");m.appendChild(n)}}c=d.getBookmark(),a.OL=a.UL=j,b.splitSafeEach(f,i),d.moveToBookmark(c),c=null,l()||b.ed.execCommand("mceRepaint")},splitSafeEach:function(b,c){tinymce.isGecko&&(/Firefox\/[12]\.[0-9]/.test(navigator.userAgent)||/Firefox\/3\.[0-4]/.test(navigator.userAgent))?this.classBasedEach(b,c):a(b,c)},classBasedEach:function(b,c){var d=this.ed.dom,e,f;a(b,function(a){d.addClass(a,"_mce_act_on")}),e=d.select("._mce_act_on");while(e.length>0)f=e.shift(),d.removeClass(f,"_mce_act_on"),c(f),e=d.select("._mce_act_on")},adjustPaddingFunction:function(a){var b,c,d=this.ed;return b=d.settings.indentation,c=/[a-z%]+/i.exec(b),b=parseInt(b,10),function(e){var f,g;f=parseInt(d.dom.getStyle(e,"margin-left")||0,10)+parseInt(d.dom.getStyle(e,"padding-left")||0,10),a?g=f+b:g=f-b,d.dom.setStyle(e,"padding-left",""),d.dom.setStyle(e,"margin-left",g>0?g+c:"")}},selectedBlocks:function(){var a=this.ed,b=a.selection.getSelectedBlocks();return b.length==0?[a.dom.getRoot()]:b},getInfo:function(){return{longname:"Lists",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/lists",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("lists",tinymce.plugins.Lists)}(),function(){function d(a,b){while(a&&(a.nodeType===8||a.nodeType===3&&/^[ \t\n\r]*$/.test(a.nodeValue)))a=b(a);return a}function e(a){return d(a,function(a){return a.previousSibling})}function f(a){return d(a,function(a){return a.nextSibling})}function g(a,b,c){return a.dom.getParent(b,function(a){return tinymce.inArray(c,a)!==-1})}function h(a){return a&&(a.tagName==="OL"||a.tagName==="UL")}function i(a,b){var c,d,f;c=e(a.lastChild);while(h(c))d=c,c=e(d.previousSibling);return d&&(f=b.create("li",{style:"list-style-type: none;"}),b.split(a,d),b.insertAfter(f,d),f.appendChild(d),f.appendChild(d),a=f.previousSibling),a}function j(a,b,c){return a=k(a,b,c),l(a,b,c)}function k(a,b,c){var d=e(a.previousSibling);return d?m(d,a,b?d:!1,c):a}function l(a,b,c){var d=f(a.nextSibling);return d?m(a,d,b?d:!1,c):a}function m(a,b,c,d){return n(a,b,!!c,d)?q(a,b,c):(a&&a.tagName==="LI"&&h(b)&&a.appendChild(b),b)}function n(a,b,c,d){return!a||!b?!1:a.tagName==="LI"&&b.tagName==="LI"?b.style.listStyleType==="none"||p(b):h(a)?a.tagName===b.tagName&&(c||a.style.listStyleType===b.style.listStyleType)||o(b):d&&a.tagName==="P"&&b.tagName==="P"}function o(a){var b=f(a.firstChild),c=e(a.lastChild);return b&&c&&h(a)&&b===c&&(h(b)||b.style.listStyleType==="none"||p(b))}function p(a){var b=f(a.firstChild),c=e(a.lastChild);return b&&c&&b===c&&h(b)}function q(a,b,c){var d=e(a.lastChild),g=f(b.firstChild);a.tagName==="P"&&a.appendChild(a.ownerDocument.createElement("br"));while(b.firstChild)a.appendChild(b.firstChild);return c&&(a.style.listStyleType=c.style.listStyleType),b.parentNode.removeChild(b),m(d,g,!1),a}function r(a,b){var c;return b.is(a,"li,ol,ul")||(c=b.getParent(a,"li"),c&&(a=c)),a}var a=tinymce.each,b=tinymce.dom.Event,c;tinymce.create("tinymce.plugins.Lists",{init:function(a){function j(b){return b.keyCode===tinymce.VK.TAB&&!b.altKey&&!b.ctrlKey&&(a.queryCommandState("InsertUnorderedList")||a.queryCommandState("InsertOrderedList"))}function k(){var b=a.selection.getRng(),c=b.startContainer;return c.nodeType==3?b.endOffset==c.nodeValue.length:c.nodeType==1?b.endOffset==c.childNodes.length:!1}function l(){var b=a.selection.getNode(),c=b.tagName==="P"&&b.parentNode.tagName==="LI"&&b.parentNode.lastChild===b;return a.selection.isCollapsed()&&c&&k()}function m(){var a=p(),b=a.parentNode.parentNode,c=a.parentNode.lastChild===a;return c&&!n(b)&&q(a)}function n(a){return h(a)?a.parentNode&&a.parentNode.tagName==="LI":a.tagName==="LI"}function o(){return a.selection.isCollapsed()&&q(p())}function p(){var b=a.selection.getStart();return b.tagName!="BR"&&b.tagName!=""||b.parentNode.tagName!="LI"?b:b.parentNode}function q(a){var b=a.childNodes.length;return a.tagName==="LI"?b==0?!0:b==1&&(a.firstChild.tagName==""||a.firstChild.tagName=="BR"||r(a)):!1}function r(a){var b=tinymce.grep(a.parentNode.childNodes,function(a){return a.tagName=="LI"}),c=a==b[b.length-1],d=a.firstChild;return tinymce.isIE9&&c&&(d.nodeValue==String.fromCharCode(160)||d.nodeValue==String.fromCharCode(32))}function s(a){return a.keyCode===tinymce.VK.ENTER}function t(a){return s(a)&&!a.shiftKey}function u(a){return j(a)?c:t(a)&&m()?e:t(a)&&o()?d:t(a)&&l()?f:g}function v(a,f){(i==c||i==d||tinymce.isGecko&&i==e)&&b.cancel(f)}function w(a,c){if(i==f){var d=a.selection.getNode(),e=a.dom.create("li"),g=a.dom.getParent(d,"li");a.dom.insertAfter(e,g),tinyMCE.isIE8?(e.appendChild(a.dom.create("&nbsp;")),a.selection.setCursorLocation(e,1)):tinyMCE.isGecko?setTimeout(function(){var b=a.getDoc().createTextNode("﻿");e.appendChild(b),a.selection.setCursorLocation(e,0)},0):a.selection.setCursorLocation(e,0),b.cancel(c)}}function x(a,b){function e(a){var b=a.firstChild,c=null;do{if(!b)break;b.tagName==="LI"&&(c=b)}while(b=b.nextSibling);return c}function f(a,b){while(a.childNodes.length>0)b.appendChild(a.childNodes[0])}var c;if(!tinymce.isGecko)return;var d=a.selection.getStart();if(b.keyCode!=tinymce.VK.BACKSPACE||d.tagName!=="IMG")return;c=d.parentNode.previousSibling;if(!c)return;var g;if(c.tagName==="UL"||c.tagName==="OL")g=c;else{if(!c.previousSibling||c.previousSibling.tagName!=="UL"&&c.previousSibling.tagName!=="OL")return;g=c.previousSibling}var h=e(g),i=a.dom.createRng();i.setStart(h,1),i.setEnd(h,1),a.selection.setRng(i),a.selection.collapse(!0);var j=a.selection.getBookmark(),k=d.parentNode.cloneNode(!0);k.tagName==="P"||k.tagName==="DIV"?f(k,h):h.appendChild(k),d.parentNode.parentNode.removeChild(d.parentNode),a.selection.moveToBookmark(j)}function y(b){var c=a.dom.getParent(b,"ol,ul");if(c!=null){var d=c.lastChild;d.appendChild(a.getDoc().createElement("")),a.selection.setCursorLocation(d,0)}}function z(b,c){var d=a.getDoc().createTextNode("﻿");b.insertBefore(d,c),a.selection.setCursorLocation(d,0),a.execCommand("mceRepaint")}function A(a,b){if(s(b)){var c=p();if(c){var d=c.parentNode,e=d&&d.parentNode;e&&e.nodeName=="LI"&&e.firstChild==d&&c==d.firstChild&&z(e,d)}}}function B(a,b){if(s(b)){var c=p();if(a.dom.select("ul li",c).length===1){var d=c.firstChild;z(c,d)}}}function C(a,c){function d(b,c){var d=[],e=new tinymce.dom.TreeWalker(c,b);for(var f=e.current();f;f=e.next())a.dom.is(f,"ol,ul,li")&&d.push(f);return d}if(c.keyCode==tinymce.VK.BACKSPACE){var e=p();if(e){var f=a.dom.getParent(e,"ol,ul");if(f&&f.firstChild===e){var g=d(f,e);return a.execCommand("Outdent",!1,g),a.undoManager.add(),b.cancel(c)}}}}var c="TABBING",d="EMPTY",e="ESCAPE",f="PARAGRAPH",g="UNKNOWN",i=g;this.ed=a,a.addCommand("Indent",this.indent,this),a.addCommand("Outdent",this.outdent,this),a.addCommand("InsertUnorderedList",function(){this.applyList("UL","OL")},this),a.addCommand("InsertOrderedList",function(){this.applyList("OL","UL")},this),a.onInit.add(function(){a.editorCommands.addCommands({outdent:function(){function d(b){return b=c.getParent(b,c.isBlock),b&&parseInt(a.dom.getStyle(b,"margin-left")||0,10)+parseInt(a.dom.getStyle(b,"padding-left")||0,10)>0}var b=a.selection,c=a.dom;return d(b.getStart())||d(b.getEnd())||a.queryCommandState("InsertOrderedList")||a.queryCommandState("InsertUnorderedList")}},"state")}),a.onKeyUp.add(function(a,f){if(i==c)return a.execCommand(f.shiftKey?"Outdent":"Indent",!0,null),i=g,b.cancel(f);if(i==d){var h=p(),j=a.settings.list_outdent_on_enter===!0||f.shiftKey;return a.execCommand(j?"Outdent":"Indent",!0,null),tinymce.isIE&&y(h),b.cancel(f)}if(i==e)if(tinymce.isIE8){var k=a.getDoc().createTextNode("﻿");a.selection.getNode().appendChild(k)}else if(tinymce.isIE9||tinymce.isGecko)return a.execCommand("Outdent"),b.cancel(f)}),a.onKeyDown.add(function(a,b){i=u(b)}),a.onKeyDown.add(v),a.onKeyDown.add(x),a.onKeyDown.add(w),tinymce.isGecko&&a.onKeyUp.add(A),tinymce.isIE8&&a.onKeyUp.add(B),(tinymce.isGecko||tinymce.isWebKit)&&a.onKeyDown.add(C)},applyList:function(b,d){function q(a){a&&a.tagName==="BR"&&g.remove(a)}function s(a){function f(a){(a.style.marginLeft||a.style.paddingLeft)&&e.adjustPaddingFunction(!1)(a)}var c=g.create(b),d;if(a.tagName!=="LI"){if(a.tagName==="P"||a.tagName==="DIV"||a.tagName==="BODY"){u(a,function(b,c){t(b,c,a.tagName==="BODY"?null:b.parentNode),d=b.parentNode,f(d),q(c)}),d&&(d.tagName==="LI"&&(a.tagName==="P"||p.length>1)&&g.split(d.parentNode.parentNode,d.parentNode),j(d.parentNode,!0));return}d=g.create("li"),g.insertAfter(d,a),d.appendChild(a),f(a),a=d}g.insertAfter(c,a),c.appendChild(a),j(c,!0),h.push(a)}function t(a,b,c){var d,e=a,f;while(!g.isBlock(a.parentNode)&&a.parentNode!==g.getRoot())a=g.split(a.parentNode,a.previousSibling),a=a.nextSibling,e=a;if(c){d=c.cloneNode(!0),a.parentNode.insertBefore(d,a);while(d.firstChild)g.remove(d.firstChild);d=g.rename(d,"li")}else d=g.create("li"),a.parentNode.insertBefore(d,a);while(e&&e!=b)f=e.nextSibling,d.appendChild(e),e=f;d.childNodes.length===0&&(d.innerHTML='<br _mce_bogus="1" />'),s(d)}function u(b,d){function l(a,b){var d=g.createRng(),e;return c.keep=!0,f.selection.moveToBookmark(c),c.keep=!1,e=f.selection.getRng(!0),b||(b=a.parentNode.lastChild),d.setStartBefore(a),d.setEndAfter(b),!(d.compareBoundaryPoints(i,e)>0||d.compareBoundaryPoints(j,e)<=0)}function m(a){if(a.nextSibling)return a.nextSibling;if(!g.isBlock(a.parentNode)&&a.parentNode!==g.getRoot())return m(a.parentNode)}var e,h,i=3,j=1,k="br,ul,ol,p,div,h1,h2,h3,h4,h5,h6,table,blockquote,address,pre,form,center,dl";e=b.firstChild;var n=!1;a(g.select(k,b),function(a){if(a.hasAttribute&&a.hasAttribute("_mce_bogus"))return!0;l(e,a)&&(g.addClass(a,"_mce_tagged_br"),e=m(a))}),n=e&&l(e,undefined),e=b.firstChild,a(g.select(k,b),function(a){var b=m(a);if(a.hasAttribute&&a.hasAttribute("_mce_bogus"))return!0;g.hasClass(a,"_mce_tagged_br")?(d(e,a,h),h=null):h=a,e=b}),n&&d(e,undefined,h)}function v(a){u(a,function(a,b,c){t(a,b),q(b),q(c)})}function w(a){if(tinymce.inArray(h,a)!==-1)return;a.parentNode.tagName===d&&(g.split(a.parentNode,a),s(a),l(a.parentNode,!1)),h.push(a)}function x(a){var b,c,d,e;if(tinymce.inArray(h,a)!==-1)return;a=i(a,g);while(g.is(a.parentNode,"ol,ul,li"))g.split(a.parentNode,a);h.push(a),a=g.rename(a,"p"),d=j(a,!1,f.settings.force_br_newlines);if(d===a){b=a.firstChild;while(b)g.isBlock(b)?(b=g.split(b.parentNode,b),e=!0,c=b.nextSibling&&b.nextSibling.firstChild):(c=b.nextSibling,e&&b.tagName==="BR"&&g.remove(b),e=!1),b=c}}var e=this,f=e.ed,g=f.dom,h=[],k=!1,m=!1,n=!1,o,p=f.selection.getSelectedBlocks();a(p,function(a){a=r(a,g),a.tagName===d||a.tagName==="LI"&&a.parentNode.tagName===d?m=!0:a.tagName===b||a.tagName==="LI"&&a.parentNode.tagName===b?k=!0:n=!0}),n&&!k||m||p.length===0?o={LI:w,H1:s,H2:s,H3:s,H4:s,H5:s,H6:s,P:s,BODY:s,DIV:p.length>1?s:v,defaultAction:v,elements:this.selectedBlocks()}:o={defaultAction:x,elements:this.selectedBlocks()},this.process(o)},indent:function(){function d(a){var c=b.create("li",{style:"list-style-type: none;"});return b.insertAfter(c,a),c}function e(a){var c=d(a),e=b.getParent(a,"ol,ul"),f=e.tagName,g=b.getStyle(e,"list-style-type"),h={},i;return g!==""&&(h.style="list-style-type: "+g+";"),i=b.create(f,h),c.appendChild(i),i}function f(d){if(!g(a,d,c)){d=i(d,b);var f=e(d);f.appendChild(d),j(f.parentNode,!1),j(f,!1),c.push(d)}}var a=this.ed,b=a.dom,c=[];this.process({LI:f,defaultAction:this.adjustPaddingFunction(!0),elements:this.selectedBlocks()})},outdent:function(b,c){function k(a){var b,c,j;if(!g(e,a,h)){if(f.getStyle(a,"margin-left")!==""||f.getStyle(a,"padding-left")!=="")return d.adjustPaddingFunction(!1)(a);j=f.getStyle(a,"text-align",!0);if(j==="center"||j==="right"){f.setStyle(a,"text-align","left");return}a=i(a,f),b=a.parentNode,c=a.parentNode.parentNode,c.tagName==="P"?f.split(c,a.parentNode):(f.split(b,a),c.tagName==="LI"?f.split(c,a):f.is(c,"ol,ul")||f.rename(a,"p")),h.push(a)}}var d=this,e=d.ed,f=e.dom,h=[],l=c&&tinymce.is(c,"array")?c:this.selectedBlocks();this.process({LI:k,defaultAction:this.adjustPaddingFunction(!1),elements:l}),a(h,j)},process:function(a){function h(a){var b=tinymce.grep(a.childNodes,function(a){return a.nodeName!=="BR"&&(a.nodeName!=="SPAN"||e.getAttrib(a,"data-mce-type")!="bookmark")&&(a.nodeType!=3||a.nodeValue!=String.fromCharCode(160)&&a.nodeValue!="")});return b.length===0}function i(b){e.removeClass(b,"_mce_act_on");if(!b||b.nodeType!==1||f.length>1&&h(b))return;b=r(b,e);var c=a[b.tagName];c||(c=a.defaultAction),c(b)}function j(a){b.splitSafeEach(a.childNodes,i)}function k(a,b){return b>=0&&a.hasChildNodes()&&b<a.childNodes.length&&a.childNodes[b].tagName==="BR"}function l(){var a=d.getNode(),b=e.getParent(a,"td");return b!==null}var b=this,d=b.ed.selection,e=b.ed.dom,f,g;f=a.elements,g=d.getRng(!0),g.collapsed||(k(g.endContainer,g.endOffset-1)&&(g.setEnd(g.endContainer,g.endOffset-1),d.setRng(g)),k(g.startContainer,g.startOffset)&&(g.setStart(g.startContainer,g.startOffset+1),d.setRng(g)));if(tinymce.isIE8){var m=b.ed.selection.getNode();if(m.tagName==="LI"&&m.parentNode.lastChild!==m){var n=b.ed.getDoc().createTextNode("﻿");m.appendChild(n)}}c=d.getBookmark(),a.OL=a.UL=j,b.splitSafeEach(f,i),d.moveToBookmark(c),c=null,l()||b.ed.execCommand("mceRepaint")},splitSafeEach:function(b,c){tinymce.isGecko&&(/Firefox\/[12]\.[0-9]/.test(navigator.userAgent)||/Firefox\/3\.[0-4]/.test(navigator.userAgent))?this.classBasedEach(b,c):a(b,c)},classBasedEach:function(b,c){var d=this.ed.dom,e,f;a(b,function(a){d.addClass(a,"_mce_act_on")}),e=d.select("._mce_act_on");while(e.length>0)f=e.shift(),d.removeClass(f,"_mce_act_on"),c(f),e=d.select("._mce_act_on")},adjustPaddingFunction:function(a){var b,c,d=this.ed;return b=d.settings.indentation,c=/[a-z%]+/i.exec(b),b=parseInt(b,10),function(e){var f,g;f=parseInt(d.dom.getStyle(e,"margin-left")||0,10)+parseInt(d.dom.getStyle(e,"padding-left")||0,10),a?g=f+b:g=f-b,d.dom.setStyle(e,"padding-left",""),d.dom.setStyle(e,"margin-left",g>0?g+c:"")}},selectedBlocks:function(){var a=this.ed,b=a.selection.getSelectedBlocks();return b.length==0?[a.dom.getRoot()]:b},getInfo:function(){return{longname:"Lists",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/lists",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("lists",tinymce.plugins.Lists)}(),function(){function h(a){var b,c,d;if(a&&!a.splice){c=[];for(d=0;!0;d++){if(!a[d])break;c[d]=a[d]}return c}return a}var a=tinymce.explode("id,name,width,height,style,align,class,hspace,vspace,bgcolor,type"),b=tinymce.makeMap(a.join(",")),c=tinymce.html.Node,d,e,f=tinymce.util.JSON,g;d=[["Flash","d27cdb6e-ae6d-11cf-96b8-444553540000","application/x-shockwave-flash","http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"],["ShockWave","166b1bca-3f9c-11cf-8075-444553540000","application/x-director","http://download.macromedia.com/pub/shockwave/cabs/director/sw.cab#version=8,5,1,0"],["WindowsMedia","6bf52a52-394a-11d3-b153-00c04f79faa6,22d6f312-b0f6-11d0-94ab-0080c74c7e95,05589fa1-c356-11ce-bf01-00aa0055595a","application/x-mplayer2","http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701"],["QuickTime","02bf25d5-8c17-4b23-bc80-d3488abddc6b","video/quicktime","http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0"],["RealMedia","cfcdaa03-8be4-11cf-b84b-0020afbbccfa","audio/x-pn-realaudio-plugin","http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"],["Java","8ad9c840-044e-11d1-b3e9-00805f499d93","application/x-java-applet","http://java.sun.com/products/plugin/autodl/jinstall-1_5_0-windows-i586.cab#Version=1,5,0,0"],["Silverlight","dfeaf541-f3e1-4c24-acac-99c30715084a","application/x-silverlight-2"],["Iframe"],["Video"],["EmbeddedAudio"],["Audio"]],tinymce.create("tinymce.plugins.MediaPlugin",{init:function(b,c){function m(a){return a&&a.nodeName==="IMG"&&b.dom.hasClass(a,"mceItemMedia")}var g=this,h={},i,j,k,l;g.editor=b,g.url=c,e="";for(i=0;i<d.length;i++){l=d[i][0],k={name:l,clsids:tinymce.explode(d[i][1]||""),mimes:tinymce.explode(d[i][2]||""),codebase:d[i][3]};for(j=0;j<k.clsids.length;j++)h["clsid:"+k.clsids[j]]=k;for(j=0;j<k.mimes.length;j++)h[k.mimes[j]]=k;h["mceItem"+l]=k,h[l.toLowerCase()]=k,e+=(e?"|":"")+l}tinymce.each(b.getParam("media_types","video=mp4,m4v,ogv,webm;silverlight=xap;flash=swf,flv;shockwave=dcr;quicktime=mov,qt,mpg,mpeg;shockwave=dcr;windowsmedia=avi,wmv,wm,asf,asx,wmx,wvx;realmedia=rm,ra,ram;java=jar;audio=mp3,ogg").split(";"),function(a){var b,c,d;a=a.split(/=/),c=tinymce.explode(a[1].toLowerCase());for(b=0;b<c.length;b++)d=h[a[0].toLowerCase()],d&&(h[c[b]]=d)}),e=new RegExp("write("+e+")\\(([^)]+)\\)"),g.lookup=h,b.onPreInit.add(function(){b.schema.addValidElements("object[id|style|width|height|classid|codebase|*],param[name|value],embed[id|style|width|height|type|src|*],video[*],audio[*],source[*]"),b.parser.addNodeFilter("object,embed,video,audio,script,iframe",function(a){var b=a.length;while(b--)g.objectToImg(a[b])}),b.serializer.addNodeFilter("img",function(a,b,c){var d=a.length,e;while(d--)e=a[d],(e.attr("class")||"").indexOf("mceItemMedia")!==-1&&g.imgToObject(e,c)})}),b.onInit.add(function(){b.theme&&b.theme.onResolveName&&b.theme.onResolveName.add(function(a,c){c.name==="img"&&b.dom.hasClass(c.node,"mceItemMedia")&&(c.name="media")}),b&&b.plugins.contextmenu&&b.plugins.contextmenu.onContextMenu.add(function(a,b,c){c.nodeName==="IMG"&&c.className.indexOf("mceItemMedia")!==-1&&b.add({title:"media.edit",icon:"media",cmd:"mceMedia"})})}),b.addCommand("mceMedia",function(){var d,e;e=b.selection.getNode(),m(e)&&(d=b.dom.getAttrib(e,"data-mce-json"),d&&(d=f.parse(d),tinymce.each(a,function(a){var c=b.dom.getAttrib(e,a);c&&(d[a]=c)}),d.type=g.getType(e.className).name.toLowerCase())),d||(d={type:"flash",video:{sources:[]},params:{}}),b.windowManager.open({file:c+"/media.htm",width:430+parseInt(b.getLang("media.delta_width",0)),height:500+parseInt(b.getLang("media.delta_height",0)),inline:1},{plugin_url:c,data:d})}),b.addButton("media",{title:"media.desc",cmd:"mceMedia"}),b.onNodeChange.add(function(a,b,c){b.setActive("media",m(c))})},convertUrl:function(a,b){var c=this,d=c.editor,e=d.settings,f=e.url_converter,g=e.url_converter_scope||c;return a?b?d.documentBaseURI.toAbsolute(a):f.call(g,a,"src","object"):a},getInfo:function(){return{longname:"Media",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/media",version:tinymce.majorVersion+"."+tinymce.minorVersion}},dataToImg:function(a,b){var c=this,d=c.editor,e=d.documentBaseURI,g,i,j,k;a.params.src=c.convertUrl(a.params.src,b),i=a.video.attrs,i&&(i.src=c.convertUrl(i.src,b)),i&&(i.poster=c.convertUrl(i.poster,b)),g=h(a.video.sources);if(g)for(k=0;k<g.length;k++)g[k].src=c.convertUrl(g[k].src,b);return j=c.editor.dom.create("img",{id:a.id,style:a.style,align:a.align,hspace:a.hspace,vspace:a.vspace,src:c.editor.theme.url+"/img/trans.gif","class":"mceItemMedia mceItem"+c.getType(a.type).name,"data-mce-json":f.serialize(a,"'")}),j.width=a.width||(a.type=="audio"?"300":"320"),j.height=a.height||(a.type=="audio"?"32":"240"),j},dataToHtml:function(a,b){return this.editor.serializer.serialize(this.dataToImg(a,b),{forced_root_block:"",force_absolute:b})},htmlToData:function(b){var c,d,e;return e={type:"flash",video:{sources:[]},params:{}},c=this.editor.parser.parse(b),d=c.getAll("img")[0],d&&(e=f.parse(d.attr("data-mce-json")),e.type=this.getType(d.attr("class")).name.toLowerCase(),tinymce.each(a,function(a){var b=d.attr(a);b&&(e[a]=b)})),e},getType:function(a){var b,c,d;c=tinymce.explode(a," ");for(b=0;b<c.length;b++){d=this.lookup[c[b]];if(d)return d}},imgToObject:function(b,d){function B(a,b){var c,d,f,h,i;i=g.getParam("flash_video_player_url",e.convertUrl(e.url+"/moxieplayer.swf")),i&&(c=g.documentBaseURI,o.params.src=i,g.getParam("flash_video_player_absvideourl",!0)&&(a=c.toAbsolute(a||"",!0),b=c.toAbsolute(b||"",!0)),f="",d=g.getParam("flash_video_player_flashvars",{url:"$url",poster:"$poster"}),tinymce.each(d,function(c,d){c=c.replace(/\$url/,a||""),c=c.replace(/\$poster/,b||""),c.length>0&&(f+=(f?"&":"")+d+"="+escape(c))}),f.length&&(o.params.flashvars=f),h=g.getParam("flash_video_player_params",{allowfullscreen:!0,allowscriptaccess:!0}),tinymce.each(h,function(a,b){o.params[b]=""+a}))}var e=this,g=e.editor,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;o=b.attr("data-mce-json");if(!o)return;o=f.parse(o),t=this.getType(b.attr("class")),z=b.attr("data-mce-style"),z||(z=b.attr("style"),z&&(z=g.dom.serializeStyle(g.dom.parseStyle(z,"img"))));if(t.name==="Iframe"){x=new c("iframe",1),tinymce.each(a,function(a){var c=b.attr(a);a=="class"&&c&&(c=c.replace(/mceItem.+ ?/g,"")),c&&c.length>0&&x.attr(a,c)});for(m in o.params)x.attr(m,o.params[m]);x.attr({style:z,src:o.params.src}),b.replace(x);return}if(this.editor.settings.media_use_script){x=(new c("script",1)).attr("type","text/javascript"),n=new c("#text",3),n.value="write"+t.name+"("+f.serialize(tinymce.extend(o.params,{width:b.attr("width"),height:b.attr("height")}))+");",x.append(n),b.replace(x);return}if(t.name==="Video"&&o.video.sources[0]){i=(new c("video",1)).attr(tinymce.extend({id:b.attr("id"),width:b.attr("width"),height:b.attr("height"),style:z},o.video.attrs)),o.video.attrs&&(y=o.video.attrs.poster),q=o.video.sources=h(o.video.sources);for(u=0;u<q.length;u++)/\.mp4$/.test(q[u].src)&&(w=q[u].src);q[0].type||(i.attr("src",q[0].src),q.splice(0,1));for(u=0;u<q.length;u++)p=(new c("source",1)).attr(q[u]),p.shortEnded=!0,i.append(p);w?(B(w,y),t=e.getType("flash")):o.params.src=""}if(t.name==="Audio"&&o.video.sources[0]){A=(new c("audio",1)).attr(tinymce.extend({id:b.attr("id"),width:b.attr("width"),height:b.attr("height"),style:z},o.video.attrs)),o.video.attrs&&(y=o.video.attrs.poster),q=o.video.sources=h(o.video.sources),q[0].type||(A.attr("src",q[0].src),q.splice(0,1));for(u=0;u<q.length;u++)p=(new c("source",1)).attr(q[u]),p.shortEnded=!0,A.append(p);o.params.src=""}if(t.name==="EmbeddedAudio"){k=new c("embed",1),k.shortEnded=!0,k.attr({id:b.attr("id"),width:b.attr("width"),height:b.attr("height"),style:z,type:b.attr("type")});for(m in o.params)k.attr(m,o.params[m]);tinymce.each(a,function(a){o[a]&&a!="type"&&k.attr(a,o[a])}),o.params.src=""}if(o.params.src){/\.flv$/i.test(o.params.src)&&B(o.params.src,""),d&&d.force_absolute&&(o.params.src=g.documentBaseURI.toAbsolute(o.params.src)),j=(new c("object",1)).attr({id:b.attr("id"),width:b.attr("width"),height:b.attr("height"),style:z}),tinymce.each(a,function(a){var b=o[a];a=="class"&&b&&(b=b.replace(/mceItem.+ ?/g,"")),b&&a!="type"&&j.attr(a,b)});for(m in o.params)s=new c("param",1),s.shortEnded=!0,n=o.params[m],m==="src"&&t.name==="WindowsMedia"&&(m="url"),s.attr({name:m,value:n}),j.append(s);if(this.editor.getParam("media_strict",!0))j.attr({data:o.params.src,type:t.mimes[0]});else{j.attr({classid:"clsid:"+t.clsids[0],codebase:t.codebase}),k=new c("embed",1),k.shortEnded=!0,k.attr({id:b.attr("id"),width:b.attr("width"),height:b.attr("height"),style:z,type:t.mimes[0]});for(m in o.params)k.attr(m,o.params[m]);tinymce.each(a,function(a){o[a]&&a!="type"&&k.attr(a,o[a])}),j.append(k)}o.object_html&&(n=new c("#text",3),n.raw=!0,n.value=o.object_html,j.append(n)),i&&i.append(j)}i&&o.video_html&&(n=new c("#text",3),n.raw=!0,n.value=o.video_html,i.append(n)),A&&o.video_html&&(n=new c("#text",3),n.raw=!0,n.value=o.video_html,A.append(n));var C=i||A||j||k;C?b.replace(C):b.remove()},objectToImg:function(d){function H(a){return(new tinymce.html.Serializer({inner:!0,validate:!1})).serialize(a)}function I(a,b){return y[(a.attr(b)||"").toLowerCase()]}function J(a){var b=a.replace(/^.*\.([^.]+)$/,"$1");return y[b.toLowerCase()||""]}var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=this.lookup,z,A,B=this.editor.settings.url_converter,C=this.editor.settings.url_converter_scope,D,E,F,G;if(!d.parent)return;if(d.name==="script"){d.firstChild&&(z=e.exec(d.firstChild.value));if(!z)return;x=z[1],w={video:{},params:f.parse(z[2])},n=w.params.width,o=w.params.height}w=w||{video:{},params:{}},k=new c("img",1),k.attr({src:this.editor.theme.url+"/img/trans.gif"}),l=d.name;if(l==="video"||l=="audio"){i=d,g=d.getAll("object")[0],h=d.getAll("embed")[0],n=i.attr("width"),o=i.attr("height"),m=i.attr("id"),w.video={attrs:{},sources:[]},A=w.video.attrs;for(l in i.attributes.map)A[l]=i.attributes.map[l];u=d.attr("src"),u&&w.video.sources.push({src:B.call(C,u,"src",d.name)}),v=i.getAll("source");for(q=0;q<v.length;q++)u=v[q].remove(),w.video.sources.push({src:B.call(C,u.attr("src"),"src","source"),type:u.attr("type"),media:u.attr("media")});A.poster&&(A.poster=B.call(C,A.poster,"poster",d.name))}d.name==="object"&&(g=d,h=d.getAll("embed")[0]),d.name==="embed"&&(h=d),d.name==="iframe"&&(j=d,x="Iframe");if(g){n=n||g.attr("width"),o=o||g.attr("height"),p=p||g.attr("style"),m=m||g.attr("id"),D=D||g.attr("hspace"),E=E||g.attr("vspace"),F=F||g.attr("align"),G=G||g.attr("bgcolor"),w.name=g.attr("name"),t=g.getAll("param");for(q=0;q<t.length;q++)s=t[q],l=s.remove().attr("name"),b[l]||(w.params[l]=s.attr("value"));w.params.src=w.params.src||g.attr("data")}if(h){n=n||h.attr("width"),o=o||h.attr("height"),p=p||h.attr("style"),m=m||h.attr("id"),D=D||h.attr("hspace"),E=E||h.attr("vspace"),F=F||h.attr("align"),G=G||h.attr("bgcolor");for(l in h.attributes.map)!b[l]&&!w.params[l]&&(w.params[l]=h.attributes.map[l])}if(j){n=j.attr("width"),o=j.attr("height"),p=p||j.attr("style"),m=j.attr("id"),D=j.attr("hspace"),E=j.attr("vspace"),F=j.attr("align"),G=j.attr("bgcolor"),tinymce.each(a,function(a){k.attr(a,j.attr(a))});for(l in j.attributes.map)!b[l]&&!w.params[l]&&(w.params[l]=j.attributes.map[l])}w.params.movie&&(w.params.src=w.params.src||w.params.movie,delete w.params.movie),w.params.src&&(w.params.src=B.call(C,w.params.src,"src","object")),i&&(d.name==="video"?x=y.video.name:d.name==="audio"&&(x=y.audio.name)),g&&!x&&(x=(I(g,"clsid")||I(g,"classid")||I(g,"type")||{}).name),h&&!x&&(x=(I(h,"type")||J(w.params.src)||{}).name),h&&x=="EmbeddedAudio"&&(w.params.type=h.attr("type")),d.replace(k),h&&h.remove(),g&&(r=H(g.remove()),r&&(w.object_html=r)),i&&(r=H(i.remove()),r&&(w.video_html=r)),w.hspace=D,w.vspace=E,w.align=F,w.bgcolor=G,k.attr({id:m,"class":"mceItemMedia mceItem"+(x||"Flash"),style:p,width:n||(d.name=="audio"?"300":"320"),height:o||(d.name=="audio"?"32":"240"),hspace:D,vspace:E,align:F,bgcolor:G,"data-mce-json":f.serialize(w,"'")})}}),tinymce.PluginManager.add("media",tinymce.plugins.MediaPlugin)}(),function(){function h(a){var b,c,d;if(a&&!a.splice){c=[];for(d=0;!0;d++){if(!a[d])break;c[d]=a[d]}return c}return a}var a=tinymce.explode("id,name,width,height,style,align,class,hspace,vspace,bgcolor,type"),b=tinymce.makeMap(a.join(",")),c=tinymce.html.Node,d,e,f=tinymce.util.JSON,g;d=[["Flash","d27cdb6e-ae6d-11cf-96b8-444553540000","application/x-shockwave-flash","http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"],["ShockWave","166b1bca-3f9c-11cf-8075-444553540000","application/x-director","http://download.macromedia.com/pub/shockwave/cabs/director/sw.cab#version=8,5,1,0"],["WindowsMedia","6bf52a52-394a-11d3-b153-00c04f79faa6,22d6f312-b0f6-11d0-94ab-0080c74c7e95,05589fa1-c356-11ce-bf01-00aa0055595a","application/x-mplayer2","http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701"],["QuickTime","02bf25d5-8c17-4b23-bc80-d3488abddc6b","video/quicktime","http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0"],["RealMedia","cfcdaa03-8be4-11cf-b84b-0020afbbccfa","audio/x-pn-realaudio-plugin","http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"],["Java","8ad9c840-044e-11d1-b3e9-00805f499d93","application/x-java-applet","http://java.sun.com/products/plugin/autodl/jinstall-1_5_0-windows-i586.cab#Version=1,5,0,0"],["Silverlight","dfeaf541-f3e1-4c24-acac-99c30715084a","application/x-silverlight-2"],["Iframe"],["Video"],["EmbeddedAudio"],["Audio"]],tinymce.create("tinymce.plugins.MediaPlugin",{init:function(b,c){function m(a){return a&&a.nodeName==="IMG"&&b.dom.hasClass(a,"mceItemMedia")}var g=this,h={},i,j,k,l;g.editor=b,g.url=c,e="";for(i=0;i<d.length;i++){l=d[i][0],k={name:l,clsids:tinymce.explode(d[i][1]||""),mimes:tinymce.explode(d[i][2]||""),codebase:d[i][3]};for(j=0;j<k.clsids.length;j++)h["clsid:"+k.clsids[j]]=k;for(j=0;j<k.mimes.length;j++)h[k.mimes[j]]=k;h["mceItem"+l]=k,h[l.toLowerCase()]=k,e+=(e?"|":"")+l}tinymce.each(b.getParam("media_types","video=mp4,m4v,ogv,webm;silverlight=xap;flash=swf,flv;shockwave=dcr;quicktime=mov,qt,mpg,mpeg;shockwave=dcr;windowsmedia=avi,wmv,wm,asf,asx,wmx,wvx;realmedia=rm,ra,ram;java=jar;audio=mp3,ogg"
).split(";"),function(a){var b,c,d;a=a.split(/=/),c=tinymce.explode(a[1].toLowerCase());for(b=0;b<c.length;b++)d=h[a[0].toLowerCase()],d&&(h[c[b]]=d)}),e=new RegExp("write("+e+")\\(([^)]+)\\)"),g.lookup=h,b.onPreInit.add(function(){b.schema.addValidElements("object[id|style|width|height|classid|codebase|*],param[name|value],embed[id|style|width|height|type|src|*],video[*],audio[*],source[*]"),b.parser.addNodeFilter("object,embed,video,audio,script,iframe",function(a){var b=a.length;while(b--)g.objectToImg(a[b])}),b.serializer.addNodeFilter("img",function(a,b,c){var d=a.length,e;while(d--)e=a[d],(e.attr("class")||"").indexOf("mceItemMedia")!==-1&&g.imgToObject(e,c)})}),b.onInit.add(function(){b.theme&&b.theme.onResolveName&&b.theme.onResolveName.add(function(a,c){c.name==="img"&&b.dom.hasClass(c.node,"mceItemMedia")&&(c.name="media")}),b&&b.plugins.contextmenu&&b.plugins.contextmenu.onContextMenu.add(function(a,b,c){c.nodeName==="IMG"&&c.className.indexOf("mceItemMedia")!==-1&&b.add({title:"media.edit",icon:"media",cmd:"mceMedia"})})}),b.addCommand("mceMedia",function(){var d,e;e=b.selection.getNode(),m(e)&&(d=b.dom.getAttrib(e,"data-mce-json"),d&&(d=f.parse(d),tinymce.each(a,function(a){var c=b.dom.getAttrib(e,a);c&&(d[a]=c)}),d.type=g.getType(e.className).name.toLowerCase())),d||(d={type:"flash",video:{sources:[]},params:{}}),b.windowManager.open({file:c+"/media.htm",width:430+parseInt(b.getLang("media.delta_width",0)),height:500+parseInt(b.getLang("media.delta_height",0)),inline:1},{plugin_url:c,data:d})}),b.addButton("media",{title:"media.desc",cmd:"mceMedia"}),b.onNodeChange.add(function(a,b,c){b.setActive("media",m(c))})},convertUrl:function(a,b){var c=this,d=c.editor,e=d.settings,f=e.url_converter,g=e.url_converter_scope||c;return a?b?d.documentBaseURI.toAbsolute(a):f.call(g,a,"src","object"):a},getInfo:function(){return{longname:"Media",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/media",version:tinymce.majorVersion+"."+tinymce.minorVersion}},dataToImg:function(a,b){var c=this,d=c.editor,e=d.documentBaseURI,g,i,j,k;a.params.src=c.convertUrl(a.params.src,b),i=a.video.attrs,i&&(i.src=c.convertUrl(i.src,b)),i&&(i.poster=c.convertUrl(i.poster,b)),g=h(a.video.sources);if(g)for(k=0;k<g.length;k++)g[k].src=c.convertUrl(g[k].src,b);return j=c.editor.dom.create("img",{id:a.id,style:a.style,align:a.align,hspace:a.hspace,vspace:a.vspace,src:c.editor.theme.url+"/img/trans.gif","class":"mceItemMedia mceItem"+c.getType(a.type).name,"data-mce-json":f.serialize(a,"'")}),j.width=a.width||(a.type=="audio"?"300":"320"),j.height=a.height||(a.type=="audio"?"32":"240"),j},dataToHtml:function(a,b){return this.editor.serializer.serialize(this.dataToImg(a,b),{forced_root_block:"",force_absolute:b})},htmlToData:function(b){var c,d,e;return e={type:"flash",video:{sources:[]},params:{}},c=this.editor.parser.parse(b),d=c.getAll("img")[0],d&&(e=f.parse(d.attr("data-mce-json")),e.type=this.getType(d.attr("class")).name.toLowerCase(),tinymce.each(a,function(a){var b=d.attr(a);b&&(e[a]=b)})),e},getType:function(a){var b,c,d;c=tinymce.explode(a," ");for(b=0;b<c.length;b++){d=this.lookup[c[b]];if(d)return d}},imgToObject:function(b,d){function B(a,b){var c,d,f,h,i;i=g.getParam("flash_video_player_url",e.convertUrl(e.url+"/moxieplayer.swf")),i&&(c=g.documentBaseURI,o.params.src=i,g.getParam("flash_video_player_absvideourl",!0)&&(a=c.toAbsolute(a||"",!0),b=c.toAbsolute(b||"",!0)),f="",d=g.getParam("flash_video_player_flashvars",{url:"$url",poster:"$poster"}),tinymce.each(d,function(c,d){c=c.replace(/\$url/,a||""),c=c.replace(/\$poster/,b||""),c.length>0&&(f+=(f?"&":"")+d+"="+escape(c))}),f.length&&(o.params.flashvars=f),h=g.getParam("flash_video_player_params",{allowfullscreen:!0,allowscriptaccess:!0}),tinymce.each(h,function(a,b){o.params[b]=""+a}))}var e=this,g=e.editor,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;o=b.attr("data-mce-json");if(!o)return;o=f.parse(o),t=this.getType(b.attr("class")),z=b.attr("data-mce-style"),z||(z=b.attr("style"),z&&(z=g.dom.serializeStyle(g.dom.parseStyle(z,"img"))));if(t.name==="Iframe"){x=new c("iframe",1),tinymce.each(a,function(a){var c=b.attr(a);a=="class"&&c&&(c=c.replace(/mceItem.+ ?/g,"")),c&&c.length>0&&x.attr(a,c)});for(m in o.params)x.attr(m,o.params[m]);x.attr({style:z,src:o.params.src}),b.replace(x);return}if(this.editor.settings.media_use_script){x=(new c("script",1)).attr("type","text/javascript"),n=new c("#text",3),n.value="write"+t.name+"("+f.serialize(tinymce.extend(o.params,{width:b.attr("width"),height:b.attr("height")}))+");",x.append(n),b.replace(x);return}if(t.name==="Video"&&o.video.sources[0]){i=(new c("video",1)).attr(tinymce.extend({id:b.attr("id"),width:b.attr("width"),height:b.attr("height"),style:z},o.video.attrs)),o.video.attrs&&(y=o.video.attrs.poster),q=o.video.sources=h(o.video.sources);for(u=0;u<q.length;u++)/\.mp4$/.test(q[u].src)&&(w=q[u].src);q[0].type||(i.attr("src",q[0].src),q.splice(0,1));for(u=0;u<q.length;u++)p=(new c("source",1)).attr(q[u]),p.shortEnded=!0,i.append(p);w?(B(w,y),t=e.getType("flash")):o.params.src=""}if(t.name==="Audio"&&o.video.sources[0]){A=(new c("audio",1)).attr(tinymce.extend({id:b.attr("id"),width:b.attr("width"),height:b.attr("height"),style:z},o.video.attrs)),o.video.attrs&&(y=o.video.attrs.poster),q=o.video.sources=h(o.video.sources),q[0].type||(A.attr("src",q[0].src),q.splice(0,1));for(u=0;u<q.length;u++)p=(new c("source",1)).attr(q[u]),p.shortEnded=!0,A.append(p);o.params.src=""}if(t.name==="EmbeddedAudio"){k=new c("embed",1),k.shortEnded=!0,k.attr({id:b.attr("id"),width:b.attr("width"),height:b.attr("height"),style:z,type:b.attr("type")});for(m in o.params)k.attr(m,o.params[m]);tinymce.each(a,function(a){o[a]&&a!="type"&&k.attr(a,o[a])}),o.params.src=""}if(o.params.src){/\.flv$/i.test(o.params.src)&&B(o.params.src,""),d&&d.force_absolute&&(o.params.src=g.documentBaseURI.toAbsolute(o.params.src)),j=(new c("object",1)).attr({id:b.attr("id"),width:b.attr("width"),height:b.attr("height"),style:z}),tinymce.each(a,function(a){var b=o[a];a=="class"&&b&&(b=b.replace(/mceItem.+ ?/g,"")),b&&a!="type"&&j.attr(a,b)});for(m in o.params)s=new c("param",1),s.shortEnded=!0,n=o.params[m],m==="src"&&t.name==="WindowsMedia"&&(m="url"),s.attr({name:m,value:n}),j.append(s);if(this.editor.getParam("media_strict",!0))j.attr({data:o.params.src,type:t.mimes[0]});else{j.attr({classid:"clsid:"+t.clsids[0],codebase:t.codebase}),k=new c("embed",1),k.shortEnded=!0,k.attr({id:b.attr("id"),width:b.attr("width"),height:b.attr("height"),style:z,type:t.mimes[0]});for(m in o.params)k.attr(m,o.params[m]);tinymce.each(a,function(a){o[a]&&a!="type"&&k.attr(a,o[a])}),j.append(k)}o.object_html&&(n=new c("#text",3),n.raw=!0,n.value=o.object_html,j.append(n)),i&&i.append(j)}i&&o.video_html&&(n=new c("#text",3),n.raw=!0,n.value=o.video_html,i.append(n)),A&&o.video_html&&(n=new c("#text",3),n.raw=!0,n.value=o.video_html,A.append(n));var C=i||A||j||k;C?b.replace(C):b.remove()},objectToImg:function(d){function H(a){return(new tinymce.html.Serializer({inner:!0,validate:!1})).serialize(a)}function I(a,b){return y[(a.attr(b)||"").toLowerCase()]}function J(a){var b=a.replace(/^.*\.([^.]+)$/,"$1");return y[b.toLowerCase()||""]}var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=this.lookup,z,A,B=this.editor.settings.url_converter,C=this.editor.settings.url_converter_scope,D,E,F,G;if(!d.parent)return;if(d.name==="script"){d.firstChild&&(z=e.exec(d.firstChild.value));if(!z)return;x=z[1],w={video:{},params:f.parse(z[2])},n=w.params.width,o=w.params.height}w=w||{video:{},params:{}},k=new c("img",1),k.attr({src:this.editor.theme.url+"/img/trans.gif"}),l=d.name;if(l==="video"||l=="audio"){i=d,g=d.getAll("object")[0],h=d.getAll("embed")[0],n=i.attr("width"),o=i.attr("height"),m=i.attr("id"),w.video={attrs:{},sources:[]},A=w.video.attrs;for(l in i.attributes.map)A[l]=i.attributes.map[l];u=d.attr("src"),u&&w.video.sources.push({src:B.call(C,u,"src",d.name)}),v=i.getAll("source");for(q=0;q<v.length;q++)u=v[q].remove(),w.video.sources.push({src:B.call(C,u.attr("src"),"src","source"),type:u.attr("type"),media:u.attr("media")});A.poster&&(A.poster=B.call(C,A.poster,"poster",d.name))}d.name==="object"&&(g=d,h=d.getAll("embed")[0]),d.name==="embed"&&(h=d),d.name==="iframe"&&(j=d,x="Iframe");if(g){n=n||g.attr("width"),o=o||g.attr("height"),p=p||g.attr("style"),m=m||g.attr("id"),D=D||g.attr("hspace"),E=E||g.attr("vspace"),F=F||g.attr("align"),G=G||g.attr("bgcolor"),w.name=g.attr("name"),t=g.getAll("param");for(q=0;q<t.length;q++)s=t[q],l=s.remove().attr("name"),b[l]||(w.params[l]=s.attr("value"));w.params.src=w.params.src||g.attr("data")}if(h){n=n||h.attr("width"),o=o||h.attr("height"),p=p||h.attr("style"),m=m||h.attr("id"),D=D||h.attr("hspace"),E=E||h.attr("vspace"),F=F||h.attr("align"),G=G||h.attr("bgcolor");for(l in h.attributes.map)!b[l]&&!w.params[l]&&(w.params[l]=h.attributes.map[l])}if(j){n=j.attr("width"),o=j.attr("height"),p=p||j.attr("style"),m=j.attr("id"),D=j.attr("hspace"),E=j.attr("vspace"),F=j.attr("align"),G=j.attr("bgcolor"),tinymce.each(a,function(a){k.attr(a,j.attr(a))});for(l in j.attributes.map)!b[l]&&!w.params[l]&&(w.params[l]=j.attributes.map[l])}w.params.movie&&(w.params.src=w.params.src||w.params.movie,delete w.params.movie),w.params.src&&(w.params.src=B.call(C,w.params.src,"src","object")),i&&(d.name==="video"?x=y.video.name:d.name==="audio"&&(x=y.audio.name)),g&&!x&&(x=(I(g,"clsid")||I(g,"classid")||I(g,"type")||{}).name),h&&!x&&(x=(I(h,"type")||J(w.params.src)||{}).name),h&&x=="EmbeddedAudio"&&(w.params.type=h.attr("type")),d.replace(k),h&&h.remove(),g&&(r=H(g.remove()),r&&(w.object_html=r)),i&&(r=H(i.remove()),r&&(w.video_html=r)),w.hspace=D,w.vspace=E,w.align=F,w.bgcolor=G,k.attr({id:m,"class":"mceItemMedia mceItem"+(x||"Flash"),style:p,width:n||(d.name=="audio"?"300":"320"),height:o||(d.name=="audio"?"32":"240"),hspace:D,vspace:E,align:F,bgcolor:G,"data-mce-json":f.serialize(w,"'")})}}),tinymce.PluginManager.add("media",tinymce.plugins.MediaPlugin)}(),function(){function b(a){return document.getElementById(a)}function c(a){var b,d,e,f;if(null==a||"object"!=typeof a)return a;if("length"in a){e=[];for(b=0,d=a.length;b<d;++b)e[b]=c(a[b]);return e}e={};for(f in a)a.hasOwnProperty(f)&&(e[f]=c(a[f]));return e}function d(a){var c=b(a);return c.nodeName=="SELECT"?c.options[c.selectedIndex].value:c.type=="checkbox"?c.checked:c.value}function e(a,c,d){if(typeof c!="undefined"){var e=b(a);e.nodeName=="SELECT"?selectByValue(document.forms[0],a,c):e.type=="checkbox"?(typeof c=="string"&&(c=c.toLowerCase(),c=!d&&c==="true"||d&&c===d.toLowerCase()),e.checked=!!c):e.value=c}}var a;(a=tinyMCEPopup.getParam("media_external_list_url"))&&document.write('<script language="javascript" type="text/javascript" src="'+tinyMCEPopup.editor.documentBaseURI.toAbsolute(a)+'"></script>'),window.Media={init:function(){var a,d,e=this;e.editor=d=tinyMCEPopup.editor,b("filebrowsercontainer").innerHTML=getBrowserHTML("filebrowser","src","media","media"),b("qtsrcfilebrowsercontainer").innerHTML=getBrowserHTML("qtsrcfilebrowser","quicktime_qtsrc","media","media"),b("bgcolor_pickcontainer").innerHTML=getColorPickerHTML("bgcolor_pick","bgcolor"),b("video_altsource1_filebrowser").innerHTML=getBrowserHTML("video_filebrowser_altsource1","video_altsource1","media","media"),b("video_altsource2_filebrowser").innerHTML=getBrowserHTML("video_filebrowser_altsource2","video_altsource2","media","media"),b("audio_altsource1_filebrowser").innerHTML=getBrowserHTML("audio_filebrowser_altsource1","audio_altsource1","media","media"),b("audio_altsource2_filebrowser").innerHTML=getBrowserHTML("audio_filebrowser_altsource2","audio_altsource2","media","media"),b("video_poster_filebrowser").innerHTML=getBrowserHTML("filebrowser_poster","video_poster","media","image"),a=e.getMediaListHTML("medialist","src","media","media"),a==""?b("linklistrow").style.display="none":b("linklistcontainer").innerHTML=a,isVisible("filebrowser")&&(b("src").style.width="230px"),isVisible("video_filebrowser_altsource1")&&(b("video_altsource1").style.width="220px"),isVisible("video_filebrowser_altsource2")&&(b("video_altsource2").style.width="220px"),isVisible("audio_filebrowser_altsource1")&&(b("audio_altsource1").style.width="220px"),isVisible("audio_filebrowser_altsource2")&&(b("audio_altsource2").style.width="220px"),isVisible("filebrowser_poster")&&(b("video_poster").style.width="220px"),d.dom.setOuterHTML(b("media_type"),e.getMediaTypeHTML(d)),e.setDefaultDialogSettings(d),e.data=c(tinyMCEPopup.getWindowArg("data")),e.dataToForm(),e.preview(),updateColor("bgcolor_pick","bgcolor")},insert:function(){var a=tinyMCEPopup.editor;this.formToData(),a.execCommand("mceRepaint"),tinyMCEPopup.restoreSelection(),a.selection.setNode(a.plugins.media.dataToImg(this.data)),tinyMCEPopup.close()},preview:function(){b("prev").innerHTML=this.editor.plugins.media.dataToHtml(this.data,!0)},moveStates:function(a,c){function m(a){var b={};return a&&tinymce.each(a.split("&"),function(a){var c=a.split("=");b[unescape(c[0])]=unescape(c[1])}),b}function n(b,c){var g,h,i,j,k;if(b==f.type||b=="global"){c=tinymce.explode(c);for(g=0;g<c.length;g++)h=c[g],i=b=="global"?h:b+"_"+h,b=="global"?k=f:b=="video"||b=="audio"?(k=f.video.attrs,!k&&!a&&(f.video.attrs=k={})):k=f.params,k&&(a?e(i,k[h],b=="video"||b=="audio"?h:""):(delete k[h],j=d(i),(b=="video"||b=="audio")&&j===!0&&(j=h),l[i]?j!==l[i]&&(j=""+j,k[h]=j):j&&(j=""+j,k[h]=j)))}}var f=this.data,g=this.editor,h=g.plugins.media,i,j,k,l,j;l={quicktime_autoplay:!0,quicktime_controller:!0,flash_play:!0,flash_loop:!0,flash_menu:!0,windowsmedia_autostart:!0,windowsmedia_enablecontextmenu:!0,windowsmedia_invokeurls:!0,realmedia_autogotourl:!0,realmedia_imagestatus:!0};if(!a){f.type=b("media_type").options[b("media_type").selectedIndex].value,f.width=d("width"),f.height=d("height"),j=d("src");if(c=="src"){i=j.replace(/^.*\.([^.]+)$/,"$1");if(k=h.getType(i))f.type=k.name.toLowerCase();e("media_type",f.type)}if(f.type=="video"||f.type=="audio")f.video.sources||(f.video.sources=[]),f.video.sources[0]={src:d("src")}}b("video_options").style.display="none",b("audio_options").style.display="none",b("flash_options").style.display="none",b("quicktime_options").style.display="none",b("shockwave_options").style.display="none",b("windowsmedia_options").style.display="none",b("realmedia_options").style.display="none",b("embeddedaudio_options").style.display="none",b(f.type+"_options")&&(b(f.type+"_options").style.display="block"),e("media_type",f.type),n("flash","play,loop,menu,swliveconnect,quality,scale,salign,wmode,base,flashvars"),n("quicktime","loop,autoplay,cache,controller,correction,enablejavascript,kioskmode,autohref,playeveryframe,targetcache,scale,starttime,endtime,target,qtsrcchokespeed,volume,qtsrc"),n("shockwave","sound,progress,autostart,swliveconnect,swvolume,swstretchstyle,swstretchhalign,swstretchvalign"),n("windowsmedia","autostart,enabled,enablecontextmenu,fullscreen,invokeurls,mute,stretchtofit,windowlessvideo,balance,baseurl,captioningid,currentmarker,currentposition,defaultframe,playcount,rate,uimode,volume"),n("realmedia","autostart,loop,autogotourl,center,imagestatus,maintainaspect,nojava,prefetch,shuffle,console,controls,numloop,scriptcallbacks"),n("video","poster,autoplay,loop,muted,preload,controls"),n("audio","autoplay,loop,preload,controls"),n("embeddedaudio","autoplay,loop,controls"),n("global","id,name,vspace,hspace,bgcolor,align,width,height"),a?f.type=="video"?(f.video.sources[0]&&e("src",f.video.sources[0].src),j=f.video.sources[1],j&&e("video_altsource1",j.src),j=f.video.sources[2],j&&e("video_altsource2",j.src)):f.type=="audio"?(f.video.sources[0]&&e("src",f.video.sources[0].src),j=f.video.sources[1],j&&e("audio_altsource1",j.src),j=f.video.sources[2],j&&e("audio_altsource2",j.src)):(f.type=="flash"&&tinymce.each(g.getParam("flash_video_player_flashvars",{url:"$url",poster:"$poster"}),function(a,b){a=="$url"&&(f.params.src=m(f.params.flashvars)[b]||f.params.src||"")}),e("src",f.params.src)):(j=d("src"),j.match(/youtu.be\/[a-z1-9.-_]+/)&&(f.width=425,f.height=350,f.params.frameborder="0",f.type="iframe",j="http://www.youtube.com/embed/"+j.match(/youtu.be\/([a-z1-9.-_]+)/)[1],e("src",j),e("media_type",f.type)),j.match(/youtube.com(.+)v=([^&]+)/)&&(f.width=425,f.height=350,f.params.frameborder="0",f.type="iframe",j="http://www.youtube.com/embed/"+j.match(/v=([^&]+)/)[1],e("src",j),e("media_type",f.type)),j.match(/video.google.com(.+)docid=([^&]+)/)&&(f.width=425,f.height=326,f.type="flash",j="http://video.google.com/googleplayer.swf?docId="+j.match(/docid=([^&]+)/)[1]+"&hl=en",e("src",j),e("media_type",f.type)),f.type=="video"?(f.video.sources||(f.video.sources=[]),f.video.sources[0]={src:j},j=d("video_altsource1"),j&&(f.video.sources[1]={src:j}),j=d("video_altsource2"),j&&(f.video.sources[2]={src:j})):f.type=="audio"?(f.video.sources||(f.video.sources=[]),f.video.sources[0]={src:j},j=d("audio_altsource1"),j&&(f.video.sources[1]={src:j}),j=d("audio_altsource2"),j&&(f.video.sources[2]={src:j})):f.params.src=j,e("width",f.width||(f.type=="audio"?300:320)),e("height",f.height||(f.type=="audio"?32:240)))},dataToForm:function(){this.moveStates(!0)},formToData:function(a){(a=="width"||a=="height")&&this.changeSize(a),a=="source"?(this.moveStates(!1,a),e("source",this.editor.plugins.media.dataToHtml(this.data)),this.panel="source"):(this.panel=="source"&&(this.data=c(this.editor.plugins.media.htmlToData(d("source"))),this.dataToForm(),this.panel=""),this.moveStates(!1,a),this.preview())},beforeResize:function(){this.width=parseInt(d("width")||(this.data.type=="audio"?"300":"320"),10),this.height=parseInt(d("height")||(this.data.type=="audio"?"32":"240"),10)},changeSize:function(a){var c,f,g,h;b("constrain").checked&&(c=parseInt(d("width")||(this.data.type=="audio"?"300":"320"),10),f=parseInt(d("height")||(this.data.type=="audio"?"32":"240"),10),a=="width"?(this.height=Math.round(c/this.width*f),e("height",this.height)):(this.width=Math.round(f/this.height*c),e("width",this.width)))},getMediaListHTML:function(){if(typeof tinyMCEMediaList!="undefined"&&tinyMCEMediaList.length>0){var a="";a+='<select id="linklist" name="linklist" style="width: 250px" onchange="this.form.src.value=this.options[this.selectedIndex].value;Media.formToData(\'src\');">',a+='<option value="">---</option>';for(var b=0;b<tinyMCEMediaList.length;b++)a+='<option value="'+tinyMCEMediaList[b][1]+'">'+tinyMCEMediaList[b][0]+"</option>";return a+="</select>",a}return""},getMediaTypeHTML:function(a){function b(a){return'<option value="'+a+'">'+tinyMCEPopup.editor.translate("media_dlg."+a)+"</option>"}var c="";return c+='<select id="media_type" name="media_type" onchange="Media.formToData(\'type\');">',c+=b("video"),c+=b("audio"),c+=b("flash"),c+=b("quicktime"),c+=b("shockwave"),c+=b("windowsmedia"),c+=b("realmedia"),c+=b("iframe"),a.getParam("media_embedded_audio",!1)&&(c+=b("embeddedaudio")),c+="</select>",c},setDefaultDialogSettings:function(a){var b=a.getParam("media_dialog_defaults",{});tinymce.each(b,function(a,b){e(b,a)})}},tinyMCEPopup.requireLangPack(),tinyMCEPopup.onInit.add(function(){Media.init()})}(),tinyMCE.addI18n("en.media_dlg",{list:"List",file:"File/URL",advanced:"Advanced",general:"General",title:"Insert/Edit Embedded Media",align_top_left:"Top Left",align_center:"Center",align_left:"Left",align_bottom:"Bottom",align_right:"Right",align_top:"Top",qt_stream_warn:"Streamed RTSP resources should be added to the QT Source field under the Advanced tab.\nYou should also add a non-streamed version to the Source field.",qtsrc:"QT Source",progress:"Progress",sound:"Sound",swstretchvalign:"Stretch V-Align",swstretchhalign:"Stretch H-Align",swstretchstyle:"Stretch Style",scriptcallbacks:"Script Callbacks",align_top_right:"Top Right",uimode:"UI Mode",rate:"Rate",playcount:"Play Count",defaultframe:"Default Frame",currentposition:"Current Position",currentmarker:"Current Marker",captioningid:"Captioning ID",baseurl:"Base URL",balance:"Balance",windowlessvideo:"Windowless Video",stretchtofit:"Stretch to Fit",mute:"Mute",invokeurls:"Invoke URLs",fullscreen:"Full Screen",enabled:"Enabled",autostart:"Auto Start",volume:"Volume",target:"Target",qtsrcchokespeed:"Choke Speed",href:"HREF",endtime:"End Time",starttime:"Start Time",enablejavascript:"Enable JavaScript",correction:"No Correction",targetcache:"Target Cache",playeveryframe:"Play Every Frame",kioskmode:"Kiosk Mode",controller:"Controller",menu:"Show Menu",loop:"Loop",play:"Auto Play",hspace:"H-Space",vspace:"V-Space",class_name:"Class",name:"Name",id:"ID",type:"Type",size:"Dimensions",preview:"Preview",constrain_proportions:"Constrain Proportions",controls:"Controls",numloop:"Num Loops",console:"Console",cache:"Cache",autohref:"Auto HREF",liveconnect:"SWLiveConnect",flashvars:"Flash Vars",base:"Base",bgcolor:"Background",wmode:"WMode",salign:"SAlign",align:"Align",scale:"Scale",quality:"Quality",shuffle:"Shuffle",prefetch:"Prefetch",nojava:"No Java",maintainaspect:"Maintain Aspect",imagestatus:"Image Status",center:"Center",autogotourl:"Auto Goto URL",shockwave_options:"Shockwave Options",rmp_options:"Real Media Player Options",wmp_options:"Windows Media Player Options",qt_options:"QuickTime Options",flash_options:"Flash Options",hidden:"Hidden",align_bottom_left:"Bottom Left",align_bottom_right:"Bottom Right",html5_video_options:"HTML5 Video Options",altsource1:"Alternative source 1",altsource2:"Alternative source 2",preload:"Preload",poster:"Poster",source:"Source",html5_audio_options:"Audio Options",preload_none:"Don't Preload",preload_metadata:"Preload video metadata",preload_auto:"Let user's browser decide",embedded_audio_options:"Embedded Audio Options",video:"HTML5 Video",audio:"HTML5 Audio",flash:"Flash",quicktime:"QuickTime",shockwave:"Shockwave",windowsmedia:"Windows Media",realmedia:"Real Media",iframe:"Iframe",embeddedaudio:"Embedded Audio"}),function(){tinymce.create("tinymce.plugins.Nonbreaking",{init:function(a,b){var c=this;c.editor=a,a.addCommand("mceNonBreaking",function(){a.execCommand("mceInsertContent",!1,a.plugins.visualchars&&a.plugins.visualchars.state?'<span data-mce-bogus="1" class="mceItemHidden mceItemNbsp">&nbsp;</span>':"&nbsp;")}),a.addButton("nonbreaking",{title:"nonbreaking.nonbreaking_desc",cmd:"mceNonBreaking"}),a.getParam("nonbreaking_force_tab")&&a.onKeyDown.add(function(a,b){b.keyCode==9&&(b.preventDefault(),a.execCommand("mceNonBreaking"),a.execCommand("mceNonBreaking"),a.execCommand("mceNonBreaking"))})},getInfo:function(){return{longname:"Nonbreaking space",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/nonbreaking",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("nonbreaking",tinymce.plugins.Nonbreaking)}(),function(){tinymce.create("tinymce.plugins.Nonbreaking",{init:function(a,b){var c=this;c.editor=a,a.addCommand("mceNonBreaking",function(){a.execCommand("mceInsertContent",!1,a.plugins.visualchars&&a.plugins.visualchars.state?'<span data-mce-bogus="1" class="mceItemHidden mceItemNbsp">&nbsp;</span>':"&nbsp;")}),a.addButton("nonbreaking",{title:"nonbreaking.nonbreaking_desc",cmd:"mceNonBreaking"}),a.getParam("nonbreaking_force_tab")&&a.onKeyDown.add(function(a,b){b.keyCode==9&&(b.preventDefault(),a.execCommand("mceNonBreaking"),a.execCommand("mceNonBreaking"),a.execCommand("mceNonBreaking"))})},getInfo:function(){return{longname:"Nonbreaking space",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/nonbreaking",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("nonbreaking",tinymce.plugins.Nonbreaking)}(),function(){var a=tinymce.dom.Event;tinymce.create("tinymce.plugins.NonEditablePlugin",{init:function(a,b){var c=this,d,e,f;c.editor=a,d=a.getParam("noneditable_editable_class","mceEditable"),e=a.getParam("noneditable_noneditable_class","mceNonEditable"),a.onNodeChange.addToTop(function(a,b,d){var h,i;h=a.dom.getParent(a.selection.getStart(),function(b){return a.dom.hasClass(b,e)}),i=a.dom.getParent(a.selection.getEnd(),function(b){return a.dom.hasClass(b,e)});if(h||i)return f=1,c._setDisabled(1),!1;f==1&&(c._setDisabled(0),f=0)})},getInfo:function(){return{longname:"Non editable elements",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/noneditable",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_block:function(b,c){var d=c.keyCode;if(d>32&&d<41||d>111&&d<124)return;return a.cancel(c)},_setDisabled:function(a){var b=this,c=b.editor;tinymce.each(c.controlManager.controls,function(b){b.setDisabled(a)}),a!==b.disabled&&(a?(c.onKeyDown.addToTop(b._block),c.onKeyPress.addToTop(b._block),c.onKeyUp.addToTop(b._block),c.onPaste.addToTop(b._block),c.onContextMenu.addToTop(b._block)):(c.onKeyDown.remove(b._block),c.onKeyPress.remove(b._block),c.onKeyUp.remove(b._block),c.onPaste.remove(b._block),c.onContextMenu.remove(b._block)),b.disabled=a)}}),tinymce.PluginManager.add("noneditable",tinymce.plugins.NonEditablePlugin)}(),function(){var a=tinymce.dom.Event;tinymce.create("tinymce.plugins.NonEditablePlugin",{init:function(a,b){var c=this,d,e,f;c.editor=a,d=a.getParam("noneditable_editable_class","mceEditable"),e=a.getParam("noneditable_noneditable_class","mceNonEditable"),a.onNodeChange.addToTop(function(a,b,d){var g,h;g=a.dom.getParent(a.selection.getStart(),function(b){return a.dom.hasClass(b,e)}),h=a.dom.getParent(a.selection.getEnd(),function(b){return a.dom.hasClass(b,e)});if(g||h)return f=1,c._setDisabled(1),!1;f==1&&(c._setDisabled(0),f=0)})},getInfo:function(){return{longname:"Non editable elements",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/noneditable",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_block:function(b,c){var d=c.keyCode;if(d>32&&d<41||d>111&&d<124)return;return a.cancel(c)},_setDisabled:function(a){var b=this,c=b.editor;tinymce.each(c.controlManager.controls,function(b){b.setDisabled(a)}),a!==b.disabled&&(a?(c.onKeyDown.addToTop(b._block),c.onKeyPress.addToTop(b._block),c.onKeyUp.addToTop(b._block),c.onPaste.addToTop(b._block),c.onContextMenu.addToTop(b._block)):(c.onKeyDown.remove(b._block),c.onKeyPress.remove(b._block),c.onKeyUp.remove(b._block),c.onPaste.remove(b._block),c.onContextMenu.remove(b._block)),b.disabled=a)}}),tinymce.PluginManager.add("noneditable",tinymce.plugins.NonEditablePlugin)}(),function(){tinymce.create("tinymce.plugins.PageBreakPlugin",{init:function(a,b){var c='<img src="'+a.theme.url+'/img/trans.gif" class="mcePageBreak mceItemNoResize" />',d="mcePageBreak",e=a.getParam("pagebreak_separator","<!-- pagebreak -->"),f;f=new RegExp(e.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(a){return"\\"+a}),"g"),a.addCommand("mcePageBreak",function(){a.execCommand("mceInsertContent",0,c)}),a.addButton("pagebreak",{title:"pagebreak.desc",cmd:d}),a.onInit.add(function(){a.theme.onResolveName&&a.theme.onResolveName.add(function(b,c){c.node.nodeName=="IMG"&&a.dom.hasClass(c.node,d)&&(c.name="pagebreak")})}),a.onClick.add(function(a,b){b=b.target,b.nodeName==="IMG"&&a.dom.hasClass(b,d)&&a.selection.select(b)}),a.onNodeChange.add(function(a,b,c){b.setActive("pagebreak",c.nodeName==="IMG"&&a.dom.hasClass(c,d))}),a.onBeforeSetContent.add(function(a,b){b.content=b.content.replace(f,c)}),a.onPostProcess.add(function(a,b){b.get&&(b.content=b.content.replace(/<img[^>]+>/g,function(a){return a.indexOf('class="mcePageBreak')!==-1&&(a=e),a}))})},getInfo:function(){return{longname:"PageBreak",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/pagebreak",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("pagebreak",tinymce.plugins.PageBreakPlugin)}(),function(){tinymce.create("tinymce.plugins.PageBreakPlugin",{init:function(a,b){var c='<img src="'+a.theme.url+'/img/trans.gif" class="mcePageBreak mceItemNoResize" />',d="mcePageBreak",e=a.getParam("pagebreak_separator","<!-- pagebreak -->"),f;f=new RegExp(e.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(a){return"\\"+a}),"g"),a.addCommand("mcePageBreak",function(){a.execCommand("mceInsertContent",0,c)}),a.addButton("pagebreak",{title:"pagebreak.desc",cmd:d}),a.onInit.add(function(){a.theme.onResolveName&&a.theme.onResolveName.add(function(b,c){c.node.nodeName=="IMG"&&a.dom.hasClass(c.node,d)&&(c.name="pagebreak")})}),a.onClick.add(function(a,b){b=b.target,b.nodeName==="IMG"&&a.dom.hasClass(b,d)&&a.selection.select(b)}),a.onNodeChange.add(function(a,b,c){b.setActive("pagebreak",c.nodeName==="IMG"&&a.dom.hasClass(c,d))}),a.onBeforeSetContent.add(function(a,b){b.content=b.content.replace(f,c)}),a.onPostProcess.add(function(a,b){b.get&&(b.content=b.content.replace(/<img[^>]+>/g,function(a){return a.indexOf('class="mcePageBreak')!==-1&&(a=e),a}))})},getInfo:function(){return{longname:"PageBreak",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/pagebreak",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("pagebreak",tinymce.plugins.PageBreakPlugin)}(),function(){function c(a,c){return a.getParam(c,b[c])}var a=tinymce.each,b={paste_auto_cleanup_on_paste:!0,paste_enable_default_filters:!0,paste_block_drop:!1,paste_retain_style_properties:"none",paste_strip_class_attributes:"mso",paste_remove_spans:!1,paste_remove_styles:!1,paste_remove_styles_if_webkit:!0,paste_convert_middot_lists:!0,paste_convert_headers_to_strong:!1,paste_dialog_width:"450",paste_dialog_height:"400",paste_text_use_dialog:!1,paste_text_sticky:!1,paste_text_sticky_default:!1,paste_text_notifyalways:!1,paste_text_linebreaktype:"combined",paste_text_replacements:[[/\u2026/g,"..."],[/[\x93\x94\u201c\u201d]/g,'"'],[/[\x60\x91\x92\u2018\u2019]/g,"'"]]};tinymce.create("tinymce.plugins.PastePlugin",{init:function(b,d){function f(a,d){var f=b.dom,g;e.onPreProcess.dispatch(e,a),a.node=f.create("div",0,a.content),tinymce.isGecko&&(g=b.selection.getRng(!0),g.startContainer==g.endContainer&&g.startContainer.nodeType==3&&a.node.childNodes.length===1&&/^(p|h[1-6]|pre)$/i.test(a.node.firstChild.nodeName)&&a.content.indexOf("__MCE_ITEM__")===-1&&f.remove(a.node.firstChild,!0)),e.onPostProcess.dispatch(e,a),a.content=b.serializer.serialize(a.node,{getInner:1,forced_root_block:""}),!d&&b.pasteAsPlainText?(e._insertPlainText(a.content),c(b,"paste_text_sticky")||(b.pasteAsPlainText=!1,b.controlManager.setActive("pastetext",!1))):e._insert(a.content)}function g(c){var d,e,g,i,j=b.selection,k=b.dom,l=b.getBody(),m,n;if(c.clipboardData||k.doc.dataTransfer){n=(c.clipboardData||k.doc.dataTransfer).getData("Text");if(b.pasteAsPlainText){c.preventDefault(),f({content:k.encode(n).replace(/\r?\n/g,"<br />")});return}}if(k.get("_mcePaste"))return;d=k.add(l,"div",{id:"_mcePaste","class":"mcePaste","data-mce-bogus":"1"},"﻿﻿"),l!=b.getDoc().body?m=k.getPos(b.selection.getStart(),l).y:m=l.scrollTop+k.getViewPort(b.getWin()).y,k.setStyles(d,{position:"absolute",left:tinymce.isGecko?-40:0,top:m-25,width:1,height:1,overflow:"hidden"});if(tinymce.isIE){i=j.getRng(),g=k.doc.body.createTextRange(),g.moveToElementText(d),g.execCommand("Paste"),k.remove(d);if(d.innerHTML==="﻿﻿"){b.execCommand("mcePasteWord"),c.preventDefault();return}return j.setRng(i),j.setContent(""),setTimeout(function(){f({content:d.innerHTML})},0),tinymce.dom.Event.cancel(c)}function o(a){a.preventDefault()}k.bind(b.getDoc(),"mousedown",o),k.bind(b.getDoc(),"keydown",o),e=b.selection.getRng(),d=d.firstChild,g=b.getDoc().createRange(),g.setStart(d,0),g.setEnd(d,2),j.setRng(g),window.setTimeout(function(){var c="",d;k.select("div.mcePaste > div.mcePaste").length?c="<p>"+k.encode(n).replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br />")+"</p>":(d=k.select("div.mcePaste"),a(d,function(b){var d=b.firstChild;d&&d.nodeName=="DIV"&&d.style.marginTop&&d.style.backgroundColor&&k.remove(d,1),a(k.select("span.Apple-style-span",b),function(a){k.remove(a,1)}),a(k.select("br[data-mce-bogus]",b),function(a){k.remove(a)}),b.parentNode.className!="mcePaste"&&(c+=b.innerHTML)})),a(k.select("div.mcePaste"),function(a){k.remove(a)}),e&&j.setRng(e),f({content:c}),k.unbind(b.getDoc(),"mousedown",o),k.unbind(b.getDoc(),"keydown",o)},0)}var e=this;e.editor=b,e.url=d,e.onPreProcess=new tinymce.util.Dispatcher(e),e.onPostProcess=new tinymce.util.Dispatcher(e),e.onPreProcess.add(e._preProcess),e.onPostProcess.add(e._postProcess),e.onPreProcess.
add(function(a,c){b.execCallback("paste_preprocess",a,c)}),e.onPostProcess.add(function(a,c){b.execCallback("paste_postprocess",a,c)}),b.onKeyDown.addToTop(function(a,b){if((tinymce.isMac?b.metaKey:b.ctrlKey)&&b.keyCode==86||b.shiftKey&&b.keyCode==45)return!1}),b.pasteAsPlainText=c(b,"paste_text_sticky_default"),b.addCommand("mceInsertClipboardContent",function(a,b){f(b,!0)}),c(b,"paste_text_use_dialog")||b.addCommand("mcePasteText",function(a,d){var e=tinymce.util.Cookie;b.pasteAsPlainText=!b.pasteAsPlainText,b.controlManager.setActive("pastetext",b.pasteAsPlainText),b.pasteAsPlainText&&!e.get("tinymcePasteText")&&(c(b,"paste_text_sticky")?b.windowManager.alert(b.translate("paste.plaintext_mode_sticky")):b.windowManager.alert(b.translate("paste.plaintext_mode")),c(b,"paste_text_notifyalways")||e.set("tinymcePasteText","1",new Date((new Date).getFullYear()+1,12,31)))}),b.addButton("pastetext",{title:"paste.paste_text_desc",cmd:"mcePasteText"}),b.addButton("selectall",{title:"paste.selectall_desc",cmd:"selectall"}),c(b,"paste_auto_cleanup_on_paste")&&(tinymce.isOpera||/Firefox\/2/.test(navigator.userAgent)?b.onKeyDown.addToTop(function(a,b){((tinymce.isMac?b.metaKey:b.ctrlKey)&&b.keyCode==86||b.shiftKey&&b.keyCode==45)&&g(b)}):b.onPaste.addToTop(function(a,b){return g(b)})),b.onInit.add(function(){b.controlManager.setActive("pastetext",b.pasteAsPlainText),c(b,"paste_block_drop")&&b.dom.bind(b.getBody(),["dragend","dragover","draggesture","dragdrop","drop","drag"],function(a){return a.preventDefault(),a.stopPropagation(),!1})}),e._legacySupport()},getInfo:function(){return{longname:"Paste text/word",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/paste",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_preProcess:function(b,d){function l(b){a(b,function(a){a.constructor==RegExp?f=f.replace(a,""):f=f.replace(a[0],a[1])})}var e=this.editor,f=d.content,g=tinymce.grep,h=tinymce.explode,i=tinymce.trim,j,k;if(e.settings.paste_enable_default_filters==0)return;tinymce.isIE&&document.documentMode>=9&&(l([[/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6r]|p|div|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|blockquote|center|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,"$1"]]),l([[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]]));if(/class="?Mso|style="[^"]*\bmso-|w:WordDocument/i.test(f)||d.wordContent){d.wordContent=!0,l([/^\s*(&nbsp;)+/gi,/(&nbsp;|<br[^>]*>)+\s*$/gi]),c(e,"paste_convert_headers_to_strong")&&(f=f.replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>")),c(e,"paste_convert_middot_lists")&&l([[/<!--\[if !supportLists\]-->/gi,"$&__MCE_ITEM__"],[/(<span[^>]+(?:mso-list:|:\s*symbol)[^>]+>)/gi,"$1__MCE_ITEM__"],[/(<p[^>]+(?:MsoListParagraph)[^>]+>)/gi,"$1__MCE_ITEM__"]]),l([/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "]]);do j=f.length,f=f.replace(/(<[a-z][^>]*\s)(?:id|name|language|type|on\w+|\w+:\w+)=(?:"[^"]*"|\w+)\s?/gi,"$1");while(j!=f.length);c(e,"paste_retain_style_properties").replace(/^none$/i,"").length==0?f=f.replace(/<\/?span[^>]*>/gi,""):l([[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(a,b){return b.length>0?b.replace(/./," ").slice(Math.floor(b.length/2)).split("").join(" "):""}],[/(<[a-z][^>]*)\sstyle="([^"]*)"/gi,function(b,c,d){var e=[],f=0,g=h(i(d).replace(/&quot;/gi,"'"),";");return a(g,function(a){function g(a){return a+(a!=="0"&&/\d$/.test(a))?"px":""}var b,c,d=h(a,":");if(d.length==2){b=d[0].toLowerCase(),c=d[1].toLowerCase();switch(b){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-table-layout-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":e[f++]=b.replace(/^mso-|-alt$/g,"")+":"+g(c);return;case"horiz-align":e[f++]="text-align:"+c;return;case"vert-align":e[f++]="vertical-align:"+c;return;case"font-color":case"mso-foreground":e[f++]="color:"+c;return;case"mso-background":case"mso-highlight":e[f++]="background:"+c;return;case"mso-default-height":e[f++]="min-height:"+g(c);return;case"mso-default-width":e[f++]="min-width:"+g(c);return;case"mso-padding-between-alt":e[f++]="border-collapse:separate;border-spacing:"+g(c);return;case"text-line-through":if(c=="single"||c=="double")e[f++]="text-decoration:line-through";return;case"mso-zero-height":c=="yes"&&(e[f++]="display:none");return}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?!align|decor|indent|trans)|top-bar|version|vnd|word-break)/.test(b))return;e[f++]=b+":"+d[1]}}),f>0?c+' style="'+e.join(";")+'"':c}]])}c(e,"paste_convert_headers_to_strong")&&l([[/<h[1-6][^>]*>/gi,"<p><strong>"],[/<\/h[1-6][^>]*>/gi,"</strong></p>"]]),l([[/Version:[\d.]+\nStartHTML:\d+\nEndHTML:\d+\nStartFragment:\d+\nEndFragment:\d+/gi,""]]),k=c(e,"paste_strip_class_attributes");if(k!=="none"){function m(a,b){if(k==="all")return"";var c=g(h(b.replace(/^(["'])(.*)\1$/,"$2")," "),function(a){return/^(?!mso)/i.test(a)});return c.length?' class="'+c.join(" ")+'"':""}f=f.replace(/ class="([^"]+)"/gi,m),f=f.replace(/ class=([\-\w]+)/gi,m)}c(e,"paste_remove_spans")&&(f=f.replace(/<\/?span[^>]*>/gi,"")),d.content=f},_postProcess:function(b,d){var e=this,f=e.editor,g=f.dom,h;if(f.settings.paste_enable_default_filters==0)return;d.wordContent&&(a(g.select("a",d.node),function(a){(!a.href||a.href.indexOf("#_Toc")!=-1)&&g.remove(a,1)}),c(f,"paste_convert_middot_lists")&&e._convertLists(b,d),h=c(f,"paste_retain_style_properties"),tinymce.is(h,"string")&&h!=="all"&&h!=="*"&&(h=tinymce.explode(h.replace(/^none$/i,"")),a(g.select("*",d.node),function(a){var b={},c=0,d,e,f;if(h)for(d=0;d<h.length;d++)e=h[d],f=g.getStyle(a,e),f&&(b[e]=f,c++);g.setAttrib(a,"style",""),h&&c>0?g.setStyles(a,b):a.nodeName=="SPAN"&&!a.className&&g.remove(a,!0)}))),c(f,"paste_remove_styles")||c(f,"paste_remove_styles_if_webkit")&&tinymce.isWebKit?a(g.select("*[style]",d.node),function(a){a.removeAttribute("style"),a.removeAttribute("data-mce-style")}):tinymce.isWebKit&&a(g.select("*",d.node),function(a){a.removeAttribute("data-mce-style")})},_convertLists:function(b,c){var d=b.editor.dom,e,f,g=-1,h,i=[],j,k;a(d.select("p",c.node),function(b){var c,k="",n,o,p,q;for(c=b.firstChild;c&&c.nodeType==3;c=c.nextSibling)k+=c.nodeValue;k=b.innerHTML.replace(/<\/?\w+[^>]*>/gi,"").replace(/&nbsp;/g," "),/^(__MCE_ITEM__)+[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*\u00a0*/.test(k)&&(n="ul"),/^__MCE_ITEM__\s*\w+\.\s*\u00a0+/.test(k)&&(n="ol"),n?(h=parseFloat(b.style.marginLeft||0),h>g&&i.push(h),!e||n!=j?(e=d.create(n),d.insertAfter(e,b)):h>g?e=f.appendChild(d.create(n)):h<g&&(p=tinymce.inArray(i,h),q=d.getParents(e.parentNode,n),e=q[q.length-1-p]||e),a(d.select("span",b),function(a){var b=a.innerHTML.replace(/<\/?\w+[^>]*>/gi,"");n=="ul"&&/^__MCE_ITEM__[\u2022\u00b7\u00a7\u00d8o\u25CF]/.test(b)?d.remove(a):/^__MCE_ITEM__[\s\S]*\w+\.(&nbsp;|\u00a0)*\s*/.test(b)&&d.remove(a)}),o=b.innerHTML,n=="ul"?o=b.innerHTML.replace(/__MCE_ITEM__/g,"").replace(/^[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*(&nbsp;|\u00a0)+\s*/,""):o=b.innerHTML.replace(/__MCE_ITEM__/g,"").replace(/^\s*\w+\.(&nbsp;|\u00a0)+\s*/,""),f=e.appendChild(d.create("li",0,o)),d.remove(b),g=h,j=n):e=g=0}),k=c.node.innerHTML,k.indexOf("__MCE_ITEM__")!=-1&&(c.node.innerHTML=k.replace(/__MCE_ITEM__/g,""))},_insert:function(a,b){var c=this.editor,d=c.selection.getRng();!c.selection.isCollapsed()&&d.startContainer!=d.endContainer&&c.getDoc().execCommand("Delete",!1,null),c.execCommand("mceInsertContent",!1,a,{skip_undo:b})},_insertPlainText:function(b){function h(c){a(c,function(a){a.constructor==RegExp?b=b.replace(a,""):b=b.replace(a[0],a[1])})}var d=this.editor,e=c(d,"paste_text_linebreaktype"),f=c(d,"paste_text_replacements"),g=tinymce.is;typeof b=="string"&&b.length>0&&(/<(?:p|br|h[1-6]|ul|ol|dl|table|t[rdh]|div|blockquote|fieldset|pre|address|center)[^>]*>/i.test(b)?h([/[\n\r]+/g]):h([/\r+/g]),h([[/<\/(?:p|h[1-6]|ul|ol|dl|table|div|blockquote|fieldset|pre|address|center)>/gi,"\n\n"],[/<br[^>]*>|<\/tr>/gi,"\n"],[/<\/t[dh]>\s*<t[dh][^>]*>/gi,"\t"],/<[a-z!\/?][^>]*>/gi,[/&nbsp;/gi," "],[/(?:(?!\n)\s)*(\n+)(?:(?!\n)\s)*/gi,"$1"],[/\n{3,}/g,"\n\n"]]),b=d.dom.decode(tinymce.html.Entities.encodeRaw(b)),g(f,"array")?h(f):g(f,"string")&&h(new RegExp(f,"gi")),e=="none"?h([[/\n+/g," "]]):e=="br"?h([[/\n/g,"<br />"]]):e=="p"?h([[/\n+/g,"</p><p>"],[/^(.*<\/p>)(<p>)$/,"<p>$1"]]):h([[/\n\n/g,"</p><p>"],[/^(.*<\/p>)(<p>)$/,"<p>$1"],[/\n/g,"<br />"]]),d.execCommand("mceInsertContent",!1,b))},_legacySupport:function(){var a=this,b=a.editor;b.addCommand("mcePasteWord",function(){b.windowManager.open({file:a.url+"/pasteword.htm",width:parseInt(c(b,"paste_dialog_width")),height:parseInt(c(b,"paste_dialog_height")),inline:1})}),c(b,"paste_text_use_dialog")&&b.addCommand("mcePasteText",function(){b.windowManager.open({file:a.url+"/pastetext.htm",width:parseInt(c(b,"paste_dialog_width")),height:parseInt(c(b,"paste_dialog_height")),inline:1})}),b.addButton("pasteword",{title:"paste.paste_word_desc",cmd:"mcePasteWord"})}}),tinymce.PluginManager.add("paste",tinymce.plugins.PastePlugin)}(),function(){function c(a,c){return a.getParam(c,b[c])}var a=tinymce.each,b={paste_auto_cleanup_on_paste:!0,paste_enable_default_filters:!0,paste_block_drop:!1,paste_retain_style_properties:"none",paste_strip_class_attributes:"mso",paste_remove_spans:!1,paste_remove_styles:!1,paste_remove_styles_if_webkit:!0,paste_convert_middot_lists:!0,paste_convert_headers_to_strong:!1,paste_dialog_width:"450",paste_dialog_height:"400",paste_text_use_dialog:!1,paste_text_sticky:!1,paste_text_sticky_default:!1,paste_text_notifyalways:!1,paste_text_linebreaktype:"combined",paste_text_replacements:[[/\u2026/g,"..."],[/[\x93\x94\u201c\u201d]/g,'"'],[/[\x60\x91\x92\u2018\u2019]/g,"'"]]};tinymce.create("tinymce.plugins.PastePlugin",{init:function(b,d){function f(a,d){var f=b.dom,g;e.onPreProcess.dispatch(e,a),a.node=f.create("div",0,a.content),tinymce.isGecko&&(g=b.selection.getRng(!0),g.startContainer==g.endContainer&&g.startContainer.nodeType==3&&a.node.childNodes.length===1&&/^(p|h[1-6]|pre)$/i.test(a.node.firstChild.nodeName)&&a.content.indexOf("__MCE_ITEM__")===-1&&f.remove(a.node.firstChild,!0)),e.onPostProcess.dispatch(e,a),a.content=b.serializer.serialize(a.node,{getInner:1,forced_root_block:""}),!d&&b.pasteAsPlainText?(e._insertPlainText(a.content),c(b,"paste_text_sticky")||(b.pasteAsPlainText=!1,b.controlManager.setActive("pastetext",!1))):e._insert(a.content)}function g(c){var d,e,g,h,i=b.selection,j=b.dom,k=b.getBody(),l,m;if(c.clipboardData||j.doc.dataTransfer){m=(c.clipboardData||j.doc.dataTransfer).getData("Text");if(b.pasteAsPlainText){c.preventDefault(),f({content:j.encode(m).replace(/\r?\n/g,"<br />")});return}}if(j.get("_mcePaste"))return;d=j.add(k,"div",{id:"_mcePaste","class":"mcePaste","data-mce-bogus":"1"},"﻿﻿"),k!=b.getDoc().body?l=j.getPos(b.selection.getStart(),k).y:l=k.scrollTop+j.getViewPort(b.getWin()).y,j.setStyles(d,{position:"absolute",left:tinymce.isGecko?-40:0,top:l-25,width:1,height:1,overflow:"hidden"});if(tinymce.isIE){h=i.getRng(),g=j.doc.body.createTextRange(),g.moveToElementText(d),g.execCommand("Paste"),j.remove(d);if(d.innerHTML==="﻿﻿"){b.execCommand("mcePasteWord"),c.preventDefault();return}return i.setRng(h),i.setContent(""),setTimeout(function(){f({content:d.innerHTML})},0),tinymce.dom.Event.cancel(c)}function n(a){a.preventDefault()}j.bind(b.getDoc(),"mousedown",n),j.bind(b.getDoc(),"keydown",n),e=b.selection.getRng(),d=d.firstChild,g=b.getDoc().createRange(),g.setStart(d,0),g.setEnd(d,2),i.setRng(g),window.setTimeout(function(){var c="",d;j.select("div.mcePaste > div.mcePaste").length?c="<p>"+j.encode(m).replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br />")+"</p>":(d=j.select("div.mcePaste"),a(d,function(b){var d=b.firstChild;d&&d.nodeName=="DIV"&&d.style.marginTop&&d.style.backgroundColor&&j.remove(d,1),a(j.select("span.Apple-style-span",b),function(a){j.remove(a,1)}),a(j.select("br[data-mce-bogus]",b),function(a){j.remove(a)}),b.parentNode.className!="mcePaste"&&(c+=b.innerHTML)})),a(j.select("div.mcePaste"),function(a){j.remove(a)}),e&&i.setRng(e),f({content:c}),j.unbind(b.getDoc(),"mousedown",n),j.unbind(b.getDoc(),"keydown",n)},0)}var e=this;e.editor=b,e.url=d,e.onPreProcess=new tinymce.util.Dispatcher(e),e.onPostProcess=new tinymce.util.Dispatcher(e),e.onPreProcess.add(e._preProcess),e.onPostProcess.add(e._postProcess),e.onPreProcess.add(function(a,c){b.execCallback("paste_preprocess",a,c)}),e.onPostProcess.add(function(a,c){b.execCallback("paste_postprocess",a,c)}),b.onKeyDown.addToTop(function(a,b){if((tinymce.isMac?b.metaKey:b.ctrlKey)&&b.keyCode==86||b.shiftKey&&b.keyCode==45)return!1}),b.pasteAsPlainText=c(b,"paste_text_sticky_default"),b.addCommand("mceInsertClipboardContent",function(a,b){f(b,!0)}),c(b,"paste_text_use_dialog")||b.addCommand("mcePasteText",function(a,d){var e=tinymce.util.Cookie;b.pasteAsPlainText=!b.pasteAsPlainText,b.controlManager.setActive("pastetext",b.pasteAsPlainText),b.pasteAsPlainText&&!e.get("tinymcePasteText")&&(c(b,"paste_text_sticky")?b.windowManager.alert(b.translate("paste.plaintext_mode_sticky")):b.windowManager.alert(b.translate("paste.plaintext_mode")),c(b,"paste_text_notifyalways")||e.set("tinymcePasteText","1",new Date((new Date).getFullYear()+1,12,31)))}),b.addButton("pastetext",{title:"paste.paste_text_desc",cmd:"mcePasteText"}),b.addButton("selectall",{title:"paste.selectall_desc",cmd:"selectall"}),c(b,"paste_auto_cleanup_on_paste")&&(tinymce.isOpera||/Firefox\/2/.test(navigator.userAgent)?b.onKeyDown.addToTop(function(a,b){((tinymce.isMac?b.metaKey:b.ctrlKey)&&b.keyCode==86||b.shiftKey&&b.keyCode==45)&&g(b)}):b.onPaste.addToTop(function(a,b){return g(b)})),b.onInit.add(function(){b.controlManager.setActive("pastetext",b.pasteAsPlainText),c(b,"paste_block_drop")&&b.dom.bind(b.getBody(),["dragend","dragover","draggesture","dragdrop","drop","drag"],function(a){return a.preventDefault(),a.stopPropagation(),!1})}),e._legacySupport()},getInfo:function(){return{longname:"Paste text/word",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/paste",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_preProcess:function(b,d){function l(b){a(b,function(a){a.constructor==RegExp?f=f.replace(a,""):f=f.replace(a[0],a[1])})}var e=this.editor,f=d.content,g=tinymce.grep,h=tinymce.explode,i=tinymce.trim,j,k;if(e.settings.paste_enable_default_filters==0)return;tinymce.isIE&&document.documentMode>=9&&(l([[/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6r]|p|div|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|blockquote|center|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,"$1"]]),l([[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]]));if(/class="?Mso|style="[^"]*\bmso-|w:WordDocument/i.test(f)||d.wordContent){d.wordContent=!0,l([/^\s*(&nbsp;)+/gi,/(&nbsp;|<br[^>]*>)+\s*$/gi]),c(e,"paste_convert_headers_to_strong")&&(f=f.replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>")),c(e,"paste_convert_middot_lists")&&l([[/<!--\[if !supportLists\]-->/gi,"$&__MCE_ITEM__"],[/(<span[^>]+(?:mso-list:|:\s*symbol)[^>]+>)/gi,"$1__MCE_ITEM__"],[/(<p[^>]+(?:MsoListParagraph)[^>]+>)/gi,"$1__MCE_ITEM__"]]),l([/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "]]);do j=f.length,f=f.replace(/(<[a-z][^>]*\s)(?:id|name|language|type|on\w+|\w+:\w+)=(?:"[^"]*"|\w+)\s?/gi,"$1");while(j!=f.length);c(e,"paste_retain_style_properties").replace(/^none$/i,"").length==0?f=f.replace(/<\/?span[^>]*>/gi,""):l([[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(a,b){return b.length>0?b.replace(/./," ").slice(Math.floor(b.length/2)).split("").join(" "):""}],[/(<[a-z][^>]*)\sstyle="([^"]*)"/gi,function(b,c,d){var e=[],f=0,g=h(i(d).replace(/&quot;/gi,"'"),";");return a(g,function(a){function g(a){return a+(a!=="0"&&/\d$/.test(a))?"px":""}var b,c,d=h(a,":");if(d.length==2){b=d[0].toLowerCase(),c=d[1].toLowerCase();switch(b){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-table-layout-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":e[f++]=b.replace(/^mso-|-alt$/g,"")+":"+g(c);return;case"horiz-align":e[f++]="text-align:"+c;return;case"vert-align":e[f++]="vertical-align:"+c;return;case"font-color":case"mso-foreground":e[f++]="color:"+c;return;case"mso-background":case"mso-highlight":e[f++]="background:"+c;return;case"mso-default-height":e[f++]="min-height:"+g(c);return;case"mso-default-width":e[f++]="min-width:"+g(c);return;case"mso-padding-between-alt":e[f++]="border-collapse:separate;border-spacing:"+g(c);return;case"text-line-through":if(c=="single"||c=="double")e[f++]="text-decoration:line-through";return;case"mso-zero-height":c=="yes"&&(e[f++]="display:none");return}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?!align|decor|indent|trans)|top-bar|version|vnd|word-break)/.test(b))return;e[f++]=b+":"+d[1]}}),f>0?c+' style="'+e.join(";")+'"':c}]])}c(e,"paste_convert_headers_to_strong")&&l([[/<h[1-6][^>]*>/gi,"<p><strong>"],[/<\/h[1-6][^>]*>/gi,"</strong></p>"]]),l([[/Version:[\d.]+\nStartHTML:\d+\nEndHTML:\d+\nStartFragment:\d+\nEndFragment:\d+/gi,""]]),k=c(e,"paste_strip_class_attributes");if(k!=="none"){function m(a,b){if(k==="all")return"";var c=g(h(b.replace(/^(["'])(.*)\1$/,"$2")," "),function(a){return/^(?!mso)/i.test(a)});return c.length?' class="'+c.join(" ")+'"':""}f=f.replace(/ class="([^"]+)"/gi,m),f=f.replace(/ class=([\-\w]+)/gi,m)}c(e,"paste_remove_spans")&&(f=f.replace(/<\/?span[^>]*>/gi,"")),d.content=f},_postProcess:function(b,d){var e=this,f=e.editor,g=f.dom,h;if(f.settings.paste_enable_default_filters==0)return;d.wordContent&&(a(g.select("a",d.node),function(a){(!a.href||a.href.indexOf("#_Toc")!=-1)&&g.remove(a,1)}),c(f,"paste_convert_middot_lists")&&e._convertLists(b,d),h=c(f,"paste_retain_style_properties"),tinymce.is(h,"string")&&h!=="all"&&h!=="*"&&(h=tinymce.explode(h.replace(/^none$/i,"")),a(g.select("*",d.node),function(a){var b={},c=0,d,e,f;if(h)for(d=0;d<h.length;d++)e=h[d],f=g.getStyle(a,e),f&&(b[e]=f,c++);g.setAttrib(a,"style",""),h&&c>0?g.setStyles(a,b):a.nodeName=="SPAN"&&!a.className&&g.remove(a,!0)}))),c(f,"paste_remove_styles")||c(f,"paste_remove_styles_if_webkit")&&tinymce.isWebKit?a(g.select("*[style]",d.node),function(a){a.removeAttribute("style"),a.removeAttribute("data-mce-style")}):tinymce.isWebKit&&a(g.select("*",d.node),function(a){a.removeAttribute("data-mce-style")})},_convertLists:function(b,c){var d=b.editor.dom,e,f,g=-1,h,i=[],j,k;a(d.select("p",c.node),function(b){var c,k="",l,m,n,o;for(c=b.firstChild;c&&c.nodeType==3;c=c.nextSibling)k+=c.nodeValue;k=b.innerHTML.replace(/<\/?\w+[^>]*>/gi,"").replace(/&nbsp;/g," "),/^(__MCE_ITEM__)+[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*\u00a0*/.test(k)&&(l="ul"),/^__MCE_ITEM__\s*\w+\.\s*\u00a0+/.test(k)&&(l="ol"),l?(h=parseFloat(b.style.marginLeft||0),h>g&&i.push(h),!e||l!=j?(e=d.create(l),d.insertAfter(e,b)):h>g?e=f.appendChild(d.create(l)):h<g&&(n=tinymce.inArray(i,h),o=d.getParents(e.parentNode,l),e=o[o.length-1-n]||e),a(d.select("span",b),function(a){var b=a.innerHTML.replace(/<\/?\w+[^>]*>/gi,"");l=="ul"&&/^__MCE_ITEM__[\u2022\u00b7\u00a7\u00d8o\u25CF]/.test(b)?d.remove(a):/^__MCE_ITEM__[\s\S]*\w+\.(&nbsp;|\u00a0)*\s*/.test(b)&&d.remove(a)}),m=b.innerHTML,l=="ul"?m=b.innerHTML.replace(/__MCE_ITEM__/g,"").replace(/^[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*(&nbsp;|\u00a0)+\s*/,""):m=b.innerHTML.replace(/__MCE_ITEM__/g,"").replace(/^\s*\w+\.(&nbsp;|\u00a0)+\s*/,""),f=e.appendChild(d.create("li",0,m)),d.remove(b),g=h,j=l):e=g=0}),k=c.node.innerHTML,k.indexOf("__MCE_ITEM__")!=-1&&(c.node.innerHTML=k.replace(/__MCE_ITEM__/g,""))},_insert:function(a,b){var c=this.editor,d=c.selection.getRng();!c.selection.isCollapsed()&&d.startContainer!=d.endContainer&&c.getDoc().execCommand("Delete",!1,null),c.execCommand("mceInsertContent",!1,a,{skip_undo:b})},_insertPlainText:function(b){function h(c){a(c,function(a){a.constructor==RegExp?b=b.replace(a,""):b=b.replace(a[0],a[1])})}var d=this.editor,e=c(d,"paste_text_linebreaktype"),f=c(d,"paste_text_replacements"),g=tinymce.is;typeof b=="string"&&b.length>0&&(/<(?:p|br|h[1-6]|ul|ol|dl|table|t[rdh]|div|blockquote|fieldset|pre|address|center)[^>]*>/i.test(b)?h([/[\n\r]+/g]):h([/\r+/g]),h([[/<\/(?:p|h[1-6]|ul|ol|dl|table|div|blockquote|fieldset|pre|address|center)>/gi,"\n\n"],[/<br[^>]*>|<\/tr>/gi,"\n"],[/<\/t[dh]>\s*<t[dh][^>]*>/gi,"\t"],/<[a-z!\/?][^>]*>/gi,[/&nbsp;/gi," "],[/(?:(?!\n)\s)*(\n+)(?:(?!\n)\s)*/gi,"$1"],[/\n{3,}/g,"\n\n"]]),b=d.dom.decode(tinymce.html.Entities.encodeRaw(b)),g(f,"array")?h(f):g(f,"string")&&h(new RegExp(f,"gi")),e=="none"?h([[/\n+/g," "]]):e=="br"?h([[/\n/g,"<br />"]]):e=="p"?h([[/\n+/g,"</p><p>"],[/^(.*<\/p>)(<p>)$/,"<p>$1"]]):h([[/\n\n/g,"</p><p>"],[/^(.*<\/p>)(<p>)$/,"<p>$1"],[/\n/g,"<br />"]]),d.execCommand("mceInsertContent",!1,b))},_legacySupport:function(){var a=this,b=a.editor;b.addCommand("mcePasteWord",function(){b.windowManager.open({file:a.url+"/pasteword.htm",width:parseInt(c(b,"paste_dialog_width")),height:parseInt(c(b,"paste_dialog_height")),inline:1})}),c(b,"paste_text_use_dialog")&&b.addCommand("mcePasteText",function(){b.windowManager.open({file:a.url+"/pastetext.htm",width:parseInt(c(b,"paste_dialog_width")),height:parseInt(c(b,"paste_dialog_height")),inline:1})}),b.addButton("pasteword",{title:"paste.paste_word_desc",cmd:"mcePasteWord"})}}),tinymce.PluginManager.add("paste",tinymce.plugins.PastePlugin)}(),tinyMCEPopup.requireLangPack();var PasteTextDialog={init:function(){this.resize()},insert:function(){var a=tinyMCEPopup.dom.encode(document.getElementById("content").value),b;document.getElementById("linebreaks").checked&&(b=a.split(/\r?\n/),b.length>1&&(a="",tinymce.each(b,function(b){a+="<p>"+b+"</p>"}))),tinyMCEPopup.editor.execCommand("mceInsertClipboardContent",!1,{content:a}),tinyMCEPopup.close()},resize:function(){var a=tinyMCEPopup.dom.getViewPort(window),b;b=document.getElementById("content"),b.style.width=a.w-20+"px",b.style.height=a.h-90+"px"}};tinyMCEPopup.onInit.add(PasteTextDialog.init,PasteTextDialog),tinyMCEPopup.requireLangPack();var PasteWordDialog={init:function(){var a=tinyMCEPopup.editor,b=document.getElementById("iframecontainer"),c,d,e,f="";b.innerHTML='<iframe id="iframe" src="javascript:\'\';" frameBorder="0" style="border: 1px solid gray"></iframe>',c=document.getElementById("iframe"),d=c.contentWindow.document,e=[a.baseURI.toAbsolute("themes/"+a.settings.theme+"/skins/"+a.settings.skin+"/content.css")],e=e.concat(tinymce.explode(a.settings.content_css)||[]),tinymce.each(e,function(b){f+='<link href="'+a.documentBaseURI.toAbsolute(""+b)+'" rel="stylesheet" type="text/css" />'}),d.open(),d.write("<html><head>"+f+'</head><body class="mceContentBody" spellcheck="false"></body></html>'),d.close(),d.designMode="on",this.resize(),window.setTimeout(function(){c.contentWindow.focus()},10)},insert:function(){var a=document.getElementById("iframe").contentWindow.document.body.innerHTML;tinyMCEPopup.editor.execCommand("mceInsertClipboardContent",!1,{content:a,wordContent:!0}),tinyMCEPopup.close()},resize:function(){var a=tinyMCEPopup.dom.getViewPort(window),b;b=document.getElementById("iframe"),b&&(b.style.width=a.w-20+"px",b.style.height=a.h-90+"px")}};tinyMCEPopup.onInit.add(PasteWordDialog.init,PasteWordDialog),tinyMCE.addI18n("en.paste_dlg",{word_title:"Use Ctrl+V on your keyboard to paste the text into the window.",text_linebreaks:"Keep Linebreaks",text_title:"Use Ctrl+V on your keyboard to paste the text into the window."}),function(){tinymce.create("tinymce.plugins.Preview",{init:function(a,b){var c=this,d=tinymce.explode(a.settings.content_css);c.editor=a,tinymce.each(d,function(b,c){d[c]=a.documentBaseURI.toAbsolute(b)}),a.addCommand("mcePreview",function(){a.windowManager.open({file:a.getParam("plugin_preview_pageurl",b+"/preview.html"),width:parseInt(a.getParam("plugin_preview_width","550")),height:parseInt(a.getParam("plugin_preview_height","600")),resizable:"yes",scrollbars:"yes",popup_css:d?d.join(","):a.baseURI.toAbsolute("themes/"+a.settings.theme+"/skins/"+a.settings.skin+"/content.css"),inline:a.getParam("plugin_preview_inline",1)},{base:a.documentBaseURI.getURI()})}),a.addButton("preview",{title:"preview.preview_desc",cmd:"mcePreview"})},getInfo:function(){return{longname:"Preview",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/preview",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("preview",tinymce.plugins.Preview)}(),function(){tinymce.create("tinymce.plugins.Preview",{init:function(a,b){var c=this,d=tinymce.explode(a.settings.content_css);c.editor=a,tinymce.each(d,function(b,c){d[c]=a.documentBaseURI.toAbsolute(b)}),a.addCommand("mcePreview",function(){a.windowManager.open({file:a.getParam("plugin_preview_pageurl",b+"/preview.html"),width:parseInt(a.getParam("plugin_preview_width","550")),height:parseInt(a.getParam("plugin_preview_height","600")),resizable:"yes",scrollbars:"yes",popup_css:d?d.join(","):a.baseURI.toAbsolute("themes/"+a.settings.theme+"/skins/"+a.settings.skin+"/content.css"),inline:a.getParam("plugin_preview_inline",1)},{base:a.documentBaseURI.getURI()})}),a.addButton("preview",{title:"preview.preview_desc",cmd:"mcePreview"})},getInfo:function(){return{longname:"Preview",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/preview",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("preview",tinymce.plugins.Preview)}(),function(){tinymce.create("tinymce.plugins.Print",{init:function(a,b){a.addCommand("mcePrint",function(){a.getWin().print()}),a.addButton("print",{title:"print.print_desc",cmd:"mcePrint"})},getInfo:function(){return{longname:"Print",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/print",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("print",tinymce.plugins.Print)}(),function(){tinymce.create("tinymce.plugins.Print",{init:function(a,b){a.addCommand("mcePrint",function(){a.getWin().print()}),a.addButton("print",{title:"print.print_desc",cmd:"mcePrint"})},getInfo:function(){return{longname:"Print",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/print",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("print",tinymce.plugins.Print)}(),function(){tinymce.create("tinymce.plugins.Save",{init:function(a,b){var c=this;c.editor=a,a.addCommand("mceSave",c._save,c),a.addCommand("mceCancel",c._cancel,c),a.addButton("save",{title:"save.save_desc",cmd:"mceSave"}),a.addButton("cancel",{title:"save.cancel_desc",cmd:"mceCancel"}),a.onNodeChange.add(c._nodeChange,c),a.addShortcut("ctrl+s",a.getLang("save.save_desc"),"mceSave")},getInfo:function(){return{longname:"Save",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/save",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_nodeChange:function(a,b,c){var a=this.editor;a.getParam("save_enablewhendirty")&&(b.setDisabled("save",!a.isDirty()),b.setDisabled("cancel",!a.isDirty()))},_save:function(){var a=this.editor,b,c,d,e;b=tinymce.DOM.get(a.id).form||tinymce.DOM.getParent(a.id,"form");if(a.getParam("save_enablewhendirty")&&!a.isDirty())return;tinyMCE.triggerSave();if(c=a.getParam("save_onsavecallback")){a.execCallback("save_onsavecallback",a)&&(a.startContent=tinymce.trim(a.getContent({format:"raw"})),a.nodeChanged());return}b?(a.isNotDirty=!0,(b.onsubmit==null||b.onsubmit()!=0)&&b.submit(),a.nodeChanged()):a.windowManager.alert("Error: No form element found.")},_cancel:function(){var a=this.editor,b,c=tinymce.trim(a.startContent);if(b=a.getParam("save_oncancelcallback")){a.execCallback("save_oncancelcallback",a);return}a.setContent(c),a.undoManager.clear(),a.nodeChanged()}}),tinymce.PluginManager.add("save",tinymce.plugins.Save)}(),function(){tinymce.create("tinymce.plugins.Save",{init:function(a,b){var c=this;c.editor=a,a.addCommand("mceSave",c._save,c),a.addCommand("mceCancel",c._cancel,c),a.addButton("save",{title:"save.save_desc",cmd:"mceSave"}),a.addButton("cancel",{title:"save.cancel_desc",cmd:"mceCancel"}),a.onNodeChange.add(c._nodeChange,c),a.addShortcut("ctrl+s",a.getLang("save.save_desc"),"mceSave")},getInfo:function(){return{longname:"Save",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/save",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_nodeChange:function(a,b,c){var a=this.editor;a.getParam("save_enablewhendirty")&&(b.setDisabled("save",!a.isDirty()),b.setDisabled("cancel",!a.isDirty()))},_save:function(){var a=this.editor,b,c,d,e;b=tinymce.DOM.get(a.id).form||tinymce.DOM.getParent(a.id,"form");if(a.getParam("save_enablewhendirty")&&!a.isDirty())return;tinyMCE.triggerSave();if(c=a.getParam("save_onsavecallback")){a.execCallback("save_onsavecallback",a)&&(a.startContent=tinymce.trim(a.getContent({format:"raw"})),a.nodeChanged());return}b?(a.isNotDirty=!0,(b.onsubmit==null||b.onsubmit()!=0)&&b.submit(),a.nodeChanged()):a.windowManager.alert("Error: No form element found.")},_cancel:function(){var a=this.editor,b,c=tinymce.trim(a.startContent);if(b=a.getParam("save_oncancelcallback")){a.execCallback("save_oncancelcallback",a);return}a.setContent(c),a.undoManager.clear(),a.nodeChanged()}}),tinymce.PluginManager.add("save",tinymce.plugins.Save)}(),function(){tinymce.create("tinymce.plugins.SearchReplacePlugin",{init:function(a,b){function c(c){window.focus(),a.windowManager.open({file:b+"/searchreplace.htm",width:420+parseInt(a.getLang("searchreplace.delta_width",0)),height:170+parseInt(a.getLang("searchreplace.delta_height",0)),inline:1,auto_focus:0},{mode:c,search_string:a.selection.getContent({format:"text"}),plugin_url:b})}a.addCommand("mceSearch",function(){c("search")}),a.addCommand("mceReplace",function(){c("replace")}),a.addButton("search",{title:"searchreplace.search_desc",cmd:"mceSearch"}),a.addButton("replace",{title:"searchreplace.replace_desc",cmd:"mceReplace"}),a.addShortcut("ctrl+f","searchreplace.search_desc","mceSearch")},getInfo:function(){return{longname:"Search/Replace",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/searchreplace",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("searchreplace",tinymce.plugins.SearchReplacePlugin)}(),function(){tinymce.create("tinymce.plugins.SearchReplacePlugin",{init:function(a,b){function c(c){window.focus(),a.windowManager.open({file:b+"/searchreplace.htm",width:420+parseInt(a.getLang("searchreplace.delta_width",0)),height:170+parseInt(a.getLang("searchreplace.delta_height",0)),inline:1,auto_focus:0},{mode:c,search_string:a.selection.getContent({format:"text"}),plugin_url:b})}a.addCommand("mceSearch",function(){c("search")}),a.addCommand("mceReplace",function(){c("replace")}),a.addButton("search",{title:"searchreplace.search_desc",cmd:"mceSearch"}),a.addButton("replace",{title:"searchreplace.replace_desc",cmd:"mceReplace"}),a.addShortcut("ctrl+f","searchreplace.search_desc","mceSearch")},getInfo:function(){return{longname:"Search/Replace",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/searchreplace",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("searchreplace",tinymce.plugins.SearchReplacePlugin)}(),tinyMCEPopup.requireLangPack();var SearchReplaceDialog={init:
function(a){var b=this,c=document.forms[0],d=tinyMCEPopup.getWindowArg("mode");b.switchMode(d),c[d+"_panel_searchstring"].value=tinyMCEPopup.getWindowArg("search_string"),c[d+"_panel_searchstring"].focus(),mcTabs.onChange.add(function(a,c){b.switchMode(a.substring(0,a.indexOf("_")))})},switchMode:function(a){var b,c=this.lastMode;c!=a&&(b=document.forms[0],c&&(b[a+"_panel_searchstring"].value=b[c+"_panel_searchstring"].value,b[a+"_panel_backwardsu"].checked=b[c+"_panel_backwardsu"].checked,b[a+"_panel_backwardsd"].checked=b[c+"_panel_backwardsd"].checked,b[a+"_panel_casesensitivebox"].checked=b[c+"_panel_casesensitivebox"].checked),mcTabs.displayTab(a+"_tab",a+"_panel"),document.getElementById("replaceBtn").style.display=a=="replace"?"inline":"none",document.getElementById("replaceAllBtn").style.display=a=="replace"?"inline":"none",this.lastMode=a)},searchNext:function(a){function m(){d=c.getRng().cloneRange(),b.getDoc().execCommand("SelectAll",!1,null),c.setRng(d)}function n(){b.selection.setContent(rs)}var b=tinyMCEPopup.editor,c=b.selection,d=c.getRng(),e,f=this.lastMode,g,h,i=0,j=b.getWin(),k=b.windowManager,l=0;e=document.forms[0],g=e[f+"_panel_searchstring"].value,h=e[f+"_panel_backwardsu"].checked,ca=e[f+"_panel_casesensitivebox"].checked,rs=e.replace_panel_replacestring.value,tinymce.isIE&&(d=b.getDoc().selection.createRange());if(g=="")return;ca&&(i|=4);switch(a){case"all":b.execCommand("SelectAll"),b.selection.collapse(!0);if(tinymce.isIE){b.focus(),d=b.getDoc().selection.createRange();while(d.findText(g,h?-1:1,i))d.scrollIntoView(),d.select(),n(),l=1,h&&d.moveEnd("character",-rs.length);tinyMCEPopup.storeSelection()}else while(j.find(g,ca,h,!1,!1,!1,!1))n(),l=1;l?tinyMCEPopup.alert(b.getLang("searchreplace_dlg.allreplaced")):tinyMCEPopup.alert(b.getLang("searchreplace_dlg.notfound"));return;case"current":b.selection.isCollapsed()||n()}c.collapse(h),d=c.getRng();if(!g)return;tinymce.isIE?(b.focus(),d=b.getDoc().selection.createRange(),d.findText(g,h?-1:1,i)?(d.scrollIntoView(),d.select()):tinyMCEPopup.alert(b.getLang("searchreplace_dlg.notfound")),tinyMCEPopup.storeSelection()):j.find(g,ca,h,!1,!1,!1,!1)?m():tinyMCEPopup.alert(b.getLang("searchreplace_dlg.notfound"))}};tinyMCEPopup.onInit.add(SearchReplaceDialog.init,SearchReplaceDialog),tinyMCE.addI18n("en.searchreplace_dlg",{findwhat:"Find What",replacewith:"Replace with",direction:"Direction",up:"Up",down:"Down",mcase:"Match Case",findnext:"Find Next",allreplaced:"All occurrences of the search string were replaced.",searchnext_desc:"Find Again",notfound:"The search has been completed. The search string could not be found.",search_title:"Find",replace_title:"Find/Replace",replaceall:"Replace All",replace:"Replace"}),function(){var a=tinymce.util.JSONRequest,b=tinymce.each,c=tinymce.DOM;tinymce.create("tinymce.plugins.SpellcheckerPlugin",{getInfo:function(){return{longname:"Spellchecker",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/spellchecker",version:tinymce.majorVersion+"."+tinymce.minorVersion}},init:function(a,c){var d=this,e;d.url=c,d.editor=a,d.rpcUrl=a.getParam("spellchecker_rpc_url","{backend}");if(d.rpcUrl=="{backend}"){if(tinymce.isIE)return;d.hasSupport=!0,a.onContextMenu.addToTop(function(a,b){if(d.active)return!1})}a.addCommand("mceSpellCheck",function(){if(d.rpcUrl=="{backend}"){d.editor.getBody().spellcheck=d.active=!d.active;return}d.active?d._done():(a.setProgressState(1),d._sendRPC("checkWords",[d.selectedLang,d._getWords()],function(b){b.length>0?(d.active=1,d._markWords(b),a.setProgressState(0),a.nodeChanged()):(a.setProgressState(0),a.getParam("spellchecker_report_no_misspellings",!0)&&a.windowManager.alert("spellchecker.no_mpell"))}))}),a.settings.content_css!==!1&&a.contentCSS.push(c+"/css/content.css"),a.onClick.add(d._showMenu,d),a.onContextMenu.add(d._showMenu,d),a.onBeforeGetContent.add(function(){d.active&&d._removeWords()}),a.onNodeChange.add(function(a,b){b.setActive("spellchecker",d.active)}),a.onSetContent.add(function(){d._done()}),a.onBeforeGetContent.add(function(){d._done()}),a.onBeforeExecCommand.add(function(a,b){b=="mceFullScreen"&&d._done()}),d.languages={},b(a.getParam("spellchecker_languages","+English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr,German=de,Italian=it,Polish=pl,Portuguese=pt,Spanish=es,Swedish=sv","hash"),function(a,b){b.indexOf("+")===0&&(b=b.substring(1),d.selectedLang=a),d.languages[b]=a})},createControl:function(a,c){var d=this,e,f=d.editor;if(a=="spellchecker")return d.rpcUrl=="{backend}"?(d.hasSupport&&(e=c.createButton(a,{title:"spellchecker.desc",cmd:"mceSpellCheck",scope:d})),e):(e=c.createSplitButton(a,{title:"spellchecker.desc",cmd:"mceSpellCheck",scope:d}),e.onRenderMenu.add(function(a,c){c.add({title:"spellchecker.langs","class":"mceMenuItemTitle"}).setDisabled(1),b(d.languages,function(a,b){var e={icon:1},f;e.onclick=function(){if(a==d.selectedLang)return;f.setSelected(1),d.selectedItem.setSelected(0),d.selectedItem=f,d.selectedLang=a},e.title=b,f=c.add(e),f.setSelected(a==d.selectedLang),a==d.selectedLang&&(d.selectedItem=f)})}),e)},_walk:function(a,b){var c=this.editor.getDoc(),d;if(c.createTreeWalker){d=c.createTreeWalker(a,NodeFilter.SHOW_TEXT,null,!1);while((a=d.nextNode())!=null)b.call(this,a)}else tinymce.walk(a,b,"childNodes")},_getSeparators:function(){var a="",b,c=this.editor.getParam("spellchecker_word_separator_chars",'\\s!"#$%&()*+,-./:;<=>?@[]^_{|}§©«®±¶·¸»¼½¾¿×÷¤”“');for(b=0;b<c.length;b++)a+="\\"+c.charAt(b);return a},_getWords:function(){var a=this.editor,c=[],d="",e={},f=[];return this._walk(a.getBody(),function(a){a.nodeType==3&&(d+=a.nodeValue+" ")}),a.getParam("spellchecker_word_pattern")?f=d.match("("+a.getParam("spellchecker_word_pattern")+")","gi"):(d=d.replace(new RegExp("([0-9]|["+this._getSeparators()+"])","g")," "),d=tinymce.trim(d.replace(/(\s+)/g," ")),f=d.split(" ")),b(f,function(a){e[a]||(c.push(a),e[a]=1)}),c},_removeWords:function(a){var c=this.editor,d=c.dom,e=c.selection,f=e.getBookmark();b(d.select("span").reverse(),function(b){b&&(d.hasClass(b,"mceItemHiddenSpellWord")||d.hasClass(b,"mceItemHidden"))&&(!a||d.decode(b.innerHTML)==a)&&d.remove(b,1)}),e.moveToBookmark(f)},_markWords:function(a){var c=this.editor,d=c.dom,e=c.getDoc(),f=c.selection,g=f.getBookmark(),h=[],i=a.join("|"),j=this._getSeparators(),k=new RegExp("(^|["+j+"])("+i+")(?=["+j+"]|$)","g");this._walk(c.getBody(),function(a){a.nodeType==3&&h.push(a)}),b(h,function(a){var b,c,f,g,h=a.nodeValue;if(k.test(h)){h=d.encode(h),c=d.create("span",{"class":"mceItemHidden"});if(tinymce.isIE){h=h.replace(k,"$1<mcespell>$2</mcespell>");while((g=h.indexOf("<mcespell>"))!=-1)f=h.substring(0,g),f.length&&(b=e.createTextNode(d.decode(f)),c.appendChild(b)),h=h.substring(g+10),g=h.indexOf("</mcespell>"),f=h.substring(0,g),h=h.substring(g+11),c.appendChild(d.create("span",{"class":"mceItemHiddenSpellWord"},f));h.length&&(b=e.createTextNode(d.decode(h)),c.appendChild(b))}else c.innerHTML=h.replace(k,'$1<span class="mceItemHiddenSpellWord">$2</span>');d.replace(c,a)}}),f.moveToBookmark(g)},_showMenu:function(a,d){var e=this,a=e.editor,f=e._menu,g,h=a.dom,i=h.getViewPort(a.getWin()),j=d.target;d=0,f||(f=a.controlManager.createDropMenu("spellcheckermenu",{"class":"mceNoIcons"}),e._menu=f);if(h.hasClass(j,"mceItemHiddenSpellWord"))return f.removeAll(),f.add({title:"spellchecker.wait","class":"mceMenuItemTitle"}).setDisabled(1),e._sendRPC("getSuggestions",[e.selectedLang,h.decode(j.innerHTML)],function(c){var d;f.removeAll(),c.length>0?(f.add({title:"spellchecker.sug","class":"mceMenuItemTitle"}).setDisabled(1),b(c,function(b){f.add({title:b,onclick:function(){h.replace(a.getDoc().createTextNode(b),j),e._checkDone()}})}),f.addSeparator()):f.add({title:"spellchecker.no_sug","class":"mceMenuItemTitle"}).setDisabled(1),a.getParam("show_ignore_words",!0)&&(d=e.editor.getParam("spellchecker_enable_ignore_rpc",""),f.add({title:"spellchecker.ignore_word",onclick:function(){var b=j.innerHTML;h.remove(j,1),e._checkDone(),d&&(a.setProgressState(1),e._sendRPC("ignoreWord",[e.selectedLang,b],function(b){a.setProgressState(0)}))}}),f.add({title:"spellchecker.ignore_words",onclick:function(){var b=j.innerHTML;e._removeWords(h.decode(b)),e._checkDone(),d&&(a.setProgressState(1),e._sendRPC("ignoreWords",[e.selectedLang,b],function(b){a.setProgressState(0)}))}})),e.editor.getParam("spellchecker_enable_learn_rpc")&&f.add({title:"spellchecker.learn_word",onclick:function(){var b=j.innerHTML;h.remove(j,1),e._checkDone(),a.setProgressState(1),e._sendRPC("learnWord",[e.selectedLang,b],function(b){a.setProgressState(0)})}}),f.update()}),g=c.getPos(a.getContentAreaContainer()),f.settings.offset_x=g.x,f.settings.offset_y=g.y,a.selection.select(j),g=h.getPos(j),f.showMenu(g.x,g.y+j.offsetHeight-i.y),tinymce.dom.Event.cancel(d);f.hideMenu()},_checkDone:function(){var a=this,c=a.editor,d=c.dom,e;b(d.select("span"),function(a){if(a&&d.hasClass(a,"mceItemHiddenSpellWord"))return e=!0,!1}),e||a._done()},_done:function(){var a=this,b=a.active;a.active&&(a.active=0,a._removeWords(),a._menu&&a._menu.hideMenu(),b&&a.editor.nodeChanged())},_sendRPC:function(b,c,d){var e=this;a.sendRPC({url:e.rpcUrl,method:b,params:c,success:d,error:function(a,b){e.editor.setProgressState(0),e.editor.windowManager.alert(a.errstr||"Error response: "+b.responseText)}})}}),tinymce.PluginManager.add("spellchecker",tinymce.plugins.SpellcheckerPlugin)}(),function(){var a=tinymce.util.JSONRequest,b=tinymce.each,c=tinymce.DOM;tinymce.create("tinymce.plugins.SpellcheckerPlugin",{getInfo:function(){return{longname:"Spellchecker",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/spellchecker",version:tinymce.majorVersion+"."+tinymce.minorVersion}},init:function(a,c){var d=this,e;d.url=c,d.editor=a,d.rpcUrl=a.getParam("spellchecker_rpc_url","{backend}");if(d.rpcUrl=="{backend}"){if(tinymce.isIE)return;d.hasSupport=!0,a.onContextMenu.addToTop(function(a,b){if(d.active)return!1})}a.addCommand("mceSpellCheck",function(){if(d.rpcUrl=="{backend}"){d.editor.getBody().spellcheck=d.active=!d.active;return}d.active?d._done():(a.setProgressState(1),d._sendRPC("checkWords",[d.selectedLang,d._getWords()],function(b){b.length>0?(d.active=1,d._markWords(b),a.setProgressState(0),a.nodeChanged()):(a.setProgressState(0),a.getParam("spellchecker_report_no_misspellings",!0)&&a.windowManager.alert("spellchecker.no_mpell"))}))}),a.settings.content_css!==!1&&a.contentCSS.push(c+"/css/content.css"),a.onClick.add(d._showMenu,d),a.onContextMenu.add(d._showMenu,d),a.onBeforeGetContent.add(function(){d.active&&d._removeWords()}),a.onNodeChange.add(function(a,b){b.setActive("spellchecker",d.active)}),a.onSetContent.add(function(){d._done()}),a.onBeforeGetContent.add(function(){d._done()}),a.onBeforeExecCommand.add(function(a,b){b=="mceFullScreen"&&d._done()}),d.languages={},b(a.getParam("spellchecker_languages","+English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr,German=de,Italian=it,Polish=pl,Portuguese=pt,Spanish=es,Swedish=sv","hash"),function(a,b){b.indexOf("+")===0&&(b=b.substring(1),d.selectedLang=a),d.languages[b]=a})},createControl:function(a,c){var d=this,e,f=d.editor;if(a=="spellchecker")return d.rpcUrl=="{backend}"?(d.hasSupport&&(e=c.createButton(a,{title:"spellchecker.desc",cmd:"mceSpellCheck",scope:d})),e):(e=c.createSplitButton(a,{title:"spellchecker.desc",cmd:"mceSpellCheck",scope:d}),e.onRenderMenu.add(function(a,c){c.add({title:"spellchecker.langs","class":"mceMenuItemTitle"}).setDisabled(1),b(d.languages,function(a,b){var e={icon:1},f;e.onclick=function(){if(a==d.selectedLang)return;f.setSelected(1),d.selectedItem.setSelected(0),d.selectedItem=f,d.selectedLang=a},e.title=b,f=c.add(e),f.setSelected(a==d.selectedLang),a==d.selectedLang&&(d.selectedItem=f)})}),e)},_walk:function(a,b){var c=this.editor.getDoc(),d;if(c.createTreeWalker){d=c.createTreeWalker(a,NodeFilter.SHOW_TEXT,null,!1);while((a=d.nextNode())!=null)b.call(this,a)}else tinymce.walk(a,b,"childNodes")},_getSeparators:function(){var a="",b,c=this.editor.getParam("spellchecker_word_separator_chars",'\\s!"#$%&()*+,-./:;<=>?@[]^_{|}§©«®±¶·¸»¼½¾¿×÷¤”“');for(b=0;b<c.length;b++)a+="\\"+c.charAt(b);return a},_getWords:function(){var a=this.editor,c=[],d="",e={},f=[];return this._walk(a.getBody(),function(a){a.nodeType==3&&(d+=a.nodeValue+" ")}),a.getParam("spellchecker_word_pattern")?f=d.match("("+a.getParam("spellchecker_word_pattern")+")","gi"):(d=d.replace(new RegExp("([0-9]|["+this._getSeparators()+"])","g")," "),d=tinymce.trim(d.replace(/(\s+)/g," ")),f=d.split(" ")),b(f,function(a){e[a]||(c.push(a),e[a]=1)}),c},_removeWords:function(a){var c=this.editor,d=c.dom,e=c.selection,f=e.getBookmark();b(d.select("span").reverse(),function(b){b&&(d.hasClass(b,"mceItemHiddenSpellWord")||d.hasClass(b,"mceItemHidden"))&&(!a||d.decode(b.innerHTML)==a)&&d.remove(b,1)}),e.moveToBookmark(f)},_markWords:function(a){var c=this.editor,d=c.dom,e=c.getDoc(),f=c.selection,g=f.getBookmark(),h=[],i=a.join("|"),j=this._getSeparators(),k=new RegExp("(^|["+j+"])("+i+")(?=["+j+"]|$)","g");this._walk(c.getBody(),function(a){a.nodeType==3&&h.push(a)}),b(h,function(a){var b,c,f,g,h=a.nodeValue;if(k.test(h)){h=d.encode(h),c=d.create("span",{"class":"mceItemHidden"});if(tinymce.isIE){h=h.replace(k,"$1<mcespell>$2</mcespell>");while((g=h.indexOf("<mcespell>"))!=-1)f=h.substring(0,g),f.length&&(b=e.createTextNode(d.decode(f)),c.appendChild(b)),h=h.substring(g+10),g=h.indexOf("</mcespell>"),f=h.substring(0,g),h=h.substring(g+11),c.appendChild(d.create("span",{"class":"mceItemHiddenSpellWord"},f));h.length&&(b=e.createTextNode(d.decode(h)),c.appendChild(b))}else c.innerHTML=h.replace(k,'$1<span class="mceItemHiddenSpellWord">$2</span>');d.replace(c,a)}}),f.moveToBookmark(g)},_showMenu:function(a,d){var e=this,a=e.editor,f=e._menu,g,h=a.dom,i=h.getViewPort(a.getWin()),j=d.target;d=0,f||(f=a.controlManager.createDropMenu("spellcheckermenu",{"class":"mceNoIcons"}),e._menu=f);if(h.hasClass(j,"mceItemHiddenSpellWord"))return f.removeAll(),f.add({title:"spellchecker.wait","class":"mceMenuItemTitle"}).setDisabled(1),e._sendRPC("getSuggestions",[e.selectedLang,h.decode(j.innerHTML)],function(c){var d;f.removeAll(),c.length>0?(f.add({title:"spellchecker.sug","class":"mceMenuItemTitle"}).setDisabled(1),b(c,function(b){f.add({title:b,onclick:function(){h.replace(a.getDoc().createTextNode(b),j),e._checkDone()}})}),f.addSeparator()):f.add({title:"spellchecker.no_sug","class":"mceMenuItemTitle"}).setDisabled(1),a.getParam("show_ignore_words",!0)&&(d=e.editor.getParam("spellchecker_enable_ignore_rpc",""),f.add({title:"spellchecker.ignore_word",onclick:function(){var b=j.innerHTML;h.remove(j,1),e._checkDone(),d&&(a.setProgressState(1),e._sendRPC("ignoreWord",[e.selectedLang,b],function(b){a.setProgressState(0)}))}}),f.add({title:"spellchecker.ignore_words",onclick:function(){var b=j.innerHTML;e._removeWords(h.decode(b)),e._checkDone(),d&&(a.setProgressState(1),e._sendRPC("ignoreWords",[e.selectedLang,b],function(b){a.setProgressState(0)}))}})),e.editor.getParam("spellchecker_enable_learn_rpc")&&f.add({title:"spellchecker.learn_word",onclick:function(){var b=j.innerHTML;h.remove(j,1),e._checkDone(),a.setProgressState(1),e._sendRPC("learnWord",[e.selectedLang,b],function(b){a.setProgressState(0)})}}),f.update()}),g=c.getPos(a.getContentAreaContainer()),f.settings.offset_x=g.x,f.settings.offset_y=g.y,a.selection.select(j),g=h.getPos(j),f.showMenu(g.x,g.y+j.offsetHeight-i.y),tinymce.dom.Event.cancel(d);f.hideMenu()},_checkDone:function(){var a=this,c=a.editor,d=c.dom,e;b(d.select("span"),function(a){if(a&&d.hasClass(a,"mceItemHiddenSpellWord"))return e=!0,!1}),e||a._done()},_done:function(){var a=this,b=a.active;a.active&&(a.active=0,a._removeWords(),a._menu&&a._menu.hideMenu(),b&&a.editor.nodeChanged())},_sendRPC:function(b,c,d){var e=this;a.sendRPC({url:e.rpcUrl,method:b,params:c,success:d,error:function(a,b){e.editor.setProgressState(0),e.editor.windowManager.alert(a.errstr||"Error response: "+b.responseText)}})}}),tinymce.PluginManager.add("spellchecker",tinymce.plugins.SpellcheckerPlugin)}(),function(){tinymce.create("tinymce.plugins.StylePlugin",{init:function(a,b){a.addCommand("mceStyleProps",function(){a.windowManager.open({file:b+"/props.htm",width:480+parseInt(a.getLang("style.delta_width",0)),height:320+parseInt(a.getLang("style.delta_height",0)),inline:1},{plugin_url:b,style_text:a.selection.getNode().style.cssText})}),a.addCommand("mceSetElementStyle",function(b,c){if(e=a.selection.getNode())a.dom.setAttrib(e,"style",c),a.execCommand("mceRepaint")}),a.onNodeChange.add(function(a,b,c){b.setDisabled("styleprops",c.nodeName==="BODY")}),a.addButton("styleprops",{title:"style.desc",cmd:"mceStyleProps"})},getInfo:function(){return{longname:"Style",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/style",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("style",tinymce.plugins.StylePlugin)}(),function(){tinymce.create("tinymce.plugins.StylePlugin",{init:function(a,b){a.addCommand("mceStyleProps",function(){a.windowManager.open({file:b+"/props.htm",width:480+parseInt(a.getLang("style.delta_width",0)),height:320+parseInt(a.getLang("style.delta_height",0)),inline:1},{plugin_url:b,style_text:a.selection.getNode().style.cssText})}),a.addCommand("mceSetElementStyle",function(b,c){if(e=a.selection.getNode())a.dom.setAttrib(e,"style",c),a.execCommand("mceRepaint")}),a.onNodeChange.add(function(a,b,c){b.setDisabled("styleprops",c.nodeName==="BODY")}),a.addButton("styleprops",{title:"style.desc",cmd:"mceStyleProps"})},getInfo:function(){return{longname:"Style",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/style",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("style",tinymce.plugins.StylePlugin)}(),tinyMCEPopup.requireLangPack();var defaultFonts="Arial, Helvetica, sans-serif=Arial, Helvetica, sans-serif;Times New Roman, Times, serif=Times New Roman, Times, serif;Courier New, Courier, mono=Courier New, Courier, mono;Times New Roman, Times, serif=Times New Roman, Times, serif;Georgia, Times New Roman, Times, serif=Georgia, Times New Roman, Times, serif;Verdana, Arial, Helvetica, sans-serif=Verdana, Arial, Helvetica, sans-serif;Geneva, Arial, Helvetica, sans-serif=Geneva, Arial, Helvetica, sans-serif",defaultSizes="9;10;12;14;16;18;24;xx-small;x-small;small;medium;large;x-large;xx-large;smaller;larger",defaultMeasurement="+pixels=px;points=pt;inches=in;centimetres=cm;millimetres=mm;picas=pc;ems=em;exs=ex;%",defaultSpacingMeasurement="pixels=px;points=pt;inches=in;centimetres=cm;millimetres=mm;picas=pc;+ems=em;exs=ex;%",defaultIndentMeasurement="pixels=px;+points=pt;inches=in;centimetres=cm;millimetres=mm;picas=pc;ems=em;exs=ex;%",defaultWeight="normal;bold;bolder;lighter;100;200;300;400;500;600;700;800;900",defaultTextStyle="normal;italic;oblique",defaultVariant="normal;small-caps",defaultLineHeight="normal",defaultAttachment="fixed;scroll",defaultRepeat="no-repeat;repeat;repeat-x;repeat-y",defaultPosH="left;center;right",defaultPosV="top;center;bottom",defaultVAlign="baseline;sub;super;top;text-top;middle;bottom;text-bottom",defaultDisplay="inline;block;list-item;run-in;compact;marker;table;inline-table;table-row-group;table-header-group;table-footer-group;table-row;table-column-group;table-column;table-cell;table-caption;none",defaultBorderStyle="none;solid;dashed;dotted;double;groove;ridge;inset;outset",defaultBorderWidth="thin;medium;thick",defaultListType="disc;circle;square;decimal;lower-roman;upper-roman;lower-alpha;upper-alpha;none";tinyMCEPopup.onInit.add(init),tinyMCE.addI18n("en.style_dlg",{text_lineheight:"Line Height",text_variant:"Variant",text_style:"Style",text_weight:"Weight",text_size:"Size",text_font:"Font",text_props:"Text",positioning_tab:"Positioning",list_tab:"List",border_tab:"Border",box_tab:"Box",block_tab:"Block",background_tab:"Background",text_tab:"Text",apply:"Apply",title:"Edit CSS Style",clip:"Clip",placement:"Placement",overflow:"Overflow",zindex:"Z-index",visibility:"Visibility",positioning_type:"Type",position:"Position",bullet_image:"Bullet Image",list_type:"Type",color:"Color",height:"Height",width:"Width",style:"Style",margin:"Margin",left:"Left",bottom:"Bottom",right:"Right",top:"Top",same:"Same for All",padding:"Padding",box_clear:"Clear",box_float:"Float",box_height:"Height",box_width:"Width",block_display:"Display",block_whitespace:"Whitespace",block_text_indent:"Text Indent",block_text_align:"Text Align",block_vertical_alignment:"Vertical Alignment",block_letterspacing:"Letter Spacing",block_wordspacing:"Word Spacing",background_vpos:"Vertical Position",background_hpos:"Horizontal Position",background_attachment:"Attachment",background_repeat:"Repeat",background_image:"Background Image",background_color:"Background Color",text_none:"None",text_blink:"Blink",text_case:"Case",text_striketrough:"Strikethrough",text_underline:"Underline",text_overline:"Overline",text_decoration:"Decoration",text_color:"Color",text:"Text",background:"Background",block:"Block",box:"Box",border:"Border",list:"List"}),function(){var a=tinymce.DOM,b=tinymce.dom.Event,c=tinymce.each,d=tinymce.explode;tinymce.create("tinymce.plugins.TabFocusPlugin",{init:function(e,f){function g(a,c){if(c.keyCode===9)return b.cancel(c)}function h(e,f){function l(b){function d(a){return a.nodeName==="BODY"||a.type!="hidden"&&a.style.display!="none"&&a.style.visibility!="hidden"&&d(a.parentNode)}function f(a){return a.attributes.tabIndex.specified||a.nodeName=="INPUT"||a.nodeName=="TEXTAREA"}function i(){return tinymce.isIE6||tinymce.isIE7}function k(a){return(!i()||f(a))&&a.getAttribute("tabindex")!="-1"&&d(a)}j=a.select(":input:enabled,*[tabindex]"),c(j,function(a,b){if(a.id==e.id)return g=b,!1});if(b>0){for(h=g+1;h<j.length;h++)if(k(j[h]))return j[h]}else for(h=g-1;h>=0;h--)if(k(j[h]))return j[h];return null}var g,h,i,j,k;if(f.keyCode===9){k=d(e.getParam("tab_focus",e.getParam("tabfocus_elements",":prev,:next"))),k.length==1&&(k[1]=k[0],k[0]=":prev"),f.shiftKey?k[0]==":prev"?j=l(-1):j=a.get(k[0]):k[1]==":next"?j=l(1):j=a.get(k[1]);if(j)return j.id&&(e=tinymce.get(j.id||j.name))?e.focus():window.setTimeout(function(){tinymce.isWebKit||window.focus(),j.focus()},10),b.cancel(f)}}e.onKeyUp.add(g),tinymce.isGecko?(e.onKeyPress.add(h),e.onKeyDown.add(g)):e.onKeyDown.add(h)},getInfo:function(){return{longname:"Tabfocus",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/tabfocus",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("tabfocus",tinymce.plugins.TabFocusPlugin)}(),function(){var a=tinymce.DOM,b=tinymce.dom.Event,c=tinymce.each,d=tinymce.explode;tinymce.create("tinymce.plugins.TabFocusPlugin",{init:function(e,f){function g(a,c){if(c.keyCode===9)return b.cancel(c)}function h(e,f){function l(b){function d(a){return a.nodeName==="BODY"||a.type!="hidden"&&a.style.display!="none"&&a.style.visibility!="hidden"&&d(a.parentNode)}function f(a){return a.attributes.tabIndex.specified||a.nodeName=="INPUT"||a.nodeName=="TEXTAREA"}function i(){return tinymce.isIE6||tinymce.isIE7}function k(a){return(!i()||f(a))&&a.getAttribute("tabindex")!="-1"&&d(a)}j=a.select(":input:enabled,*[tabindex]"),c(j,function(a,b){if(a.id==e.id)return g=b,!1});if(b>0){for(h=g+1;h<j.length;h++)if(k(j[h]))return j[h]}else for(h=g-1;h>=0;h--)if(k(j[h]))return j[h];return null}var g,h,i,j,k;if(f.keyCode===9){k=d(e.getParam("tab_focus",e.getParam("tabfocus_elements",":prev,:next"))),k.length==1&&(k[1]=k[0],k[0]=":prev"),f.shiftKey?k[0]==":prev"?j=l(-1):j=a.get(k[0]):k[1]==":next"?j=l(1):j=a.get(k[1]);if(j)return j.id&&(e=tinymce.get(j.id||j.name))?e.focus():window.setTimeout(function(){tinymce.isWebKit||window.focus(),j.focus()},10),b.cancel(f)}}e.onKeyUp.add(g),tinymce.isGecko?(e.onKeyPress.add(h),e.onKeyDown.add(g)):e.onKeyDown.add(h)},getInfo:function(){return{longname:"Tabfocus",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/tabfocus",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("tabfocus",tinymce.plugins.TabFocusPlugin)}(),function(a){function c(a,b){var c=b.ownerDocument,d=c.createRange(),e;return d.setStartBefore(b),d.setEnd(a.endContainer,a.endOffset),e=c.createElement("body"),e.appendChild(d.cloneContents()),e.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length==0}function d(a,b){return parseInt(a.getAttribute(b)||1)}function e(c,e,f){function l(a,b){return a=a.cloneNode(b),a.removeAttribute("id"),a}function m(){var a=0;g=[],b(["thead","tbody","tfoot"],function(f){var h=e.select("> "+f+" tr",c);b(h,function(c,h){h+=a,b(e.select("> td, > th",c),function(a,b){var c,e,i,j;if(g[h])while(g[h][b])b++;i=d(a,"rowspan"),j=d(a,"colspan");for(e=h;e<h+i;e++){g[e]||(g[e]=[]);for(c=b;c<b+j;c++)g[e][c]={part:f,real:e==h&&c==b,elm:a,rowspan:i,colspan:j}}})}),a+=h.length})}function n(a,b){var c;c=g[b];if(c)return c[a]}function o(a,b,c){a&&(c=parseInt(c),c===1?a.removeAttribute(b,1):a.setAttribute(b,c,1))}function p(a){return a&&(e.hasClass(a.elm,"mceSelected")||a==k)}function q(){var a=[];return b(c.rows,function(c){b(c.cells,function(b){if(e.hasClass(b,"mceSelected")||b==k.elm)return a.push(c),!1})}),a}function r(){var a=e.createRng();a.setStartAfter(c),a.setEndAfter(c),f.setRng(a),e.remove(c)}function s(c){var d;return a.walk(c,function(f){var g;if(f.nodeType==3)return b(e.getParents(f.parentNode,null,c).reverse(),function(a){a=l(a,!1),d?g&&g.appendChild(a):d=g=a,g=a}),g&&(g.innerHTML=a.isIE?"&nbsp;":'<br data-mce-bogus="1" />'),!1},"childNodes"),c=l(c,!1),o(c,"rowSpan",1),o(c,"colSpan",1),d?c.appendChild(d):a.isIE||(c.innerHTML='<br data-mce-bogus="1" />'),c}function t(){var a=e.createRng();b(e.select("tr",c),function(a){a.cells.length==0&&e.remove(a)});if(e.select("tr",c).length==0){a.setStartAfter(c),a.setEndAfter(c),f.setRng(a),e.remove(c);return}b(e.select("thead,tbody,tfoot",c),function(a){a.rows.length==0&&e.remove(a)}),m(),row=g[Math.min(g.length-1,h.y)],row&&(f.select(row[Math.min(row.length-1,h.x)].elm,!0),f.collapse(!0))}function u(a,b,c,d){var f,h,i,j,k;f=g[b][a].elm.parentNode;for(i=1;i<=c;i++){f=e.getNext(f,"tr");if(f){for(h=a;h>=0;h--){k=g[b+i][h].elm;if(k.parentNode==f){for(j=1;j<=d;j++)e.insertAfter(s(k),k);break}}if(h==-1)for(j=1;j<=d;j++)f.insertBefore(s(f.cells[0]),f.cells[0])}}}function v(){b(g,function(a,c){b(a,function(a,b){var f,g,h,i;if(p(a)){a=a.elm,f=d(a,"colspan"),g=d(a,"rowspan");if(f>1||g>1){o(a,"rowSpan",1),o(a,"colSpan",1);for(i=0;i<f-1;i++)e.insertAfter(s(a),a);u(b,c,g-1,f)}}})})}function w(c,d,f){var i,k,l,p,q,r,s,u,c,w,x;c?(pos=G(c),i=pos.x,k=pos.y,l=i+(d-1),p=k+(f-1)):(i=h.x,k=h.y,l=j.x,p=j.y),s=n(i,k),u=n(l,p);if(s&&u&&s.part==u.part){v(),m(),s=n(i,k).elm,o(s,"colSpan",l-i+1),o(s,"rowSpan",p-k+1);for(r=k;r<=p;r++)for(q=i;q<=l;q++){if(!g[r]||!g[r][q])continue;c=g[r][q].elm,c!=s&&(w=a.grep(c.childNodes),b(w,function(a){s.appendChild(a)}),w.length&&(w=a.grep(s.childNodes),x=0,b(w,function(a){a.nodeName=="BR"&&e.getAttrib(a,"data-mce-bogus")&&x++<w.length-1&&s.removeChild(a)})),e.remove(c))}t()}}function z(a){var c,f,h,i,j,k,m,n,q;b(g,function(d,e){b(d,function(b,d){if(p(b)){b=b.elm,j=b.parentNode,k=l(j,!1),c=e;if(a)return!1}});if(a)return!c});for(i=0;i<g[0].length;i++){if(!g[c][i])continue;f=g[c][i].elm;if(f!=h){if(!a){q=d(f,"rowspan");if(q>1){o(f,"rowSpan",q+1);continue}}else if(c>0&&g[c-1][i]){n=g[c-1][i].elm,q=d(n,"rowSpan");if(q>1){o(n,"rowSpan",q+1);continue}}m=s(f),o(m,"colSpan",f.colSpan),k.appendChild(m),h=f}}k.hasChildNodes()&&(a?j.parentNode.insertBefore(k,j):e.insertAfter(k,j))}function A(a){var c,f;b(g,function(d,e){b(d,function(b,d){if(p(b)){c=d;if(a)return!1}});if(a)return!c}),b(g,function(b,g){var h,i,j;if(!b[c])return;h=b[c].elm,h!=f&&(j=d(h,"colspan"),i=d(h,"rowspan"),j==1?a?(h.parentNode.insertBefore(s(h),h),u(c,g,i-1,j)):(e.insertAfter(s(h),h),u(c,g,i-1,j)):o(h,"colSpan",h.colSpan+1),f=h)})}function B(){var c=[];b(g,function(f,h){b(f,function(f,h){p(f)&&a.inArray(c,h)===-1&&(b(g,function(a){var b=a[h].elm,c;c=d(b,"colSpan"),c>1?o(b,"colSpan",c-1):e.remove(b)}),c.push(h))})}),t()}function C(){function c(a){var c,f,h;c=e.getNext(a,"tr"),b(a.cells,function(a){var b=d(a,"rowSpan");b>1&&(o(a,"rowSpan",b-1),f=G(a),u(f.x,f.y,1,1))}),f=G(a.cells[0]),b(g[f.y],function(a){var b;a=a.elm,a!=h&&(b=d(a,"rowSpan"),b<=1?e.remove(a):o(a,"rowSpan",b-1),h=a)})}var a;a=q(),b(a.reverse(),function(a){c(a)}),t()}function D(){var a=q();return e.remove(a),t(),a}function E(){var a=q();return b(a,function(b,c){a[c]=l(b,!0)}),a}function F(a,c){var d=q(),f=d[c?0:d.length-1],h=f.cells.length;b(g,function(a){var c;h=0,b(a,function(a,b){a.real&&(h+=a.colspan),a.elm.parentNode==f&&(c=1)});if(c)return!1}),c||a.reverse(),b(a,function(a){var b=a.cells.length,d;for(i=0;i<b;i++)d=a.cells[i],o(d,"colSpan",1),o(d,"rowSpan",1);for(i=b;i<h;i++)a.appendChild(s(a.cells[b-1]));for(i=h;i<b;i++)e.remove(a.cells[i]);c?f.parentNode.insertBefore(a,f):e.insertAfter(a,f)})}function G(a){var c;return b(g,function(d,e){return b(d,function(b,d){if(b.elm==a)return c={x:d,y:e},!1}),!c}),c}function H(a){h=G(a)}function I(){var a,c,d;return c=d=0,b(g,function(a,e){b(a,function(a,b){var f,h;p(a)&&(a=g[e][b],b>c&&(c=b),e>d&&(d=e),a.real&&(f=a.colspan-1,h=a.rowspan-1,f&&b+f>c&&(c=b+f),h&&e+h>d&&(d=e+h)))})}),{x:c,y:d}}function J(a){var b,c,d,f,i,k,l,m;j=G(a);if(h&&j){b=Math.min(h.x,j.x),c=Math.min(h.y,j.y),d=Math.max(h.x,j.x),f=Math.max(h.y,j.y),i=d,k=f;for(y=c;y<=k;y++)a=g[y][b],a.real||b-(a.colspan-1)<b&&(b-=a.colspan-1);for(x=b;x<=i;x++)a=g[c][x],a.real||c-(a.rowspan-1)<c&&(c-=a.rowspan-1);for(y=c;y<=f;y++)for(x=b;x<=d;x++)a=g[y][x],a.real&&(l=a.colspan-1,m=a.rowspan-1,l&&x+l>i&&(i=x+l),m&&y+m>k&&(k=y+m));e.removeClass(e.select("td.mceSelected,th.mceSelected"),"mceSelected");for(y=c;y<=k;y++)for(x=b;x<=i;x++)g[y][x]&&e.addClass(g[y][x].elm,"mceSelected")}}var g,h,j,k;m(),k=e.getParent(f.getStart(),"th,td"),k&&(h=G(k),j=I(),k=n(h.x,h.y)),a.extend(this,{deleteTable:r,split:v,merge:w,insertRow:z,insertCol:A,deleteCols:B,deleteRows:C,cutRows:D,copyRows:E,pasteRows:F,getPos:G,setStartCell:H,setEndCell:J})}var b=a.each;a.create("tinymce.plugins.TablePlugin",{init:function(f,g){function k(a){var b=f.selection,c=f.dom.getParent(a||b.getNode(),"table");if(c)return new e(c,f.dom,b)}function l(){f.getBody().style.webkitUserSelect="",j&&(f.dom.removeClass(f.dom.select("td.mceSelected,th.mceSelected"),"mceSelected"),j=!1)}var h,i,j=!0;b([["table","table.desc","mceInsertTable",!0],["delete_table","table.del","mceTableDelete"],["delete_col","table.delete_col_desc","mceTableDeleteCol"],["delete_row","table.delete_row_desc","mceTableDeleteRow"],["col_after","table.col_after_desc","mceTableInsertColAfter"],["col_before","table.col_before_desc","mceTableInsertColBefore"],["row_after","table.row_after_desc","mceTableInsertRowAfter"],["row_before","table.row_before_desc","mceTableInsertRowBefore"],["row_props","table.row_desc","mceTableRowProps",!0],["cell_props","table.cell_desc","mceTableCellProps",!0],["split_cells","table.split_cells_desc","mceTableSplitCells",!0],["merge_cells","table.merge_cells_desc","mceTableMergeCells",!0]],function(a){f.addButton(a[0],{title:a[1],cmd:a[2],ui:a[3]})}),a.isIE||f.onClick.add(function(a,b){b=b.target,b.nodeName==="TABLE"&&(a.selection.select(b),a.nodeChanged())}),f.onPreProcess.add(function(a,b){var c,d,e,f=a.dom,g;c=f.select("table",b.node),d=c.length;while(d--){e=c[d],f.setAttrib(e,"data-mce-style","");if(g=f.getAttrib(e,"width"))f.setStyle(e,"width",g),f.setAttrib(e,"width","");if(g=f.getAttrib(e,"height"))f.setStyle(e,"height",g),f.setAttrib(e,"height","")}}),f.onNodeChange.add(function(a,b,c){var d;c=a.selection.getStart(),d=a.dom.getParent(c,"td,th,caption"),b.setActive("table",c.nodeName==="TABLE"||!!d),d&&d.nodeName==="CAPTION"&&(d=0),b.setDisabled("delete_table",!d),b.setDisabled("delete_col",!d),b.setDisabled("delete_table",!d),b.setDisabled("delete_row",!d),b.setDisabled("col_after",!d),b.setDisabled("col_before",!d),b.setDisabled("row_after",!d),b.setDisabled("row_before",!d),b.setDisabled("row_props",!d),b.setDisabled("cell_props",!d),b.setDisabled("split_cells",!d),b.setDisabled("merge_cells",!d)}),f.onInit.add(function(e){function p(a,b,c,d){var e=3,f=a.dom.getParent(b.startContainer,"TABLE"),g,h,i;return f&&(g=f.parentNode),h=b.startContainer
.nodeType==e&&b.startOffset==0&&b.endOffset==0&&d&&(c.nodeName=="TR"||c==g),i=(c.nodeName=="TD"||c.nodeName=="TH")&&!d,h||i}function q(b){if(!a.isWebKit)return;var c=b.selection.getRng(),d=b.selection.getNode(),e=b.dom.getParent(c.startContainer,"TD,TH");if(!p(b,c,d,e))return;e||(e=d);var f=e.lastChild;while(f.lastChild)f=f.lastChild;c.setEnd(f,f.nodeValue.length),b.selection.setRng(c)}var f,g,n=e.dom,o;h=e.windowManager,e.onMouseDown.add(function(a,b){b.button!=2&&(l(),g=n.getParent(b.target,"td,th"),f=n.getParent(g,"table"))}),n.bind(e.getDoc(),"mouseover",function(a){var b,c,d=a.target;if(g&&(o||d!=g)&&(d.nodeName=="TD"||d.nodeName=="TH")){c=n.getParent(d,"table"),c==f&&(o||(o=k(c),o.setStartCell(g),e.getBody().style.webkitUserSelect="none"),o.setEndCell(d),j=!0),b=e.selection.getSel();try{b.removeAllRanges?b.removeAllRanges():b.empty()}catch(h){}a.preventDefault()}}),e.onMouseUp.add(function(b,c){var d,e=b.selection,h,i=e.getSel(),j,k,l,m;if(g){o&&(b.getBody().style.webkitUserSelect="");function p(b,c){var e=new a.dom.TreeWalker(b,b);do{if(b.nodeType==3&&a.trim(b.nodeValue).length!=0){c?d.setStart(b,0):d.setEnd(b,b.nodeValue.length);return}if(b.nodeName=="BR"){c?d.setStartBefore(b):d.setEndBefore(b);return}}while(b=c?e.next():e.prev())}h=n.select("td.mceSelected,th.mceSelected");if(h.length>0){d=n.createRng(),k=h[0],m=h[h.length-1],d.setStartBefore(k),d.setEndAfter(k),p(k,1),j=new a.dom.TreeWalker(k,n.getParent(h[0],"table"));do if(k.nodeName=="TD"||k.nodeName=="TH"){if(!n.hasClass(k,"mceSelected"))break;l=k}while(k=j.next());p(l),e.setRng(d)}b.nodeChanged(),g=o=f=null}}),e.onKeyUp.add(function(a,b){l()}),e.onKeyDown.add(function(a,b){q(a)}),e.onMouseDown.add(function(a,b){b.button!=2&&q(a)}),e.plugins.table.fixTableCellSelection=q,e&&e.plugins.contextmenu&&e.plugins.contextmenu.onContextMenu.add(function(a,b,c){var d,f=e.selection,g=f.getNode()||e.getBody();e.dom.getParent(c,"td")||e.dom.getParent(c,"th")||e.dom.select("td.mceSelected,th.mceSelected").length?(b.removeAll(),g.nodeName=="A"&&!e.dom.getAttrib(g,"name")&&(b.add({title:"advanced.link_desc",icon:"link",cmd:e.plugins.advlink?"mceAdvLink":"mceLink",ui:!0}),b.add({title:"advanced.unlink_desc",icon:"unlink",cmd:"UnLink"}),b.addSeparator()),g.nodeName=="IMG"&&g.className.indexOf("mceItem")==-1&&(b.add({title:"advanced.image_desc",icon:"image",cmd:e.plugins.advimage?"mceAdvImage":"mceImage",ui:!0}),b.addSeparator()),b.add({title:"table.desc",icon:"table",cmd:"mceInsertTable",value:{action:"insert"}}),b.add({title:"table.props_desc",icon:"table_props",cmd:"mceInsertTable"}),b.add({title:"table.del",icon:"delete_table",cmd:"mceTableDelete"}),b.addSeparator(),d=b.addMenu({title:"table.cell"}),d.add({title:"table.cell_desc",icon:"cell_props",cmd:"mceTableCellProps"}),d.add({title:"table.split_cells_desc",icon:"split_cells",cmd:"mceTableSplitCells"}),d.add({title:"table.merge_cells_desc",icon:"merge_cells",cmd:"mceTableMergeCells"}),d=b.addMenu({title:"table.row"}),d.add({title:"table.row_desc",icon:"row_props",cmd:"mceTableRowProps"}),d.add({title:"table.row_before_desc",icon:"row_before",cmd:"mceTableInsertRowBefore"}),d.add({title:"table.row_after_desc",icon:"row_after",cmd:"mceTableInsertRowAfter"}),d.add({title:"table.delete_row_desc",icon:"delete_row",cmd:"mceTableDeleteRow"}),d.addSeparator(),d.add({title:"table.cut_row_desc",icon:"cut",cmd:"mceTableCutRow"}),d.add({title:"table.copy_row_desc",icon:"copy",cmd:"mceTableCopyRow"}),d.add({title:"table.paste_row_before_desc",icon:"paste",cmd:"mceTablePasteRowBefore"}).setDisabled(!i),d.add({title:"table.paste_row_after_desc",icon:"paste",cmd:"mceTablePasteRowAfter"}).setDisabled(!i),d=b.addMenu({title:"table.col"}),d.add({title:"table.col_before_desc",icon:"col_before",cmd:"mceTableInsertColBefore"}),d.add({title:"table.col_after_desc",icon:"col_after",cmd:"mceTableInsertColAfter"}),d.add({title:"table.delete_col_desc",icon:"delete_col",cmd:"mceTableDeleteCol"})):b.add({title:"table.desc",icon:"table",cmd:"mceInsertTable"})});if(a.isWebKit){function r(c,e){function h(b,d,e){var f=b?"previousSibling":"nextSibling",g=c.dom.getParent(d,"tr"),h=g[f];if(h)return s(c,d,h,b),a.dom.Event.cancel(e),!0;var j=c.dom.getParent(g,"table"),m=g.parentNode,n=m.nodeName.toLowerCase();if(n==="tbody"||n===(b?"tfoot":"thead")){var o=i(b,j,m,"tbody");if(o!==null)return k(b,o,d,e)}return l(b,g,f,j,e)}function i(a,b,d,e){var f=c.dom.select(">"+e,b),g=f.indexOf(d);if(a&&g===0||!a&&g===f.length-1)return j(a,b);if(g===-1){var h=d.tagName.toLowerCase()==="thead"?0:f.length-1;return f[h]}return f[g+(a?-1:1)]}function j(a,b){var d=a?"thead":"tfoot",e=c.dom.select(">"+d,b);return e.length!==0?e[0]:null}function k(b,d,e,f){var g=m(d,b);return g&&s(c,e,g,b),a.dom.Event.cancel(f),!0}function l(b,d,e,f,g){var i=f[e];if(i)return n(i),!0;var j=c.dom.getParent(f,"td,th");if(j)return h(b,j,g);var k=m(d,!b);return n(k),a.dom.Event.cancel(g)}function m(a,b){return a&&a[b?"lastChild":"firstChild"]}function n(a){c.selection.setCursorLocation(a,0)}function o(){return g==f.UP||g==f.DOWN}function p(a){var b=a.selection.getNode(),c=a.dom.getParent(b,"tr");return c!==null}function q(a){var b=0,c=a;while(c.previousSibling)c=c.previousSibling,b+=d(c,"colspan");return b}function r(a,c){var e=0,f=0;return b(a.children,function(a,b){e+=d(a,"colspan"),f=b;if(e>c)return!1}),f}function s(a,b,c,d){var e=q(a.dom.getParent(b,"td,th")),f=r(c,e),g=c.childNodes[f],h=m(g,d);n(h||g)}function t(a){var b=c.selection.getNode(),d=c.dom.getParent(b,"td,th"),e=c.dom.getParent(a,"td,th");return d&&d!==e&&u(d,e)}function u(a,b){return c.dom.getParent(a,"TABLE")===c.dom.getParent(b,"TABLE")}var f=a.VK,g=e.keyCode;if(o()&&p(c)){var v=c.selection.getNode();setTimeout(function(){t(v)&&h(!e.shiftKey&&g===f.UP,v,e)},0)}}e.onKeyDown.add(r)}if(!a.isIE){function s(){var a;for(a=e.getBody().lastChild;a&&a.nodeType==3&&!a.nodeValue.length;a=a.previousSibling);a&&a.nodeName=="TABLE"&&e.dom.add(e.getBody(),"p",null,'<br mce_bogus="1" />')}a.isGecko&&e.onKeyDown.add(function(a,b){var d,e,f=a.dom;if(b.keyCode==37||b.keyCode==38)d=a.selection.getRng(),e=f.getParent(d.startContainer,"table"),e&&a.getBody().firstChild==e&&c(d,e)&&(d=f.createRng(),d.setStartBefore(e),d.setEndBefore(e),a.selection.setRng(d),b.preventDefault())}),e.onKeyUp.add(s),e.onSetContent.add(s),e.onVisualAid.add(s),e.onPreProcess.add(function(a,b){var c=b.node.lastChild;c&&c.childNodes.length==1&&c.firstChild.nodeName=="BR"&&a.dom.remove(c)}),s(),e.startContent=e.getContent({format:"raw"})}}),b({mceTableSplitCells:function(a){a.split()},mceTableMergeCells:function(a){var b,c,d;d=f.dom.getParent(f.selection.getNode(),"th,td"),d&&(b=d.rowSpan,c=d.colSpan),f.dom.select("td.mceSelected,th.mceSelected").length?a.merge():h.open({url:g+"/merge_cells.htm",width:240+parseInt(f.getLang("table.merge_cells_delta_width",0)),height:110+parseInt(f.getLang("table.merge_cells_delta_height",0)),inline:1},{rows:b,cols:c,onaction:function(b){a.merge(d,b.cols,b.rows)},plugin_url:g})},mceTableInsertRowBefore:function(a){a.insertRow(!0)},mceTableInsertRowAfter:function(a){a.insertRow()},mceTableInsertColBefore:function(a){a.insertCol(!0)},mceTableInsertColAfter:function(a){a.insertCol()},mceTableDeleteCol:function(a){a.deleteCols()},mceTableDeleteRow:function(a){a.deleteRows()},mceTableCutRow:function(a){i=a.cutRows()},mceTableCopyRow:function(a){i=a.copyRows()},mceTablePasteRowBefore:function(a){a.pasteRows(i,!0)},mceTablePasteRowAfter:function(a){a.pasteRows(i)},mceTableDelete:function(a){a.deleteTable()}},function(a,b){f.addCommand(b,function(){var b=k();b&&(a(b),f.execCommand("mceRepaint"),l())})}),b({mceInsertTable:function(a){h.open({url:g+"/table.htm",width:400+parseInt(f.getLang("table.table_delta_width",0)),height:320+parseInt(f.getLang("table.table_delta_height",0)),inline:1},{plugin_url:g,action:a?a.action:0})},mceTableRowProps:function(){h.open({url:g+"/row.htm",width:400+parseInt(f.getLang("table.rowprops_delta_width",0)),height:295+parseInt(f.getLang("table.rowprops_delta_height",0)),inline:1},{plugin_url:g})},mceTableCellProps:function(){h.open({url:g+"/cell.htm",width:400+parseInt(f.getLang("table.cellprops_delta_width",0)),height:295+parseInt(f.getLang("table.cellprops_delta_height",0)),inline:1},{plugin_url:g})}},function(a,b){f.addCommand(b,function(b,c){a(c)})})}}),a.PluginManager.add("table",a.plugins.TablePlugin)}(tinymce),function(a){function c(a,b){var c=b.ownerDocument,d=c.createRange(),e;return d.setStartBefore(b),d.setEnd(a.endContainer,a.endOffset),e=c.createElement("body"),e.appendChild(d.cloneContents()),e.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length==0}function d(a,b){return parseInt(a.getAttribute(b)||1)}function e(c,e,f){function l(a,b){return a=a.cloneNode(b),a.removeAttribute("id"),a}function m(){var a=0;g=[],b(["thead","tbody","tfoot"],function(f){var h=e.select("> "+f+" tr",c);b(h,function(c,h){h+=a,b(e.select("> td, > th",c),function(a,b){var c,e,i,j;if(g[h])while(g[h][b])b++;i=d(a,"rowspan"),j=d(a,"colspan");for(e=h;e<h+i;e++){g[e]||(g[e]=[]);for(c=b;c<b+j;c++)g[e][c]={part:f,real:e==h&&c==b,elm:a,rowspan:i,colspan:j}}})}),a+=h.length})}function n(a,b){var c;c=g[b];if(c)return c[a]}function o(a,b,c){a&&(c=parseInt(c),c===1?a.removeAttribute(b,1):a.setAttribute(b,c,1))}function p(a){return a&&(e.hasClass(a.elm,"mceSelected")||a==k)}function q(){var a=[];return b(c.rows,function(c){b(c.cells,function(b){if(e.hasClass(b,"mceSelected")||b==k.elm)return a.push(c),!1})}),a}function r(){var a=e.createRng();a.setStartAfter(c),a.setEndAfter(c),f.setRng(a),e.remove(c)}function s(c){var d;return a.walk(c,function(f){var g;if(f.nodeType==3)return b(e.getParents(f.parentNode,null,c).reverse(),function(a){a=l(a,!1),d?g&&g.appendChild(a):d=g=a,g=a}),g&&(g.innerHTML=a.isIE?"&nbsp;":'<br data-mce-bogus="1" />'),!1},"childNodes"),c=l(c,!1),o(c,"rowSpan",1),o(c,"colSpan",1),d?c.appendChild(d):a.isIE||(c.innerHTML='<br data-mce-bogus="1" />'),c}function t(){var a=e.createRng();b(e.select("tr",c),function(a){a.cells.length==0&&e.remove(a)});if(e.select("tr",c).length==0){a.setStartAfter(c),a.setEndAfter(c),f.setRng(a),e.remove(c);return}b(e.select("thead,tbody,tfoot",c),function(a){a.rows.length==0&&e.remove(a)}),m(),row=g[Math.min(g.length-1,h.y)],row&&(f.select(row[Math.min(row.length-1,h.x)].elm,!0),f.collapse(!0))}function u(a,b,c,d){var f,h,i,j,k;f=g[b][a].elm.parentNode;for(i=1;i<=c;i++){f=e.getNext(f,"tr");if(f){for(h=a;h>=0;h--){k=g[b+i][h].elm;if(k.parentNode==f){for(j=1;j<=d;j++)e.insertAfter(s(k),k);break}}if(h==-1)for(j=1;j<=d;j++)f.insertBefore(s(f.cells[0]),f.cells[0])}}}function v(){b(g,function(a,c){b(a,function(a,b){var f,g,h,i;if(p(a)){a=a.elm,f=d(a,"colspan"),g=d(a,"rowspan");if(f>1||g>1){o(a,"rowSpan",1),o(a,"colSpan",1);for(i=0;i<f-1;i++)e.insertAfter(s(a),a);u(b,c,g-1,f)}}})})}function w(c,d,f){var i,k,l,p,q,r,s,u,c,w,x;c?(pos=G(c),i=pos.x,k=pos.y,l=i+(d-1),p=k+(f-1)):(i=h.x,k=h.y,l=j.x,p=j.y),s=n(i,k),u=n(l,p);if(s&&u&&s.part==u.part){v(),m(),s=n(i,k).elm,o(s,"colSpan",l-i+1),o(s,"rowSpan",p-k+1);for(r=k;r<=p;r++)for(q=i;q<=l;q++){if(!g[r]||!g[r][q])continue;c=g[r][q].elm,c!=s&&(w=a.grep(c.childNodes),b(w,function(a){s.appendChild(a)}),w.length&&(w=a.grep(s.childNodes),x=0,b(w,function(a){a.nodeName=="BR"&&e.getAttrib(a,"data-mce-bogus")&&x++<w.length-1&&s.removeChild(a)})),e.remove(c))}t()}}function z(a){var c,f,h,i,j,k,m,n,q;b(g,function(d,e){b(d,function(b,d){if(p(b)){b=b.elm,j=b.parentNode,k=l(j,!1),c=e;if(a)return!1}});if(a)return!c});for(i=0;i<g[0].length;i++){if(!g[c][i])continue;f=g[c][i].elm;if(f!=h){if(!a){q=d(f,"rowspan");if(q>1){o(f,"rowSpan",q+1);continue}}else if(c>0&&g[c-1][i]){n=g[c-1][i].elm,q=d(n,"rowSpan");if(q>1){o(n,"rowSpan",q+1);continue}}m=s(f),o(m,"colSpan",f.colSpan),k.appendChild(m),h=f}}k.hasChildNodes()&&(a?j.parentNode.insertBefore(k,j):e.insertAfter(k,j))}function A(a){var c,f;b(g,function(d,e){b(d,function(b,d){if(p(b)){c=d;if(a)return!1}});if(a)return!c}),b(g,function(b,g){var h,i,j;if(!b[c])return;h=b[c].elm,h!=f&&(j=d(h,"colspan"),i=d(h,"rowspan"),j==1?a?(h.parentNode.insertBefore(s(h),h),u(c,g,i-1,j)):(e.insertAfter(s(h),h),u(c,g,i-1,j)):o(h,"colSpan",h.colSpan+1),f=h)})}function B(){var c=[];b(g,function(f,h){b(f,function(f,h){p(f)&&a.inArray(c,h)===-1&&(b(g,function(a){var b=a[h].elm,c;c=d(b,"colSpan"),c>1?o(b,"colSpan",c-1):e.remove(b)}),c.push(h))})}),t()}function C(){function c(a){var c,f,h;c=e.getNext(a,"tr"),b(a.cells,function(a){var b=d(a,"rowSpan");b>1&&(o(a,"rowSpan",b-1),f=G(a),u(f.x,f.y,1,1))}),f=G(a.cells[0]),b(g[f.y],function(a){var b;a=a.elm,a!=h&&(b=d(a,"rowSpan"),b<=1?e.remove(a):o(a,"rowSpan",b-1),h=a)})}var a;a=q(),b(a.reverse(),function(a){c(a)}),t()}function D(){var a=q();return e.remove(a),t(),a}function E(){var a=q();return b(a,function(b,c){a[c]=l(b,!0)}),a}function F(a,c){var d=q(),f=d[c?0:d.length-1],h=f.cells.length;b(g,function(a){var c;h=0,b(a,function(a,b){a.real&&(h+=a.colspan),a.elm.parentNode==f&&(c=1)});if(c)return!1}),c||a.reverse(),b(a,function(a){var b=a.cells.length,d;for(i=0;i<b;i++)d=a.cells[i],o(d,"colSpan",1),o(d,"rowSpan",1);for(i=b;i<h;i++)a.appendChild(s(a.cells[b-1]));for(i=h;i<b;i++)e.remove(a.cells[i]);c?f.parentNode.insertBefore(a,f):e.insertAfter(a,f)})}function G(a){var c;return b(g,function(d,e){return b(d,function(b,d){if(b.elm==a)return c={x:d,y:e},!1}),!c}),c}function H(a){h=G(a)}function I(){var a,c,d;return c=d=0,b(g,function(a,e){b(a,function(a,b){var f,h;p(a)&&(a=g[e][b],b>c&&(c=b),e>d&&(d=e),a.real&&(f=a.colspan-1,h=a.rowspan-1,f&&b+f>c&&(c=b+f),h&&e+h>d&&(d=e+h)))})}),{x:c,y:d}}function J(a){var b,c,d,f,i,k,l,m;j=G(a);if(h&&j){b=Math.min(h.x,j.x),c=Math.min(h.y,j.y),d=Math.max(h.x,j.x),f=Math.max(h.y,j.y),i=d,k=f;for(y=c;y<=k;y++)a=g[y][b],a.real||b-(a.colspan-1)<b&&(b-=a.colspan-1);for(x=b;x<=i;x++)a=g[c][x],a.real||c-(a.rowspan-1)<c&&(c-=a.rowspan-1);for(y=c;y<=f;y++)for(x=b;x<=d;x++)a=g[y][x],a.real&&(l=a.colspan-1,m=a.rowspan-1,l&&x+l>i&&(i=x+l),m&&y+m>k&&(k=y+m));e.removeClass(e.select("td.mceSelected,th.mceSelected"),"mceSelected");for(y=c;y<=k;y++)for(x=b;x<=i;x++)g[y][x]&&e.addClass(g[y][x].elm,"mceSelected")}}var g,h,j,k;m(),k=e.getParent(f.getStart(),"th,td"),k&&(h=G(k),j=I(),k=n(h.x,h.y)),a.extend(this,{deleteTable:r,split:v,merge:w,insertRow:z,insertCol:A,deleteCols:B,deleteRows:C,cutRows:D,copyRows:E,pasteRows:F,getPos:G,setStartCell:H,setEndCell:J})}var b=a.each;a.create("tinymce.plugins.TablePlugin",{init:function(f,g){function k(a){var b=f.selection,c=f.dom.getParent(a||b.getNode(),"table");if(c)return new e(c,f.dom,b)}function l(){f.getBody().style.webkitUserSelect="",j&&(f.dom.removeClass(f.dom.select("td.mceSelected,th.mceSelected"),"mceSelected"),j=!1)}var h,i,j=!0;b([["table","table.desc","mceInsertTable",!0],["delete_table","table.del","mceTableDelete"],["delete_col","table.delete_col_desc","mceTableDeleteCol"],["delete_row","table.delete_row_desc","mceTableDeleteRow"],["col_after","table.col_after_desc","mceTableInsertColAfter"],["col_before","table.col_before_desc","mceTableInsertColBefore"],["row_after","table.row_after_desc","mceTableInsertRowAfter"],["row_before","table.row_before_desc","mceTableInsertRowBefore"],["row_props","table.row_desc","mceTableRowProps",!0],["cell_props","table.cell_desc","mceTableCellProps",!0],["split_cells","table.split_cells_desc","mceTableSplitCells",!0],["merge_cells","table.merge_cells_desc","mceTableMergeCells",!0]],function(a){f.addButton(a[0],{title:a[1],cmd:a[2],ui:a[3]})}),a.isIE||f.onClick.add(function(a,b){b=b.target,b.nodeName==="TABLE"&&(a.selection.select(b),a.nodeChanged())}),f.onPreProcess.add(function(a,b){var c,d,e,f=a.dom,g;c=f.select("table",b.node),d=c.length;while(d--){e=c[d],f.setAttrib(e,"data-mce-style","");if(g=f.getAttrib(e,"width"))f.setStyle(e,"width",g),f.setAttrib(e,"width","");if(g=f.getAttrib(e,"height"))f.setStyle(e,"height",g),f.setAttrib(e,"height","")}}),f.onNodeChange.add(function(a,b,c){var d;c=a.selection.getStart(),d=a.dom.getParent(c,"td,th,caption"),b.setActive("table",c.nodeName==="TABLE"||!!d),d&&d.nodeName==="CAPTION"&&(d=0),b.setDisabled("delete_table",!d),b.setDisabled("delete_col",!d),b.setDisabled("delete_table",!d),b.setDisabled("delete_row",!d),b.setDisabled("col_after",!d),b.setDisabled("col_before",!d),b.setDisabled("row_after",!d),b.setDisabled("row_before",!d),b.setDisabled("row_props",!d),b.setDisabled("cell_props",!d),b.setDisabled("split_cells",!d),b.setDisabled("merge_cells",!d)}),f.onInit.add(function(e){function o(a,b,c,d){var e=3,f=a.dom.getParent(b.startContainer,"TABLE"),g,h,i;return f&&(g=f.parentNode),h=b.startContainer.nodeType==e&&b.startOffset==0&&b.endOffset==0&&d&&(c.nodeName=="TR"||c==g),i=(c.nodeName=="TD"||c.nodeName=="TH")&&!d,h||i}function p(b){if(!a.isWebKit)return;var c=b.selection.getRng(),d=b.selection.getNode(),e=b.dom.getParent(c.startContainer,"TD,TH");if(!o(b,c,d,e))return;e||(e=d);var f=e.lastChild;while(f.lastChild)f=f.lastChild;c.setEnd(f,f.nodeValue.length),b.selection.setRng(c)}var f,g,m=e.dom,n;h=e.windowManager,e.onMouseDown.add(function(a,b){b.button!=2&&(l(),g=m.getParent(b.target,"td,th"),f=m.getParent(g,"table"))}),m.bind(e.getDoc(),"mouseover",function(a){var b,c,d=a.target;if(g&&(n||d!=g)&&(d.nodeName=="TD"||d.nodeName=="TH")){c=m.getParent(d,"table"),c==f&&(n||(n=k(c),n.setStartCell(g),e.getBody().style.webkitUserSelect="none"),n.setEndCell(d),j=!0),b=e.selection.getSel();try{b.removeAllRanges?b.removeAllRanges():b.empty()}catch(h){}a.preventDefault()}}),e.onMouseUp.add(function(b,c){var d,e=b.selection,h,i=e.getSel(),j,k,l,o;if(g){n&&(b.getBody().style.webkitUserSelect="");function p(b,c){var e=new a.dom.TreeWalker(b,b);do{if(b.nodeType==3&&a.trim(b.nodeValue).length!=0){c?d.setStart(b,0):d.setEnd(b,b.nodeValue.length);return}if(b.nodeName=="BR"){c?d.setStartBefore(b):d.setEndBefore(b);return}}while(b=c?e.next():e.prev())}h=m.select("td.mceSelected,th.mceSelected");if(h.length>0){d=m.createRng(),k=h[0],o=h[h.length-1],d.setStartBefore(k),d.setEndAfter(k),p(k,1),j=new a.dom.TreeWalker(k,m.getParent(h[0],"table"));do if(k.nodeName=="TD"||k.nodeName=="TH"){if(!m.hasClass(k,"mceSelected"))break;l=k}while(k=j.next());p(l),e.setRng(d)}b.nodeChanged(),g=n=f=null}}),e.onKeyUp.add(function(a,b){l()}),e.onKeyDown.add(function(a,b){p(a)}),e.onMouseDown.add(function(a,b){b.button!=2&&p(a)}),e.plugins.table.fixTableCellSelection=p,e&&e.plugins.contextmenu&&e.plugins.contextmenu.onContextMenu.add(function(a,b,c){var d,f=e.selection,g=f.getNode()||e.getBody();e.dom.getParent(c,"td")||e.dom.getParent(c,"th")||e.dom.select("td.mceSelected,th.mceSelected").length?(b.removeAll(),g.nodeName=="A"&&!e.dom.getAttrib(g,"name")&&(b.add({title:"advanced.link_desc",icon:"link",cmd:e.plugins.advlink?"mceAdvLink":"mceLink",ui:!0}),b.add({title:"advanced.unlink_desc",icon:"unlink",cmd:"UnLink"}),b.addSeparator()),g.nodeName=="IMG"&&g.className.indexOf("mceItem")==-1&&(b.add({title:"advanced.image_desc",icon:"image",cmd:e.plugins.advimage?"mceAdvImage":"mceImage",ui:!0}),b.addSeparator()),b.add({title:"table.desc",icon:"table",cmd:"mceInsertTable",value:{action:"insert"}}),b.add({title:"table.props_desc",icon:"table_props",cmd:"mceInsertTable"}),b.add({title:"table.del",icon:"delete_table",cmd:"mceTableDelete"}),b.addSeparator(),d=b.addMenu({title:"table.cell"}),d.add({title:"table.cell_desc",icon:"cell_props",cmd:"mceTableCellProps"}),d.add({title:"table.split_cells_desc",icon:"split_cells",cmd:"mceTableSplitCells"}),d.add({title:"table.merge_cells_desc",icon:"merge_cells",cmd:"mceTableMergeCells"}),d=b.addMenu({title:"table.row"}),d.add({title:"table.row_desc",icon:"row_props",cmd:"mceTableRowProps"}),d.add({title:"table.row_before_desc",icon:"row_before",cmd:"mceTableInsertRowBefore"}),d.add({title:"table.row_after_desc",icon:"row_after",cmd:"mceTableInsertRowAfter"}),d.add({title:"table.delete_row_desc",icon:"delete_row",cmd:"mceTableDeleteRow"}),d.addSeparator(),d.add({title:"table.cut_row_desc",icon:"cut",cmd:"mceTableCutRow"}),d.add({title:"table.copy_row_desc",icon:"copy",cmd:"mceTableCopyRow"}),d.add({title:"table.paste_row_before_desc",icon:"paste",cmd:"mceTablePasteRowBefore"}).setDisabled(!i),d.add({title:"table.paste_row_after_desc",icon:"paste",cmd:"mceTablePasteRowAfter"}).setDisabled(!i),d=b.addMenu({title:"table.col"}),d.add({title:"table.col_before_desc",icon:"col_before",cmd:"mceTableInsertColBefore"}),d.add({title:"table.col_after_desc",icon:"col_after",cmd:"mceTableInsertColAfter"}),d.add({title:"table.delete_col_desc",icon:"delete_col",cmd:"mceTableDeleteCol"})):b.add({title:"table.desc",icon:"table",cmd:"mceInsertTable"})});if(a.isWebKit){function q(c,e){function h(b,d,e){var f=b?"previousSibling":"nextSibling",g=c.dom.getParent(d,"tr"),h=g[f];if(h)return s(c,d,h,b),a.dom.Event.cancel(e),!0;var j=c.dom.getParent(g,"table"),m=g.parentNode,n=m.nodeName.toLowerCase();if(n==="tbody"||n===(b?"tfoot":"thead")){var o=i(b,j,m,"tbody");if(o!==null)return k(b,o,d,e)}return l(b,g,f,j,e)}function i(a,b,d,e){var f=c.dom.select(">"+e,b),g=f.indexOf(d);if(a&&g===0||!a&&g===f.length-1)return j(a,b);if(g===-1){var h=d.tagName.toLowerCase()==="thead"?0:f.length-1;return f[h]}return f[g+(a?-1:1)]}function j(a,b){var d=a?"thead":"tfoot",e=c.dom.select(">"+d,b);return e.length!==0?e[0]:null}function k(b,d,e,f){var g=m(d,b);return g&&s(c,e,g,b),a.dom.Event.cancel(f),!0}function l(b,d,e,f,g){var i=f[e];if(i)return n(i),!0;var j=c.dom.getParent(f,"td,th");if(j)return h(b,j,g);var k=m(d,!b);return n(k),a.dom.Event.cancel(g)}function m(a,b){return a&&a[b?"lastChild":"firstChild"]}function n(a){c.selection.setCursorLocation(a,0)}function o(){return g==f.UP||g==f.DOWN}function p(a){var b=a.selection.getNode(),c=a.dom.getParent(b,"tr");return c!==null}function q(a){var b=0,c=a;while(c.previousSibling)c=c.previousSibling,b+=d(c,"colspan");return b}function r(a,c){var e=0,f=0;return b(a.children,function(a,b){e+=d(a,"colspan"),f=b;if(e>c)return!1}),f}function s(a,b,c,d){var e=q(a.dom.getParent(b,"td,th")),f=r(c,e),g=c.childNodes[f],h=m(g,d);n(h||g)}function t(a){var b=c.selection.getNode(),d=c.dom.getParent(b,"td,th"),e=c.dom.getParent(a,"td,th");return d&&d!==e&&u(d,e)}function u(a,b){return c.dom.getParent(a,"TABLE")===c.dom.getParent(b,"TABLE")}var f=a.VK,g=e.keyCode;if(o()&&p(c)){var v=c.selection.getNode();setTimeout(function(){t(v)&&h(!e.shiftKey&&g===f.UP,v,e)},0)}}e.onKeyDown.add(q)}if(!a.isIE){function r(){var a;for(a=e.getBody().lastChild;a&&a.nodeType==3&&!a.nodeValue.length;a=a.previousSibling);a&&a.nodeName=="TABLE"&&e.dom.add(e.getBody(),"p",null,'<br mce_bogus="1" />')}a.isGecko&&e.onKeyDown.add(function(a,b){var d,e,f=a.dom;if(b.keyCode==37||b.keyCode==38)d=a.selection.getRng(),e=f.getParent(d.startContainer,"table"),e&&a.getBody().firstChild==e&&c(d,e)&&(d=f.createRng(),d.setStartBefore(e),d.setEndBefore(e),a.selection.setRng(d),b.preventDefault())}),e.onKeyUp.add(r),e.onSetContent.add(r),e.onVisualAid.add(r),e.onPreProcess.add(function(a,b){var c=b.node.lastChild;c&&c.childNodes.length==1&&c.firstChild.nodeName=="BR"&&a.dom.remove(c)}),r(),e.startContent=e.getContent({format:"raw"})}}),b({mceTableSplitCells:function(a){a.split()},mceTableMergeCells:function(a){var b,c,d;d=f.dom.getParent(f.selection.getNode(),"th,td"),d&&(b=d.rowSpan,c=d.colSpan),f.dom.select("td.mceSelected,th.mceSelected").length?a.merge():h.open({url:g+"/merge_cells.htm",width:240+parseInt(f.getLang("table.merge_cells_delta_width",0)),height:110+parseInt(f.getLang("table.merge_cells_delta_height",0)),inline:1},{rows:b,cols:c,onaction:function(b){a.merge(d,b.cols,b.rows)},plugin_url:g})},mceTableInsertRowBefore:function(a){a.insertRow(!0)},mceTableInsertRowAfter:function(a){a.insertRow()},mceTableInsertColBefore:function(a){a.insertCol(!0)},mceTableInsertColAfter:function(a){a.insertCol()},mceTableDeleteCol:function(a){a.deleteCols()},mceTableDeleteRow:function(a){a.deleteRows()},mceTableCutRow:function(a){i=a.cutRows()},mceTableCopyRow:function(a){i=a.copyRows()},mceTablePasteRowBefore:function(a){a.pasteRows(i,!0)},mceTablePasteRowAfter:function(a){a.pasteRows(i)},mceTableDelete:function(a){a.deleteTable()}},function(a,b){f.addCommand(b,function(){var b=k();b&&(a(b),f.execCommand("mceRepaint"),l())})}),b({mceInsertTable:function(a){h.open({url:g+"/table.htm",width:400+parseInt(f.getLang("table.table_delta_width",0)),height:320+parseInt(f.getLang("table.table_delta_height",0)),inline:1},{plugin_url:g,action:a?a.action:0})},mceTableRowProps:function(){h.open({url:g+"/row.htm",width:400+parseInt(f.getLang("table.rowprops_delta_width",0)),height:295+parseInt(f.getLang("table.rowprops_delta_height",0)),inline:1},{plugin_url:g})},mceTableCellProps:function(){h.open({url:g+"/cell.htm",width:400+parseInt(f.getLang("table.cellprops_delta_width",0)),height:295+parseInt(f.getLang("table.cellprops_delta_height",0)),inline:1},{plugin_url:g})}},function(a,b){f.addCommand(b,function(b,c){a(c)})})}}),a.PluginManager.add("table",a.plugins.TablePlugin)}(tinymce),tinyMCEPopup.requireLangPack();var ed;tinyMCEPopup.onInit.add(init),tinyMCEPopup.requireLangPack();var MergeCellsDialog={init:function(){var a=document.forms[0];a.numcols.value=tinyMCEPopup.getWindowArg("cols",1),a.numrows.value=tinyMCEPopup.getWindowArg("rows",1)},merge:function(){var a,b=document.forms[0];tinyMCEPopup.restoreSelection(),a=tinyMCEPopup.getWindowArg("onaction"),a({cols:b.numcols.value,rows:b.numrows.value}),tinyMCEPopup.close()}};tinyMCEPopup.onInit.add(MergeCellsDialog.init,MergeCellsDialog),tinyMCEPopup.requireLangPack(),tinyMCEPopup.onInit.add(init),tinyMCEPopup.requireLangPack();var action,orgTableWidth,orgTableHeight,dom=tinyMCEPopup.editor.dom;tinyMCEPopup.onInit.add(init),tinyMCE.addI18n("en.table_dlg",{rules_border:"border",rules_box:"box",rules_vsides:"vsides",rules_rhs:"rhs",rules_lhs:"lhs",rules_hsides:"hsides",rules_below:"below",rules_above:"above",rules_void:"void",rules:"Rules",frame_all:"all",frame_cols:"cols",frame_rows:"rows",frame_groups:"groups",frame_none:"none",frame:"Frame",caption:"Table Caption",missing_scope:"Are you sure you want to continue without specifying a scope for this table header cell. Without it, it may be difficult for some users with disabilities to understand the content or data displayed of the table.",cell_limit:"You've exceeded the maximum number of cells of {$cells}.",row_limit:"You've exceeded the maximum number of rows of {$rows}.",col_limit:"You've exceeded the maximum number of columns of {$cols}.",colgroup:"Col Group",rowgroup:"Row Group",scope:"Scope",tfoot:"Footer",tbody:"Body",thead:"Header",row_all:"Update All Rows in Table",row_even:"Update Even Rows in Table",row_odd:"Update Odd Rows in Table",row_row:"Update Current Row",cell_all:"Update All Cells in Table",cell_row:"Update All Cells in Row",cell_cell:"Update Current Cell",th:"Header",td:"Data",summary:"Summary",bgimage:"Background Image",rtl:"Right to Left",ltr:"Left to Right",mime:"Target MIME Type",langcode:"Language Code",langdir:"Language Direction",style:"Style",id:"ID",merge_cells_title:"Merge Table Cells",bgcolor:"Background Color",bordercolor:"Border Color",align_bottom:"Bottom",align_top:"Top",valign:"Vertical Alignment",cell_type:"Cell Type",cell_title:"Table Cell Properties",row_title:"Table Row Properties",align_middle:"Center",align_right:"Right",align_left:"Left",align_default:"Default",align:"Alignment",border:"Border",cellpadding:"Cell Padding",cellspacing:"Cell Spacing",rows:"Rows",cols:"Columns",height:"Height",width:"Width",title:"Insert/Edit Table",rowtype:"Row Type",advanced_props:"Advanced Properties",general_props:"General Properties",advanced_tab:"Advanced",general_tab:"General",cell_col:"Update all cells in column"}),function(){var a=tinymce.each;tinymce.create("tinymce.plugins.TemplatePlugin",{init:function(b,c){var d=this;d.editor=b,b.addCommand("mceTemplate",function(a){b.windowManager.open({file:c+"/template.htm",width:b.getParam("template_popup_width",750),height:b.getParam("template_popup_height",600),inline:1},{plugin_url:c})}),b.addCommand("mceInsertTemplate",d._insertTemplate,d),b.addButton("template",{title:"template.desc",cmd:"mceTemplate"}),b.onPreProcess.add(function(b,c){var e=b.dom;a(e.select("div",c.node),function(c){e.hasClass(c,"mceTmpl")&&(a(e.select("*",c),function(a){e.hasClass(a,b.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(a.innerHTML=d._getDateTime(new Date,b.getParam("template_mdate_format",b.getLang("template.mdate_format"))))}),d._replaceVals(c))})})},getInfo:function(){return{longname:"Template plugin",author:"Moxiecode Systems AB",authorurl:"http://www.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/template",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_insertTemplate:function(b,c){function j(a,b){return(new RegExp("\\b"+b+"\\b","g")).test(a.className)}var d=this,e=d.editor,f,g,h=e.dom,i=e.selection.getContent();f=c.content,a(d.editor.getParam("template_replace_values"),function(a,b){typeof a!="function"&&(f=f.replace(new RegExp("\\{\\$"+b+"\\}","g"),a))}),g=h.create("div",null,f),n=h.select(".mceTmpl",g),n&&n.length>0&&(g=h.create("div",null),g.appendChild(n[0].cloneNode(!0))),a(h.select("*",g),function(a){j(a,e.getParam("template_cdate_classes","cdate").replace(/\s+/g,"|"))&&(a.innerHTML=d._getDateTime(new Date,e.getParam("template_cdate_format",e.getLang("template.cdate_format")))),j(a,e.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(a.innerHTML=d._getDateTime(new Date,e.getParam("template_mdate_format",e.getLang("template.mdate_format")))),j(a,e.getParam("template_selected_content_classes","selcontent").replace(/\s+/g,"|"))&&(a.innerHTML=i)}),d._replaceVals(g),e.execCommand("mceInsertContent",!1,g.innerHTML),e.addVisual()},_replaceVals:function(b){var c=this.editor.dom,d=this.editor.getParam("template_replace_values");a(c.select("*",b),function(b){a(d,function(a,e){c.hasClass(b,e)&&typeof d[e]=="function"&&d[e](b)})})},_getDateTime:function(a,b){function c(a,b){var c;a=""+a;if(a.length<b)for(c=0;c<b-a.length;c++)a="0"+a;return a}return b?(b=b.replace("%D","%m/%d/%y"),b=b.replace("%r","%I:%M:%S %p"),b=b.replace("%Y",""+a.getFullYear()),b=b.replace("%y",""+a.getYear()),b=b.replace("%m",c(a.getMonth()+1,2)),b=b.replace("%d",c(a.getDate(),2)),b=b.replace("%H",""+c(a.getHours(),2)),b=b.replace("%M",""+c(a.getMinutes(),2)),b=b.replace("%S",""+c(a.getSeconds(),2)),b=b.replace("%I",""+((a.getHours()+11)%12+1)),b=b.replace("%p",""+(a.getHours()<12?"AM":"PM")),b=b.replace("%B",""+this.editor.getLang("template_months_long").split(",")[a.getMonth()]),b=b.replace("%b",""+this.editor.getLang("template_months_short").split(",")[a.getMonth()]),b=b.replace("%A",""+this.editor.getLang("template_day_long").split(",")[a.getDay()]),b=b.replace("%a",""+this.editor.getLang("template_day_short").split(",")[a.getDay()]),b=b.replace("%%","%"),b):""}}),tinymce.PluginManager.add("template",tinymce.plugins.TemplatePlugin)}(),function(){var a=tinymce.each;tinymce.create("tinymce.plugins.TemplatePlugin",{init:function(b,c){var d=this;d.editor=b,b.addCommand("mceTemplate",function(a){b.windowManager.open({file:c+"/template.htm",width:b.getParam("template_popup_width",750),height:b.getParam("template_popup_height",600),inline:1},{plugin_url:c})}),b.addCommand("mceInsertTemplate",d._insertTemplate,d),b.addButton("template",{title:"template.desc",cmd:"mceTemplate"}),b.onPreProcess.add(function(b,c){var e=b.dom;a(e.select("div",c.node),function(c){e.hasClass(c,"mceTmpl")&&(a(e.select("*",c),function(a){e.hasClass(a,b.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(a.innerHTML=d._getDateTime(new Date,b.getParam("template_mdate_format",b.getLang("template.mdate_format"))))}),d._replaceVals(c))})})},getInfo:function(){return{longname:"Template plugin",author:"Moxiecode Systems AB",authorurl:"http://www.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/template",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_insertTemplate:function(b,c){function j(a,b){return(new RegExp("\\b"+b+"\\b","g")).test(a.className)}var d=this,e=d.editor,f,g,h=e.dom,i=e.selection.getContent();f=c.content,a(d.editor.getParam("template_replace_values"),function(a,b){typeof a!="function"&&(f=f.replace(new RegExp("\\{\\$"+b+"\\}","g"),a))}),g=h.create("div",null,f),n=h.select(".mceTmpl",g),n&&n.length>0&&(g=h.create("div",null),g.appendChild(n[0].cloneNode(!0))),a(h.select("*",g),function(a){j(a,e.getParam("template_cdate_classes","cdate").replace(/\s+/g,"|"))&&(a.innerHTML=d._getDateTime(new Date,e.getParam("template_cdate_format",e.getLang("template.cdate_format")))),j(a,e.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(a.innerHTML=d._getDateTime(new Date,e.getParam("template_mdate_format"
,e.getLang("template.mdate_format")))),j(a,e.getParam("template_selected_content_classes","selcontent").replace(/\s+/g,"|"))&&(a.innerHTML=i)}),d._replaceVals(g),e.execCommand("mceInsertContent",!1,g.innerHTML),e.addVisual()},_replaceVals:function(b){var c=this.editor.dom,d=this.editor.getParam("template_replace_values");a(c.select("*",b),function(b){a(d,function(a,f){c.hasClass(b,f)&&typeof d[f]=="function"&&d[f](b)})})},_getDateTime:function(a,b){function c(a,b){var c;a=""+a;if(a.length<b)for(c=0;c<b-a.length;c++)a="0"+a;return a}return b?(b=b.replace("%D","%m/%d/%y"),b=b.replace("%r","%I:%M:%S %p"),b=b.replace("%Y",""+a.getFullYear()),b=b.replace("%y",""+a.getYear()),b=b.replace("%m",c(a.getMonth()+1,2)),b=b.replace("%d",c(a.getDate(),2)),b=b.replace("%H",""+c(a.getHours(),2)),b=b.replace("%M",""+c(a.getMinutes(),2)),b=b.replace("%S",""+c(a.getSeconds(),2)),b=b.replace("%I",""+((a.getHours()+11)%12+1)),b=b.replace("%p",""+(a.getHours()<12?"AM":"PM")),b=b.replace("%B",""+this.editor.getLang("template_months_long").split(",")[a.getMonth()]),b=b.replace("%b",""+this.editor.getLang("template_months_short").split(",")[a.getMonth()]),b=b.replace("%A",""+this.editor.getLang("template_day_long").split(",")[a.getDay()]),b=b.replace("%a",""+this.editor.getLang("template_day_short").split(",")[a.getDay()]),b=b.replace("%%","%"),b):""}}),tinymce.PluginManager.add("template",tinymce.plugins.TemplatePlugin)}(),tinyMCEPopup.requireLangPack();var TemplateDialog={preInit:function(){var a=tinyMCEPopup.getParam("template_external_list_url");a!=null&&document.write('<script language="javascript" type="text/javascript" src="'+tinyMCEPopup.editor.documentBaseURI.toAbsolute(a)+'"></sc'+"ript>")},init:function(){var a=tinyMCEPopup.editor,b,c,d,e;b=a.getParam("template_templates",!1),c=document.getElementById("tpath");if(!b&&typeof tinyMCETemplateList!="undefined")for(d=0,b=[];d<tinyMCETemplateList.length;d++)b.push({title:tinyMCETemplateList[d][0],src:tinyMCETemplateList[d][1],description:tinyMCETemplateList[d][2]});for(d=0;d<b.length;d++)c.options[c.options.length]=new Option(b[d].title,tinyMCEPopup.editor.documentBaseURI.toAbsolute(b[d].src));this.resize(),this.tsrc=b},resize:function(){var a,b,c;self.innerWidth?(a=self.innerWidth-50,b=self.innerHeight-170):(a=document.body.clientWidth-50,b=document.body.clientHeight-160),c=document.getElementById("templatesrc"),c&&(c.style.height=Math.abs(b)+"px",c.style.width=Math.abs(a-5)+"px")},loadCSSFiles:function(a){var b=tinyMCEPopup.editor;tinymce.each(b.getParam("content_css","").split(","),function(c){a.write('<link href="'+b.documentBaseURI.toAbsolute(c)+'" rel="stylesheet" type="text/css" />')})},selectTemplate:function(a,b){var c=window.frames.templatesrc.document,d,e=this.tsrc;if(!a)return;c.body.innerHTML=this.templateHTML=this.getFileContents(a);for(d=0;d<e.length;d++)e[d].title==b&&(document.getElementById("tmpldesc").innerHTML=e[d].description||"")},insert:function(){tinyMCEPopup.execCommand("mceInsertTemplate",!1,{content:this.templateHTML,selection:tinyMCEPopup.editor.selection.getContent()}),tinyMCEPopup.close()},getFileContents:function(a){function e(a){b=0;try{b=new ActiveXObject(a)}catch(a){}return b}var b,c,d="text/plain";return b=window.ActiveXObject?e("Msxml2.XMLHTTP")||e("Microsoft.XMLHTTP"):new XMLHttpRequest,b.overrideMimeType&&b.overrideMimeType(d),b.open("GET",a,!1),b.send(null),b.responseText}};TemplateDialog.preInit(),tinyMCEPopup.onInit.add(TemplateDialog.init,TemplateDialog),tinyMCE.addI18n("en.template_dlg",{title:"Templates",label:"Template",desc_label:"Description",desc:"Insert Predefined Template Content",select:"Select a Template",preview:"Preview",warning:"Warning: Updating a template with a different one may cause data loss.",mdate_format:"%Y-%m-%d %H:%M:%S",cdate_format:"%Y-%m-%d %H:%M:%S",months_long:"January,February,March,April,May,June,July,August,September,October,November,December",months_short:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",day_long:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday,Sunday",day_short:"Sun,Mon,Tue,Wed,Thu,Fri,Sat,Sun"}),function(){tinymce.create("tinymce.plugins.VisualChars",{init:function(a,b){var c=this;c.editor=a,a.addCommand("mceVisualChars",c._toggleVisualChars,c),a.addButton("visualchars",{title:"visualchars.desc",cmd:"mceVisualChars"}),a.onBeforeGetContent.add(function(a,b){c.state&&b.format!="raw"&&!b.draft&&(c.state=!0,c._toggleVisualChars(!1))})},getInfo:function(){return{longname:"Visual characters",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/visualchars",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_toggleVisualChars:function(a){var b=this,c=b.editor,d,e,f,g=c.getDoc(),h=c.getBody(),i,j=c.selection,k,l,m;b.state=!b.state,c.controlManager.setActive("visualchars",b.state),a&&(m=j.getBookmark());if(b.state){d=[],tinymce.walk(h,function(a){a.nodeType==3&&a.nodeValue&&a.nodeValue.indexOf(" ")!=-1&&d.push(a)},"childNodes");for(e=0;e<d.length;e++){i=d[e].nodeValue,i=i.replace(/(\u00a0)/g,'<span data-mce-bogus="1" class="mceItemHidden mceItemNbsp">$1</span>'),l=c.dom.create("div",null,i);while(node=l.lastChild)c.dom.insertAfter(node,d[e]);c.dom.remove(d[e])}}else{d=c.dom.select("span.mceItemNbsp",h);for(e=d.length-1;e>=0;e--)c.dom.remove(d[e],1)}j.moveToBookmark(m)}}),tinymce.PluginManager.add("visualchars",tinymce.plugins.VisualChars)}(),function(){tinymce.create("tinymce.plugins.VisualChars",{init:function(a,b){var c=this;c.editor=a,a.addCommand("mceVisualChars",c._toggleVisualChars,c),a.addButton("visualchars",{title:"visualchars.desc",cmd:"mceVisualChars"}),a.onBeforeGetContent.add(function(a,b){c.state&&b.format!="raw"&&!b.draft&&(c.state=!0,c._toggleVisualChars(!1))})},getInfo:function(){return{longname:"Visual characters",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/visualchars",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_toggleVisualChars:function(a){var b=this,c=b.editor,d,e,f,g=c.getDoc(),h=c.getBody(),i,j=c.selection,k,l,m;b.state=!b.state,c.controlManager.setActive("visualchars",b.state),a&&(m=j.getBookmark());if(b.state){d=[],tinymce.walk(h,function(a){a.nodeType==3&&a.nodeValue&&a.nodeValue.indexOf(" ")!=-1&&d.push(a)},"childNodes");for(e=0;e<d.length;e++){i=d[e].nodeValue,i=i.replace(/(\u00a0)/g,'<span data-mce-bogus="1" class="mceItemHidden mceItemNbsp">$1</span>'),l=c.dom.create("div",null,i);while(node=l.lastChild)c.dom.insertAfter(node,d[e]);c.dom.remove(d[e])}}else{d=c.dom.select("span.mceItemNbsp",h);for(e=d.length-1;e>=0;e--)c.dom.remove(d[e],1)}j.moveToBookmark(m)}}),tinymce.PluginManager.add("visualchars",tinymce.plugins.VisualChars)}(),function(){tinymce.create("tinymce.plugins.WordCount",{block:0,id:null,countre:null,cleanre:null,init:function(a,b){var c=this,d=0;c.countre=a.getParam("wordcount_countregex",/[\w\u2019\'-]+/g),c.cleanre=a.getParam("wordcount_cleanregex",/[0-9.(),;:!?%#$?\'\"_+=\\\/-]*/g),c.id=a.id+"-word-count",a.onPostRender.add(function(a,b){var d,e;e=a.getParam("wordcount_target_id"),e?tinymce.DOM.add(e,"span",{},'<span id="'+c.id+'">0</span>'):(d=tinymce.DOM.get(a.id+"_path_row"),d&&tinymce.DOM.add(d.parentNode,"div",{style:"float: right"},a.getLang("wordcount.words","Words: ")+'<span id="'+c.id+'">0</span>'))}),a.onInit.add(function(a){a.selection.onSetContent.add(function(){c._count(a)}),c._count(a)}),a.onSetContent.add(function(a){c._count(a)}),a.onKeyUp.add(function(a,b){if(b.keyCode==d)return;(13==b.keyCode||8==d||46==d)&&c._count(a),d=b.keyCode})},_getCount:function(a){var b=0,c=a.getContent({format:"raw"});if(c){c=c.replace(/\.\.\./g," "),c=c.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," "),c=c.replace(/(\w+)(&.+?;)+(\w+)/,"$1$3").replace(/&.+?;/g," "),c=c.replace(this.cleanre,"");var d=c.match(this.countre);d&&(b=d.length)}return b},_count:function(a){var b=this;if(b.block)return;b.block=1,setTimeout(function(){if(!a.destroyed){var c=b._getCount(a);tinymce.DOM.setHTML(b.id,c.toString()),setTimeout(function(){b.block=0},2e3)}},1)},getInfo:function(){return{longname:"Word Count plugin",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/wordcount",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("wordcount",tinymce.plugins.WordCount)}(),function(){tinymce.create("tinymce.plugins.WordCount",{block:0,id:null,countre:null,cleanre:null,init:function(a,b){var c=this,d=0;c.countre=a.getParam("wordcount_countregex",/[\w\u2019\'-]+/g),c.cleanre=a.getParam("wordcount_cleanregex",/[0-9.(),;:!?%#$?\'\"_+=\\\/-]*/g),c.id=a.id+"-word-count",a.onPostRender.add(function(a,b){var d,e;e=a.getParam("wordcount_target_id"),e?tinymce.DOM.add(e,"span",{},'<span id="'+c.id+'">0</span>'):(d=tinymce.DOM.get(a.id+"_path_row"),d&&tinymce.DOM.add(d.parentNode,"div",{style:"float: right"},a.getLang("wordcount.words","Words: ")+'<span id="'+c.id+'">0</span>'))}),a.onInit.add(function(a){a.selection.onSetContent.add(function(){c._count(a)}),c._count(a)}),a.onSetContent.add(function(a){c._count(a)}),a.onKeyUp.add(function(a,b){if(b.keyCode==d)return;(13==b.keyCode||8==d||46==d)&&c._count(a),d=b.keyCode})},_getCount:function(a){var b=0,c=a.getContent({format:"raw"});if(c){c=c.replace(/\.\.\./g," "),c=c.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," "),c=c.replace(/(\w+)(&.+?;)+(\w+)/,"$1$3").replace(/&.+?;/g," "),c=c.replace(this.cleanre,"");var d=c.match(this.countre);d&&(b=d.length)}return b},_count:function(a){var b=this;if(b.block)return;b.block=1,setTimeout(function(){if(!a.destroyed){var c=b._getCount(a);tinymce.DOM.setHTML(b.id,c.toString()),setTimeout(function(){b.block=0},2e3)}},1)},getInfo:function(){return{longname:"Word Count plugin",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/wordcount",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("wordcount",tinymce.plugins.WordCount)}(),function(){tinymce.create("tinymce.plugins.XHTMLXtrasPlugin",{init:function(a,b){a.addCommand("mceCite",function(){a.windowManager.open({file:b+"/cite.htm",width:350+parseInt(a.getLang("xhtmlxtras.cite_delta_width",0)),height:250+parseInt(a.getLang("xhtmlxtras.cite_delta_height",0)),inline:1},{plugin_url:b})}),a.addCommand("mceAcronym",function(){a.windowManager.open({file:b+"/acronym.htm",width:350+parseInt(a.getLang("xhtmlxtras.acronym_delta_width",0)),height:250+parseInt(a.getLang("xhtmlxtras.acronym_delta_height",0)),inline:1},{plugin_url:b})}),a.addCommand("mceAbbr",function(){a.windowManager.open({file:b+"/abbr.htm",width:350+parseInt(a.getLang("xhtmlxtras.abbr_delta_width",0)),height:250+parseInt(a.getLang("xhtmlxtras.abbr_delta_height",0)),inline:1},{plugin_url:b})}),a.addCommand("mceDel",function(){a.windowManager.open({file:b+"/del.htm",width:340+parseInt(a.getLang("xhtmlxtras.del_delta_width",0)),height:310+parseInt(a.getLang("xhtmlxtras.del_delta_height",0)),inline:1},{plugin_url:b})}),a.addCommand("mceIns",function(){a.windowManager.open({file:b+"/ins.htm",width:340+parseInt(a.getLang("xhtmlxtras.ins_delta_width",0)),height:310+parseInt(a.getLang("xhtmlxtras.ins_delta_height",0)),inline:1},{plugin_url:b})}),a.addCommand("mceAttributes",function(){a.windowManager.open({file:b+"/attributes.htm",width:380+parseInt(a.getLang("xhtmlxtras.attr_delta_width",0)),height:370+parseInt(a.getLang("xhtmlxtras.attr_delta_height",0)),inline:1},{plugin_url:b})}),a.addButton("cite",{title:"xhtmlxtras.cite_desc",cmd:"mceCite"}),a.addButton("acronym",{title:"xhtmlxtras.acronym_desc",cmd:"mceAcronym"}),a.addButton("abbr",{title:"xhtmlxtras.abbr_desc",cmd:"mceAbbr"}),a.addButton("del",{title:"xhtmlxtras.del_desc",cmd:"mceDel"}),a.addButton("ins",{title:"xhtmlxtras.ins_desc",cmd:"mceIns"}),a.addButton("attribs",{title:"xhtmlxtras.attribs_desc",cmd:"mceAttributes"}),a.onNodeChange.add(function(a,b,c,d){c=a.dom.getParent(c,"CITE,ACRONYM,ABBR,DEL,INS"),b.setDisabled("cite",d),b.setDisabled("acronym",d),b.setDisabled("abbr",d),b.setDisabled("del",d),b.setDisabled("ins",d),b.setDisabled("attribs",c&&c.nodeName=="BODY"),b.setActive("cite",0),b.setActive("acronym",0),b.setActive("abbr",0),b.setActive("del",0),b.setActive("ins",0);if(c)do b.setDisabled(c.nodeName.toLowerCase(),0),b.setActive(c.nodeName.toLowerCase(),1);while(c=c.parentNode)}),a.onPreInit.add(function(){a.dom.create("abbr")})},getInfo:function(){return{longname:"XHTML Xtras Plugin",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/xhtmlxtras",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("xhtmlxtras",tinymce.plugins.XHTMLXtrasPlugin)}(),function(){tinymce.create("tinymce.plugins.XHTMLXtrasPlugin",{init:function(a,b){a.addCommand("mceCite",function(){a.windowManager.open({file:b+"/cite.htm",width:350+parseInt(a.getLang("xhtmlxtras.cite_delta_width",0)),height:250+parseInt(a.getLang("xhtmlxtras.cite_delta_height",0)),inline:1},{plugin_url:b})}),a.addCommand("mceAcronym",function(){a.windowManager.open({file:b+"/acronym.htm",width:350+parseInt(a.getLang("xhtmlxtras.acronym_delta_width",0)),height:250+parseInt(a.getLang("xhtmlxtras.acronym_delta_height",0)),inline:1},{plugin_url:b})}),a.addCommand("mceAbbr",function(){a.windowManager.open({file:b+"/abbr.htm",width:350+parseInt(a.getLang("xhtmlxtras.abbr_delta_width",0)),height:250+parseInt(a.getLang("xhtmlxtras.abbr_delta_height",0)),inline:1},{plugin_url:b})}),a.addCommand("mceDel",function(){a.windowManager.open({file:b+"/del.htm",width:340+parseInt(a.getLang("xhtmlxtras.del_delta_width",0)),height:310+parseInt(a.getLang("xhtmlxtras.del_delta_height",0)),inline:1},{plugin_url:b})}),a.addCommand("mceIns",function(){a.windowManager.open({file:b+"/ins.htm",width:340+parseInt(a.getLang("xhtmlxtras.ins_delta_width",0)),height:310+parseInt(a.getLang("xhtmlxtras.ins_delta_height",0)),inline:1},{plugin_url:b})}),a.addCommand("mceAttributes",function(){a.windowManager.open({file:b+"/attributes.htm",width:380+parseInt(a.getLang("xhtmlxtras.attr_delta_width",0)),height:370+parseInt(a.getLang("xhtmlxtras.attr_delta_height",0)),inline:1},{plugin_url:b})}),a.addButton("cite",{title:"xhtmlxtras.cite_desc",cmd:"mceCite"}),a.addButton("acronym",{title:"xhtmlxtras.acronym_desc",cmd:"mceAcronym"}),a.addButton("abbr",{title:"xhtmlxtras.abbr_desc",cmd:"mceAbbr"}),a.addButton("del",{title:"xhtmlxtras.del_desc",cmd:"mceDel"}),a.addButton("ins",{title:"xhtmlxtras.ins_desc",cmd:"mceIns"}),a.addButton("attribs",{title:"xhtmlxtras.attribs_desc",cmd:"mceAttributes"}),a.onNodeChange.add(function(a,b,c,d){c=a.dom.getParent(c,"CITE,ACRONYM,ABBR,DEL,INS"),b.setDisabled("cite",d),b.setDisabled("acronym",d),b.setDisabled("abbr",d),b.setDisabled("del",d),b.setDisabled("ins",d),b.setDisabled("attribs",c&&c.nodeName=="BODY"),b.setActive("cite",0),b.setActive("acronym",0),b.setActive("abbr",0),b.setActive("del",0),b.setActive("ins",0);if(c)do b.setDisabled(c.nodeName.toLowerCase(),0),b.setActive(c.nodeName.toLowerCase(),1);while(c=c.parentNode)}),a.onPreInit.add(function(){a.dom.create("abbr")})},getInfo:function(){return{longname:"XHTML Xtras Plugin",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/xhtmlxtras",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("xhtmlxtras",tinymce.plugins.XHTMLXtrasPlugin)}(),tinyMCEPopup.onInit.add(init),tinyMCEPopup.onInit.add(init),tinyMCEPopup.onInit.add(init),tinyMCEPopup.requireLangPack(),tinyMCEPopup.onInit.add(init),tinyMCEPopup.onInit.add(init),tinyMCEPopup.requireLangPack(),SXE={currentAction:"insert",inst:tinyMCEPopup.editor,updateElement:null},SXE.focusElement=SXE.inst.selection.getNode(),SXE.initElementDialog=function(a){addClassesToList("class","xhtmlxtras_styles"),TinyMCE_EditableSelects.init(),a=a.toLowerCase();var b=SXE.inst.dom.getParent(SXE.focusElement,a.toUpperCase());b!=null&&b.nodeName.toUpperCase()==a.toUpperCase()&&(SXE.currentAction="update"),SXE.currentAction=="update"&&(initCommonAttributes(b),SXE.updateElement=b),document.forms[0].insert.value=tinyMCEPopup.getLang(SXE.currentAction,"Insert",!0)},SXE.insertElement=function(a){var b=SXE.inst.dom.getParent(SXE.focusElement,a.toUpperCase()),c,d;if(b==null){var e=SXE.inst.selection.getContent();if(e.length>0){d=a,insertInlineElement(a);var f=tinymce.grep(SXE.inst.dom.select(a));for(var g=0;g<f.length;g++){var b=f[g];SXE.inst.dom.getAttrib(b,"data-mce-new")&&(b.id="",b.setAttribute("id",""),b.removeAttribute("id"),b.removeAttribute("data-mce-new"),setAllCommonAttribs(b))}}}else setAllCommonAttribs(b);SXE.inst.nodeChanged(),tinyMCEPopup.execCommand("mceEndUndoLevel")},SXE.removeElement=function(a){a=a.toLowerCase(),elm=SXE.inst.dom.getParent(SXE.focusElement,a.toUpperCase()),elm&&elm.nodeName.toUpperCase()==a.toUpperCase()&&(tinyMCE.execCommand("mceRemoveNode",!1,elm),SXE.inst.nodeChanged(),tinyMCEPopup.execCommand("mceEndUndoLevel"))},SXE.showRemoveButton=function(){document.getElementById("remove").style.display=""},SXE.containsClass=function(a,b){return a.className.indexOf(b)>-1?!0:!1},SXE.removeClass=function(a,b){if(a.className==null||a.className==""||!SXE.containsClass(a,b))return!0;var c=a.className.split(" "),d="";for(var e=0,f=c.length;e<f;e++)c[e]!=b&&(d+=c[e]+" ");a.className=d.substring(0,d.length-1)},SXE.addClass=function(a,b){return SXE.containsClass(a,b)||(a.className?a.className+=" "+b:a.className=b),!0},tinyMCEPopup.onInit.add(init),tinyMCE.addI18n("en.xhtmlxtras_dlg",{attribs_title:"Insert/Edit Attributes",option_rtl:"Right to Left",option_ltr:"Left to Right",insert_date:"Insert Current Date/Time",remove:"Remove",title_cite_element:"Citation Element",title_abbr_element:"Abbreviation Element",title_acronym_element:"Acronym Element",title_del_element:"Deletion Element",title_ins_element:"Insertion Element",fieldset_events_tab:"Element Events",fieldset_attrib_tab:"Element Attributes",fieldset_general_tab:"General Settings",events_tab:"Events",attrib_tab:"Attributes",general_tab:"General",attribute_attrib_tab:"Attributes",attribute_events_tab:"Events",attribute_label_accesskey:"AccessKey",attribute_label_tabindex:"TabIndex",attribute_label_langcode:"Language",attribute_option_rtl:"Right to Left",attribute_option_ltr:"Left to Right",attribute_label_langdir:"Text Direction",attribute_label_datetime:"Date/Time",attribute_label_cite:"Cite",attribute_label_style:"Style",attribute_label_class:"Class",attribute_label_id:"ID",attribute_label_title:"Title"}),window.tinyMCEPreInit=window.tinyMCEPreInit||{base:"/assets/tinymce",query:"3.4.7",suffix:""},window.tinyMCEPreInit=window.tinyMCEPreInit||{base:"/assets/tinymce",query:"3.4.7",suffix:""},function(a){var b=a.DOM,c=a.dom.Event,d=a.extend,e=a.each,f=a.util.Cookie,g,h=a.explode;a.ThemeManager.requireLangPack("advanced"),a.create("tinymce.themes.AdvancedTheme",{sizes:[8,10,12,14,18,24,36],controls:{bold:["bold_desc","Bold"],italic:["italic_desc","Italic"],underline:["underline_desc","Underline"],strikethrough:["striketrough_desc","Strikethrough"],justifyleft:["justifyleft_desc","JustifyLeft"],justifycenter:["justifycenter_desc","JustifyCenter"],justifyright:["justifyright_desc","JustifyRight"],justifyfull:["justifyfull_desc","JustifyFull"],bullist:["bullist_desc","InsertUnorderedList"],numlist:["numlist_desc","InsertOrderedList"],outdent:["outdent_desc","Outdent"],indent:["indent_desc","Indent"],cut:["cut_desc","Cut"],copy:["copy_desc","Copy"],paste:["paste_desc","Paste"],undo:["undo_desc","Undo"],redo:["redo_desc","Redo"],link:["link_desc","mceLink"],unlink:["unlink_desc","unlink"],image:["image_desc","mceImage"],cleanup:["cleanup_desc","mceCleanup"],help:["help_desc","mceHelp"],code:["code_desc","mceCodeEditor"],hr:["hr_desc","InsertHorizontalRule"],removeformat:["removeformat_desc","RemoveFormat"],sub:["sub_desc","subscript"],sup:["sup_desc","superscript"],forecolor:["forecolor_desc","ForeColor"],forecolorpicker:["forecolor_desc","mceForeColor"],backcolor:["backcolor_desc","HiliteColor"],backcolorpicker:["backcolor_desc","mceBackColor"],charmap:["charmap_desc","mceCharMap"],visualaid:["visualaid_desc","mceToggleVisualAid"],anchor:["anchor_desc","mceInsertAnchor"],newdocument:["newdocument_desc","mceNewDocument"],blockquote:["blockquote_desc","mceBlockQuote"]},stateControls:["bold","italic","underline","strikethrough","bullist","numlist","justifyleft","justifycenter","justifyright","justifyfull","sub","sup","blockquote"],init:function(c,f){var g=this,h,i,j;g.editor=c,g.url=f,g.onResolveName=new a.util.Dispatcher(this),c.forcedHighContrastMode=c.settings.detect_highcontrast&&g._isHighContrast(),c.settings.skin=c.forcedHighContrastMode?"highcontrast":c.settings.skin,g.settings=h=d({theme_advanced_path:!0,theme_advanced_toolbar_location:"bottom",theme_advanced_buttons1:"bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect",theme_advanced_buttons2:"bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code",theme_advanced_buttons3:"hr,removeformat,visualaid,|,sub,sup,|,charmap",theme_advanced_blockformats:"p,address,pre,h1,h2,h3,h4,h5,h6",theme_advanced_toolbar_align:"center",theme_advanced_fonts:"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",theme_advanced_more_colors:1,theme_advanced_row_height:23,theme_advanced_resize_horizontal:1,theme_advanced_resizing_use_cookie:1,theme_advanced_font_sizes:"1,2,3,4,5,6,7",theme_advanced_font_selector:"span",theme_advanced_show_current_color:0,readonly:c.settings.readonly},c.settings),h.font_size_style_values||(h.font_size_style_values="8pt,10pt,12pt,14pt,18pt,24pt,36pt"),a.is(h.theme_advanced_font_sizes,"string")&&(h.font_size_style_values=a.explode(h.font_size_style_values),h.font_size_classes=a.explode(h.font_size_classes||""),j={},c.settings.theme_advanced_font_sizes=h.theme_advanced_font_sizes,e(c.getParam("theme_advanced_font_sizes","","hash"),function(a,b){var c;b==a&&a>=1&&a<=7&&(b=a+" ("+g.sizes[a-1]+"pt)",c=h.font_size_classes[a-1],a=h.font_size_style_values[a-1]||g.sizes[a-1]+"pt"),/^\s*\./.test(a)&&(c=a.replace(/\./g,"")),j[b]=c?{"class":c}:{fontSize:a}}),h.theme_advanced_font_sizes=j),(i=h.theme_advanced_path_location)&&i!="none"&&(h.theme_advanced_statusbar_location=h.theme_advanced_path_location),h.theme_advanced_statusbar_location=="none"&&(h.theme_advanced_statusbar_location=0),c.settings.content_css!==!1&&c.contentCSS.push(c.baseURI.toAbsolute(f+"/skins/"+c.settings.skin+"/content.css")),c.onInit.add(function(){c.settings.readonly||(c.onNodeChange.add(g._nodeChanged,g),c.onKeyUp.add(g._updateUndoStatus,g),c.onMouseUp.add(g._updateUndoStatus,g),c.dom.bind(c.dom.getRoot(),"dragend",function(){g._updateUndoStatus(c)}))}),c.onSetProgressState.add(function(a,c,d){var e,f=a.id,h;c?g.progressTimer=setTimeout(function(){e=a.getContainer(),e=e.insertBefore(b.create("DIV",{style:"position:relative"}),e.firstChild),h=b.get(a.id+"_tbl"),b.add(e,"div",{id:f+"_blocker","class":"mceBlocker",style:{width:h.clientWidth+2,height:h.clientHeight+2}}),b.add(e,"div",{id:f+"_progress","class":"mceProgress",style:{left:h.clientWidth/2,top:h.clientHeight/2}})},d||0):(b.remove(f+"_blocker"),b.remove(f+"_progress"),clearTimeout(g.progressTimer))}),b.loadCSS(h.editor_css?c.documentBaseURI.toAbsolute(h.editor_css):f+"/skins/"+c.settings.skin+"/ui.css"),h.skin_variant&&b.loadCSS(f+"/skins/"+c.settings.skin+"/ui_"+h.skin_variant+".css")},_isHighContrast:function(){var a,c=b.add(b.getRoot(),"div",{style:"background-color: rgb(171,239,86);"});return a=(b.getStyle(c,"background-color",!0)+"").toLowerCase().replace(/ /g,""),b.remove(c),a!="rgb(171,239,86)"&&a!="#abef56"},createControl:function(a,b){var c,d;if(d=b.createControl(a))return d;switch(a){case"styleselect":return this._createStyleSelect();case"formatselect":return this._createBlockFormats();case"fontselect":return this._createFontSelect();case"fontsizeselect":return this._createFontSizeSelect();case"forecolor":return this._createForeColorMenu();case"backcolor":return this._createBackColorMenu()}if(c=this.controls[a])return b.createButton(a,{title:"advanced."+c[0],cmd:c[1],ui:c[2],value:c[3]})},execCommand:function(a,b,c){var d=this["_"+a];return d?(d.call(this,b,c),!0):!1},_importClasses:function(a){var b=this.editor,c=b.controlManager.get("styleselect");c.getLength()==0&&e(b.dom.getClasses(),function(a,d){var e="style_"+d;b.formatter.register(e,{inline:"span",attributes:{"class":a["class"]},selector:"*"}),c.add(a["class"],e)})},_createStyleSelect:function(a){var b=this,d=b.editor,f=d.controlManager,g;return g=f.createListBox("styleselect",{title:"advanced.style_select",onselect:function(a){var b,c=[];return e(g.items,function(a){c.push(a.value)}),d.focus(),d.undoManager.add(),b=d.formatter.matchAll(c),!a||b[0]==a?b[0]&&d.formatter.remove(b[0]):d.formatter.apply(a),d.undoManager.add(),d.nodeChanged(),!1}}),d.onInit.add(function(){var a=0,c=d.getParam("style_formats");c?e(c,function(b){var c,f=0;e(b,function(){f++}),f>1?(c=b.name=b.name||"style_"+a++,d.formatter.register(c,b),g.add(b.title,c)):g.add(b.title)}):e(d.getParam("theme_advanced_styles","","hash"),function(c,e){var f;c&&(f="style_"+a++,d.formatter.register(f,{inline:"span",classes:c,selector:"*"}),g.add(b.editor.translate(e),f))})}),g.getLength()==0&&g.onPostRender.add(function(a,d){g.NativeListBox?c.add(d.id,"focus",b._importClasses,b):(c.add(d.id+"_text","focus",b._importClasses,b),c.add(d.id+"_text","mousedown",b._importClasses,b),c.add(d.id+"_open","focus",b._importClasses,b),c.add(d.id+"_open","mousedown",b._importClasses,b))}),g},_createFontSelect:function(){var a,b=this,c=b.editor;return a=c.controlManager.createListBox("fontselect",{title:"advanced.fontdefault",onselect:function(b){var d=a.items[a.selectedIndex];if(!b&&d){c.execCommand("FontName",!1,d.value);return}return c.execCommand("FontName",!1,b),a.select(function(a){return b==a}),d&&d.value==b&&a.select(null),!1}}),a&&e(c.getParam("theme_advanced_fonts",b.settings.theme_advanced_fonts,"hash"),function(b,d){a.add(c.translate(d),b,{style:b.indexOf("dings")==-1?"font-family:"+b:""})}),a},_createFontSizeSelect:function(){var a=this,b=a.editor,c,d=0,f=[];return c=b.controlManager.createListBox("fontsizeselect",{title:"advanced.font_size",onselect:function(a){var d=c.items[c.selectedIndex];if(!a&&d){d=d.value,d["class"]?(b.formatter.toggle("fontsize_class",{value:d["class"]}),b.undoManager.add(),b.nodeChanged()):b.execCommand("FontSize",!1,d.fontSize);return}return a["class"]?(b.focus(),b.undoManager.add(),b.formatter.toggle("fontsize_class",{value:a["class"]}),b.undoManager.add(),b.nodeChanged()):b.execCommand("FontSize",!1,a.fontSize),c.select(function(b){return a==b}),d&&(d.value.fontSize==a.fontSize||d.value["class"]==a["class"])&&c.select(null),!1}}),c&&e(a.settings.theme_advanced_font_sizes,function(b,e){var f=b.fontSize;f>=1&&f<=7&&(f=a.sizes[parseInt(f)-1]+"pt"),c.add(e,b,{style:"font-size:"+f,"class":"mceFontSize"+d++ +(" "+(b["class"]||""))})}),c},_createBlockFormats:function(){var a,b={p:"advanced.paragraph",address:"advanced.address",pre:"advanced.pre",h1:"advanced.h1",h2:"advanced.h2",h3:"advanced.h3",h4:"advanced.h4",h5:"advanced.h5",h6:"advanced.h6",div:"advanced.div",blockquote:"advanced.blockquote",code:"advanced.code",dt:"advanced.dt",dd:"advanced.dd",samp:"advanced.samp"},c=this;return a=c.editor.controlManager.createListBox("formatselect",{title:"advanced.block",onselect:function(a){return c.editor.execCommand("FormatBlock",!1,a),!1}}),a&&e(c.editor.getParam("theme_advanced_blockformats",c.settings.theme_advanced_blockformats,"hash"),function(d,e){a.add(c.editor.translate(e!=d?e:b[d]),d,{"class":"mce_formatPreview mce_"+d})}),a},_createForeColorMenu:function(){var a,b=this,c=b.settings,d={},e;c.theme_advanced_more_colors&&(d.more_colors_func=function(){b._mceColorPicker(0,{color:a.value,func:function(b){a.setColor(b)}})});if(e=c.theme_advanced_text_colors)d.colors=e;return c.theme_advanced_default_foreground_color&&(d.default_color=c.theme_advanced_default_foreground_color),d.title="advanced.forecolor_desc",d.cmd="ForeColor",d.scope=this,a=b.editor.controlManager.createColorSplitButton("forecolor",d),a},_createBackColorMenu:function(){var a,b=this,c=b.settings,d={},e;c.theme_advanced_more_colors&&(d.more_colors_func=function(){b._mceColorPicker(0,{color:a.value,func:function(b){a.setColor(b)}})});if(e=c.theme_advanced_background_colors)d.colors=e;return c.theme_advanced_default_background_color&&(d.default_color=c.theme_advanced_default_background_color),d.title="advanced.backcolor_desc",d.cmd="HiliteColor",d.scope=this,a=b.editor.controlManager.createColorSplitButton("backcolor",d),a},renderUI:function(d){var f,g,h,i=this,j=i.editor,k=i.settings,l,m,n;j.settings&&(j.settings.aria_label=k.aria_label+j.getLang("advanced.help_shortcut")),f=m=b.create("span",{role:"application","aria-labelledby":j.id+"_voice",id:j.id+"_parent","class":"mceEditor "+j.settings.skin+"Skin"+(k.skin_variant?" "+j.settings.skin+"Skin"+i._ufirst(k.skin_variant):"")}),b.add(f,"span",{"class":"mceVoiceLabel",style:"display:none;",id:j.id+"_voice"},k.aria_label),b.boxModel||(f=b.add(f,"div",{"class":"mceOldBoxModel"})),f=l=b.add(f,"table",{role:"presentation",id:j.id+"_tbl","class":"mceLayout",cellSpacing:0,cellPadding:0}),f=h=b.add(f,"tbody");switch((k.theme_advanced_layout_manager||"").toLowerCase()){case"rowlayout":g=i._rowLayout(k,h,d);break;case"customlayout":g=j.execCallback("theme_advanced_custom_layout",k,h,d,m);break;default:g=i._simpleLayout(k,h,d,m)}return f=d.targetNode,n=l.rows,b.addClass(n[0],"mceFirst"),b.addClass(n[n.length-1],"mceLast"),e(b.select("tr",h),function(a){b.addClass(a.firstChild,"mceFirst"),b.addClass(a.childNodes[a.childNodes.length-1],"mceLast")}),b.get(k.theme_advanced_toolbar_container)?b.get(k.theme_advanced_toolbar_container).appendChild(m):b.insertAfter(m,f),c.add(j.id+"_path_row","click",function(a){a=a.target;if(a.nodeName=="A")return i._sel(a.className.replace(/^.*mcePath_([0-9]+).*$/,"$1")),c.cancel(a)}),j.getParam("accessibility_focus")||c.add(b.add(m,"a",{href:"#"},"<!-- IE -->"),"focus",function(){tinyMCE.get(j.id).focus()}),k.theme_advanced_toolbar_location=="external"&&(d.deltaHeight=0),i.deltaHeight=d.deltaHeight,d.targetNode=null,j.onKeyDown.add(function(d,e){var f=121,g=122;if(e.altKey){if(e.keyCode===f)return a.isWebKit&&window.focus(),i.toolbarGroup.focus(),c.cancel(e);if(e.keyCode===g)return b.get(d.id+"_path_row").focus(),c.cancel(e)}}),j.addShortcut("alt+0","","mceShortcuts",i),{iframeContainer:g,editorContainer:j.id+"_parent",sizeContainer:l,deltaHeight:d.deltaHeight}},getInfo:function(){return{longname:"Advanced theme",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",version:a.majorVersion+"."+a.minorVersion}},resizeBy:function(a,c){var d=b.get(this.editor.id+"_ifr");this.resizeTo(d.clientWidth+a,d.clientHeight+c)},resizeTo:function(a,c,d){var e=this.editor,g=this.settings,h=b.get(e.id+"_tbl"),i=b.get(e.id+"_ifr");a=Math.max(g.theme_advanced_resizing_min_width||100,a),c=Math.max(g.theme_advanced_resizing_min_height||100,c),a=Math.min(g.theme_advanced_resizing_max_width||65535,a),c=Math.min(g.theme_advanced_resizing_max_height||65535,c),b.setStyle(h,"height",""),b.setStyle(i,"height",c),g.theme_advanced_resize_horizontal&&(b.setStyle(h,"width",""),b.setStyle(i,"width",a),a<h.clientWidth&&(a=h.clientWidth,b.setStyle(i,"width",h.clientWidth))),d&&g.theme_advanced_resizing_use_cookie&&f.setHash("TinyMCE_"+e.id+"_size",{cw:a,ch:c})},destroy:function(){var a=this.editor.id;c.clear(a+"_resize"),c.clear(a+"_path_row"),c.clear(a+"_external_close")},_simpleLayout:function(a,d,e,f){var h=this,i=h.editor,j=a.theme_advanced_toolbar_location,k=a.theme_advanced_statusbar_location,l,m,n,o;return a.readonly?(l=b.add(d,"tr"),l=m=b.add(l,"td",{"class":"mceIframeContainer"}),m):(j=="top"&&h._addToolbars(d,e),j=="external"&&(l=o=b.create("div",{style:"position:relative"}),l=b.add(l,"div",{id:i.id+"_external","class":"mceExternalToolbar"}),b.add
(l,"a",{id:i.id+"_external_close",href:"javascript:;","class":"mceExternalClose"}),l=b.add(l,"table",{id:i.id+"_tblext",cellSpacing:0,cellPadding:0}),n=b.add(l,"tbody"),f.firstChild.className=="mceOldBoxModel"?f.firstChild.appendChild(o):f.insertBefore(o,f.firstChild),h._addToolbars(n,e),i.onMouseUp.add(function(){var a=b.get(i.id+"_external");b.show(a),b.hide(g);var d=c.add(i.id+"_external_close","click",function(){b.hide(i.id+"_external"),c.remove(i.id+"_external_close","click",d)});b.show(a),b.setStyle(a,"top",0-b.getRect(i.id+"_tblext").h-1),b.hide(a),b.show(a),a.style.filter="",g=i.id+"_external",a=null})),k=="top"&&h._addStatusBar(d,e),a.theme_advanced_toolbar_container||(l=b.add(d,"tr"),l=m=b.add(l,"td",{"class":"mceIframeContainer"})),j=="bottom"&&h._addToolbars(d,e),k=="bottom"&&h._addStatusBar(d,e),m)},_rowLayout:function(a,c,d){var f=this,g=f.editor,i,j,k=g.controlManager,l,m,n,o;return i=a.theme_advanced_containers_default_class||"",j=a.theme_advanced_containers_default_align||"center",e(h(a.theme_advanced_containers||""),function(e,g){var h=a["theme_advanced_container_"+e]||"";switch(e.toLowerCase()){case"mceeditor":l=b.add(c,"tr"),l=m=b.add(l,"td",{"class":"mceIframeContainer"});break;case"mceelementpath":f._addStatusBar(c,d);break;default:o=(a["theme_advanced_container_"+e+"_align"]||j).toLowerCase(),o="mce"+f._ufirst(o),l=b.add(b.add(c,"tr"),"td",{"class":"mceToolbar "+(a["theme_advanced_container_"+e+"_class"]||i)+" "+o||j}),n=k.createToolbar("toolbar"+g),f._addControls(h,n),b.setHTML(l,n.renderHTML()),d.deltaHeight-=a.theme_advanced_row_height}}),m},_addControls:function(a,b){var c=this,d=c.settings,f,g=c.editor.controlManager;d.theme_advanced_disable&&!c._disabled?(f={},e(h(d.theme_advanced_disable),function(a){f[a]=1}),c._disabled=f):f=c._disabled,e(h(a),function(a){var d;if(f&&f[a])return;if(a=="tablecontrols"){e(["table","|","row_props","cell_props","|","row_before","row_after","delete_row","|","col_before","col_after","delete_col","|","split_cells","merge_cells"],function(a){a=c.createControl(a,g),a&&b.add(a)});return}d=c.createControl(a,g),d&&b.add(d)})},_addToolbars:function(a,c){var d=this,e,f,g=d.editor,h=d.settings,i,j=g.controlManager,k,l,m=[],n,o;o=j.createToolbarGroup("toolbargroup",{name:g.getLang("advanced.toolbar"),tab_focus_toolbar:g.getParam("theme_advanced_tab_focus_toolbar")}),d.toolbarGroup=o,n=h.theme_advanced_toolbar_align.toLowerCase(),n="mce"+d._ufirst(n),l=b.add(b.add(a,"tr",{role:"presentation"}),"td",{"class":"mceToolbar "+n,role:"presentation"});for(e=1;i=h["theme_advanced_buttons"+e];e++)f=j.createToolbar("toolbar"+e,{"class":"mceToolbarRow"+e}),h["theme_advanced_buttons"+e+"_add"]&&(i+=","+h["theme_advanced_buttons"+e+"_add"]),h["theme_advanced_buttons"+e+"_add_before"]&&(i=h["theme_advanced_buttons"+e+"_add_before"]+","+i),d._addControls(i,f),o.add(f),c.deltaHeight-=h.theme_advanced_row_height;m.push(o.renderHTML()),m.push(b.createHTML("a",{href:"#",accesskey:"z",title:g.getLang("advanced.toolbar_focus"),onfocus:"tinyMCE.getInstanceById('"+g.id+"').focus();"},"<!-- IE -->")),b.setHTML(l,m.join(""))},_addStatusBar:function(a,d){var e,g=this,h=g.editor,i=g.settings,j,k,l,m;e=b.add(a,"tr"),e=m=b.add(e,"td",{"class":"mceStatusbar"}),e=b.add(e,"div",{id:h.id+"_path_row",role:"group","aria-labelledby":h.id+"_path_voice"}),i.theme_advanced_path?(b.add(e,"span",{id:h.id+"_path_voice"},h.translate("advanced.path")),b.add(e,"span",{},": ")):b.add(e,"span",{},"&#160;"),i.theme_advanced_resizing&&(b.add(m,"a",{id:h.id+"_resize",href:"javascript:;",onclick:"return false;","class":"mceResize",tabIndex:"-1"}),i.theme_advanced_resizing_use_cookie&&h.onPostRender.add(function(){var a=f.getHash("TinyMCE_"+h.id+"_size"),c=b.get(h.id+"_tbl");if(!a)return;g.resizeTo(a.cw,a.ch)}),h.onPostRender.add(function(){c.add(h.id+"_resize","click",function(a){a.preventDefault()}),c.add(h.id+"_resize","mousedown",function(a){function r(a){a.preventDefault(),n=l+(a.screenX-j),o=m+(a.screenY-k),g.resizeTo(n,o)}function s(a){c.remove(b.doc,"mousemove",d),c.remove(h.getDoc(),"mousemove",e),c.remove(b.doc,"mouseup",f),c.remove(h.getDoc(),"mouseup",i),n=l+(a.screenX-j),o=m+(a.screenY-k),g.resizeTo(n,o,!0)}var d,e,f,i,j,k,l,m,n,o,q;a.preventDefault(),j=a.screenX,k=a.screenY,q=b.get(g.editor.id+"_ifr"),l=n=q.clientWidth,m=o=q.clientHeight,d=c.add(b.doc,"mousemove",r),e=c.add(h.getDoc(),"mousemove",r),f=c.add(b.doc,"mouseup",s),i=c.add(h.getDoc(),"mouseup",s)})})),d.deltaHeight-=21,e=a=null},_updateUndoStatus:function(a){var b=a.controlManager,c=a.undoManager;b.setDisabled("undo",!c.hasUndo()&&!c.typing),b.setDisabled("redo",!c.hasRedo())},_nodeChanged:function(c,d,f,g,h){function v(a){var b,c=h.parents,d=a;typeof a=="string"&&(d=function(b){return b.nodeName==a});for(b=0;b<c.length;b++)if(d(c[b]))return c[b]}var i=this,j,k=0,l,m,n=i.settings,o,p,q,r,s,t,u;a.each(i.stateControls,function(a){d.setActive(a,c.queryCommandState(i.controls[a][1]))}),d.setActive("visualaid",c.hasVisual),i._updateUndoStatus(c),d.setDisabled("outdent",!c.queryCommandState("Outdent")),j=v("A");if(m=d.get("link"))if(!j||!j.name)m.setDisabled(!j&&g),m.setActive(!!j);if(m=d.get("unlink"))m.setDisabled(!j&&g),m.setActive(!!j&&!j.name);(m=d.get("anchor"))&&m.setActive(!g&&!!j&&j.name),j=v("IMG"),(m=d.get("image"))&&m.setActive(!g&&!!j&&f.className.indexOf("mceItem")==-1);if(m=d.get("styleselect"))i._importClasses(),t=[],e(m.items,function(a){t.push(a.value)}),u=c.formatter.matchAll(t),m.select(u[0]);if(m=d.get("formatselect"))j=v(b.isBlock),j&&m.select(j.nodeName.toLowerCase());v(function(a){return a.nodeName==="SPAN"&&!o&&a.className&&(o=a.className),c.dom.is(a,n.theme_advanced_font_selector)&&(!p&&a.style.fontSize&&(p=a.style.fontSize),!q&&a.style.fontFamily&&(q=a.style.fontFamily.replace(/[\"\']+/g,"").replace(/^([^,]+).*/,"$1").toLowerCase()),!r&&a.style.color&&(r=a.style.color),!s&&a.style.backgroundColor&&(s=a.style.backgroundColor)),!1}),(m=d.get("fontselect"))&&m.select(function(a){return a.replace(/^([^,]+).*/,"$1").toLowerCase()==q});if(m=d.get("fontsizeselect"))n.theme_advanced_runtime_fontsize&&!p&&!o&&(p=c.dom.getStyle(f,"fontSize",!0)),m.select(function(a){if(a.fontSize&&a.fontSize===p)return!0;if(a["class"]&&a["class"]===o)return!0});if(n.theme_advanced_show_current_color){function w(a,b){if(m=d.get(a))b||(b=m.settings.default_color),b!==m.value&&m.displayColor(b)}w("forecolor",r),w("backcolor",s)}if(n.theme_advanced_show_current_color){function w(a,b){if(m=d.get(a))b||(b=m.settings.default_color),b!==m.value&&m.displayColor(b)}w("forecolor",r),w("backcolor",s)}n.theme_advanced_path&&n.theme_advanced_statusbar_location&&(j=b.get(c.id+"_path")||b.add(c.id+"_path_row","span",{id:c.id+"_path"}),i.statusKeyboardNavigation&&(i.statusKeyboardNavigation.destroy(),i.statusKeyboardNavigation=null),b.setHTML(j,""),v(function(c){var d=c.nodeName.toLowerCase(),e,f,g="";if(c.nodeType!=1||d==="br"||c.getAttribute("data-mce-bogus")||b.hasClass(c,"mceItemHidden")||b.hasClass(c,"mceItemRemoved"))return;a.isIE&&c.scopeName!=="HTML"&&(d=c.scopeName+":"+d),d=d.replace(/mce\:/g,"");switch(d){case"b":d="strong";break;case"i":d="em";break;case"img":if(l=b.getAttrib(c,"src"))g+="src: "+l+" ";break;case"a":if(l=b.getAttrib(c,"name"))g+="name: "+l+" ",d+="#"+l;if(l=b.getAttrib(c,"href"))g+="href: "+l+" ";break;case"font":if(l=b.getAttrib(c,"face"))g+="font: "+l+" ";if(l=b.getAttrib(c,"size"))g+="size: "+l+" ";if(l=b.getAttrib(c,"color"))g+="color: "+l+" ";break;case"span":if(l=b.getAttrib(c,"style"))g+="style: "+l+" "}if(l=b.getAttrib(c,"id"))g+="id: "+l+" ";if(l=c.className){l=l.replace(/\b\s*(webkit|mce|Apple-)\w+\s*\b/g,"");if(l){g+="class: "+l+" ";if(b.isBlock(c)||d=="img"||d=="span")d+="."+l}}d=d.replace(/(html:)/g,""),d={name:d,node:c,title:g},i.onResolveName.dispatch(i,d),g=d.title,d=d.name,f=b.create("a",{href:"javascript:;",role:"button",onmousedown:"return false;",title:g,"class":"mcePath_"+k++},d),j.hasChildNodes()?(j.insertBefore(b.create("span",{"aria-hidden":"true"}," » "),j.firstChild),j.insertBefore(f,j.firstChild)):j.appendChild(f)},c.getBody()),b.select("a",j).length>0&&(i.statusKeyboardNavigation=new a.ui.KeyboardNavigation({root:c.id+"_path_row",items:b.select("a",j),excludeFromTabOrder:!0,onCancel:function(){c.focus()}},b)))},_sel:function(a){this.editor.execCommand("mceSelectNodeDepth",!1,a)},_mceInsertAnchor:function(a,b){var c=this.editor;c.windowManager.open({url:this.url+"/anchor.htm",width:320+parseInt(c.getLang("advanced.anchor_delta_width",0)),height:90+parseInt(c.getLang("advanced.anchor_delta_height",0)),inline:!0},{theme_url:this.url})},_mceCharMap:function(){var a=this.editor;a.windowManager.open({url:this.url+"/charmap.htm",width:550+parseInt(a.getLang("advanced.charmap_delta_width",0)),height:260+parseInt(a.getLang("advanced.charmap_delta_height",0)),inline:!0},{theme_url:this.url})},_mceHelp:function(){var a=this.editor;a.windowManager.open({url:this.url+"/about.htm",width:480,height:380,inline:!0},{theme_url:this.url})},_mceShortcuts:function(){var a=this.editor;a.windowManager.open({url:this.url+"/shortcuts.htm",width:480,height:380,inline:!0},{theme_url:this.url})},_mceColorPicker:function(a,b){var c=this.editor;b=b||{},c.windowManager.open({url:this.url+"/color_picker.htm",width:375+parseInt(c.getLang("advanced.colorpicker_delta_width",0)),height:250+parseInt(c.getLang("advanced.colorpicker_delta_height",0)),close_previous:!1,inline:!0},{input_color:b.color,func:b.func,theme_url:this.url})},_mceCodeEditor:function(a,b){var c=this.editor;c.windowManager.open({url:this.url+"/source_editor.htm",width:parseInt(c.getParam("theme_advanced_source_editor_width",720)),height:parseInt(c.getParam("theme_advanced_source_editor_height",580)),inline:!0,resizable:!0,maximizable:!0},{theme_url:this.url})},_mceImage:function(a,b){var c=this.editor;if(c.dom.getAttrib(c.selection.getNode(),"class").indexOf("mceItem")!=-1)return;c.windowManager.open({url:this.url+"/image.htm",width:355+parseInt(c.getLang("advanced.image_delta_width",0)),height:275+parseInt(c.getLang("advanced.image_delta_height",0)),inline:!0},{theme_url:this.url})},_mceLink:function(a,b){var c=this.editor;c.windowManager.open({url:this.url+"/link.htm",width:310+parseInt(c.getLang("advanced.link_delta_width",0)),height:200+parseInt(c.getLang("advanced.link_delta_height",0)),inline:!0},{theme_url:this.url})},_mceNewDocument:function(){var a=this.editor;a.windowManager.confirm("advanced.newdocument",function(b){b&&a.execCommand("mceSetContent",!1,"")})},_mceForeColor:function(){var a=this;this._mceColorPicker(0,{color:a.fgColor,func:function(b){a.fgColor=b,a.editor.execCommand("ForeColor",!1,b)}})},_mceBackColor:function(){var a=this;this._mceColorPicker(0,{color:a.bgColor,func:function(b){a.bgColor=b,a.editor.execCommand("HiliteColor",!1,b)}})},_ufirst:function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}}),a.ThemeManager.add("advanced",a.themes.AdvancedTheme)}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.extend,e=a.each,f=a.util.Cookie,g,h=a.explode;a.ThemeManager.requireLangPack("advanced"),a.create("tinymce.themes.AdvancedTheme",{sizes:[8,10,12,14,18,24,36],controls:{bold:["bold_desc","Bold"],italic:["italic_desc","Italic"],underline:["underline_desc","Underline"],strikethrough:["striketrough_desc","Strikethrough"],justifyleft:["justifyleft_desc","JustifyLeft"],justifycenter:["justifycenter_desc","JustifyCenter"],justifyright:["justifyright_desc","JustifyRight"],justifyfull:["justifyfull_desc","JustifyFull"],bullist:["bullist_desc","InsertUnorderedList"],numlist:["numlist_desc","InsertOrderedList"],outdent:["outdent_desc","Outdent"],indent:["indent_desc","Indent"],cut:["cut_desc","Cut"],copy:["copy_desc","Copy"],paste:["paste_desc","Paste"],undo:["undo_desc","Undo"],redo:["redo_desc","Redo"],link:["link_desc","mceLink"],unlink:["unlink_desc","unlink"],image:["image_desc","mceImage"],cleanup:["cleanup_desc","mceCleanup"],help:["help_desc","mceHelp"],code:["code_desc","mceCodeEditor"],hr:["hr_desc","InsertHorizontalRule"],removeformat:["removeformat_desc","RemoveFormat"],sub:["sub_desc","subscript"],sup:["sup_desc","superscript"],forecolor:["forecolor_desc","ForeColor"],forecolorpicker:["forecolor_desc","mceForeColor"],backcolor:["backcolor_desc","HiliteColor"],backcolorpicker:["backcolor_desc","mceBackColor"],charmap:["charmap_desc","mceCharMap"],visualaid:["visualaid_desc","mceToggleVisualAid"],anchor:["anchor_desc","mceInsertAnchor"],newdocument:["newdocument_desc","mceNewDocument"],blockquote:["blockquote_desc","mceBlockQuote"]},stateControls:["bold","italic","underline","strikethrough","bullist","numlist","justifyleft","justifycenter","justifyright","justifyfull","sub","sup","blockquote"],init:function(c,f){var g=this,h,i,j;g.editor=c,g.url=f,g.onResolveName=new a.util.Dispatcher(this),c.forcedHighContrastMode=c.settings.detect_highcontrast&&g._isHighContrast(),c.settings.skin=c.forcedHighContrastMode?"highcontrast":c.settings.skin,g.settings=h=d({theme_advanced_path:!0,theme_advanced_toolbar_location:"bottom",theme_advanced_buttons1:"bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect",theme_advanced_buttons2:"bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code",theme_advanced_buttons3:"hr,removeformat,visualaid,|,sub,sup,|,charmap",theme_advanced_blockformats:"p,address,pre,h1,h2,h3,h4,h5,h6",theme_advanced_toolbar_align:"center",theme_advanced_fonts:"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",theme_advanced_more_colors:1,theme_advanced_row_height:23,theme_advanced_resize_horizontal:1,theme_advanced_resizing_use_cookie:1,theme_advanced_font_sizes:"1,2,3,4,5,6,7",theme_advanced_font_selector:"span",theme_advanced_show_current_color:0,readonly:c.settings.readonly},c.settings),h.font_size_style_values||(h.font_size_style_values="8pt,10pt,12pt,14pt,18pt,24pt,36pt"),a.is(h.theme_advanced_font_sizes,"string")&&(h.font_size_style_values=a.explode(h.font_size_style_values),h.font_size_classes=a.explode(h.font_size_classes||""),j={},c.settings.theme_advanced_font_sizes=h.theme_advanced_font_sizes,e(c.getParam("theme_advanced_font_sizes","","hash"),function(a,b){var c;b==a&&a>=1&&a<=7&&(b=a+" ("+g.sizes[a-1]+"pt)",c=h.font_size_classes[a-1],a=h.font_size_style_values[a-1]||g.sizes[a-1]+"pt"),/^\s*\./.test(a)&&(c=a.replace(/\./g,"")),j[b]=c?{"class":c}:{fontSize:a}}),h.theme_advanced_font_sizes=j),(i=h.theme_advanced_path_location)&&i!="none"&&(h.theme_advanced_statusbar_location=h.theme_advanced_path_location),h.theme_advanced_statusbar_location=="none"&&(h.theme_advanced_statusbar_location=0),c.settings.content_css!==!1&&c.contentCSS.push(c.baseURI.toAbsolute(f+"/skins/"+c.settings.skin+"/content.css")),c.onInit.add(function(){c.settings.readonly||(c.onNodeChange.add(g._nodeChanged,g),c.onKeyUp.add(g._updateUndoStatus,g),c.onMouseUp.add(g._updateUndoStatus,g),c.dom.bind(c.dom.getRoot(),"dragend",function(){g._updateUndoStatus(c)}))}),c.onSetProgressState.add(function(a,c,d){var e,f=a.id,h;c?g.progressTimer=setTimeout(function(){e=a.getContainer(),e=e.insertBefore(b.create("DIV",{style:"position:relative"}),e.firstChild),h=b.get(a.id+"_tbl"),b.add(e,"div",{id:f+"_blocker","class":"mceBlocker",style:{width:h.clientWidth+2,height:h.clientHeight+2}}),b.add(e,"div",{id:f+"_progress","class":"mceProgress",style:{left:h.clientWidth/2,top:h.clientHeight/2}})},d||0):(b.remove(f+"_blocker"),b.remove(f+"_progress"),clearTimeout(g.progressTimer))}),b.loadCSS(h.editor_css?c.documentBaseURI.toAbsolute(h.editor_css):f+"/skins/"+c.settings.skin+"/ui.css"),h.skin_variant&&b.loadCSS(f+"/skins/"+c.settings.skin+"/ui_"+h.skin_variant+".css")},_isHighContrast:function(){var a,c=b.add(b.getRoot(),"div",{style:"background-color: rgb(171,239,86);"});return a=(b.getStyle(c,"background-color",!0)+"").toLowerCase().replace(/ /g,""),b.remove(c),a!="rgb(171,239,86)"&&a!="#abef56"},createControl:function(a,b){var c,d;if(d=b.createControl(a))return d;switch(a){case"styleselect":return this._createStyleSelect();case"formatselect":return this._createBlockFormats();case"fontselect":return this._createFontSelect();case"fontsizeselect":return this._createFontSizeSelect();case"forecolor":return this._createForeColorMenu();case"backcolor":return this._createBackColorMenu()}if(c=this.controls[a])return b.createButton(a,{title:"advanced."+c[0],cmd:c[1],ui:c[2],value:c[3]})},execCommand:function(a,b,c){var d=this["_"+a];return d?(d.call(this,b,c),!0):!1},_importClasses:function(a){var b=this.editor,c=b.controlManager.get("styleselect");c.getLength()==0&&e(b.dom.getClasses(),function(a,d){var e="style_"+d;b.formatter.register(e,{inline:"span",attributes:{"class":a["class"]},selector:"*"}),c.add(a["class"],e)})},_createStyleSelect:function(a){var b=this,d=b.editor,f=d.controlManager,g;return g=f.createListBox("styleselect",{title:"advanced.style_select",onselect:function(a){var b,c=[];return e(g.items,function(a){c.push(a.value)}),d.focus(),d.undoManager.add(),b=d.formatter.matchAll(c),!a||b[0]==a?b[0]&&d.formatter.remove(b[0]):d.formatter.apply(a),d.undoManager.add(),d.nodeChanged(),!1}}),d.onInit.add(function(){var a=0,c=d.getParam("style_formats");c?e(c,function(b){var c,f=0;e(b,function(){f++}),f>1?(c=b.name=b.name||"style_"+a++,d.formatter.register(c,b),g.add(b.title,c)):g.add(b.title)}):e(d.getParam("theme_advanced_styles","","hash"),function(c,e){var f;c&&(f="style_"+a++,d.formatter.register(f,{inline:"span",classes:c,selector:"*"}),g.add(b.editor.translate(e),f))})}),g.getLength()==0&&g.onPostRender.add(function(a,d){g.NativeListBox?c.add(d.id,"focus",b._importClasses,b):(c.add(d.id+"_text","focus",b._importClasses,b),c.add(d.id+"_text","mousedown",b._importClasses,b),c.add(d.id+"_open","focus",b._importClasses,b),c.add(d.id+"_open","mousedown",b._importClasses,b))}),g},_createFontSelect:function(){var a,b=this,c=b.editor;return a=c.controlManager.createListBox("fontselect",{title:"advanced.fontdefault",onselect:function(b){var d=a.items[a.selectedIndex];if(!b&&d){c.execCommand("FontName",!1,d.value);return}return c.execCommand("FontName",!1,b),a.select(function(a){return b==a}),d&&d.value==b&&a.select(null),!1}}),a&&e(c.getParam("theme_advanced_fonts",b.settings.theme_advanced_fonts,"hash"),function(b,d){a.add(c.translate(d),b,{style:b.indexOf("dings")==-1?"font-family:"+b:""})}),a},_createFontSizeSelect:function(){var a=this,b=a.editor,c,d=0,f=[];return c=b.controlManager.createListBox("fontsizeselect",{title:"advanced.font_size",onselect:function(a){var d=c.items[c.selectedIndex];if(!a&&d){d=d.value,d["class"]?(b.formatter.toggle("fontsize_class",{value:d["class"]}),b.undoManager.add(),b.nodeChanged()):b.execCommand("FontSize",!1,d.fontSize);return}return a["class"]?(b.focus(),b.undoManager.add(),b.formatter.toggle("fontsize_class",{value:a["class"]}),b.undoManager.add(),b.nodeChanged()):b.execCommand("FontSize",!1,a.fontSize),c.select(function(b){return a==b}),d&&(d.value.fontSize==a.fontSize||d.value["class"]==a["class"])&&c.select(null),!1}}),c&&e(a.settings.theme_advanced_font_sizes,function(b,e){var f=b.fontSize;f>=1&&f<=7&&(f=a.sizes[parseInt(f)-1]+"pt"),c.add(e,b,{style:"font-size:"+f,"class":"mceFontSize"+d++ +(" "+(b["class"]||""))})}),c},_createBlockFormats:function(){var a,b={p:"advanced.paragraph",address:"advanced.address",pre:"advanced.pre",h1:"advanced.h1",h2:"advanced.h2",h3:"advanced.h3",h4:"advanced.h4",h5:"advanced.h5",h6:"advanced.h6",div:"advanced.div",blockquote:"advanced.blockquote",code:"advanced.code",dt:"advanced.dt",dd:"advanced.dd",samp:"advanced.samp"},c=this;return a=c.editor.controlManager.createListBox("formatselect",{title:"advanced.block",onselect:function(a){return c.editor.execCommand("FormatBlock",!1,a),!1}}),a&&e(c.editor.getParam("theme_advanced_blockformats",c.settings.theme_advanced_blockformats,"hash"),function(d,e){a.add(c.editor.translate(e!=d?e:b[d]),d,{"class":"mce_formatPreview mce_"+d})}),a},_createForeColorMenu:function(){var a,b=this,c=b.settings,d={},e;c.theme_advanced_more_colors&&(d.more_colors_func=function(){b._mceColorPicker(0,{color:a.value,func:function(b){a.setColor(b)}})});if(e=c.theme_advanced_text_colors)d.colors=e;return c.theme_advanced_default_foreground_color&&(d.default_color=c.theme_advanced_default_foreground_color),d.title="advanced.forecolor_desc",d.cmd="ForeColor",d.scope=this,a=b.editor.controlManager.createColorSplitButton("forecolor",d),a},_createBackColorMenu:function(){var a,b=this,c=b.settings,d={},e;c.theme_advanced_more_colors&&(d.more_colors_func=function(){b._mceColorPicker(0,{color:a.value,func:function(b){a.setColor(b)}})});if(e=c.theme_advanced_background_colors)d.colors=e;return c.theme_advanced_default_background_color&&(d.default_color=c.theme_advanced_default_background_color),d.title="advanced.backcolor_desc",d.cmd="HiliteColor",d.scope=this,a=b.editor.controlManager.createColorSplitButton("backcolor",d),a},renderUI:function(d){var f,g,h,i=this,j=i.editor,k=i.settings,l,m,n;j.settings&&(j.settings.aria_label=k.aria_label+j.getLang("advanced.help_shortcut")),f=m=b.create("span",{role:"application","aria-labelledby":j.id+"_voice",id:j.id+"_parent","class":"mceEditor "+j.settings.skin+"Skin"+(k.skin_variant?" "+j.settings.skin+"Skin"+i._ufirst(k.skin_variant):"")}),b.add(f,"span",{"class":"mceVoiceLabel",style:"display:none;",id:j.id+"_voice"},k.aria_label),b.boxModel||(f=b.add(f,"div",{"class":"mceOldBoxModel"})),f=l=b.add(f,"table",{role:"presentation",id:j.id+"_tbl","class":"mceLayout",cellSpacing:0,cellPadding:0}),f=h=b.add(f,"tbody");switch((k.theme_advanced_layout_manager||"").toLowerCase()){case"rowlayout":g=i._rowLayout(k,h,d);break;case"customlayout":g=j.execCallback("theme_advanced_custom_layout",k,h,d,m);break;default:g=i._simpleLayout(k,h,d,m)}return f=d.targetNode,n=l.rows,b.addClass(n[0],"mceFirst"),b.addClass(n[n.length-1],"mceLast"),e(b.select("tr",h),function(a){b.addClass(a.firstChild,"mceFirst"),b.addClass(a.childNodes[a.childNodes.length-1],"mceLast")}),b.get(k.theme_advanced_toolbar_container)?b.get(k.theme_advanced_toolbar_container).appendChild(m):b.insertAfter(m,f),c.add(j.id+"_path_row","click",function(a){a=a.target;if(a.nodeName=="A")return i._sel(a.className.replace(/^.*mcePath_([0-9]+).*$/,"$1")),c.cancel(a)}),j.getParam("accessibility_focus")||c.add(b.add(m,"a",{href:"#"},"<!-- IE -->"),"focus",function(){tinyMCE.get(j.id).focus()}),k.theme_advanced_toolbar_location=="external"&&(d.deltaHeight=0),i.deltaHeight=d.deltaHeight,d.targetNode=null,j.onKeyDown.add(function(d,e){var f=121,g=122;if(e.altKey){if(e.keyCode===f)return a.isWebKit&&window.focus(),i.toolbarGroup.focus(),c.cancel(e);if(e.keyCode===g)return b.get(d.id+"_path_row").focus(),c.cancel(e)}}),j.addShortcut("alt+0","","mceShortcuts",i),{iframeContainer:g,editorContainer:j.id+"_parent",sizeContainer:l,deltaHeight:d.deltaHeight}},getInfo:function(){return{longname:"Advanced theme",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",version:a.majorVersion+"."+a.minorVersion}},resizeBy:function(a,c){var d=b.get(this.editor.id+"_ifr");this.resizeTo(d.clientWidth+a,d.clientHeight+c)},resizeTo:function(a,c,d){var e=this.editor,g=this.settings,h=b.get(e.id+"_tbl"),i=b.get(e.id+"_ifr");a=Math.max(g.theme_advanced_resizing_min_width||100,a),c=Math.max(g.theme_advanced_resizing_min_height||100,c),a=Math.min(g.theme_advanced_resizing_max_width||65535,a),c=Math.min(g.theme_advanced_resizing_max_height||65535,c),b.setStyle(h,"height",""),b.setStyle(i,"height",c),g.theme_advanced_resize_horizontal&&(b.setStyle(h,"width",""),b.setStyle(i,"width",a),a<h.clientWidth&&(a=h.clientWidth,b.setStyle(i,"width",h.clientWidth))),d&&g.theme_advanced_resizing_use_cookie&&f.setHash("TinyMCE_"+e.id+"_size",{cw:a,ch:c})},destroy:function(){var a=this.editor.id;c.clear(a+"_resize"),c.clear(a+"_path_row"),c.clear(a+"_external_close")},_simpleLayout:function(a,d,e,f){var h=this,i=h.editor,j=a.theme_advanced_toolbar_location,k=a.theme_advanced_statusbar_location,l,m,n,o;return a.readonly?(l=b.add(d,"tr"),l=m=b.add(l,"td",{"class":"mceIframeContainer"}),m):(j=="top"&&h._addToolbars(d,e),j=="external"&&(l=o=b.create("div",{style:"position:relative"}),l=b.add(l,"div",{id:i.id+"_external","class":"mceExternalToolbar"}),b.add(l,"a",{id:i.id+"_external_close",href:"javascript:;","class":"mceExternalClose"}),l=b.add(l,"table",{id:i.id+"_tblext",cellSpacing:0,cellPadding:0}),n=b.add(l,"tbody"),f.firstChild.className=="mceOldBoxModel"?f.firstChild.appendChild(o):f.insertBefore(o,f.firstChild),h._addToolbars(n,e),i.onMouseUp.add(function(){var a=b.get(i.id+"_external");b.show(a),b.hide(g);var d=c.add(i.id+"_external_close","click",function(){b.hide(i.id+"_external"),c.remove(i.id+"_external_close","click",d)});b.show(a),b.setStyle(a,"top",0-b.getRect(i.id+"_tblext").h-1),b.hide(a),b.show(a),a.style.filter="",g=i.id+"_external",a=null})),k=="top"&&h._addStatusBar(d,e),a.theme_advanced_toolbar_container||(l=b.add(d,"tr"),l=m=b.add(l,"td",{"class":"mceIframeContainer"})),j=="bottom"&&h._addToolbars(d,e),k=="bottom"&&h._addStatusBar(d,e),m)},_rowLayout:function(a,c,d){var f=this,g=f.editor,i,j,k=g.controlManager,l,m,n,o;return i=a.theme_advanced_containers_default_class||"",j=a.theme_advanced_containers_default_align||"center",e(h(a.theme_advanced_containers||""),function(e,g){var h=a["theme_advanced_container_"+e]||"";switch(e.toLowerCase()){case"mceeditor":l=b.add(c,"tr"),l=m=b.add(l,"td",{"class":"mceIframeContainer"});break;case"mceelementpath":f._addStatusBar(c,d);break;default:o=(a["theme_advanced_container_"+e+"_align"]||j).toLowerCase(),o="mce"+f._ufirst(o),l=b.add(b.add(c,"tr"),"td",{"class":"mceToolbar "+(a["theme_advanced_container_"+e+"_class"]||i)+" "+o||j}),n=k.createToolbar("toolbar"+g),f._addControls(h,n),b.setHTML(l,n.renderHTML()),d.deltaHeight-=a.theme_advanced_row_height}}),m},_addControls:function(a,b){var c=this,d=c.settings,f,g=c.editor.controlManager;d.theme_advanced_disable&&!c._disabled?(f={},e(h(d.theme_advanced_disable),function(a){f[a]=1}),c._disabled=f):f=c._disabled,e(h(a),function(a){var d;if(f&&f[a])return;if(a=="tablecontrols"){e(["table","|","row_props","cell_props","|","row_before","row_after","delete_row","|","col_before","col_after","delete_col","|","split_cells","merge_cells"],function(a){a=c.createControl(a,g),a&&b.add(a)});return}d=c.createControl(a,g),d&&b.add(d)})},_addToolbars:function(a,c){var d=this,e,f,g=d.editor,h=d.settings,i,j=g.controlManager,k,l,m=[],n,o;o=j.createToolbarGroup("toolbargroup",{name:g.getLang("advanced.toolbar"),tab_focus_toolbar:g.getParam("theme_advanced_tab_focus_toolbar")}),d.toolbarGroup=o,n=h.theme_advanced_toolbar_align.toLowerCase(),n="mce"+d._ufirst(n),l=b.add(b.add(a,"tr",{role:"presentation"}),"td",{"class":"mceToolbar "+n,role:"presentation"});for(e=1;i=h["theme_advanced_buttons"+e];e++)f=j.createToolbar("toolbar"+e,{"class":"mceToolbarRow"+e}),h["theme_advanced_buttons"+e+"_add"]&&(i+=","+h["theme_advanced_buttons"+e+"_add"]),h["theme_advanced_buttons"+e+"_add_before"]&&(i=h["theme_advanced_buttons"+e+"_add_before"]+","+i),d._addControls(i,f),o.add(f),c.deltaHeight-=h.theme_advanced_row_height;m.push(o.renderHTML()),m.push(b.createHTML("a",{href:"#",accesskey:"z",title:g.getLang("advanced.toolbar_focus"),onfocus:"tinyMCE.getInstanceById('"+g.id+"').focus();"},"<!-- IE -->")),b.setHTML(l,m.join(""))},_addStatusBar:function(a,d){var e,g=this,h=g.editor,i=g.settings,j,k,l,m;e=b.add(a,"tr"),e=m=b.add(e,"td",{"class":"mceStatusbar"}),e=b.add(e,"div",{id:h.id+"_path_row",role:"group","aria-labelledby":h.id+"_path_voice"}),i.theme_advanced_path?(b.add(e,"span",{id:h.id+"_path_voice"},h.translate("advanced.path")),b.add(e,"span",{},": ")):b.add(e,"span",{},"&#160;"),i.theme_advanced_resizing&&(b.add(m,"a",{id:h.id+"_resize",href:"javascript:;",onclick:"return false;","class":"mceResize",tabIndex:"-1"}),i.theme_advanced_resizing_use_cookie&&h.onPostRender.add(function(){var a=f.getHash("TinyMCE_"+h.id+"_size"),c=b.get(h.id+"_tbl");if(!a)return;g.resizeTo(a.cw,a.ch)}),h.onPostRender.add(function(){c.add(h.id+"_resize","click",function(a){a.preventDefault()}),c.add(h.id+"_resize","mousedown",function(a){function q(a){a.preventDefault(),n=l+(a.screenX-j),o=m+(a.screenY-k),g.resizeTo(n,o)}function r(a){c.remove(b.doc,"mousemove",d),c.remove(h.getDoc(),"mousemove",e),c.remove(b.doc,"mouseup",f),c.remove(h.getDoc(),"mouseup",i),n=l+(a.screenX-j),o=m+(a.screenY-k),g.resizeTo(n,o,!0)}var d,e,f,i,j,k,l,m,n,o,p;a.preventDefault(),j=a.screenX,k=a.screenY,p=b.get(g.editor.id+"_ifr"),l=n=p.clientWidth,m=o=p.clientHeight,d=c.add(b.doc,"mousemove",q),e=c.add(h.getDoc(),"mousemove",q),f=c.add(b.doc,"mouseup",r),i=c.add(h.getDoc(),"mouseup",r)})})),d.deltaHeight-=21,e=a=null},_updateUndoStatus:function(a){var b=a.controlManager,c=a.undoManager;b.setDisabled("undo",!c.hasUndo()&&!c.typing),b.setDisabled("redo",!c.hasRedo())},_nodeChanged:function(c,d,f,g,h){function v(a){var b,c=h.parents,d=a;typeof a=="string"&&(d=function(b){return b.nodeName==a});for(b=0;b<c.length;b++)if(d(c[b]))return c[b]}var i=this,j,k=0,l,m,n=i.settings,o,p,q,r,s,t,u;a.each(i.stateControls,function(a){d.setActive(a,c.queryCommandState(i.controls[a][1]))}),d.setActive("visualaid",c.hasVisual),i._updateUndoStatus(c),d.setDisabled("outdent",!c.queryCommandState("Outdent")),j=v("A");if(m=d.get("link"))if(!j||!j.name)m.setDisabled(!j&&g),m.setActive(!!j);if(m=d.get("unlink"))m.setDisabled(!j&&g),m.setActive(!!j&&!j.name);(m=d.get("anchor"))&&m.setActive(!g&&!!j&&j.name),j=v("IMG"),(m=d.get("image"))&&m.setActive(!g&&!!j&&f.className.indexOf("mceItem")==-1);if(m=d.get("styleselect"))i._importClasses(),t=[],e(m.items,function(a){t.push(a.value)}),u=c.formatter.matchAll(t),m.select(u[0]);if(m=d.get("formatselect"))j=v(b.isBlock),j&&m.select(j.nodeName.toLowerCase());v(function(a){return a.nodeName==="SPAN"&&!o&&a.className&&(o=a.className),c.dom.is(a,n.theme_advanced_font_selector)&&(!p&&a.style.fontSize&&(p=a.style.fontSize),!q&&a.style.fontFamily&&(q=a.style.fontFamily.replace(/[\"\']+/g,"").replace(/^([^,]+).*/,"$1").toLowerCase()),!r&&a.style.color&&(r=a.style.color),!s&&a.style.backgroundColor&&(s=a.style.backgroundColor)),!1}),(m=d.get("fontselect"))&&m.select(function(a){return a.replace(/^([^,]+).*/,"$1").toLowerCase()==q});if(m=d.get("fontsizeselect"))n.theme_advanced_runtime_fontsize&&!p&&!o&&(p=c.dom.getStyle(f,"fontSize",!0)),m.select(function(a){if(a.fontSize&&a.fontSize===p)return!0;if(a["class"]&&a["class"]===o)return!0});if(n.theme_advanced_show_current_color){function w(a,b){if(m=d.get(a))b||(b=m.settings.default_color),b!==m.value&&m.displayColor(b)}w("forecolor",r),w("backcolor",s)}if(n.theme_advanced_show_current_color){function w(a,b){if(m=d.get(a))b||(b=m.settings.default_color),b!==m.value&&m.displayColor(b)}w("forecolor",r),w("backcolor",s)}n.theme_advanced_path&&n.theme_advanced_statusbar_location&&(j=b.get(c.id+"_path")||b.add(c.id+"_path_row","span",{id:c.id+"_path"}),i.statusKeyboardNavigation&&(i.statusKeyboardNavigation.destroy(),i.statusKeyboardNavigation=null),b.setHTML(j,""),v(function(c){var d=c.nodeName.toLowerCase(),e,f,g="";if(c.nodeType!=1||d==="br"||c.getAttribute("data-mce-bogus")||b.hasClass(c,"mceItemHidden")||b.hasClass(c,"mceItemRemoved"))return;a.isIE&&c.scopeName!=="HTML"&&(d=c.scopeName+":"+d),d=d.replace(/mce\:/g,"");switch(d){case"b":d="strong";break;case"i":d="em";break;case"img":if(l=b.getAttrib(c,"src"))g+="src: "+l+" ";break;case"a":if(l=b.getAttrib(c,"name"))g+="name: "+l+" ",d+="#"+l;if(l=b.getAttrib(c,"href"))g+="href: "+l+" ";break;case"font":if(l=b.getAttrib(c,"face"))g+="font: "+l+" ";if(l=b.getAttrib(c,"size"))g+="size: "+l+" ";if(l=b.getAttrib(c,"color"))g+="color: "+l+" ";break;case"span":if(l=b.getAttrib(c,"style"))g+="style: "+l+" "}if(l=b.getAttrib(c,"id"))g+="id: "+l+" ";if(l=c.className){l=l.replace(/\b\s*(webkit|mce|Apple-)\w+\s*\b/g,"");if(l){g+="class: "+l+" ";if(b.isBlock(c)||d=="img"||d=="span")d+="."+l}}d=d.replace(/(html:)/g,""),d={name:d,node:c,title:g},i.onResolveName.dispatch(i,d),g=d.title,d=d.name,f=b.create("a",{href:"javascript:;",role:"button",onmousedown:"return false;",title:g,"class":"mcePath_"+k++},d),j.hasChildNodes()?(j.insertBefore(b.create("span",{"aria-hidden":"true"}," » "),j.firstChild),j.insertBefore
(f,j.firstChild)):j.appendChild(f)},c.getBody()),b.select("a",j).length>0&&(i.statusKeyboardNavigation=new a.ui.KeyboardNavigation({root:c.id+"_path_row",items:b.select("a",j),excludeFromTabOrder:!0,onCancel:function(){c.focus()}},b)))},_sel:function(a){this.editor.execCommand("mceSelectNodeDepth",!1,a)},_mceInsertAnchor:function(a,b){var c=this.editor;c.windowManager.open({url:this.url+"/anchor.htm",width:320+parseInt(c.getLang("advanced.anchor_delta_width",0)),height:90+parseInt(c.getLang("advanced.anchor_delta_height",0)),inline:!0},{theme_url:this.url})},_mceCharMap:function(){var a=this.editor;a.windowManager.open({url:this.url+"/charmap.htm",width:550+parseInt(a.getLang("advanced.charmap_delta_width",0)),height:260+parseInt(a.getLang("advanced.charmap_delta_height",0)),inline:!0},{theme_url:this.url})},_mceHelp:function(){var a=this.editor;a.windowManager.open({url:this.url+"/about.htm",width:480,height:380,inline:!0},{theme_url:this.url})},_mceShortcuts:function(){var a=this.editor;a.windowManager.open({url:this.url+"/shortcuts.htm",width:480,height:380,inline:!0},{theme_url:this.url})},_mceColorPicker:function(a,b){var c=this.editor;b=b||{},c.windowManager.open({url:this.url+"/color_picker.htm",width:375+parseInt(c.getLang("advanced.colorpicker_delta_width",0)),height:250+parseInt(c.getLang("advanced.colorpicker_delta_height",0)),close_previous:!1,inline:!0},{input_color:b.color,func:b.func,theme_url:this.url})},_mceCodeEditor:function(a,b){var c=this.editor;c.windowManager.open({url:this.url+"/source_editor.htm",width:parseInt(c.getParam("theme_advanced_source_editor_width",720)),height:parseInt(c.getParam("theme_advanced_source_editor_height",580)),inline:!0,resizable:!0,maximizable:!0},{theme_url:this.url})},_mceImage:function(a,b){var c=this.editor;if(c.dom.getAttrib(c.selection.getNode(),"class").indexOf("mceItem")!=-1)return;c.windowManager.open({url:this.url+"/image.htm",width:355+parseInt(c.getLang("advanced.image_delta_width",0)),height:275+parseInt(c.getLang("advanced.image_delta_height",0)),inline:!0},{theme_url:this.url})},_mceLink:function(a,b){var c=this.editor;c.windowManager.open({url:this.url+"/link.htm",width:310+parseInt(c.getLang("advanced.link_delta_width",0)),height:200+parseInt(c.getLang("advanced.link_delta_height",0)),inline:!0},{theme_url:this.url})},_mceNewDocument:function(){var a=this.editor;a.windowManager.confirm("advanced.newdocument",function(b){b&&a.execCommand("mceSetContent",!1,"")})},_mceForeColor:function(){var a=this;this._mceColorPicker(0,{color:a.fgColor,func:function(b){a.fgColor=b,a.editor.execCommand("ForeColor",!1,b)}})},_mceBackColor:function(){var a=this;this._mceColorPicker(0,{color:a.bgColor,func:function(b){a.bgColor=b,a.editor.execCommand("HiliteColor",!1,b)}})},_ufirst:function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}}),a.ThemeManager.add("advanced",a.themes.AdvancedTheme)}(tinymce),tinyMCEPopup.requireLangPack(),tinyMCEPopup.onInit.add(init),tinyMCEPopup.requireLangPack();var AnchorDialog={init:function(a){var b,c,d=document.forms[0];this.editor=a,c=a.dom.getParent(a.selection.getNode(),"A"),v=a.dom.getAttrib(c,"name"),v&&(this.action="update",d.anchorName.value=v),d.insert.value=a.getLang(c?"update":"insert")},update:function(){var a=this.editor,b,c=document.forms[0].anchorName.value;if(!c||!/^[a-z][a-z0-9\-\_:\.]*$/i.test(c)){tinyMCEPopup.alert("advanced_dlg.anchor_invalid");return}tinyMCEPopup.restoreSelection(),this.action!="update"&&a.selection.collapse(1),b=a.dom.getParent(a.selection.getNode(),"A"),b?(b.setAttribute("name",c),b.name=c):a.execCommand("mceInsertContent",0,a.dom.createHTML("a",{name:c,"class":"mceItemAnchor"},"")),tinyMCEPopup.close()}};tinyMCEPopup.onInit.add(AnchorDialog.init,AnchorDialog),tinyMCEPopup.requireLangPack();var charmap=[["&nbsp;","&#160;",!0,"no-break space"],["&amp;","&#38;",!0,"ampersand"],["&quot;","&#34;",!0,"quotation mark"],["&cent;","&#162;",!0,"cent sign"],["&euro;","&#8364;",!0,"euro sign"],["&pound;","&#163;",!0,"pound sign"],["&yen;","&#165;",!0,"yen sign"],["&copy;","&#169;",!0,"copyright sign"],["&reg;","&#174;",!0,"registered sign"],["&trade;","&#8482;",!0,"trade mark sign"],["&permil;","&#8240;",!0,"per mille sign"],["&micro;","&#181;",!0,"micro sign"],["&middot;","&#183;",!0,"middle dot"],["&bull;","&#8226;",!0,"bullet"],["&hellip;","&#8230;",!0,"three dot leader"],["&prime;","&#8242;",!0,"minutes / feet"],["&Prime;","&#8243;",!0,"seconds / inches"],["&sect;","&#167;",!0,"section sign"],["&para;","&#182;",!0,"paragraph sign"],["&szlig;","&#223;",!0,"sharp s / ess-zed"],["&lsaquo;","&#8249;",!0,"single left-pointing angle quotation mark"],["&rsaquo;","&#8250;",!0,"single right-pointing angle quotation mark"],["&laquo;","&#171;",!0,"left pointing guillemet"],["&raquo;","&#187;",!0,"right pointing guillemet"],["&lsquo;","&#8216;",!0,"left single quotation mark"],["&rsquo;","&#8217;",!0,"right single quotation mark"],["&ldquo;","&#8220;",!0,"left double quotation mark"],["&rdquo;","&#8221;",!0,"right double quotation mark"],["&sbquo;","&#8218;",!0,"single low-9 quotation mark"],["&bdquo;","&#8222;",!0,"double low-9 quotation mark"],["&lt;","&#60;",!0,"less-than sign"],["&gt;","&#62;",!0,"greater-than sign"],["&le;","&#8804;",!0,"less-than or equal to"],["&ge;","&#8805;",!0,"greater-than or equal to"],["&ndash;","&#8211;",!0,"en dash"],["&mdash;","&#8212;",!0,"em dash"],["&macr;","&#175;",!0,"macron"],["&oline;","&#8254;",!0,"overline"],["&curren;","&#164;",!0,"currency sign"],["&brvbar;","&#166;",!0,"broken bar"],["&uml;","&#168;",!0,"diaeresis"],["&iexcl;","&#161;",!0,"inverted exclamation mark"],["&iquest;","&#191;",!0,"turned question mark"],["&circ;","&#710;",!0,"circumflex accent"],["&tilde;","&#732;",!0,"small tilde"],["&deg;","&#176;",!0,"degree sign"],["&minus;","&#8722;",!0,"minus sign"],["&plusmn;","&#177;",!0,"plus-minus sign"],["&divide;","&#247;",!0,"division sign"],["&frasl;","&#8260;",!0,"fraction slash"],["&times;","&#215;",!0,"multiplication sign"],["&sup1;","&#185;",!0,"superscript one"],["&sup2;","&#178;",!0,"superscript two"],["&sup3;","&#179;",!0,"superscript three"],["&frac14;","&#188;",!0,"fraction one quarter"],["&frac12;","&#189;",!0,"fraction one half"],["&frac34;","&#190;",!0,"fraction three quarters"],["&fnof;","&#402;",!0,"function / florin"],["&int;","&#8747;",!0,"integral"],["&sum;","&#8721;",!0,"n-ary sumation"],["&infin;","&#8734;",!0,"infinity"],["&radic;","&#8730;",!0,"square root"],["&sim;","&#8764;",!1,"similar to"],["&cong;","&#8773;",!1,"approximately equal to"],["&asymp;","&#8776;",!0,"almost equal to"],["&ne;","&#8800;",!0,"not equal to"],["&equiv;","&#8801;",!0,"identical to"],["&isin;","&#8712;",!1,"element of"],["&notin;","&#8713;",!1,"not an element of"],["&ni;","&#8715;",!1,"contains as member"],["&prod;","&#8719;",!0,"n-ary product"],["&and;","&#8743;",!1,"logical and"],["&or;","&#8744;",!1,"logical or"],["&not;","&#172;",!0,"not sign"],["&cap;","&#8745;",!0,"intersection"],["&cup;","&#8746;",!1,"union"],["&part;","&#8706;",!0,"partial differential"],["&forall;","&#8704;",!1,"for all"],["&exist;","&#8707;",!1,"there exists"],["&empty;","&#8709;",!1,"diameter"],["&nabla;","&#8711;",!1,"backward difference"],["&lowast;","&#8727;",!1,"asterisk operator"],["&prop;","&#8733;",!1,"proportional to"],["&ang;","&#8736;",!1,"angle"],["&acute;","&#180;",!0,"acute accent"],["&cedil;","&#184;",!0,"cedilla"],["&ordf;","&#170;",!0,"feminine ordinal indicator"],["&ordm;","&#186;",!0,"masculine ordinal indicator"],["&dagger;","&#8224;",!0,"dagger"],["&Dagger;","&#8225;",!0,"double dagger"],["&Agrave;","&#192;",!0,"A - grave"],["&Aacute;","&#193;",!0,"A - acute"],["&Acirc;","&#194;",!0,"A - circumflex"],["&Atilde;","&#195;",!0,"A - tilde"],["&Auml;","&#196;",!0,"A - diaeresis"],["&Aring;","&#197;",!0,"A - ring above"],["&AElig;","&#198;",!0,"ligature AE"],["&Ccedil;","&#199;",!0,"C - cedilla"],["&Egrave;","&#200;",!0,"E - grave"],["&Eacute;","&#201;",!0,"E - acute"],["&Ecirc;","&#202;",!0,"E - circumflex"],["&Euml;","&#203;",!0,"E - diaeresis"],["&Igrave;","&#204;",!0,"I - grave"],["&Iacute;","&#205;",!0,"I - acute"],["&Icirc;","&#206;",!0,"I - circumflex"],["&Iuml;","&#207;",!0,"I - diaeresis"],["&ETH;","&#208;",!0,"ETH"],["&Ntilde;","&#209;",!0,"N - tilde"],["&Ograve;","&#210;",!0,"O - grave"],["&Oacute;","&#211;",!0,"O - acute"],["&Ocirc;","&#212;",!0,"O - circumflex"],["&Otilde;","&#213;",!0,"O - tilde"],["&Ouml;","&#214;",!0,"O - diaeresis"],["&Oslash;","&#216;",!0,"O - slash"],["&OElig;","&#338;",!0,"ligature OE"],["&Scaron;","&#352;",!0,"S - caron"],["&Ugrave;","&#217;",!0,"U - grave"],["&Uacute;","&#218;",!0,"U - acute"],["&Ucirc;","&#219;",!0,"U - circumflex"],["&Uuml;","&#220;",!0,"U - diaeresis"],["&Yacute;","&#221;",!0,"Y - acute"],["&Yuml;","&#376;",!0,"Y - diaeresis"],["&THORN;","&#222;",!0,"THORN"],["&agrave;","&#224;",!0,"a - grave"],["&aacute;","&#225;",!0,"a - acute"],["&acirc;","&#226;",!0,"a - circumflex"],["&atilde;","&#227;",!0,"a - tilde"],["&auml;","&#228;",!0,"a - diaeresis"],["&aring;","&#229;",!0,"a - ring above"],["&aelig;","&#230;",!0,"ligature ae"],["&ccedil;","&#231;",!0,"c - cedilla"],["&egrave;","&#232;",!0,"e - grave"],["&eacute;","&#233;",!0,"e - acute"],["&ecirc;","&#234;",!0,"e - circumflex"],["&euml;","&#235;",!0,"e - diaeresis"],["&igrave;","&#236;",!0,"i - grave"],["&iacute;","&#237;",!0,"i - acute"],["&icirc;","&#238;",!0,"i - circumflex"],["&iuml;","&#239;",!0,"i - diaeresis"],["&eth;","&#240;",!0,"eth"],["&ntilde;","&#241;",!0,"n - tilde"],["&ograve;","&#242;",!0,"o - grave"],["&oacute;","&#243;",!0,"o - acute"],["&ocirc;","&#244;",!0,"o - circumflex"],["&otilde;","&#245;",!0,"o - tilde"],["&ouml;","&#246;",!0,"o - diaeresis"],["&oslash;","&#248;",!0,"o slash"],["&oelig;","&#339;",!0,"ligature oe"],["&scaron;","&#353;",!0,"s - caron"],["&ugrave;","&#249;",!0,"u - grave"],["&uacute;","&#250;",!0,"u - acute"],["&ucirc;","&#251;",!0,"u - circumflex"],["&uuml;","&#252;",!0,"u - diaeresis"],["&yacute;","&#253;",!0,"y - acute"],["&thorn;","&#254;",!0,"thorn"],["&yuml;","&#255;",!0,"y - diaeresis"],["&Alpha;","&#913;",!0,"Alpha"],["&Beta;","&#914;",!0,"Beta"],["&Gamma;","&#915;",!0,"Gamma"],["&Delta;","&#916;",!0,"Delta"],["&Epsilon;","&#917;",!0,"Epsilon"],["&Zeta;","&#918;",!0,"Zeta"],["&Eta;","&#919;",!0,"Eta"],["&Theta;","&#920;",!0,"Theta"],["&Iota;","&#921;",!0,"Iota"],["&Kappa;","&#922;",!0,"Kappa"],["&Lambda;","&#923;",!0,"Lambda"],["&Mu;","&#924;",!0,"Mu"],["&Nu;","&#925;",!0,"Nu"],["&Xi;","&#926;",!0,"Xi"],["&Omicron;","&#927;",!0,"Omicron"],["&Pi;","&#928;",!0,"Pi"],["&Rho;","&#929;",!0,"Rho"],["&Sigma;","&#931;",!0,"Sigma"],["&Tau;","&#932;",!0,"Tau"],["&Upsilon;","&#933;",!0,"Upsilon"],["&Phi;","&#934;",!0,"Phi"],["&Chi;","&#935;",!0,"Chi"],["&Psi;","&#936;",!0,"Psi"],["&Omega;","&#937;",!0,"Omega"],["&alpha;","&#945;",!0,"alpha"],["&beta;","&#946;",!0,"beta"],["&gamma;","&#947;",!0,"gamma"],["&delta;","&#948;",!0,"delta"],["&epsilon;","&#949;",!0,"epsilon"],["&zeta;","&#950;",!0,"zeta"],["&eta;","&#951;",!0,"eta"],["&theta;","&#952;",!0,"theta"],["&iota;","&#953;",!0,"iota"],["&kappa;","&#954;",!0,"kappa"],["&lambda;","&#955;",!0,"lambda"],["&mu;","&#956;",!0,"mu"],["&nu;","&#957;",!0,"nu"],["&xi;","&#958;",!0,"xi"],["&omicron;","&#959;",!0,"omicron"],["&pi;","&#960;",!0,"pi"],["&rho;","&#961;",!0,"rho"],["&sigmaf;","&#962;",!0,"final sigma"],["&sigma;","&#963;",!0,"sigma"],["&tau;","&#964;",!0,"tau"],["&upsilon;","&#965;",!0,"upsilon"],["&phi;","&#966;",!0,"phi"],["&chi;","&#967;",!0,"chi"],["&psi;","&#968;",!0,"psi"],["&omega;","&#969;",!0,"omega"],["&alefsym;","&#8501;",!1,"alef symbol"],["&piv;","&#982;",!1,"pi symbol"],["&real;","&#8476;",!1,"real part symbol"],["&thetasym;","&#977;",!1,"theta symbol"],["&upsih;","&#978;",!1,"upsilon - hook symbol"],["&weierp;","&#8472;",!1,"Weierstrass p"],["&image;","&#8465;",!1,"imaginary part"],["&larr;","&#8592;",!0,"leftwards arrow"],["&uarr;","&#8593;",!0,"upwards arrow"],["&rarr;","&#8594;",!0,"rightwards arrow"],["&darr;","&#8595;",!0,"downwards arrow"],["&harr;","&#8596;",!0,"left right arrow"],["&crarr;","&#8629;",!1,"carriage return"],["&lArr;","&#8656;",!1,"leftwards double arrow"],["&uArr;","&#8657;",!1,"upwards double arrow"],["&rArr;","&#8658;",!1,"rightwards double arrow"],["&dArr;","&#8659;",!1,"downwards double arrow"],["&hArr;","&#8660;",!1,"left right double arrow"],["&there4;","&#8756;",!1,"therefore"],["&sub;","&#8834;",!1,"subset of"],["&sup;","&#8835;",!1,"superset of"],["&nsub;","&#8836;",!1,"not a subset of"],["&sube;","&#8838;",!1,"subset of or equal to"],["&supe;","&#8839;",!1,"superset of or equal to"],["&oplus;","&#8853;",!1,"circled plus"],["&otimes;","&#8855;",!1,"circled times"],["&perp;","&#8869;",!1,"perpendicular"],["&sdot;","&#8901;",!1,"dot operator"],["&lceil;","&#8968;",!1,"left ceiling"],["&rceil;","&#8969;",!1,"right ceiling"],["&lfloor;","&#8970;",!1,"left floor"],["&rfloor;","&#8971;",!1,"right floor"],["&lang;","&#9001;",!1,"left-pointing angle bracket"],["&rang;","&#9002;",!1,"right-pointing angle bracket"],["&loz;","&#9674;",!0,"lozenge"],["&spades;","&#9824;",!0,"black spade suit"],["&clubs;","&#9827;",!0,"black club suit"],["&hearts;","&#9829;",!0,"black heart suit"],["&diams;","&#9830;",!0,"black diamond suit"],["&ensp;","&#8194;",!1,"en space"],["&emsp;","&#8195;",!1,"em space"],["&thinsp;","&#8201;",!1,"thin space"],["&zwnj;","&#8204;",!1,"zero width non-joiner"],["&zwj;","&#8205;",!1,"zero width joiner"],["&lrm;","&#8206;",!1,"left-to-right mark"],["&rlm;","&#8207;",!1,"right-to-left mark"],["&shy;","&#173;",!1,"soft hyphen"]];tinyMCEPopup.onInit.add(function(){tinyMCEPopup.dom.setHTML("charmapView",renderCharMapHTML()),addKeyboardNavigation()}),tinyMCEPopup.requireLangPack();var detail=50,strhex="0123456789abcdef",i,isMouseDown=!1,isMouseOver=!1,colors=["#000000","#000033","#000066","#000099","#0000cc","#0000ff","#330000","#330033","#330066","#330099","#3300cc","#3300ff","#660000","#660033","#660066","#660099","#6600cc","#6600ff","#990000","#990033","#990066","#990099","#9900cc","#9900ff","#cc0000","#cc0033","#cc0066","#cc0099","#cc00cc","#cc00ff","#ff0000","#ff0033","#ff0066","#ff0099","#ff00cc","#ff00ff","#003300","#003333","#003366","#003399","#0033cc","#0033ff","#333300","#333333","#333366","#333399","#3333cc","#3333ff","#663300","#663333","#663366","#663399","#6633cc","#6633ff","#993300","#993333","#993366","#993399","#9933cc","#9933ff","#cc3300","#cc3333","#cc3366","#cc3399","#cc33cc","#cc33ff","#ff3300","#ff3333","#ff3366","#ff3399","#ff33cc","#ff33ff","#006600","#006633","#006666","#006699","#0066cc","#0066ff","#336600","#336633","#336666","#336699","#3366cc","#3366ff","#666600","#666633","#666666","#666699","#6666cc","#6666ff","#996600","#996633","#996666","#996699","#9966cc","#9966ff","#cc6600","#cc6633","#cc6666","#cc6699","#cc66cc","#cc66ff","#ff6600","#ff6633","#ff6666","#ff6699","#ff66cc","#ff66ff","#009900","#009933","#009966","#009999","#0099cc","#0099ff","#339900","#339933","#339966","#339999","#3399cc","#3399ff","#669900","#669933","#669966","#669999","#6699cc","#6699ff","#999900","#999933","#999966","#999999","#9999cc","#9999ff","#cc9900","#cc9933","#cc9966","#cc9999","#cc99cc","#cc99ff","#ff9900","#ff9933","#ff9966","#ff9999","#ff99cc","#ff99ff","#00cc00","#00cc33","#00cc66","#00cc99","#00cccc","#00ccff","#33cc00","#33cc33","#33cc66","#33cc99","#33cccc","#33ccff","#66cc00","#66cc33","#66cc66","#66cc99","#66cccc","#66ccff","#99cc00","#99cc33","#99cc66","#99cc99","#99cccc","#99ccff","#cccc00","#cccc33","#cccc66","#cccc99","#cccccc","#ccccff","#ffcc00","#ffcc33","#ffcc66","#ffcc99","#ffcccc","#ffccff","#00ff00","#00ff33","#00ff66","#00ff99","#00ffcc","#00ffff","#33ff00","#33ff33","#33ff66","#33ff99","#33ffcc","#33ffff","#66ff00","#66ff33","#66ff66","#66ff99","#66ffcc","#66ffff","#99ff00","#99ff33","#99ff66","#99ff99","#99ffcc","#99ffff","#ccff00","#ccff33","#ccff66","#ccff99","#ccffcc","#ccffff","#ffff00","#ffff33","#ffff66","#ffff99","#ffffcc","#ffffff"],named={"#F0F8FF":"Alice Blue","#FAEBD7":"Antique White","#00FFFF":"Aqua","#7FFFD4":"Aquamarine","#F0FFFF":"Azure","#F5F5DC":"Beige","#FFE4C4":"Bisque","#000000":"Black","#FFEBCD":"Blanched Almond","#0000FF":"Blue","#8A2BE2":"Blue Violet","#A52A2A":"Brown","#DEB887":"Burly Wood","#5F9EA0":"Cadet Blue","#7FFF00":"Chartreuse","#D2691E":"Chocolate","#FF7F50":"Coral","#6495ED":"Cornflower Blue","#FFF8DC":"Cornsilk","#DC143C":"Crimson","#00FFFF":"Cyan","#00008B":"Dark Blue","#008B8B":"Dark Cyan","#B8860B":"Dark Golden Rod","#A9A9A9":"Dark Gray","#A9A9A9":"Dark Grey","#006400":"Dark Green","#BDB76B":"Dark Khaki","#8B008B":"Dark Magenta","#556B2F":"Dark Olive Green","#FF8C00":"Darkorange","#9932CC":"Dark Orchid","#8B0000":"Dark Red","#E9967A":"Dark Salmon","#8FBC8F":"Dark Sea Green","#483D8B":"Dark Slate Blue","#2F4F4F":"Dark Slate Gray","#2F4F4F":"Dark Slate Grey","#00CED1":"Dark Turquoise","#9400D3":"Dark Violet","#FF1493":"Deep Pink","#00BFFF":"Deep Sky Blue","#696969":"Dim Gray","#696969":"Dim Grey","#1E90FF":"Dodger Blue","#B22222":"Fire Brick","#FFFAF0":"Floral White","#228B22":"Forest Green","#FF00FF":"Fuchsia","#DCDCDC":"Gainsboro","#F8F8FF":"Ghost White","#FFD700":"Gold","#DAA520":"Golden Rod","#808080":"Gray","#808080":"Grey","#008000":"Green","#ADFF2F":"Green Yellow","#F0FFF0":"Honey Dew","#FF69B4":"Hot Pink","#CD5C5C":"Indian Red","#4B0082":"Indigo","#FFFFF0":"Ivory","#F0E68C":"Khaki","#E6E6FA":"Lavender","#FFF0F5":"Lavender Blush","#7CFC00":"Lawn Green","#FFFACD":"Lemon Chiffon","#ADD8E6":"Light Blue","#F08080":"Light Coral","#E0FFFF":"Light Cyan","#FAFAD2":"Light Golden Rod Yellow","#D3D3D3":"Light Gray","#D3D3D3":"Light Grey","#90EE90":"Light Green","#FFB6C1":"Light Pink","#FFA07A":"Light Salmon","#20B2AA":"Light Sea Green","#87CEFA":"Light Sky Blue","#778899":"Light Slate Gray","#778899":"Light Slate Grey","#B0C4DE":"Light Steel Blue","#FFFFE0":"Light Yellow","#00FF00":"Lime","#32CD32":"Lime Green","#FAF0E6":"Linen","#FF00FF":"Magenta","#800000":"Maroon","#66CDAA":"Medium Aqua Marine","#0000CD":"Medium Blue","#BA55D3":"Medium Orchid","#9370D8":"Medium Purple","#3CB371":"Medium Sea Green","#7B68EE":"Medium Slate Blue","#00FA9A":"Medium Spring Green","#48D1CC":"Medium Turquoise","#C71585":"Medium Violet Red","#191970":"Midnight Blue","#F5FFFA":"Mint Cream","#FFE4E1":"Misty Rose","#FFE4B5":"Moccasin","#FFDEAD":"Navajo White","#000080":"Navy","#FDF5E6":"Old Lace","#808000":"Olive","#6B8E23":"Olive Drab","#FFA500":"Orange","#FF4500":"Orange Red","#DA70D6":"Orchid","#EEE8AA":"Pale Golden Rod","#98FB98":"Pale Green","#AFEEEE":"Pale Turquoise","#D87093":"Pale Violet Red","#FFEFD5":"Papaya Whip","#FFDAB9":"Peach Puff","#CD853F":"Peru","#FFC0CB":"Pink","#DDA0DD":"Plum","#B0E0E6":"Powder Blue","#800080":"Purple","#FF0000":"Red","#BC8F8F":"Rosy Brown","#4169E1":"Royal Blue","#8B4513":"Saddle Brown","#FA8072":"Salmon","#F4A460":"Sandy Brown","#2E8B57":"Sea Green","#FFF5EE":"Sea Shell","#A0522D":"Sienna","#C0C0C0":"Silver","#87CEEB":"Sky Blue","#6A5ACD":"Slate Blue","#708090":"Slate Gray","#708090":"Slate Grey","#FFFAFA":"Snow","#00FF7F":"Spring Green","#4682B4":"Steel Blue","#D2B48C":"Tan","#008080":"Teal","#D8BFD8":"Thistle","#FF6347":"Tomato","#40E0D0":"Turquoise","#EE82EE":"Violet","#F5DEB3":"Wheat","#FFFFFF":"White","#F5F5F5":"White Smoke","#FFFF00":"Yellow","#9ACD32":"Yellow Green"},namedLookup={};tinyMCEPopup.onInit.add(init);var ImageDialog={preInit:function(){var a;tinyMCEPopup.requireLangPack(),(a=tinyMCEPopup.getParam("external_image_list_url"))&&document.write('<script language="javascript" type="text/javascript" src="'+tinyMCEPopup.editor.documentBaseURI.toAbsolute(a)+'"></script>')},init:function(){var a=document.forms[0],b=tinyMCEPopup.editor;document.getElementById("srcbrowsercontainer").innerHTML=getBrowserHTML("srcbrowser","src","image","theme_advanced_image"),isVisible("srcbrowser")&&(document.getElementById("src").style.width="180px"),e=b.selection.getNode(),this.fillFileList("image_list",tinyMCEPopup.getParam("external_image_list","tinyMCEImageList")),e.nodeName=="IMG"&&(a.src.value=b.dom.getAttrib(e,"src"),a.alt.value=b.dom.getAttrib(e,"alt"),a.border.value=this.getAttrib(e,"border"),a.vspace.value=this.getAttrib(e,"vspace"),a.hspace.value=this.getAttrib(e,"hspace"),a.width.value=b.dom.getAttrib(e,"width"),a.height.value=b.dom.getAttrib(e,"height"),a.insert.value=b.getLang("update"),this.styleVal=b.dom.getAttrib(e,"style"),selectByValue(a,"image_list",a.src.value),selectByValue(a,"align",this.getAttrib(e,"align")),this.updateStyle())},fillFileList:function(a,b){var c=tinyMCEPopup.dom,d=c.get(a),e,f;b=typeof b=="function"?b():window[b],b&&b.length>0?(d.options[d.options.length]=new Option("",""),tinymce.each(b,function(a){d.options[d.options.length]=new Option(a[0],a[1])})):c.remove(c.getParent(a,"tr"))},update:function(){var a=document.forms[0],b=a.elements,c=tinyMCEPopup.editor,d={},e;tinyMCEPopup.restoreSelection();if(a.src.value===""){c.selection.getNode().nodeName=="IMG"&&(c.dom.remove(c.selection.getNode()),c.execCommand("mceRepaint")),tinyMCEPopup.close();return}c.settings.inline_styles?d.style=this.styleVal:d=tinymce.extend(d,{vspace:b.vspace.value,hspace:b.hspace.value,border:b.border.value,align:getSelectValue(a,"align")}),tinymce.extend(d,{src:a.src.value.replace(/ /g,"%20"),alt:a.alt.value,width:a.width.value,height:a.height.value}),e=c.selection.getNode(),e&&e.nodeName=="IMG"?(c.dom.setAttribs(e,d),tinyMCEPopup.editor.execCommand("mceRepaint"),tinyMCEPopup.editor.focus()):(tinymce.each(d,function(a,b){a===""&&delete d[b]}),c.execCommand("mceInsertContent",!1,tinyMCEPopup.editor.dom.createHTML("img",d),{skip_undo:1}),c.undoManager.add()),tinyMCEPopup.close()},updateStyle:function(){var a=tinyMCEPopup.dom,b,c,d=document.forms[0];tinyMCEPopup.editor.settings.inline_styles&&(b=tinyMCEPopup.dom.parseStyle(this.styleVal),c=getSelectValue(d,"align"),c?c=="left"||c=="right"?(b["float"]=c,delete b["vertical-align"]):(b["vertical-align"]=c,delete b["float"]):(delete b["float"],delete b["vertical-align"]),c=d.border.value,c||c=="0"?c=="0"?b.border="0":b.border=c+"px solid black":delete b.border,c=d.hspace.value,c?(delete b.margin,b["margin-left"]=c+"px",b["margin-right"]=c+"px"):(delete b["margin-left"],delete b["margin-right"]),c=d.vspace.value,c?(delete b.margin,b["margin-top"]=c+"px",b["margin-bottom"]=c+"px"):(delete b["margin-top"],delete b["margin-bottom"]),b=tinyMCEPopup.dom.parseStyle(a.serializeStyle(b),"img"),this.styleVal=a.serializeStyle(b,"img"))},getAttrib:function(a,b){var c=tinyMCEPopup.editor,d=c.dom,e,f;if(c.settings.inline_styles)switch(b){case"align":if(e=d.getStyle(a,"float"))return e;if(e=d.getStyle(a,"vertical-align"))return e;break;case"hspace":e=d.getStyle(a,"margin-left"),f=d.getStyle(a,"margin-right");if(e&&e==f)return parseInt(e.replace(/[^0-9]/g,""));break;case"vspace":e=d.getStyle(a,"margin-top"),f=d.getStyle(a,"margin-bottom");if(e&&e==f)return parseInt(e.replace(/[^0-9]/g,""));break;case"border":e=0,tinymce.each(["top","right","bottom","left"],function(b){b=d.getStyle(a,"border-"+b+"-width");if(!b||b!=e&&e!==0)return e=0,!1;b&&(e=b)});if(e)return parseInt(e.replace(/[^0-9]/g,""))}return(e=d.getAttrib(a,b))?e:""},resetImageData:function(){var a=document.forms[0];a.width.value=a.height.value=""},updateImageData:function(){var a=document.forms[0],b=ImageDialog;a.width.value==""&&(a.width.value=b.preloadImg.width),a.height.value==""&&(a.height.value=b.preloadImg.height)},getImageData:function(){var a=document.forms[0];this.preloadImg=new Image,this.preloadImg.onload=this.updateImageData,this.preloadImg.onerror=this.resetImageData,this.preloadImg.src=tinyMCEPopup.editor.documentBaseURI.toAbsolute(a.src.value)}};ImageDialog.preInit(),tinyMCEPopup.onInit.add(ImageDialog.init,ImageDialog),tinyMCEPopup.requireLangPack();var LinkDialog={preInit:function(){var a;(a=tinyMCEPopup.getParam("external_link_list_url"))&&document.write('<script language="javascript" type="text/javascript" src="'+tinyMCEPopup.editor.documentBaseURI.toAbsolute(a)+'"></script>')},init:function(){var a=document.forms[0],b=tinyMCEPopup.editor;document.getElementById("hrefbrowsercontainer").innerHTML=getBrowserHTML("hrefbrowser","href","file","theme_advanced_link"),isVisible("hrefbrowser")&&(document.getElementById("href").style.width="180px"),this.fillClassList("class_list"),this.fillFileList("link_list","tinyMCELinkList"),this.fillTargetList("target_list");if(e=b.dom.getParent(b.selection.getNode(),"A"))a.href.value=b.dom.getAttrib(e,"href"),a.linktitle.value=b.dom.getAttrib(e,"title"),a.insert.value=b.getLang("update"),selectByValue(a,"link_list",a.href.value),selectByValue(a,"target_list",b.dom.getAttrib(e,"target")),selectByValue(a,"class_list",b.dom.getAttrib(e,"class"))},update:function(){var a=document.forms[0],b=tinyMCEPopup.editor,c,d,e=a.href.value.replace(/ /g,"%20");tinyMCEPopup.restoreSelection(),c=b.dom.getParent(b.selection.getNode(),"A");if(!a.href.value&&c){d=b.selection.getBookmark(),b.dom.remove(c,1),b.selection.moveToBookmark(d),tinyMCEPopup.execCommand("mceEndUndoLevel"),tinyMCEPopup.close();return}c==null?(b.getDoc().execCommand("unlink",!1,null),tinyMCEPopup.execCommand("mceInsertLink",!1,"#mce_temp_url#",{skip_undo:1}),tinymce.each(b.dom.select("a"),function(d){b.dom.getAttrib(d,"href")=="#mce_temp_url#"&&(c=d,b.dom.setAttribs(c,{href:e,title:a.linktitle.value,target:a.target_list?getSelectValue(a,"target_list"):null,"class":a.class_list?getSelectValue(a,"class_list"):null}))})):b.dom.setAttribs(c,{href:e,title:a.linktitle.value,target:a.target_list?getSelectValue(a,"target_list"):null,"class":a.class_list?getSelectValue(a,"class_list"):null});if(c.childNodes.length!=1||c.firstChild.nodeName!="IMG")b.focus(),b.selection.select(c),b.selection.collapse(0),tinyMCEPopup.storeSelection();tinyMCEPopup.execCommand("mceEndUndoLevel"),tinyMCEPopup.close()},checkPrefix:function(a){a.value&&Validator.isEmail(a)&&!/^\s*mailto:/i.test(a.value)&&confirm(tinyMCEPopup.getLang("advanced_dlg.link_is_email"))&&(a.value="mailto:"+a.value),/^\s*www\./i.test(a.value)&&confirm(tinyMCEPopup.getLang("advanced_dlg.link_is_external"))&&(a.value="http://"+a.value)},fillFileList:function(a,b){var c=tinyMCEPopup.dom,d=c.get(a),e,f;b=window[b],b&&b.length>0?(d.options[d.options.length]=new Option("",""),tinymce.each(b,function(a){d.options[d.options.length]=new Option(a[0],a[1])})):c.remove(c.getParent(a,"tr"))},fillClassList:function(a){var b=tinyMCEPopup.dom,c=b.get(a),d,e;(d=tinyMCEPopup.getParam("theme_advanced_styles"))?(e=[],tinymce.each(d.split(";"),function(a){var b=a.split("=");e.push({title:b[0],"class":b[1]})})):e=tinyMCEPopup.editor.dom.getClasses(),e.length>0?(c.options[c.options.length]=new Option(tinyMCEPopup.getLang("not_set"),""),tinymce.each(e,function(a){c.options[c.options.length]=new Option(a.title||a["class"],a["class"])})):b.remove(b.getParent(a,"tr"))},fillTargetList:function(a){var b=tinyMCEPopup.dom,c=b.get(a),d;c.options[c.options.length]=new Option(tinyMCEPopup.getLang("not_set"),""),c.options[c.options.length]=new Option(tinyMCEPopup.getLang("advanced_dlg.link_target_same"),"_self"),c.options[c.options.length]=new Option(tinyMCEPopup.getLang("advanced_dlg.link_target_blank"),"_blank"),(d=tinyMCEPopup.getParam("theme_advanced_link_targets"))&&tinymce.each(d.split(","),function(a){a=a.split("="),c.options[c.options.length]=new Option(a[0],a[1])})}};LinkDialog.preInit(),tinyMCEPopup.onInit.add(LinkDialog.init,LinkDialog),tinyMCEPopup.requireLangPack(),tinyMCEPopup.onInit.add(onLoadInit),tinyMCE.addI18n("en.advanced",{underline_desc:"Underline (Ctrl+U)",italic_desc:"Italic (Ctrl+I)",bold_desc:"Bold (Ctrl+B)",dd:"Definition Description",dt:"Definition Term ",samp:"Code Sample",code:"Code",blockquote:"Block Quote",h6:"Heading 6",h5:"Heading 5",h4:"Heading 4",h3:"Heading 3",h2:"Heading 2",h1:"Heading 1",pre:"Preformatted",address:"Address",div:"DIV",paragraph:"Paragraph",block:"Format",fontdefault:"Font Family",font_size:"Font Size",style_select:"Styles",anchor_delta_height:"",anchor_delta_width:"",charmap_delta_height:"",charmap_delta_width:"",colorpicker_delta_height:"",colorpicker_delta_width:"",link_delta_height:"",link_delta_width:"",image_delta_height:"",image_delta_width:"",more_colors:"More Colors...",toolbar_focus:"Jump to tool buttons - Alt+Q, Jump to editor - Alt-Z, Jump to element path - Alt-X",newdocument:"Are you sure you want clear all contents?",path:"Path",clipboard_msg:"Copy/Cut/Paste is not available in Mozilla and Firefox.\nDo you want more information about this issue?",blockquote_desc:"Block Quote",help_desc:"Help",newdocument_desc:"New Document",image_props_desc:"Image Properties",paste_desc:"Paste (Ctrl+V)",copy_desc:"Copy (Ctrl+C)",cut_desc:"Cut (Ctrl+X)",anchor_desc:"Insert/Edit Anchor",visualaid_desc:"show/Hide Guidelines/Invisible Elements",charmap_desc:"Insert Special Character",backcolor_desc:"Select Background Color",forecolor_desc:"Select Text Color",custom1_desc:"Your Custom Description Here",removeformat_desc:"Remove Formatting",hr_desc:"Insert Horizontal Line",sup_desc:"Superscript",sub_desc:"Subscript",code_desc:"Edit HTML Source",cleanup_desc:"Cleanup Messy Code",image_desc:"Insert/Edit Image",unlink_desc:"Unlink",link_desc:"Insert/Edit Link",redo_desc:"Redo (Ctrl+Y)",undo_desc:"Undo (Ctrl+Z)",indent_desc:"Increase Indent",outdent_desc:"Decrease Indent",numlist_desc:"Insert/Remove Numbered List",bullist_desc:"Insert/Remove Bulleted List",justifyfull_desc:"Align Full",justifyright_desc:"Align Right",justifycenter_desc:"Align Center",justifyleft_desc:"Align Left",striketrough_desc:"Strikethrough",help_shortcut:"Press ALT-F10 for toolbar. Press ALT-0 for help",rich_text_area:"Rich Text Area",shortcuts_desc:"Accessability Help",toolbar:"Toolbar"}),tinyMCE.addI18n("en.advanced_dlg",{link_list:"Link List",link_is_external:"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",link_is_email:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",link_titlefield:"Title",link_target_blank:"Open Link in a New Window",link_target_same:"Open Link in the Same Window",link_target:"Target",link_url:"Link URL",link_title:"Insert/Edit Link",image_align_right:"Right",image_align_left:"Left",image_align_textbottom:"Text Bottom",image_align_texttop:"Text Top",image_align_bottom:"Bottom",image_align_middle:"Middle",image_align_top:"Top",image_align_baseline:"Baseline",image_align:"Alignment",image_hspace:"Horizontal Space",image_vspace:"Vertical Space",image_dimensions:"Dimensions",image_alt:"Image Description",image_list:"Image List",image_border:"Border",image_src:"Image URL",image_title:"Insert/Edit Image",charmap_title:"Select Special Character",charmap_usage:"Use left and right arrows to navigate.",colorpicker_name:"Name:",colorpicker_color:"Color:",colorpicker_named_title:"Named Colors",colorpicker_named_tab:"Named",colorpicker_palette_title:"Palette Colors",colorpicker_palette_tab:"Palette",colorpicker_picker_title:"Color Picker",colorpicker_picker_tab:"Picker",colorpicker_title:"Select a Color",code_wordwrap:"Word Wrap",code_title:"HTML Source Editor",anchor_name:"Anchor Name",anchor_title:"Insert/Edit Anchor",about_loaded:"Loaded Plugins",about_version:"Version",about_author:"Author",about_plugin:"Plugin",about_plugins:"Plugins",about_license:"License",about_help:"Help",about_general:"About",about_title:"About TinyMCE",anchor_invalid:"Please specify a valid anchor name.",accessibility_help:"Accessibility Help",accessibility_usage_title:"General Usage","":""}),function(){var a=tinymce.DOM;tinymce.ThemeManager.requireLangPack("simple"),tinymce.create("tinymce.themes.SimpleTheme",{init:function(b,c){var d=this,e=["Bold","Italic","Underline","Strikethrough","InsertUnorderedList","InsertOrderedList"],f=b.settings;d.editor=b,b.contentCSS.push(c+"/skins/"+f.skin+"/content.css"),b.onInit.add(function(){b.onNodeChange.add(function(a,b){tinymce.each(e,function(c){b.get(c.toLowerCase()).setActive(a.queryCommandState(c))})})}),a.loadCSS((f.editor_css?b.documentBaseURI.toAbsolute(f.editor_css):"")||c+"/skins/"+f.skin+"/ui.css")},renderUI:function(b){var c=this,d=b.targetNode,e,f,g=c.editor,h=g.controlManager,i;return d=a.insertAfter(a.create("span",{id:g.id+"_container","class":"mceEditor "+g.settings.skin+"SimpleSkin"}),d),d=i=a.add(d,"table",{cellPadding:0,cellSpacing:0,"class":"mceLayout"}),d=f=a.add(d,"tbody"),d=a.add(f,"tr"),d=e=a.add(a.add(d,"td"),"div",{"class":"mceIframeContainer"}),d=a.add(a.add(f,"tr",{"class":"last"}),"td",{"class":"mceToolbar mceLast",align:"center"}),f=c.toolbar=h.createToolbar("tools1"),f.add(h.createButton("bold",{title:"simple.bold_desc",cmd:"Bold"})),f.add(h.createButton("italic",{title:"simple.italic_desc",cmd:"Italic"
})),f.add(h.createButton("underline",{title:"simple.underline_desc",cmd:"Underline"})),f.add(h.createButton("strikethrough",{title:"simple.striketrough_desc",cmd:"Strikethrough"})),f.add(h.createSeparator()),f.add(h.createButton("undo",{title:"simple.undo_desc",cmd:"Undo"})),f.add(h.createButton("redo",{title:"simple.redo_desc",cmd:"Redo"})),f.add(h.createSeparator()),f.add(h.createButton("cleanup",{title:"simple.cleanup_desc",cmd:"mceCleanup"})),f.add(h.createSeparator()),f.add(h.createButton("insertunorderedlist",{title:"simple.bullist_desc",cmd:"InsertUnorderedList"})),f.add(h.createButton("insertorderedlist",{title:"simple.numlist_desc",cmd:"InsertOrderedList"})),f.renderTo(d),{iframeContainer:e,editorContainer:g.id+"_container",sizeContainer:i,deltaHeight:-20}},getInfo:function(){return{longname:"Simple theme",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.ThemeManager.add("simple",tinymce.themes.SimpleTheme)}(),function(){var a=tinymce.DOM;tinymce.ThemeManager.requireLangPack("simple"),tinymce.create("tinymce.themes.SimpleTheme",{init:function(b,c){var d=this,e=["Bold","Italic","Underline","Strikethrough","InsertUnorderedList","InsertOrderedList"],f=b.settings;d.editor=b,b.contentCSS.push(c+"/skins/"+f.skin+"/content.css"),b.onInit.add(function(){b.onNodeChange.add(function(a,b){tinymce.each(e,function(c){b.get(c.toLowerCase()).setActive(a.queryCommandState(c))})})}),a.loadCSS((f.editor_css?b.documentBaseURI.toAbsolute(f.editor_css):"")||c+"/skins/"+f.skin+"/ui.css")},renderUI:function(b){var c=this,d=b.targetNode,e,f,g=c.editor,h=g.controlManager,i;return d=a.insertAfter(a.create("span",{id:g.id+"_container","class":"mceEditor "+g.settings.skin+"SimpleSkin"}),d),d=i=a.add(d,"table",{cellPadding:0,cellSpacing:0,"class":"mceLayout"}),d=f=a.add(d,"tbody"),d=a.add(f,"tr"),d=e=a.add(a.add(d,"td"),"div",{"class":"mceIframeContainer"}),d=a.add(a.add(f,"tr",{"class":"last"}),"td",{"class":"mceToolbar mceLast",align:"center"}),f=c.toolbar=h.createToolbar("tools1"),f.add(h.createButton("bold",{title:"simple.bold_desc",cmd:"Bold"})),f.add(h.createButton("italic",{title:"simple.italic_desc",cmd:"Italic"})),f.add(h.createButton("underline",{title:"simple.underline_desc",cmd:"Underline"})),f.add(h.createButton("strikethrough",{title:"simple.striketrough_desc",cmd:"Strikethrough"})),f.add(h.createSeparator()),f.add(h.createButton("undo",{title:"simple.undo_desc",cmd:"Undo"})),f.add(h.createButton("redo",{title:"simple.redo_desc",cmd:"Redo"})),f.add(h.createSeparator()),f.add(h.createButton("cleanup",{title:"simple.cleanup_desc",cmd:"mceCleanup"})),f.add(h.createSeparator()),f.add(h.createButton("insertunorderedlist",{title:"simple.bullist_desc",cmd:"InsertUnorderedList"})),f.add(h.createButton("insertorderedlist",{title:"simple.numlist_desc",cmd:"InsertOrderedList"})),f.renderTo(d),{iframeContainer:e,editorContainer:g.id+"_container",sizeContainer:i,deltaHeight:-20}},getInfo:function(){return{longname:"Simple theme",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.ThemeManager.add("simple",tinymce.themes.SimpleTheme)}(),tinyMCE.addI18n("en.simple",{cleanup_desc:"Cleanup Messy Code",redo_desc:"Redo (Ctrl+Y)",undo_desc:"Undo (Ctrl+Z)",numlist_desc:"Insert/Remove Numbered List",bullist_desc:"Insert/Remove Bulleted List",striketrough_desc:"Strikethrough",underline_desc:"Underline (Ctrl+U)",italic_desc:"Italic (Ctrl+I)",bold_desc:"Bold (Ctrl+B)"}),function(a){var b=/^\s*|\s*$/g,c,d="B".replace(/A(.)|B/,"$1")==="$1",e={majorVersion:"3",minorVersion:"4.7",releaseDate:"2011-11-03",_init:function(){function b(a){return a.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(a.src)?(/_(src|dev)\.js/g.test(a.src)&&(c.suffix="_src"),(k=a.src.indexOf("?"))!=-1&&(c.query=a.src.substring(k+1)),c.baseURL=a.src.substring(0,a.src.lastIndexOf("/")),j&&c.baseURL.indexOf("://")==-1&&c.baseURL.indexOf("/")!==0&&(c.baseURL=j+c.baseURL),c.baseURL):null}var c=this,d=document,e=navigator,f=e.userAgent,g,h,i,j,k,l;c.isOpera=a.opera&&opera.buildNumber,c.isWebKit=/WebKit/.test(f),c.isIE=!c.isWebKit&&!c.isOpera&&/MSIE/gi.test(f)&&/Explorer/gi.test(e.appName),c.isIE6=c.isIE&&/MSIE [56]/.test(f),c.isIE7=c.isIE&&/MSIE [7]/.test(f),c.isIE8=c.isIE&&/MSIE [8]/.test(f),c.isIE9=c.isIE&&/MSIE [9]/.test(f),c.isGecko=!c.isWebKit&&/Gecko/.test(f),c.isMac=f.indexOf("Mac")!=-1,c.isAir=/adobeair/i.test(f),c.isIDevice=/(iPad|iPhone)/.test(f),c.isIOS5=c.isIDevice&&f.match(/AppleWebKit\/(\d*)/)[1]>=534;if(a.tinyMCEPreInit){c.suffix=tinyMCEPreInit.suffix,c.baseURL=tinyMCEPreInit.base,c.query=tinyMCEPreInit.query;return}c.suffix="",h=d.getElementsByTagName("base");for(g=0;g<h.length;g++)if(l=h[g].href)/^https?:\/\/[^\/]+$/.test(l)&&(l+="/"),j=l?l.match(/.*\//)[0]:"";h=d.getElementsByTagName("script");for(g=0;g<h.length;g++)if(b(h[g]))return;i=d.getElementsByTagName("head")[0];if(i){h=i.getElementsByTagName("script");for(g=0;g<h.length;g++)if(b(h[g]))return}return},is:function(a,b){return b?b=="array"&&a.hasOwnProperty&&a instanceof Array?!0:typeof a==b:a!==c},makeMap:function(a,b,c){var d;a=a||[],b=b||",",typeof a=="string"&&(a=a.split(b)),c=c||{},d=a.length;while(d--)c[a[d]]={};return c},each:function(a,b,d){var e,f;if(!a)return 0;d=d||a;if(a.length!==c){for(e=0,f=a.length;e<f;e++)if(b.call(d,a[e],e,a)===!1)return 0}else for(e in a)if(a.hasOwnProperty(e)&&b.call(d,a[e],e,a)===!1)return 0;return 1},map:function(a,b){var c=[];return e.each(a,function(a){c.push(b(a))}),c},grep:function(a,b){var c=[];return e.each(a,function(a){(!b||b(a))&&c.push(a)}),c},inArray:function(a,b){var c,d;if(a)for(c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},extend:function(a,b){var d,f,g=arguments;for(d=1,f=g.length;d<f;d++)b=g[d],e.each(b,function(b,d){b!==c&&(a[d]=b)});return a},trim:function(a){return(a?""+a:"").replace(b,"")},create:function(a,b,c){var d=this,e,f,g,h,i,j=0;a=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(a),g=a[3].match(/(^|\.)(\w+)$/i)[2],f=d.createNS(a[3].replace(/\.\w+$/,""),c);if(f[g])return;if(a[2]=="static"){f[g]=b,this.onCreate&&this.onCreate(a[2],a[3],f[g]);return}b[g]||(b[g]=function(){},j=1),f[g]=b[g],d.extend(f[g].prototype,b),a[5]&&(e=d.resolve(a[5]).prototype,h=a[5].match(/\.(\w+)$/i)[1],i=f[g],j?f[g]=function(){return e[h].apply(this,arguments)}:f[g]=function(){return this.parent=e[h],i.apply(this,arguments)},f[g].prototype[g]=f[g],d.each(e,function(a,b){f[g].prototype[b]=e[b]}),d.each(b,function(a,b){e[b]?f[g].prototype[b]=function(){return this.parent=e[b],a.apply(this,arguments)}:b!=g&&(f[g].prototype[b]=a)})),d.each(b["static"],function(a,b){f[g][b]=a}),this.onCreate&&this.onCreate(a[2],a[3],f[g].prototype)},walk:function(a,b,c,d){d=d||this,a&&(c&&(a=a[c]),e.each(a,function(a,f){if(b.call(d,a,f,c)===!1)return!1;e.walk(a,b,c,d)}))},createNS:function(b,c){var d,e;c=c||a,b=b.split(".");for(d=0;d<b.length;d++)e=b[d],c[e]||(c[e]={}),c=c[e];return c},resolve:function(b,c){var d,e;c=c||a,b=b.split(".");for(d=0,e=b.length;d<e;d++){c=c[b[d]];if(!c)break}return c},addUnload:function(b,c){var d=this;b={func:b,scope:c||this};if(!d.unloads){function e(){var b=d.unloads,c,g;if(b){for(g in b)c=b[g],c&&c.func&&c.func.call(c.scope,1);a.detachEvent?(a.detachEvent("onbeforeunload",f),a.detachEvent("onunload",e)):a.removeEventListener&&a.removeEventListener("unload",e,!1),d.unloads=c=b=w=e=0,a.CollectGarbage&&CollectGarbage()}}function f(){var b=document;if(b.readyState=="interactive"){function c(){b.detachEvent("onstop",c),e&&e(),b=0}b&&b.attachEvent("onstop",c),a.setTimeout(function(){b&&b.detachEvent("onstop",c)},0)}}a.attachEvent?(a.attachEvent("onunload",e),a.attachEvent("onbeforeunload",f)):a.addEventListener&&a.addEventListener("unload",e,!1),d.unloads=[b]}else d.unloads.push(b);return b},removeUnload:function(a){var b=this.unloads,c=null;return e.each(b,function(d,e){if(d&&d.func==a)return b.splice(e,1),c=a,!1}),c},explode:function(a,b){return a?e.map(a.split(b||","),e.trim):a},_addVer:function(a){var b;return this.query?(b=(a.indexOf("?")==-1?"?":"&")+this.query,a.indexOf("#")==-1?a+b:a.replace("#",b+"#")):a},_replace:function(a,b,e){return d?e.replace(a,function(){var a=b,d=arguments,e;for(e=0;e<d.length-2;e++)d[e]===c?a=a.replace(new RegExp("\\$"+e,"g"),""):a=a.replace(new RegExp("\\$"+e,"g"),d[e]);return a}):e.replace(a,b)}};e._init(),a.tinymce=a.tinyMCE=e}(window),tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(a){this.scope=a||this,this.listeners=[]},add:function(a,b){return this.listeners.push({cb:a,scope:b||this.scope}),a},addToTop:function(a,b){return this.listeners.unshift({cb:a,scope:b||this.scope}),a},remove:function(a){var b=this.listeners,c=null;return tinymce.each(b,function(d,e){if(a==d.cb)return c=a,b.splice(e,1),!1}),c},dispatch:function(){var a,b=arguments,c,d=this.listeners,e;for(c=0;c<d.length;c++){e=d[c],a=e.cb.apply(e.scope,b);if(a===!1)break}return a}}),function(){var a=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(b,c){var d=this,e,f,g,h;b=tinymce.trim(b),c=d.settings=c||{};if(/^([\w\-]+):([^\/]{2})/i.test(b)||/^\s*#/.test(b)){d.source=b;return}b.indexOf("/")===0&&b.indexOf("//")!==0&&(b=(c.base_uri?c.base_uri.protocol||"http":"http")+"://mce_host"+b),/^[\w-]*:?\/\//.test(b)||(h=c.base_uri?c.base_uri.path:(new tinymce.util.URI(location.href)).directory,b=(c.base_uri&&c.base_uri.protocol||"http")+"://mce_host"+d.toAbsPath(h,b)),b=b.replace(/@@/g,"(mce_at)"),b=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(b),a(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(a,c){var e=b[c];e&&(e=e.replace(/\(mce_at\)/g,"@@")),d[a]=e});if(g=c.base_uri){d.protocol||(d.protocol=g.protocol),d.userInfo||(d.userInfo=g.userInfo),!d.port&&d.host=="mce_host"&&(d.port=g.port);if(!d.host||d.host=="mce_host")d.host=g.host;d.source=""}},setPath:function(a){var b=this;a=/^(.*?)\/?(\w+)?$/.exec(a),b.path=a[0],b.directory=a[1],b.file=a[2],b.source="",b.getURI()},toRelative:function(a){var b=this,c;return a==="./"?a:(a=new tinymce.util.URI(a,{base_uri:b}),a.host!="mce_host"&&b.host!=a.host&&a.host||b.port!=a.port||b.protocol!=a.protocol?a.getURI():(c=b.toRelPath(b.path,a.path),a.query&&(c+="?"+a.query),a.anchor&&(c+="#"+a.anchor),c))},toAbsolute:function(a,b){var a=new tinymce.util.URI(a,{base_uri:this});return a.getURI(this.host==a.host&&this.protocol==a.protocol?b:0)},toRelPath:function(a,b){var c,d=0,e="",f,g;a=a.substring(0,a.lastIndexOf("/")),a=a.split("/"),c=b.split("/");if(a.length>=c.length)for(f=0,g=a.length;f<g;f++)if(f>=c.length||a[f]!=c[f]){d=f+1;break}if(a.length<c.length)for(f=0,g=c.length;f<g;f++)if(f>=a.length||a[f]!=c[f]){d=f+1;break}if(d==1)return b;for(f=0,g=a.length-(d-1);f<g;f++)e+="../";for(f=d-1,g=c.length;f<g;f++)f!=d-1?e+="/"+c[f]:e+=c[f];return e},toAbsPath:function(b,c){var d,e=0,f=[],g,h;g=/\/$/.test(c)?"/":"",b=b.split("/"),c=c.split("/"),a(b,function(a){a&&f.push(a)}),b=f;for(d=c.length-1,f=[];d>=0;d--){if(c[d].length==0||c[d]==".")continue;if(c[d]==".."){e++;continue}if(e>0){e--;continue}f.push(c[d])}return d=b.length-e,d<=0?h=f.reverse().join("/"):h=b.slice(0,d).join("/")+"/"+f.reverse().join("/"),h.indexOf("/")!==0&&(h="/"+h),g&&h.lastIndexOf("/")!==h.length-1&&(h+=g),h},getURI:function(a){var b,c=this;if(!c.source||a)b="",a||(c.protocol&&(b+=c.protocol+"://"),c.userInfo&&(b+=c.userInfo+"@"),c.host&&(b+=c.host),c.port&&(b+=":"+c.port)),c.path&&(b+=c.path),c.query&&(b+="?"+c.query),c.anchor&&(b+="#"+c.anchor),c.source=b;return c.source}})}(),function(){var a=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(b){var c=this.get(b),d;return c&&a(c.split("&"),function(a){a=a.split("="),d=d||{},d[unescape(a[0])]=unescape(a[1])}),d},setHash:function(b,c,d,e,f,g){var h="";a(c,function(a,b){h+=(h?"&":"")+escape(b)+"="+escape(a)}),this.set(b,h,d,e,f,g)},get:function(a){var b=document.cookie,c,d=a+"=",e;if(!b)return;e=b.indexOf("; "+d);if(e==-1){e=b.indexOf(d);if(e!=0)return null}else e+=2;return c=b.indexOf(";",e),c==-1&&(c=b.length),unescape(b.substring(e+d.length,c))},set:function(a,b,c,d,e,f){document.cookie=a+"="+escape(b)+(c?"; expires="+c.toGMTString():"")+(d?"; path="+escape(d):"")+(e?"; domain="+e:"")+(f?"; secure":"")},remove:function(a,b){var c=new Date;c.setTime(c.getTime()-1e3),this.set(a,"",c,b,c)}})}(),function(){function serialize(a,b){var c,d,e;b=b||'"';if(a==null)return"null";e=typeof a;if(e=="string")return d="\bb\tt\nn\ff\rr\"\"''\\\\",b+a.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,e){return b==='"'&&a==="'"?a:(c=d.indexOf(e),c+1?"\\"+d.charAt(c+1):(a=e.charCodeAt().toString(16),"\\u"+"0000".substring(a.length)+a))})+b;if(e=="object"){if(a.hasOwnProperty&&a instanceof Array){for(c=0,d="[";c<a.length;c++)d+=(c>0?",":"")+serialize(a[c],b);return d+"]"}d="{";for(c in a)a.hasOwnProperty(c)&&(d+=typeof a[c]!="function"?(d.length>1?","+b:b)+c+b+":"+serialize(a[c],b):"");return d+"}"}return""+a}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}}(),tinymce.create("static tinymce.util.XHR",{send:function(a){function b(a){c=0;try{c=new ActiveXObject(a)}catch(b){}return c}var c,d,e=window,f=0;a.scope=a.scope||this,a.success_scope=a.success_scope||a.scope,a.error_scope=a.error_scope||a.scope,a.async=a.async===!1?!1:!0,a.data=a.data||"",c=e.XMLHttpRequest?new XMLHttpRequest:b("Microsoft.XMLHTTP")||b("Msxml2.XMLHTTP");if(c){c.overrideMimeType&&c.overrideMimeType(a.content_type),c.open(a.type||(a.data?"POST":"GET"),a.url,a.async),a.content_type&&c.setRequestHeader("Content-Type",a.content_type),c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.send(a.data);function g(){!a.async||c.readyState==4||f++>1e4?(a.success&&f<1e4&&c.status==200?a.success.call(a.success_scope,""+c.responseText,c,a):a.error&&a.error.call(a.error_scope,f>1e4?"TIMED_OUT":"GENERAL",c,a),c=null):e.setTimeout(g,10)}if(!a.async)return g();d=e.setTimeout(g,10)}}}),function(){var a=tinymce.extend,b=tinymce.util.JSON,c=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(b){this.settings=a({},b),this.count=0},send:function(d){var e=d.error,f=d.success;d=a(this.settings,d),d.success=function(a,c){a=b.parse(a),typeof a=="undefined"&&(a={error:"JSON Parse error."}),a.error?e.call(d.error_scope||d.scope,a.error,c):f.call(d.success_scope||d.scope,a.result)},d.error=function(a,b){e&&e.call(d.error_scope||d.scope,a,b)},d.data=b.serialize({id:d.id||"c"+this.count++,method:d.method,params:d.params}),d.content_type="application/json",c.send(d)},"static":{sendRPC:function(a){return(new tinymce.util.JSONRequest).send(a)}}})}(),function(a){a.VK={DELETE:46,BACKSPACE:8,ENTER:13,TAB:9,SPACEBAR:32,UP:38,DOWN:40}}(tinymce),function(a){function b(b){var c=b.dom,d=b.selection;b.onKeyDown.add(function(b,e){var f,g,h,i,j;j=e.keyCode==l;if(j||e.keyCode==k){e.preventDefault(),f=d.getRng(),g=c.getParent(f.startContainer,c.isBlock),j&&(g=c.getNext(g,c.isBlock));if(g){h=g.firstChild;while(h&&h.nodeType==3&&h.nodeValue.length==0)h=h.nextSibling;h&&h.nodeName==="SPAN"&&(i=h.cloneNode(!1))}b.getDoc().execCommand(j?"ForwardDelete":"Delete",!1,null),g=c.getParent(f.startContainer,c.isBlock),a.each(c.select("span.Apple-style-span,font.Apple-style-span",g),function(a){var b=d.getBookmark();i?c.replace(i.cloneNode(!1),a,!0):c.remove(a,!0),d.moveToBookmark(b)})}})}function c(a){a.onKeyUp.add(function(a,b){var c=b.keyCode;if(c==l||c==k)if(a.dom.isEmpty(a.getBody())){a.setContent("",{format:"raw"}),a.nodeChanged();return}})}function d(a){a.dom.bind(a.getDoc(),"focusin",function(){a.selection.setRng(a.selection.getRng())})}function e(b){b.onKeyDown.add(function(b,c){if(c.keyCode===k&&b.selection.isCollapsed()&&b.selection.getRng(!0).startOffset===0){var d=b.selection.getNode(),e=d.previousSibling;e&&e.nodeName&&e.nodeName.toLowerCase()==="hr"&&(b.dom.remove(e),a.dom.Event.cancel(c))}})}function f(a){Range.prototype.getClientRects||a.onMouseDown.add(function(a,b){if(b.target.nodeName==="HTML"){var c=a.getBody();c.blur(),setTimeout(function(){c.focus()},0)}})}function g(a){a.onClick.add(function(a,b){b=b.target,/^(IMG|HR)$/.test(b.nodeName)&&a.selection.getSel().setBaseAndExtent(b,0,b,1),b.nodeName=="A"&&a.dom.hasClass(b,"mceItemAnchor")&&a.selection.select(b),a.nodeChanged()})}function h(b){var c,d;b.dom.bind(b.getDoc(),"selectionchange",function(){d&&(clearTimeout(d),d=0),d=window.setTimeout(function(){var d=b.selection.getRng();if(!c||!a.dom.RangeUtils.compareRanges(d,c))b.nodeChanged(),c=d},50)})}function i(a){document.body.setAttribute("role","application")}var j=a.VK,k=j.BACKSPACE,l=j.DELETE;a.create("tinymce.util.Quirks",{Quirks:function(j){a.isWebKit&&(b(j),c(j),d(j),g(j),a.isIDevice&&h(j)),a.isIE&&(e(j),c(j),i(j)),a.isGecko&&(e(j),f(j))}})}(tinymce),function(a){function b(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.textContent||b.innerText||a}function c(a,b){var c,d,f,g={};if(a){a=a.split(","),b=b||10;for(c=0;c<a.length;c+=2)d=String.fromCharCode(parseInt(a[c],b)),e[d]||(f="&"+a[c+1]+";",g[d]=f,g[f]=d);return g}}var d,e,f,g=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,h=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,i=/[<>&\"\']/g,j=/&(#x|#)?([\w]+);/g,k={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};e={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},f={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},d=c("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),a.html=a.html||{},a.html.Entities={encodeRaw:function(a,b){return a.replace(b?g:h,function(a){return e[a]||a})},encodeAllRaw:function(a){return(""+a).replace(i,function(a){return e[a]||a})},encodeNumeric:function(a,b){return a.replace(b?g:h,function(a){return a.length>1?"&#"+((a.charCodeAt(0)-55296)*1024+(a.charCodeAt(1)-56320)+65536)+";":e[a]||"&#"+a.charCodeAt(0)+";"})},encodeNamed:function(a,b,c){return c=c||d,a.replace(b?g:h,function(a){return e[a]||c[a]||a})},getEncodeFunc:function(b,f){function i(a,b){return a.replace(b?g:h,function(a){return e[a]||f[a]||"&#"+a.charCodeAt(0)+";"||a})}function j(a,b){return k.encodeNamed(a,b,f)}var k=a.html.Entities;return f=c(f)||d,b=a.makeMap(b.replace(/\+/g,",")),b.named&&b.numeric?i:b.named?f?j:k.encodeNamed:b.numeric?k.encodeNumeric:k.encodeRaw},decode:function(a){return a.replace(j,function(a,c,e){return c?(e=parseInt(e,c.length===2?16:10),e>65535?(e-=65536,String.fromCharCode(55296+(e>>10),56320+(e&1023))):k[e]||String.fromCharCode(e)):f[a]||d[a]||b(a)})}}}(tinymce),tinymce.html.Styles=function(a,b){function c(a,b,c,d){function e(a){return a=parseInt(a).toString(16),a.length>1?a:"0"+a}return"#"+e(b)+e(c)+e(d)}var d=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,e=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,f=/\s*([^:]+):\s*([^;]+);?/g,g=/\s+$/,h=/rgb/,i,j,k={},l;a=a||{},l="\\\" \\' \\; \\: ; : ﻿".split(" ");for(j=0;j<l.length;j++)k[l[j]]="﻿"+j,k["﻿"+j]=l[j];return{toHex:function(a){return a.replace(d,c)},parse:function(b){function h(a,b){var c,d,e,f;c=n[a+"-top"+b];if(!c)return;d=n[a+"-right"+b];if(c!=d)return;e=n[a+"-bottom"+b];if(d!=e)return;f=n[a+"-left"+b];if(e!=f)return;n[a+b]=f,delete n[a+"-top"+b],delete n[a+"-right"+b],delete n[a+"-bottom"+b],delete n[a+"-left"+b]}function i(a){var b=n[a],c;if(!b||b.indexOf(" ")<0)return;b=b.split(" "),c=b.length;while(c--)if(b[c]!==b[0])return!1;return n[a]=b[0],!0}function j(a,b,c,d){if(!i(b))return;if(!i(c))return;if(!i(d))return;n[a]=n[b]+" "+n[c]+" "+n[d],delete n[b],delete n[c],delete n[d]}function l(a){return r=!0,k[a]}function m(a,b){return r&&(a=a.replace(/\uFEFF[0-9]/g,function(a){return k[a]})),b||(a=a.replace(/\\([\'\";:])/g,"$1")),a}var n={},o,p,q,r,s=a.url_converter,t=a.url_converter_scope||this;if(b){b=b.replace(/\\[\"\';:\uFEFF]/g,l).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(a){return a.replace(/[;:]/g,l)});while(o=f.exec(b)){p=o[1].replace(g,"").toLowerCase(),q=o[2].replace(g,"");if(p&&q.length>0){if(p==="font-weight"&&q==="700")q="bold";else if(p==="color"||p==="background-color")q=q.toLowerCase();q=q.replace(d,c),q=q.replace(e,function(a,b,c,d,e,f){return e=e||f,e?(e=m(e),"'"+e.replace(/\'/g,"\\'")+"'"):(b=m(b||c||d),s&&(b=s.call(t,b,"style")),"url('"+b.replace(/\'/g,"\\'")+"')")}),n[p]=r?m(q,!0):q}f.lastIndex=o.index+o[0].length}h("border",""),h("border","-width"),h("border","-color"),h("border","-style"),h("padding",""),h("margin",""),j("border","border-width","border-style","border-color"),n.border==="medium none"&&delete n.border}return n},serialize:function(a,c){function d(c){var d,f,g,h;d=b.styles[c];if(d)for(f=0,g=d.length;f<g;f++)c=d[f],h=a[c],h!==i&&h.length>0&&(e+=(e.length>0?" ":"")+c+": "+h+";")}var e="",f,g;if(c&&b&&b.styles)d("*"),d(c);else for(f in a)g=a[f],g!==i&&g.length>0&&(e+=(e.length>0?" ":"")+f+": "+g+";");return e}}},function(a){function b(a,b){return a.split(b||",")}function c(a,c){function d(b){return b.replace(/[A-Z]+/g,function(b){return d(a[b])})}var e,f={};for(e in a)a.hasOwnProperty(e)&&(a[e]=d(a[e]));return d(c).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(a,c,d,e){d=b(d,"|"),f[c]={attributes:l(d),attributesOrder:d,children:l(e,"|",{"#comment":{}})}}),f}var d={},e,f,g,h,i={},j,k,l=a.makeMap,m=a.each;f="h1,h2,h3,h4,h5,h6,hr,p,div,address,pre,form,table,tbody,thead,tfoot,th,tr,td,li,ol,ul,caption,blockquote,center,dl,dt,dd,dir,fieldset,noscript,menu,isindex,samp,header,footer,article,section,hgroup",f=l(f,",",l(f.toUpperCase())),d=c({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]"),e=l("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected,autoplay,loop,controls"),g=l("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,source"),h=a.extend(l("td,th,iframe,video,audio,object"),g),j=l("pre,script,style,textarea"),k=l("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),a.html.Schema=function(c){function n(a){return new RegExp("^"+a.replace(/([?+*])/g,".$1")+"$")}function o(c){var d,e,f,g,h,i,j,k,m,o,p,q,r,s,t,v,x,y,z,A,B,C,D=/^([#+-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,E=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,F=/[*?+]/;if(c){c=b(c),u["@"]&&(x=u["@"].attributes,y=u["@"].attributesOrder);for(d=0,e=c.length;d<e;d++){i=D.exec(c[d]);if(i){t=i[1],o=i[2],v=i[3],m=i[4],r={},s=[],j={attributes:r,attributesOrder:s},t==="#"&&(j.paddEmpty=!0),t==="-"&&(j.removeEmpty=!0);if(x){for(A in x)r[A]=x[A];s.push.apply(s,y)}if(m){m=b(m,"|");for(f=0,g=m.length;f<g;f++){i=E.exec(m[f]);if(i){k={},q=i[1],p=i[2].replace(/::/g,":"),t=i[3],C=i[4],q==="!"&&(j.attributesRequired=j.attributesRequired||[],j.attributesRequired.push(p),k.required=!0);if(q==="-"){delete r[p],s.splice(a.inArray(s,p),1);continue}t&&(t==="="&&(j.attributesDefault=j.attributesDefault||[],j.attributesDefault.push({name:p,value:C}),k.defaultValue=C),t===":"&&(j.attributesForced=j.attributesForced||[],j.attributesForced.push({name:p,value:C}),k.forcedValue=C),t==="<"&&(k.validValues=l(C,"?"))),F.test(p)?(j.attributePatterns=j.attributePatterns||[],k.pattern=n(p),j.attributePatterns.push(k)):(r[p]||s.push(p),r[p]=k)}}}!x&&o=="@"&&(x=r,y=s),v&&(j.outputName=o,u[v]=j),F.test(o)?(j.pattern=n(o),w.push(j)):u[o]=j}}}}function p(a){u={},w=[],o(a),m(d,function(a,b){v[b]=a.children})}function q(a){var c=/^(~)?(.+)$/;a&&m(b(a),function(a){var b=c.exec(a),d=b[1]==="~",e=d?"span":"div",g=b[2];v[g]=v[e],i[g]=e,d||(f[g]={}),m(v,function(a,b){a[e]&&(a[g]=a[e])})})}function r(a){var c=/^([+\-]?)(\w+)\[([^\]]+)\]$/;a&&m(b(a),function(a){var d=c.exec(a),e,f;d&&(f=d[1],f?e=v[d[2]]:e=v[d[2]]={"#comment":{}},e=v[d[2]],m(b(d[3],"|"),function(a){f==="-"?delete e[a]:e[a]={}}))})}function s(a){var b=u[a],c;if(b)return b;c=w.length;while(c--){b=w[c];if(b.pattern.test(a))return b}}var t=this,u={},v={},w=[],x,y;c=c||{},c.verify_html===!1&&(c.valid_elements="*[*]"),c.valid_styles&&(x={},m(c.valid_styles,function(b,c){x[c]=a.explode(b)})),y=c.whitespace_elements?l(c.whitespace_elements):j,c.valid_elements?p(c.valid_elements):(m(d,function(a,b){u[b]={attributes:a.attributes,attributesOrder:a.attributesOrder},v[b]=a.children}),m(b("strong/b,em/i"),function(a){a=b(a,"/"),u[a[1]].outputName=a[0]}),u.img.attributesDefault=[{name:"alt",value:""}],m(b("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr"),function(a){u[a].removeEmpty=!0}),m(b("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(a){u[a].paddEmpty=!0})),q(c.custom_elements),r(c.valid_children),o(c.extended_valid_elements),r("+ol[ul|ol],+ul[ul|ol]"),s("span")||o("span[!data-mce-type|*]"),c.invalid_elements&&a.each(a.explode(c.invalid_elements),function(a){u[a]&&delete u[a]}),t.children=v,t.styles=x,t.getBoolAttrs=function(){return e},t.getBlockElements=function(){return f},t.getShortEndedElements=function(){return g},t.getSelfClosingElements=function(){return k},t.getNonEmptyElements=function(){return h},t.getWhiteSpaceElements=function(){return y},t.isValidChild=function(a,b){var c=v[a];return!!c&&!!c[b]},t.getElementRule=s,t.getCustomElements=function(){return i},t.addValidElements=o,t.setValidElements=p,t.addCustomElements=q,t.addValidChildren=r},a.html.Schema.boolAttrMap=e,a.html.Schema.blockElementsMap=f}(tinymce),function(a){a.html.SaxParser=function(b,c){var d=this,e=function(){};b=b||{},d.schema=c=c||new a.html.Schema,b.fix_self_closing!==!1&&(b.fix_self_closing=!0),a.each("comment cdata text start end pi doctype".split(" "),function(a){a&&(d[a]=b[a]||e)}),d.parse=function(d){function e(a){var b,c;b=k.length;while(b--)if(k[b].name===a)break;if(b>=0){for(c=k.length-1;c>=b;c--)a=k[c],a.valid&&f.end(a.name);k.length=b}}var f=this,g,h=0,i,j,k=[],l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K=0,L=a.html.Entities.decode,M,N;G=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([^\\s\\/<>]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/)>))","g"),H=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g,I={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi},r=c.getShortEndedElements(),F=c.getSelfClosingElements(),s=c.getBoolAttrs(),u=b.validate,q=b.remove_internals,M=b.fix_self_closing,N=a.isIE,z=/^:/;while(g=G.exec(d)){h<g.index&&f.text(L(d.substr(h,g.index-h)));if(i=g[6])i=i.toLowerCase(),N&&z.test(i)&&(i=i.substr(1)),e(i);else if(i=g[7]){i=i.toLowerCase(),N&&z.test(i)&&(i=i.substr(1)),t=i in r,M&&F[i]&&k.length>0&&k[k.length-1].name===i&&e(i);if(!u||(v=c.getElementRule(i))){w=!0,u&&(A=v.attributes,B=v.attributePatterns),(y=g[8])?(p=y.indexOf("data-mce-type")!==-1,p&&q&&(w=!1
),l=[],l.map={},y.replace(H,function(a,b,c,d,e){var f,g;b=b.toLowerCase(),c=b in s?b:L(c||d||e||"");if(u&&!p&&b.indexOf("data-")!==0){f=A[b];if(!f&&B){g=B.length;while(g--){f=B[g];if(f.pattern.test(b))break}g===-1&&(f=null)}if(!f)return;if(f.validValues&&!(c in f.validValues))return}l.map[b]=c,l.push({name:b,value:c})})):(l=[],l.map={});if(u&&!p){C=v.attributesRequired,D=v.attributesDefault,E=v.attributesForced;if(E){m=E.length;while(m--)x=E[m],o=x.name,J=x.value,J==="{$uid}"&&(J="mce_"+K++),l.map[o]=J,l.push({name:o,value:J})}if(D){m=D.length;while(m--)x=D[m],o=x.name,o in l.map||(J=x.value,J==="{$uid}"&&(J="mce_"+K++),l.map[o]=J,l.push({name:o,value:J}))}if(C){m=C.length;while(m--)if(C[m]in l.map)break;m===-1&&(w=!1)}l.map["data-mce-bogus"]&&(w=!1)}w&&f.start(i,l,t)}else w=!1;if(j=I[i]){j.lastIndex=h=g.index+g[0].length,(g=j.exec(d))?(w&&(n=d.substr(h,g.index-h)),h=g.index+g[0].length):(n=d.substr(h),h=d.length),w&&n.length>0&&f.text(n,!0),w&&f.end(i),G.lastIndex=h;continue}t||(!y||y.indexOf("/")!=y.length-1?k.push({name:i,valid:w}):w&&f.end(i))}else(i=g[1])?f.comment(i):(i=g[2])?f.cdata(i):(i=g[3])?f.doctype(i):(i=g[4])&&f.pi(i,g[5]);h=g.index+g[0].length}h<d.length&&f.text(L(d.substr(h)));for(m=k.length-1;m>=0;m--)i=k[m],i.valid&&f.end(i.name)}}}(tinymce),function(a){function b(a,b,c){var d,e,f=c?"lastChild":"firstChild",g=c?"prev":"next";if(a[f])return a[f];if(a!==b){d=a[g];if(d)return d;for(e=a.parent;e&&e!==b;e=e.parent){d=e[g];if(d)return d}}}function c(a,b){this.name=a,this.type=b,b===1&&(this.attributes=[],this.attributes.map={})}var d=/^[ \t\r\n]*$/,e={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};a.extend(c.prototype,{replace:function(a){var b=this;return a.parent&&a.remove(),b.insert(a,b),b.remove(),b},attr:function(a,b){var c=this,d,e,f;if(typeof a!="string"){for(e in a)c.attr(e,a[e]);return c}if(d=c.attributes){if(b!==f){if(b===null){if(a in d.map){delete d.map[a],e=d.length;while(e--)if(d[e].name===a)return d=d.splice(e,1),c}return c}if(a in d.map){e=d.length;while(e--)if(d[e].name===a){d[e].value=b;break}}else d.push({name:a,value:b});return d.map[a]=b,c}return d.map[a]}},clone:function(){var a=this,b=new c(a.name,a.type),d,e,f,g,h;if(f=a.attributes){h=[],h.map={};for(d=0,e=f.length;d<e;d++)g=f[d],g.name!=="id"&&(h[h.length]={name:g.name,value:g.value},h.map[g.name]=g.value);b.attributes=h}return b.value=a.value,b.shortEnded=a.shortEnded,b},wrap:function(a){var b=this;return b.parent.insert(a,b),a.append(b),b},unwrap:function(){var a=this,b,c;for(b=a.firstChild;b;)c=b.next,a.insert(b,a,!0),b=c;a.remove()},remove:function(){var a=this,b=a.parent,c=a.next,d=a.prev;return b&&(b.firstChild===a?(b.firstChild=c,c&&(c.prev=null)):d.next=c,b.lastChild===a?(b.lastChild=d,d&&(d.next=null)):c.prev=d,a.parent=a.next=a.prev=null),a},append:function(a){var b=this,c;return a.parent&&a.remove(),c=b.lastChild,c?(c.next=a,a.prev=c,b.lastChild=a):b.lastChild=b.firstChild=a,a.parent=b,a},insert:function(a,b,c){var d;return a.parent&&a.remove(),d=b.parent||this,c?(b===d.firstChild?d.firstChild=a:b.prev.next=a,a.prev=b.prev,a.next=b,b.prev=a):(b===d.lastChild?d.lastChild=a:b.next.prev=a,a.next=b.next,a.prev=b,b.next=a),a.parent=d,a},getAll:function(a){var c=this,d,e=[];for(d=c.firstChild;d;d=b(d,c))d.name===a&&e.push(d);return e},empty:function(){var a=this,c,d,e;if(a.firstChild){c=[];for(e=a.firstChild;e;e=b(e,a))c.push(e);d=c.length;while(d--)e=c[d],e.parent=e.firstChild=e.lastChild=e.next=e.prev=null}return a.firstChild=a.lastChild=null,a},isEmpty:function(a){var c=this,e=c.firstChild,f,g;if(e)do{if(e.type===1){if(e.attributes.map["data-mce-bogus"])continue;if(a[e.name])return!1;f=e.attributes.length;while(f--){g=e.attributes[f].name;if(g==="name"||g.indexOf("data-")===0)return!1}}if(e.type===3&&!d.test(e.value))return!1}while(e=b(e,c));return!0},walk:function(a){return b(this,null,a)}}),a.extend(c,{create:function(a,b){var d,f;d=new c(a,e[a]||1);if(b)for(f in b)d.attr(f,b[f]);return d}}),a.html.Node=c}(tinymce),function(a){var b=a.html.Node;a.html.DomParser=function(c,d){function e(c){var e,g,h,i,j,k,l,m,n,o,p,q,r,s;q=a.makeMap("tr,td,th,tbody,thead,tfoot,table"),p=d.getNonEmptyElements();for(e=0;e<c.length;e++){g=c[e];if(!g.parent)continue;i=[g];for(h=g.parent;h&&!d.isValidChild(h.name,g.name)&&!q[h.name];h=h.parent)i.push(h);if(h&&i.length>1){i.reverse(),j=k=f.filterNode(i[0].clone());for(n=0;n<i.length-1;n++){d.isValidChild(k.name,i[n].name)?(l=f.filterNode(i[n].clone()),k.append(l)):l=k;for(m=i[n].firstChild;m&&m!=i[n+1];)s=m.next,l.append(m),m=s;k=l}j.isEmpty(p)?h.insert(g,i[0],!0):(h.insert(j,i[0],!0),h.insert(g,j)),h=i[0],(h.isEmpty(p)||h.firstChild===h.lastChild&&h.firstChild.name==="br")&&h.empty().remove()}else if(g.parent){if(g.name==="li"){r=g.prev;if(!r||r.name!=="ul"&&r.name!=="ul"){r=g.next;if(!r||r.name!=="ul"&&r.name!=="ul"){g.wrap(f.filterNode(new b("ul",1)));continue}r.insert(g,r.firstChild,!0);continue}r.append(g);continue}d.isValidChild(g.parent.name,"div")&&d.isValidChild("div",g.name)?g.wrap(f.filterNode(new b("div",1))):g.name==="style"||g.name==="script"?g.empty().remove():g.unwrap()}}}var f=this,g={},h=[],i={},j={};c=c||{},c.validate="validate"in c?c.validate:!0,c.root_name=c.root_name||"body",f.schema=d=d||new a.html.Schema,f.filterNode=function(a){var b,c,d;c in g&&(d=i[c],d?d.push(a):i[c]=[a]),b=h.length;while(b--)c=h[b].name,c in a.attributes.map&&(d=j[c],d?d.push(a):j[c]=[a]);return a},f.addNodeFilter=function(b,c){a.each(a.explode(b),function(a){var b=g[a];b||(g[a]=b=[]),b.push(c)})},f.addAttributeFilter=function(b,c){a.each(a.explode(b),function(a){var b;for(b=0;b<h.length;b++)if(h[b].name===a){h[b].callbacks.push(c);return}h.push({name:a,callbacks:[c]})})},f.parse=function(f,k){function l(){var a=p.firstChild,b,c;while(a)b=a.next,a.type==3||a.type==1&&a.name!=="p"&&!z[a.name]&&!a.attr("data-mce-type")?c?c.append(a):(c=m(H,1),p.insert(c,a),c.append(a)):c=null,a=b}function m(a,c){var d=new b(a,c),e;return a in g&&(e=i[a],e?e.push(d):i[a]=[d]),d}function n(a){var b,c,d;for(b=a.prev;b&&b.type===3;)c=b.value.replace(C,""),c.length>0?(b.value=c,b=b.prev):(d=b.prev,b.remove(),b=d)}var o,p,q,r,s,t,u,v,w,x,y,z,A,B=[],C,D,E,F,G,H;k=k||{},i={},j={},z=a.extend(a.makeMap("script,style,head,html,body,title,meta,param"),d.getBlockElements()),G=d.getNonEmptyElements(),F=d.children,y=c.validate,H="forced_root_block"in k?k.forced_root_block:c.forced_root_block,E=d.getWhiteSpaceElements(),A=/^[ \t\r\n]+/,C=/[ \t\r\n]+$/,D=/[ \t\r\n]+/g,o=new a.html.SaxParser({validate:y,fix_self_closing:!y,cdata:function(a){q.append(m("#cdata",4)).value=a},text:function(a,b){var c;E[q.name]||(a=a.replace(D," "),q.lastChild&&z[q.lastChild.name]&&(a=a.replace(A,""))),a.length!==0&&(c=m("#text",3),c.raw=!!b,q.append(c).value=a)},comment:function(a){q.append(m("#comment",8)).value=a},pi:function(a,b){q.append(m(a,7)).value=b,n(q)},doctype:function(a){var b;b=q.append(m("#doctype",10)),b.value=a,n(q)},start:function(a,b,c){var e,f,g,i,k,l,o,p;g=y?d.getElementRule(a):{};if(g){e=m(g.outputName||a,1),e.attributes=b,e.shortEnded=c,q.append(e),p=F[q.name],p&&F[e.name]&&!p[e.name]&&B.push(e),f=h.length;while(f--)k=h[f].name,k in b.map&&(w=j[k],w?w.push(e):j[k]=[e]);z[a]&&n(e),c||(q=e)}},end:function(a){var c,e,f,g,h;e=y?d.getElementRule(a):{};if(e){if(z[a]){if(!E[q.name]){for(c=q.firstChild;c&&c.type===3;)f=c.value.replace(A,""),f.length>0?(c.value=f,c=c.next):(g=c.next,c.remove(),c=g);for(c=q.lastChild;c&&c.type===3;)f=c.value.replace(C,""),f.length>0?(c.value=f,c=c.prev):(g=c.prev,c.remove(),c=g)}c=q.prev,c&&c.type===3&&(f=c.value.replace(A,""),f.length>0?c.value=f:c.remove())}if(e.removeEmpty||e.paddEmpty)if(q.isEmpty(G))if(e.paddEmpty)q.empty().append(new b("#text","3")).value=" ";else if(!q.attributes.map.name){h=q.parent,q.empty().remove(),q=h;return}q=q.parent}}},d),p=q=new b(k.context||c.root_name,11),o.parse(f),y&&B.length&&(k.context?k.invalid=!0:e(B)),H&&p.name=="body"&&l();if(!k.invalid){for(x in i){w=g[x],r=i[x],u=r.length;while(u--)r[u].parent||r.splice(u,1);for(s=0,t=w.length;s<t;s++)w[s](r,x,k)}for(s=0,t=h.length;s<t;s++){w=h[s];if(w.name in j){r=j[w.name],u=r.length;while(u--)r[u].parent||r.splice(u,1);for(u=0,v=w.callbacks.length;u<v;u++)w.callbacks[u](r,w.name,k)}}}return p},c.remove_trailing_brs&&f.addNodeFilter("br",function(b,c){var e,f=b.length,g,h=d.getBlockElements(),i=d.getNonEmptyElements(),j,k,l;h.body=1;for(e=0;e<f;e++){g=b[e],j=g.parent;if(h[g.parent.name]&&g===j.lastChild){k=g.prev;while(k){l=k.name;if(l!=="span"||k.attr("data-mce-type")!=="bookmark"){if(l!=="br")break;if(l==="br"){g=null;break}}k=k.prev}g&&(g.remove(),j.isEmpty(i)&&(elementRule=d.getElementRule(j.name),elementRule&&(elementRule.removeEmpty?j.remove():elementRule.paddEmpty&&(j.empty().append(new a.html.Node("#text",3)).value=" "))))}}})}}(tinymce),tinymce.html.Writer=function(a){var b=[],c,d,e,f,g;return a=a||{},c=a.indent,d=tinymce.makeMap(a.indent_before||""),e=tinymce.makeMap(a.indent_after||""),f=tinymce.html.Entities.getEncodeFunc(a.entity_encoding||"raw",a.entities),g=a.element_format=="html",{start:function(a,h,i){var j,k,l,m;c&&d[a]&&b.length>0&&(m=b[b.length-1],m.length>0&&m!=="\n"&&b.push("\n")),b.push("<",a);if(h)for(j=0,k=h.length;j<k;j++)l=h[j],b.push(" ",l.name,'="',f(l.value,!0),'"');!i||g?b[b.length]=">":b[b.length]=" />",i&&c&&e[a]&&b.length>0&&(m=b[b.length-1],m.length>0&&m!=="\n"&&b.push("\n"))},end:function(a){var d;b.push("</",a,">"),c&&e[a]&&b.length>0&&(d=b[b.length-1],d.length>0&&d!=="\n"&&b.push("\n"))},text:function(a,c){a.length>0&&(b[b.length]=c?a:f(a))},cdata:function(a){b.push("<![CDATA[",a,"]]>")},comment:function(a){b.push("<!--",a,"-->")},pi:function(a,d){d?b.push("<?",a," ",d,"?>"):b.push("<?",a,"?>"),c&&b.push("\n")},doctype:function(a){b.push("<!DOCTYPE",a,">",c?"\n":"")},reset:function(){b.length=0},getContent:function(){return b.join("").replace(/\n$/,"")}}},function(a){a.html.Serializer=function(b,c){var d=this,e=new a.html.Writer(b);b=b||{},b.validate="validate"in b?b.validate:!0,d.schema=c=c||new a.html.Schema,d.writer=e,d.serialize=function(a){function d(a){var b=f[a.type],h,i,j,k,l,m,n,o,p;if(!b){h=a.name,i=a.shortEnded,j=a.attributes;if(g&&j&&j.length>1){m=[],m.map={},p=c.getElementRule(a.name);for(n=0,o=p.attributesOrder.length;n<o;n++)k=p.attributesOrder[n],k in j.map&&(l=j.map[k],m.map[k]=l,m.push({name:k,value:l}));for(n=0,o=j.length;n<o;n++)k=j[n].name,k in m.map||(l=j.map[k],m.map[k]=l,m.push({name:k,value:l}));j=m}e.start(a.name,j,i);if(!i){if(a=a.firstChild)do d(a);while(a=a.next);e.end(h)}}else b(a)}var f,g;return g=b.validate,f={3:function(a,b){e.text(a.value,a.raw)},8:function(a){e.comment(a.value)},7:function(a){e.pi(a.name,a.value)},10:function(a){e.doctype(a.value)},4:function(a){e.cdata(a.value)},11:function(a){if(a=a.firstChild)do d(a);while(a=a.next)}},e.reset(),a.type==1&&!b.inner?d(a):f[11](a),e.getContent()}}}(tinymce),function(a){var b=a.each,c=a.is,d=a.isWebKit,e=a.isIE,f=a.html.Entities,g=/^([a-z0-9],?)+$/i,h=a.html.Schema.blockElementsMap,i=/^[ \t\r\n]*$/;a.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(b,c){var d=this,f,g;d.doc=b,d.win=window,d.files={},d.cssFlicker=!1,d.counter=0,d.stdMode=!a.isIE||b.documentMode>=8,d.boxModel=!a.isIE||b.compatMode=="CSS1Compat"||d.stdMode,d.hasOuterHTML="outerHTML"in b.createElement("a"),d.settings=c=a.extend({keep_values:!1,hex_colors:1},c),d.schema=c.schema,d.styles=new a.html.Styles({url_converter:c.url_converter,url_converter_scope:c.url_converter_scope},c.schema);if(a.isIE6)try{b.execCommand("BackgroundImageCache",!1,!0)}catch(h){d.cssFlicker=!0}if(e&&c.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(a){b.createElement(a)});for(g in c.schema.getCustomElements())b.createElement(g)}a.addUnload(d.destroy,d)},getRoot:function(){var a=this,b=a.settings;return b&&a.get(b.root_element)||a.doc.body},getViewPort:function(a){var b,c;return a=a?a:this.win,b=a.document,c=this.boxModel?b.documentElement:b.body,{x:a.pageXOffset||c.scrollLeft,y:a.pageYOffset||c.scrollTop,w:a.innerWidth||c.clientWidth,h:a.innerHeight||c.clientHeight}},getRect:function(a){var b,c=this,d;return a=c.get(a),b=c.getPos(a),d=c.getSize(a),{x:b.x,y:b.y,w:d.w,h:d.h}},getSize:function(a){var b=this,c,d;return a=b.get(a),c=b.getStyle(a,"width"),d=b.getStyle(a,"height"),c.indexOf("px")===-1&&(c=0),d.indexOf("px")===-1&&(d=0),{w:parseInt(c)||a.offsetWidth||a.clientWidth,h:parseInt(d)||a.offsetHeight||a.clientHeight}},getParent:function(a,b,c){return this.getParents(a,b,c,!1)},getParents:function(a,b,d,e){var f=this,g,h=f.settings,i=[];a=f.get(a),e=e===undefined,h.strict_root&&(d=d||f.getRoot()),c(b,"string")&&(g=b,b==="*"?b=function(a){return a.nodeType==1}:b=function(a){return f.is(a,g)});while(a){if(a==d||!a.nodeType||a.nodeType===9)break;if(!b||b(a)){if(!e)return a;i.push(a)}a=a.parentNode}return e?i:null},get:function(a){var b;if(a&&this.doc&&typeof a=="string"){b=a,a=this.doc.getElementById(a);if(a&&a.id!==b)return this.doc.getElementsByName(b)[1]}return a},getNext:function(a,b){return this._findSib(a,b,"nextSibling")},getPrev:function(a,b){return this._findSib(a,b,"previousSibling")},select:function(b,c){var d=this;return a.dom.Sizzle(b,d.get(c)||d.get(d.settings.root_element)||d.doc,[])},is:function(b,c){var d;if(b.length===undefined){if(c==="*")return b.nodeType==1;if(g.test(c)){c=c.toLowerCase().split(/,/),b=b.nodeName.toLowerCase();for(d=c.length-1;d>=0;d--)if(c[d]==b)return!0;return!1}}return a.dom.Sizzle.matches(c,b.nodeType?[b]:b).length>0},add:function(a,b,d,e,f){var g=this;return this.run(a,function(a){var h,i;return h=c(b,"string")?g.doc.createElement(b):b,g.setAttribs(h,d),e&&(e.nodeType?h.appendChild(e):g.setHTML(h,e)),f?h:a.appendChild(h)})},create:function(a,b,c){return this.add(this.doc.createElement(a),a,b,c,1)},createHTML:function(a,b,c){var d="",e=this,f;d+="<"+a;for(f in b)b.hasOwnProperty(f)&&(d+=" "+f+'="'+e.encode(b[f])+'"');return typeof c!="undefined"?d+">"+c+"</"+a+">":d+" />"},remove:function(b,c){return this.run(b,function(b){var d,e=b.parentNode;if(!e)return null;if(c)while(d=b.firstChild)!a.isIE||d.nodeType!==3||d.nodeValue?e.insertBefore(d,b):b.removeChild(d);return e.removeChild(b)})},setStyle:function(b,c,d){var f=this;return f.run(b,function(g){var h,i;h=g.style,c=c.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}),f.pixelStyles.test(c)&&(a.is(d,"number")||/^[\-0-9\.]+$/.test(d))&&(d+="px");switch(c){case"opacity":if(e){h.filter=d===""?"":"alpha(opacity="+d*100+")";if(!b.currentStyle||!b.currentStyle.hasLayout)h.display="inline-block"}h[c]=h["-moz-opacity"]=h["-khtml-opacity"]=d||"";break;case"float":e?h.styleFloat=d:h.cssFloat=d;break;default:h[c]=d||""}f.settings.update_styles&&f.setAttrib(g,"data-mce-style")})},getStyle:function(a,b,c){a=this.get(a);if(!a)return;if(this.doc.defaultView&&c){b=b.replace(/[A-Z]/g,function(a){return"-"+a});try{return this.doc.defaultView.getComputedStyle(a,null).getPropertyValue(b)}catch(d){return null}}return b=b.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}),b=="float"&&(b=e?"styleFloat":"cssFloat"),a.currentStyle&&c?a.currentStyle[b]:a.style?a.style[b]:undefined},setStyles:function(a,c){var d=this,e=d.settings,f;f=e.update_styles,e.update_styles=0,b(c,function(b,c){d.setStyle(a,c,b)}),e.update_styles=f,e.update_styles&&d.setAttrib(a,e.cssText)},removeAllAttribs:function(a){return this.run(a,function(a){var b,c=a.attributes;for(b=c.length-1;b>=0;b--)a.removeAttributeNode(c.item(b))})},setAttrib:function(a,d,e){var f=this;if(!a||!d)return;return f.settings.strict&&(d=d.toLowerCase()),this.run(a,function(a){var g=f.settings;if(e!==null)switch(d){case"style":if(!c(e,"string")){b(e,function(b,c){f.setStyle(a,c,b)});return}g.keep_values&&(e&&!f._isRes(e)?a.setAttribute("data-mce-style",e,2):a.removeAttribute("data-mce-style",2)),a.style.cssText=e;break;case"class":a.className=e||"";break;case"src":case"href":g.keep_values&&(g.url_converter&&(e=g.url_converter.call(g.url_converter_scope||f,e,d,a)),f.setAttrib(a,"data-mce-"+d,e,2));break;case"shape":a.setAttribute("data-mce-style",e)}c(e)&&e!==null&&e.length!==0?a.setAttribute(d,""+e,2):a.removeAttribute(d,2)})},setAttribs:function(a,c){var d=this;return this.run(a,function(a){b(c,function(b,c){d.setAttrib(a,c,b)})})},getAttrib:function(b,f,g){var h,i=this,j;b=i.get(b);if(!b||b.nodeType!==1)return g===j?!1:g;c(g)||(g="");if(/^(src|href|style|coords|shape)$/.test(f)){h=b.getAttribute("data-mce-"+f);if(h)return h}e&&i.props[f]&&(h=b[i.props[f]],h=h&&h.nodeValue?h.nodeValue:h),h||(h=b.getAttribute(f,2));if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(f))return b[i.props[f]]===!0&&h===""?f:h?f:"";if(b.nodeName==="FORM"&&b.getAttributeNode(f))return b.getAttributeNode(f).nodeValue;f==="style"&&(h=h||b.style.cssText,h&&(h=i.serializeStyle(i.parseStyle(h),b.nodeName),i.settings.keep_values&&!i._isRes(h)&&b.setAttribute("data-mce-style",h))),d&&f==="class"&&h&&(h=h.replace(/(apple|webkit)\-[a-z\-]+/gi,""));if(e)switch(f){case"rowspan":case"colspan":h===1&&(h="");break;case"size":if(h==="+0"||h===20||h===0)h="";break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":h===0&&(h="");break;case"hspace":h===-1&&(h="");break;case"maxlength":case"tabindex":if(h===32768||h===2147483647||h==="32768")h="";break;case"multiple":case"compact":case"noshade":case"nowrap":if(h===65535)return f;return g;case"shape":h=h.toLowerCase();break;default:f.indexOf("on")===0&&h&&(h=a._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+h))}return h!==j&&h!==null&&h!==""?""+h:g},getPos:function(a,b){var c=this,d=0,e=0,f,g=c.doc,h;a=c.get(a),b=b||g.body;if(a){if(a.getBoundingClientRect)return a=a.getBoundingClientRect(),f=c.boxModel?g.documentElement:g.body,d=a.left+(g.documentElement.scrollLeft||g.body.scrollLeft)-f.clientTop,e=a.top+(g.documentElement.scrollTop||g.body.scrollTop)-f.clientLeft,{x:d,y:e};h=a;while(h&&h!=b&&h.nodeType)d+=h.offsetLeft||0,e+=h.offsetTop||0,h=h.offsetParent;h=a.parentNode;while(h&&h!=b&&h.nodeType)d-=h.scrollLeft||0,e-=h.scrollTop||0,h=h.parentNode}return{x:d,y:e}},parseStyle:function(a){return this.styles.parse(a)},serializeStyle:function(a,b){return this.styles.serialize(a,b)},loadCSS:function(c){var d=this,f=d.doc,g;c||(c=""),g=d.select("head")[0],b(c.split(","),function(b){var c;if(d.files[b])return;d.files[b]=!0,c=d.create("link",{rel:"stylesheet",href:a._addVer(b)}),e&&f.documentMode&&f.recalc&&(c.onload=function(){f.recalc&&f.recalc(),c.onload=null}),g.appendChild(c)})},addClass:function(a,b){return this.run(a,function(a){var c;return b?this.hasClass(a,b)?a.className:(c=this.removeClass(a,b),a.className=(c!=""?c+" ":"")+b):0})},removeClass:function(b,c){var d=this,e;return d.run(b,function(b){var f;return d.hasClass(b,c)?(e||(e=new RegExp("(^|\\s+)"+c+"(\\s+|$)","g")),f=b.className.replace(e," "),f=a.trim(f!=" "?f:""),b.className=f,f||(b.removeAttribute("class"),b.removeAttribute("className")),f):b.className})},hasClass:function(a,b){return a=this.get(a),!a||!b?!1:(" "+a.className+" ").indexOf(" "+b+" ")!==-1},show:function(a){return this.setStyle(a,"display","block")},hide:function(a){return this.setStyle(a,"display","none")},isHidden:function(a){return a=this.get(a),!a||a.style.display=="none"||this.getStyle(a,"display")=="none"},uniqueId:function(a){return(a?a:"mce_")+this.counter++},setHTML:function(a,c){var d=this;return d.run(a,function(a){if(e){while(a.firstChild)a.removeChild(a.firstChild);try{a.innerHTML="<br />"+c,a.removeChild(a.firstChild)}catch(f){a=d.create("div"),a.innerHTML="<br />"+c,b(a.childNodes,function(b,c){c&&a.appendChild(b)})}}else a.innerHTML=c;return c})},getOuterHTML:function(a){var b,c=this;return a=c.get(a),a?a.nodeType===1&&c.hasOuterHTML?a.outerHTML:(b=(a.ownerDocument||c.doc).createElement("body"),b.appendChild(a.cloneNode(!0)),b.innerHTML):null},setOuterHTML:function(a,b,c){function d(a,b,c){var d,e;e=c.createElement("body"),e.innerHTML=b,d=e.lastChild;while(d)f.insertAfter(d.cloneNode(!0),a),d=d.previousSibling;f.remove(a)}var f=this;return this.run(a,function(a){a=f.get(a);if(a.nodeType==1){c=c||a.ownerDocument||f.doc;if(e)try{e&&a.nodeType==1?a.outerHTML=b:d(a,b,c)}catch(g){d(a,b,c)}else d(a,b,c)}})},decode:f.decode,encode:f.encodeAllRaw,insertAfter:function(a,b){return b=this.get(b),this.run(a,function(a){var c,d;return c=b.parentNode,d=b.nextSibling,d?c.insertBefore(a,d):c.appendChild(a),a})},isBlock:function(a){var b=a.nodeType;return b?b===1&&!!h[a.nodeName]:!!h[a]},replace:function(d,e,f){var g=this;return c(e,"array")&&(d=d.cloneNode(!0)),g.run(e,function(c){return f&&b(a.grep(c.childNodes),function(a){d.appendChild(a)}),c.parentNode.replaceChild(d,c)})},rename:function(a,c){var d=this,e;return a.nodeName!=c.toUpperCase()&&(e=d.create(c),b(d.getAttribs(a),function(b){d.setAttrib(e,b.nodeName,d.getAttrib(a,b.nodeName))}),d.replace(e,a,1)),e||a},findCommonAncestor:function(a,b){var c=a,d;while(c){d=b;while(d&&c!=d)d=d.parentNode;if(c==d)break;c=c.parentNode}return!c&&a.ownerDocument?a.ownerDocument.documentElement:c},toHex:function(a){function b(a){return a=parseInt(a).toString(16),a.length>1?a:"0"+a}var c=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(a);return c?(a="#"+b(c[1])+b(c[2])+b(c[3]),a):a},getClasses:function(){function c(d){b(d.imports,function(a){c(a)}),b(d.cssRules||d.rules,function(d){switch(d.type||1){case 1:d.selectorText&&b(d.selectorText.split(","),function(b){b=b.replace(/^\s*|\s*$|^\s\./g,"");if(/\.mce/.test(b)||!/\.[\w\-]+$/.test(b))return;i=b,b=a._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",b);if(h&&!(b=h(b,i)))return;g[b]||(e.push({"class":b}),g[b]=1)});break;case 3:c(d.styleSheet)}})}var d=this,e=[],f,g={},h=d.settings.class_filter,i;if(d.classes)return d.classes;try{b(d.doc.styleSheets,c)}catch(j){}return e.length>0&&(d.classes=e),e},run:function(a,c,d){var e=this,f;return e.doc&&typeof a=="string"&&(a=e.get(a)),a?(d=d||this,!a.nodeType&&(a.length||a.length===0)?(f=[],b(a,function(a,b){a&&(typeof a=="string"&&(a=e.doc.getElementById(a)),f.push(c.call(d,a,b)))}),f):c.call(d,a)):!1},getAttribs:function(a){var b;return a=this.get(a),a?e?(b=[],a.nodeName=="OBJECT"?a.attributes:(a.nodeName==="OPTION"&&this.getAttrib(a,"selected")&&b.push({specified:1,nodeName:"selected"}),a.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(a){b.push({specified:1,nodeName:a})}),b)):a.attributes:[]},isEmpty:function(b,c){var d=this,e,f,g,h,j,k;b=b.firstChild;if(b){h=new a.dom.TreeWalker(b),c=c||d.schema?d.schema.getNonEmptyElements():null;do{g=b.nodeType;if(g===1){if(b.getAttribute("data-mce-bogus"))continue;j=b.nodeName.toLowerCase();if(c&&c[j]){k=b.parentNode;if(j==="br"&&d.isBlock(k)&&k.firstChild===b&&k.lastChild===b)continue;return!1}f=d.getAttribs(b),e=b.attributes.length;while(e--){j=b.attributes[e].nodeName;if(j==="name"||j==="data-mce-bookmark")return!1}}if(g===3&&!i.test(b.nodeValue))return!1}while(b=h.next())}return!0},destroy:function(b){var c=this;c.events&&c.events.destroy(),c.win=c.doc=c.root=c.events=null,b||a.removeUnload(c.destroy)},createRng:function(){var b=this.doc;return b.createRange?b.createRange():new a.dom.Range(this)},nodeIndex:function(a,b){var c=0,d,e,f;if(a)for(d=a.nodeType,a=a.previousSibling,e=a;a;a=a.previousSibling){f=a.nodeType;if(b&&f==3)if(f==d||!a.nodeValue.length)continue;c++,d=f}return c},split:function(b,c,d){function e(b){var c,d=b.childNodes,g=b.nodeType;if(g==1&&b.getAttribute("data-mce-type")=="bookmark")return;for(c=d.length-1;c>=0;c--)e(d[c]);if(g!=9){if(g==3&&b.nodeValue.length>0){if(!f.isBlock(b.parentNode)||a.trim(b.nodeValue).length>0)return}else if(g==1){d=b.childNodes,d.length==1&&d[0]&&d[0].nodeType==1&&d[0].getAttribute("data-mce-type")=="bookmark"&&b.parentNode.insertBefore(d[0],b);if(d.length||/^(br|hr|input|img)$/i.test(b.nodeName))return}f.remove(b)}return b}var f=this,g=f.createRng(),h,i,j;if(b&&c)return g.setStart(b.parentNode,f.nodeIndex(b)),g.setEnd(c.parentNode,f.nodeIndex(c)),h=g.extractContents(),g=f.createRng(),g.setStart(c.parentNode,f.nodeIndex(c)+1),g.setEnd(b.parentNode,f.nodeIndex(b)+1),i=g.extractContents(),j=b.parentNode,j.insertBefore(e(h),b),d?j.replaceChild(d,c):j.insertBefore(c,b),j.insertBefore(e(i),b),f.remove(b),d||c},bind:function(b,c,d,e){var f=this;return f.events||(f.events=new a.dom.EventUtils),f.events.add(b,c,d,e||this)},unbind:function(b,c,d){var e=this;return e.events||(e.events=new a.dom.EventUtils),e.events.remove(b,c,d)},_findSib:function(a,b,d){var e=this,f=b;if(a){c(f,"string")&&(f=function(a){return e.is(a,b)});for(a=a[d];a;a=a[d])if(f(a))return a}return null},_isRes:function(a){return/^(top|left|bottom|right|width|height)/i.test(a)||/;\s*(top|left|bottom|right|width|height)/i.test(a)}}),a.DOM=new a.dom.DOMUtils(document,{process_html:0})}(tinymce),function(a){function b(a){function c(a,b){v(K,a,b)}function d(a,b){v(L,a,b)}function e(a){c(a.parentNode,R(a))}function f(a){c(a.parentNode,R(a)+1)}function g(a){d(a.parentNode,R(a))}function h(a){d(a.parentNode,R(a)+1)}function i(a){a?(F[O]=F[N],F[P]=F[M]):(F[N]=F[O],F[M]=F[P]),F.collapsed=K}function j(a){e(a),h(a)}function k(a){c(a,0),d(a,a.nodeType===1?a.childNodes.length:a.nodeValue.length)}function l(a,b){var c=F[N],d=F[M],e=F[O],f=F[P],g=b.startContainer,h=b.startOffset,i=b.endContainer,j=b.endOffset;if(a===0)return u(c,d,g,h);if(a===1)return u(e,f,g,h);if(a===2)return u(e,f,i,j);if(a===3)return u(c,d,i,j)}function m(){w(J)}function n(){return w(H)}function o(){return w(I)}function p(b){var c=this[N],d=this[M],e,f;c.nodeType!==3&&c.nodeType!==4||!c.nodeValue?(c.childNodes.length>0&&(f=c.childNodes[d]),f?c.insertBefore(b,f):c.appendChild(b)):d?d>=c.nodeValue.length?a.insertAfter(b,c):(e=c.splitText(d),c.parentNode.insertBefore(b,e)):c.parentNode.insertBefore(b,c)}function q(a){var b=F.extractContents();F.insertNode(a),a.appendChild(b),F.selectNode(a)}function r(){return Q(new b(a),{startContainer:F[N],startOffset:F[M],endContainer:F[O],endOffset:F[P],collapsed:F.collapsed,commonAncestorContainer:F.commonAncestorContainer})}function s(a,b){var c;if(a.nodeType==3)return a;if(b<0)return a;c=a.firstChild;while(c&&b>0)--b,c=c.nextSibling;return c?c:a}function t(){return F[N]==F[O]&&F[M]==F[P]}function u(b,c,d,e){var f,g,h,i,j,k;if(b==d)return c==e?0:c<e?-1:1;f=d;while(f&&f.parentNode!=b)f=f.parentNode;if(f){g=0,h=b.firstChild;while(h!=f&&g<c)g++,h=h.nextSibling;return c<=g?-1:1}f=b;while(f&&f.parentNode!=d)f=f.parentNode;if(f){g=0,h=d.firstChild;while(h!=f&&g<e)g++,h=h.nextSibling;return g<e?-1:1}i=a.findCommonAncestor(b,d),j=b;while(j&&j.parentNode!=i)j=j.parentNode;j||(j=i),k=d;while(k&&k.parentNode!=i)k=k.parentNode;k||(k=i);if(j==k)return 0;h=i.firstChild;while(h){if(h==j)return-1;if(h==k)return 1;h=h.nextSibling}}function v(b,c,d){var e,f;b?(F[N]=c,F[M]=d):(F[O]=c,F[P]=d),e=F[O];while(e.parentNode)e=e.parentNode;f=F[N];while(f.parentNode)f=f.parentNode;f==e?u(F[N],F[M],F[O],F[P])>0&&F.collapse(b):F.collapse(b),F.collapsed=t(),F.commonAncestorContainer=a.findCommonAncestor(F[N],F[O])}function w(a){var b,c=0,d=0,e,f,g,h,i,j;if(F[N]==F[O])return x(a);for(b=F[O],e=b.parentNode;e;b=e,e=e.parentNode){if(e==F[N])return y(b,a);++c}for(b=F[N],e=b.parentNode;e;b=e,e=e.parentNode){if(e==F[O])return z(b,a);++d}f=d-c,g=F[N];while(f>0)g=g.parentNode,f--;h=F[O];while(f<0)h=h.parentNode,f++;for(i=g.parentNode,j=h.parentNode;i!=j;i=i.parentNode,j=j.parentNode)g=i,h=j;return A(g,h,a)}function x(a){var b,c,d,e,f,g,h;a!=J&&(b=G.createDocumentFragment());if(F[M]==F[P])return b;if(F[N].nodeType==3){c=F[N].nodeValue,d=c.substring(F[M],F[P]),a!=I&&(F[N].deleteData(F[M],F[P]-F[M]),F.collapse(K));if(a==J)return;return b.appendChild(G.createTextNode(d)),b}e=s(F[N],F[M]),f=F[P]-F[M];while(f>0)g=e.nextSibling,h=E(e,a),b&&b.appendChild(h),--f,e=g;return a!=I&&F.collapse(K),b}function y(a,b){var c,d,e,f,g,h;b!=J&&(c=G.createDocumentFragment()),d=B(a,b),c&&c.appendChild(d),e=R(a),f=e-F[M];if(f<=0)return b!=I&&(F.setEndBefore(a),F.collapse(L)),c;d=a.previousSibling;while(f>0)g=d.previousSibling,h=E(d,b),c&&c.insertBefore(h,c.firstChild),--f,d=g;return b!=I&&(F.setEndBefore(a),F.collapse(L)),c}function z(a,b){var c,d,e,f,g,h;b!=J&&(c=G.createDocumentFragment()),e=C(a,b),c&&c.appendChild(e),d=R(a),++d,f=F[P]-d,e=a.nextSibling;while(f>0)g=e.nextSibling,h=E(e,b),c&&c.appendChild(h),--f,e=g;return b!=I&&(F.setStartAfter(a),F.collapse(K)),c}function A(a,b,c){var d,e,f,g,h,i,j,k;c!=J&&(e=G.createDocumentFragment()),d=C(a,c),e&&e.appendChild(d),f=a.parentNode,g=R(a),h=R(b),++g,i=h-g,j=a.nextSibling;while(i>0)k=j.nextSibling,d=E(j,c),e&&e.appendChild(d),j=k,--i;return d=B(b,c),e&&e.appendChild(d),c!=I&&(F.setStartAfter(a),F.collapse(K)),e}function B(a,b){var c=s(F[O],F[P]-1),d,e,f,g,h,i=c!=F[O];if(c==a)return D(c,i,L,b);d=c.parentNode,e=D(d,L,L,b);while(d){while(c)f=c.previousSibling,g=D(c,i,L,b),b!=J&&e.insertBefore(g,e.firstChild),i=K,c=f;if(d==a)return e;c=d.previousSibling,d=d.parentNode,h=D(d,L,L,b),b!=J&&h.appendChild(e),e=h}}function C(a,b){var c=s(F[N],F[M]),d=c!=F[N],e,f,g,h,i;if(c==a)return D(c,d,K,b);e=c.parentNode,f=D(e,L,K,b);while(e){while(c)g=c.nextSibling,h=D(c,d,K,b),b!=J&&f.appendChild(h),d=K,c=g;if(e==a)return f;c=e.nextSibling,e=e.parentNode,i=D(e,L,K,b),b!=J&&i.appendChild(f),f=i}}function D(a,b,c,d){var e,f,g,h,i;if(b)return E(a,d);if(a.nodeType==3){e=a.nodeValue,c?(h=F[M],f=e.substring(h),g=e.substring(0,h)):(h=F[P],f=e.substring(0,h),g=e.substring(h)),d!=I&&(a.nodeValue=g);if(d==J)return;return i=a.cloneNode(L),i.nodeValue=f,i}if(d==J)return;return a.cloneNode(L)}function E(a,b){if(b!=J)return b==I?a.cloneNode(K):a;a.parentNode.removeChild(a)}var F=this,G=a.doc,H=0,I=1,J=2,K=!0,L=!1,M="startOffset",N="startContainer",O="endContainer",P="endOffset",Q=tinymce.extend,R=a.nodeIndex;Q(F,{startContainer:G,startOffset:0,endContainer:G,endOffset:0,collapsed:K,commonAncestorContainer:G,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:c,setEnd:d,setStartBefore:e,setStartAfter:f,setEndBefore:g,setEndAfter:h,collapse:i,selectNode:j,selectNodeContents:k,compareBoundaryPoints:l,deleteContents:m,extractContents:n,cloneContents:o,insertNode:p,surroundContents:q,cloneRange:r})}a.Range=b}(tinymce.dom),function(){function a(a){function b(b,c){var d,e=0,f,g,h,i,j,k,l=-1,m;d=b.duplicate(),d.collapse(c),m=d.parentElement();if(m.ownerDocument!==a.dom.doc)return;while(m.contentEditable==="false")m=m.parentNode;if(!m.hasChildNodes())return{node:m,inside:1};h=m.children,f=h.length-1;while(e<=f){k=Math.floor((e+f)/2),i=h[k],d.moveToElementText(i),l=d.compareEndPoints(c?"StartToStart":"EndToEnd",b);if(l>0)f=k-1;else{if(!(l<0))return{node:i};e=k+1}}if(l<0){i?d.collapse(!1):(d.moveToElementText(m),d.collapse(!0),i=m,g=!0),d.setEndPoint(c?"EndToStart":"EndToEnd",b);if(d.compareEndPoints(c?"StartToStart":"StartToEnd",b)>0){d=b.duplicate(),d.collapse(c),j=-1;while(m==d.parentElement()){if(d.move("character",-1)==0)break;j++}}j=j||d.text.replace("\r\n"," ").length}else d.collapse(!0),d.setEndPoint(c?"StartToStart":"StartToEnd",b),j=d.text.replace("\r\n"," ").length;return{node:i,position:l,offset:j,inside:g}}function c(){function c(a){var c=b(f,a),d,e,h=0,i,j,k;d=c.node,e=c.offset;if(c.inside&&!d.hasChildNodes()){g[a?"setStart":"setEnd"](d,0);return}if(e===j){g[a?"setStartBefore":"setEndAfter"](d);return}if(c.position<0){i=c.inside?d.firstChild:d.nextSibling;if(!i){g[a?"setStartAfter":"setEndAfter"](d);return}if(!e){i.nodeType==3?g[a?"setStart":"setEnd"](i,0):g[a?"setStartBefore":"setEndBefore"](i);return}while(i){k=i.nodeValue,h+=k.length;if(h>=e){d=i,h-=e,h=k.length-h;break}i=i.nextSibling}}else{i=d.previousSibling;if(!i)return g[a?"setStartBefore":"setEndBefore"](d);if(!e){d.nodeType==3?g[a?"setStart":"setEnd"](i,d.nodeValue.length):g[a?"setStartAfter":"setEndAfter"](i);return}while(i){h+=i.nodeValue.length;if(h>=e){d=i,h-=e;break}i=i.previousSibling}}g[a?"setStart":"setEnd"](d,h)}var f=a.getRng(),g=e.createRng(),h,i,j,k,l,m;h=f.item?f.item(0):f.parentElement();if(h.ownerDocument!=e.doc)return g;i=a.isCollapsed();if(f.item)return g.setStart(h.parentNode,e.nodeIndex(h)),g.setEnd(g.startContainer,g.startOffset+1),g;try{c(!0),i||c()}catch(n){if(n.number!=-2147024809)throw n;l=d.getBookmark(2),j=f.duplicate(),j.collapse(!0),h=j.parentElement(),i||(j=f
.duplicate(),j.collapse(!1),k=j.parentElement(),k.innerHTML=k.innerHTML),h.innerHTML=h.innerHTML,d.moveToBookmark(l),f=a.getRng(),c(!0),i||c()}return g}var d=this,e=a.dom,f=!0,g=!1;this.getBookmark=function(c){function d(a){var a,b,c,d,f,g=[];b=a.parentNode,c=e.getRoot().parentNode;while(b!=c&&b.nodeType!==9){d=b.children,f=d.length;while(f--)if(a===d[f]){g.push(f);break}a=b,b=b.parentNode}return g}function f(a){var c;c=b(g,a);if(c)return{position:c.position,offset:c.offset,indexes:d(c.node),inside:c.inside}}var g=a.getRng(),h,i,j={};return c===2&&(g.item?j.start={ctrl:!0,indexes:d(g.item(0))}:(j.start=f(!0),a.isCollapsed()||(j.end=f()))),j},this.moveToBookmark=function(a){function b(a){var b,c,d,f;b=e.getRoot();for(c=a.length-1;c>=0;c--)f=b.children,d=a[c],d<=f.length-1&&(b=f[d]);return b}function c(c){var e=a[c?"start":"end"],g,h,i;e&&(g=e.position>0,h=f.createTextRange(),h.moveToElementText(b(e.indexes)),offset=e.offset,offset!==i?(h.collapse(e.inside||g),h.moveStart("character",g?-offset:offset)):h.collapse(c),d.setEndPoint(c?"StartToStart":"EndToStart",h),c&&d.collapse(!0))}var d,f=e.doc.body;a.start&&(a.start.ctrl?(d=f.createControlRange(),d.addElement(b(a.start.indexes)),d.select()):(d=f.createTextRange(),c(!0),c(),d.select()))},this.addRange=function(b){function c(a){var b,c,g,n,o;g=e.create("a"),b=a?h:j,c=a?i:k,n=d.duplicate();if(b==l||b==l.documentElement)b=m,c=0;b.nodeType==3?(b.parentNode.insertBefore(g,b),n.moveToElementText(g),n.moveStart("character",c),e.remove(g),d.setEndPoint(a?"StartToStart":"EndToEnd",n)):(o=b.childNodes,o.length?(c>=o.length?e.insertAfter(g,o[o.length-1]):b.insertBefore(g,o[c]),n.moveToElementText(g)):(g=l.createTextNode("﻿"),b.appendChild(g),n.moveToElementText(g.parentNode),n.collapse(f)),d.setEndPoint(a?"StartToStart":"EndToEnd",n),e.remove(g))}var d,g,h,i,j,k,l=a.dom.doc,m=l.body;h=b.startContainer,i=b.startOffset,j=b.endContainer,k=b.endOffset,d=m.createTextRange();if(h==j&&h.nodeType==1&&i==k-1&&i==k-1)try{g=m.createControlRange(),g.addElement(h.childNodes[i]),g.select();return}catch(n){}c(!0),c(),d.select()},this.getRangeAt=c}tinymce.dom.TridentSelection=a}(),function(){function a(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){i=i[a];var j=!1;while(i){if(i.sizcache===c){j=d[i.sizset];break}i.nodeType===1&&!f&&(i.sizcache=c,i.sizset=g);if(i.nodeName.toLowerCase()===b){j=i;break}i=i[a]}d[g]=j}}}function b(a,b,c,d,e,f){for(var g=0,i=d.length;g<i;g++){var j=d[g];if(j){j=j[a];var k=!1;while(j){if(j.sizcache===c){k=d[j.sizset];break}if(j.nodeType===1){f||(j.sizcache=c,j.sizset=g);if(typeof b!="string"){if(j===b){k=!0;break}}else if(h.filter(b,[j]).length>0){k=j;break}}j=j[a]}d[g]=k}}}var c=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d=0,e=Object.prototype.toString,f=!1,g=!0;[0,0].sort(function(){return g=!1,0});var h=function(a,b,d,f){d=d||[],b=b||document;var g=b;if(b.nodeType!==1&&b.nodeType!==9)return[];if(!a||typeof a!="string")return d;var k=[],l,n,o,q,r=!0,s=h.isXML(b),t=a,u,v,w,x;do{c.exec(""),l=c.exec(t);if(l){t=l[3],k.push(l[1]);if(l[2]){q=l[3];break}}}while(l);if(k.length>1&&j.exec(a))if(k.length===2&&i.relative[k[0]])n=p(k[0]+k[1],b);else{n=i.relative[k[0]]?[b]:h(k.shift(),b);while(k.length)a=k.shift(),i.relative[a]&&(a+=k.shift()),n=p(a,n)}else{!f&&k.length>1&&b.nodeType===9&&!s&&i.match.ID.test(k[0])&&!i.match.ID.test(k[k.length-1])&&(u=h.find(k.shift(),b,s),b=u.expr?h.filter(u.expr,u.set)[0]:u.set[0]);if(b){u=f?{expr:k.pop(),set:m(f)}:h.find(k.pop(),k.length!==1||k[0]!=="~"&&k[0]!=="+"||!b.parentNode?b:b.parentNode,s),n=u.expr?h.filter(u.expr,u.set):u.set,k.length>0?o=m(n):r=!1;while(k.length)v=k.pop(),w=v,i.relative[v]?w=k.pop():v="",w==null&&(w=b),i.relative[v](o,w,s)}else o=k=[]}o||(o=n),o||h.error(v||a);if(e.call(o)==="[object Array]")if(!r)d.push.apply(d,o);else if(b&&b.nodeType===1)for(x=0;o[x]!=null;x++)o[x]&&(o[x]===!0||o[x].nodeType===1&&h.contains(b,o[x]))&&d.push(n[x]);else for(x=0;o[x]!=null;x++)o[x]&&o[x].nodeType===1&&d.push(n[x]);else m(o,d);return q&&(h(q,g,d,f),h.uniqueSort(d)),d};h.uniqueSort=function(a){if(o){f=g,a.sort(o);if(f)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},h.matches=function(a,b){return h(a,null,null,b)},h.find=function(a,b,c){var d;if(!a)return[];for(var e=0,f=i.order.length;e<f;e++){var g=i.order[e],h;if(h=i.leftMatch[g].exec(a)){var j=h[1];h.splice(1,1);if(j.substr(j.length-1)!=="\\"){h[1]=(h[1]||"").replace(/\\/g,""),d=i.find[g](h,b,c);if(d!=null){a=a.replace(i.match[g],"");break}}}}return d||(d=b.getElementsByTagName("*")),{set:d,expr:a}},h.filter=function(a,b,c,d){var e=a,f=[],g=b,j,k,l=b&&b[0]&&h.isXML(b[0]);while(a&&b.length){for(var m in i.filter)if((j=i.leftMatch[m].exec(a))!=null&&j[2]){var n=i.filter[m],o,p,q=j[1];k=!1,j.splice(1,1);if(q.substr(q.length-1)==="\\")continue;g===f&&(f=[]);if(i.preFilter[m]){j=i.preFilter[m](j,g,c,f,d,l);if(!j)k=o=!0;else if(j===!0)continue}if(j)for(var r=0;(p=g[r])!=null;r++)if(p){o=n(p,j,r,g);var s=d^!!o;c&&o!=null?s?k=!0:g[r]=!1:s&&(f.push(p),k=!0)}if(o!==undefined){c||(g=f),a=a.replace(i.match[m],"");if(!k)return[];break}}if(a===e){if(k!=null)break;h.error(a)}e=a}return g},h.error=function(a){throw"Syntax error, unrecognized expression: "+a};var i=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!/\W/.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,i;f<g;f++)if(i=a[f]){while((i=i.previousSibling)&&i.nodeType!==1);a[f]=e||i&&i.nodeName.toLowerCase()===b?i||!1:i===b}e&&h.filter(b,a,!0)},">":function(a,b){var c=typeof b=="string",d,e=0,f=a.length;if(c&&!/\W/.test(b)){b=b.toLowerCase();for(;e<f;e++){d=a[e];if(d){var g=d.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)d=a[e],d&&(a[e]=c?d.parentNode:d.parentNode===b);c&&h.filter(b,a,!0)}},"":function(c,e,f){var g=d++,h=b,i;typeof e=="string"&&!/\W/.test(e)&&(e=e.toLowerCase(),i=e,h=a),h("parentNode",e,g,c,i,f)},"~":function(c,e,f){var g=d++,h=b,i;typeof e=="string"&&!/\W/.test(e)&&(e=e.toLowerCase(),i=e,h=a),h("previousSibling",e,g,c,i,f)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(/\\/g,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(a,b){return a[1].toLowerCase()},CHILD:function(a){if(a[1]==="nth"){var b=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}return a[0]=d++,a},ATTR:function(a,b,c,d,e,f){var g=a[1].replace(/\\/g,"");return!f&&i.attrMap[g]&&(a[1]=i.attrMap[g]),a[2]==="~="&&(a[4]=" "+a[4]+" "),a},PSEUDO:function(a,b,d,e,f){if(a[1]==="not"){if(!((c.exec(a[3])||"").length>1||/^\w/.test(a[3]))){var g=h.filter(a[3],b,d,!0^f);return d||e.push.apply(e,g),!1}a[3]=h(a[3],null,null,b)}else if(i.match.POS.test(a[0])||i.match.CHILD.test(a[0]))return!0;return a},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!h(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===a.type},button:function(a){return"button"===a.type||a.nodeName.toLowerCase()==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=i.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||h.getText([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var j=0,k=g.length;j<k;j++)if(g[j]===a)return!1;return!0}h.error("Syntax error, unrecognized expression: "+e)},CHILD:function(a,b){var c=b[1],d=a;switch(c){case"only":case"first":while(d=d.previousSibling)if(d.nodeType===1)return!1;if(c==="first")return!0;d=a;case"last":while(d=d.nextSibling)if(d.nodeType===1)return!1;return!0;case"nth":var e=b[2],f=b[3];if(e===1&&f===0)return!0;var g=b[0],h=a.parentNode;if(h&&(h.sizcache!==g||!a.nodeIndex)){var i=0;for(d=h.firstChild;d;d=d.nextSibling)d.nodeType===1&&(d.nodeIndex=++i);h.sizcache=g}var j=a.nodeIndex-f;return e===0?j===0:j%e===0&&j/e>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=i.attrHandle[c]?i.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=i.setFilters[e];if(f)return f(a,c,b,d)}}},j=i.match.POS,k=function(a,b){return"\\"+(b-0+1)};for(var l in i.match)i.match[l]=new RegExp(i.match[l].source+/(?![^\[]*\])(?![^\(]*\))/.source),i.leftMatch[l]=new RegExp(/(^(?:.|\r|\n)*?)/.source+i.match[l].source.replace(/\\(\d+)/g,k));var m=function(a,b){return a=Array.prototype.slice.call(a,0),b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(n){m=function(a,b){var c=b||[],d=0;if(e.call(a)==="[object Array]")Array.prototype.push.apply(c,a);else if(typeof a.length=="number")for(var f=a.length;d<f;d++)c.push(a[d]);else for(;a[d];d++)c.push(a[d]);return c}}var o;document.documentElement.compareDocumentPosition?o=function(a,b){if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a==b&&(f=!0),a.compareDocumentPosition?-1:1;var c=a.compareDocumentPosition(b)&4?-1:a===b?0:1;return c===0&&(f=!0),c}:"sourceIndex"in document.documentElement?o=function(a,b){if(!a.sourceIndex||!b.sourceIndex)return a==b&&(f=!0),a.sourceIndex?-1:1;var c=a.sourceIndex-b.sourceIndex;return c===0&&(f=!0),c}:document.createRange&&(o=function(a,b){if(!a.ownerDocument||!b.ownerDocument)return a==b&&(f=!0),a.ownerDocument?-1:1;var c=a.ownerDocument.createRange(),d=b.ownerDocument.createRange();c.setStart(a,0),c.setEnd(a,0),d.setStart(b,0),d.setEnd(b,0);var e=c.compareBoundaryPoints(Range.START_TO_END,d);return e===0&&(f=!0),e}),h.getText=function(a){var b="",c;for(var d=0;a[d];d++)c=a[d],c.nodeType===3||c.nodeType===4?b+=c.nodeValue:c.nodeType!==8&&(b+=h.getText(c.childNodes));return b},function(){var a=document.createElement("div"),b="script"+(new Date).getTime();a.innerHTML="<a name='"+b+"'/>";var c=document.documentElement;c.insertBefore(a,c.firstChild),document.getElementById(b)&&(i.find.ID=function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d?d.id===a[1]||typeof d.getAttributeNode!="undefined"&&d.getAttributeNode("id").nodeValue===a[1]?[d]:undefined:[]}},i.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),c.removeChild(a),c=a=null}(),function(){var a=document.createElement("div");a.appendChild(document.createComment("")),a.getElementsByTagName("*").length>0&&(i.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(i.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),document.querySelectorAll&&function(){var a=h,b=document.createElement("div");b.innerHTML="<p class='TEST'></p>";if(b.querySelectorAll&&b.querySelectorAll(".TEST").length===0)return;h=function(b,c,d,e){c=c||document;if(!e&&c.nodeType===9&&!h.isXML(c))try{return m(c.querySelectorAll(b),d)}catch(f){}return a(b,c,d,e)};for(var c in a)h[c]=a[c];b=null}(),function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!a.getElementsByClassName||a.getElementsByClassName("e").length===0)return;a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;i.order.splice(1,0,"CLASS"),i.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}(),h.contains=document.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(a,b){return a!==b&&(a.contains?a.contains(b):!0)},h.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var p=function(a,b){var c=[],d="",e,f=b.nodeType?[b]:b;while(e=i.match.PSEUDO.exec(a))d+=e[0],a=a.replace(i.match.PSEUDO,"");a=i.relative[a]?a+"*":a;for(var g=0,j=f.length;g<j;g++)h(a,f[g],c);return h.filter(d,c)};window.tinymce.dom.Sizzle=h}(),function(a){var b=a.each,c=a.DOM,d=a.isIE,e=a.isWebKit,f;a.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[],this.events=[]},add:function(e,f,g,h){var i,j=this,k=j.events,l;if(f instanceof Array)return l=[],b(f,function(a){l.push(j.add(e,a,g,h))}),l;if(e&&e.hasOwnProperty&&e instanceof Array)return l=[],b(e,function(a){a=c.get(a),l.push(j.add(a,f,g,h))}),l;e=c.get(e);if(!e)return;return i=function(b){if(j.disabled)return;return b=b||window.event,b&&d&&(b.target||(b.target=b.srcElement),a.extend(b,j._stoppers)),h?g.call(h,b):g(b)},f=="unload"?(a.unloads.unshift({func:i}),i):f=="init"?(j.domLoaded?i():j.inits.push(i),i):(k.push({obj:e,name:f,func:g,cfunc:i,scope:h}),j._add(e,f,i),g)},remove:function(a,d,e){var f=this,g=f.events,h=!1,i;return a&&a.hasOwnProperty&&a instanceof Array?(i=[],b(a,function(a){a=c.get(a),i.push(f.remove(a,d,e))}),i):(a=c.get(a),b(g,function(b,c){if(b.obj==a&&b.name==d&&(!e||b.func==e||b.cfunc==e))return g.splice(c,1),f._remove(a,d,b.cfunc),h=!0,!1}),h)},clear:function(a){var b=this,d=b.events,e,f;if(a){a=c.get(a);for(e=d.length-1;e>=0;e--)f=d[e],f.obj===a&&(b._remove(f.obj,f.name,f.cfunc),f.obj=f.cfunc=null,d.splice(e,1))}},cancel:function(a){return a?(this.stop(a),this.prevent(a)):!1},stop:function(a){return a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,!1},prevent:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,!1},destroy:function(){var a=this;b(a.events,function(b,c){a._remove(b.obj,b.name,b.cfunc),b.obj=b.cfunc=null}),a.events=[],a=null},_add:function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener?a.addEventListener(b,c,!1):a["on"+b]=c},_remove:function(a,b,c){if(a)try{a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener?a.removeEventListener(b,c,!1):a["on"+b]=null}catch(d){}},_pageInit:function(a){var c=this;if(c.domLoaded)return;c.domLoaded=!0,b(c.inits,function(a){a()}),c.inits=[]},_wait:function(a){var b=this,c=a.document;if(a.tinyMCE_GZ&&tinyMCE_GZ.loaded){b.domLoaded=1;return}c.attachEvent?(c.attachEvent("onreadystatechange",function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",arguments.callee),b._pageInit(a))}),c.documentElement.doScroll&&a==a.top&&function(){if(b.domLoaded)return;try{c.documentElement.doScroll("left")}catch(d){setTimeout(arguments.callee,0);return}b._pageInit(a)}()):c.addEventListener&&b._add(a,"DOMContentLoaded",function(){b._pageInit(a)}),b._add(a,"load",function(){b._pageInit(a)})},_stoppers:{preventDefault:function(){this.returnValue=!1},stopPropagation:function(){this.cancelBubble=!0}}}),f=a.dom.Event=new a.dom.EventUtils,f._wait(window),a.addUnload(function(){f.destroy()})}(tinymce),function(a){a.dom.Element=function(b,c){var d=this,e,f;d.settings=c=c||{},d.id=b,d.dom=e=c.dom||a.DOM,a.isIE||(f=e.get(d.id)),a.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(a){d[a]=function(){var c=[b],f;for(f=0;f<arguments.length;f++)c.push(arguments[f]);return c=e[a].apply(e,c),d.update(a),c}}),a.extend(d,{on:function(b,c,e){return a.dom.Event.add(d.id,b,c,e)},getXY:function(){return{x:parseInt(d.getStyle("left")),y:parseInt(d.getStyle("top"))}},getSize:function(){var a=e.get(d.id);return{w:parseInt(d.getStyle("width")||a.clientWidth),h:parseInt(d.getStyle("height")||a.clientHeight)}},moveTo:function(a,b){d.setStyles({left:a,top:b})},moveBy:function(a,b){var c=d.getXY();d.moveTo(c.x+a,c.y+b)},resizeTo:function(a,b){d.setStyles({width:a,height:b})},resizeBy:function(a,b){var c=d.getSize();d.resizeTo(c.w+a,c.h+b)},update:function(b){var f;if(a.isIE6&&c.blocker){b=b||"";if(b.indexOf("get")===0||b.indexOf("has")===0||b.indexOf("is")===0)return;if(b=="remove"){e.remove(d.blocker);return}d.blocker?f=e.get(d.blocker):(d.blocker=e.uniqueId(),f=e.add(c.container||e.getRoot(),"iframe",{id:d.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),e.setStyle(f,"opacity",0)),e.setStyles(f,{left:d.getStyle("left",1),top:d.getStyle("top",1),width:d.getStyle("width",1),height:d.getStyle("height",1),display:d.getStyle("display",1),zIndex:parseInt(d.getStyle("zIndex",1)||0)-1})}}})}}(tinymce),function(a){function b(a){return a.replace(/[\n\r]+/g,"")}var c=a.is,d=a.isIE,e=a.each;a.create("tinymce.dom.Selection",{Selection:function(b,c,d){var f=this;f.dom=b,f.win=c,f.serializer=d,e(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(b){f[b]=new a.util.Dispatcher(f)}),f.win.getSelection||(f.tridentSel=new a.dom.TridentSelection(f)),a.isIE&&b.boxModel&&this._fixIESelection(),a.addUnload(f.destroy,f)},setCursorLocation:function(a,b){var c=this,d=c.dom.createRng();d.setStart(a,b),d.setEnd(a,b),c.setRng(d),c.collapse(!1)},getContent:function(a){var b=this,d=b.getRng(),e=b.dom.create("body"),f=b.getSel(),g,h,i;return a=a||{},g=h="",a.get=!0,a.format=a.format||"html",a.forced_root_block="",b.onBeforeGetContent.dispatch(b,a),a.format=="text"?b.isCollapsed()?"":d.text||(f.toString?f.toString():""):(d.cloneContents?(i=d.cloneContents(),i&&e.appendChild(i)):c(d.item)||c(d.htmlText)?(e.innerHTML="<br>"+(d.item?d.item(0).outerHTML:d.htmlText),e.removeChild(e.firstChild)):e.innerHTML=d.toString(),/^\s/.test(e.innerHTML)&&(g=" "),/\s+$/.test(e.innerHTML)&&(h=" "),a.getInner=!0,a.content=b.isCollapsed()?"":g+b.serializer.serialize(e,a)+h,b.onGetContent.dispatch(b,a),a.content)},setContent:function(a,b){var c=this,d=c.getRng(),e,f=c.win.document,g,h;b=b||{format:"html"},b.set=!0,a=b.content=a,b.no_events||c.onBeforeSetContent.dispatch(c,b),a=b.content;if(d.insertNode){a+='<span id="__caret">_</span>',d.startContainer==f&&d.endContainer==f?f.body.innerHTML=a:(d.deleteContents(),f.body.childNodes.length==0?f.body.innerHTML=a:d.createContextualFragment?d.insertNode(d.createContextualFragment(a)):(g=f.createDocumentFragment(),h=f.createElement("div"),g.appendChild(h),h.outerHTML=a,d.insertNode(g))),e=c.dom.get("__caret"),d=f.createRange(),d.setStartBefore(e),d.setEndBefore(e),c.setRng(d),c.dom.remove("__caret");try{c.setRng(d)}catch(i){}}else d.item&&(f.execCommand("Delete",!1,null),d=c.getRng()),/^\s+/.test(a)?(d.pasteHTML('<span id="__mce_tmp">_</span>'+a),c.dom.remove("__mce_tmp")):d.pasteHTML(a);b.no_events||c.onSetContent.dispatch(c,b)},getStart:function(){var a=this.getRng(),b,c,d,e;if(a.duplicate||a.item){if(a.item)return a.item(0);d=a.duplicate(),d.collapse(1),b=d.parentElement(),c=e=a.parentElement();while(e=e.parentNode)if(e==b){b=c;break}return b}return b=a.startContainer,b.nodeType==1&&b.hasChildNodes()&&(b=b.childNodes[Math.min(b.childNodes.length-1,a.startOffset)]),b&&b.nodeType==3?b.parentNode:b},getEnd:function(){var a=this,b=a.getRng(),c,d;return b.duplicate||b.item?b.item?b.item(0):(b=b.duplicate(),b.collapse(0),c=b.parentElement(),c&&c.nodeName=="BODY"?c.lastChild||c:c):(c=b.endContainer,d=b.endOffset,c.nodeType==1&&c.hasChildNodes()&&(c=c.childNodes[d>0?d-1:d]),c&&c.nodeType==3?c.parentNode:c)},getBookmark:function(a,b){function c(a,b){var c=0;return e(f.select(a),function(a,d){a==b&&(c=d)}),c}var d=this,f=d.dom,g,h,i,j,k,l,m,n="﻿",o;if(a==2){function p(){function a(a,c){var f=a[c?"startContainer":"endContainer"],g=a[c?"startOffset":"endOffset"],h=[],i,j,k=0;if(f.nodeType==3){if(b)for(i=f.previousSibling;i&&i.nodeType==3;i=i.previousSibling)g+=i.nodeValue.length;h.push(g)}else j=f.childNodes,g>=j.length&&j.length&&(k=1,g=Math.max(0,j.length-1)),h.push(d.dom.nodeIndex(j[g],b)+k);for(;f&&f!=e;f=f.parentNode)h.push(d.dom.nodeIndex(f,b));return h}var c=d.getRng(!0),e=f.getRoot(),g={};return g.start=a(c,!0),d.isCollapsed()||(g.end=a(c)),g}return d.tridentSel?d.tridentSel.getBookmark(a):p()}if(a)return{rng:d.getRng()};g=d.getRng(),i=f.uniqueId(),j=tinyMCE.activeEditor.selection.isCollapsed(),o="overflow:hidden;line-height:0px";if(g.duplicate||g.item){if(!!g.item)return l=g.item(0),k=l.nodeName,{name:k,index:c(k,l)};h=g.duplicate();try{g.collapse(),g.pasteHTML('<span data-mce-type="bookmark" id="'+i+'_start" style="'+o+'">'+n+"</span>"),j||(h.collapse(!1),g.moveToElementText(h.parentElement()),g.compareEndPoints("StartToEnd",h)==0&&h.move("character",-1),h.pasteHTML('<span data-mce-type="bookmark" id="'+i+'_end" style="'+o+'">'+n+"</span>"))}catch(q){return null}}else{l=d.getNode(),k=l.nodeName;if(k=="IMG")return{name:k,index:c(k,l)};h=g.cloneRange(),j||(h.collapse(!1),h.insertNode(f.create("span",{"data-mce-type":"bookmark",id:i+"_end",style:o},n))),g.collapse(!0),g.insertNode(f.create("span",{"data-mce-type":"bookmark",id:i+"_start",style:o},n))}return d.moveToBookmark({id:i,keep:1}),{id:i}},moveToBookmark:function(b){var c=this,f=c.dom,g,h,i,j,k,l,m,n;if(b)if(b.start){i=f.createRng(),j=f.getRoot();function o(a){var c=b[a?"start":"end"],d,e,f,g;if(c){f=c[0];for(e=j,d=c.length-1;d>=1;d--){g=e.childNodes;if(c[d]>g.length-1)return;e=g[c[d]]}e.nodeType===3&&(f=Math.min(c[0],e.nodeValue.length)),e.nodeType===1&&(f=Math.min(c[0],e.childNodes.length)),a?i.setStart(e,f):i.setEnd(e,f)}return!0}if(c.tridentSel)return c.tridentSel.moveToBookmark(b);o(!0)&&o()&&c.setRng(i)}else if(b.id){function p(c){var d=f.get(b.id+"_"+c),g,h,i,j,o=b.keep;if(d){g=d.parentNode,c=="start"?(o?(g=d.firstChild,h=1):h=f.nodeIndex(d),k=l=g,m=n=h):(o?(g=d.firstChild,h=1):h=f.nodeIndex(d),l=g,n=h);if(!o){j=d.previousSibling,i=d.nextSibling,e(a.grep(d.childNodes),function(a){a.nodeType==3&&(a.nodeValue=a.nodeValue.replace(/\uFEFF/g,""))});while(d=f.get(b.id+"_"+c))f.remove(d,1);j&&i&&j.nodeType==i.nodeType&&j.nodeType==3&&!a.isOpera&&(h=j.nodeValue.length,j.appendData(i.nodeValue),f.remove(i),c=="start"?(k=l=j,m=n=h):(l=j,n=h))}}}function q(a){return f.isBlock(a)&&!a.innerHTML&&(a.innerHTML=d?" ":'<br data-mce-bogus="1" />'),a}p("start"),p("end"),k&&(i=f.createRng(),i.setStart(q(k),m),i.setEnd(q(l),n),c.setRng(i))}else b.name?c.select(f.select(b.name)[b.index]):b.rng&&c.setRng(b.rng)},select:function(b,c){var d=this,e=d.dom,f=e.createRng(),g;if(b){g=e.nodeIndex(b),f.setStart(b.parentNode,g),f.setEnd(b.parentNode,g+1);if(c){function h(b,c){var d=new a.dom.TreeWalker(b,b);do{if(b.nodeType==3&&a.trim(b.nodeValue).length!=0){c?f.setStart(b,0):f.setEnd(b,b.nodeValue.length);return}if(b.nodeName=="BR"){c?f.setStartBefore(b):f.setEndBefore(b);return}}while(b=c?d.next():d.prev())}h(b,1),h(b)}d.setRng(f)}return b},isCollapsed:function(){var a=this,b=a.getRng(),c=a.getSel();return!b||b.item?!1:b.compareEndPoints?b.compareEndPoints("StartToEnd",b)===0:!c||b.collapsed},collapse:function(a){var b=this,c=b.getRng(),d;c.item&&(d=c.item(0),c=b.win.document.body.createTextRange(),c.moveToElementText(d)),c.collapse(!!a),b.setRng(c)},getSel:function(){var a=this,b=this.win;return b.getSelection?b.getSelection():b.document.selection},getRng:function(b){var c=this,d,e,f,g=c.win.document;if(b&&c.tridentSel)return c.tridentSel.getRangeAt(0);try{if(d=c.getSel())e=d.rangeCount>0?d.getRangeAt(0):d.createRange?d.createRange():g.createRange()}catch(h){}return a.isIE&&e&&e.setStart&&g.selection.createRange().item&&(f=g.selection.createRange().item(0),e=g.createRange(),e.setStartBefore(f),e.setEndAfter(f)),e||(e=g.createRange?g.createRange():g.body.createTextRange()),c.selectedRange&&c.explicitRange&&(e.compareBoundaryPoints(e.START_TO_START,c.selectedRange)===0&&e.compareBoundaryPoints(e.END_TO_END,c.selectedRange)===0?e=c.explicitRange:(c.selectedRange=null,c.explicitRange=null)),e},setRng:function(a){var b,c=this;if(!c.tridentSel){b=c.getSel();if(b){c.explicitRange=a;try{b.removeAllRanges()}catch(d){}b.addRange(a),c.selectedRange=b.getRangeAt(0)}}else{if(a.cloneRange){c.tridentSel.addRange(a);return}try{a.select()}catch(d){}}},setNode:function(a){var b=this;return b.setContent(b.dom.getOuterHTML(a)),a},getNode:function(){var a=this,b=a.getRng(),c=a.getSel(),d,e=b.startContainer,f=b.endContainer;if(!b)return a.dom.getRoot();if(b.setStart){d=b.commonAncestorContainer;if(!b.collapsed){b.startContainer==b.endContainer&&b.endOffset-b.startOffset<2&&b.startContainer.hasChildNodes()&&(d=b.startContainer.childNodes[b.startOffset]);if(e.nodeType===3&&f.nodeType===3){function g(a,b){var c=a;while(a&&a.nodeType===3&&a.length===0)a=b?a.nextSibling:a.previousSibling;return a||c}e.length===b.startOffset?e=g(e.nextSibling,!0):e=e.parentNode,b.endOffset===0?f=g(f.previousSibling,!1):f=f.parentNode;if(e&&e===f)return e}}return d&&d.nodeType==3?d.parentNode:d}return b.item?b.item(0):b.parentElement()},getSelectedBlocks:function(b,c){var d=this,e=d.dom,f,g,h,i=[];f=e.getParent(b||d.getStart(),e.isBlock),g=e.getParent(c||d.getEnd(),e.isBlock),f&&i.push(f);if(f&&g&&f!=g){h=f;var j=new a.dom.TreeWalker(f,e.getRoot());while((h=j.next())&&h!=g)e.isBlock(h)&&i.push(h)}return g&&f!=g&&i.push(g),i},normalize:function(){function b(b){var f,g,h,i=c.dom,j=i.getRoot(),k;f=d[(b?"start":"end")+"Container"],g=d[(b?"start":"end")+"Offset"],f.nodeType===9&&(f=f.body,g=0);if(f===j&&f.hasChildNodes()){f=f.childNodes[Math.min(!b&&g>0?g-1:g,f.childNodes.length-1)],g=0;if(f.hasChildNodes()){k=f,h=new a.dom.TreeWalker(f,j);do{if(k.nodeType===3){g=b?0:k.nodeValue.length-1,f=k;break}if(k.nodeName==="BR"){g=i.nodeIndex(k),f=k.parentNode;break}}while(k=b?h.next():h.prev());e=!0}}e&&d["set"+(b?"Start":"End")](f,g)}var c=this,d,e;if(a.isIE)return;d=c.getRng(),b(!0),d.collapsed&&b(),e&&c.setRng(d)},destroy:function(b){var c=this;c.win=null,b||a.removeUnload(c.destroy)},_fixIESelection:function(){function a(a,b){var c=f.createTextRange();try{c.moveToPoint(a,b)}catch(d){c=null}return c}function b(b){var d;b.button?(d=a(b.x,b.y),d&&(d.compareEndPoints("StartToStart",h)>0?d.setEndPoint("StartToStart",h):d.setEndPoint("EndToEnd",h),d.select())):c()}function c(){var a=e.selection.createRange();h&&!a.item&&a.compareEndPoints("StartToEnd",a)===0&&h.select(),d.unbind(e,"mouseup",c),d.unbind(e,"mousemove",b),h=g=0}var d=this.dom,e=d.doc,f=e.body,g,h,i;e.documentElement.unselectable=!0,d.bind(e,["mousedown","contextmenu"],function(f){if(f.target.nodeName==="HTML"){g&&c(),i=e.documentElement;if(i.scrollHeight>i.clientHeight)return;g=1,h=a(f.x,f.y),h&&(d.bind(e,"mouseup",c),d.bind(e,"mousemove",b),d.win.focus(),h.select())}})}})}(tinymce),function(a){a.dom.Serializer=function(b,c,d){var e,f,g=a.isIE,h=a.each,i;return b.apply_source_formatting||(b.indent=!1),b.remove_trailing_brs=!0,c=c||a.DOM,d=d||new a.html.Schema(b),b.entity_encoding=b.entity_encoding||"named",e=new a.util.Dispatcher(self),f=new a.util.Dispatcher(self),i=new a.html.DomParser(b,d),i.addAttributeFilter("src,href,style",function(a,d){var e=a.length,f,g,h="data-mce-"+d,i=b.url_converter,j=b.url_converter_scope,k;while(e--)f=a[e],g=f.attributes.map[h],g!==k?(f.attr(d,g.length>0?g:null),f.attr(h,null)):(g=f.attributes.map[d],d==="style"?g=c.serializeStyle(c.parseStyle(g),f.name):i&&(g=i.call(j,g,d,f.name)),f.attr(d,g.length>0?g:null))}),i.addAttributeFilter("class",function(a,b){var c=a.length,d,e;while(c--)d=a[c],e=d.attr("class").replace(/\s*mce(Item\w+|Selected)\s*/g,""),d.attr("class",e.length>0?e:null)}),i.addAttributeFilter("data-mce-type",function(a,b,c){var d=a.length,e;while(d--)e=a[d],e.attributes.map["data-mce-type"]==="bookmark"&&!c.cleanup&&e.remove()}),i.addNodeFilter("script,style",function(a,b){function c(a){return a.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,"").replace(/\s*(\/\/\s*\]\]>|\/\/\s*-->|\]\]>|-->|\]\]-->)\s*$/g,"")}var d=a.length,e,f;while(d--)e=a[d],f=e.firstChild?e.firstChild.value:"",b==="script"?(e.attr("type",(e.attr("type")||"text/javascript").replace(/^mce\-/,"")),f.length>0&&(e.firstChild.value="// <![CDATA[\n"+c(f)+"\n// ]]>")):f.length>0&&(e.firstChild.value="<!--\n"+c(f)+"\n-->")}),i.addNodeFilter("#comment",function(a,b){var c=a.length,d;while(c--)d=a[c],d.value.indexOf("[CDATA[")===0?(d.name="#cdata",d.type=4,d.value=d.value.replace(/^\[CDATA\[|\]\]$/g,"")):d.value.indexOf("mce:protected ")===0&&(d.name="#text",d.type=3,d.raw=!0,d.value=unescape(d.value).substr(14))}),i.addNodeFilter("xml:namespace,input",function(a,b){var c=a.length,d;while(c--)d=a[c],d.type===7?d.remove():d.type===1&&b==="input"&&!("type"in d.attributes.map)&&d.attr("type","text")}),b.fix_list_elements&&i.addNodeFilter("ul,ol",function(a,b){var c=a.length,d,e;while(c--)d=a[c],e=d.parent,(e.name==="ul"||e.name==="ol")&&d.prev&&d.prev.name==="li"&&d.prev.append(d)}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(a,b){var c=a.length;while(c--)a[c].attr(b,null)}),{schema:d,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,onPreProcess:e,onPostProcess:f,serialize:function(j,k){var l,m,n,o,p;return g&&c.select("script,style,select,map").length>0?(p=j.innerHTML,j=j.cloneNode(!1),c.setHTML(j,p)):j=j.cloneNode(!0),l=j.ownerDocument.implementation,l.createHTMLDocument&&(m=l.createHTMLDocument(""),h(j.nodeName=="BODY"?j.childNodes:[j],function(a){m.body.appendChild(m.importNode(a,!0))}),j.nodeName!="BODY"?j=m.body.firstChild:j=m.body,n=c.doc,c.doc=m),k=k||{},k.format=k.format||"html",k.no_events||(k.node=j,e.dispatch(self,k)),o=new a.html.Serializer(b,d),k.content=o.serialize(i.parse(k.getInner?j.innerHTML:a.trim(c.getOuterHTML(j),k),k)),k.cleanup||(k.content=k.content.replace(/\uFEFF|\u200B/g,"")),k.no_events||f.dispatch(self,k),n&&(c.doc=n),k.node=null,k.content},addRules:function(a){d.addValidElements(a)},setRules:function(a){d.setValidElements(a)}}}}(tinymce),function(a){a.dom.ScriptLoader=function(b){function c(b,c){function d(){g.remove(k),h&&(h.onreadystatechange=h.onload=h=null),c()}function e(){typeof console!="undefined"&&console.log&&console.log("Failed to load: "+b)}var f=this,g=a.DOM,h,i,j,k;k=g.uniqueId();if(a.isIE6){i=new a.util.URI(b),j=location;if(i.host==j.hostname&&i.port==j.port&&i.protocol+":"==j.protocol&&i.protocol.toLowerCase()!="file"){a.util.XHR.send({url:a._addVer(i.getURI()),success:function(a){var b=g.create("script",{type:"text/javascript"});b.text=a,document.getElementsByTagName("head"
)[0].appendChild(b),g.remove(b),d()},error:e});return}}h=g.create("script",{id:k,type:"text/javascript",src:a._addVer(b)}),a.isIE||(h.onload=d),h.onerror=e,a.isOpera||(h.onreadystatechange=function(){var a=h.readyState;(a=="complete"||a=="loaded")&&d()}),(document.getElementsByTagName("head")[0]||document.body).appendChild(h)}var d=0,e=1,f=2,g={},h=[],i={},j=[],k=0,l;this.isDone=function(a){return g[a]==f},this.markDone=function(a){g[a]=f},this.add=this.load=function(a,b,c){var e,f=g[a];f==l&&(h.push(a),g[a]=d),b&&(i[a]||(i[a]=[]),i[a].push({func:b,scope:c||this}))},this.loadQueue=function(a,b){this.loadScripts(h,a,b)},this.loadScripts=function(b,d,h){function m(b){a.each(i[b],function(a){a.func.call(a.scope)}),i[b]=l}var n;j.push({func:d,scope:h||this}),n=function(){var d=a.grep(b);b.length=0,a.each(d,function(a){if(g[a]==f){m(a);return}g[a]!=e&&(g[a]=e,k++,c(a,function(){g[a]=f,k--,m(a),n()}))}),k||(a.each(j,function(a){a.func.call(a.scope)}),j.length=0)},n()}},a.ScriptLoader=new a.dom.ScriptLoader}(tinymce),tinymce.dom.TreeWalker=function(a,b){function c(a,c,d,e){var f,g;if(a){if(!e&&a[c])return a[c];if(a!=b){f=a[d];if(f)return f;for(g=a.parentNode;g&&g!=b;g=g.parentNode){f=g[d];if(f)return f}}}}var d=a;this.current=function(){return d},this.next=function(a){return d=c(d,"firstChild","nextSibling",a)},this.prev=function(a){return d=c(d,"lastChild","previousSibling",a)}},function(a){a.dom.RangeUtils=function(b){var c="﻿";this.walk=function(c,d){function e(a){var b;return b=a[0],b.nodeType===3&&b===i&&j>=b.nodeValue.length&&a.splice(0,1),b=a[a.length-1],l===0&&a.length>0&&b===k&&b.nodeType===3&&a.splice(a.length-1,1),a}function f(a,b,c){var d=[];for(;a&&a!=c;a=a[b])d.push(a);return d}function g(a,b){do{if(a.parentNode==b)return a;a=a.parentNode}while(a)}function h(a,b,c){var g=c?"nextSibling":"previousSibling";for(p=a,q=p.parentNode;p&&p!=b;p=q)q=p.parentNode,r=f(p==a?p:p[g],g),r.length&&(c||r.reverse(),d(e(r)))}var i=c.startContainer,j=c.startOffset,k=c.endContainer,l=c.endOffset,m,n,o,p,q,r,s;s=b.select("td.mceSelected,th.mceSelected");if(s.length>0){a.each(s,function(a){d([a])});return}i.nodeType==1&&i.hasChildNodes()&&(i=i.childNodes[j]),k.nodeType==1&&k.hasChildNodes()&&(k=k.childNodes[Math.min(l-1,k.childNodes.length-1)]);if(i==k)return d(e([i]));m=b.findCommonAncestor(i,k);for(p=i;p;p=p.parentNode){if(p===k)return h(i,m,!0);if(p===m)break}for(p=k;p;p=p.parentNode){if(p===i)return h(k,m);if(p===m)break}n=g(i,m)||i,o=g(k,m)||k,h(i,n,!0),r=f(n==i?n:n.nextSibling,"nextSibling",o==k?o.nextSibling:o),r.length&&d(e(r)),h(k,o)},this.split=function(a){function b(a,b){return a.splitText(b)}var c=a.startContainer,d=a.startOffset,e=a.endContainer,f=a.endOffset;return c==e&&c.nodeType==3?d>0&&d<c.nodeValue.length&&(e=b(c,d),c=e.previousSibling,f>d?(f-=d,c=e=b(e,f).previousSibling,f=e.nodeValue.length,d=0):f=0):(c.nodeType==3&&d>0&&d<c.nodeValue.length&&(c=b(c,d),d=0),e.nodeType==3&&f>0&&f<e.nodeValue.length&&(e=b(e,f).previousSibling,f=e.nodeValue.length)),{startContainer:c,startOffset:d,endContainer:e,endOffset:f}}},a.dom.RangeUtils.compareRanges=function(a,b){if(a&&b){if(!a.item&&!a.duplicate)return a.startContainer==b.startContainer&&a.startOffset==b.startOffset;if(a.item&&b.item&&a.item(0)===b.item(0))return!0;if(a.isEqual&&b.isEqual&&b.isEqual(a))return!0}return!1}}(tinymce),function(a){var b=a.dom.Event,c=a.each;a.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(d,e){var f=this,g=d.root,h=d.items,i=d.enableUpDown,j=d.enableLeftRight||!d.enableUpDown,k=d.excludeFromTabOrder,l,m,n,o,p;e=e||a.DOM,l=function(a){p=a.target.id},m=function(a){e.setAttrib(a.target.id,"tabindex","-1")},o=function(a){var b=e.get(p);e.setAttrib(b,"tabindex","0"),b.focus()},f.focus=function(){e.get(p).focus()},f.destroy=function(){c(h,function(a){e.unbind(e.get(a.id),"focus",l),e.unbind(e.get(a.id),"blur",m)}),e.unbind(e.get(g),"focus",o),e.unbind(e.get(g),"keydown",n),h=e=g=f.focus=l=m=n=o=null,f.destroy=function(){}},f.moveFocus=function(a,g){var i=-1,j=f.controls,k;if(!p)return;c(h,function(a,b){if(a.id===p)return i=b,!1}),i+=a,i<0?i=h.length-1:i>=h.length&&(i=0),k=h[i],e.setAttrib(p,"tabindex","-1"),e.setAttrib(k.id,"tabindex","0"),e.get(k.id).focus(),d.actOnFocus&&d.onAction(k.id),g&&b.cancel(g)},n=function(a){var c=37,e=39,g=38,h=40,k=27,l=14,m=13,n=32;switch(a.keyCode){case c:j&&f.moveFocus(-1);break;case e:j&&f.moveFocus(1);break;case g:i&&f.moveFocus(-1);break;case h:i&&f.moveFocus(1);break;case k:d.onCancel&&(d.onCancel(),b.cancel(a));break;case l:case m:case n:d.onAction&&(d.onAction(p),b.cancel(a))}},c(h,function(a,b){var c;a.id||(a.id=e.uniqueId("_mce_item_")),k?(e.bind(a.id,"blur",m),c="-1"):c=b===0?"0":"-1",e.setAttrib(a.id,"tabindex",c),e.bind(e.get(a.id),"focus",l)}),h[0]&&(p=h[0].id),e.setAttrib(g,"tabindex","-1"),e.bind(e.get(g),"focus",o),e.bind(e.get(g),"keydown",n)}})}(tinymce),function(a){var b=a.DOM,c=a.is;a.create("tinymce.ui.Control",{Control:function(b,c,d){this.id=b,this.settings=c=c||{},this.rendered=!1,this.onRender=new a.util.Dispatcher(this),this.classPrefix="",this.scope=c.scope||this,this.disabled=0,this.active=0,this.editor=d},setAriaProperty:function(a,c){var d=b.get(this.id+"_aria")||b.get(this.id);d&&b.setAttrib(d,"aria-"+a,!!c)},focus:function(){b.get(this.id).focus()},setDisabled:function(a){a!=this.disabled&&(this.setAriaProperty("disabled",a),this.setState("Disabled",a),this.setState("Enabled",!a),this.disabled=a)},isDisabled:function(){return this.disabled},setActive:function(a){a!=this.active&&(this.setState("Active",a),this.active=a,this.setAriaProperty("pressed",a))},isActive:function(){return this.active},setState:function(a,c){var d=b.get(this.id);a=this.classPrefix+a,c?b.addClass(d,a):b.removeClass(d,a)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(a){b.setHTML(a,this.renderHTML())},postRender:function(){var a=this,b;c(a.disabled)&&(b=a.disabled,a.disabled=-1,a.setDisabled(b)),c(a.active)&&(b=a.active,a.active=-1,a.setActive(b))},remove:function(){b.remove(this.id),this.destroy()},destroy:function(){a.dom.Event.clear(this.id)}})}(tinymce),tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(a,b,c){this.parent(a,b,c),this.controls=[],this.lookup={}},add:function(a){return this.lookup[a.id]=a,this.controls.push(a),a},get:function(a){return this.lookup[a]}}),tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(a,b){this.parent(a,b),this.classPrefix="mceSeparator",this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}}),function(a){var b=a.is,c=a.DOM,d=a.each,e=a.walk;a.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(a,b){this.parent(a,b),this.classPrefix="mceMenuItem"},setSelected:function(a){this.setState("Selected",a),this.setAriaProperty("checked",!!a),this.selected=a},isSelected:function(){return this.selected},postRender:function(){var a=this;a.parent(),b(a.selected)&&a.setSelected(a.selected)}})}(tinymce),function(a){var b=a.is,c=a.DOM,d=a.each,e=a.walk;a.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(b,c){var d=this;d.parent(b,c),d.items={},d.collapsed=!1,d.menuCount=0,d.onAddItem=new a.util.Dispatcher(this)},expand:function(a){var b=this;a&&e(b,function(a){a.expand&&a.expand()},"items",b),b.collapsed=!1},collapse:function(a){var b=this;a&&e(b,function(a){a.collapse&&a.collapse()},"items",b),b.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(b){return b.settings||(b=new a.ui.MenuItem(b.id||c.uniqueId(),b)),this.onAddItem.dispatch(this,b),this.items[b.id]=b},addSeparator:function(){return this.add({separator:!0})},addMenu:function(a){return a.collapse||(a=this.createMenu(a)),this.menuCount++,this.add(a)},hasMenus:function(){return this.menuCount!==0},remove:function(a){delete this.items[a.id]},removeAll:function(){var a=this;e(a,function(a){a.removeAll?a.removeAll():a.remove(),a.destroy()},"items",a),a.items={}},createMenu:function(b){var d=new a.ui.Menu(b.id||c.uniqueId(),b);return d.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),d}})}(tinymce),function(a){var b=a.is,c=a.DOM,d=a.each,e=a.dom.Event,f=a.dom.Element;a.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(d,e){e=e||{},e.container=e.container||c.doc.body,e.offset_x=e.offset_x||0,e.offset_y=e.offset_y||0,e.vp_offset_x=e.vp_offset_x||0,e.vp_offset_y=e.vp_offset_y||0,b(e.icons)&&!e.icons&&(e["class"]+=" mceNoIcons"),this.parent(d,e),this.onShowMenu=new a.util.Dispatcher(this),this.onHideMenu=new a.util.Dispatcher(this),this.classPrefix="mceMenu"},createMenu:function(b){var d=this,e=d.settings,f;return b.container=b.container||e.container,b.parent=d,b.constrain=b.constrain||e.constrain,b["class"]=b["class"]||e["class"],b.vp_offset_x=b.vp_offset_x||e.vp_offset_x,b.vp_offset_y=b.vp_offset_y||e.vp_offset_y,b.keyboard_focus=e.keyboard_focus,f=new a.ui.DropMenu(b.id||c.uniqueId(),b),f.onAddItem.add(d.onAddItem.dispatch,d.onAddItem),f},focus:function(){var a=this;a.keyboardNav&&a.keyboardNav.focus()},update:function(){var a=this,b=a.settings,d=c.get("menu_"+a.id+"_tbl"),e=c.get("menu_"+a.id+"_co"),f,g;f=b.max_width?Math.min(d.clientWidth,b.max_width):d.clientWidth,g=b.max_height?Math.min(d.clientHeight,b.max_height):d.clientHeight,c.boxModel?a.element.setStyles({width:f,height:g}):a.element.setStyles({width:f+2,height:g+2}),b.max_width&&c.setStyle(e,"width",f),b.max_height&&(c.setStyle(e,"height",g),d.clientHeight<b.max_height&&c.setStyle(e,"overflow","hidden"))},showMenu:function(b,g,h){var i=this,j=i.settings,k,l=c.getViewPort(),m,n,o,p,q=2,r,s,t=i.classPrefix;i.collapse(1);if(i.isMenuVisible)return;i.rendered?k=c.get("menu_"+i.id):(k=c.add(i.settings.container,i.renderNode()),d(i.items,function(a){a.postRender()}),i.element=new f("menu_"+i.id,{blocker:1,container:j.container})),a.isOpera||c.setStyles(k,{left:-65535,top:-65535}),c.show(k),i.update(),b+=j.offset_x||0,g+=j.offset_y||0,l.w-=4,l.h-=4,j.constrain&&(m=k.clientWidth-q,n=k.clientHeight-q,o=l.x+l.w,p=l.y+l.h,b+j.vp_offset_x+m>o&&(b=h?h-m:Math.max(0,o-j.vp_offset_x-m)),g+j.vp_offset_y+n>p&&(g=Math.max(0,p-j.vp_offset_y-n))),c.setStyles(k,{left:b,top:g}),i.element.update(),i.isMenuVisible=1,i.mouseClickFunc=e.add(k,"click",function(a){var b;a=a.target;if(a&&(a=c.getParent(a,"tr"))&&!c.hasClass(a,t+"ItemSub")){b=i.items[a.id];if(b.isDisabled())return;r=i;while(r)r.hideMenu&&r.hideMenu(),r=r.settings.parent;return b.settings.onclick&&b.settings.onclick(a),e.cancel(a)}}),i.hasMenus()&&(i.mouseOverFunc=e.add(k,"mouseover",function(a){var b,d,e;a=a.target;if(a&&(a=c.getParent(a,"tr"))){b=i.items[a.id],i.lastMenu&&i.lastMenu.collapse(1);if(b.isDisabled())return;a&&c.hasClass(a,t+"ItemSub")&&(d=c.getRect(a),b.showMenu(d.x+d.w-q,d.y-q,d.x),i.lastMenu=b,c.addClass(c.get(b.id).firstChild,t+"ItemActive"))}})),e.add(k,"keydown",i._keyHandler,i),i.onShowMenu.dispatch(i),j.keyboard_focus&&i._setupKeyboardNav()},hideMenu:function(a){var b=this,d=c.get("menu_"+b.id),f;if(!b.isMenuVisible)return;b.keyboardNav&&b.keyboardNav.destroy(),e.remove(d,"mouseover",b.mouseOverFunc),e.remove(d,"click",b.mouseClickFunc),e.remove(d,"keydown",b._keyHandler),c.hide(d),b.isMenuVisible=0,a||b.collapse(1),b.element&&b.element.hide(),(f=c.get(b.id))&&c.removeClass(f.firstChild,b.classPrefix+"ItemActive"),b.onHideMenu.dispatch(b)},add:function(a){var b=this,d;return a=b.parent(a),b.isRendered&&(d=c.get("menu_"+b.id))&&b._add(c.select("tbody",d)[0],a),a},collapse:function(a){this.parent(a),this.hideMenu(1)},remove:function(a){return c.remove(a.id),this.destroy(),this.parent(a)},destroy:function(){var a=this,b=c.get("menu_"+a.id);a.keyboardNav&&a.keyboardNav.destroy(),e.remove(b,"mouseover",a.mouseOverFunc),e.remove(c.select("a",b),"focus",a.mouseOverFunc),e.remove(b,"click",a.mouseClickFunc),e.remove(b,"keydown",a._keyHandler),a.element&&a.element.remove(),c.remove(b)},renderNode:function(){var a=this,b=a.settings,e,g,h,i;return i=c.create("div",{role:"listbox",id:"menu_"+a.id,"class":b["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"}),a.settings.parent&&c.setAttrib(i,"aria-parent","menu_"+a.settings.parent.id),h=c.add(i,"div",{role:"presentation",id:"menu_"+a.id+"_co","class":a.classPrefix+(b["class"]?" "+b["class"]:"")}),a.element=new f("menu_"+a.id,{blocker:1,container:b.container}),b.menu_line&&c.add(h,"span",{"class":a.classPrefix+"Line"}),e=c.add(h,"table",{role:"presentation",id:"menu_"+a.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),g=c.add(e,"tbody"),d(a.items,function(b){a._add(g,b)}),a.rendered=!0,i},_setupKeyboardNav:function(){var b,d,e=this;b=c.select("#menu_"+e.id)[0],d=c.select("a[role=option]","menu_"+e.id),d.splice(0,0,b),e.keyboardNav=new a.ui.KeyboardNavigation({root:"menu_"+e.id,items:d,onCancel:function(){e.hideMenu()},enableUpDown:!0}),b.focus()},_keyHandler:function(a){var b=this,c;switch(a.keyCode){case 37:b.settings.parent&&(b.hideMenu(),b.settings.parent.focus(),e.cancel(a));break;case 39:b.mouseOverFunc&&b.mouseOverFunc(a)}},_add:function(a,b){var d,e=b.settings,f,g,h,i=this.classPrefix,j;if(e.separator){g=c.add(a,"tr",{id:b.id,"class":i+"ItemSeparator"}),c.add(g,"td",{"class":i+"ItemSeparator"}),(d=g.previousSibling)&&c.addClass(d,"mceLast");return}d=g=c.add(a,"tr",{id:b.id,"class":i+"Item "+i+"ItemEnabled"}),d=h=c.add(d,e.titleItem?"th":"td"),d=f=c.add(d,"a",{id:b.id+"_aria",role:e.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),e.parent&&(c.setAttrib(f,"aria-haspopup","true"),c.setAttrib(f,"aria-owns","menu_"+b.id)),c.addClass(h,e["class"]),j=c.add(d,"span",{"class":"mceIcon"+(e.icon?" mce_"+e.icon:"")}),e.icon_src&&c.add(j,"img",{src:e.icon_src}),d=c.add(d,e.element||"span",{"class":"mceText",title:b.settings.title},b.settings.title),b.settings.style&&c.setAttrib(d,"style",b.settings.style),a.childNodes.length==1&&c.addClass(g,"mceFirst"),(d=g.previousSibling)&&c.hasClass(d,i+"ItemSeparator")&&c.addClass(g,"mceFirst"),b.collapse&&c.addClass(g,i+"ItemSub"),(d=g.previousSibling)&&c.removeClass(d,"mceLast"),c.addClass(g,"mceLast")}})}(tinymce),function(a){var b=a.DOM;a.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(a,b,c){this.parent(a,b,c),this.classPrefix="mceButton"},renderHTML:function(){var a=this.classPrefix,c=this.settings,d,e;return e=b.encode(c.label||""),d='<a role="button" id="'+this.id+'" href="javascript:;" class="'+a+" "+a+"Enabled "+c["class"]+(e?" "+a+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+b.encode(c.title)+'">',c.image&&(!this.editor||!this.editor.forcedHighContrastMode)?d+='<img class="mceIcon" src="'+c.image+'" alt="'+b.encode(c.title)+'" />'+e:d+='<span class="mceIcon '+c["class"]+'"></span>'+(e?'<span class="'+a+'Label">'+e+"</span>":""),d+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+c.title+"</span>",d+="</a>",d},postRender:function(){var b=this,c=b.settings;a.dom.Event.add(b.id,"click",function(a){if(!b.isDisabled())return c.onclick.call(c.scope,a)})}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each,e=a.util.Dispatcher;a.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(b,c,d){var f=this;f.parent(b,c,d),f.items=[],f.onChange=new e(f),f.onPostRender=new e(f),f.onAdd=new e(f),f.onRenderMenu=new a.util.Dispatcher(this),f.classPrefix="mceListBox"},select:function(a){var b=this,c,e;if(a==undefined)return b.selectByIndex(-1);a&&a.call?e=a:e=function(b){return b==a},a!=b.selectedValue&&(d(b.items,function(a,d){if(e(a.value))return c=1,b.selectByIndex(d),!1}),c||b.selectByIndex(-1))},selectByIndex:function(a){var c=this,d,e,f;a!=c.selectedIndex&&(d=b.get(c.id+"_text"),f=b.get(c.id+"_voiceDesc"),e=c.items[a],e?(c.selectedValue=e.value,c.selectedIndex=a,b.setHTML(d,b.encode(e.title)),b.setHTML(f,c.settings.title+" - "+e.title),b.removeClass(d,"mceTitle"),b.setAttrib(c.id,"aria-valuenow",e.title)):(b.setHTML(d,b.encode(c.settings.title)),b.setHTML(f,b.encode(c.settings.title)),b.addClass(d,"mceTitle"),c.selectedValue=c.selectedIndex=null,b.setAttrib(c.id,"aria-valuenow",c.settings.title)),d=0)},add:function(b,c,d){var e=this;d=d||{},d=a.extend(d,{title:b,value:c}),e.items.push(d),e.onAdd.dispatch(e,d)},getLength:function(){return this.items.length},renderHTML:function(){var a="",c=this,d=c.settings,e=c.classPrefix;return a='<span role="listbox" aria-haspopup="true" aria-labelledby="'+c.id+'_voiceDesc" aria-describedby="'+c.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+c.id+'" cellpadding="0" cellspacing="0" class="'+e+" "+e+"Enabled"+(d["class"]?" "+d["class"]:"")+'"><tbody><tr>',a+="<td>"+b.createHTML("span",{id:c.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},c.settings.title),a+=b.createHTML("a",{id:c.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},b.encode(c.settings.title))+"</td>",a+="<td>"+b.createHTML("a",{id:c.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span></span>')+"</td>",a+="</tr></tbody></table></span>",a},showMenu:function(){var e=this,f,g=b.get(this.id),h;if(e.isDisabled()||e.items.length==0)return;if(e.menu&&e.menu.isMenuVisible)return e.hideMenu();e.isMenuRendered||(e.renderMenu(),e.isMenuRendered=!0),f=b.getPos(g),h=e.menu,h.settings.offset_x=f.x,h.settings.offset_y=f.y,h.settings.keyboard_focus=!a.isOpera,e.oldID&&h.items[e.oldID].setSelected(0),d(e.items,function(a){a.value===e.selectedValue&&(h.items[a.id].setSelected(1),e.oldID=a.id)}),h.showMenu(0,g.clientHeight),c.add(b.doc,"mousedown",e.hideMenu,e),b.addClass(e.id,e.classPrefix+"Selected")},hideMenu:function(a){var d=this;if(d.menu&&d.menu.isMenuVisible){b.removeClass(d.id,d.classPrefix+"Selected");if(!(!a||a.type!="mousedown"||a.target.id!=d.id+"_text"&&a.target.id!=d.id+"_open"))return;if(!a||!b.getParent(a.target,".mceMenu"))b.removeClass(d.id,d.classPrefix+"Selected"),c.remove(b.doc,"mousedown",d.hideMenu,d),d.menu.hideMenu()}},renderMenu:function(){var a=this,c;c=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":a.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150}),c.onHideMenu.add(function(){a.hideMenu(),a.focus()}),c.add({title:a.settings.title,"class":"mceMenuItemTitle",onclick:function(){a.settings.onselect("")!==!1&&a.select("")}}),d(a.items,function(d){d.value===undefined?c.add({title:d.title,role:"option","class":"mceMenuItemTitle",onclick:function(){a.settings.onselect("")!==!1&&a.select("")}}):(d.id=b.uniqueId(),d.role="option",d.onclick=function(){a.settings.onselect(d.value)!==!1&&a.select(d.value)},c.add(d))}),a.onRenderMenu.dispatch(a,c),a.menu=c},postRender:function(){var d=this,e=d.classPrefix;c.add(d.id,"click",d.showMenu,d),c.add(d.id,"keydown",function(a){a.keyCode==32&&(d.showMenu(a),c.cancel(a))}),c.add(d.id,"focus",function(){d._focused||(d.keyDownHandler=c.add(d.id,"keydown",function(a){a.keyCode==40&&(d.showMenu(),c.cancel(a))}),d.keyPressHandler=c.add(d.id,"keypress",function(a){var b;a.keyCode==13&&(b=d.selectedValue,d.selectedValue=null,c.cancel(a),d.settings.onselect(b))})),d._focused=1}),c.add(d.id,"blur",function(){c.remove(d.id,"keydown",d.keyDownHandler),c.remove(d.id,"keypress",d.keyPressHandler),d._focused=0});if(a.isIE6||!b.boxModel)c.add(d.id,"mouseover",function(){b.hasClass(d.id,e+"Disabled")||b.addClass(d.id,e+"Hover")}),c.add(d.id,"mouseout",function(){b.hasClass(d.id,e+"Disabled")||b.removeClass(d.id,e+"Hover")});d.onPostRender.dispatch(d,b.get(d.id))},destroy:function(){this.parent(),c.clear(this.id+"_text"),c.clear(this.id+"_open")}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each,e=a.util.Dispatcher;a.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(a,b){this.parent(a,b),this.classPrefix="mceNativeListBox"},setDisabled:function(a){b.get(this.id).disabled=a,this.setAriaProperty("disabled",a)},isDisabled:function(){return b.get(this.id).disabled},select:function(a){var b=this,c,e;if(a==undefined)return b.selectByIndex(-1);a&&a.call?e=a:e=function(b){return b==a},a!=b.selectedValue&&(d(b.items,function(a,d){if(e(a.value))return c=1,b.selectByIndex(d),!1}),c||b.selectByIndex(-1))},selectByIndex:function(a){b.get(this.id).selectedIndex=a+1,this.selectedValue=this.items[a]?this.items[a].value:null},add:function(a,c,d){var e,f=this;d=d||{},d.value=c,f.isRendered()&&b.add(b.get(this.id),"option",d,a),e={title:a,value:c,attribs:d},f.items.push(e),f.onAdd.dispatch(f,e)},getLength:function(){return this.items.length},renderHTML:function(){var a,c=this;return a=b.createHTML("option",{value:""},"-- "+c.settings.title+" --"),d(c.items,function(c){a+=b.createHTML("option",{value:c.value},c.title)}),a=b.createHTML("select",{id:c.id,"class":"mceNativeListBox","aria-labelledby":c.id+"_aria"},a),a+=b.createHTML("span",{id:c.id+"_aria",style:"display: none"},c.settings.title),a},postRender:function(){function d(a){var b=e.items[a.target.selectedIndex-1];b&&(b=b.value)&&(e.onChange.dispatch(e,b),e.settings.onselect&&e.settings.onselect(b))}var e=this,f,g=!0;e.rendered=!0,c.add(e.id,"change",d),c.add(e.id,"keydown",function(b){var h;c.remove(e.id,"change",f),g=!1,h=c.add(e.id,"blur",function(){if(g)return;g=!0,c.add(e.id,"change",d),c.remove(e.id,"blur",h)});if(!(!a.isWebKit||b.keyCode!=37&&b.keyCode!=39))return c.prevent(b);if(b.keyCode==13||b.keyCode==32)return d(b),c.cancel(b)}),e.onPostRender.dispatch(e,b.get(e.id))}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each;a.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(c,d,e){this.parent(c,d,e),this.onRenderMenu=new a.util.Dispatcher(this),d.menu_container=d.menu_container||b.doc.body},showMenu:function(){var a=this,d,e,f=b.get(a.id),g;if(a.isDisabled())return;a.isMenuRendered||(a.renderMenu(),a.isMenuRendered=!0);if(a.isMenuVisible)return a.hideMenu();d=b.getPos(a.settings.menu_container),e=b.getPos(f),g=a.menu,g.settings.offset_x=e.x,g.settings.offset_y=e.y,g.settings.vp_offset_x=e.x,g.settings.vp_offset_y=e.y,g.settings.keyboard_focus=a._focused,g.showMenu(0,f.clientHeight),c.add(b.doc,"mousedown",a.hideMenu,a),a.setState("Selected",1),a.isMenuVisible=1},renderMenu:function(){var a=this,b;b=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:a.settings.icons}),b.onHideMenu.add(function(){a.hideMenu(),a.focus()}),a.onRenderMenu.dispatch(a,b),a.menu=b},hideMenu:function(a){var d=this;if(a&&a.type=="mousedown"&&b.getParent(a.target,function(a){return a.id===d.id||a.id===d.id+"_open"}))return;if(!a||!b.getParent(a.target,".mceMenu"))d.setState("Selected",0),c.remove(b.doc,"mousedown",d.hideMenu,d),d.menu&&d.menu.hideMenu();d.isMenuVisible=0},postRender:function(){var a=this,b=a.settings;c.add(a.id,"click",function(){a.isDisabled()||(b.onclick&&b.onclick(a.value),a.showMenu())})}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each;a.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(a,b,c){this.parent(a,b,c),this.classPrefix="mceSplitButton"},renderHTML:function(){var a,c=this,d=c.settings,e;return a="<tbody><tr>",d.image?e=b.createHTML("img ",{src:d.image,role:"presentation","class":"mceAction "+d["class"]}):e=b.createHTML("span",{"class":"mceAction "+d["class"]},""),e+=b.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:c.id+"_voice",style:"display:none;"},d.title),a+="<td >"+b.createHTML("a",{role:"button",id:c.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+d["class"],onclick:"return false;",onmousedown:"return false;",title:d.title},e)+"</td>",e=b.createHTML("span",{"class":"mceOpen "+d["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span>'),a+="<td >"+b.createHTML("a",{role:"button",id:c.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+d["class"],onclick:"return false;",onmousedown:"return false;",title:d.title},e)+"</td>",a+="</tr></tbody>",a=b.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+d["class"],cellpadding:"0",cellspacing:"0",title:d.title},a),b.createHTML("div",{id:c.id,role:"button",tabindex:"0","aria-labelledby":c.id+"_voice","aria-haspopup":"true"},a)},postRender:function(){var d=this,e=d.settings,f;e.onclick&&(f=function(a){d.isDisabled()||(e.onclick(d.value),c.cancel(a))},c.add(d.id+"_action","click",f),c.add(d.id,["click","keydown"],function(a){var b=32,e=14,g=13,h=38,i=40;if((a.keyCode===32||a.keyCode===13||a.keyCode===14)&&!a.altKey&&!a.ctrlKey&&!a.metaKey)f(),c.cancel(a);else if(a.type==="click"||a.keyCode===i)d.showMenu(),c.cancel(a)})),c.add(d.id+"_open","click",function(a){d.showMenu(),c.cancel(a)}),c.add([d.id,d.id+"_open"],"focus",function(){d._focused=1}),c.add([d.id,d.id+"_open"],"blur",function(){d._focused=0});if(a.isIE6||!b.boxModel)c.add(d.id,"mouseover",function(){b.hasClass(d.id,"mceSplitButtonDisabled")||b.addClass(d.id,"mceSplitButtonHover")}),c.add(d.id,"mouseout",function(){b.hasClass(d.id,"mceSplitButtonDisabled")||b.removeClass(d.id,"mceSplitButtonHover")})},destroy:function(){this.parent(),c.clear(this.id+"_action"),c.clear(this.id+"_open"),c.clear(this.id)}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.is,e=a.each;a.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(b,c,d){var e=this;e.parent(b,c,d),e.settings=c=a.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},e.settings),e.onShowMenu=new a.util.Dispatcher(e),e.onHideMenu=new a.util.Dispatcher(e),e.value=c.default_color},showMenu:function(){var a=this,d,e,f,g;if(a.isDisabled())return;a.isMenuRendered||(a.renderMenu(),a.isMenuRendered=!0);if(a.isMenuVisible)return a.hideMenu();f=b.get(a.id),b.show(a.id+"_menu"),b.addClass(f,"mceSplitButtonSelected"),g=b.getPos(f),b.setStyles(a.id+"_menu",{left:g.x,top:g.y+f.clientHeight,zIndex:2e5}),f=0,c.add(b.doc,"mousedown",a.hideMenu,a),a.onShowMenu.dispatch(a),a._focused&&(a._keyHandler=c.add(a.id+"_menu","keydown",function(b){b.keyCode==27&&a.hideMenu()}),b.select("a",a.id+"_menu")[0].focus()),a.isMenuVisible=1},hideMenu:function(a){var d=this;if(d.isMenuVisible){if(a&&a.type=="mousedown"&&b.getParent(a.target,function(a){return a.id===d.id+"_open"}))return;if(!a||!b.getParent(a.target,".mceSplitButtonMenu"))b.removeClass(d.id,"mceSplitButtonSelected"),c.remove(b.doc,"mousedown",d.hideMenu,d),c.remove(d.id+"_menu","keydown",d._keyHandler),b.hide(d.id+"_menu");d.isMenuVisible=0,d.onHideMenu.dispatch()}},renderMenu:function(){var f=this,g,h=0,i=f.settings,j,k,l,m,n;return m=b.add(i.menu_container,"div",{role:"listbox",id:f.id+"_menu","class":i.menu_class+" "+i["class"],style:"position:absolute;left:0;top:-1000px;"}),g=b.add(m,"div",{"class":i["class"]+" mceSplitButtonMenu"}),b.add(g,"span",{"class":"mceMenuLine"}),j=b.add(g,"table",{role:"presentation","class":"mceColorSplitMenu"}),k=b.add(j,"tbody"),h=0,e(d(i.colors,"array")?i.colors:i.colors.split(","),function(a){a=a.replace(/^#/,""),h--||(l=b.add(k,"tr"),h=i.grid_width-1),j=b.add(l,"td"),j=b.add(j,"a",{role:"option",href:"javascript:;",style:{backgroundColor:"#"+a},title:f.editor.getLang("colors."+a,a),"data-mce-color":"#"+a}),f.editor.forcedHighContrastMode&&(j=b.add(j,"canvas",{width:16,height:16,"aria-hidden":"true"}),j.getContext&&(n=j.getContext("2d"))?(n.fillStyle="#"+a,n.fillRect(0,0,16,16)):b.remove(j))}),i.more_colors_func&&(j=b.add(k,"tr"),j=b.add(j,"td",{colspan:i.grid_width,"class":"mceMoreColors"}),j=b.add(j,"a",{role:"option",id:f.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},i.more_colors_title),c.add(j,"click",function(a){return i.more_colors_func.call(i.more_colors_scope||this),c.cancel(a)})),b.addClass(g,"mceColorSplitMenu"),new a.ui.KeyboardNavigation({root:f.id+"_menu",items:b.select("a",f.id+"_menu"),onCancel:function(){f.hideMenu(),f.focus()}}),c.add(f.id+"_menu","mousedown",function(a){return c.cancel(a)}),c.add(f.id+"_menu","click",function(a){var d;return a=b.getParent(a.target,"a",k),a&&a.nodeName.toLowerCase()=="a"&&(d=a.getAttribute("data-mce-color"))&&f.setColor(d),c.cancel(a)}),m},setColor:function(a){this.displayColor(a),this.hideMenu(),this.settings.onselect(a)},displayColor:function(a){var c=this;b.setStyle(c.id+"_preview","backgroundColor",a),c.value=a},postRender:function(){var a=this,c=a.id;a.parent(),b.add(c+"_action","div",{id:c+"_preview","class":"mceColorPreview"}),b.setStyle(a.id+"_preview","backgroundColor",a.value)},destroy:function(){this.parent(),c.clear(this.id+"_menu"),c.clear(this.id+"_more"),b.remove(this.id+"_menu")}})}(tinymce),function(a){var b=a.DOM,c=a.each,d=a.dom.Event;a.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var c=this,d=[],e=c.controls,f=a.each,g=c.settings;return d.push('<div id="'+c.id+'" role="group" aria-labelledby="'+c.id+'_voice">'),d.push("<span role='application'>"),d.push('<span id="'+c.id+'_voice" class="mceVoiceLabel" style="display:none;">'+b.encode(g.name)+"</span>"),f(e,function(a){d.push(a.renderHTML())}),d.push("</span>"),d.push("</div>"),d.join("")},focus:function(){var a=this;b.get(a.id).focus()},postRender:function(){var d=this,e=[];c(d.controls,function(a){c(a.controls,function(a){a.id&&e.push(a)})}),d.keyNav=new a.ui.KeyboardNavigation({root:d.id,items:e,onCancel:function(){a.isWebKit&&b.get(d.editor.id+"_ifr").focus(),d.editor.focus()},excludeFromTabOrder:!d.settings.tab_focus_toolbar})},destroy:function(){var a=this;a.parent(),a.keyNav.destroy(),d.clear(a.id)}})}(tinymce),function(a){var b=a.DOM,c=a.each;a.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var a=this,c="",d,e,f=a.settings,g,h,i,j;j=a.controls;for(g=0;g<j.length;g++)e=j[g],h=j[g-1],i=j[g+1],g===0&&(d="mceToolbarStart",e.Button?d+=" mceToolbarStartButton":e.SplitButton?d+=" mceToolbarStartSplitButton":e.ListBox&&(d+=" mceToolbarStartListBox"),c+=b.createHTML("td",{"class":d},b.createHTML("span",null,"<!-- IE -->"))),h&&e.ListBox&&(h.Button||h.SplitButton)&&(c+=b.createHTML("td",{"class":"mceToolbarEnd"},b.createHTML("span",null,"<!-- IE -->"))),b.stdMode?c+='<td style="position: relative">'+e.renderHTML()+"</td>":c+="<td>"+e.renderHTML()+"</td>",i&&e.ListBox&&(i.Button||i.SplitButton)&&(c+=b.createHTML("td",{"class":"mceToolbarStart"},b.createHTML("span",null,"<!-- IE -->")));return d="mceToolbarEnd",e.Button?d+=" mceToolbarEndButton":e.SplitButton?d+=" mceToolbarEndSplitButton":e.ListBox&&(d+=" mceToolbarEndListBox"),c+=b.createHTML("td",{"class":d},b.createHTML("span",null,"<!-- IE -->")),b.createHTML("table",{id:a.id,"class":"mceToolbar"+(f["class"]?" "+f["class"]:""),cellpadding:"0",cellspacing:"0",align:a.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+c+"</tr></tbody>")}})}(tinymce),function(a){var b=a.util.Dispatcher,c=a.each;a.create("tinymce.AddOnManager",{AddOnManager:function(){var a=this;a.items=[],a.urls={},a.lookup={},a.onAdd=new b(a)},get:function(a){return this.lookup[a]?this.lookup[a].instance:undefined},dependencies:function(a){var b;return this.lookup[a]&&(b=this.lookup[a].dependencies),b||[]},requireLangPack:function(b){var c=a.settings;c&&c.language&&c.language_load!==!1&&a.ScriptLoader.add(this.urls[b]+"/langs/"+c.language+".js")},add:function(a,b,c){return this.items.push(b),this.lookup[a]={instance:b,dependencies:c},this.onAdd.dispatch(this,a,b),b},createUrl:function(a,b){return typeof b=="object"?b:{prefix:a.prefix,resource:b,suffix:a.suffix}},addComponents:function(b,c){var d=this.urls[b];a.each(c,function(b){a.ScriptLoader.add(d+"/"+b)})},load:function(b,c,d,e){function f(){var f=g.dependencies(b);a.each(f,function(a){var b=g.createUrl(c,a);g.load(b.resource,b,undefined,undefined)}),d&&(e?d.call(e):d.call(a.ScriptLoader))}var g=this,h=c;if(g.urls[b])return;typeof c=="object"&&(h=c.prefix+c.resource+c.suffix),h.indexOf("/")!=0&&h.indexOf("://")==-1&&(h=a.baseURL+"/"+h),g.urls[b]=h.substring(0,h.lastIndexOf("/")),g.lookup[b]?f():a.ScriptLoader.add(h,f,e)}}),a.PluginManager=new a.AddOnManager,a.ThemeManager=new a.AddOnManager}(tinymce),function(a){var b=a.each,c=a.extend,d=a.DOM,e=a.dom.Event,f=a.ThemeManager,g=a.PluginManager,h=a.explode,i=a.util.Dispatcher,j,k=0;a.documentBaseURL=
window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(a.documentBaseURL)||(a.documentBaseURL+="/"),a.baseURL=(new a.util.URI(a.documentBaseURL)).toAbsolute(a.baseURL),a.baseURI=new a.util.URI(a.baseURL),a.onBeforeUnload=new i(a),e.add(window,"beforeunload",function(b){a.onBeforeUnload.dispatch(a,b)}),a.onAddEditor=new i(a),a.onRemoveEditor=new i(a),a.EditorManager=c(a,{editors:[],i18n:{},activeEditor:null,init:function(f){function g(b,c,d){var e=b[c];if(!e)return;return a.is(e,"string")&&(d=e.replace(/\.\w+$/,""),d=d?a.resolve(d):0,e=a.resolve(e)),e.apply(d||this,Array.prototype.slice.call(arguments,2))}var i=this,j,l=a.ScriptLoader,m,n=[],o;f=c({theme:"simple",language:"en"},f),i.settings=f,e.add(document,"init",function(){var c,e;g(f,"onpageload");switch(f.mode){case"exact":c=f.elements||"",c.length>0&&b(h(c),function(c){d.get(c)?(o=new a.Editor(c,f),n.push(o),o.render(1)):b(document.forms,function(e){b(e.elements,function(b){b.name===c&&(c="mce_editor_"+k++,d.setAttrib(b,"id",c),o=new a.Editor(c,f),n.push(o),o.render(1))})})});break;case"textareas":case"specific_textareas":function j(a,b){return b.constructor===RegExp?b.test(a.className):d.hasClass(a,b)}b(d.select("textarea"),function(b){if(f.editor_deselector&&j(b,f.editor_deselector))return;if(!f.editor_selector||j(b,f.editor_selector)){m=d.get(b.name),!b.id&&!m&&(b.id=b.name);if(!b.id||i.get(b.id))b.id=d.uniqueId();o=new a.Editor(b.id,f),n.push(o),o.render(1)}})}f.oninit&&(c=e=0,b(n,function(a){e++,a.initialized?c++:a.onInit.add(function(){c++,c==e&&g(f,"oninit")}),c==e&&g(f,"oninit")}))})},get:function(a){return a===j?this.editors:this.editors[a]},getInstanceById:function(a){return this.get(a)},add:function(a){var b=this,c=b.editors;return c[a.id]=a,c.push(a),b._setActive(a),b.onAddEditor.dispatch(b,a),a},remove:function(a){var b=this,c,d=b.editors;if(!d[a.id])return null;delete d[a.id];for(c=0;c<d.length;c++)if(d[c]==a){d.splice(c,1);break}return b.activeEditor==a&&b._setActive(d[0]),a.destroy(),b.onRemoveEditor.dispatch(b,a),a},execCommand:function(b,c,d){var e=this,f=e.get(d),g;switch(b){case"mceFocus":return f.focus(),!0;case"mceAddEditor":case"mceAddControl":return e.get(d)||(new a.Editor(d,e.settings)).render(),!0;case"mceAddFrameControl":g=d.window,g.tinyMCE=tinyMCE,g.tinymce=a,a.DOM.doc=g.document,a.DOM.win=g,f=new a.Editor(d.element_id,d),f.render();if(a.isIE){function h(){f.destroy(),g.detachEvent("onunload",h),g=g.tinyMCE=g.tinymce=null}g.attachEvent("onunload",h)}return d.page_window=null,!0;case"mceRemoveEditor":case"mceRemoveControl":return f&&f.remove(),!0;case"mceToggleEditor":if(!f)return e.execCommand("mceAddControl",0,d),!0;return f.isHidden()?f.show():f.hide(),!0}return e.activeEditor?e.activeEditor.execCommand(b,c,d):!1},execInstanceCommand:function(a,b,c,d){var e=this.get(a);return e?e.execCommand(b,c,d):!1},triggerSave:function(){b(this.editors,function(a){a.save()})},addI18n:function(c,d){var e,f=this.i18n;a.is(c,"string")?b(d,function(a,b){f[c+"."+b]=a}):b(c,function(a,c){b(a,function(a,d){b(a,function(a,b){d==="common"?f[c+"."+b]=a:f[c+"."+d+"."+b]=a})})})},_setActive:function(a){this.selectedInstance=this.activeEditor=a}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.extend,e=a.util.Dispatcher,f=a.each,g=a.isGecko,h=a.isIE,i=a.isWebKit,j=a.is,k=a.ThemeManager,l=a.PluginManager,m=a.inArray,n=a.grep,o=a.explode;a.create("tinymce.Editor",{Editor:function(b,c){var g=this;g.id=g.editorId=b,g.execCommands={},g.queryStateCommands={},g.queryValueCommands={},g.isNotDirty=!1,g.plugins={},f(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(a){g[a]=new e(g)}),g.settings=c=d({id:b,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:a.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:a.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",validate:!0,entity_encoding:"named",url_converter:g.convertURL,url_converter_scope:g,ie7_compat:!0},c),g.documentBaseURI=new a.util.URI(c.document_base_url||a.documentBaseURL,{base_uri:tinyMCE.baseURI}),g.baseURI=a.baseURI,g.contentCSS=[],g.execCallback("setup",g)},render:function(d){function e(){h.language&&h.language_load!==!1&&j.add(a.baseURL+"/langs/"+h.language+".js"),h.theme&&h.theme.charAt(0)!="-"&&!k.urls[h.theme]&&k.load(h.theme,"themes/"+h.theme+"/editor_template"+a.suffix+".js"),f(o(h.plugins),function(b){if(b&&!l.urls[b])if(b.charAt(0)=="-"){b=b.substr(1,b.length);var c=l.dependencies(b);f(c,function(b){var c={prefix:"plugins/",resource:b,suffix:"/editor_plugin"+a.suffix+".js"},b=l.createUrl(c,b);l.load(b.resource,b)})}else{if(b=="safari")return;l.load(b,{prefix:"plugins/",resource:b,suffix:"/editor_plugin"+a.suffix+".js"})}}),j.loadQueue(function(){g.removed||g.init()})}var g=this,h=g.settings,i=g.id,j=a.ScriptLoader;if(!c.domLoaded){c.add(document,"init",function(){g.render()});return}tinyMCE.settings=h;if(!g.getElement())return;if(a.isIDevice&&!a.isIOS5)return;!/TEXTAREA|INPUT/i.test(g.getElement().nodeName)&&h.hidden_input&&b.getParent(i,"form")&&b.insertAfter(b.create("input",{type:"hidden",name:i}),i),a.WindowManager&&(g.windowManager=new a.WindowManager(g)),h.encoding=="xml"&&g.onGetContent.add(function(a,c){c.save&&(c.content=b.encode(c.content))}),h.add_form_submit_trigger&&g.onSubmit.addToTop(function(){g.initialized&&(g.save(),g.isNotDirty=1)}),h.add_unload_trigger&&(g._beforeUnload=tinyMCE.onBeforeUnload.add(function(){g.initialized&&!g.destroyed&&!g.isHidden()&&g.save({format:"raw",no_events:!0})})),a.addUnload(g.destroy,g),h.submit_patch&&g.onBeforeRenderUI.add(function(){var b=g.getElement().form;if(!b)return;if(b._mceOldSubmit)return;!b.submit.nodeType&&!b.submit.length&&(g.formElement=b,b._mceOldSubmit=b.submit,b.submit=function(){return a.triggerSave(),g.isNotDirty=1,g.formElement._mceOldSubmit(g.formElement)}),b=null}),e()},init:function(){function c(b){var d=l.get(b),g=l.urls[b]||a.documentBaseURL.replace(/\/$/,""),h;d&&a.inArray(w,b)===-1&&(f(l.dependencies(b),function(a){c(a)}),h=new d(e,g),e.plugins[b]=h,h.init&&(h.init(e,g),w.push(b)))}var d,e=this,i=e.settings,j,m,n=e.getElement(),p,q,r,s,t,u,v,w=[];a.add(e),i.aria_label=i.aria_label||b.getAttrib(n,"aria-label",e.getLang("aria.rich_text_area")),i.theme&&(i.theme=i.theme.replace(/-/,""),p=k.get(i.theme),e.theme=new p,e.theme.init&&i.init_theme&&e.theme.init(e,k.urls[i.theme]||a.documentBaseURL.replace(/\/$/,""))),f(o(i.plugins.replace(/\-/g,"")),c),i.popup_css!==!1&&(i.popup_css?i.popup_css=e.documentBaseURI.toAbsolute(i.popup_css):i.popup_css=e.baseURI.toAbsolute("themes/"+i.theme+"/skins/"+i.skin+"/dialog.css")),i.popup_css_add&&(i.popup_css+=","+e.documentBaseURI.toAbsolute(i.popup_css_add)),e.controlManager=new a.ControlManager(e),i.custom_undo_redo&&(e.onBeforeExecCommand.add(function(a,b,c,d,f){b!="Undo"&&b!="Redo"&&b!="mceRepaint"&&(!f||!f.skip_undo)&&e.undoManager.beforeChange()}),e.onExecCommand.add(function(a,b,c,d,f){b!="Undo"&&b!="Redo"&&b!="mceRepaint"&&(!f||!f.skip_undo)&&e.undoManager.add()})),e.onExecCommand.add(function(a,b){/^(FontName|FontSize)$/.test(b)||e.nodeChanged()});if(g){function x(a,b){(!b||!b.initial)&&e.execCommand("mceRepaint")}e.onUndo.add(x),e.onRedo.add(x),e.onSetContent.add(x)}e.onBeforeRenderUI.dispatch(e,e.controlManager),i.render_ui&&(j=i.width||n.style.width||n.offsetWidth,m=i.height||n.style.height||n.offsetHeight,e.orgDisplay=n.style.display,u=/^[0-9\.]+(|px)$/i,u.test(""+j)&&(j=Math.max(parseInt(j)+(p.deltaWidth||0),100)),u.test(""+m)&&(m=Math.max(parseInt(m)+(p.deltaHeight||0),100)),p=e.theme.renderUI({targetNode:n,width:j,height:m,deltaWidth:i.delta_width,deltaHeight:i.delta_height}),e.editorContainer=p.editorContainer),document.domain&&location.hostname!=document.domain&&(a.relaxedDomain=document.domain),b.setStyles(p.sizeContainer||p.editorContainer,{width:j,height:m}),i.content_css&&a.each(o(i.content_css),function(a){e.contentCSS.push(e.documentBaseURI.toAbsolute(a))}),m=(p.iframeHeight||m)+(typeof m=="number"?p.deltaHeight||0:""),m<100&&(m=100),e.iframeHTML=i.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">',i.document_base_url!=a.documentBaseURL&&(e.iframeHTML+='<base href="'+e.documentBaseURI.getURI()+'" />'),i.ie7_compat?e.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />':e.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />',e.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';for(v=0;v<e.contentCSS.length;v++)e.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+e.contentCSS[v]+'" />';s=i.body_id||"tinymce",s.indexOf("=")!=-1&&(s=e.getParam("body_id","","hash"),s=s[e.id]||s),t=i.body_class||"",t.indexOf("=")!=-1&&(t=e.getParam("body_class","","hash"),t=t[e.id]||""),e.iframeHTML+='</head><body id="'+s+'" class="mceContentBody '+t+'"><br></body></html>',a.relaxedDomain&&(h||a.isOpera&&parseFloat(opera.version())<11)&&(r='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()'),d=b.add(p.iframeContainer,"iframe",{id:e.id+"_ifr",src:r||'javascript:""',frameBorder:"0",allowTransparency:"true",title:i.aria_label,style:{width:"100%",height:m,display:"block"}}),e.contentAreaContainer=p.iframeContainer,b.get(p.editorContainer).style.display=e.orgDisplay,b.get(e.id).style.display="none",b.setAttrib(e.id,"aria-hidden",!0),(!a.relaxedDomain||!r)&&e.setupIframe(),n=d=p=null},setupIframe:function(){var d=this,e=d.settings,i=b.get(d.id),j=d.getDoc(),k,l;if(!h||!a.relaxedDomain)j.open(),j.write(d.iframeHTML),j.close(),a.relaxedDomain&&(j.domain=a.relaxedDomain);l=d.getBody(),l.disabled=!0,e.readonly||(l.contentEditable=!0),l.disabled=!1,d.schema=new a.html.Schema(e),d.dom=new a.dom.DOMUtils(d.getDoc(),{keep_values:!0,url_converter:d.convertURL,url_converter_scope:d,hex_colors:e.force_hex_style_colors,class_filter:e.class_filter,update_styles:1,fix_ie_paragraphs:1,schema:d.schema}),d.parser=new a.html.DomParser(e,d.schema),d.settings.allow_html_in_named_anchor||d.parser.addAttributeFilter("name",function(a,b){var c=a.length,d,e,f,g;while(c--){g=a[c];if(g.name==="a"&&g.firstChild){f=g.parent,d=g.lastChild;do e=d.prev,f.insert(d,g),d=e;while(d)}}}),d.parser.addAttributeFilter("src,href,style",function(a,b){var c=a.length,e,f=d.dom,g,h;while(c--)e=a[c],g=e.attr(b),h="data-mce-"+b,e.attributes.map[h]||(b==="style"?e.attr(h,f.serializeStyle(f.parseStyle(g),e.name)):e.attr(h,d.convertURL(g,b,e.name)))}),d.parser.addNodeFilter("script",function(a,b){var c=a.length,d;while(c--)d=a[c],d.attr("type","mce-"+(d.attr("type")||"text/javascript"))}),d.parser.addNodeFilter("#cdata",function(a,b){var c=a.length,d;while(c--)d=a[c],d.type=8,d.name="#comment",d.value="[CDATA["+d.value+"]]"}),d.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(b,c){var e=b.length,f,g=d.schema.getNonEmptyElements();while(e--)f=b[e],f.isEmpty(g)&&(f.empty().append(new a.html.Node("br",1)).shortEnded=!0)}),d.serializer=new a.dom.Serializer(e,d.dom,d.schema),d.selection=new a.dom.Selection(d.dom,d.getWin(),d.serializer),d.formatter=new a.Formatter(this),d.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(a){return!0},onformat:function(a,b,c){f(c,function(b,c){d.dom.setAttrib(a,c,b)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),f("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(a){d.formatter.register(a,{block:a,remove:"all"})}),d.formatter.register(d.settings.formats),d.undoManager=new a.UndoManager(d),d.undoManager.onAdd.add(function(a,b){if(a.hasUndo())return d.onChange.dispatch(d,b,a)}),d.undoManager.onUndo.add(function(a,b){return d.onUndo.dispatch(d,b,a)}),d.undoManager.onRedo.add(function(a,b){return d.onRedo.dispatch(d,b,a)}),d.forceBlocks=new a.ForceBlocks(d,{forced_root_block:e.forced_root_block}),d.editorCommands=new a.EditorCommands(d),d.serializer.onPreProcess.add(function(a,b){return d.onPreProcess.dispatch(d,b,a)}),d.serializer.onPostProcess.add(function(a,b){return d.onPostProcess.dispatch(d,b,a)}),d.onPreInit.dispatch(d),e.gecko_spellcheck||(d.getBody().spellcheck=0),e.readonly||d._addEvents(),d.controlManager.onPostRender.dispatch(d,d.controlManager),d.onPostRender.dispatch(d),d.quirks=new a.util.Quirks(this),e.directionality&&(d.getBody().dir=e.directionality),e.nowrap&&(d.getBody().style.whiteSpace="nowrap"),e.handle_node_change_callback&&d.onNodeChange.add(function(a,b,c){d.execCallback("handle_node_change_callback",d.id,c,-1,-1,!0,d.selection.isCollapsed())}),e.save_callback&&d.onSaveContent.add(function(a,b){var c=d.execCallback("save_callback",d.id,b.content,d.getBody());c&&(b.content=c)}),e.onchange_callback&&d.onChange.add(function(a,b){d.execCallback("onchange_callback",d,b)}),e.protect&&d.onBeforeSetContent.add(function(a,b){e.protect&&f(e.protect,function(a){b.content=b.content.replace(a,function(a){return"<!--mce:protected "+escape(a)+"-->"})})}),e.convert_newlines_to_brs&&d.onBeforeSetContent.add(function(a,b){b.initial&&(b.content=b.content.replace(/\r?\n/g,"<br />"))}),e.preformatted&&d.onPostProcess.add(function(a,b){b.content=b.content.replace(/^\s*<pre.*?>/,""),b.content=b.content.replace(/<\/pre>\s*$/,""),b.set&&(b.content='<pre class="mceItemHidden">'+b.content+"</pre>")}),e.verify_css_classes&&(d.serializer.attribValueFilter=function(a,b){var c,e;return a=="class"?(d.classesRE||(e=d.dom.getClasses(),e.length>0&&(c="",f(e,function(a){c+=(c?"|":"")+a["class"]}),d.classesRE=new RegExp("("+c+")","gi"))),!d.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(b)||d.classesRE.test(b)?b:""):b}),e.cleanup_callback&&(d.onBeforeSetContent.add(function(a,b){b.content=d.execCallback("cleanup_callback","insert_to_editor",b.content,b)}),d.onPreProcess.add(function(a,b){b.set&&d.execCallback("cleanup_callback","insert_to_editor_dom",b.node,b),b.get&&d.execCallback("cleanup_callback","get_from_editor_dom",b.node,b)}),d.onPostProcess.add(function(a,b){b.set&&(b.content=d.execCallback("cleanup_callback","insert_to_editor",b.content,b)),b.get&&(b.content=d.execCallback("cleanup_callback","get_from_editor",b.content,b))})),e.save_callback&&d.onGetContent.add(function(a,b){b.save&&(b.content=d.execCallback("save_callback",d.id,b.content,d.getBody()))}),e.handle_event_callback&&d.onEvent.add(function(a,b,e){d.execCallback("handle_event_callback",b,a,e)===!1&&c.cancel(b)}),d.onSetContent.add(function(){d.addVisual(d.getBody())}),e.padd_empty_editor&&d.onPostProcess.add(function(a,b){b.content=b.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")});if(g){function m(a,b){f(a.dom.select("a"),function(b){var c=b.parentNode;a.dom.isBlock(c)&&c.lastChild===b&&a.dom.add(c,"br",{"data-mce-bogus":1})})}d.onExecCommand.add(function(a,b){b==="CreateLink"&&m(a)}),d.onSetContent.add(d.selection.onSetContent.add(m))}d.load({initial:!0,format:"html"}),d.startContent=d.getContent({format:"raw"}),d.undoManager.add(),d.initialized=!0,d.onInit.dispatch(d),d.execCallback("setupcontent_callback",d.id,d.getBody(),d.getDoc()),d.execCallback("init_instance_callback",d),d.focus(!0),d.nodeChanged({initial:1}),f(d.contentCSS,function(a){d.dom.loadCSS(a)}),e.auto_focus&&setTimeout(function(){var b=a.get(e.auto_focus);b.selection.select(b.getBody(),1),b.selection.collapse(1),b.getBody().focus(),b.getWin().focus()},100),i=null},focus:function(b){var c,d=this,e=d.selection,f=d.settings.content_editable,g,h,i=d.getDoc();b||(g=e.getRng(),g.item&&(h=g.item(0)),d._refreshContentEditable(),e.normalize(),f||d.getWin().focus(),a.isGecko&&d.getBody().focus(),h&&h.ownerDocument==i&&(g=i.body.createControlRange(),g.addElement(h),g.select())),a.activeEditor!=d&&((c=a.activeEditor)!=null&&c.onDeactivate.dispatch(c,d),d.onActivate.dispatch(d,c)),a._setActive(d)},execCallback:function(b){var c=this,d=c.settings[b],e;if(!d)return;return c.callbackLookup&&(e=c.callbackLookup[b])&&(d=e.func,e=e.scope),j(d,"string")&&(e=d.replace(/\.\w+$/,""),e=e?a.resolve(e):0,d=a.resolve(d),c.callbackLookup=c.callbackLookup||{},c.callbackLookup[b]={func:d,scope:e}),d.apply(e||c,Array.prototype.slice.call(arguments,1))},translate:function(b){var c=this.settings.language||"en",d=a.i18n;return b?d[c+"."+b]||b.replace(/{\#([^}]+)\}/g,function(a,b){return d[c+"."+b]||"{#"+b+"}"}):""},getLang:function(b,c){return a.i18n[(this.settings.language||"en")+"."+b]||(j(c)?c:"{#"+b+"}")},getParam:function(b,c,d){var e=a.trim,g=j(this.settings[b])?this.settings[b]:c,h;return d==="hash"?(h={},j(g,"string")?f(g.indexOf("=")>0?g.split(/[;,](?![^=;,]*(?:[;,]|$))/):g.split(","),function(a){a=a.split("="),a.length>1?h[e(a[0])]=e(a[1]):h[e(a[0])]=e(a)}):h=g,h):g},nodeChanged:function(a){var b=this,c=b.selection,d=c.getStart()||b.getBody();b.initialized&&(a=a||{},d=h&&d.ownerDocument!=b.getDoc()?b.getBody():d,a.parents=[],b.dom.getParent(d,function(b){if(b.nodeName=="BODY")return!0;a.parents.push(b)}),b.onNodeChange.dispatch(b,a?a.controlManager||b.controlManager:b.controlManager,d,c.isCollapsed(),a))},addButton:function(a,b){var c=this;c.buttons=c.buttons||{},c.buttons[a]=b},addCommand:function(a,b,c){this.execCommands[a]={func:b,scope:c||this}},addQueryStateHandler:function(a,b,c){this.queryStateCommands[a]={func:b,scope:c||this}},addQueryValueHandler:function(a,b,c){this.queryValueCommands[a]={func:b,scope:c||this}},addShortcut:function(a,b,c,d){var e=this,g;return e.settings.custom_shortcuts?(e.shortcuts=e.shortcuts||{},j(c,"string")&&(g=c,c=function(){e.execCommand(g,!1,null)}),j(c,"object")&&(g=c,c=function(){e.execCommand(g[0],g[1],g[2])}),f(o(a),function(a){var g={func:c,scope:d||this,desc:b,alt:!1,ctrl:!1,shift:!1};f(o(a,"+"),function(a){switch(a){case"alt":case"ctrl":case"shift":g[a]=!0;break;default:g.charCode=a.charCodeAt(0),g.keyCode=a.toUpperCase().charCodeAt(0)}}),e.shortcuts[(g.ctrl?"ctrl":"")+","+(g.alt?"alt":"")+","+(g.shift?"shift":"")+","+g.keyCode]=g}),!0):!1},execCommand:function(a,b,c,d){var e=this,g=0,h,i;!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(a)&&(!d||!d.skip_focus)&&e.focus(),h={},e.onBeforeExecCommand.dispatch(e,a,b,c,h);if(h.terminate)return!1;if(e.execCallback("execcommand_callback",e.id,e.selection.getNode(),a,b,c))return e.onExecCommand.dispatch(e,a,b,c,d),!0;if(h=e.execCommands[a]){i=h.func.call(h.scope,b,c);if(i!==!0)return e.onExecCommand.dispatch(e,a,b,c,d),i}f(e.plugins,function(f){if(f.execCommand&&f.execCommand(a,b,c))return e.onExecCommand.dispatch(e,a,b,c,d),g=1,!1});if(g)return!0;if(e.theme&&e.theme.execCommand&&e.theme.execCommand(a,b,c))return e.onExecCommand.dispatch(e,a,b,c,d),!0;if(e.editorCommands.execCommand(a,b,c))return e.onExecCommand.dispatch(e,a,b,c,d),!0;e.getDoc().execCommand(a,b,c),e.onExecCommand.dispatch(e,a,b,c,d)},queryCommandState:function(a){var b=this,c,d;if(b._isHidden())return;if(c=b.queryStateCommands[a]){d=c.func.call(c.scope);if(d!==!0)return d}c=b.editorCommands.queryCommandState(a);if(c!==-1)return c;try{return this.getDoc().queryCommandState(a)}catch(e){}},queryCommandValue:function(a){var b=this,c,d;if(b._isHidden())return;if(c=b.queryValueCommands[a]){d=c.func.call(c.scope);if(d!==!0)return d}c=b.editorCommands.queryCommandValue(a);if(j(c))return c;try{return this.getDoc().queryCommandValue(a)}catch(e){}},show:function(){var a=this;b.show(a.getContainer()),b.hide(a.id),a.load()},hide:function(){var a=this,c=a.getDoc();h&&c&&c.execCommand("SelectAll"),a.save(),b.hide(a.getContainer()),b.setStyle(a.id,"display",a.orgDisplay)},isHidden:function(){return!b.isHidden(this.id)},setProgressState:function(a,b,c){return this.onSetProgressState.dispatch(this,a,b,c),a},load:function(a){var b=this,c=b.getElement(),d;if(c)return a=a||{},a.load=!0,d=b.setContent(j(c.value)?c.value:c.innerHTML,a),a.element=c,a.no_events||b.onLoadContent.dispatch(b,a),a.element=c=null,d},save:function(a){var c=this,d=c.getElement(),e,g;if(!d||!c.initialized)return;return a=a||{},a.save=!0,a.no_events||(c.undoManager.typing=!1,c.undoManager.add()),a.element=d,e=a.content=c.getContent(a),a.no_events||c.onSaveContent.dispatch(c,a),e=a.content,/TEXTAREA|INPUT/i.test(d.nodeName)?d.value=e:(d.innerHTML=e,(g=b.getParent(c.id,"form"))&&f(g.elements,function(a){if(a.name==c.id)return a.value=e,!1})),a.element=d=null,e},setContent:function(b,c){var d=this,e,f=d.getBody(),g;c=c||{},c.format=c.format||"html",c.set=!0,c.content=b,c.no_events||d.onBeforeSetContent.dispatch(d,c),b=c.content;if(!a.isIE&&(b.length===0||/^\s+$/.test(b))){g=d.settings.forced_root_block,g?b="<"+g+'><br data-mce-bogus="1"></'+g+">":b='<br data-mce-bogus="1">',f.innerHTML=b,d.selection.select(f,!0),d.selection.collapse(!0);return}return c.format!=="raw"&&(b=(new a.html.Serializer({},d.schema)).serialize(d.parser.parse(b))),c.content=a.trim(b),d.dom.setHTML(f,c.content),c.no_events||d.onSetContent.dispatch(d,c),d.selection.normalize(),c.content},getContent:function(b){var c=this,d;return b=b||{},b.format=b.format||"html",b.get=!0,b.no_events||c.onBeforeGetContent.dispatch(c,b),b.format=="raw"?d=c.getBody().innerHTML:d=c.serializer.serialize(c.getBody(),b),b.content=a.trim(d),b.no_events||c.onGetContent.dispatch(c,b),b.content},isDirty:function(){var b=this;return a.trim(b.startContent)!=a.trim(b.getContent({format:"raw",no_events:1}))&&!b.isNotDirty},getContainer:function(){var a=this;return a.container||(a.container=b.get(a.editorContainer||a.id+"_parent")),a.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return b.get(this.settings.content_element||this.id)},getWin:function(){var a=this,c;return a.contentWindow||(c=b.get(a.id+"_ifr"),c&&(a.contentWindow=c.contentWindow)),a.contentWindow},getDoc:function(){var a=this,b;return a.contentDocument||(b=a.getWin(),b&&(a.contentDocument=b.document)),a.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(a,b,c){var d=this,e=d.settings;return e.urlconverter_callback?d.execCallback("urlconverter_callback",a,c,!0,b):!e.convert_urls||c&&c.nodeName=="LINK"||a.indexOf("file:")===0?a:e.relative_urls?d.documentBaseURI.toRelative(a):(a=d.documentBaseURI.toAbsolute(a,e.remove_script_host),a)},addVisual:function(a){var b=this,c=b.settings;a=a||b.getBody(),j(b.hasVisual)||(b.hasVisual=c.visual),f(b.dom.select("table,a",a),function(a){var d;switch(a.nodeName){case"TABLE":d=b.dom.getAttrib(a,"border");if(!d||d=="0")b.hasVisual?b.dom.addClass(a,c.visual_table_class):b.dom.removeClass(a,c.visual_table_class);return;case"A":d=b.dom.getAttrib(a,"name"),d&&(b.hasVisual?b.dom.addClass(a,"mceItemAnchor"):b.dom.removeClass(a,"mceItemAnchor"));return}}),b.onVisualAid.dispatch(b,a,b.hasVisual)},remove:function(){var c=this,d=c.getContainer();c.removed=1,c.hide(),c.execCallback("remove_instance_callback",c),c.onRemove.dispatch(c),c.onExecCommand.listeners=[],a.remove(c),b.remove(d)},destroy:function(b){var d=this;if(d.destroyed)return;b||(a.removeUnload(d.destroy),tinyMCE.onBeforeUnload.remove(d._beforeUnload),d.theme&&d.theme.destroy&&d.theme.destroy(),d.controlManager.destroy(),d.selection.destroy(),d.dom.destroy(),d.settings.content_editable||(c.clear(d.getWin()),c.clear(d.getDoc())),c.clear(d.getBody()),c.clear(d.formElement)),d.formElement&&(d.formElement.submit=d.formElement._mceOldSubmit,d.formElement._mceOldSubmit=null),d.contentAreaContainer=d.formElement=d.container=d.settings.content_element=d.bodyElement=d.contentDocument=d.contentWindow=null,d.selection&&(d.selection=d.selection.win=d.selection.dom=d.selection.dom.doc=null),d.destroyed=1},_addEvents:function(){function d(a,b){var c=a.type;if(e.removed)return;e.onEvent.dispatch(e,a,b)!==!1&&e[k[a.fakeType||a.type]].dispatch(e,a,b)}var e=this,h,i=e.settings,j=e.dom,k={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};f(k,function(a,c){switch(c){case"contextmenu":j.bind(e.getDoc(),c,d);break;case"paste":j.bind(e.getBody(),c,function(a){d(a)});break;case"submit":case"reset":j.bind(e.getElement().form||b.getParent(e.id,"form"),c,d);break;default:j.bind(i.content_editable?e.getBody():e.getDoc(),c,d)}}),j.bind(i.content_editable?e.getBody():g?e.getDoc():e.getWin(),"focus",function(a){e.focus(!0)}),a.isGecko&&j.bind(e.getDoc(),"DOMNodeInserted",function(a){var b;a=a.target,a.nodeType===1&&a.nodeName==="IMG"&&(b=a.getAttribute("data-mce-src"))&&(a.src=e.documentBaseURI.toAbsolute(b))});if(g){function l(){var a=this,b=a.getDoc(),c=a.settings;if(g&&!c.readonly){a._refreshContentEditable();try{b.execCommand("styleWithCSS",0,!1)}catch(d){if(!a._isHidden())try{b.execCommand("useCSS",0,!0)}catch(d){}}if(!c.table_inline_editing)try{b.execCommand("enableInlineTableEditing",!1,!1)}catch(d){}if(!c.object_resizing)try{b.execCommand("enableObjectResizing",!1,!1)}catch(d){}}}e.onBeforeExecCommand.add(l),e.onMouseDown.add(l)}e.onMouseUp.add(e.nodeChanged),e.onKeyUp.add(function(b,c){var d=c.keyCode;(d>=33&&d<=36||d>=37&&d<=40||d==13||d==45||d==46||d==8||a.isMac&&(d==91||d==93)||c.ctrlKey)&&e.nodeChanged()}),e.onKeyDown.add(function(a,b){if(b.keyCode!=8)return;var c=a.selection.getRng().startContainer,d=a.selection.getRng().startOffset;while(c&&c.nodeType&&c.nodeType!=1&&c.parentNode)c=c.parentNode;if(c&&c.parentNode&&c.parentNode.tagName==="BLOCKQUOTE"&&c.parentNode.firstChild==c&&d==0){a.formatter.toggle("blockquote",null,c.parentNode);var e=a.selection.getRng();e.setStart(c,0),e.setEnd(c,0),a.selection.setRng(e),a.selection.collapse(!1)}}),e.onReset.add(function(){e.setContent(e.startContent,{format:"raw"})});if(i.custom_shortcuts){i.custom_undo_redo_keyboard_shortcuts&&(e.addShortcut("ctrl+z",e.getLang("undo_desc"),"Undo"),e.addShortcut("ctrl+y",e.getLang("redo_desc"),"Redo")),e.addShortcut("ctrl+b",e.getLang("bold_desc"),"Bold"),e.addShortcut("ctrl+i",e.getLang("italic_desc"),"Italic"),e.addShortcut("ctrl+u",e.getLang("underline_desc"),"Underline");for(h=1;h<=6;h++)e.addShortcut("ctrl+"+h,"",["FormatBlock",!1,"h"+h]);e.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),e.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),e.addShortcut("ctrl+9","",["FormatBlock",!1,"address"]);function m(b){var c=null;return!b.altKey&&!b.ctrlKey&&!b.metaKey?c:(f(e.shortcuts,function(d){if(a.isMac&&d.ctrl!=b.metaKey)return;if(!a.isMac&&d.ctrl!=b.ctrlKey)return;if(d.alt!=b.altKey)return;if(d.shift!=b.shiftKey)return;if(b.keyCode==d.keyCode||b.charCode&&b.charCode==d.charCode)return c=d,!1}),c)}e.onKeyUp.add(function(a,b){var d=m(b);if(d)return c.cancel(b)}),e.onKeyPress.add(function(a,b){var d=m(b);if(d)return c.cancel(b)}),e.onKeyDown.add(function(a,b){var d=m(b);if(d)return d.func.call(d.scope),c.cancel(b)})}a.isIE&&j.bind(e.getDoc(),"controlselect",function(a){var b=e.resizeInfo,d;a=a.target;if(a.nodeName!=="IMG")return;b&&j.unbind(b.node,b.ev,b.cb),j.hasClass(a,"mceItemNoResize")?(ev="resizestart",d=j.bind(a,"resizestart",c.cancel,c)):(ev="resizeend",d=j.bind(a,ev,function(a){var b;a=a.target;if(b=j.getStyle(a,"width"))j.setAttrib(a,"width",b.replace(/[^0-9%]+/g,"")),j.setStyle(a,"width","");if(b=j.getStyle(a,"height"))j.setAttrib(a,"height",b.replace(/[^0-9%]+/g,"")),j.setStyle(a,"height","")})),b=e.resizeInfo={node:a,ev:ev,cb:d}}),a.isOpera&&e.onClick.add(function(a,b){c.prevent(b)});if(i.custom_undo_redo){function n(){e.undoManager.typing=!1,e.undoManager.add()}j.bind(e.getDoc(),"focusout",function(a){!e.removed&&e.undoManager.typing&&n()}),e.dom.bind(e.dom.getRoot(),"dragend",function(a){n()}),e.onKeyUp.add(function(a,b){var c=b.keyCode;(c>=33&&c<=36||c>=37&&c<=40||c==13||c==45||b.ctrlKey)&&n()}),e.onKeyDown.add(function(b,d){var f=d.keyCode,g;if(f==8){g=e.getDoc().selection;if(g&&g.createRange&&g.createRange().item)return e.undoManager.beforeChange(),b.dom.remove(g.createRange().item(0)),n(),c.cancel(d)}if(f>=33&&f<=36||f>=37&&f<=40||f==13||f==45){a.isIE&&f==13&&e.undoManager.beforeChange(),e.undoManager.typing&&n();return}(f<16||f>20)&&f!=224&&f!=91&&!e.undoManager.typing&&(e.undoManager.beforeChange(),e.undoManager.typing=!0,e.undoManager.add())}),e.onMouseDown.add(function(){e.undoManager.typing&&n()})}if(a.isGecko){function o(){var a=e.dom.getAttribs(e.selection.getStart().cloneNode(!1));return function(){var b=e.selection.getStart();b!==e.getBody()&&(e.dom.setAttrib(b,"style",null),f(a,function(a){b.setAttributeNode(a.cloneNode(!0))}))}}function p(){var a=e.selection;return!a.isCollapsed()&&a.getStart()!=a.getEnd()}e.onKeyPress.add(function(a,b){var d;if((b.keyCode==8||b.keyCode==46)&&p())return d=o(),e.getDoc().execCommand("delete",!1,null),d(),c.cancel(b)}),e.dom.bind(e.getDoc(),"cut",function(a){var b;p()&&(b=o(),e.onKeyUp.addToTop(c.cancel,c),setTimeout(function(){b(),e.onKeyUp.remove(c.cancel,c)},0))})}},_refreshContentEditable:function(){var a=this,b,c;a._isHidden()&&(b=a.getBody(),c=b.parentNode,c.removeChild(b),c.appendChild(b),b.focus())},_isHidden:function(){var a;return g?(a=this.selection.getSel(),!a||!a.rangeCount||a.rangeCount==0):0}})}(tinymce),function(a){var b=a.each,c,d=!0,e=!1;a.EditorCommands=function(f){function g(a,b,c){var f;return a=a.toLowerCase(),(f=r.exec[a])?(f(a,b,c),d):e}function h(a){var b;return a=a.toLowerCase(),(b=r.state[a])?b(a):-1}function i(a){var b;return a=a.toLowerCase(),(b=r.value[a])?b(a):e}function j(a,c){c=c||"exec",b(a,function(a,d){b(d.toLowerCase().split(","),function(b){r[c][b]=a})})}function k(a,b,d){return b===c&&(b=e),d===c&&(d=null),f.getDoc().execCommand
(a,b,d)}function l(a){return t.match(a)}function m(a,b){t.toggle(a,b?{value:b}:c)}function n(a){u=q.getBookmark(a)}function o(){q.moveToBookmark(u)}var p=f.dom,q=f.selection,r={state:{},exec:{},value:{}},s=f.settings,t=f.formatter,u;a.extend(this,{execCommand:g,queryCommandState:h,queryCommandValue:i,addCommands:j}),j({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){f.undoManager.add()},"Cut,Copy,Paste":function(b){var c=f.getDoc(),e;try{k(b)}catch(g){e=d}if(e||!c.queryCommandSupported(b))a.isGecko?f.windowManager.confirm(f.getLang("clipboard_msg"),function(a){a&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):f.windowManager.alert(f.getLang("clipboard_no_support"))},unlink:function(a){q.isCollapsed()&&q.select(q.getNode()),k(a),q.collapse(e)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(a){var c=a.substring(7);b("left,center,right,full".split(","),function(a){c!=a&&t.remove("align"+a)}),m("align"+c),g("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(a){var b,c;k(a),b=p.getParent(q.getNode(),"ol,ul"),b&&(c=b.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(c.nodeName)&&(n(),p.split(c,b),o()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){m(a)},"ForeColor,HiliteColor,FontName":function(a,b,c){m(a,c)},FontSize:function(b,c,d){var e,f;d>=1&&d<=7&&(f=a.explode(s.font_size_style_values),e=a.explode(s.font_size_classes),e?d=e[d-1]||d:d=f[d-1]||d),m(b,d)},RemoveFormat:function(a){t.remove(a)},mceBlockQuote:function(a){m("blockquote")},FormatBlock:function(a,b,c){return m(c||"p")},mceCleanup:function(){var a=q.getBookmark();f.setContent(f.getContent({cleanup:d}),{cleanup:d}),q.moveToBookmark(a)},mceRemoveNode:function(a,b,c){var e=c||q.getNode();e!=f.getBody()&&(n(),f.dom.remove(e,d),o())},mceSelectNodeDepth:function(a,b,c){var d=0;p.getParent(q.getNode(),function(a){if(a.nodeType==1&&d++==c)return q.select(a),e},f.getBody())},mceSelectNode:function(a,b,c){q.select(c)},mceInsertContent:function(b,c,d){var e,g,h,i,j,k,l,m,n,o,r,s,t,u;e=f.parser,g=new a.html.Serializer({},f.schema),t='<span id="mce_marker" data-mce-type="bookmark">﻿</span>',k={content:d,format:"html"},q.onBeforeSetContent.dispatch(q,k),d=k.content,d.indexOf("{$caret}")==-1&&(d+="{$caret}"),d=d.replace(/\{\$caret\}/,t),q.isCollapsed()||f.getDoc().execCommand("Delete",!1,null),h=q.getNode(),k={context:h.nodeName.toLowerCase()},j=e.parse(d,k),r=j.lastChild;if(r.attr("id")=="mce_marker"){l=r;for(r=r.prev;r;r=r.walk(!0))if(r.type==3||!p.isBlock(r.name)){r.parent.insert(l,r,r.name==="br");break}}if(!k.invalid)d=g.serialize(j),r=h.firstChild,s=h.lastChild,!r||r===s&&r.nodeName==="BR"?p.setHTML(h,d):q.setContent(d);else{q.setContent(t),h=f.selection.getNode(),i=f.getBody(),h.nodeType==9?h=r=i:r=h;while(r!==i)h=r,r=r.parentNode;d=h==i?i.innerHTML:p.getOuterHTML(h),d=g.serialize(e.parse(d.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return g.serialize(j)}))),h==i?p.setHTML(i,d):p.setOuterHTML(h,d)}l=p.get("mce_marker"),m=p.getRect(l),n=p.getViewPort(f.getWin());if(m.y+m.h>n.y+n.h||m.y<n.y||m.x>n.x+n.w||m.x<n.x)u=a.isIE?f.getDoc().documentElement:f.getBody(),u.scrollLeft=m.x,u.scrollTop=m.y-n.h+25;o=p.createRng(),r=l.previousSibling,r&&r.nodeType==3?o.setStart(r,r.nodeValue.length):(o.setStartBefore(l),o.setEndBefore(l)),p.remove(l),q.setRng(o),q.onSetContent.dispatch(q,k),f.addVisual()},mceInsertRawHTML:function(a,b,c){q.setContent("tiny_mce_marker"),f.setContent(f.getContent().replace(/tiny_mce_marker/g,function(){return c}))},mceSetContent:function(a,b,c){f.setContent(c)},"Indent,Outdent":function(a){var c,d,e;c=s.indentation,d=/[a-z%]+$/i.exec(c),c=parseInt(c),!h("InsertUnorderedList")&&!h("InsertOrderedList")?b(q.getSelectedBlocks(),function(b){a=="outdent"?(e=Math.max(0,parseInt(b.style.paddingLeft||0)-c),p.setStyle(b,"paddingLeft",e?e+d:"")):p.setStyle(b,"paddingLeft",parseInt(b.style.paddingLeft||0)+c+d)}):k(a)},mceRepaint:function(){var b;if(a.isGecko)try{n(d),q.getSel()&&q.getSel().selectAllChildren(f.getBody()),q.collapse(d),o()}catch(c){}},mceToggleFormat:function(a,b,c){t.toggle(c)},InsertHorizontalRule:function(){f.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){f.hasVisual=!f.hasVisual,f.addVisual()},mceReplaceContent:function(a,b,c){f.execCommand("mceInsertContent",!1,c.replace(/\{\$selection\}/g,q.getContent({format:"text"})))},mceInsertLink:function(a,b,c){var d;typeof c=="string"&&(c={href:c}),d=p.getParent(q.getNode(),"a"),c.href=c.href.replace(" ","%20"),(!d||!c.href)&&t.remove("link"),c.href&&t.apply("link",c,d)},selectAll:function(){var a=p.getRoot(),b=p.createRng();b.setStart(a,0),b.setEnd(a,a.childNodes.length),f.selection.setRng(b)}}),j({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(a){return l("align"+a.substring(7))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){return l(a)},mceBlockQuote:function(){return l("blockquote")},Outdent:function(){var a;if(s.inline_styles){if((a=p.getParent(q.getStart(),p.isBlock))&&parseInt(a.style.paddingLeft)>0)return d;if((a=p.getParent(q.getEnd(),p.isBlock))&&parseInt(a.style.paddingLeft)>0)return d}return h("InsertUnorderedList")||h("InsertOrderedList")||!s.inline_styles&&!!p.getParent(q.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(a){return p.getParent(q.getNode(),a=="insertunorderedlist"?"UL":"OL")}},"state"),j({"FontSize,FontName":function(a){var b=0,c;if(c=p.getParent(q.getNode(),"span"))a=="fontsize"?b=c.style.fontSize:b=c.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase();return b}},"value"),s.custom_undo_redo&&j({Undo:function(){f.undoManager.undo()},Redo:function(){f.undoManager.redo()}})}}(tinymce),function(a){var b=a.util.Dispatcher;a.UndoManager=function(c){function d(){return a.trim(c.getContent({format:"raw",no_events:1}))}var e,f=0,g=[],h;return e={typing:!1,onAdd:new b(e),onUndo:new b(e),onRedo:new b(e),beforeChange:function(){h=c.selection.getBookmark(2,!0)},add:function(a){var b,i=c.settings,j;a=a||{},a.content=d(),j=g[f];if(j&&j.content==a.content)return null;g[f]&&(g[f].beforeBookmark=h);if(i.custom_undo_redo_levels&&g.length>i.custom_undo_redo_levels){for(b=0;b<g.length-1;b++)g[b]=g[b+1];g.length--,f=g.length}return a.bookmark=c.selection.getBookmark(2,!0),f<g.length-1&&(g.length=f+1),g.push(a),f=g.length-1,e.onAdd.dispatch(e,a),c.isNotDirty=0,a},undo:function(){var a,b;return e.typing&&(e.add(),e.typing=!1),f>0&&(a=g[--f],c.setContent(a.content,{format:"raw"}),c.selection.moveToBookmark(a.beforeBookmark),e.onUndo.dispatch(e,a)),a},redo:function(){var a;return f<g.length-1&&(a=g[++f],c.setContent(a.content,{format:"raw"}),c.selection.moveToBookmark(a.bookmark),e.onRedo.dispatch(e,a)),a},clear:function(){g=[],f=0,e.typing=!1},hasUndo:function(){return f>0||this.typing},hasRedo:function(){return f<g.length-1&&!this.typing}}}}(tinymce),function(a){function b(a){var b,c,d;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(a.nodeName)&&(b?(c=a.cloneNode(!1),c.appendChild(b),b=c):b=d=a.cloneNode(!1),b.removeAttribute("id"));while(a=a.parentNode);if(b)return{wrapper:b,inner:d}}function c(a,b){var c=b.ownerDocument.createRange();return c.setStart(a.endContainer,a.endOffset),c.setEndAfter(b),c.cloneContents().textContent.length==0}function d(a,b,c){var d,e;return b.isEmpty(c)?(d=b.getParent(c,"ul,ol"),b.getParent(d.parentNode,"ul,ol")||(b.split(d,c),e=b.create("p",0,'<br data-mce-bogus="1" />'),b.replace(e,c),a.select(e,1)),l):k}var e=a.dom.Event,f=a.isIE,g=a.isGecko,h=a.isOpera,i=a.each,j=a.extend,k=!0,l=!1;a.create("tinymce.ForceBlocks",{ForceBlocks:function(a){var b=this,c=a.settings,d;b.editor=a,b.dom=a.dom,d=(c.forced_root_block||"p").toLowerCase(),c.element=d.toUpperCase(),a.onPreInit.add(b.setup,b)},setup:function(){var c=this,d=c.editor,h=d.settings,i=d.dom,j=d.selection,l=d.schema.getBlockElements();if(h.forced_root_block){function m(){var a=j.getStart(),b=d.getBody(),c,e,f,g,k,m,n,o=-16777215;if(!a||a.nodeType!==1)return;while(a!=b){if(l[a.nodeName])return;a=a.parentNode}c=j.getRng(),c.setStart?(e=c.startContainer,f=c.startOffset,g=c.endContainer,k=c.endOffset):(c.item&&(c=d.getDoc().body.createTextRange(),c.moveToElementText(c.item(0))),tmpRng=c.duplicate(),tmpRng.collapse(!0),f=tmpRng.move("character",o)*-1,tmpRng.collapsed||(tmpRng=c.duplicate(),tmpRng.collapse(!1),k=tmpRng.move("character",o)*-1-f));for(a=b.firstChild;a;a)a.nodeType===3||a.nodeType==1&&!l[a.nodeName]?(m||(m=i.create(h.forced_root_block),a.parentNode.insertBefore(m,a)),n=a,a=a.nextSibling,m.appendChild(n)):(m=null,a=a.nextSibling);if(c.setStart)c.setStart(e,f),c.setEnd(g,k),j.setRng(c);else try{c=d.getDoc().body.createTextRange(),c.moveToElementText(b),c.collapse(!0),c.moveStart("character",f),k>0&&c.moveEnd("character",k),c.select()}catch(p){}d.nodeChanged()}d.onKeyUp.add(m),d.onClick.add(m)}h.force_br_newlines&&f&&d.onKeyPress.add(function(a,b){var c;if(b.keyCode==13&&j.getNode().nodeName!="LI")return j.setContent('<br id="__" /> ',{format:"raw"}),c=i.get("__"),c.removeAttribute("id"),j.select(c),j.collapse(),e.cancel(b)}),h.force_p_newlines&&(f?(a.addUnload(function(){c._previousFormats=0}),d.onKeyPress.add(function(a,d){c._previousFormats=0,d.keyCode==13&&!d.shiftKey&&a.selection.isCollapsed()&&h.keep_styles&&(c._previousFormats=b(a.selection.getStart()))}),d.onKeyUp.add(function(a,b){if(b.keyCode==13&&!b.shiftKey){var d=a.selection.getStart(),e=c._previousFormats;!d.hasChildNodes()&&e&&(d=i.getParent(d,i.isBlock),d&&d.nodeName!="LI"&&(d.innerHTML="",c._previousFormats?(d.appendChild(e.wrapper),e.inner.innerHTML="﻿"):d.innerHTML="﻿",j.select(d,1),j.collapse(!0),a.getDoc().execCommand("Delete",!1,null),c._previousFormats=0))}})):d.onKeyPress.add(function(a,b){b.keyCode==13&&!b.shiftKey&&!c.insertPara(b)&&e.cancel(b)}),g&&d.onKeyDown.add(function(a,b){(b.keyCode==8||b.keyCode==46)&&!b.shiftKey&&c.backspaceDelete(b,b.keyCode==8)}));if(a.isWebKit){function n(a){var b=j.getRng(),c,d=i.create("div",null," "),e,f=i.getViewPort(a.getWin()).h;b.insertNode(c=i.create("br")),b.setStartAfter(c),b.setEndAfter(c),j.setRng(b),j.getSel().focusNode==c.previousSibling&&(j.select(i.insertAfter(i.doc.createTextNode(" "),c)),j.collapse(k)),i.insertAfter(d,c),e=i.getPos(d).y,i.remove(d),e>f&&a.getWin().scrollTo(0,e)}d.onKeyPress.add(function(a,b){b.keyCode==13&&(b.shiftKey||h.force_br_newlines&&!i.getParent(j.getNode(),"h1,h2,h3,h4,h5,h6,ol,ul"))&&(n(a),e.cancel(b))})}f&&h.element!="P"&&(d.onKeyPress.add(function(a,b){c.lastElm=j.getNode().nodeName}),d.onKeyUp.add(function(a,b){var d,e=j.getNode(),f=a.getBody();f.childNodes.length===1&&e.nodeName=="P"?(e=i.rename(e,h.element),j.select(e),j.collapse(),a.nodeChanged()):b.keyCode==13&&!b.shiftKey&&c.lastElm!="P"&&(d=i.getParent(e,"p"),d&&(i.rename(d,h.element),a.nodeChanged()))}))},getParentBlock:function(a){var b=this.dom;return b.getParent(a,b.isBlock)},insertPara:function(a){function b(a,b){var c=[],d,e,f;a.innerHTML="";if(j.keep_styles){e=b;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(e.nodeName)&&(d=e.cloneNode(l),g.setAttrib(d,"id",""),c.push(d));while(e=e.parentNode)}if(c.length>0){for(f=c.length-1,d=a;f>=0;f--)d=d.appendChild(c[f]);return c[0].innerHTML=h?" ":"<br />",c[0]}a.innerHTML=h?" ":"<br />"}var e=this,f=e.editor,g=f.dom,i=f.getDoc(),j=f.settings,m=f.selection.getSel(),n=m.getRangeAt(0),o=i.body,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E=g.getViewPort(f.getWin()),F,G,H;f.undoManager.beforeChange(),p=i.createRange(),p.setStart(m.anchorNode,m.anchorOffset),p.collapse(k),q=i.createRange(),q.setStart(m.focusNode,m.focusOffset),q.collapse(k),r=p.compareBoundaryPoints(p.START_TO_END,q)<0,s=r?m.anchorNode:m.focusNode,t=r?m.anchorOffset:m.focusOffset,u=r?m.focusNode:m.anchorNode,v=r?m.focusOffset:m.anchorOffset;if(s===u&&/^(TD|TH)$/.test(s.nodeName))return s.firstChild.nodeName=="BR"&&g.remove(s.firstChild),s.childNodes.length==0?(f.dom.add(s,j.element,null,"<br />"),A=f.dom.add(s,j.element,null,"<br />")):(D=s.innerHTML,s.innerHTML="",f.dom.add(s,j.element,null,D),A=f.dom.add(s,j.element,null,"<br />")),n=i.createRange(),n.selectNodeContents(A),n.collapse(1),f.selection.setRng(n),l;s==o&&u==o&&o.firstChild&&f.dom.isBlock(o.firstChild)&&(s=u=s.firstChild,t=v=0,p=i.createRange(),p.setStart(s,0),q=i.createRange(),q.setStart(u,0)),i.body.hasChildNodes()||i.body.appendChild(g.create("br")),s=s.nodeName=="HTML"?i.body:s,s=s.nodeName=="BODY"?s.firstChild:s,u=u.nodeName=="HTML"?i.body:u,u=u.nodeName=="BODY"?u.firstChild:u,w=e.getParentBlock(s),x=e.getParentBlock(u),y=w?w.nodeName:j.element;if(D=e.dom.getParent(w,"li,pre"))return D.nodeName=="LI"?d(f.selection,e.dom,D):k;w&&(w.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(g.getStyle(w,"position",1)))&&(y=j.element,w=null),x&&(x.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(g.getStyle(w,"position",1)))&&(y=j.element,x=null);if(/(TD|TABLE|TH|CAPTION)/.test(y)||w&&y=="DIV"&&/left|right/gi.test(g.getStyle(w,"float",1)))y=j.element,w=x=null;z=w&&w.nodeName==y?w.cloneNode(0):f.dom.create(y),A=x&&x.nodeName==y?x.cloneNode(0):f.dom.create(y),A.removeAttribute("id"),/^(H[1-6])$/.test(y)&&c(n,w)&&(A=f.dom.create(j.element)),D=B=s;do{if(D==o||D.nodeType==9||e.dom.isBlock(D)||/(TD|TABLE|TH|CAPTION)/.test(D.nodeName))break;B=D}while(D=D.previousSibling?D.previousSibling:D.parentNode);D=C=u;do{if(D==o||D.nodeType==9||e.dom.isBlock(D)||/(TD|TABLE|TH|CAPTION)/.test(D.nodeName))break;C=D}while(D=D.nextSibling?D.nextSibling:D.parentNode);B.nodeName==y?p.setStart(B,0):p.setStartBefore(B),p.setEnd(s,t),z.appendChild(p.cloneContents()||i.createTextNode(""));try{q.setEndAfter(C)}catch(I){}return q.setStart(u,v),A.appendChild(q.cloneContents()||i.createTextNode("")),n=i.createRange(),!B.previousSibling&&B.parentNode.nodeName==y?n.setStartBefore(B.parentNode):p.startContainer.nodeName==y&&p.startOffset==0?n.setStartBefore(p.startContainer):n.setStart(p.startContainer,p.startOffset),!C.nextSibling&&C.parentNode.nodeName==y?n.setEndAfter(C.parentNode):n.setEnd(q.endContainer,q.endOffset),n.deleteContents(),h&&f.getWin().scrollTo(0,E.y),z.firstChild&&z.firstChild.nodeName==y&&(z.innerHTML=z.firstChild.innerHTML),A.firstChild&&A.firstChild.nodeName==y&&(A.innerHTML=A.firstChild.innerHTML),g.isEmpty(z)&&b(z,s),g.isEmpty(A)&&(H=b(A,u)),h&&parseFloat(opera.version())<9.5?(n.insertNode(z),n.insertNode(A)):(n.insertNode(A),n.insertNode(z)),A.normalize(),z.normalize(),f.selection.select(A,!0),f.selection.collapse(!0),F=f.dom.getPos(A).y,(F<E.y||F+25>E.y+E.h)&&f.getWin().scrollTo(0,F<E.y?F:F-E.h+25),f.undoManager.add(),l},backspaceDelete:function(b,c){var d=this,f=d.editor,g=f.getBody(),h=f.dom,i,j=f.selection,k=j.getRng(),m=k.startContainer,i,n,o,p;if(!c&&k.collapsed&&m.nodeType==1&&k.startOffset==m.childNodes.length){p=new a.dom.TreeWalker(m.lastChild,m);for(i=m.lastChild;i;i=p.prev())if(i.nodeType==3){k.setStart(i,i.nodeValue.length),k.collapse(!0),j.setRng(k);return}}if(m&&f.dom.isBlock(m)&&!/^(TD|TH)$/.test(m.nodeName)&&c)if(m.childNodes.length==0||m.childNodes.length==1&&m.firstChild.nodeName=="BR"){i=m;while((i=i.previousSibling)&&!f.dom.isBlock(i));if(i){if(m!=g.firstChild){n=f.dom.doc.createTreeWalker(i,NodeFilter.SHOW_TEXT,null,l);while(o=n.nextNode())i=o;k=f.getDoc().createRange(),k.setStart(i,i.nodeValue?i.nodeValue.length:0),k.setEnd(i,i.nodeValue?i.nodeValue.length:0),j.setRng(k),f.dom.remove(m)}return e.cancel(b)}}}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each,e=a.extend;a.create("tinymce.ControlManager",{ControlManager:function(b,c){var e=this,f;c=c||{},e.editor=b,e.controls={},e.onAdd=new a.util.Dispatcher(e),e.onPostRender=new a.util.Dispatcher(e),e.prefix=c.prefix||b.id+"_",e._cls={},e.onPostRender.add(function(){d(e.controls,function(a){a.postRender()})})},get:function(a){return this.controls[this.prefix+a]||this.controls[a]},setActive:function(a,b){var c=null;return(c=this.get(a))&&c.setActive(b),c},setDisabled:function(a,b){var c=null;return(c=this.get(a))&&c.setDisabled(b),c},add:function(a){var b=this;return a&&(b.controls[a.id]=a,b.onAdd.dispatch(a,b)),a},createControl:function(a){var b,c=this,e=c.editor;d(e.plugins,function(d){if(d.createControl){b=d.createControl(a,c);if(b)return!1}});switch(a){case"|":case"separator":return c.createSeparator()}return!b&&e.buttons&&(b=e.buttons[a])?c.createButton(a,b):c.add(b)},createDropMenu:function(b,c,d){var f=this,g=f.editor,h,i,j,k;c=e({"class":"mceDropDown",constrain:g.settings.constrain_menus},c),c["class"]=c["class"]+" "+g.getParam("skin")+"Skin";if(j=g.getParam("skin_variant"))c["class"]+=" "+g.getParam("skin")+"Skin"+j.substring(0,1).toUpperCase()+j.substring(1);return b=f.prefix+b,k=d||f._cls.dropmenu||a.ui.DropMenu,h=f.controls[b]=new k(b,c),h.onAddItem.add(function(a,b){var c=b.settings;c.title=g.getLang(c.title,c.title),c.onclick||(c.onclick=function(a){c.cmd&&g.execCommand(c.cmd,c.ui||!1,c.value)})}),g.onRemove.add(function(){h.destroy()}),a.isIE&&(h.onShowMenu.add(function(){g.focus(),i=g.selection.getBookmark(1)}),h.onHideMenu.add(function(){i&&(g.selection.moveToBookmark(i),i=0)})),f.add(h)},createListBox:function(b,d,f){function g(b){return b.settings.use_accessible_selects&&!a.isGecko}var h=this,i=h.editor,j,k,l;return h.get(b)?null:(d.title=i.translate(d.title),d.scope=d.scope||i,d.onselect||(d.onselect=function(a){i.execCommand(d.cmd,d.ui||!1,a||d.value)}),d=e({title:d.title,"class":"mce_"+b,scope:d.scope,control_manager:h},d),b=h.prefix+b,i.settings.use_native_selects||g(i)?k=new a.ui.NativeListBox(b,d):(l=f||h._cls.listbox||a.ui.ListBox,k=new l(b,d,i)),h.controls[b]=k,a.isWebKit&&k.onPostRender.add(function(a,b){c.add(b,"mousedown",function(){i.bookmark=i.selection.getBookmark(1)}),c.add(b,"focus",function(){i.selection.moveToBookmark(i.bookmark),i.bookmark=null})}),k.hideMenu&&i.onMouseDown.add(k.hideMenu,k),h.add(k))},createButton:function(b,c,d){var f=this,g=f.editor,h,i,j;return f.get(b)?null:(c.title=g.translate(c.title),c.label=g.translate(c.label),c.scope=c.scope||g,!c.onclick&&!c.menu_button&&(c.onclick=function(){g.execCommand(c.cmd,c.ui||!1,c.value)}),c=e({title:c.title,"class":"mce_"+b,unavailable_prefix:g.getLang("unavailable",""),scope:c.scope,control_manager:f},c),b=f.prefix+b,c.menu_button?(j=d||f._cls.menubutton||a.ui.MenuButton,i=new j(b,c,g),g.onMouseDown.add(i.hideMenu,i)):(j=f._cls.button||a.ui.Button,i=new j(b,c,g)),f.add(i))},createMenuButton:function(a,b,c){return b=b||{},b.menu_button=1,this.createButton(a,b,c)},createSplitButton:function(b,c,d){var f=this,g=f.editor,h,i,j;return f.get(b)?null:(c.title=g.translate(c.title),c.scope=c.scope||g,c.onclick||(c.onclick=function(a){g.execCommand(c.cmd,c.ui||!1,a||c.value)}),c.onselect||(c.onselect=function(a){g.execCommand(c.cmd,c.ui||!1,a||c.value)}),c=e({title:c.title,"class":"mce_"+b,scope:c.scope,control_manager:f},c),b=f.prefix+b,j=d||f._cls.splitbutton||a.ui.SplitButton,i=f.add(new j(b,c,g)),g.onMouseDown.add(i.hideMenu,i),i)},createColorSplitButton:function(b,c,d){var f=this,g=f.editor,h,i,j,k;return f.get(b)?null:(c.title=g.translate(c.title),c.scope=c.scope||g,c.onclick||(c.onclick=function(b){a.isIE&&(k=g.selection.getBookmark(1)),g.execCommand(c.cmd,c.ui||!1,b||c.value)}),c.onselect||(c.onselect=function(a){g.execCommand(c.cmd,c.ui||!1,a||c.value)}),c=e({title:c.title,"class":"mce_"+b,menu_class:g.getParam("skin")+"Skin",scope:c.scope,more_colors_title:g.getLang("more_colors")},c),b=f.prefix+b,j=d||f._cls.colorsplitbutton||a.ui.ColorSplitButton,i=new j(b,c,g),g.onMouseDown.add(i.hideMenu,i),g.onRemove.add(function(){i.destroy()}),a.isIE&&(i.onShowMenu.add(function(){g.focus(),k=g.selection.getBookmark(1)}),i.onHideMenu.add(function(){k&&(g.selection.moveToBookmark(k),k=0)})),f.add(i))},createToolbar:function(b,c,d){var e,f=this,g;return b=f.prefix+b,g=d||f._cls.toolbar||a.ui.Toolbar,e=new g(b,c,f.editor),f.get(b)?null:f.add(e)},createToolbarGroup:function(b,c,d){var e,f=this,g;return b=f.prefix+b,g=d||this._cls.toolbarGroup||a.ui.ToolbarGroup,e=new g(b,c,f.editor),f.get(b)?null:f.add(e)},createSeparator:function(b){var c=b||this._cls.separator||a.ui.Separator;return new c},setControlType:function(a,b){return this._cls[a.toLowerCase()]=b},destroy:function(){d(this.controls,function(a){a.destroy()}),this.controls=null}})}(tinymce),function(a){var b=a.util.Dispatcher,c=a.each,d=a.isIE,e=a.isOpera;a.create("tinymce.WindowManager",{WindowManager:function(a){var c=this;c.editor=a,c.onOpen=new b(c),c.onClose=new b(c),c.params={},c.features={}},open:function(b,f){var g=this,h="",i,j,k=g.editor.settings.dialog_type=="modal",l,m,n,o=a.DOM.getViewPort(),p;b=b||{},f=f||{},m=e?o.w:screen.width,n=e?o.h:screen.height,b.name=b.name||"mc_"+(new Date).getTime(),b.width=parseInt(b.width||320),b.height=parseInt(b.height||240),b.resizable=!0,b.left=b.left||parseInt(m/2)-b.width/2,b.top=b.top||parseInt(n/2)-b.height/2,f.inline=!1,f.mce_width=b.width,f.mce_height=b.height,f.mce_auto_focus=b.auto_focus,k&&d&&(b.center=!0,b.help=!1,b.dialogWidth=b.width+"px",b.dialogHeight=b.height+"px",b.scroll=b.scrollbars||!1),c(b,function(b,c){a.is(b,"boolean")&&(b=b?"yes":"no"),/^(name|url)$/.test(c)||(d&&k?h+=(h?";":"")+c+":"+b:h+=(h?",":"")+c+"="+b)}),g.features=b,g.params=f,g.onOpen.dispatch(g,b,f),p=b.url||b.file,p=a._addVer(p);try{d&&k?(l=1,window.showModalDialog(p,window,h)):l=window.open(p,b.name,h)}catch(q){}l||alert(g.editor.getLang("popup_blocked"))},close:function(a){a.close(),this.onClose.dispatch(this)},createInstance:function(b,c,d,e,f,g){var h=a.resolve(b);return new h(c,d,e,f,g)},confirm:function(a,b,c,d){d=d||window,b.call(c||this,d.confirm(this._decode(this.editor.getLang(a,a))))},alert:function(a,b,c,d){var e=this;d=d||window,d.alert(e._decode(e.editor.getLang(a,a))),b&&b.call(c||e)},resizeBy:function(a,b,c){c.resizeBy(a,b)},_decode:function(b){return a.DOM.decode(b).replace(/\\n/g,"\n")}})}(tinymce),function(a){a.Formatter=function(b){function c(a){return a instanceof Array}function d(a,b){return F.getParents(a,b,F.getRoot())}function e(a){return a.nodeType===1&&(a.face==="mceinline"||a.style.fontFamily==="mceinline")}function f(a){return a?D[a]:D}function g(a,b){a&&(typeof a!="string"?E(a,function(a,b){g(b,a)}):(b=b.length?b:[b],E(b,function(a){a.deep===R&&(a.deep=!a.selector),a.split===R&&(a.split=!a.selector||a.inline),a.remove===R&&a.selector&&!a.inline&&(a.remove="none"),a.selector&&a.inline&&(a.mixed=!0,a.block_expand=!0),typeof a.classes=="string"&&(a.classes=a.classes.split(/\s+/))}),D[a]=b))}function h(c,d,g){function h(a){var b=a.startContainer,c=a.startOffset,d,e;if(b.nodeType==1||b.nodeValue===""){b=b.nodeType==1?b.childNodes[c]:b;if(b){d=new H(b,b.parentNode);for(e=d.current();e;e=d.next())if(e.nodeType==3&&!s(e)){a.setStart(e,0);break}}}return a}function i(a,b){b=b||q,a&&(b.onformat&&b.onformat(a,b,d,g),E(b.styles,function(b,c){F.setStyle(a,c,r(b,d))}),E(b.attributes,function(b,c){F.setAttrib(a,c,r(b,d))}),E(b.classes,function(b){b=r(b,d),F.hasClass(a,b)||F.addClass(a,b)}))}function j(){function a(a,b){var c=new H(b);for(g=c.current();g;g=c.prev())if(g.childNodes.length>1||g==a)return g}var c=b.selection.getRng(),d=c.startContainer,e=c.endContainer;if(d!=e&&c.endOffset==0){var f=a(d,e),h=f.nodeType==3?f.length:f.childNodes.length;c.setEnd(f,h)}return c}function l(b,c,d,e,f){var g=[],h=-1,i,j=-1,k=-1,l;return E(b.childNodes,function(a,b){if(a.nodeName==="UL"||a.nodeName==="OL")return h=b,i=a,!1}),E(b.childNodes,function(a,b){a.nodeName==="SPAN"&&F.getAttrib(a,"data-mce-type")=="bookmark"&&(a.id==c.id+"_start"?j=b:a.id==c.id+"_end"&&(k=b))}),h<=0||j<h&&k>h?(E(a.grep(b.childNodes),f),0):(l=d.cloneNode(P),E(a.grep(b.childNodes),function(a,b){if(j<h&&b<h||j>h&&b>h)g.push(a),a.parentNode.removeChild(a)}),j<h?b.insertBefore(l,i):j>h&&b.insertBefore(l,i.nextSibling),e.push(l),E(g,function(a){l.appendChild(a)}),l)}function m(b,f,g){var h=[],j,m;j=q.inline||q.block,m=F.create(j),i(m),I.walk(b,function(b){function o(b){var s=b.nodeName.toLowerCase(),t=b.parentNode.nodeName.toLowerCase(),u;if(p(s,"br")){r=0,q.block&&F.remove(b);return}if(q.wrapper&&k(b,c,d)){r=0;return}if(q.block&&!q.wrapper&&A(s)){b=F.rename(b,j),i(b),h.push(b),r=0;return}if(q.selector){E(n,function(a){if("collapsed"in a&&a.collapsed!==D)return;F.is(b,a.selector)&&!e(b)&&(i(b,a),u=!0)});if(!q.inline||u){r=0;return}}!J(j,s)||!J(t,j)||!g&&b.nodeType===3&&b.nodeValue.length===1&&b.nodeValue.charCodeAt(0)===65279||b.id==="_mce_caret"?s=="li"&&f?r=l(b,f,m,h,o):(r=0,E(a.grep(b.childNodes),o),r=0):(r||(r=m.cloneNode(P),b.parentNode.insertBefore(r,b),h.push(r)),r.appendChild(b))}var r;E(b,o)}),q.wrap_links===!1&&E(h,function(b){function c(b){var d,e,f;if(b.nodeName==="A"){e=m.cloneNode(P),h.push(e),f=a.grep(b.childNodes);for(d=0;d<f.length;d++)e.appendChild(f[d]);b.appendChild(e)}E(a.grep(b.childNodes),c)}c(b)}),E(h,function(a){function b(a){var b=0;return E(a.childNodes,function(a){!s(a)&&!y(a)&&b++}),b}function f(a){var b,c;return E(a.childNodes,function(a){if(a.nodeType==1&&!y(a)&&!e(a))return b=a,P}),b&&o(b,q)&&(c=b.cloneNode(P),i(c),F.replace(c,a,Q),F.remove(b,1)),c||a}var g;g=b(a);if((h.length>1||!K(a))&&g===0){F.remove(a,1);return}if(q.inline||q.wrapper){!q.exact&&g===1&&(a=f(a)),E(n,function(b){E(F.select(b.inline,a),function(a){var c;if(b.wrap_links===!1){c=a.parentNode;do if(c.nodeName==="A")return;while(c=c.parentNode)}v(b,d,a,b.exact?a:null)})});if(k(a.parentNode,c,d))return F.remove(a,1),a=0,Q;q.merge_with_parents&&F.getParent(a.parentNode,function(b){if(k(b,c,d))return F.remove(a,1),a=0,Q}),a&&q.merge_siblings!==!1&&(a=z(x(a),a),a=z(a,x(a,Q)))}})}var n=f(c),q=n[0],t,w,B,D=G.isCollapsed();if(q)if(g)g.nodeType?(w=F.createRng(),w.setStartBefore(g),w.setEndAfter(g),m(u(w,n),null,!0)):m(g,null,!0);else if(!D||!q.inline||F.select("td.mceSelected,th.mceSelected").length){var L=b.selection.getNode();b.selection.setRng(j()),t=G.getBookmark(),m(u(G.getRng(Q),n),t),q.styles&&(q.styles.color||q.styles.textDecoration)&&(a.walk(L,T,"childNodes"),T(L)),G.moveToBookmark(t),G.setRng(h(G.getRng(Q))),b.nodeChanged()}else C("apply",c,d)}function i(c,e,g){function h(a){var b=a.startContainer,c=a.startOffset,d,e,f,g;b.nodeType==3&&c>=b.nodeValue.length-1&&(b=b.parentNode,c=M(b)+1);if(b.nodeType==1){f=b.childNodes,b=f[Math.min(c,f.length-1)],d=new H(b),c>f.length-1&&d.next();for(e=d.current();e;e=d.next())if(e.nodeType==3&&!s(e)){g=F.create("a",null,N),e.parentNode.insertBefore(g,e),a.setStart(e,0),G.setRng(a),F.remove(g);return}}}function i(b){var c,d,f;c=a.grep(b.childNodes);for(d=0,f=q.length;d<f;d++)if(v(q[d],e,b,b))break;if(r.deep)for(d=0,f=c.length;d<f;d++)i(c[d])}function j(a){var b;return E(d(a.parentNode).reverse(),function(a){var d;!b&&a.id!="_start"&&a.id!="_end"&&(d=k(a,c,e),d&&d.split!==!1&&(b=a))}),b}function m(a,b,c,d){var f,g,h,i,j,k;if(a){k=a.parentNode;for(f=b.parentNode;f&&f!=k;f=f.parentNode){g=f.cloneNode(P);for(j=0;j<q.length;j++)if(v(q[j],e,g,g)){g=0;break}g&&(h&&g.appendChild(h),i||(i=g),h=g)}d&&(!r.mixed||!K(a))&&(b=F.split(a,b)),h&&(c.parentNode.insertBefore(h,c),i.appendChild(c))}return b}function n(a){return m(j(a),a,a,!0)}function o(a){var b=F.get(a?"_start":"_end"),c=b[a?"firstChild":"lastChild"];return y(c)&&(c=c[a?"firstChild":"lastChild"]),F.remove(b,!0),c}function p(a){var c,d;a=u(a,q,Q),r.split&&(c=B(a,Q),d=B(a),c!=d?(c=t(c,"span",{id:"_start","data-mce-type":"bookmark"}),d=t(d,"span",{id:"_end","data-mce-type":"bookmark"}),n(c),n(d),c=o(Q),d=o()):c=d=n(c),a.startContainer=c.parentNode,a.startOffset=M(c),a.endContainer=d.parentNode,a.endOffset=M(d)+1),I.walk(a,function(a){E(a,function(a){i(a),a.nodeType===1&&b.dom.getStyle(a,"text-decoration")==="underline"&&a.parentNode&&S(a.parentNode)==="underline"&&v({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,a)})})}var q=f(c),r=q[0],w,x,z;if(g){g.nodeType?(z=F.createRng(),z.setStartBefore(g),z.setEndAfter(g),p(z)):p(g);return}!G.isCollapsed()||!r.inline||F.select("td.mceSelected,th.mceSelected").length?(w=G.getBookmark(),p(G.getRng(Q)),G.moveToBookmark(w),r.inline&&l(c,e,G.getStart())&&h(G.getRng(!0)),b.nodeChanged()):C("remove",c,e),a.isWebKit&&b.execCommand("mceCleanup")}function j(a,b,c){var d=f(a);!l(a,b,c)||"toggle"in d[0]&&!d[0].toggle?h(a,b,c):i(a,b,c)}function k(a,b,c,d){function e(a,b,e){var f,g,h=b[e],i;if(b.onmatch)return b.onmatch(a,b,e);if(h)if(h.length===R){for(f in h)if(h.hasOwnProperty(f)){e==="attributes"?g=F.getAttrib(a,f):g=q(a,f);if(d&&!g&&!b.exact)return;if((!d||b.exact)&&!p(g,r(h[f],c)))return}}else for(i=0;i<h.length;i++)if(e==="attributes"?F.getAttrib(a,h[i]):q(a,h[i]))return b;return b}var g=f(b),h,i,j;if(g&&a)for(i=0;i<g.length;i++){h=g[i];if(o(a,h)&&e(a,h,"attributes")&&e(a,h,"styles")){if(j=h.classes)for(i=0;i<j.length;i++)if(!F.hasClass(a,j[i]))return;return h}}}function l(a,b,c){function d(c){return c=F.getParent(c,function(c){return!!k(c,a,b,!0)}),k(c,a,b)}var e;return c?d(c):(c=G.getNode(),d(c)?Q:(e=G.getStart(),e!=c&&d(e)?Q:P))}function m(a,b){var c,d=[],e={},f,g,h;return c=G.getStart(),F.getParent(c,function(c){var f,g;for(f=0;f<a.length;f++)g=a[f],!e[g]&&k(c,g,b)&&(e[g]=!0,d.push(g))}),d}function n(a){var b=f(a),c,e,g,h,i;if(b){c=G.getStart(),e=d(c);for(h=b.length-1;h>=0;h--){i=b[h].selector;if(!i)return Q;for(g=e.length-1;g>=0;g--)if(F.is(e[g],i))return Q}}return P}function o(a,b){if(p(a,b.inline))return Q;if(p(a,b.block))return Q;if(b.selector)return F.is(a,b.selector)}function p(a,b){return a=a||"",b=b||"",a=""+(a.nodeName||a),b=""+(b.nodeName||b),a.toLowerCase()==b.toLowerCase()}function q(a,b){var c=F.getStyle(a,b);if(b=="color"||b=="backgroundColor")c=F.toHex(c);return b=="fontWeight"&&c==700&&(c="bold"),""+c}function r(a,b){return typeof a!="string"?a=a(b):b&&(a=a.replace(/%(\w+)/g,function(a,c){return b[c]||a})),a}function s(a){return a&&a.nodeType===3&&/^([\t \r\n]+|)$/.test(a.nodeValue)}function t(a,b,c){var d=F.create(b,c);return a.parentNode.insertBefore(d,a),d.appendChild(a),d}function u(a,c,e){function f(a){var b,d,e,f,g;b=d=a?h:j,g=a?"previousSibling":"nextSibling",root=F.getRoot();if(b.nodeType==3&&!s(b))if(a?i>0:k<b.nodeValue.length)return b;for(;;){if(d==root||!c[0].block_expand&&K(d))return d;for(f=d[g];f;f=f[g])if(!y(f)&&!s(f))return d;d=d.parentNode}return b}function g(a,b){b===R&&(b=a.nodeType===3?a.length:a.childNodes.length);while(a&&a.hasChildNodes())a=a.childNodes[b],a&&(b=a.nodeType===3?a.length:a.childNodes.length);return{node:a,offset:b}}var h=a.startContainer,i=a.startOffset,j=a.endContainer,k=a.endOffset,l,m,n,o;h.nodeType==1&&h.hasChildNodes()&&(m=h.childNodes.length-1,h=h.childNodes[i>m?m:i],h.nodeType==3&&(i=0)),j.nodeType==1&&j.hasChildNodes()&&(m=j.childNodes.length-1,j=j.childNodes[k>m?m:k-1],j.nodeType==3&&(k=j.nodeValue.length));if(y(h.parentNode)||y(h))h=y(h)?h:h.parentNode,h=h.nextSibling||h,h.nodeType==3&&(i=0);if(y(j.parentNode)||y(j))j=y(j)?j:j.parentNode,j=j.previousSibling||j,j.nodeType==3&&(k=j.length);if(c[0].inline){if(a.collapsed){function q(a,c,d){function f(a,b){var c,f,g=a.nodeValue;return typeof b=="undefined"&&(b=d?g.length:0),d?(c=g.lastIndexOf(" ",b),f=g.lastIndexOf(" ",b),c=c>f?c:f,c!==-1&&!e&&c++):(c=g.indexOf(" ",b),f=g.indexOf(" ",b),c=c!==-1&&(f===-1||c<f)?c:f),c}var g,h,i,j;if(a.nodeType===3){i=f(a,c);if(i!==-1)return{container:a,offset:i};j=a}g=new H(a,F.getParent(a,K)||b.getBody());while(h=g[d?"prev":"next"]())if(h.nodeType===3){j=h,i=f(h);if(i!==-1)return{container:h,offset:i}}else if(K(h))break;if(j)return d?c=0:c=j.length,{container:j,offset:c}}o=q(h,i,!0),o&&(h=o.container,i=o.offset),o=q(j,k),o&&(j=o.container,k=o.offset)}n=g(j,k);if(n.node){while(n.node&&n.offset===0&&n.node.previousSibling)n=g(n.node.previousSibling);n.node&&n.offset>0&&n.node.nodeType===3&&n.node.nodeValue.charAt(n.offset-1)===" "&&(n.offset>1?(j=n.node,j.splitText(n.offset-1)):!n.node.previousSibling)}}if(c[0].inline||c[0].block_expand){if(!c[0].inline||h.nodeType!=3||i===0)h=f(!0);if(!c[0].inline||j.nodeType!=3||k===j.nodeValue.length)j=f()}if(c[0].selector&&c[0].expand!==P&&!c[0].inline){function r(b,e){var f,g,h,i;b.nodeType==3&&b.nodeValue.length==0&&b[e]&&(b=b[e]),f=d(b);for(g=0;g<f.length;g++)for(h=0;h<c.length;h++){i=c[h];if("collapsed"in i&&i.collapsed!==a.collapsed)continue;if(F.is(f[g],i.selector))return f[g]}return b}h=r(h,"previousSibling"),j=r(j,"nextSibling")}if(c[0].block||c[0].selector){function t(a,b,e){var f;c[0].wrapper||(f=F.getParent(a,c[0].block)),f||(f=F.getParent(a.nodeType==3?a.parentNode:a,K)),f&&c[0].wrapper&&(f=d(f,"ul,ol").reverse()[0]||f);if(!f){f=a;while(f[b]&&!K(f[b])){f=f[b];if(p(f,"br"))break}}return f||a}h=t(h,"previousSibling"),j=t(j,"nextSibling"),c[0].block&&(K(h)||(h=f(!0)),K(j)||(j=f()))}return h.nodeType==1&&(i=M(h),h=h.parentNode),j.nodeType==1&&(k=M(j)+1,j=j.parentNode),{startContainer:
h,startOffset:i,endContainer:j,endOffset:k}}function v(a,b,c,d){var e,f,g;if(!o(c,a))return P;if(a.remove!="all"){E(a.styles,function(a,e){a=r(a,b),typeof e=="number"&&(e=a,d=0),(!d||p(q(d,e),a))&&F.setStyle(c,e,""),g=1}),g&&F.getAttrib(c,"style")==""&&(c.removeAttribute("style"),c.removeAttribute("data-mce-style")),E(a.attributes,function(a,e){var f;a=r(a,b),typeof e=="number"&&(e=a,d=0);if(!d||p(F.getAttrib(d,e),a)){if(e=="class"){a=F.getAttrib(c,e);if(a){f="",E(a.split(/\s+/),function(a){/mce\w+/.test(a)&&(f+=(f?" ":"")+a)});if(f){F.setAttrib(c,e,f);return}}}e=="class"&&c.removeAttribute("className"),O.test(e)&&c.removeAttribute("data-mce-"+e),c.removeAttribute(e)}}),E(a.classes,function(a){a=r(a,b),(!d||F.hasClass(d,a))&&F.removeClass(c,a)}),f=F.getAttribs(c);for(e=0;e<f.length;e++)if(f[e].nodeName.indexOf("_")!==0)return P}if(a.remove!="none")return w(c,a),Q}function w(b,c){var d=b.parentNode,e;if(c.block)if(!L){function f(a,b,c){return a=x(a,b,c),!a||a.nodeName=="BR"||K(a)}K(b)&&!K(d)&&(!f(b,P)&&!f(b.firstChild,Q,1)&&b.insertBefore(F.create("br"),b.firstChild),!f(b,Q)&&!f(b.lastChild,P,1)&&b.appendChild(F.create("br")))}else d==F.getRoot()&&(!c.list_block||!p(b,c.list_block))&&E(a.grep(b.childNodes),function(a){J(L,a.nodeName.toLowerCase())?e?e.appendChild(a):e=t(a,L):e=0});if(c.selector&&c.inline&&!p(c.inline,b))return;F.remove(b,1)}function x(a,b,c){if(a){b=b?"nextSibling":"previousSibling";for(a=c?a:a[b];a;a=a[b])if(a.nodeType==1||!s(a))return a}}function y(a){return a&&a.nodeType==1&&a.getAttribute("data-mce-type")=="bookmark"}function z(b,c){function d(a,b){function c(a){var b={};return E(F.getAttribs(a),function(c){var d=c.nodeName.toLowerCase();d.indexOf("_")!==0&&d!=="style"&&(b[d]=F.getAttrib(a,d))}),b}function d(a,b){var c,d;for(d in a)if(a.hasOwnProperty(d)){c=b[d];if(c===R)return P;if(a[d]!=c)return P;delete b[d]}for(d in b)if(b.hasOwnProperty(d))return P;return Q}return a.nodeName!=b.nodeName?P:d(c(a),c(b))?d(F.parseStyle(F.getAttrib(a,"style")),F.parseStyle(F.getAttrib(b,"style")))?Q:P:P}var e,f,g;if(b&&c){function h(a,b){for(f=a;f;f=f[b]){if(f.nodeType==3&&f.nodeValue.length!==0)return a;if(f.nodeType==1&&!y(f))return f}return a}b=h(b,"previousSibling"),c=h(c,"nextSibling");if(d(b,c)){for(f=b.nextSibling;f&&f!=c;)g=f,f=f.nextSibling,b.appendChild(g);return F.remove(c),E(a.grep(c.childNodes),function(a){b.appendChild(a)}),b}}return c}function A(a){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(a)}function B(a,c){var d,e,f,g;return d=a[c?"startContainer":"endContainer"],e=a[c?"startOffset":"endOffset"],d.nodeType==1&&(f=d.childNodes.length-1,!c&&e&&e--,d=d.childNodes[e>f?f:e]),d.nodeType===3&&c&&e>=d.nodeValue.length&&(d=(new H(d,b.getBody())).next()||d),d.nodeType===3&&!c&&e==0&&(d=(new H(d,b.getBody())).prev()||d),d}function C(c,d,e){function g(a){var c=F.create("span",{id:r,"data-mce-bogus":!0,style:s?"color:red":""});return a&&c.appendChild(b.getDoc().createTextNode(q)),c}function j(a,b){while(a){if(a.nodeType===3&&a.nodeValue!==q||a.childNodes.length>1)return!1;b&&a.nodeType===1&&b.push(a),a=a.firstChild}return!0}function l(a){while(a){if(a.id===r)return a;a=a.parentNode}}function m(a){var b;if(a){b=new H(a,a);for(a=b.current();a;a=b.next())if(a.nodeType===3)return a}}function n(a,b){var c,d;if(!a){a=l(G.getStart());if(!a)while(a=F.get(r))n(a,!1)}else d=G.getRng(!0),j(a)?(b!==!1&&(d.setStartBefore(a),d.setEndBefore(a)),F.remove(a)):(c=m(a),c=c.deleteData(0,1),F.remove(a,1)),G.setRng(d)}function o(){var a,b,c,i,j,k,n;a=G.getRng(!0),i=a.startOffset,k=a.startContainer,n=k.nodeValue,b=l(G.getStart()),b&&(c=m(b)),n&&i>0&&i<n.length&&/\w/.test(n.charAt(i))&&/\w/.test(n.charAt(i-1))?(j=G.getBookmark(),a.collapse(!0),a=u(a,f(d)),a=I.split(a),h(d,e,a),G.moveToBookmark(j)):(!b||c.nodeValue!==q?(b=g(!0),c=b.firstChild,a.insertNode(b),i=1,h(d,e,b)):h(d,e,b),G.setCursorLocation(c,i))}function p(){var a=G.getRng(!0),b,c,h,j,l,m,n=[],o,p;b=a.startContainer,c=a.startOffset,l=b;if(b.nodeType==3){if(c!=b.nodeValue.length||b.nodeValue===q)j=!0;l=l.parentNode}while(l){if(k(l,d,e)){m=l;break}l.nextSibling&&(j=!0),n.push(l),l=l.parentNode}if(!m)return;if(j)h=G.getBookmark(),a.collapse(!0),a=u(a,f(d),!0),a=I.split(a),i(d,e,a),G.moveToBookmark(h);else{p=g(),l=p;for(o=n.length-1;o>=0;o--)l.appendChild(n[o].cloneNode(!1)),l=l.firstChild;l.appendChild(F.doc.createTextNode(q)),l=l.firstChild,F.insertAfter(p,m),G.setCursorLocation(l,1)}}var q,r="_mce_caret",s=b.settings.caret_debug;q=a.isGecko?"​":N,b.onBeforeGetContent.addToTop(function(){var a=[],b;if(j(l(G.getStart()),a)){b=a.length;while(b--)F.setAttrib(a[b],"data-mce-bogus","1")}}),a.each("onMouseUp onKeyUp".split(" "),function(a){b[a].addToTop(function(){n()})}),b.onKeyDown.addToTop(function(a,b){var c=b.keyCode;(c==8||c==37||c==39)&&n(l(G.getStart()))}),c=="apply"?o():p()}var D={},E=a.each,F=b.dom,G=b.selection,H=a.dom.TreeWalker,I=new a.dom.RangeUtils(F),J=b.schema.isValidChild,K=F.isBlock,L=b.settings.forced_root_block,M=F.nodeIndex,N="﻿",O=/^(src|href|style)$/,P=!1,Q=!0,R,S=function(a){var c;return b.dom.getParent(a,function(a){return c=b.dom.getStyle(a,"text-decoration"),c&&c!=="none"}),c},T=function(a){var c;a.nodeType===1&&a.parentNode&&a.parentNode.nodeType===1&&(c=S(a.parentNode),b.dom.getStyle(a,"color")&&c?b.dom.setStyle(a,"text-decoration",c):b.dom.getStyle(a,"textdecoration")===c&&b.dom.setStyle(a,"text-decoration",null))};a.extend(this,{get:f,register:g,apply:h,remove:i,toggle:j,match:l,matchAll:m,matchNode:k,canApply:n})}}(tinymce),tinymce.onAddEditor.add(function(a,b){var c,d,e,f=b.settings;if(f.inline_styles){d=a.explode(f.font_size_legacy_values);function g(b,c){a.each(c,function(a,c){a&&e.setStyle(b,c,a)}),e.rename(b,"span")}c={font:function(a,b){g(b,{backgroundColor:b.style.backgroundColor,color:b.color,fontFamily:b.face,fontSize:d[parseInt(b.size)-1]})},u:function(a,b){g(b,{textDecoration:"underline"})},strike:function(a,b){g(b,{textDecoration:"line-through"})}};function h(d,g){e=d.dom,f.convert_fonts_to_spans&&a.each(e.select("font,u,strike",g.node),function(a){c[a.nodeName.toLowerCase()](b.dom,a)})}b.onPreProcess.add(h),b.onSetContent.add(h),b.onInit.add(function(){b.selection.onSetContent.add(h)})}}),function(a){var b=/^\s*|\s*$/g,c,d="B".replace(/A(.)|B/,"$1")==="$1",e={majorVersion:"3",minorVersion:"4.7",releaseDate:"2011-11-03",_init:function(){function l(a){return a.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(a.src)?(/_(src|dev)\.js/g.test(a.src)&&(b.suffix="_src"),(j=a.src.indexOf("?"))!=-1&&(b.query=a.src.substring(j+1)),b.baseURL=a.src.substring(0,a.src.lastIndexOf("/")),i&&b.baseURL.indexOf("://")==-1&&b.baseURL.indexOf("/")!==0&&(b.baseURL=i+b.baseURL),b.baseURL):null}var b=this,c=document,d=navigator,e=d.userAgent,f,g,h,i,j,k;b.isOpera=a.opera&&opera.buildNumber,b.isWebKit=/WebKit/.test(e),b.isIE=!b.isWebKit&&!b.isOpera&&/MSIE/gi.test(e)&&/Explorer/gi.test(d.appName),b.isIE6=b.isIE&&/MSIE [56]/.test(e),b.isIE7=b.isIE&&/MSIE [7]/.test(e),b.isIE8=b.isIE&&/MSIE [8]/.test(e),b.isIE9=b.isIE&&/MSIE [9]/.test(e),b.isGecko=!b.isWebKit&&/Gecko/.test(e),b.isMac=e.indexOf("Mac")!=-1,b.isAir=/adobeair/i.test(e),b.isIDevice=/(iPad|iPhone)/.test(e),b.isIOS5=b.isIDevice&&e.match(/AppleWebKit\/(\d*)/)[1]>=534;if(a.tinyMCEPreInit){b.suffix=tinyMCEPreInit.suffix,b.baseURL=tinyMCEPreInit.base,b.query=tinyMCEPreInit.query;return}b.suffix="",g=c.getElementsByTagName("base");for(f=0;f<g.length;f++)if(k=g[f].href)/^https?:\/\/[^\/]+$/.test(k)&&(k+="/"),i=k?k.match(/.*\//)[0]:"";g=c.getElementsByTagName("script");for(f=0;f<g.length;f++)if(l(g[f]))return;h=c.getElementsByTagName("head")[0];if(h){g=h.getElementsByTagName("script");for(f=0;f<g.length;f++)if(l(g[f]))return}return},is:function(a,b){return b?b=="array"&&a.hasOwnProperty&&a instanceof Array?!0:typeof a==b:a!==c},makeMap:function(a,b,c){var d;a=a||[],b=b||",",typeof a=="string"&&(a=a.split(b)),c=c||{},d=a.length;while(d--)c[a[d]]={};return c},each:function(a,b,d){var e,f;if(!a)return 0;d=d||a;if(a.length!==c){for(e=0,f=a.length;e<f;e++)if(b.call(d,a[e],e,a)===!1)return 0}else for(e in a)if(a.hasOwnProperty(e)&&b.call(d,a[e],e,a)===!1)return 0;return 1},map:function(a,b){var c=[];return e.each(a,function(a){c.push(b(a))}),c},grep:function(a,b){var c=[];return e.each(a,function(a){(!b||b(a))&&c.push(a)}),c},inArray:function(a,b){var c,d;if(a)for(c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},extend:function(a,b){var d,f,g=arguments;for(d=1,f=g.length;d<f;d++)b=g[d],e.each(b,function(b,d){b!==c&&(a[d]=b)});return a},trim:function(a){return(a?""+a:"").replace(b,"")},create:function(a,b,c){var d=this,e,f,g,h,i,j=0;a=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(a),g=a[3].match(/(^|\.)(\w+)$/i)[2],f=d.createNS(a[3].replace(/\.\w+$/,""),c);if(f[g])return;if(a[2]=="static"){f[g]=b,this.onCreate&&this.onCreate(a[2],a[3],f[g]);return}b[g]||(b[g]=function(){},j=1),f[g]=b[g],d.extend(f[g].prototype,b),a[5]&&(e=d.resolve(a[5]).prototype,h=a[5].match(/\.(\w+)$/i)[1],i=f[g],j?f[g]=function(){return e[h].apply(this,arguments)}:f[g]=function(){return this.parent=e[h],i.apply(this,arguments)},f[g].prototype[g]=f[g],d.each(e,function(a,b){f[g].prototype[b]=e[b]}),d.each(b,function(a,b){e[b]?f[g].prototype[b]=function(){return this.parent=e[b],a.apply(this,arguments)}:b!=g&&(f[g].prototype[b]=a)})),d.each(b["static"],function(a,b){f[g][b]=a}),this.onCreate&&this.onCreate(a[2],a[3],f[g].prototype)},walk:function(a,b,c,d){d=d||this,a&&(c&&(a=a[c]),e.each(a,function(a,f){if(b.call(d,a,f,c)===!1)return!1;e.walk(a,b,c,d)}))},createNS:function(b,c){var d,e;c=c||a,b=b.split(".");for(d=0;d<b.length;d++)e=b[d],c[e]||(c[e]={}),c=c[e];return c},resolve:function(b,c){var d,e;c=c||a,b=b.split(".");for(d=0,e=b.length;d<e;d++){c=c[b[d]];if(!c)break}return c},addUnload:function(b,c){var d=this;b={func:b,scope:c||this};if(!d.unloads){function e(){var b=d.unloads,c,i;if(b){for(i in b)c=b[i],c&&c.func&&c.func.call(c.scope,1);a.detachEvent?(a.detachEvent("onbeforeunload",f),a.detachEvent("onunload",e)):a.removeEventListener&&a.removeEventListener("unload",e,!1),d.unloads=c=b=w=e=0,a.CollectGarbage&&CollectGarbage()}}function f(){var b=document;if(b.readyState=="interactive"){function c(){b.detachEvent("onstop",c),e&&e(),b=0}b&&b.attachEvent("onstop",c),a.setTimeout(function(){b&&b.detachEvent("onstop",c)},0)}}a.attachEvent?(a.attachEvent("onunload",e),a.attachEvent("onbeforeunload",f)):a.addEventListener&&a.addEventListener("unload",e,!1),d.unloads=[b]}else d.unloads.push(b);return b},removeUnload:function(a){var b=this.unloads,c=null;return e.each(b,function(d,e){if(d&&d.func==a)return b.splice(e,1),c=a,!1}),c},explode:function(a,b){return a?e.map(a.split(b||","),e.trim):a},_addVer:function(a){var b;return this.query?(b=(a.indexOf("?")==-1?"?":"&")+this.query,a.indexOf("#")==-1?a+b:a.replace("#",b+"#")):a},_replace:function(a,b,e){return d?e.replace(a,function(){var a=b,d=arguments,e;for(e=0;e<d.length-2;e++)d[e]===c?a=a.replace(new RegExp("\\$"+e,"g"),""):a=a.replace(new RegExp("\\$"+e,"g"),d[e]);return a}):e.replace(a,b)}};e._init(),a.tinymce=a.tinyMCE=e}(window),tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(a){this.scope=a||this,this.listeners=[]},add:function(a,b){return this.listeners.push({cb:a,scope:b||this.scope}),a},addToTop:function(a,b){return this.listeners.unshift({cb:a,scope:b||this.scope}),a},remove:function(a){var b=this.listeners,c=null;return tinymce.each(b,function(d,e){if(a==d.cb)return c=a,b.splice(e,1),!1}),c},dispatch:function(){var a,b=arguments,c,d=this.listeners,e;for(c=0;c<d.length;c++){e=d[c],a=e.cb.apply(e.scope,b);if(a===!1)break}return a}}),function(){var a=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(b,c){var d=this,e,f,g,h;b=tinymce.trim(b),c=d.settings=c||{};if(/^([\w\-]+):([^\/]{2})/i.test(b)||/^\s*#/.test(b)){d.source=b;return}b.indexOf("/")===0&&b.indexOf("//")!==0&&(b=(c.base_uri?c.base_uri.protocol||"http":"http")+"://mce_host"+b),/^[\w-]*:?\/\//.test(b)||(h=c.base_uri?c.base_uri.path:(new tinymce.util.URI(location.href)).directory,b=(c.base_uri&&c.base_uri.protocol||"http")+"://mce_host"+d.toAbsPath(h,b)),b=b.replace(/@@/g,"(mce_at)"),b=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(b),a(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(a,c){var e=b[c];e&&(e=e.replace(/\(mce_at\)/g,"@@")),d[a]=e});if(g=c.base_uri){d.protocol||(d.protocol=g.protocol),d.userInfo||(d.userInfo=g.userInfo),!d.port&&d.host=="mce_host"&&(d.port=g.port);if(!d.host||d.host=="mce_host")d.host=g.host;d.source=""}},setPath:function(a){var b=this;a=/^(.*?)\/?(\w+)?$/.exec(a),b.path=a[0],b.directory=a[1],b.file=a[2],b.source="",b.getURI()},toRelative:function(a){var b=this,c;return a==="./"?a:(a=new tinymce.util.URI(a,{base_uri:b}),a.host!="mce_host"&&b.host!=a.host&&a.host||b.port!=a.port||b.protocol!=a.protocol?a.getURI():(c=b.toRelPath(b.path,a.path),a.query&&(c+="?"+a.query),a.anchor&&(c+="#"+a.anchor),c))},toAbsolute:function(a,b){var a=new tinymce.util.URI(a,{base_uri:this});return a.getURI(this.host==a.host&&this.protocol==a.protocol?b:0)},toRelPath:function(a,b){var c,d=0,e="",f,g;a=a.substring(0,a.lastIndexOf("/")),a=a.split("/"),c=b.split("/");if(a.length>=c.length)for(f=0,g=a.length;f<g;f++)if(f>=c.length||a[f]!=c[f]){d=f+1;break}if(a.length<c.length)for(f=0,g=c.length;f<g;f++)if(f>=a.length||a[f]!=c[f]){d=f+1;break}if(d==1)return b;for(f=0,g=a.length-(d-1);f<g;f++)e+="../";for(f=d-1,g=c.length;f<g;f++)f!=d-1?e+="/"+c[f]:e+=c[f];return e},toAbsPath:function(b,c){var d,e=0,f=[],g,h;g=/\/$/.test(c)?"/":"",b=b.split("/"),c=c.split("/"),a(b,function(a){a&&f.push(a)}),b=f;for(d=c.length-1,f=[];d>=0;d--){if(c[d].length==0||c[d]==".")continue;if(c[d]==".."){e++;continue}if(e>0){e--;continue}f.push(c[d])}return d=b.length-e,d<=0?h=f.reverse().join("/"):h=b.slice(0,d).join("/")+"/"+f.reverse().join("/"),h.indexOf("/")!==0&&(h="/"+h),g&&h.lastIndexOf("/")!==h.length-1&&(h+=g),h},getURI:function(a){var b,c=this;if(!c.source||a)b="",a||(c.protocol&&(b+=c.protocol+"://"),c.userInfo&&(b+=c.userInfo+"@"),c.host&&(b+=c.host),c.port&&(b+=":"+c.port)),c.path&&(b+=c.path),c.query&&(b+="?"+c.query),c.anchor&&(b+="#"+c.anchor),c.source=b;return c.source}})}(),function(){var a=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(b){var c=this.get(b),d;return c&&a(c.split("&"),function(a){a=a.split("="),d=d||{},d[unescape(a[0])]=unescape(a[1])}),d},setHash:function(b,c,d,e,f,g){var h="";a(c,function(a,b){h+=(h?"&":"")+escape(b)+"="+escape(a)}),this.set(b,h,d,e,f,g)},get:function(a){var b=document.cookie,c,d=a+"=",e;if(!b)return;e=b.indexOf("; "+d);if(e==-1){e=b.indexOf(d);if(e!=0)return null}else e+=2;return c=b.indexOf(";",e),c==-1&&(c=b.length),unescape(b.substring(e+d.length,c))},set:function(a,b,c,d,e,f){document.cookie=a+"="+escape(b)+(c?"; expires="+c.toGMTString():"")+(d?"; path="+escape(d):"")+(e?"; domain="+e:"")+(f?"; secure":"")},remove:function(a,b){var c=new Date;c.setTime(c.getTime()-1e3),this.set(a,"",c,b,c)}})}(),function(){function serialize(a,b){var c,d,e;b=b||'"';if(a==null)return"null";e=typeof a;if(e=="string")return d="\bb\tt\nn\ff\rr\"\"''\\\\",b+a.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,e){return b==='"'&&a==="'"?a:(c=d.indexOf(e),c+1?"\\"+d.charAt(c+1):(a=e.charCodeAt().toString(16),"\\u"+"0000".substring(a.length)+a))})+b;if(e=="object"){if(a.hasOwnProperty&&a instanceof Array){for(c=0,d="[";c<a.length;c++)d+=(c>0?",":"")+serialize(a[c],b);return d+"]"}d="{";for(c in a)a.hasOwnProperty(c)&&(d+=typeof a[c]!="function"?(d.length>1?","+b:b)+c+b+":"+serialize(a[c],b):"");return d+"}"}return""+a}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}}(),tinymce.create("static tinymce.util.XHR",{send:function(a){function f(a){b=0;try{b=new ActiveXObject(a)}catch(c){}return b}var b,c,d=window,e=0;a.scope=a.scope||this,a.success_scope=a.success_scope||a.scope,a.error_scope=a.error_scope||a.scope,a.async=a.async===!1?!1:!0,a.data=a.data||"",b=d.XMLHttpRequest?new XMLHttpRequest:f("Microsoft.XMLHTTP")||f("Msxml2.XMLHTTP");if(b){b.overrideMimeType&&b.overrideMimeType(a.content_type),b.open(a.type||(a.data?"POST":"GET"),a.url,a.async),a.content_type&&b.setRequestHeader("Content-Type",a.content_type),b.setRequestHeader("X-Requested-With","XMLHttpRequest"),b.send(a.data);function g(){!a.async||b.readyState==4||e++>1e4?(a.success&&e<1e4&&b.status==200?a.success.call(a.success_scope,""+b.responseText,b,a):a.error&&a.error.call(a.error_scope,e>1e4?"TIMED_OUT":"GENERAL",b,a),b=null):d.setTimeout(g,10)}if(!a.async)return g();c=d.setTimeout(g,10)}}}),function(){var a=tinymce.extend,b=tinymce.util.JSON,c=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(b){this.settings=a({},b),this.count=0},send:function(d){var e=d.error,f=d.success;d=a(this.settings,d),d.success=function(a,c){a=b.parse(a),typeof a=="undefined"&&(a={error:"JSON Parse error."}),a.error?e.call(d.error_scope||d.scope,a.error,c):f.call(d.success_scope||d.scope,a.result)},d.error=function(a,b){e&&e.call(d.error_scope||d.scope,a,b)},d.data=b.serialize({id:d.id||"c"+this.count++,method:d.method,params:d.params}),d.content_type="application/json",c.send(d)},"static":{sendRPC:function(a){return(new tinymce.util.JSONRequest).send(a)}}})}(),function(a){a.VK={DELETE:46,BACKSPACE:8,ENTER:13,TAB:9,SPACEBAR:32,UP:38,DOWN:40}}(tinymce),function(a){function e(b){var e=b.dom,f=b.selection;b.onKeyDown.add(function(b,g){var h,i,j,k,l;l=g.keyCode==d;if(l||g.keyCode==c){g.preventDefault(),h=f.getRng(),i=e.getParent(h.startContainer,e.isBlock),l&&(i=e.getNext(i,e.isBlock));if(i){j=i.firstChild;while(j&&j.nodeType==3&&j.nodeValue.length==0)j=j.nextSibling;j&&j.nodeName==="SPAN"&&(k=j.cloneNode(!1))}b.getDoc().execCommand(l?"ForwardDelete":"Delete",!1,null),i=e.getParent(h.startContainer,e.isBlock),a.each(e.select("span.Apple-style-span,font.Apple-style-span",i),function(a){var b=f.getBookmark();k?e.replace(k.cloneNode(!1),a,!0):e.remove(a,!0),f.moveToBookmark(b)})}})}function f(a){a.onKeyUp.add(function(a,b){var e=b.keyCode;if(e==d||e==c)if(a.dom.isEmpty(a.getBody())){a.setContent("",{format:"raw"}),a.nodeChanged();return}})}function g(a){a.dom.bind(a.getDoc(),"focusin",function(){a.selection.setRng(a.selection.getRng())})}function h(b){b.onKeyDown.add(function(b,d){if(d.keyCode===c&&b.selection.isCollapsed()&&b.selection.getRng(!0).startOffset===0){var e=b.selection.getNode(),f=e.previousSibling;f&&f.nodeName&&f.nodeName.toLowerCase()==="hr"&&(b.dom.remove(f),a.dom.Event.cancel(d))}})}function i(a){Range.prototype.getClientRects||a.onMouseDown.add(function(a,b){if(b.target.nodeName==="HTML"){var c=a.getBody();c.blur(),setTimeout(function(){c.focus()},0)}})}function j(a){a.onClick.add(function(a,b){b=b.target,/^(IMG|HR)$/.test(b.nodeName)&&a.selection.getSel().setBaseAndExtent(b,0,b,1),b.nodeName=="A"&&a.dom.hasClass(b,"mceItemAnchor")&&a.selection.select(b),a.nodeChanged()})}function k(b){var c,d;b.dom.bind(b.getDoc(),"selectionchange",function(){d&&(clearTimeout(d),d=0),d=window.setTimeout(function(){var d=b.selection.getRng();if(!c||!a.dom.RangeUtils.compareRanges(d,c))b.nodeChanged(),c=d},50)})}function l(a){document.body.setAttribute("role","application")}var b=a.VK,c=b.BACKSPACE,d=b.DELETE;a.create("tinymce.util.Quirks",{Quirks:function(b){a.isWebKit&&(e(b),f(b),g(b),j(b),a.isIDevice&&k(b)),a.isIE&&(h(b),f(b),l(b)),a.isGecko&&(h(b),i(b))}})}(tinymce),function(a){function j(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.textContent||b.innerText||a}function k(a,b){var d,e,f,g={};if(a){a=a.split(","),b=b||10;for(d=0;d<a.length;d+=2)e=String.fromCharCode(parseInt(a[d],b)),c[e]||(f="&"+a[d+1]+";",g[e]=f,g[f]=e);return g}}var b,c,d,e=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,g=/[<>&\"\']/g,h=/&(#x|#)?([\w]+);/g,i={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};c={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},d={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},b=k("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),a.html=a.html||{},a.html.Entities={encodeRaw:function(a,b){return a.replace(b?e:f,function(a){return c[a]||a})},encodeAllRaw:function(a){return(""+a).replace(g,function(a){return c[a]||a})},encodeNumeric:function(a,b){return a.replace(b?e:f,function(a){return a.length>1?"&#"+((a.charCodeAt(0)-55296)*1024+(a.charCodeAt(1)-56320)+65536)+";":c[a]||"&#"+a.charCodeAt(0)+";"})},encodeNamed:function(a,d,g){return g=g||b,a.replace(d?e:f,function(a){return c[a]||g[a]||a})},getEncodeFunc:function(d,g){function i(a,b){return a.replace(b?e:f,function(a){return c[a]||g[a]||"&#"+a.charCodeAt(0)+";"||a})}function j(a,b){return h.encodeNamed(a,b,g)}var h=a.html.Entities;return g=k(g)||b,d=a.makeMap(d.replace(/\+/g,",")),d.named&&d.numeric?i:d.named?g?j:h.encodeNamed:d.numeric?h.encodeNumeric:h.encodeRaw},decode:function(a){return a.replace(h,function(a,c,e){return c?(e=parseInt(e,c.length===2?16:10),e>65535?(e-=65536,String.fromCharCode(55296+(e>>10),56320+(e&1023))):i[e]||String.fromCharCode(e)):d[a]||b[a]||j(a)})}}}(tinymce),tinymce.html.Styles=function(a,b){function l(a,b,c,d){function e(a){return a=parseInt(a).toString(16),a.length>1?a:"0"+a}return"#"+e(b)+e(c)+e(d)}var c=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,d=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,e=/\s*([^:]+):\s*([^;]+);?/g,f=/\s+$/,g=/rgb/,h,i,j={},k;a=a||{},k="\\\" \\' \\; \\: ; : ﻿".split(" ");for(i=0;i<k.length;i++)j[k[i]]="﻿"+i,j["﻿"+i]=k[i];return{toHex:function(a){return a.replace(c,l)},parse:function(b){function p(a,b){var c,d,e,f;c=g[a+"-top"+b];if(!c)return;d=g[a+"-right"+b];if(c!=d)return;e=g[a+"-bottom"+b];if(d!=e)return;f=g[a+"-left"+b];if(e!=f)return;g[a+b]=f,delete g[a+"-top"+b],delete g[a+"-right"+b],delete g[a+"-bottom"+b],delete g[a+"-left"+b]}function q(a){var b=g[a],c;if(!b||b.indexOf(" ")<0)return;b=b.split(" "),c=b.length;while(c--)if(b[c]!==b[0])return!1;return g[a]=b[0],!0}function r(a,b,c,d){if(!q(b))return;if(!q(c))return;if(!q(d))return;g[a]=g[b]+" "+g[c]+" "+g[d],delete g[b],delete g[c],delete g[d]}function s(a){return m=!0,j[a]}function t(a,b){return m&&(a=a.replace(/\uFEFF[0-9]/g,function(a){return j[a]})),b||(a=a.replace(/\\([\'\";:])/g,"$1")),a}var g={},h,i,k,m,n=a.url_converter,o=a.url_converter_scope||this;if(b){b=b.replace(/\\[\"\';:\uFEFF]/g,s).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(a){return a.replace(/[;:]/g,s)});while(h=e.exec(b)){i=h[1].replace(f,"").toLowerCase(),k=h[2].replace(f,"");if(i&&k.length>0){if(i==="font-weight"&&k==="700")k="bold";else if(i==="color"||i==="background-color")k=k.toLowerCase();k=k.replace(c,l),k=k.replace(d,function(a,b,c,d,e,f){return e=e||f,e?(e=t(e),"'"+e.replace(/\'/g,"\\'")+"'"):(b=t(b||c||d),n&&(b=n.call(o,b,"style")),"url('"+b.replace(/\'/g,"\\'")+"')")}),g[i]=m?t(k,!0):k}e.lastIndex=h.index+h[0].length}p("border",""),p("border","-width"),p("border","-color"),p("border","-style"),p("padding",""),p("margin",""),r("border","border-width","border-style","border-color"),g.border==="medium none"&&delete g.border}return g},serialize:function(a,c){function g(c){var e,f,g,i;e=b.styles[c];if(e)for(f=0,g=e.length;f<g;f++)c=e[f],i=a[c],i!==h&&i.length>0&&(d+=(d.length>0?" ":"")+c+": "+i+";")}var d="",e,f;if(c&&b&&b.styles)g("*"),g(c);else for(e in a)f=a[e],f!==h&&f.length>0&&(d+=(d.length>0?" ":"")+e+": "+f+";");return d}}},function(a){function l(a,b){return a.split(b||",")}function m(a,b){function e(b){return b.replace(/[A-Z]+/g,function(b){return e(a[b])})}var c,d={};for(c in a)a.hasOwnProperty(c)&&(a[c]=e(a[c]));return e(b).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(a,b,c,e){c=l(c,"|"),d[b]={attributes:j(c),attributesOrder:c,children:j(e,"|",{"#comment":{}})}}),d}var b={},c,d,e,f,g={},h,i,j=a.makeMap,k=a.each;d="h1,h2,h3,h4,h5,h6,hr,p,div,address,pre,form,table,tbody,thead,tfoot,th,tr,td,li,ol,ul,caption,blockquote,center,dl,dt,dd,dir,fieldset,noscript,menu,isindex,samp,header,footer,article,section,hgroup",d=j(d,",",j(d.toUpperCase())),b=m({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]"),c=j("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected,autoplay,loop,controls"),e=j("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,source"),f=a.extend(j("td,th,iframe,video,audio,object"),e),h=j("pre,script,style,textarea"),i=j("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),a.html.Schema=function(m){function t(a){return new RegExp("^"+a.replace(/([?+*])/g,".$1")+"$")}function u(b){var c,d,e,f,g,h,i,k,m,n,p,r,s,u,v,w,x,y,A,B,C,D,E=/^([#+-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,F=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,G=/[*?+]/;if(b){b=l(b),o["@"]&&(x=o["@"].attributes,y=o["@"].attributesOrder);for(c=0,d=b.length;c<d;c++){h=E.exec(b[c]);if(h){v=h[1],n=h[2],w=h[3],m=h[4],s={},u=[],i={attributes:s,attributesOrder:u},v==="#"&&(i.paddEmpty=!0),v==="-"&&(i.removeEmpty=!0);if(x){for(B in x)s[B]=x[B];u.push.apply(u,y)}if(m){m=l(m,"|");for(e=0,f=m.length;e<f;e++){h=F.exec(m[e]);if(h){k={},r=h[1],p=h[2].replace(/::/g,":"),v=h[3],D=h[4],r==="!"&&(i.attributesRequired=i.attributesRequired||[],i.attributesRequired.push(p),k.required=!0);if(r==="-"){delete s[p],u.splice(a.inArray(u,p),1);continue}v&&(v==="="&&(i.attributesDefault=i.attributesDefault||[],i.attributesDefault.push({name:p,value:D}),k.defaultValue=D),v===":"&&(i.attributesForced=i.attributesForced||[],i.attributesForced.push({name:p,value:D}),k.forcedValue=D),v==="<"&&(k.validValues=j(D,"?"))),G.test(p)?(i.attributePatterns=i.attributePatterns||[],k.pattern=t(p),i.attributePatterns.push(k)):(s[p]||u.push(p),s[p]=k)}}}!x&&n=="@"&&(x=s,y=u),w&&(i.outputName=n,o[w]=i),G.test(n)?(i.pattern=t(n),q.push(i)):o[n]=i}}}}function v(a){o={},q=[],u(a),k(b,function(a,b){p[b]=a.children})}function w(a){var b=/^(~)?(.+)$/;a&&k(l(a),function(a){var c=b.exec(a),e=c[1]==="~",f=e?"span":"div",h=c[2];p[h]=p[f],g[h]=f,e||(d[h]={}),k(p,function(a,b){a[f]&&(a[h]=a[f])})})}function x(a){var b=/^([+\-]?)(\w+)\[([^\]]+)\]$/;a&&k(l(a),function(a){var c=b.exec(a),d,e;c&&(e=c[1],e?d=p[c[2]]:d=p[c[2]]={"#comment":{}},d=p[c[2]],k(l(c[3],"|"),function(a){e==="-"?delete d[a]:d[a]={}}))})}function y(a){var b=o[a],c;if(b)return b;c=q.length;while(c--){b=q[c];if(b.pattern.test(a))return b}}var n=this,o={},p={},q=[],r,s;m=m||{},m.verify_html===!1&&(m.valid_elements="*[*]"),m.valid_styles&&(r={},k(m.valid_styles,function(b,c){r[c]=a.explode(b)})),s=m.whitespace_elements?j(m.whitespace_elements):h,m.valid_elements?v(m.valid_elements):(k(b,function(a,b){o[b]={attributes:a.
attributes,attributesOrder:a.attributesOrder},p[b]=a.children}),k(l("strong/b,em/i"),function(a){a=l(a,"/"),o[a[1]].outputName=a[0]}),o.img.attributesDefault=[{name:"alt",value:""}],k(l("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr"),function(a){o[a].removeEmpty=!0}),k(l("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(a){o[a].paddEmpty=!0})),w(m.custom_elements),x(m.valid_children),u(m.extended_valid_elements),x("+ol[ul|ol],+ul[ul|ol]"),y("span")||u("span[!data-mce-type|*]"),m.invalid_elements&&a.each(a.explode(m.invalid_elements),function(a){o[a]&&delete o[a]}),n.children=p,n.styles=r,n.getBoolAttrs=function(){return c},n.getBlockElements=function(){return d},n.getShortEndedElements=function(){return e},n.getSelfClosingElements=function(){return i},n.getNonEmptyElements=function(){return f},n.getWhiteSpaceElements=function(){return s},n.isValidChild=function(a,b){var c=p[a];return!!c&&!!c[b]},n.getElementRule=y,n.getCustomElements=function(){return g},n.addValidElements=u,n.setValidElements=v,n.addCustomElements=w,n.addValidChildren=x},a.html.Schema.boolAttrMap=c,a.html.Schema.blockElementsMap=d}(tinymce),function(a){a.html.SaxParser=function(b,c){var d=this,e=function(){};b=b||{},d.schema=c=c||new a.html.Schema,b.fix_self_closing!==!1&&(b.fix_self_closing=!0),a.each("comment cdata text start end pi doctype".split(" "),function(a){a&&(d[a]=b[a]||e)}),d.parse=function(d){function N(a){var b,c;b=j.length;while(b--)if(j[b].name===a)break;if(b>=0){for(c=j.length-1;c>=b;c--)a=j[c],a.valid&&e.end(a.name);j.length=b}}var e=this,f,g=0,h,i,j=[],k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J=0,K=a.html.Entities.decode,L,M;F=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([^\\s\\/<>]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/)>))","g"),G=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g,H={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi},q=c.getShortEndedElements(),E=c.getSelfClosingElements(),r=c.getBoolAttrs(),t=b.validate,p=b.remove_internals,L=b.fix_self_closing,M=a.isIE,y=/^:/;while(f=F.exec(d)){g<f.index&&e.text(K(d.substr(g,f.index-g)));if(h=f[6])h=h.toLowerCase(),M&&y.test(h)&&(h=h.substr(1)),N(h);else if(h=f[7]){h=h.toLowerCase(),M&&y.test(h)&&(h=h.substr(1)),s=h in q,L&&E[h]&&j.length>0&&j[j.length-1].name===h&&N(h);if(!t||(u=c.getElementRule(h))){v=!0,t&&(z=u.attributes,A=u.attributePatterns),(x=f[8])?(o=x.indexOf("data-mce-type")!==-1,o&&p&&(v=!1),k=[],k.map={},x.replace(G,function(a,b,c,d,e){var f,g;b=b.toLowerCase(),c=b in r?b:K(c||d||e||"");if(t&&!o&&b.indexOf("data-")!==0){f=z[b];if(!f&&A){g=A.length;while(g--){f=A[g];if(f.pattern.test(b))break}g===-1&&(f=null)}if(!f)return;if(f.validValues&&!(c in f.validValues))return}k.map[b]=c,k.push({name:b,value:c})})):(k=[],k.map={});if(t&&!o){B=u.attributesRequired,C=u.attributesDefault,D=u.attributesForced;if(D){l=D.length;while(l--)w=D[l],n=w.name,I=w.value,I==="{$uid}"&&(I="mce_"+J++),k.map[n]=I,k.push({name:n,value:I})}if(C){l=C.length;while(l--)w=C[l],n=w.name,n in k.map||(I=w.value,I==="{$uid}"&&(I="mce_"+J++),k.map[n]=I,k.push({name:n,value:I}))}if(B){l=B.length;while(l--)if(B[l]in k.map)break;l===-1&&(v=!1)}k.map["data-mce-bogus"]&&(v=!1)}v&&e.start(h,k,s)}else v=!1;if(i=H[h]){i.lastIndex=g=f.index+f[0].length,(f=i.exec(d))?(v&&(m=d.substr(g,f.index-g)),g=f.index+f[0].length):(m=d.substr(g),g=d.length),v&&m.length>0&&e.text(m,!0),v&&e.end(h),F.lastIndex=g;continue}s||(!x||x.indexOf("/")!=x.length-1?j.push({name:h,valid:v}):v&&e.end(h))}else(h=f[1])?e.comment(h):(h=f[2])?e.cdata(h):(h=f[3])?e.doctype(h):(h=f[4])&&e.pi(h,f[5]);g=f.index+f[0].length}g<d.length&&e.text(K(d.substr(g)));for(l=j.length-1;l>=0;l--)h=j[l],h.valid&&e.end(h.name)}}}(tinymce),function(a){function d(a,b,c){var d,e,f=c?"lastChild":"firstChild",g=c?"prev":"next";if(a[f])return a[f];if(a!==b){d=a[g];if(d)return d;for(e=a.parent;e&&e!==b;e=e.parent){d=e[g];if(d)return d}}}function e(a,b){this.name=a,this.type=b,b===1&&(this.attributes=[],this.attributes.map={})}var b=/^[ \t\r\n]*$/,c={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};a.extend(e.prototype,{replace:function(a){var b=this;return a.parent&&a.remove(),b.insert(a,b),b.remove(),b},attr:function(a,b){var c=this,d,e,f;if(typeof a!="string"){for(e in a)c.attr(e,a[e]);return c}if(d=c.attributes){if(b!==f){if(b===null){if(a in d.map){delete d.map[a],e=d.length;while(e--)if(d[e].name===a)return d=d.splice(e,1),c}return c}if(a in d.map){e=d.length;while(e--)if(d[e].name===a){d[e].value=b;break}}else d.push({name:a,value:b});return d.map[a]=b,c}return d.map[a]}},clone:function(){var a=this,b=new e(a.name,a.type),c,d,f,g,h;if(f=a.attributes){h=[],h.map={};for(c=0,d=f.length;c<d;c++)g=f[c],g.name!=="id"&&(h[h.length]={name:g.name,value:g.value},h.map[g.name]=g.value);b.attributes=h}return b.value=a.value,b.shortEnded=a.shortEnded,b},wrap:function(a){var b=this;return b.parent.insert(a,b),a.append(b),b},unwrap:function(){var a=this,b,c;for(b=a.firstChild;b;)c=b.next,a.insert(b,a,!0),b=c;a.remove()},remove:function(){var a=this,b=a.parent,c=a.next,d=a.prev;return b&&(b.firstChild===a?(b.firstChild=c,c&&(c.prev=null)):d.next=c,b.lastChild===a?(b.lastChild=d,d&&(d.next=null)):c.prev=d,a.parent=a.next=a.prev=null),a},append:function(a){var b=this,c;return a.parent&&a.remove(),c=b.lastChild,c?(c.next=a,a.prev=c,b.lastChild=a):b.lastChild=b.firstChild=a,a.parent=b,a},insert:function(a,b,c){var d;return a.parent&&a.remove(),d=b.parent||this,c?(b===d.firstChild?d.firstChild=a:b.prev.next=a,a.prev=b.prev,a.next=b,b.prev=a):(b===d.lastChild?d.lastChild=a:b.next.prev=a,a.next=b.next,a.prev=b,b.next=a),a.parent=d,a},getAll:function(a){var b=this,c,e=[];for(c=b.firstChild;c;c=d(c,b))c.name===a&&e.push(c);return e},empty:function(){var a=this,b,c,e;if(a.firstChild){b=[];for(e=a.firstChild;e;e=d(e,a))b.push(e);c=b.length;while(c--)e=b[c],e.parent=e.firstChild=e.lastChild=e.next=e.prev=null}return a.firstChild=a.lastChild=null,a},isEmpty:function(a){var c=this,e=c.firstChild,f,g;if(e)do{if(e.type===1){if(e.attributes.map["data-mce-bogus"])continue;if(a[e.name])return!1;f=e.attributes.length;while(f--){g=e.attributes[f].name;if(g==="name"||g.indexOf("data-")===0)return!1}}if(e.type===3&&!b.test(e.value))return!1}while(e=d(e,c));return!0},walk:function(a){return d(this,null,a)}}),a.extend(e,{create:function(a,b){var d,f;d=new e(a,c[a]||1);if(b)for(f in b)d.attr(f,b[f]);return d}}),a.html.Node=e}(tinymce),function(a){var b=a.html.Node;a.html.DomParser=function(c,d){function j(c){var f,g,h,i,j,k,l,m,n,o,p,q,r,s;q=a.makeMap("tr,td,th,tbody,thead,tfoot,table"),p=d.getNonEmptyElements();for(f=0;f<c.length;f++){g=c[f];if(!g.parent)continue;i=[g];for(h=g.parent;h&&!d.isValidChild(h.name,g.name)&&!q[h.name];h=h.parent)i.push(h);if(h&&i.length>1){i.reverse(),j=k=e.filterNode(i[0].clone());for(n=0;n<i.length-1;n++){d.isValidChild(k.name,i[n].name)?(l=e.filterNode(i[n].clone()),k.append(l)):l=k;for(m=i[n].firstChild;m&&m!=i[n+1];)s=m.next,l.append(m),m=s;k=l}j.isEmpty(p)?h.insert(g,i[0],!0):(h.insert(j,i[0],!0),h.insert(g,j)),h=i[0],(h.isEmpty(p)||h.firstChild===h.lastChild&&h.firstChild.name==="br")&&h.empty().remove()}else if(g.parent){if(g.name==="li"){r=g.prev;if(!r||r.name!=="ul"&&r.name!=="ul"){r=g.next;if(!r||r.name!=="ul"&&r.name!=="ul"){g.wrap(e.filterNode(new b("ul",1)));continue}r.insert(g,r.firstChild,!0);continue}r.append(g);continue}d.isValidChild(g.parent.name,"div")&&d.isValidChild("div",g.name)?g.wrap(e.filterNode(new b("div",1))):g.name==="style"||g.name==="script"?g.empty().remove():g.unwrap()}}}var e=this,f={},g=[],h={},i={};c=c||{},c.validate="validate"in c?c.validate:!0,c.root_name=c.root_name||"body",e.schema=d=d||new a.html.Schema,e.filterNode=function(a){var b,c,d;c in f&&(d=h[c],d?d.push(a):h[c]=[a]),b=g.length;while(b--)c=g[b].name,c in a.attributes.map&&(d=i[c],d?d.push(a):i[c]=[a]);return a},e.addNodeFilter=function(b,c){a.each(a.explode(b),function(a){var b=f[a];b||(f[a]=b=[]),b.push(c)})},e.addAttributeFilter=function(b,c){a.each(a.explode(b),function(a){var b;for(b=0;b<g.length;b++)if(g[b].name===a){g[b].callbacks.push(c);return}g.push({name:a,callbacks:[c]})})},e.parse=function(e,k){function F(){var a=m.firstChild,b,c;while(a)b=a.next,a.type==3||a.type==1&&a.name!=="p"&&!w[a.name]&&!a.attr("data-mce-type")?c?c.append(a):(c=G(E,1),m.insert(c,a),c.append(a)):c=null,a=b}function G(a,c){var d=new b(a,c),e;return a in f&&(e=h[a],e?e.push(d):h[a]=[d]),d}function H(a){var b,c,d;for(b=a.prev;b&&b.type===3;)c=b.value.replace(z,""),c.length>0?(b.value=c,b=b.prev):(d=b.prev,b.remove(),b=d)}var l,m,n,o,p,q,r,s,t,u,v,w,x,y=[],z,A,B,C,D,E;k=k||{},h={},i={},w=a.extend(a.makeMap("script,style,head,html,body,title,meta,param"),d.getBlockElements()),D=d.getNonEmptyElements(),C=d.children,v=c.validate,E="forced_root_block"in k?k.forced_root_block:c.forced_root_block,B=d.getWhiteSpaceElements(),x=/^[ \t\r\n]+/,z=/[ \t\r\n]+$/,A=/[ \t\r\n]+/g,l=new a.html.SaxParser({validate:v,fix_self_closing:!v,cdata:function(a){n.append(G("#cdata",4)).value=a},text:function(a,b){var c;B[n.name]||(a=a.replace(A," "),n.lastChild&&w[n.lastChild.name]&&(a=a.replace(x,""))),a.length!==0&&(c=G("#text",3),c.raw=!!b,n.append(c).value=a)},comment:function(a){n.append(G("#comment",8)).value=a},pi:function(a,b){n.append(G(a,7)).value=b,H(n)},doctype:function(a){var b;b=n.append(G("#doctype",10)),b.value=a,H(n)},start:function(a,b,c){var e,f,h,j,k,l,m,o;h=v?d.getElementRule(a):{};if(h){e=G(h.outputName||a,1),e.attributes=b,e.shortEnded=c,n.append(e),o=C[n.name],o&&C[e.name]&&!o[e.name]&&y.push(e),f=g.length;while(f--)k=g[f].name,k in b.map&&(t=i[k],t?t.push(e):i[k]=[e]);w[a]&&H(e),c||(n=e)}},end:function(a){var c,e,f,g,h;e=v?d.getElementRule(a):{};if(e){if(w[a]){if(!B[n.name]){for(c=n.firstChild;c&&c.type===3;)f=c.value.replace(x,""),f.length>0?(c.value=f,c=c.next):(g=c.next,c.remove(),c=g);for(c=n.lastChild;c&&c.type===3;)f=c.value.replace(z,""),f.length>0?(c.value=f,c=c.prev):(g=c.prev,c.remove(),c=g)}c=n.prev,c&&c.type===3&&(f=c.value.replace(x,""),f.length>0?c.value=f:c.remove())}if(e.removeEmpty||e.paddEmpty)if(n.isEmpty(D))if(e.paddEmpty)n.empty().append(new b("#text","3")).value=" ";else if(!n.attributes.map.name){h=n.parent,n.empty().remove(),n=h;return}n=n.parent}}},d),m=n=new b(k.context||c.root_name,11),l.parse(e),v&&y.length&&(k.context?k.invalid=!0:j(y)),E&&m.name=="body"&&F();if(!k.invalid){for(u in h){t=f[u],o=h[u],r=o.length;while(r--)o[r].parent||o.splice(r,1);for(p=0,q=t.length;p<q;p++)t[p](o,u,k)}for(p=0,q=g.length;p<q;p++){t=g[p];if(t.name in i){o=i[t.name],r=o.length;while(r--)o[r].parent||o.splice(r,1);for(r=0,s=t.callbacks.length;r<s;r++)t.callbacks[r](o,t.name,k)}}}return m},c.remove_trailing_brs&&e.addNodeFilter("br",function(b,c){var e,f=b.length,g,h=d.getBlockElements(),i=d.getNonEmptyElements(),j,k,l;h.body=1;for(e=0;e<f;e++){g=b[e],j=g.parent;if(h[g.parent.name]&&g===j.lastChild){k=g.prev;while(k){l=k.name;if(l!=="span"||k.attr("data-mce-type")!=="bookmark"){if(l!=="br")break;if(l==="br"){g=null;break}}k=k.prev}g&&(g.remove(),j.isEmpty(i)&&(elementRule=d.getElementRule(j.name),elementRule&&(elementRule.removeEmpty?j.remove():elementRule.paddEmpty&&(j.empty().append(new a.html.Node("#text",3)).value=" "))))}}})}}(tinymce),tinymce.html.Writer=function(a){var b=[],c,d,e,f,g;return a=a||{},c=a.indent,d=tinymce.makeMap(a.indent_before||""),e=tinymce.makeMap(a.indent_after||""),f=tinymce.html.Entities.getEncodeFunc(a.entity_encoding||"raw",a.entities),g=a.element_format=="html",{start:function(a,h,i){var j,k,l,m;c&&d[a]&&b.length>0&&(m=b[b.length-1],m.length>0&&m!=="\n"&&b.push("\n")),b.push("<",a);if(h)for(j=0,k=h.length;j<k;j++)l=h[j],b.push(" ",l.name,'="',f(l.value,!0),'"');!i||g?b[b.length]=">":b[b.length]=" />",i&&c&&e[a]&&b.length>0&&(m=b[b.length-1],m.length>0&&m!=="\n"&&b.push("\n"))},end:function(a){var d;b.push("</",a,">"),c&&e[a]&&b.length>0&&(d=b[b.length-1],d.length>0&&d!=="\n"&&b.push("\n"))},text:function(a,c){a.length>0&&(b[b.length]=c?a:f(a))},cdata:function(a){b.push("<![CDATA[",a,"]]>")},comment:function(a){b.push("<!--",a,"-->")},pi:function(a,d){d?b.push("<?",a," ",d,"?>"):b.push("<?",a,"?>"),c&&b.push("\n")},doctype:function(a){b.push("<!DOCTYPE",a,">",c?"\n":"")},reset:function(){b.length=0},getContent:function(){return b.join("").replace(/\n$/,"")}}},function(a){a.html.Serializer=function(b,c){var d=this,e=new a.html.Writer(b);b=b||{},b.validate="validate"in b?b.validate:!0,d.schema=c=c||new a.html.Schema,d.writer=e,d.serialize=function(a){function g(a){var b=d[a.type],h,j,k,l,m,n,o,p,q;if(!b){h=a.name,j=a.shortEnded,k=a.attributes;if(f&&k&&k.length>1){n=[],n.map={},q=c.getElementRule(a.name);for(o=0,p=q.attributesOrder.length;o<p;o++)l=q.attributesOrder[o],l in k.map&&(m=k.map[l],n.map[l]=m,n.push({name:l,value:m}));for(o=0,p=k.length;o<p;o++)l=k[o].name,l in n.map||(m=k.map[l],n.map[l]=m,n.push({name:l,value:m}));k=n}e.start(a.name,k,j);if(!j){if(a=a.firstChild)do g(a);while(a=a.next);e.end(h)}}else b(a)}var d,f;return f=b.validate,d={3:function(a,b){e.text(a.value,a.raw)},8:function(a){e.comment(a.value)},7:function(a){e.pi(a.name,a.value)},10:function(a){e.doctype(a.value)},4:function(a){e.cdata(a.value)},11:function(a){if(a=a.firstChild)do g(a);while(a=a.next)}},e.reset(),a.type==1&&!b.inner?g(a):d[11](a),e.getContent()}}}(tinymce),function(a){var b=a.each,c=a.is,d=a.isWebKit,e=a.isIE,f=a.html.Entities,g=/^([a-z0-9],?)+$/i,h=a.html.Schema.blockElementsMap,i=/^[ \t\r\n]*$/;a.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(b,c){var d=this,f,g;d.doc=b,d.win=window,d.files={},d.cssFlicker=!1,d.counter=0,d.stdMode=!a.isIE||b.documentMode>=8,d.boxModel=!a.isIE||b.compatMode=="CSS1Compat"||d.stdMode,d.hasOuterHTML="outerHTML"in b.createElement("a"),d.settings=c=a.extend({keep_values:!1,hex_colors:1},c),d.schema=c.schema,d.styles=new a.html.Styles({url_converter:c.url_converter,url_converter_scope:c.url_converter_scope},c.schema);if(a.isIE6)try{b.execCommand("BackgroundImageCache",!1,!0)}catch(h){d.cssFlicker=!0}if(e&&c.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(a){b.createElement(a)});for(g in c.schema.getCustomElements())b.createElement(g)}a.addUnload(d.destroy,d)},getRoot:function(){var a=this,b=a.settings;return b&&a.get(b.root_element)||a.doc.body},getViewPort:function(a){var b,c;return a=a?a:this.win,b=a.document,c=this.boxModel?b.documentElement:b.body,{x:a.pageXOffset||c.scrollLeft,y:a.pageYOffset||c.scrollTop,w:a.innerWidth||c.clientWidth,h:a.innerHeight||c.clientHeight}},getRect:function(a){var b,c=this,d;return a=c.get(a),b=c.getPos(a),d=c.getSize(a),{x:b.x,y:b.y,w:d.w,h:d.h}},getSize:function(a){var b=this,c,d;return a=b.get(a),c=b.getStyle(a,"width"),d=b.getStyle(a,"height"),c.indexOf("px")===-1&&(c=0),d.indexOf("px")===-1&&(d=0),{w:parseInt(c)||a.offsetWidth||a.clientWidth,h:parseInt(d)||a.offsetHeight||a.clientHeight}},getParent:function(a,b,c){return this.getParents(a,b,c,!1)},getParents:function(a,b,d,e){var f=this,g,h=f.settings,i=[];a=f.get(a),e=e===undefined,h.strict_root&&(d=d||f.getRoot()),c(b,"string")&&(g=b,b==="*"?b=function(a){return a.nodeType==1}:b=function(a){return f.is(a,g)});while(a){if(a==d||!a.nodeType||a.nodeType===9)break;if(!b||b(a)){if(!e)return a;i.push(a)}a=a.parentNode}return e?i:null},get:function(a){var b;if(a&&this.doc&&typeof a=="string"){b=a,a=this.doc.getElementById(a);if(a&&a.id!==b)return this.doc.getElementsByName(b)[1]}return a},getNext:function(a,b){return this._findSib(a,b,"nextSibling")},getPrev:function(a,b){return this._findSib(a,b,"previousSibling")},select:function(b,c){var d=this;return a.dom.Sizzle(b,d.get(c)||d.get(d.settings.root_element)||d.doc,[])},is:function(b,c){var d;if(b.length===undefined){if(c==="*")return b.nodeType==1;if(g.test(c)){c=c.toLowerCase().split(/,/),b=b.nodeName.toLowerCase();for(d=c.length-1;d>=0;d--)if(c[d]==b)return!0;return!1}}return a.dom.Sizzle.matches(c,b.nodeType?[b]:b).length>0},add:function(a,b,d,e,f){var g=this;return this.run(a,function(a){var h,i;return h=c(b,"string")?g.doc.createElement(b):b,g.setAttribs(h,d),e&&(e.nodeType?h.appendChild(e):g.setHTML(h,e)),f?h:a.appendChild(h)})},create:function(a,b,c){return this.add(this.doc.createElement(a),a,b,c,1)},createHTML:function(a,b,c){var d="",e=this,f;d+="<"+a;for(f in b)b.hasOwnProperty(f)&&(d+=" "+f+'="'+e.encode(b[f])+'"');return typeof c!="undefined"?d+">"+c+"</"+a+">":d+" />"},remove:function(b,c){return this.run(b,function(b){var d,e=b.parentNode;if(!e)return null;if(c)while(d=b.firstChild)!a.isIE||d.nodeType!==3||d.nodeValue?e.insertBefore(d,b):b.removeChild(d);return e.removeChild(b)})},setStyle:function(b,c,d){var f=this;return f.run(b,function(g){var h,i;h=g.style,c=c.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}),f.pixelStyles.test(c)&&(a.is(d,"number")||/^[\-0-9\.]+$/.test(d))&&(d+="px");switch(c){case"opacity":if(e){h.filter=d===""?"":"alpha(opacity="+d*100+")";if(!b.currentStyle||!b.currentStyle.hasLayout)h.display="inline-block"}h[c]=h["-moz-opacity"]=h["-khtml-opacity"]=d||"";break;case"float":e?h.styleFloat=d:h.cssFloat=d;break;default:h[c]=d||""}f.settings.update_styles&&f.setAttrib(g,"data-mce-style")})},getStyle:function(a,b,c){a=this.get(a);if(!a)return;if(this.doc.defaultView&&c){b=b.replace(/[A-Z]/g,function(a){return"-"+a});try{return this.doc.defaultView.getComputedStyle(a,null).getPropertyValue(b)}catch(d){return null}}return b=b.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}),b=="float"&&(b=e?"styleFloat":"cssFloat"),a.currentStyle&&c?a.currentStyle[b]:a.style?a.style[b]:undefined},setStyles:function(a,c){var d=this,e=d.settings,f;f=e.update_styles,e.update_styles=0,b(c,function(b,c){d.setStyle(a,c,b)}),e.update_styles=f,e.update_styles&&d.setAttrib(a,e.cssText)},removeAllAttribs:function(a){return this.run(a,function(a){var b,c=a.attributes;for(b=c.length-1;b>=0;b--)a.removeAttributeNode(c.item(b))})},setAttrib:function(a,d,e){var f=this;if(!a||!d)return;return f.settings.strict&&(d=d.toLowerCase()),this.run(a,function(a){var g=f.settings;if(e!==null)switch(d){case"style":if(!c(e,"string")){b(e,function(b,c){f.setStyle(a,c,b)});return}g.keep_values&&(e&&!f._isRes(e)?a.setAttribute("data-mce-style",e,2):a.removeAttribute("data-mce-style",2)),a.style.cssText=e;break;case"class":a.className=e||"";break;case"src":case"href":g.keep_values&&(g.url_converter&&(e=g.url_converter.call(g.url_converter_scope||f,e,d,a)),f.setAttrib(a,"data-mce-"+d,e,2));break;case"shape":a.setAttribute("data-mce-style",e)}c(e)&&e!==null&&e.length!==0?a.setAttribute(d,""+e,2):a.removeAttribute(d,2)})},setAttribs:function(a,c){var d=this;return this.run(a,function(a){b(c,function(b,c){d.setAttrib(a,c,b)})})},getAttrib:function(b,f,g){var h,i=this,j;b=i.get(b);if(!b||b.nodeType!==1)return g===j?!1:g;c(g)||(g="");if(/^(src|href|style|coords|shape)$/.test(f)){h=b.getAttribute("data-mce-"+f);if(h)return h}e&&i.props[f]&&(h=b[i.props[f]],h=h&&h.nodeValue?h.nodeValue:h),h||(h=b.getAttribute(f,2));if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(f))return b[i.props[f]]===!0&&h===""?f:h?f:"";if(b.nodeName==="FORM"&&b.getAttributeNode(f))return b.getAttributeNode(f).nodeValue;f==="style"&&(h=h||b.style.cssText,h&&(h=i.serializeStyle(i.parseStyle(h),b.nodeName),i.settings.keep_values&&!i._isRes(h)&&b.setAttribute("data-mce-style",h))),d&&f==="class"&&h&&(h=h.replace(/(apple|webkit)\-[a-z\-]+/gi,""));if(e)switch(f){case"rowspan":case"colspan":h===1&&(h="");break;case"size":if(h==="+0"||h===20||h===0)h="";break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":h===0&&(h="");break;case"hspace":h===-1&&(h="");break;case"maxlength":case"tabindex":if(h===32768||h===2147483647||h==="32768")h="";break;case"multiple":case"compact":case"noshade":case"nowrap":if(h===65535)return f;return g;case"shape":h=h.toLowerCase();break;default:f.indexOf("on")===0&&h&&(h=a._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+h))}return h!==j&&h!==null&&h!==""?""+h:g},getPos:function(a,b){var c=this,d=0,e=0,f,g=c.doc,h;a=c.get(a),b=b||g.body;if(a){if(a.getBoundingClientRect)return a=a.getBoundingClientRect(),f=c.boxModel?g.documentElement:g.body,d=a.left+(g.documentElement.scrollLeft||g.body.scrollLeft)-f.clientTop,e=a.top+(g.documentElement.scrollTop||g.body.scrollTop)-f.clientLeft,{x:d,y:e};h=a;while(h&&h!=b&&h.nodeType)d+=h.offsetLeft||0,e+=h.offsetTop||0,h=h.offsetParent;h=a.parentNode;while(h&&h!=b&&h.nodeType)d-=h.scrollLeft||0,e-=h.scrollTop||0,h=h.parentNode}return{x:d,y:e}},parseStyle:function(a){return this.styles.parse(a)},serializeStyle:function(a,b){return this.styles.serialize(a,b)},loadCSS:function(c){var d=this,f=d.doc,g;c||(c=""),g=d.select("head")[0],b(c.split(","),function(b){var c;if(d.files[b])return;d.files[b]=!0,c=d.create("link",{rel:"stylesheet",href:a._addVer(b)}),e&&f.documentMode&&f.recalc&&(c.onload=function(){f.recalc&&f.recalc(),c.onload=null}),g.appendChild(c)})},addClass:function(a,b){return this.run(a,function(a){var c;return b?this.hasClass(a,b)?a.className:(c=this.removeClass(a,b),a.className=(c!=""?c+" ":"")+b):0})},removeClass:function(b,c){var d=this,e;return d.run(b,function(b){var f;return d.hasClass(b,c)?(e||(e=new RegExp("(^|\\s+)"+c+"(\\s+|$)","g")),f=b.className.replace(e," "),f=a.trim(f!=" "?f:""),b.className=f,f||(b.removeAttribute("class"),b.removeAttribute("className")),f):b.className})},hasClass:function(a,b){return a=this.get(a),!a||!b?!1:(" "+a.className+" ").indexOf(" "+b+" ")!==-1},show:function(a){return this.setStyle(a,"display","block")},hide:function(a){return this.setStyle(a,"display","none")},isHidden:function(a){return a=this.get(a),!a||a.style.display=="none"||this.getStyle(a,"display")=="none"},uniqueId:function(a){return(a?a:"mce_")+this.counter++},setHTML:function(a,c){var d=this;return d.run(a,function(a){if(e){while(a.firstChild)a.removeChild(a.firstChild);try{a.innerHTML="<br />"+c,a.removeChild(a.firstChild)}catch(f){a=d.create("div"),a.innerHTML="<br />"+c,b(a.childNodes,function(b,c){c&&a.appendChild(b)})}}else a.innerHTML=c;return c})},getOuterHTML:function(a){var b,c=this;return a=c.get(a),a?a.nodeType===1&&c.hasOuterHTML?a.outerHTML:(b=(a.ownerDocument||c.doc).createElement("body"),b.appendChild(a.cloneNode(!0)),b.innerHTML):null},setOuterHTML:function(a,b,c){function f(a,b,c){var e,f;f=c.createElement("body"),f.innerHTML=b,e=f.lastChild;while(e)d.insertAfter(e.cloneNode(!0),a),e=e.previousSibling;d.remove(a)}var d=this;return this.run(a,function(a){a=d.get(a);if(a.nodeType==1){c=c||a.ownerDocument||d.doc;if(e)try{e&&a.nodeType==1?a.outerHTML=b:f(a,b,c)}catch(g){f(a,b,c)}else f(a,b,c)}})},decode:f.decode,encode:f.encodeAllRaw,insertAfter:function(a,b){return b=this.get(b),this.run(a,function(a){var c,d;return c=b.parentNode,d=b.nextSibling,d?c.insertBefore(a,d):c.appendChild(a),a})},isBlock:function(a){var b=a.nodeType;return b?b===1&&!!h[a.nodeName]:!!h[a]},replace:function(d,e,f){var g=this;return c(e,"array")&&(d=d.cloneNode(!0)),g.run(e,function(c){return f&&b(a.grep(c.childNodes),function(a){d.appendChild(a)}),c.parentNode.replaceChild(d,c)})},rename:function(a,c){var d=this,e;return a.nodeName!=c.toUpperCase()&&(e=d.create(c),b(d.getAttribs(a),function(b){d.setAttrib(e,b.nodeName,d.getAttrib(a,b.nodeName))}),d.replace(e,a,1)),e||a},findCommonAncestor:function(a,b){var c=a,d;while(c){d=b;while(d&&c!=d)d=d.parentNode;if(c==d)break;c=c.parentNode}return!c&&a.ownerDocument?a.ownerDocument.documentElement:c},toHex:function(a){function c(a){return a=parseInt(a).toString(16),a.length>1?a:"0"+a}var b=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(a);return b?(a="#"+c(b[1])+c(b[2])+c(b[3]),a):a},getClasses:function(){function i(c){b(c.imports,function(a){i(a)}),b(c.cssRules||c.rules,function(c){switch(c.type||1){case 1:c.selectorText&&b(c.selectorText.split(","),function(b){b=b.replace(/^\s*|\s*$|^\s\./g,"");if(/\.mce/.test(b)||!/\.[\w\-]+$/.test(b))return;h=b,b=a._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",b);if(g&&!(b=g(b,h)))return;f[b]||(d.push({"class":b}),f[b]=1)});break;case 3:i(c.styleSheet)}})}var c=this,d=[],e,f={},g=c.settings.class_filter,h;if(c.classes)return c.classes;try{b(c.doc.styleSheets,i)}catch(j){}return d.length>0&&(c.classes=d),d},run:function(a,c,d){var e=this,f;return e.doc&&typeof a=="string"&&(a=e.get(a)),a?(d=d||this,!a.nodeType&&(a.length||a.length===0)?(f=[],b(a,function(a,b){a&&(typeof a=="string"&&(a=e.doc.getElementById(a)),f.push(c.call(d,a,b)))}),f):c.call(d,a)):!1},getAttribs:function(a){var b;return a=this.get(a),a?e?(b=[],a.nodeName=="OBJECT"?a.attributes:(a.nodeName==="OPTION"&&this.getAttrib(a,"selected")&&b.push({specified:1,nodeName:"selected"}),a.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(a){b.push({specified:1,nodeName:a})}),b)):a.attributes:[]},isEmpty:function(b,c){var d=this,e,f,g,h,j,k;b=b.firstChild;if(b){h=new a.dom.TreeWalker(b),c=c||d.schema?d.schema.getNonEmptyElements():null;do{g=b.nodeType;if(g===1){if(b.getAttribute("data-mce-bogus"))continue;j=b.nodeName.toLowerCase();if(c&&c[j]){k=b.parentNode;if(j==="br"&&d.isBlock(k)&&k.firstChild===b&&k.lastChild===b)continue;return!1}f=d.getAttribs(b),e=b.attributes.length;while(e--){j=b.attributes[e].nodeName;if(j==="name"||j==="data-mce-bookmark")return!1}}if(g===3&&!i.test(b.nodeValue))return!1}while(b=h.next())}return!0},destroy:function(b){var c=this;c.events&&c.events.destroy(),c.win=c.doc=c.root=c.events=null,b||a.removeUnload(c.destroy)},createRng:function(){var b=this.doc;return b.createRange?b.createRange():new a.dom.Range(this)},nodeIndex:function(a,b){var c=0,d,e,f;if(a)for(d=a.nodeType,a=a.previousSibling,e=a;a;a=a.previousSibling){f=a.nodeType;if(b&&f==3)if(f==d||!a.nodeValue.length)continue;c++,d=f}return c},split:function(b,c,d){function j(b){var c,d=b.childNodes,f=b.nodeType;if(f==1&&b.getAttribute("data-mce-type")=="bookmark")return;for(c=d.length-1;c>=0;c--)j(d[c]);if(f!=9){if(f==3&&b.nodeValue.length>0){if(!e.isBlock(b.parentNode)||a.trim(b.nodeValue).length>0)return}else if(f==1){d=b.childNodes,d.length==1&&d[0]&&d[0].nodeType==1&&d[0].getAttribute("data-mce-type")=="bookmark"&&b.parentNode.insertBefore(d[0],b);if(d.length||/^(br|hr|input|img)$/i.test(b.nodeName))return}e.remove(b)}return b}var e=this,f=e.createRng(),g,h,i;if(b&&c)return f.setStart(b.parentNode,e.nodeIndex(b)),f.setEnd(c.parentNode,e.nodeIndex(c)),g=f.extractContents(),f=e.createRng(),f.setStart(c.parentNode,e.nodeIndex(c)+1),f.setEnd(b.parentNode,e.nodeIndex(b)+1),h=f.extractContents(),i=b.parentNode,i.insertBefore(j(g),b),d?i.replaceChild(d,c):i.insertBefore(c,b),i.insertBefore(j(h),b),e.remove(b),d||c},bind:function(b,c,d,e){var f=this;return f.events||(f.events=new a.dom.EventUtils),f.events.add(b,c,d,e||this)},unbind:function(b,c,d){var e=this;return e.events||(e.events=new a.dom.EventUtils),e.events.remove(b,c,d)},_findSib:function(a,b,d){var e=this,f=b;if(a){c(f,"string")&&(f=function(a){return e.is(a,b)});for(a=a[d];a;a=a[d])if(f(a))return a}return null},_isRes:function(a){return/^(top|left|bottom|right|width|height)/i.test(a)||/;\s*(top|left|bottom|right|width|height)/i.test(a)}}),a.DOM=new a.dom.DOMUtils(document,{process_html:0})}(tinymce),function(a){function b(a){function p(a,b){I(h,a,b)}function q(a,b){I(i,a,b)}function r(a){p(a.parentNode,o(a))}function s(a){p(a.parentNode,o(a)+1)}function t(a){q(a.parentNode,o(a))}function u(a){q(a.parentNode,o(a)+1)}function v(a){a?(c[l]=c[k],c[m]=c[j]):(c[k]=c[l],c[j]=c[m]),c.collapsed=h}function w(a){r(a),u(a)}function x(a){p(a,0),q(a,a.nodeType===1?a.childNodes.length:a.nodeValue.length)}function y(a,b){var d=c[k],e=c[j],f=c[l],g=c[m],h=b.startContainer,i=b.startOffset,n=b.endContainer,o=b.endOffset;if(a===0)return H(d,e,h,i);if(a===1)return H(f,g,h,i);if(a===2)return H(f,g,n,o);if(a===3)return H(d,e,n,o)}function z(){J(g)}function A(){return J(e)}function B(){return J(f)}function C(b){var c=this[k],d=this[j],e,f;c.nodeType!==3&&c.nodeType!==4||!c.nodeValue?(c.childNodes.length>0&&(f=c.childNodes[d]),f?c.insertBefore(b,f):c.appendChild(b)):d?d>=c.nodeValue.length?a.insertAfter(b,c):(e=c.splitText(d),c.parentNode.insertBefore(b,e)):c.parentNode.insertBefore(b,c)}function D(a){var b=c.extractContents();c.insertNode(a),a.appendChild(b),c.selectNode(a)}function E(){return n(new b(a),{startContainer:c[k],startOffset:c[j],endContainer:c[l],endOffset:c[m],collapsed:c.collapsed,commonAncestorContainer:c.commonAncestorContainer})}function F(a,b){var c;if(a.nodeType==3)return a;if(b<0)return a;c=a.firstChild;while(c&&b>0)--b,c=c.nextSibling;return c?c:a}function G(){return c[k]==c[l]&&c[j]==c[m]}function H(b,c,d,e){var f,g,h,i,j,k;if(b==d)return c==e?0:c<e?-1:1;f=d;while(f&&f.parentNode!=b)f=f.parentNode;if(f){g=0,h=b.firstChild;while(h!=f&&g<c)g++,h=h.nextSibling;return c<=g?-1:1}f=b;while(f&&f.parentNode!=d)f=f.parentNode;if(f){g=0,h=d.firstChild;while(h!=f&&g<e)g++,h=h.nextSibling;return g<e?-1:1}i=a.findCommonAncestor(b,d),j=b;while(j&&j.parentNode!=i)j=j.parentNode;j||(j=i),k=d;while(k&&k.parentNode!=i)k=k.parentNode;k||(k=i);if(j==k)return 0;h=i.firstChild;while(h){if(h==j)return-1;if(h==k)return 1;h=h.nextSibling}}function I(b,d,e){var f,g;b?(c[k]=d,c[j]=e):(c[l]=d,c[m]=e),f=c[l];while(f.parentNode)f=f.parentNode;g=c[k];while(g.parentNode)g=g.parentNode;g==f?H(c[k],c[j],c[l],c[m])>0&&c.collapse(b):c.collapse(b),c.collapsed=G(),c.commonAncestorContainer=a.findCommonAncestor(c[k],c[l])}function J(a){var b,d=0,e=0,f,g,h,i,j,m;if(c[k]==c[l])return K(a);for(b=c[l],f=b.parentNode;f;b=f,f=f.parentNode){if(f==c[k])return L(b,a);++d}for(b=c[k],f=b.parentNode;f;b=f,f=f.parentNode){if(f==c[l])return M(b,a);++e}g=e-d,h=c[k];while(g>0)h=h.parentNode,g--;i=c[l];while(g<0)i=i.parentNode,g++;for(j=h.parentNode,m=i.parentNode;j!=m;j=j.parentNode,m=m.parentNode)h=j,i=m;return N(h,i,a)}function K(a){var b,e,i,l,n,o,p;a!=g&&(b=d.createDocumentFragment());if(c[j]==c[m])return b;if(c[k].nodeType==3){e=c[k].nodeValue,i=e.substring(c[j],c[m]),a!=f&&(c[k].deleteData(c[j],c[m]-c[j]),c.collapse(h));if(a==g)return;return b.appendChild(d.createTextNode(i)),b}l=F(c[k],c[j]),n=c[m]-c[j];while(n>0)o=l.nextSibling,p=R(l,a),b&&b.appendChild(p),--n,l=o;return a!=f&&c.collapse(h),b}function L(a,b){var e,h,k,l,m,n;b!=g&&(e=d.createDocumentFragment()),h=O(a,b),e&&e.appendChild(h),k=o(a),l=k-c[j];if(l<=0)return b!=f&&(c.setEndBefore(a),c.collapse(i)),e;h=a.previousSibling;while(l>0)m=h.previousSibling,n=R(h,b),e&&e.insertBefore(n,e.firstChild),--l,h=m;return b!=f&&(c.setEndBefore(a),c.collapse(i)),e}function M(a,b){var e,i,j,k,l,n;b!=g&&(e=d.createDocumentFragment()),j=P(a,b),e&&e.appendChild(j),i=o(a),++i,k=c[m]-i,j=a.nextSibling;while(k>0)l=j.nextSibling,n=R(j,b),e&&e.appendChild(n),--k,j=l;return b!=f&&(c.setStartAfter(a),c.collapse(h)),e}function N(a,b,e){var i,j,k,l,m,n,p,q;e!=g&&(j=d.createDocumentFragment()),i=P(a,e),j&&j.appendChild(i),k=a.parentNode,l=o(a),m=o(b),++l,n=m-l,p=a.nextSibling;while(n>0)q=p.nextSibling,i=R(p,e),j&&j.appendChild(i),p=q,--n;return i=O(b,e),j&&j.appendChild(i),e!=f&&(c.setStartAfter(a),c.collapse(h)),j}function O(a,b){var d=F(c[l],c[m]-1),e,f,j,k,n,o=d!=c[l];if(d==a)return Q(d,o,i,b);e=d.parentNode,f=Q(e,i,i,b);while(e){while(d)j=d.previousSibling,k=Q(d,o,i,b),b!=g&&f.insertBefore(k,f.firstChild),o=h,d=j;if(e==a)return f;d=e.previousSibling,e=e.parentNode,n=Q(e,i,i,b),b!=g&&n.appendChild(f),f=n}}function P(a,b){var d=F(c[k],c[j]),e=d!=c[k],f,l,m,n,o;if(d==a)return Q(d,e,h,b);f=d.parentNode,l=Q(f,i,h,b);while(f){while(d)m=d.nextSibling,n=Q(d,e,h,b),b!=g&&l.appendChild(n),e=h,d=m;if(f==a)return l;d=f.nextSibling,f=f.parentNode,o=Q(f,i,h,b),b!=g&&o.appendChild(l),l=o}}function Q(a,b,d,e){var h,k,l,n,o;if(b)return R(a,e);if(a.nodeType==3){h=a.nodeValue,d?(n=c[j],k=h.substring(n),l=h.substring(0,n)):(n=c[m],k=h.substring(0,n),l=h.substring(n)),e!=f&&(a.nodeValue=l);if(e==g)return;return o=a.cloneNode(i),o.nodeValue=k,o}if(e==g)return;return a.cloneNode(i)}function R(a,b){if(b!=g)return b==f?a.cloneNode(h):a;a.parentNode.removeChild(a)}var c=this,d=a.doc,e=0,f=1
,g=2,h=!0,i=!1,j="startOffset",k="startContainer",l="endContainer",m="endOffset",n=tinymce.extend,o=a.nodeIndex;n(c,{startContainer:d,startOffset:0,endContainer:d,endOffset:0,collapsed:h,commonAncestorContainer:d,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:p,setEnd:q,setStartBefore:r,setStartAfter:s,setEndBefore:t,setEndAfter:u,collapse:v,selectNode:w,selectNodeContents:x,compareBoundaryPoints:y,deleteContents:z,extractContents:A,cloneContents:B,insertNode:C,surroundContents:D,cloneRange:E})}a.Range=b}(tinymce.dom),function(){function a(a){function f(b,c){var d,e=0,f,g,h,i,j,k,l=-1,m;d=b.duplicate(),d.collapse(c),m=d.parentElement();if(m.ownerDocument!==a.dom.doc)return;while(m.contentEditable==="false")m=m.parentNode;if(!m.hasChildNodes())return{node:m,inside:1};h=m.children,f=h.length-1;while(e<=f){k=Math.floor((e+f)/2),i=h[k],d.moveToElementText(i),l=d.compareEndPoints(c?"StartToStart":"EndToEnd",b);if(l>0)f=k-1;else{if(!(l<0))return{node:i};e=k+1}}if(l<0){i?d.collapse(!1):(d.moveToElementText(m),d.collapse(!0),i=m,g=!0),d.setEndPoint(c?"EndToStart":"EndToEnd",b);if(d.compareEndPoints(c?"StartToStart":"StartToEnd",b)>0){d=b.duplicate(),d.collapse(c),j=-1;while(m==d.parentElement()){if(d.move("character",-1)==0)break;j++}}j=j||d.text.replace("\r\n"," ").length}else d.collapse(!0),d.setEndPoint(c?"StartToStart":"StartToEnd",b),j=d.text.replace("\r\n"," ").length;return{node:i,position:l,offset:j,inside:g}}function g(){function n(a){var b=f(d,a),c,g,h=0,i,j,k;c=b.node,g=b.offset;if(b.inside&&!c.hasChildNodes()){e[a?"setStart":"setEnd"](c,0);return}if(g===j){e[a?"setStartBefore":"setEndAfter"](c);return}if(b.position<0){i=b.inside?c.firstChild:c.nextSibling;if(!i){e[a?"setStartAfter":"setEndAfter"](c);return}if(!g){i.nodeType==3?e[a?"setStart":"setEnd"](i,0):e[a?"setStartBefore":"setEndBefore"](i);return}while(i){k=i.nodeValue,h+=k.length;if(h>=g){c=i,h-=g,h=k.length-h;break}i=i.nextSibling}}else{i=c.previousSibling;if(!i)return e[a?"setStartBefore":"setEndBefore"](c);if(!g){c.nodeType==3?e[a?"setStart":"setEnd"](i,c.nodeValue.length):e[a?"setStartAfter":"setEndAfter"](i);return}while(i){h+=i.nodeValue.length;if(h>=g){c=i,h-=g;break}i=i.previousSibling}}e[a?"setStart":"setEnd"](c,h)}var d=a.getRng(),e=c.createRng(),g,i,j,k,l,m;g=d.item?d.item(0):d.parentElement();if(g.ownerDocument!=c.doc)return e;i=a.isCollapsed();if(d.item)return e.setStart(g.parentNode,c.nodeIndex(g)),e.setEnd(e.startContainer,e.startOffset+1),e;try{n(!0),i||n()}catch(o){if(o.number!=-2147024809)throw o;l=b.getBookmark(2),j=d.duplicate(),j.collapse(!0),g=j.parentElement(),i||(j=d.duplicate(),j.collapse(!1),k=j.parentElement(),k.innerHTML=k.innerHTML),g.innerHTML=g.innerHTML,b.moveToBookmark(l),d=a.getRng(),n(!0),i||n()}return e}var b=this,c=a.dom,d=!0,e=!1;this.getBookmark=function(b){function j(a){var a,b,d,e,f,g=[];b=a.parentNode,d=c.getRoot().parentNode;while(b!=d&&b.nodeType!==9){e=b.children,f=e.length;while(f--)if(a===e[f]){g.push(f);break}a=b,b=b.parentNode}return g}function k(a){var b;b=f(d,a);if(b)return{position:b.position,offset:b.offset,indexes:j(b.node),inside:b.inside}}var d=a.getRng(),e,g,i={};return b===2&&(d.item?i.start={ctrl:!0,indexes:j(d.item(0))}:(i.start=k(!0),a.isCollapsed()||(i.end=k()))),i},this.moveToBookmark=function(a){function e(a){var b,d,e,f;b=c.getRoot();for(d=a.length-1;d>=0;d--)f=b.children,e=a[d],e<=f.length-1&&(b=f[e]);return b}function f(c){var f=a[c?"start":"end"],g,h,l;f&&(g=f.position>0,h=d.createTextRange(),h.moveToElementText(e(f.indexes)),offset=f.offset,offset!==l?(h.collapse(f.inside||g),h.moveStart("character",g?-offset:offset)):h.collapse(c),b.setEndPoint(c?"StartToStart":"EndToStart",h),c&&b.collapse(!0))}var b,d=c.doc.body;a.start&&(a.start.ctrl?(b=d.createControlRange(),b.addElement(e(a.start.indexes)),b.select()):(b=d.createTextRange(),f(!0),f(),b.select()))},this.addRange=function(b){function n(a){var b,f,n,o,t;n=c.create("a"),b=a?g:j,f=a?i:k,o=e.duplicate();if(b==l||b==l.documentElement)b=m,f=0;b.nodeType==3?(b.parentNode.insertBefore(n,b),o.moveToElementText(n),o.moveStart("character",f),c.remove(n),e.setEndPoint(a?"StartToStart":"EndToEnd",o)):(t=b.childNodes,t.length?(f>=t.length?c.insertAfter(n,t[t.length-1]):b.insertBefore(n,t[f]),o.moveToElementText(n)):(n=l.createTextNode("﻿"),b.appendChild(n),o.moveToElementText(n.parentNode),o.collapse(d)),e.setEndPoint(a?"StartToStart":"EndToEnd",o),c.remove(n))}var e,f,g,i,j,k,l=a.dom.doc,m=l.body;g=b.startContainer,i=b.startOffset,j=b.endContainer,k=b.endOffset,e=m.createTextRange();if(g==j&&g.nodeType==1&&i==k-1&&i==k-1)try{f=m.createControlRange(),f.addElement(g.childNodes[i]),f.select();return}catch(o){}n(!0),n(),e.select()},this.getRangeAt=g}tinymce.dom.TridentSelection=a}(),function(){function n(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){i=i[a];var j=!1;while(i){if(i.sizcache===c){j=d[i.sizset];break}i.nodeType===1&&!f&&(i.sizcache=c,i.sizset=g);if(i.nodeName.toLowerCase()===b){j=i;break}i=i[a]}d[g]=j}}}function o(a,b,c,d,e,g){for(var h=0,i=d.length;h<i;h++){var j=d[h];if(j){j=j[a];var k=!1;while(j){if(j.sizcache===c){k=d[j.sizset];break}if(j.nodeType===1){g||(j.sizcache=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else if(f.filter(b,[j]).length>0){k=j;break}}j=j[a]}d[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,b=0,c=Object.prototype.toString,d=!1,e=!0;[0,0].sort(function(){return e=!1,0});var f=function(b,d,e,i){e=e||[],d=d||document;var j=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return e;var l=[],m,n,o,q,r=!0,s=f.isXML(d),t=b,u,v,w,x;do{a.exec(""),m=a.exec(t);if(m){t=m[3],l.push(m[1]);if(m[2]){q=m[3];break}}}while(m);if(l.length>1&&h.exec(b))if(l.length===2&&g.relative[l[0]])n=p(l[0]+l[1],d);else{n=g.relative[l[0]]?[d]:f(l.shift(),d);while(l.length)b=l.shift(),g.relative[b]&&(b+=l.shift()),n=p(b,n)}else{!i&&l.length>1&&d.nodeType===9&&!s&&g.match.ID.test(l[0])&&!g.match.ID.test(l[l.length-1])&&(u=f.find(l.shift(),d,s),d=u.expr?f.filter(u.expr,u.set)[0]:u.set[0]);if(d){u=i?{expr:l.pop(),set:k(i)}:f.find(l.pop(),l.length!==1||l[0]!=="~"&&l[0]!=="+"||!d.parentNode?d:d.parentNode,s),n=u.expr?f.filter(u.expr,u.set):u.set,l.length>0?o=k(n):r=!1;while(l.length)v=l.pop(),w=v,g.relative[v]?w=l.pop():v="",w==null&&(w=d),g.relative[v](o,w,s)}else o=l=[]}o||(o=n),o||f.error(v||b);if(c.call(o)==="[object Array]")if(!r)e.push.apply(e,o);else if(d&&d.nodeType===1)for(x=0;o[x]!=null;x++)o[x]&&(o[x]===!0||o[x].nodeType===1&&f.contains(d,o[x]))&&e.push(n[x]);else for(x=0;o[x]!=null;x++)o[x]&&o[x].nodeType===1&&e.push(n[x]);else k(o,e);return q&&(f(q,j,e,i),f.uniqueSort(e)),e};f.uniqueSort=function(a){if(m){d=e,a.sort(m);if(d)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},f.matches=function(a,b){return f(a,null,null,b)},f.find=function(a,b,c){var d;if(!a)return[];for(var e=0,f=g.order.length;e<f;e++){var h=g.order[e],i;if(i=g.leftMatch[h].exec(a)){var j=i[1];i.splice(1,1);if(j.substr(j.length-1)!=="\\"){i[1]=(i[1]||"").replace(/\\/g,""),d=g.find[h](i,b,c);if(d!=null){a=a.replace(g.match[h],"");break}}}}return d||(d=b.getElementsByTagName("*")),{set:d,expr:a}},f.filter=function(a,b,c,d){var e=a,h=[],i=b,j,k,l=b&&b[0]&&f.isXML(b[0]);while(a&&b.length){for(var m in g.filter)if((j=g.leftMatch[m].exec(a))!=null&&j[2]){var n=g.filter[m],o,p,q=j[1];k=!1,j.splice(1,1);if(q.substr(q.length-1)==="\\")continue;i===h&&(h=[]);if(g.preFilter[m]){j=g.preFilter[m](j,i,c,h,d,l);if(!j)k=o=!0;else if(j===!0)continue}if(j)for(var r=0;(p=i[r])!=null;r++)if(p){o=n(p,j,r,i);var s=d^!!o;c&&o!=null?s?k=!0:i[r]=!1:s&&(h.push(p),k=!0)}if(o!==undefined){c||(i=h),a=a.replace(g.match[m],"");if(!k)return[];break}}if(a===e){if(k!=null)break;f.error(a)}e=a}return i},f.error=function(a){throw"Syntax error, unrecognized expression: "+a};var g=f.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!/\W/.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var g=0,h=a.length,i;g<h;g++)if(i=a[g]){while((i=i.previousSibling)&&i.nodeType!==1);a[g]=e||i&&i.nodeName.toLowerCase()===b?i||!1:i===b}e&&f.filter(b,a,!0)},">":function(a,b){var c=typeof b=="string",d,e=0,g=a.length;if(c&&!/\W/.test(b)){b=b.toLowerCase();for(;e<g;e++){d=a[e];if(d){var h=d.parentNode;a[e]=h.nodeName.toLowerCase()===b?h:!1}}}else{for(;e<g;e++)d=a[e],d&&(a[e]=c?d.parentNode:d.parentNode===b);c&&f.filter(b,a,!0)}},"":function(a,c,d){var e=b++,f=o,g;typeof c=="string"&&!/\W/.test(c)&&(c=c.toLowerCase(),g=c,f=n),f("parentNode",c,e,a,g,d)},"~":function(a,c,d){var e=b++,f=o,g;typeof c=="string"&&!/\W/.test(c)&&(c=c.toLowerCase(),g=c,f=n),f("previousSibling",c,e,a,g,d)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(/\\/g,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(a,b){return a[1].toLowerCase()},CHILD:function(a){if(a[1]==="nth"){var c=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=c[1]+(c[2]||1)-0,a[3]=c[3]-0}return a[0]=b++,a},ATTR:function(a,b,c,d,e,f){var h=a[1].replace(/\\/g,"");return!f&&g.attrMap[h]&&(a[1]=g.attrMap[h]),a[2]==="~="&&(a[4]=" "+a[4]+" "),a},PSEUDO:function(b,c,d,e,h){if(b[1]==="not"){if(!((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))){var i=f.filter(b[3],c,d,!0^h);return d||e.push.apply(e,i),!1}b[3]=f(b[3],null,null,c)}else if(g.match.POS.test(b[0])||g.match.CHILD.test(b[0]))return!0;return b},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!f(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===a.type},button:function(a){return"button"===a.type||a.nodeName.toLowerCase()==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],h=g.filters[e];if(h)return h(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||f.getText([a])||"").indexOf(b[3])>=0;if(e==="not"){var i=b[3];for(var j=0,k=i.length;j<k;j++)if(i[j]===a)return!1;return!0}f.error("Syntax error, unrecognized expression: "+e)},CHILD:function(a,b){var c=b[1],d=a;switch(c){case"only":case"first":while(d=d.previousSibling)if(d.nodeType===1)return!1;if(c==="first")return!0;d=a;case"last":while(d=d.nextSibling)if(d.nodeType===1)return!1;return!0;case"nth":var e=b[2],f=b[3];if(e===1&&f===0)return!0;var g=b[0],h=a.parentNode;if(h&&(h.sizcache!==g||!a.nodeIndex)){var i=0;for(d=h.firstChild;d;d=d.nextSibling)d.nodeType===1&&(d.nodeIndex=++i);h.sizcache=g}var j=a.nodeIndex-f;return e===0?j===0:j%e===0&&j/e>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=g.attrHandle[c]?g.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],h=b[4];return d==null?f==="!=":f==="="?e===h:f==="*="?e.indexOf(h)>=0:f==="~="?(" "+e+" ").indexOf(h)>=0:h?f==="!="?e!==h:f==="^="?e.indexOf(h)===0:f==="$="?e.substr(e.length-h.length)===h:f==="|="?e===h||e.substr(0,h.length+1)===h+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=g.setFilters[e];if(f)return f(a,c,b,d)}}},h=g.match.POS,i=function(a,b){return"\\"+(b-0+1)};for(var j in g.match)g.match[j]=new RegExp(g.match[j].source+/(?![^\[]*\])(?![^\(]*\))/.source),g.leftMatch[j]=new RegExp(/(^(?:.|\r|\n)*?)/.source+g.match[j].source.replace(/\\(\d+)/g,i));var k=function(a,b){return a=Array.prototype.slice.call(a,0),b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(l){k=function(a,b){var d=b||[],e=0;if(c.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var f=a.length;e<f;e++)d.push(a[e]);else for(;a[e];e++)d.push(a[e]);return d}}var m;document.documentElement.compareDocumentPosition?m=function(a,b){if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a==b&&(d=!0),a.compareDocumentPosition?-1:1;var c=a.compareDocumentPosition(b)&4?-1:a===b?0:1;return c===0&&(d=!0),c}:"sourceIndex"in document.documentElement?m=function(a,b){if(!a.sourceIndex||!b.sourceIndex)return a==b&&(d=!0),a.sourceIndex?-1:1;var c=a.sourceIndex-b.sourceIndex;return c===0&&(d=!0),c}:document.createRange&&(m=function(a,b){if(!a.ownerDocument||!b.ownerDocument)return a==b&&(d=!0),a.ownerDocument?-1:1;var c=a.ownerDocument.createRange(),e=b.ownerDocument.createRange();c.setStart(a,0),c.setEnd(a,0),e.setStart(b,0),e.setEnd(b,0);var f=c.compareBoundaryPoints(Range.START_TO_END,e);return f===0&&(d=!0),f}),f.getText=function(a){var b="",c;for(var d=0;a[d];d++)c=a[d],c.nodeType===3||c.nodeType===4?b+=c.nodeValue:c.nodeType!==8&&(b+=f.getText(c.childNodes));return b},function(){var a=document.createElement("div"),b="script"+(new Date).getTime();a.innerHTML="<a name='"+b+"'/>";var c=document.documentElement;c.insertBefore(a,c.firstChild),document.getElementById(b)&&(g.find.ID=function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d?d.id===a[1]||typeof d.getAttributeNode!="undefined"&&d.getAttributeNode("id").nodeValue===a[1]?[d]:undefined:[]}},g.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),c.removeChild(a),c=a=null}(),function(){var a=document.createElement("div");a.appendChild(document.createComment("")),a.getElementsByTagName("*").length>0&&(g.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(g.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),document.querySelectorAll&&function(){var a=f,b=document.createElement("div");b.innerHTML="<p class='TEST'></p>";if(b.querySelectorAll&&b.querySelectorAll(".TEST").length===0)return;f=function(b,c,d,e){c=c||document;if(!e&&c.nodeType===9&&!f.isXML(c))try{return k(c.querySelectorAll(b),d)}catch(g){}return a(b,c,d,e)};for(var c in a)f[c]=a[c];b=null}(),function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!a.getElementsByClassName||a.getElementsByClassName("e").length===0)return;a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;g.order.splice(1,0,"CLASS"),g.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}(),f.contains=document.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(a,b){return a!==b&&(a.contains?a.contains(b):!0)},f.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var p=function(a,b){var c=[],d="",e,h=b.nodeType?[b]:b;while(e=g.match.PSEUDO.exec(a))d+=e[0],a=a.replace(g.match.PSEUDO,"");a=g.relative[a]?a+"*":a;for(var i=0,j=h.length;i<j;i++)f(a,h[i],c);return f.filter(d,c)};window.tinymce.dom.Sizzle=f}(),function(a){var b=a.each,c=a.DOM,d=a.isIE,e=a.isWebKit,f;a.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[],this.events=[]},add:function(e,f,g,h){var i,j=this,k=j.events,l;if(f instanceof Array)return l=[],b(f,function(a){l.push(j.add(e,a,g,h))}),l;if(e&&e.hasOwnProperty&&e instanceof Array)return l=[],b(e,function(a){a=c.get(a),l.push(j.add(a,f,g,h))}),l;e=c.get(e);if(!e)return;return i=function(b){if(j.disabled)return;return b=b||window.event,b&&d&&(b.target||(b.target=b.srcElement),a.extend(b,j._stoppers)),h?g.call(h,b):g(b)},f=="unload"?(a.unloads.unshift({func:i}),i):f=="init"?(j.domLoaded?i():j.inits.push(i),i):(k.push({obj:e,name:f,func:g,cfunc:i,scope:h}),j._add(e,f,i),g)},remove:function(a,d,e){var f=this,g=f.events,h=!1,i;return a&&a.hasOwnProperty&&a instanceof Array?(i=[],b(a,function(a){a=c.get(a),i.push(f.remove(a,d,e))}),i):(a=c.get(a),b(g,function(b,c){if(b.obj==a&&b.name==d&&(!e||b.func==e||b.cfunc==e))return g.splice(c,1),f._remove(a,d,b.cfunc),h=!0,!1}),h)},clear:function(a){var b=this,d=b.events,e,f;if(a){a=c.get(a);for(e=d.length-1;e>=0;e--)f=d[e],f.obj===a&&(b._remove(f.obj,f.name,f.cfunc),f.obj=f.cfunc=null,d.splice(e,1))}},cancel:function(a){return a?(this.stop(a),this.prevent(a)):!1},stop:function(a){return a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,!1},prevent:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,!1},destroy:function(){var a=this;b(a.events,function(b,c){a._remove(b.obj,b.name,b.cfunc),b.obj=b.cfunc=null}),a.events=[],a=null},_add:function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener?a.addEventListener(b,c,!1):a["on"+b]=c},_remove:function(a,b,c){if(a)try{a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener?a.removeEventListener(b,c,!1):a["on"+b]=null}catch(d){}},_pageInit:function(a){var c=this;if(c.domLoaded)return;c.domLoaded=!0,b(c.inits,function(a){a()}),c.inits=[]},_wait:function(a){var b=this,c=a.document;if(a.tinyMCE_GZ&&tinyMCE_GZ.loaded){b.domLoaded=1;return}c.attachEvent?(c.attachEvent("onreadystatechange",function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",arguments.callee),b._pageInit(a))}),c.documentElement.doScroll&&a==a.top&&function(){if(b.domLoaded)return;try{c.documentElement.doScroll("left")}catch(d){setTimeout(arguments.callee,0);return}b._pageInit(a)}()):c.addEventListener&&b._add(a,"DOMContentLoaded",function(){b._pageInit(a)}),b._add(a,"load",function(){b._pageInit(a)})},_stoppers:{preventDefault:function(){this.returnValue=!1},stopPropagation:function(){this.cancelBubble=!0}}}),f=a.dom.Event=new a.dom.EventUtils,f._wait(window),a.addUnload(function(){f.destroy()})}(tinymce),function(a){a.dom.Element=function(b,c){var d=this,e,f;d.settings=c=c||{},d.id=b,d.dom=e=c.dom||a.DOM,a.isIE||(f=e.get(d.id)),a.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(a){d[a]=function(){var c=[b],f;for(f=0;f<arguments.length;f++)c.push(arguments[f]);return c=e[a].apply(e,c),d.update(a),c}}),a.extend(d,{on:function(b,c,e){return a.dom.Event.add(d.id,b,c,e)},getXY:function(){return{x:parseInt(d.getStyle("left")),y:parseInt(d.getStyle("top"))}},getSize:function(){var a=e.get(d.id);return{w:parseInt(d.getStyle("width")||a.clientWidth),h:parseInt(d.getStyle("height")||a.clientHeight)}},moveTo:function(a,b){d.setStyles({left:a,top:b})},moveBy:function(a,b){var c=d.getXY();d.moveTo(c.x+a,c.y+b)},resizeTo:function(a,b){d.setStyles({width:a,height:b})},resizeBy:function(a,b){var c=d.getSize();d.resizeTo(c.w+a,c.h+b)},update:function(b){var f;if(a.isIE6&&c.blocker){b=b||"";if(b.indexOf("get")===0||b.indexOf("has")===0||b.indexOf("is")===0)return;if(b=="remove"){e.remove(d.blocker);return}d.blocker?f=e.get(d.blocker):(d.blocker=e.uniqueId(),f=e.add(c.container||e.getRoot(),"iframe",{id:d.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),e.setStyle(f,"opacity",0)),e.setStyles(f,{left:d.getStyle("left",1),top:d.getStyle("top",1),width:d.getStyle("width",1),height:d.getStyle("height",1),display:d.getStyle("display",1),zIndex:parseInt(d.getStyle("zIndex",1)||0)-1})}}})}}(tinymce),function(a){function b(a){return a.replace(/[\n\r]+/g,"")}var c=a.is,d=a.isIE,e=a.each;a.create("tinymce.dom.Selection",{Selection:function(b,c,d){var f=this;f.dom=b,f.win=c,f.serializer=d,e(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(b){f[b]=new a.util.Dispatcher(f)}),f.win.getSelection||(f.tridentSel=new a.dom.TridentSelection(f)),a.isIE&&b.boxModel&&this._fixIESelection(),a.addUnload(f.destroy,f)},setCursorLocation:function(a,b){var c=this,d=c.dom.createRng();d.setStart(a,b),d.setEnd(a,b),c.setRng(d),c.collapse(!1)},getContent:function(a){var b=this,d=b.getRng(),e=b.dom.create("body"),f=b.getSel(),g,h,i;return a=a||{},g=h="",a.get=!0,a.format=a.format||"html",a.forced_root_block="",b.onBeforeGetContent.dispatch(b,a),a.format=="text"?b.isCollapsed()?"":d.text||(f.toString?f.toString():""):(d.cloneContents?(i=d.cloneContents(),i&&e.appendChild(i)):c(d.item)||c(d.htmlText)?(e.innerHTML="<br>"+(d.item?d.item(0).outerHTML:d.htmlText),e.removeChild(e.firstChild)):e.innerHTML=d.toString(),/^\s/.test(e.innerHTML)&&(g=" "),/\s+$/.test(e.innerHTML)&&(h=" "),a.getInner=!0,a.content=b.isCollapsed()?"":g+b.serializer.serialize(e,a)+h,b.onGetContent.dispatch(b,a),a.content)},setContent:function(a,b){var c=this,d=c.getRng(),e,f=c.win.document,g,h;b=b||{format:"html"},b.set=!0,a=b.content=a,b.no_events||c.onBeforeSetContent.dispatch(c,b),a=b.content;if(d.insertNode){a+='<span id="__caret">_</span>',d.startContainer==f&&d.endContainer==f?f.body.innerHTML=a:(d.deleteContents(),f.body.childNodes.length==0?f.body.innerHTML=a:d.createContextualFragment?d.insertNode(d.createContextualFragment(a)):(g=f.createDocumentFragment(),h=f.createElement("div"),g.appendChild(h),h.outerHTML=a,d.insertNode(g))),e=c.dom.get("__caret"),d=f.createRange(),d.setStartBefore(e),d.setEndBefore(e),c.setRng(d),c.dom.remove("__caret");try{c.setRng(d)}catch(i){}}else d.item&&(f.execCommand("Delete",!1,null),d=c.getRng()),/^\s+/.test(a)?(d.pasteHTML('<span id="__mce_tmp">_</span>'+a),c.dom.remove("__mce_tmp")):d.pasteHTML(a);b.no_events||c.onSetContent.dispatch(c,b)},getStart:function(){var a=this.getRng(),b,c,d,e;if(a.duplicate||a.item){if(a.item)return a.item(0);d=a.duplicate(),d.collapse(1),b=d.parentElement(),c=e=a.parentElement();while(e=e.parentNode)if(e==b){b=c;break}return b}return b=a.startContainer,b.nodeType==1&&b.hasChildNodes()&&(b=b.childNodes[Math.min(b.childNodes.length-1,a.startOffset)]),b&&b.nodeType==3?b.parentNode:b},getEnd:function(){var a=this,b=a.getRng(),c,d;return b.duplicate||b.item?b.item?b.item(0):(b=b.duplicate(),b.collapse(0),c=b.parentElement(),c&&c.nodeName=="BODY"?c.lastChild||c:c):(c=b.endContainer,d=b.endOffset,c.nodeType==1&&c.hasChildNodes()&&(c=c.childNodes[d>0?d-1:d]),c&&c.nodeType==3?c.parentNode:c)},getBookmark:function(a,b){function o(a,b){var c=0;return e(d.select(a),function(a,d){a==b&&(c=d)}),c}var c=this,d=c.dom,f,g,h,i,j,k,l,m="﻿",n;if(a==2){function p(){function g(a,d){var f=a[d?"startContainer":"endContainer"],g=a[d?"startOffset":"endOffset"],h=[],i,j,k=0;if(f.nodeType==3){if(b)for(i=f.previousSibling;i&&i.nodeType==3;i=i.previousSibling)g+=i.nodeValue.length;h.push(g)}else j=f.childNodes,g>=j.length&&j.length&&(k=1,g=Math.max(0,j.length-1)),h.push(c.dom.nodeIndex(j[g],b)+k);for(;f&&f!=e;f=f.parentNode)h.push(c.dom.nodeIndex(f,b));return h}var a=c.getRng(!0),e=d.getRoot(),f={};return f.start=g(a,!0),c.isCollapsed()||(f.end=g(a)),f}return c.tridentSel?c.tridentSel.getBookmark(a):p()}if(a)return{rng:c.getRng()};f=c.getRng(),h=d.uniqueId(),i=tinyMCE.activeEditor.selection.isCollapsed(),n="overflow:hidden;line-height:0px";if(f.duplicate||f.item){if(!!f.item)return k=f.item(0),j=k.nodeName,{name:j,index:o(j,k)};g=f.duplicate();try{f.collapse(),f.pasteHTML('<span data-mce-type="bookmark" id="'+h+'_start" style="'+n+'">'+m+"</span>"),i||(g.collapse(!1),f.moveToElementText(g.parentElement()),f.compareEndPoints("StartToEnd",g)==0&&g.move("character",-1),g.pasteHTML('<span data-mce-type="bookmark" id="'+h+'_end" style="'+n+'">'+m+"</span>"))}catch(q){return null}}else{k=c.getNode(),j=k.nodeName;if(j=="IMG")return{name:j,index:o(j,k)};g=f.cloneRange(),i||(g.collapse(!1),g.insertNode(d.create("span",{"data-mce-type":"bookmark",id:h+"_end",style:n},m))),f.collapse(!0),f.insertNode(d.create("span",{"data-mce-type":"bookmark",id:h+"_start",style:n},m))}return c.moveToBookmark({id:h,keep:1}),{id:h}},moveToBookmark:function(b){var c=this,f=c.dom,g,h,i,j,k,l,m,n;if(b)if(b.start){i=f.createRng(),j=f.getRoot();function o(a){var c=b[a?"start":"end"],d,e,f,g;if(c){f=c[0];for(e=j,d=c.length-1;d>=1;d--){g=e.childNodes;if(c[d]>g.length-1)return;e=g[c[d]]}e.nodeType===3&&(f=Math.min(c[0],e.nodeValue.length)),e.nodeType===1&&(f=Math.min(c[0],e.childNodes.length)),a?i.setStart(e,f):i.setEnd(e,f)}return!0}if(c.tridentSel)return c.tridentSel.moveToBookmark(b);o(!0)&&o()&&c.setRng(i)}else if(b.id){function p(c){var d=f.get(b.id+"_"+c),g,h,i,j,o=b.keep;if(d){g=d.parentNode,c=="start"?(o?(g=d.firstChild,h=1):h=f.nodeIndex(d),k=l=g,m=n=h):(o?(g=d.firstChild,h=1):h=f.nodeIndex(d),l=g,n=h);if(!o){j=d.previousSibling,i=d.nextSibling,e(a.grep(d.childNodes),function(a){a.nodeType==3&&(a.nodeValue=a.nodeValue.replace(/\uFEFF/g,""))});while(d=f.get(b.id+"_"+c))f.remove(d,1);j&&i&&j.nodeType==i.nodeType&&j.nodeType==3&&!a.isOpera&&(h=j.nodeValue.length,j.appendData(i.nodeValue),f.remove(i),c=="start"?(k=l=j,m=n=h):(l=j,n=h))}}}function q(a){return f.isBlock(a)&&!a.innerHTML&&(a.innerHTML=d?" ":'<br data-mce-bogus="1" />'),a}p("start"),p("end"),k&&(i=f.createRng(),i.setStart(q(k),m),i.setEnd(q(l),n),c.setRng(i))}else b.name?c.select(f.select(b.name)[b.index]):b.rng&&c.setRng(b.rng)},select:function(b,c){var d=this,e=d.dom,f=e.createRng(),g;if(b){g=e.nodeIndex(b),f.setStart(b.parentNode,g),f.setEnd(b.parentNode,g+1);if(c){function h(b,c){var d=new a.dom.TreeWalker(b,b);do{if(b.nodeType==3&&a.trim(b.nodeValue).length!=0){c?f.setStart(b,0):f.setEnd(b,b.nodeValue.length);return}if(b.nodeName=="BR"){c?f.setStartBefore(b):f.setEndBefore(b);return}}while(b=c?d.next():d.prev())}h(b,1),h(b)}d.setRng(f)}return b},isCollapsed:function(){var a=this,b=a.getRng(),c=a.getSel();return!b||b.item?!1:b.compareEndPoints?b.compareEndPoints("StartToEnd",b)===0:!c||b.collapsed},collapse:function(a){var b=this,c=b.getRng(),d;c.item&&(d=c.item(0),c=b.win.document.body.createTextRange(),c.moveToElementText(d)),c.collapse(!!a),b.setRng(c)},getSel:function(){var a=this,b=this.win;return b.getSelection?b.getSelection():b.document.selection},getRng:function(b){var c=this,d,e,f,g=c.win.document;if(b&&c.tridentSel)return c.tridentSel.getRangeAt(0);try{if(d=c.getSel())e=d.rangeCount>0?d.getRangeAt(0):d.createRange?d.createRange():g.createRange()}catch(h){}return a.isIE&&e&&e.setStart&&g.selection.createRange().item&&(f=g.selection.createRange().item(0),e=g.createRange(),e.setStartBefore(f),e.setEndAfter(f)),e||(e=g.createRange?g.createRange():g.body.createTextRange()),c.selectedRange&&c.explicitRange&&(e.compareBoundaryPoints(e.START_TO_START,c.selectedRange)===0&&e.compareBoundaryPoints(e.END_TO_END,c.selectedRange)===0?e=c.explicitRange:(c.selectedRange=null,c.explicitRange=null)),e},setRng:function(a){var b,c=this;if(!c.tridentSel){b=c.getSel();if(b){c.explicitRange=a;try{b.removeAllRanges()}catch(d){}b.addRange(a),c.selectedRange=b.getRangeAt(0)}}else{if(a.cloneRange){c.tridentSel.addRange(a);return}try{a.select()}catch(d){}}},setNode:function(a){var b=this;return b.setContent(b.dom.getOuterHTML(a)),a},getNode:function(){var a=this,b=a.getRng(),c=a.getSel(),d,e=b.startContainer,f=b.endContainer;if(!b)return a.dom.getRoot();if(b.setStart){d=b.commonAncestorContainer;if(!b.collapsed){b.startContainer==b.endContainer&&b.endOffset-b.startOffset<2&&b.startContainer.hasChildNodes()&&(d=b.startContainer.childNodes[b.startOffset]);if(e.nodeType===3&&f.nodeType===3){function g(a,b){var c=a;while(a&&a.nodeType===3&&a.length===0)a=b?a.nextSibling:a.previousSibling;return a||c}e.length===b.startOffset?e=g(e.nextSibling,!0):e=e.parentNode,b.endOffset===0?f=g(f.previousSibling,!1):f=f.parentNode;if(e&&e===f)return e}}return d&&d.nodeType==3?d.parentNode:d}return b.item?b.item(0):b.parentElement()},getSelectedBlocks:function(b,c){var d=this,e=d.dom,f,g,h,i=[];f=e.getParent(b||d.getStart(),e.isBlock),g=e.getParent(c||d.getEnd(),e.isBlock),f&&i.push(f);if(f&&g&&f!=g){h=f;var j=new a.dom.TreeWalker(f,e.getRoot());while((h=j.next())&&h!=g)e.isBlock(h)&&i.push(h)}return g&&f!=g&&i.push(g),i},normalize:function(){function e(e){var h,j,k,l=b.dom,m=l.getRoot(),n;h=c[(e?"start":"end")+"Container"],j=c[(e?"start":"end")+"Offset"],h.nodeType===9&&(h=h.body,j=0);if(h===m&&h.hasChildNodes()){h=h.childNodes[Math.min(!e&&j>0?j-1:j,h.childNodes.length-1)],j=0;if(h.hasChildNodes()){n=h,k=new a.dom.TreeWalker(h,m);do{if(n.nodeType===3){j=e?0:n.nodeValue.length-1,h=n;break}if(n.nodeName==="BR"){j=l.nodeIndex(n),h=n.parentNode;break}}while(n=e?k.next():k.prev());d=!0}}d&&c["set"+(e?"Start":"End")](h,j)}var b=this,c,d;if(a.isIE)return;c=b.getRng(),e(!0),c.collapsed&&e(),d&&b.setRng(c)},destroy:function(b){var c=this;c.win=null,b||a.removeUnload(c.destroy)},_fixIESelection:function(){function g(a,b){var d=c.createTextRange();try{d.moveToPoint(a,b)}catch(e){d=null}return d}function h(a){var b;a.button?(b=g(a.x,a.y),b&&(b.compareEndPoints("StartToStart",e)>0?b.setEndPoint("StartToStart",e):b.setEndPoint("EndToEnd",e),b.select())):i()}function i(){var c=b.selection.createRange();e&&!c.item&&c.compareEndPoints("StartToEnd",c)===0&&e.select(),a.unbind(b,"mouseup",i),a.unbind(b,"mousemove",h),e=d=0}var a=this.dom,b=a.doc,c=b.body,d,e,f;b.documentElement.unselectable=!0,a.bind(b,["mousedown","contextmenu"],function(c){if(c.target.nodeName==="HTML"){d&&i(),f=b.documentElement;if(f.scrollHeight>f.clientHeight)return;d=1,e=g(c.x,c.y),e&&(a.bind(b,"mouseup",i),a.bind(b,"mousemove",h),a.win.focus(),e.select())}})}})}(tinymce),function(a){a.dom.Serializer=function(b,c,d){var e,f,g=a.isIE,h=a.each,i;return b.apply_source_formatting||(b.indent=!1),b.remove_trailing_brs=!0,c=c||a.DOM,d=d||new a.html.Schema(b),b.entity_encoding=b.entity_encoding||"named",e=new a.util.Dispatcher(self),f=new a.util.Dispatcher(self),i=new a.html.DomParser(b,d),i.addAttributeFilter("src,href,style",function(a,d){var e=a.length,f,g,h="data-mce-"+d,i=b.url_converter,j=b.url_converter_scope,k;while(e--)f=a[e],g=f.attributes.map[h],g!==k?(f.attr(d,g.length>0?g:null),f.attr(h,null)):(g=f.attributes.map[d],d==="style"?g=c.serializeStyle(c.parseStyle(g),f.name):i&&(g=i.call(j,g,d,f.name)),f.attr(d,g.length>0?g:null))}),i.addAttributeFilter("class",function(a,b){var c=a.length,d,e;while(c--)d=a[c],e=d.attr("class").replace(/\s*mce(Item\w+|Selected)\s*/g,""),d.attr("class",e.length>0?e:null)}),i.addAttributeFilter("data-mce-type",function(a,b,c){var d=a.length,e;while(d--)e=a[d],e.attributes.map["data-mce-type"]==="bookmark"&&!c.cleanup&&e.remove()}),i.addNodeFilter("script,style",function(a,b){function f(a){return a.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,"").replace(/\s*(\/\/\s*\]\]>|\/\/\s*-->|\]\]>|-->|\]\]-->)\s*$/g
,"")}var c=a.length,d,e;while(c--)d=a[c],e=d.firstChild?d.firstChild.value:"",b==="script"?(d.attr("type",(d.attr("type")||"text/javascript").replace(/^mce\-/,"")),e.length>0&&(d.firstChild.value="// <![CDATA[\n"+f(e)+"\n// ]]>")):e.length>0&&(d.firstChild.value="<!--\n"+f(e)+"\n-->")}),i.addNodeFilter("#comment",function(a,b){var c=a.length,d;while(c--)d=a[c],d.value.indexOf("[CDATA[")===0?(d.name="#cdata",d.type=4,d.value=d.value.replace(/^\[CDATA\[|\]\]$/g,"")):d.value.indexOf("mce:protected ")===0&&(d.name="#text",d.type=3,d.raw=!0,d.value=unescape(d.value).substr(14))}),i.addNodeFilter("xml:namespace,input",function(a,b){var c=a.length,d;while(c--)d=a[c],d.type===7?d.remove():d.type===1&&b==="input"&&!("type"in d.attributes.map)&&d.attr("type","text")}),b.fix_list_elements&&i.addNodeFilter("ul,ol",function(a,b){var c=a.length,d,e;while(c--)d=a[c],e=d.parent,(e.name==="ul"||e.name==="ol")&&d.prev&&d.prev.name==="li"&&d.prev.append(d)}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(a,b){var c=a.length;while(c--)a[c].attr(b,null)}),{schema:d,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,onPreProcess:e,onPostProcess:f,serialize:function(j,k){var l,m,n,o,p;return g&&c.select("script,style,select,map").length>0?(p=j.innerHTML,j=j.cloneNode(!1),c.setHTML(j,p)):j=j.cloneNode(!0),l=j.ownerDocument.implementation,l.createHTMLDocument&&(m=l.createHTMLDocument(""),h(j.nodeName=="BODY"?j.childNodes:[j],function(a){m.body.appendChild(m.importNode(a,!0))}),j.nodeName!="BODY"?j=m.body.firstChild:j=m.body,n=c.doc,c.doc=m),k=k||{},k.format=k.format||"html",k.no_events||(k.node=j,e.dispatch(self,k)),o=new a.html.Serializer(b,d),k.content=o.serialize(i.parse(k.getInner?j.innerHTML:a.trim(c.getOuterHTML(j),k),k)),k.cleanup||(k.content=k.content.replace(/\uFEFF|\u200B/g,"")),k.no_events||f.dispatch(self,k),n&&(c.doc=n),k.node=null,k.content},addRules:function(a){d.addValidElements(a)},setRules:function(a){d.setValidElements(a)}}}}(tinymce),function(a){a.dom.ScriptLoader=function(b){function l(b,c){function j(){e.remove(i),f&&(f.onreadystatechange=f.onload=f=null),c()}function k(){typeof console!="undefined"&&console.log&&console.log("Failed to load: "+b)}var d=this,e=a.DOM,f,g,h,i;i=e.uniqueId();if(a.isIE6){g=new a.util.URI(b),h=location;if(g.host==h.hostname&&g.port==h.port&&g.protocol+":"==h.protocol&&g.protocol.toLowerCase()!="file"){a.util.XHR.send({url:a._addVer(g.getURI()),success:function(a){var b=e.create("script",{type:"text/javascript"});b.text=a,document.getElementsByTagName("head")[0].appendChild(b),e.remove(b),j()},error:k});return}}f=e.create("script",{id:i,type:"text/javascript",src:a._addVer(b)}),a.isIE||(f.onload=j),f.onerror=k,a.isOpera||(f.onreadystatechange=function(){var a=f.readyState;(a=="complete"||a=="loaded")&&j()}),(document.getElementsByTagName("head")[0]||document.body).appendChild(f)}var c=0,d=1,e=2,f={},g=[],h={},i=[],j=0,k;this.isDone=function(a){return f[a]==e},this.markDone=function(a){f[a]=e},this.add=this.load=function(a,b,d){var e,i=f[a];i==k&&(g.push(a),f[a]=c),b&&(h[a]||(h[a]=[]),h[a].push({func:b,scope:d||this}))},this.loadQueue=function(a,b){this.loadScripts(g,a,b)},this.loadScripts=function(b,c,g){function n(b){a.each(h[b],function(a){a.func.call(a.scope)}),h[b]=k}var m;i.push({func:c,scope:g||this}),m=function(){var c=a.grep(b);b.length=0,a.each(c,function(a){if(f[a]==e){n(a);return}f[a]!=d&&(f[a]=d,j++,l(a,function(){f[a]=e,j--,n(a),m()}))}),j||(a.each(i,function(a){a.func.call(a.scope)}),i.length=0)},m()}},a.ScriptLoader=new a.dom.ScriptLoader}(tinymce),tinymce.dom.TreeWalker=function(a,b){function d(a,c,d,e){var f,g;if(a){if(!e&&a[c])return a[c];if(a!=b){f=a[d];if(f)return f;for(g=a.parentNode;g&&g!=b;g=g.parentNode){f=g[d];if(f)return f}}}}var c=a;this.current=function(){return c},this.next=function(a){return c=d(c,"firstChild","nextSibling",a)},this.prev=function(a){return c=d(c,"lastChild","previousSibling",a)}},function(a){a.dom.RangeUtils=function(b){var c="﻿";this.walk=function(c,d){function p(a){var b;return b=a[0],b.nodeType===3&&b===e&&f>=b.nodeValue.length&&a.splice(0,1),b=a[a.length-1],h===0&&a.length>0&&b===g&&b.nodeType===3&&a.splice(a.length-1,1),a}function q(a,b,c){var d=[];for(;a&&a!=c;a=a[b])d.push(a);return d}function r(a,b){do{if(a.parentNode==b)return a;a=a.parentNode}while(a)}function s(a,b,c){var e=c?"nextSibling":"previousSibling";for(l=a,m=l.parentNode;l&&l!=b;l=m)m=l.parentNode,n=q(l==a?l:l[e],e),n.length&&(c||n.reverse(),d(p(n)))}var e=c.startContainer,f=c.startOffset,g=c.endContainer,h=c.endOffset,i,j,k,l,m,n,o;o=b.select("td.mceSelected,th.mceSelected");if(o.length>0){a.each(o,function(a){d([a])});return}e.nodeType==1&&e.hasChildNodes()&&(e=e.childNodes[f]),g.nodeType==1&&g.hasChildNodes()&&(g=g.childNodes[Math.min(h-1,g.childNodes.length-1)]);if(e==g)return d(p([e]));i=b.findCommonAncestor(e,g);for(l=e;l;l=l.parentNode){if(l===g)return s(e,i,!0);if(l===i)break}for(l=g;l;l=l.parentNode){if(l===e)return s(g,i);if(l===i)break}j=r(e,i)||e,k=r(g,i)||g,s(e,j,!0),n=q(j==e?j:j.nextSibling,"nextSibling",k==g?k.nextSibling:k),n.length&&d(p(n)),s(g,k)},this.split=function(a){function f(a,b){return a.splitText(b)}var b=a.startContainer,c=a.startOffset,d=a.endContainer,e=a.endOffset;return b==d&&b.nodeType==3?c>0&&c<b.nodeValue.length&&(d=f(b,c),b=d.previousSibling,e>c?(e-=c,b=d=f(d,e).previousSibling,e=d.nodeValue.length,c=0):e=0):(b.nodeType==3&&c>0&&c<b.nodeValue.length&&(b=f(b,c),c=0),d.nodeType==3&&e>0&&e<d.nodeValue.length&&(d=f(d,e).previousSibling,e=d.nodeValue.length)),{startContainer:b,startOffset:c,endContainer:d,endOffset:e}}},a.dom.RangeUtils.compareRanges=function(a,b){if(a&&b){if(!a.item&&!a.duplicate)return a.startContainer==b.startContainer&&a.startOffset==b.startOffset;if(a.item&&b.item&&a.item(0)===b.item(0))return!0;if(a.isEqual&&b.isEqual&&b.isEqual(a))return!0}return!1}}(tinymce),function(a){var b=a.dom.Event,c=a.each;a.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(d,e){var f=this,g=d.root,h=d.items,i=d.enableUpDown,j=d.enableLeftRight||!d.enableUpDown,k=d.excludeFromTabOrder,l,m,n,o,p;e=e||a.DOM,l=function(a){p=a.target.id},m=function(a){e.setAttrib(a.target.id,"tabindex","-1")},o=function(a){var b=e.get(p);e.setAttrib(b,"tabindex","0"),b.focus()},f.focus=function(){e.get(p).focus()},f.destroy=function(){c(h,function(a){e.unbind(e.get(a.id),"focus",l),e.unbind(e.get(a.id),"blur",m)}),e.unbind(e.get(g),"focus",o),e.unbind(e.get(g),"keydown",n),h=e=g=f.focus=l=m=n=o=null,f.destroy=function(){}},f.moveFocus=function(a,g){var i=-1,j=f.controls,k;if(!p)return;c(h,function(a,b){if(a.id===p)return i=b,!1}),i+=a,i<0?i=h.length-1:i>=h.length&&(i=0),k=h[i],e.setAttrib(p,"tabindex","-1"),e.setAttrib(k.id,"tabindex","0"),e.get(k.id).focus(),d.actOnFocus&&d.onAction(k.id),g&&b.cancel(g)},n=function(a){var c=37,e=39,g=38,h=40,k=27,l=14,m=13,n=32;switch(a.keyCode){case c:j&&f.moveFocus(-1);break;case e:j&&f.moveFocus(1);break;case g:i&&f.moveFocus(-1);break;case h:i&&f.moveFocus(1);break;case k:d.onCancel&&(d.onCancel(),b.cancel(a));break;case l:case m:case n:d.onAction&&(d.onAction(p),b.cancel(a))}},c(h,function(a,b){var c;a.id||(a.id=e.uniqueId("_mce_item_")),k?(e.bind(a.id,"blur",m),c="-1"):c=b===0?"0":"-1",e.setAttrib(a.id,"tabindex",c),e.bind(e.get(a.id),"focus",l)}),h[0]&&(p=h[0].id),e.setAttrib(g,"tabindex","-1"),e.bind(e.get(g),"focus",o),e.bind(e.get(g),"keydown",n)}})}(tinymce),function(a){var b=a.DOM,c=a.is;a.create("tinymce.ui.Control",{Control:function(b,c,d){this.id=b,this.settings=c=c||{},this.rendered=!1,this.onRender=new a.util.Dispatcher(this),this.classPrefix="",this.scope=c.scope||this,this.disabled=0,this.active=0,this.editor=d},setAriaProperty:function(a,c){var d=b.get(this.id+"_aria")||b.get(this.id);d&&b.setAttrib(d,"aria-"+a,!!c)},focus:function(){b.get(this.id).focus()},setDisabled:function(a){a!=this.disabled&&(this.setAriaProperty("disabled",a),this.setState("Disabled",a),this.setState("Enabled",!a),this.disabled=a)},isDisabled:function(){return this.disabled},setActive:function(a){a!=this.active&&(this.setState("Active",a),this.active=a,this.setAriaProperty("pressed",a))},isActive:function(){return this.active},setState:function(a,c){var d=b.get(this.id);a=this.classPrefix+a,c?b.addClass(d,a):b.removeClass(d,a)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(a){b.setHTML(a,this.renderHTML())},postRender:function(){var a=this,b;c(a.disabled)&&(b=a.disabled,a.disabled=-1,a.setDisabled(b)),c(a.active)&&(b=a.active,a.active=-1,a.setActive(b))},remove:function(){b.remove(this.id),this.destroy()},destroy:function(){a.dom.Event.clear(this.id)}})}(tinymce),tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(a,b,c){this.parent(a,b,c),this.controls=[],this.lookup={}},add:function(a){return this.lookup[a.id]=a,this.controls.push(a),a},get:function(a){return this.lookup[a]}}),tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(a,b){this.parent(a,b),this.classPrefix="mceSeparator",this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}}),function(a){var b=a.is,c=a.DOM,d=a.each,e=a.walk;a.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(a,b){this.parent(a,b),this.classPrefix="mceMenuItem"},setSelected:function(a){this.setState("Selected",a),this.setAriaProperty("checked",!!a),this.selected=a},isSelected:function(){return this.selected},postRender:function(){var a=this;a.parent(),b(a.selected)&&a.setSelected(a.selected)}})}(tinymce),function(a){var b=a.is,c=a.DOM,d=a.each,e=a.walk;a.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(b,c){var d=this;d.parent(b,c),d.items={},d.collapsed=!1,d.menuCount=0,d.onAddItem=new a.util.Dispatcher(this)},expand:function(a){var b=this;a&&e(b,function(a){a.expand&&a.expand()},"items",b),b.collapsed=!1},collapse:function(a){var b=this;a&&e(b,function(a){a.collapse&&a.collapse()},"items",b),b.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(b){return b.settings||(b=new a.ui.MenuItem(b.id||c.uniqueId(),b)),this.onAddItem.dispatch(this,b),this.items[b.id]=b},addSeparator:function(){return this.add({separator:!0})},addMenu:function(a){return a.collapse||(a=this.createMenu(a)),this.menuCount++,this.add(a)},hasMenus:function(){return this.menuCount!==0},remove:function(a){delete this.items[a.id]},removeAll:function(){var a=this;e(a,function(a){a.removeAll?a.removeAll():a.remove(),a.destroy()},"items",a),a.items={}},createMenu:function(b){var d=new a.ui.Menu(b.id||c.uniqueId(),b);return d.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),d}})}(tinymce),function(a){var b=a.is,c=a.DOM,d=a.each,e=a.dom.Event,f=a.dom.Element;a.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(d,e){e=e||{},e.container=e.container||c.doc.body,e.offset_x=e.offset_x||0,e.offset_y=e.offset_y||0,e.vp_offset_x=e.vp_offset_x||0,e.vp_offset_y=e.vp_offset_y||0,b(e.icons)&&!e.icons&&(e["class"]+=" mceNoIcons"),this.parent(d,e),this.onShowMenu=new a.util.Dispatcher(this),this.onHideMenu=new a.util.Dispatcher(this),this.classPrefix="mceMenu"},createMenu:function(b){var d=this,e=d.settings,f;return b.container=b.container||e.container,b.parent=d,b.constrain=b.constrain||e.constrain,b["class"]=b["class"]||e["class"],b.vp_offset_x=b.vp_offset_x||e.vp_offset_x,b.vp_offset_y=b.vp_offset_y||e.vp_offset_y,b.keyboard_focus=e.keyboard_focus,f=new a.ui.DropMenu(b.id||c.uniqueId(),b),f.onAddItem.add(d.onAddItem.dispatch,d.onAddItem),f},focus:function(){var a=this;a.keyboardNav&&a.keyboardNav.focus()},update:function(){var a=this,b=a.settings,d=c.get("menu_"+a.id+"_tbl"),e=c.get("menu_"+a.id+"_co"),f,g;f=b.max_width?Math.min(d.clientWidth,b.max_width):d.clientWidth,g=b.max_height?Math.min(d.clientHeight,b.max_height):d.clientHeight,c.boxModel?a.element.setStyles({width:f,height:g}):a.element.setStyles({width:f+2,height:g+2}),b.max_width&&c.setStyle(e,"width",f),b.max_height&&(c.setStyle(e,"height",g),d.clientHeight<b.max_height&&c.setStyle(e,"overflow","hidden"))},showMenu:function(b,g,h){var i=this,j=i.settings,k,l=c.getViewPort(),m,n,o,p,q=2,r,s,t=i.classPrefix;i.collapse(1);if(i.isMenuVisible)return;i.rendered?k=c.get("menu_"+i.id):(k=c.add(i.settings.container,i.renderNode()),d(i.items,function(a){a.postRender()}),i.element=new f("menu_"+i.id,{blocker:1,container:j.container})),a.isOpera||c.setStyles(k,{left:-65535,top:-65535}),c.show(k),i.update(),b+=j.offset_x||0,g+=j.offset_y||0,l.w-=4,l.h-=4,j.constrain&&(m=k.clientWidth-q,n=k.clientHeight-q,o=l.x+l.w,p=l.y+l.h,b+j.vp_offset_x+m>o&&(b=h?h-m:Math.max(0,o-j.vp_offset_x-m)),g+j.vp_offset_y+n>p&&(g=Math.max(0,p-j.vp_offset_y-n))),c.setStyles(k,{left:b,top:g}),i.element.update(),i.isMenuVisible=1,i.mouseClickFunc=e.add(k,"click",function(a){var b;a=a.target;if(a&&(a=c.getParent(a,"tr"))&&!c.hasClass(a,t+"ItemSub")){b=i.items[a.id];if(b.isDisabled())return;r=i;while(r)r.hideMenu&&r.hideMenu(),r=r.settings.parent;return b.settings.onclick&&b.settings.onclick(a),e.cancel(a)}}),i.hasMenus()&&(i.mouseOverFunc=e.add(k,"mouseover",function(a){var b,d,e;a=a.target;if(a&&(a=c.getParent(a,"tr"))){b=i.items[a.id],i.lastMenu&&i.lastMenu.collapse(1);if(b.isDisabled())return;a&&c.hasClass(a,t+"ItemSub")&&(d=c.getRect(a),b.showMenu(d.x+d.w-q,d.y-q,d.x),i.lastMenu=b,c.addClass(c.get(b.id).firstChild,t+"ItemActive"))}})),e.add(k,"keydown",i._keyHandler,i),i.onShowMenu.dispatch(i),j.keyboard_focus&&i._setupKeyboardNav()},hideMenu:function(a){var b=this,d=c.get("menu_"+b.id),f;if(!b.isMenuVisible)return;b.keyboardNav&&b.keyboardNav.destroy(),e.remove(d,"mouseover",b.mouseOverFunc),e.remove(d,"click",b.mouseClickFunc),e.remove(d,"keydown",b._keyHandler),c.hide(d),b.isMenuVisible=0,a||b.collapse(1),b.element&&b.element.hide(),(f=c.get(b.id))&&c.removeClass(f.firstChild,b.classPrefix+"ItemActive"),b.onHideMenu.dispatch(b)},add:function(a){var b=this,d;return a=b.parent(a),b.isRendered&&(d=c.get("menu_"+b.id))&&b._add(c.select("tbody",d)[0],a),a},collapse:function(a){this.parent(a),this.hideMenu(1)},remove:function(a){return c.remove(a.id),this.destroy(),this.parent(a)},destroy:function(){var a=this,b=c.get("menu_"+a.id);a.keyboardNav&&a.keyboardNav.destroy(),e.remove(b,"mouseover",a.mouseOverFunc),e.remove(c.select("a",b),"focus",a.mouseOverFunc),e.remove(b,"click",a.mouseClickFunc),e.remove(b,"keydown",a._keyHandler),a.element&&a.element.remove(),c.remove(b)},renderNode:function(){var a=this,b=a.settings,e,g,h,i;return i=c.create("div",{role:"listbox",id:"menu_"+a.id,"class":b["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"}),a.settings.parent&&c.setAttrib(i,"aria-parent","menu_"+a.settings.parent.id),h=c.add(i,"div",{role:"presentation",id:"menu_"+a.id+"_co","class":a.classPrefix+(b["class"]?" "+b["class"]:"")}),a.element=new f("menu_"+a.id,{blocker:1,container:b.container}),b.menu_line&&c.add(h,"span",{"class":a.classPrefix+"Line"}),e=c.add(h,"table",{role:"presentation",id:"menu_"+a.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),g=c.add(e,"tbody"),d(a.items,function(b){a._add(g,b)}),a.rendered=!0,i},_setupKeyboardNav:function(){var b,d,e=this;b=c.select("#menu_"+e.id)[0],d=c.select("a[role=option]","menu_"+e.id),d.splice(0,0,b),e.keyboardNav=new a.ui.KeyboardNavigation({root:"menu_"+e.id,items:d,onCancel:function(){e.hideMenu()},enableUpDown:!0}),b.focus()},_keyHandler:function(a){var b=this,c;switch(a.keyCode){case 37:b.settings.parent&&(b.hideMenu(),b.settings.parent.focus(),e.cancel(a));break;case 39:b.mouseOverFunc&&b.mouseOverFunc(a)}},_add:function(a,b){var d,e=b.settings,f,g,h,i=this.classPrefix,j;if(e.separator){g=c.add(a,"tr",{id:b.id,"class":i+"ItemSeparator"}),c.add(g,"td",{"class":i+"ItemSeparator"}),(d=g.previousSibling)&&c.addClass(d,"mceLast");return}d=g=c.add(a,"tr",{id:b.id,"class":i+"Item "+i+"ItemEnabled"}),d=h=c.add(d,e.titleItem?"th":"td"),d=f=c.add(d,"a",{id:b.id+"_aria",role:e.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),e.parent&&(c.setAttrib(f,"aria-haspopup","true"),c.setAttrib(f,"aria-owns","menu_"+b.id)),c.addClass(h,e["class"]),j=c.add(d,"span",{"class":"mceIcon"+(e.icon?" mce_"+e.icon:"")}),e.icon_src&&c.add(j,"img",{src:e.icon_src}),d=c.add(d,e.element||"span",{"class":"mceText",title:b.settings.title},b.settings.title),b.settings.style&&c.setAttrib(d,"style",b.settings.style),a.childNodes.length==1&&c.addClass(g,"mceFirst"),(d=g.previousSibling)&&c.hasClass(d,i+"ItemSeparator")&&c.addClass(g,"mceFirst"),b.collapse&&c.addClass(g,i+"ItemSub"),(d=g.previousSibling)&&c.removeClass(d,"mceLast"),c.addClass(g,"mceLast")}})}(tinymce),function(a){var b=a.DOM;a.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(a,b,c){this.parent(a,b,c),this.classPrefix="mceButton"},renderHTML:function(){var a=this.classPrefix,c=this.settings,d,e;return e=b.encode(c.label||""),d='<a role="button" id="'+this.id+'" href="javascript:;" class="'+a+" "+a+"Enabled "+c["class"]+(e?" "+a+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+b.encode(c.title)+'">',c.image&&(!this.editor||!this.editor.forcedHighContrastMode)?d+='<img class="mceIcon" src="'+c.image+'" alt="'+b.encode(c.title)+'" />'+e:d+='<span class="mceIcon '+c["class"]+'"></span>'+(e?'<span class="'+a+'Label">'+e+"</span>":""),d+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+c.title+"</span>",d+="</a>",d},postRender:function(){var b=this,c=b.settings;a.dom.Event.add(b.id,"click",function(a){if(!b.isDisabled())return c.onclick.call(c.scope,a)})}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each,e=a.util.Dispatcher;a.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(b,c,d){var f=this;f.parent(b,c,d),f.items=[],f.onChange=new e(f),f.onPostRender=new e(f),f.onAdd=new e(f),f.onRenderMenu=new a.util.Dispatcher(this),f.classPrefix="mceListBox"},select:function(a){var b=this,c,e;if(a==undefined)return b.selectByIndex(-1);a&&a.call?e=a:e=function(b){return b==a},a!=b.selectedValue&&(d(b.items,function(a,d){if(e(a.value))return c=1,b.selectByIndex(d),!1}),c||b.selectByIndex(-1))},selectByIndex:function(a){var c=this,d,e,f;a!=c.selectedIndex&&(d=b.get(c.id+"_text"),f=b.get(c.id+"_voiceDesc"),e=c.items[a],e?(c.selectedValue=e.value,c.selectedIndex=a,b.setHTML(d,b.encode(e.title)),b.setHTML(f,c.settings.title+" - "+e.title),b.removeClass(d,"mceTitle"),b.setAttrib(c.id,"aria-valuenow",e.title)):(b.setHTML(d,b.encode(c.settings.title)),b.setHTML(f,b.encode(c.settings.title)),b.addClass(d,"mceTitle"),c.selectedValue=c.selectedIndex=null,b.setAttrib(c.id,"aria-valuenow",c.settings.title)),d=0)},add:function(b,c,d){var e=this;d=d||{},d=a.extend(d,{title:b,value:c}),e.items.push(d),e.onAdd.dispatch(e,d)},getLength:function(){return this.items.length},renderHTML:function(){var a="",c=this,d=c.settings,e=c.classPrefix;return a='<span role="listbox" aria-haspopup="true" aria-labelledby="'+c.id+'_voiceDesc" aria-describedby="'+c.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+c.id+'" cellpadding="0" cellspacing="0" class="'+e+" "+e+"Enabled"+(d["class"]?" "+d["class"]:"")+'"><tbody><tr>',a+="<td>"+b.createHTML("span",{id:c.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},c.settings.title),a+=b.createHTML("a",{id:c.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},b.encode(c.settings.title))+"</td>",a+="<td>"+b.createHTML("a",{id:c.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span></span>')+"</td>",a+="</tr></tbody></table></span>",a},showMenu:function(){var e=this,f,g=b.get(this.id),h;if(e.isDisabled()||e.items.length==0)return;if(e.menu&&e.menu.isMenuVisible)return e.hideMenu();e.isMenuRendered||(e.renderMenu(),e.isMenuRendered=!0),f=b.getPos(g),h=e.menu,h.settings.offset_x=f.x,h.settings.offset_y=f.y,h.settings.keyboard_focus=!a.isOpera,e.oldID&&h.items[e.oldID].setSelected(0),d(e.items,function(a){a.value===e.selectedValue&&(h.items[a.id].setSelected(1),e.oldID=a.id)}),h.showMenu(0,g.clientHeight),c.add(b.doc,"mousedown",e.hideMenu,e),b.addClass(e.id,e.classPrefix+"Selected")},hideMenu:function(a){var d=this;if(d.menu&&d.menu.isMenuVisible){b.removeClass(d.id,d.classPrefix+"Selected");if(!(!a||a.type!="mousedown"||a.target.id!=d.id+"_text"&&a.target.id!=d.id+"_open"))return;if(!a||!b.getParent(a.target,".mceMenu"))b.removeClass(d.id,d.classPrefix+"Selected"),c.remove(b.doc,"mousedown",d.hideMenu,d),d.menu.hideMenu()}},renderMenu:function(){var a=this,c;c=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":a.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150}),c.onHideMenu.add(function(){a.hideMenu(),a.focus()}),c.add({title:a.settings.title,"class":"mceMenuItemTitle",onclick:function(){a.settings.onselect("")!==!1&&a.select("")}}),d(a.items,function(d){d.value===undefined?c.add({title:d.title,role:"option","class":"mceMenuItemTitle",onclick:function(){a.settings.onselect("")!==!1&&a.select("")}}):(d.id=b.uniqueId(),d.role="option",d.onclick=function(){a.settings.onselect(d.value)!==!1&&a.select(d.value)},c.add(d))}),a.onRenderMenu.dispatch(a,c),a.menu=c},postRender:function(){var d=this,e=d.classPrefix;c.add(d.id,"click",d.showMenu,d),c.add(d.id,"keydown",function(a){a.keyCode==32&&(d.showMenu(a),c.cancel(a))}),c.add(d.id,"focus",function(){d._focused||(d.keyDownHandler=c.add(d.id,"keydown",function(a){a.keyCode==40&&(d.showMenu(),c.cancel(a))}),d.keyPressHandler=c.add(d.id,"keypress",function(a){var b;a.keyCode==13&&(b=d.selectedValue,d.selectedValue=null,c.cancel(a),d.settings.onselect(b))})),d._focused=1}),c.add(d.id,"blur",function(){c.remove(d.id,"keydown",d.keyDownHandler),c.remove(d.id,"keypress",d.keyPressHandler),d._focused=0});if(a.isIE6||!b.boxModel)c.add(d.id,"mouseover",function(){b.hasClass(d.id,e+"Disabled")||b.addClass(d.id,e+"Hover")}),c.add(d.id,"mouseout",function(){b.hasClass(d.id,e+"Disabled")||b.removeClass(d.id,e+"Hover")});d.onPostRender.dispatch(d,b.get(d.id))},destroy:function(){this.parent(),c.clear(this.id+"_text"),c.clear(this.id+"_open")}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each,e=a.util.Dispatcher;a.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(a,b){this.parent(a,b),this.classPrefix="mceNativeListBox"},setDisabled:function(a){b.get(this.id).disabled=a,this.setAriaProperty("disabled",a)},isDisabled:function(){return b.get(this.id).disabled},select:function(a){var b=this,c,e;if(a==undefined)return b.selectByIndex(-1);a&&a.call?e=a:e=function(b){return b==a},a!=b.selectedValue&&(d(b.items,function(a,d){if(e(a.value))return c=1,b.selectByIndex(d),!1}),c||b.selectByIndex(-1))},selectByIndex:function(a){b.get(this.id).selectedIndex=a+1,this.selectedValue=this.items[a]?this.items[a].value:null},add:function(a,c,d){var e,f=this;d=d||{},d.value=c,f.isRendered()&&b.add(b.get(this.id),"option",d,a),e={title:a,value:c,attribs:d},f.items.push(e),f.onAdd.dispatch(f,e)},getLength:function(){return this.items.length},renderHTML:function(){var a,c=this;return a=b.createHTML("option",{value:""},"-- "+c.settings.title+" --"),d(c.items,function(c){a+=b.createHTML("option",{value:c.value},c.title)}),a=b.createHTML("select",{id:c.id,"class":"mceNativeListBox","aria-labelledby":c.id+"_aria"},a),a+=b.createHTML("span",{id:c.id+"_aria",style:"display: none"},c.settings.title),a},postRender:function(){function g(a){var b=d.items[a.target.selectedIndex-1];b&&(b=b.value)&&(d.onChange.dispatch(d,b),d.settings.onselect&&d.settings.onselect(b))}var d=this,e,f=!0;d.rendered=!0,c.add(d.id,"change",g),c.add(d.id,"keydown",function(b){var j;c.remove(d.id,"change",e),f=!1,j=c.add(d.id,"blur",function(){if(f)return;f=!0,c.add(d.id,"change",g),c.remove(d.id,"blur",j)});if(!(!a.isWebKit||b.keyCode!=37&&b.keyCode!=39))return c.prevent(b);if(b.keyCode==13||b.keyCode==32)return g(b),c.cancel(b)}),d.onPostRender.dispatch(d,b.get(d.id))}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each;a.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(c,d,e){this.parent(c,d,e),this.onRenderMenu=new a.util.Dispatcher(this),d.menu_container=d.menu_container||b.doc.body},showMenu:function(){var a=this,d,e,f=b.get(a.id),g;if(a.isDisabled())return;a.isMenuRendered||(a.renderMenu(),a.isMenuRendered=!0);if(a.isMenuVisible)return a.hideMenu();d=b.getPos(a.settings.menu_container),e=b.getPos(f),g=a.menu,g.settings.offset_x=e.x,g.settings.offset_y=e.y,g.settings.vp_offset_x=e.x,g.settings.vp_offset_y=e.y,g.settings.keyboard_focus=a._focused,g.showMenu(0,f.clientHeight),c.add(b.doc,"mousedown",a.hideMenu,a),a.setState("Selected",1),a.isMenuVisible=1},renderMenu:function(){var a=this,b;b=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:a.settings.icons}),b.onHideMenu.add(function(){a.hideMenu(),a.focus()}),a.onRenderMenu.dispatch(a,b),a.menu=b},hideMenu:function(a){var d=this;if(a&&a.type=="mousedown"&&b.getParent(a.target,function(a){return a.id===d.id||a.id===d.id+"_open"}))return;if(!a||!b.getParent(a.target,".mceMenu"))d.setState("Selected",0),c.remove(b.doc,"mousedown",d.hideMenu,d),d.menu&&d.menu.hideMenu();d.isMenuVisible=0},postRender:function(){var a=this,b=a.settings;c.add(a.id,"click",function(){a.isDisabled()||(b.onclick&&b.onclick(a.value),a.showMenu())})}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each;a.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(a,b,c){this.parent(a,b,c),this.classPrefix="mceSplitButton"},renderHTML:function(){var a,c=this,d=c.settings,e;return a="<tbody><tr>",d.image?e=b.createHTML("img ",{src:d.image,role:"presentation","class":"mceAction "+d["class"]}):e=b.createHTML("span",{"class":"mceAction "+d["class"]},""),e+=b.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:c.id+"_voice",style:"display:none;"},d.title),a+="<td >"+b.createHTML("a",{role:"button",id:c.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+d["class"],onclick:"return false;",onmousedown:"return false;",title:d.title},e)+"</td>",e=b.createHTML("span",{"class":"mceOpen "+d["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span>'),a+="<td >"+b.createHTML("a",{role:"button",id:c.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+d["class"],onclick:"return false;",onmousedown:"return false;",title:d.title},e)+"</td>",a+="</tr></tbody>",a=b.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+d["class"],cellpadding:"0",cellspacing:"0",title:d.title},a),b.createHTML("div",{id:c.id,role:"button",tabindex:"0","aria-labelledby":c.id+"_voice","aria-haspopup":"true"},a)},postRender:function(){var d=this,e=d.settings,f;e.onclick&&(f=function(a){d.isDisabled()||(e.onclick(d.value),c.cancel(a))},c.add(d.id+"_action","click",f),c.add(d.id,["click","keydown"],function(a){var b=32,e=14,g=13,h=38,i=40;if((a.keyCode===32||a.keyCode===13||a.keyCode===14)&&!a.altKey&&!a.ctrlKey&&!a.metaKey)f(),c.cancel(a);else if(a.type==="click"||a.keyCode===i)d.showMenu(),c.cancel(a)})),c.add(d.id+"_open","click",function(a){d.showMenu(),c.cancel(a)}),c.add([d.id,d.id+"_open"],"focus",function(){d._focused=1}),c.add([d.id,d.id+"_open"],"blur",function(){d._focused=0});if(a.isIE6||!b.boxModel)c.add(d.id,"mouseover",function(){b.hasClass(d.id,"mceSplitButtonDisabled")||b.addClass(d.id,"mceSplitButtonHover")}),c.add(d.id,"mouseout",function(){b.hasClass(d.id,"mceSplitButtonDisabled")||b.removeClass(d.id,"mceSplitButtonHover")})},destroy:function(){this.parent(),c.clear(this.id+"_action"),c.clear(this.id+"_open"),c.clear(this.id)}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.is,e=a.each;a.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(b,c,d){var e=this;e.parent(b,c,d),e.settings=c=a.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},e.settings),e.onShowMenu=new a.util.Dispatcher(e),e.onHideMenu=new a.util.Dispatcher(e),e.value=c.default_color},showMenu:function(){var a=this,d,e,f,g;if(a.isDisabled())return;a.isMenuRendered||(a.renderMenu(),a.isMenuRendered=!0);if(a.isMenuVisible)return a.hideMenu();f=b.get(a.id),b.show(a.id+"_menu"),b.addClass(f,"mceSplitButtonSelected"),g=b.getPos(f),b.setStyles(a.id+"_menu",{left:g.x,top:g.y+f.clientHeight,zIndex:2e5}),f=0,c.add(b.doc,"mousedown",a.hideMenu,a),a.onShowMenu.dispatch(a),a._focused&&(a._keyHandler=c.add(a.id+"_menu","keydown",function(b){b.keyCode==27&&a.hideMenu()}),b.select("a",a.id+"_menu")[0].focus()),a.isMenuVisible=1},hideMenu:function(a){var d=this;if(d.isMenuVisible){if(a&&a.type=="mousedown"&&b.getParent(a.target,function(a){return a.id===d.id+"_open"}))return;if(!a||!b.getParent(a.target,".mceSplitButtonMenu"))b.removeClass(d.id,"mceSplitButtonSelected"),c.remove(b.doc,"mousedown",d.hideMenu,d),c.remove(d.id+"_menu","keydown",d._keyHandler),b.hide(d.id+"_menu");d.isMenuVisible=0,d.onHideMenu.dispatch()}},renderMenu:function(){var f=this,g,h=0,i=f.settings,j,k,l,m,n;return m=b.add(i.menu_container,"div",{role:"listbox",id:f.id+"_menu","class":i.menu_class+" "+i["class"],style:"position:absolute;left:0;top:-1000px;"}),g=b.add(m,"div",{"class":i["class"]+" mceSplitButtonMenu"}),b.add(g,"span",{"class":"mceMenuLine"}),j=b.add(g,"table",{role:"presentation","class":"mceColorSplitMenu"}),k=b.add(j,"tbody"),h=0,e(d(i.colors,"array")?i.colors:i.colors.split(","),function(a){a=a.replace(/^#/,""),h--||(l=b.add(k,"tr"),h=i.grid_width-1),j=b.add(l,"td"),j=b.add(j,"a",{role:"option",href:"javascript:;",style:{backgroundColor:"#"+a},title:f.editor.getLang("colors."+a,a),"data-mce-color":"#"+a}),f.editor.forcedHighContrastMode&&(j=b.add(j,"canvas",{width:16,height:16,"aria-hidden":"true"}),j.getContext&&(n=j.getContext("2d"))?(n.fillStyle="#"+a,n.fillRect(0,0,16,16)):b.remove(j))}),i.more_colors_func&&(j=b.add(k,"tr"),j=b.add(j,"td",{colspan:i.grid_width,"class":"mceMoreColors"}),j=b.add(j,"a",{role:"option",id:f.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},i.more_colors_title),c.add(j,"click",function(a){return i.more_colors_func.call(i.more_colors_scope||this),c.cancel(a)})),b.addClass(g,"mceColorSplitMenu"),new a.ui.KeyboardNavigation({root:f.id+"_menu",items:b.select("a",f.id+"_menu"),onCancel:function(){f.hideMenu(),f.focus()}}),c.add(f.id+"_menu","mousedown",function(a){return c.cancel(a)}),c.add(f.id+"_menu","click",function(a){var d;return a=b.getParent(a.target,"a",k),a&&a.nodeName.toLowerCase()=="a"&&(d=a.getAttribute("data-mce-color"))&&f.setColor(d),c.cancel(a)}),m},setColor:function(a){this.displayColor(a),this.hideMenu(),this.settings.onselect(a)},displayColor:function(a){var c=this;b.setStyle(c.id+"_preview","backgroundColor",a),c.value=a},postRender:function(){var a=this,c=a.id;a.parent(),b.add(c+"_action","div",{id:c+"_preview","class":"mceColorPreview"}),b.setStyle(a.id+"_preview","backgroundColor",a.value)},destroy:function(){this.parent(),c.clear(this.id+"_menu"),c.clear(this.id+"_more"),b.remove(this.id+"_menu")}})}(tinymce),function(a){var b=a.DOM,c=a.each,d=a.dom.Event;a.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var c=this,d=[],e=c.controls,f=a.each,g=c.settings;return d.push('<div id="'+c.id+'" role="group" aria-labelledby="'+c.id+'_voice">'),d.push("<span role='application'>"),d.push('<span id="'+c.id+'_voice" class="mceVoiceLabel" style="display:none;">'+b.encode(g.name)+"</span>"),f(e,function(a){d.push(a.renderHTML())}),d.push("</span>"),d.push("</div>"),d.join("")},focus:function(){var a=this;b.get(a.id).focus()},postRender:function(){var d=this,e=[];c(d.controls,function(a){c(a.controls,function(a){a.id&&e.push(a)})}),d.keyNav=new a.ui.KeyboardNavigation({root:d.id,items:e,onCancel:function(){a.isWebKit&&b.get(d.editor.id+"_ifr").focus(),d.editor.focus()},excludeFromTabOrder:!d.settings.tab_focus_toolbar})},destroy:function(){var a=this;a.parent(),a.keyNav.destroy(),d.clear(a.id)}})}(tinymce),function(a){var b=a.DOM,c=a.each;a.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var a=this,
c="",d,e,f=a.settings,g,h,i,j;j=a.controls;for(g=0;g<j.length;g++)e=j[g],h=j[g-1],i=j[g+1],g===0&&(d="mceToolbarStart",e.Button?d+=" mceToolbarStartButton":e.SplitButton?d+=" mceToolbarStartSplitButton":e.ListBox&&(d+=" mceToolbarStartListBox"),c+=b.createHTML("td",{"class":d},b.createHTML("span",null,"<!-- IE -->"))),h&&e.ListBox&&(h.Button||h.SplitButton)&&(c+=b.createHTML("td",{"class":"mceToolbarEnd"},b.createHTML("span",null,"<!-- IE -->"))),b.stdMode?c+='<td style="position: relative">'+e.renderHTML()+"</td>":c+="<td>"+e.renderHTML()+"</td>",i&&e.ListBox&&(i.Button||i.SplitButton)&&(c+=b.createHTML("td",{"class":"mceToolbarStart"},b.createHTML("span",null,"<!-- IE -->")));return d="mceToolbarEnd",e.Button?d+=" mceToolbarEndButton":e.SplitButton?d+=" mceToolbarEndSplitButton":e.ListBox&&(d+=" mceToolbarEndListBox"),c+=b.createHTML("td",{"class":d},b.createHTML("span",null,"<!-- IE -->")),b.createHTML("table",{id:a.id,"class":"mceToolbar"+(f["class"]?" "+f["class"]:""),cellpadding:"0",cellspacing:"0",align:a.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+c+"</tr></tbody>")}})}(tinymce),function(a){var b=a.util.Dispatcher,c=a.each;a.create("tinymce.AddOnManager",{AddOnManager:function(){var a=this;a.items=[],a.urls={},a.lookup={},a.onAdd=new b(a)},get:function(a){return this.lookup[a]?this.lookup[a].instance:undefined},dependencies:function(a){var b;return this.lookup[a]&&(b=this.lookup[a].dependencies),b||[]},requireLangPack:function(b){var c=a.settings;c&&c.language&&c.language_load!==!1&&a.ScriptLoader.add(this.urls[b]+"/langs/"+c.language+".js")},add:function(a,b,c){return this.items.push(b),this.lookup[a]={instance:b,dependencies:c},this.onAdd.dispatch(this,a,b),b},createUrl:function(a,b){return typeof b=="object"?b:{prefix:a.prefix,resource:b,suffix:a.suffix}},addComponents:function(b,c){var d=this.urls[b];a.each(c,function(b){a.ScriptLoader.add(d+"/"+b)})},load:function(b,c,d,e){function h(){var g=f.dependencies(b);a.each(g,function(a){var b=f.createUrl(c,a);f.load(b.resource,b,undefined,undefined)}),d&&(e?d.call(e):d.call(a.ScriptLoader))}var f=this,g=c;if(f.urls[b])return;typeof c=="object"&&(g=c.prefix+c.resource+c.suffix),g.indexOf("/")!=0&&g.indexOf("://")==-1&&(g=a.baseURL+"/"+g),f.urls[b]=g.substring(0,g.lastIndexOf("/")),f.lookup[b]?h():a.ScriptLoader.add(g,h,e)}}),a.PluginManager=new a.AddOnManager,a.ThemeManager=new a.AddOnManager}(tinymce),function(a){var b=a.each,c=a.extend,d=a.DOM,e=a.dom.Event,f=a.ThemeManager,g=a.PluginManager,h=a.explode,i=a.util.Dispatcher,j,k=0;a.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(a.documentBaseURL)||(a.documentBaseURL+="/"),a.baseURL=(new a.util.URI(a.documentBaseURL)).toAbsolute(a.baseURL),a.baseURI=new a.util.URI(a.baseURL),a.onBeforeUnload=new i(a),e.add(window,"beforeunload",function(b){a.onBeforeUnload.dispatch(a,b)}),a.onAddEditor=new i(a),a.onRemoveEditor=new i(a),a.EditorManager=c(a,{editors:[],i18n:{},activeEditor:null,init:function(f){function o(b,c,d){var e=b[c];if(!e)return;return a.is(e,"string")&&(d=e.replace(/\.\w+$/,""),d=d?a.resolve(d):0,e=a.resolve(e)),e.apply(d||this,Array.prototype.slice.call(arguments,2))}var g=this,i,j=a.ScriptLoader,l,m=[],n;f=c({theme:"simple",language:"en"},f),g.settings=f,e.add(document,"init",function(){var c,e;o(f,"onpageload");switch(f.mode){case"exact":c=f.elements||"",c.length>0&&b(h(c),function(c){d.get(c)?(n=new a.Editor(c,f),m.push(n),n.render(1)):b(document.forms,function(e){b(e.elements,function(b){b.name===c&&(c="mce_editor_"+k++,d.setAttrib(b,"id",c),n=new a.Editor(c,f),m.push(n),n.render(1))})})});break;case"textareas":case"specific_textareas":function i(a,b){return b.constructor===RegExp?b.test(a.className):d.hasClass(a,b)}b(d.select("textarea"),function(b){if(f.editor_deselector&&i(b,f.editor_deselector))return;if(!f.editor_selector||i(b,f.editor_selector)){l=d.get(b.name),!b.id&&!l&&(b.id=b.name);if(!b.id||g.get(b.id))b.id=d.uniqueId();n=new a.Editor(b.id,f),m.push(n),n.render(1)}})}f.oninit&&(c=e=0,b(m,function(a){e++,a.initialized?c++:a.onInit.add(function(){c++,c==e&&o(f,"oninit")}),c==e&&o(f,"oninit")}))})},get:function(a){return a===j?this.editors:this.editors[a]},getInstanceById:function(a){return this.get(a)},add:function(a){var b=this,c=b.editors;return c[a.id]=a,c.push(a),b._setActive(a),b.onAddEditor.dispatch(b,a),a},remove:function(a){var b=this,c,d=b.editors;if(!d[a.id])return null;delete d[a.id];for(c=0;c<d.length;c++)if(d[c]==a){d.splice(c,1);break}return b.activeEditor==a&&b._setActive(d[0]),a.destroy(),b.onRemoveEditor.dispatch(b,a),a},execCommand:function(b,c,d){var e=this,f=e.get(d),g;switch(b){case"mceFocus":return f.focus(),!0;case"mceAddEditor":case"mceAddControl":return e.get(d)||(new a.Editor(d,e.settings)).render(),!0;case"mceAddFrameControl":g=d.window,g.tinyMCE=tinyMCE,g.tinymce=a,a.DOM.doc=g.document,a.DOM.win=g,f=new a.Editor(d.element_id,d),f.render();if(a.isIE){function h(){f.destroy(),g.detachEvent("onunload",h),g=g.tinyMCE=g.tinymce=null}g.attachEvent("onunload",h)}return d.page_window=null,!0;case"mceRemoveEditor":case"mceRemoveControl":return f&&f.remove(),!0;case"mceToggleEditor":if(!f)return e.execCommand("mceAddControl",0,d),!0;return f.isHidden()?f.show():f.hide(),!0}return e.activeEditor?e.activeEditor.execCommand(b,c,d):!1},execInstanceCommand:function(a,b,c,d){var e=this.get(a);return e?e.execCommand(b,c,d):!1},triggerSave:function(){b(this.editors,function(a){a.save()})},addI18n:function(c,d){var e,f=this.i18n;a.is(c,"string")?b(d,function(a,b){f[c+"."+b]=a}):b(c,function(a,c){b(a,function(a,d){b(a,function(a,b){d==="common"?f[c+"."+b]=a:f[c+"."+d+"."+b]=a})})})},_setActive:function(a){this.selectedInstance=this.activeEditor=a}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.extend,e=a.util.Dispatcher,f=a.each,g=a.isGecko,h=a.isIE,i=a.isWebKit,j=a.is,k=a.ThemeManager,l=a.PluginManager,m=a.inArray,n=a.grep,o=a.explode;a.create("tinymce.Editor",{Editor:function(b,c){var g=this;g.id=g.editorId=b,g.execCommands={},g.queryStateCommands={},g.queryValueCommands={},g.isNotDirty=!1,g.plugins={},f(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(a){g[a]=new e(g)}),g.settings=c=d({id:b,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:a.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:a.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",validate:!0,entity_encoding:"named",url_converter:g.convertURL,url_converter_scope:g,ie7_compat:!0},c),g.documentBaseURI=new a.util.URI(c.document_base_url||a.documentBaseURL,{base_uri:tinyMCE.baseURI}),g.baseURI=a.baseURI,g.contentCSS=[],g.execCallback("setup",g)},render:function(d){function j(){g.language&&g.language_load!==!1&&i.add(a.baseURL+"/langs/"+g.language+".js"),g.theme&&g.theme.charAt(0)!="-"&&!k.urls[g.theme]&&k.load(g.theme,"themes/"+g.theme+"/editor_template"+a.suffix+".js"),f(o(g.plugins),function(b){if(b&&!l.urls[b])if(b.charAt(0)=="-"){b=b.substr(1,b.length);var c=l.dependencies(b);f(c,function(b){var c={prefix:"plugins/",resource:b,suffix:"/editor_plugin"+a.suffix+".js"},b=l.createUrl(c,b);l.load(b.resource,b)})}else{if(b=="safari")return;l.load(b,{prefix:"plugins/",resource:b,suffix:"/editor_plugin"+a.suffix+".js"})}}),i.loadQueue(function(){e.removed||e.init()})}var e=this,g=e.settings,h=e.id,i=a.ScriptLoader;if(!c.domLoaded){c.add(document,"init",function(){e.render()});return}tinyMCE.settings=g;if(!e.getElement())return;if(a.isIDevice&&!a.isIOS5)return;!/TEXTAREA|INPUT/i.test(e.getElement().nodeName)&&g.hidden_input&&b.getParent(h,"form")&&b.insertAfter(b.create("input",{type:"hidden",name:h}),h),a.WindowManager&&(e.windowManager=new a.WindowManager(e)),g.encoding=="xml"&&e.onGetContent.add(function(a,c){c.save&&(c.content=b.encode(c.content))}),g.add_form_submit_trigger&&e.onSubmit.addToTop(function(){e.initialized&&(e.save(),e.isNotDirty=1)}),g.add_unload_trigger&&(e._beforeUnload=tinyMCE.onBeforeUnload.add(function(){e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0})})),a.addUnload(e.destroy,e),g.submit_patch&&e.onBeforeRenderUI.add(function(){var b=e.getElement().form;if(!b)return;if(b._mceOldSubmit)return;!b.submit.nodeType&&!b.submit.length&&(e.formElement=b,b._mceOldSubmit=b.submit,b.submit=function(){return a.triggerSave(),e.isNotDirty=1,e.formElement._mceOldSubmit(e.formElement)}),b=null}),j()},init:function(){function w(b){var c=l.get(b),e=l.urls[b]||a.documentBaseURL.replace(/\/$/,""),g;c&&a.inArray(v,b)===-1&&(f(l.dependencies(b),function(a){w(a)}),g=new c(d,e),d.plugins[b]=g,g.init&&(g.init(d,e),v.push(b)))}var c,d=this,e=d.settings,i,j,m=d.getElement(),n,p,q,r,s,t,u,v=[];a.add(d),e.aria_label=e.aria_label||b.getAttrib(m,"aria-label",d.getLang("aria.rich_text_area")),e.theme&&(e.theme=e.theme.replace(/-/,""),n=k.get(e.theme),d.theme=new n,d.theme.init&&e.init_theme&&d.theme.init(d,k.urls[e.theme]||a.documentBaseURL.replace(/\/$/,""))),f(o(e.plugins.replace(/\-/g,"")),w),e.popup_css!==!1&&(e.popup_css?e.popup_css=d.documentBaseURI.toAbsolute(e.popup_css):e.popup_css=d.baseURI.toAbsolute("themes/"+e.theme+"/skins/"+e.skin+"/dialog.css")),e.popup_css_add&&(e.popup_css+=","+d.documentBaseURI.toAbsolute(e.popup_css_add)),d.controlManager=new a.ControlManager(d),e.custom_undo_redo&&(d.onBeforeExecCommand.add(function(a,b,c,e,f){b!="Undo"&&b!="Redo"&&b!="mceRepaint"&&(!f||!f.skip_undo)&&d.undoManager.beforeChange()}),d.onExecCommand.add(function(a,b,c,e,f){b!="Undo"&&b!="Redo"&&b!="mceRepaint"&&(!f||!f.skip_undo)&&d.undoManager.add()})),d.onExecCommand.add(function(a,b){/^(FontName|FontSize)$/.test(b)||d.nodeChanged()});if(g){function x(a,b){(!b||!b.initial)&&d.execCommand("mceRepaint")}d.onUndo.add(x),d.onRedo.add(x),d.onSetContent.add(x)}d.onBeforeRenderUI.dispatch(d,d.controlManager),e.render_ui&&(i=e.width||m.style.width||m.offsetWidth,j=e.height||m.style.height||m.offsetHeight,d.orgDisplay=m.style.display,t=/^[0-9\.]+(|px)$/i,t.test(""+i)&&(i=Math.max(parseInt(i)+(n.deltaWidth||0),100)),t.test(""+j)&&(j=Math.max(parseInt(j)+(n.deltaHeight||0),100)),n=d.theme.renderUI({targetNode:m,width:i,height:j,deltaWidth:e.delta_width,deltaHeight:e.delta_height}),d.editorContainer=n.editorContainer),document.domain&&location.hostname!=document.domain&&(a.relaxedDomain=document.domain),b.setStyles(n.sizeContainer||n.editorContainer,{width:i,height:j}),e.content_css&&a.each(o(e.content_css),function(a){d.contentCSS.push(d.documentBaseURI.toAbsolute(a))}),j=(n.iframeHeight||j)+(typeof j=="number"?n.deltaHeight||0:""),j<100&&(j=100),d.iframeHTML=e.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">',e.document_base_url!=a.documentBaseURL&&(d.iframeHTML+='<base href="'+d.documentBaseURI.getURI()+'" />'),e.ie7_compat?d.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />':d.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />',d.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';for(u=0;u<d.contentCSS.length;u++)d.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+d.contentCSS[u]+'" />';r=e.body_id||"tinymce",r.indexOf("=")!=-1&&(r=d.getParam("body_id","","hash"),r=r[d.id]||r),s=e.body_class||"",s.indexOf("=")!=-1&&(s=d.getParam("body_class","","hash"),s=s[d.id]||""),d.iframeHTML+='</head><body id="'+r+'" class="mceContentBody '+s+'"><br></body></html>',a.relaxedDomain&&(h||a.isOpera&&parseFloat(opera.version())<11)&&(q='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+d.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()'),c=b.add(n.iframeContainer,"iframe",{id:d.id+"_ifr",src:q||'javascript:""',frameBorder:"0",allowTransparency:"true",title:e.aria_label,style:{width:"100%",height:j,display:"block"}}),d.contentAreaContainer=n.iframeContainer,b.get(n.editorContainer).style.display=d.orgDisplay,b.get(d.id).style.display="none",b.setAttrib(d.id,"aria-hidden",!0),(!a.relaxedDomain||!q)&&d.setupIframe(),m=c=n=null},setupIframe:function(){var d=this,e=d.settings,i=b.get(d.id),j=d.getDoc(),k,l;if(!h||!a.relaxedDomain)j.open(),j.write(d.iframeHTML),j.close(),a.relaxedDomain&&(j.domain=a.relaxedDomain);l=d.getBody(),l.disabled=!0,e.readonly||(l.contentEditable=!0),l.disabled=!1,d.schema=new a.html.Schema(e),d.dom=new a.dom.DOMUtils(d.getDoc(),{keep_values:!0,url_converter:d.convertURL,url_converter_scope:d,hex_colors:e.force_hex_style_colors,class_filter:e.class_filter,update_styles:1,fix_ie_paragraphs:1,schema:d.schema}),d.parser=new a.html.DomParser(e,d.schema),d.settings.allow_html_in_named_anchor||d.parser.addAttributeFilter("name",function(a,b){var c=a.length,d,e,f,g;while(c--){g=a[c];if(g.name==="a"&&g.firstChild){f=g.parent,d=g.lastChild;do e=d.prev,f.insert(d,g),d=e;while(d)}}}),d.parser.addAttributeFilter("src,href,style",function(a,b){var c=a.length,e,f=d.dom,g,h;while(c--)e=a[c],g=e.attr(b),h="data-mce-"+b,e.attributes.map[h]||(b==="style"?e.attr(h,f.serializeStyle(f.parseStyle(g),e.name)):e.attr(h,d.convertURL(g,b,e.name)))}),d.parser.addNodeFilter("script",function(a,b){var c=a.length,d;while(c--)d=a[c],d.attr("type","mce-"+(d.attr("type")||"text/javascript"))}),d.parser.addNodeFilter("#cdata",function(a,b){var c=a.length,d;while(c--)d=a[c],d.type=8,d.name="#comment",d.value="[CDATA["+d.value+"]]"}),d.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(b,c){var e=b.length,f,g=d.schema.getNonEmptyElements();while(e--)f=b[e],f.isEmpty(g)&&(f.empty().append(new a.html.Node("br",1)).shortEnded=!0)}),d.serializer=new a.dom.Serializer(e,d.dom,d.schema),d.selection=new a.dom.Selection(d.dom,d.getWin(),d.serializer),d.formatter=new a.Formatter(this),d.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(a){return!0},onformat:function(a,b,c){f(c,function(b,c){d.dom.setAttrib(a,c,b)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),f("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(a){d.formatter.register(a,{block:a,remove:"all"})}),d.formatter.register(d.settings.formats),d.undoManager=new a.UndoManager(d),d.undoManager.onAdd.add(function(a,b){if(a.hasUndo())return d.onChange.dispatch(d,b,a)}),d.undoManager.onUndo.add(function(a,b){return d.onUndo.dispatch(d,b,a)}),d.undoManager.onRedo.add(function(a,b){return d.onRedo.dispatch(d,b,a)}),d.forceBlocks=new a.ForceBlocks(d,{forced_root_block:e.forced_root_block}),d.editorCommands=new a.EditorCommands(d),d.serializer.onPreProcess.add(function(a,b){return d.onPreProcess.dispatch(d,b,a)}),d.serializer.onPostProcess.add(function(a,b){return d.onPostProcess.dispatch(d,b,a)}),d.onPreInit.dispatch(d),e.gecko_spellcheck||(d.getBody().spellcheck=0),e.readonly||d._addEvents(),d.controlManager.onPostRender.dispatch(d,d.controlManager),d.onPostRender.dispatch(d),d.quirks=new a.util.Quirks(this),e.directionality&&(d.getBody().dir=e.directionality),e.nowrap&&(d.getBody().style.whiteSpace="nowrap"),e.handle_node_change_callback&&d.onNodeChange.add(function(a,b,c){d.execCallback("handle_node_change_callback",d.id,c,-1,-1,!0,d.selection.isCollapsed())}),e.save_callback&&d.onSaveContent.add(function(a,b){var c=d.execCallback("save_callback",d.id,b.content,d.getBody());c&&(b.content=c)}),e.onchange_callback&&d.onChange.add(function(a,b){d.execCallback("onchange_callback",d,b)}),e.protect&&d.onBeforeSetContent.add(function(a,b){e.protect&&f(e.protect,function(a){b.content=b.content.replace(a,function(a){return"<!--mce:protected "+escape(a)+"-->"})})}),e.convert_newlines_to_brs&&d.onBeforeSetContent.add(function(a,b){b.initial&&(b.content=b.content.replace(/\r?\n/g,"<br />"))}),e.preformatted&&d.onPostProcess.add(function(a,b){b.content=b.content.replace(/^\s*<pre.*?>/,""),b.content=b.content.replace(/<\/pre>\s*$/,""),b.set&&(b.content='<pre class="mceItemHidden">'+b.content+"</pre>")}),e.verify_css_classes&&(d.serializer.attribValueFilter=function(a,b){var c,e;return a=="class"?(d.classesRE||(e=d.dom.getClasses(),e.length>0&&(c="",f(e,function(a){c+=(c?"|":"")+a["class"]}),d.classesRE=new RegExp("("+c+")","gi"))),!d.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(b)||d.classesRE.test(b)?b:""):b}),e.cleanup_callback&&(d.onBeforeSetContent.add(function(a,b){b.content=d.execCallback("cleanup_callback","insert_to_editor",b.content,b)}),d.onPreProcess.add(function(a,b){b.set&&d.execCallback("cleanup_callback","insert_to_editor_dom",b.node,b),b.get&&d.execCallback("cleanup_callback","get_from_editor_dom",b.node,b)}),d.onPostProcess.add(function(a,b){b.set&&(b.content=d.execCallback("cleanup_callback","insert_to_editor",b.content,b)),b.get&&(b.content=d.execCallback("cleanup_callback","get_from_editor",b.content,b))})),e.save_callback&&d.onGetContent.add(function(a,b){b.save&&(b.content=d.execCallback("save_callback",d.id,b.content,d.getBody()))}),e.handle_event_callback&&d.onEvent.add(function(a,b,e){d.execCallback("handle_event_callback",b,a,e)===!1&&c.cancel(b)}),d.onSetContent.add(function(){d.addVisual(d.getBody())}),e.padd_empty_editor&&d.onPostProcess.add(function(a,b){b.content=b.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")});if(g){function m(a,b){f(a.dom.select("a"),function(b){var c=b.parentNode;a.dom.isBlock(c)&&c.lastChild===b&&a.dom.add(c,"br",{"data-mce-bogus":1})})}d.onExecCommand.add(function(a,b){b==="CreateLink"&&m(a)}),d.onSetContent.add(d.selection.onSetContent.add(m))}d.load({initial:!0,format:"html"}),d.startContent=d.getContent({format:"raw"}),d.undoManager.add(),d.initialized=!0,d.onInit.dispatch(d),d.execCallback("setupcontent_callback",d.id,d.getBody(),d.getDoc()),d.execCallback("init_instance_callback",d),d.focus(!0),d.nodeChanged({initial:1}),f(d.contentCSS,function(a){d.dom.loadCSS(a)}),e.auto_focus&&setTimeout(function(){var b=a.get(e.auto_focus);b.selection.select(b.getBody(),1),b.selection.collapse(1),b.getBody().focus(),b.getWin().focus()},100),i=null},focus:function(b){var c,d=this,e=d.selection,f=d.settings.content_editable,g,h,i=d.getDoc();b||(g=e.getRng(),g.item&&(h=g.item(0)),d._refreshContentEditable(),e.normalize(),f||d.getWin().focus(),a.isGecko&&d.getBody().focus(),h&&h.ownerDocument==i&&(g=i.body.createControlRange(),g.addElement(h),g.select())),a.activeEditor!=d&&((c=a.activeEditor)!=null&&c.onDeactivate.dispatch(c,d),d.onActivate.dispatch(d,c)),a._setActive(d)},execCallback:function(b){var c=this,d=c.settings[b],e;if(!d)return;return c.callbackLookup&&(e=c.callbackLookup[b])&&(d=e.func,e=e.scope),j(d,"string")&&(e=d.replace(/\.\w+$/,""),e=e?a.resolve(e):0,d=a.resolve(d),c.callbackLookup=c.callbackLookup||{},c.callbackLookup[b]={func:d,scope:e}),d.apply(e||c,Array.prototype.slice.call(arguments,1))},translate:function(b){var c=this.settings.language||"en",d=a.i18n;return b?d[c+"."+b]||b.replace(/{\#([^}]+)\}/g,function(a,b){return d[c+"."+b]||"{#"+b+"}"}):""},getLang:function(b,c){return a.i18n[(this.settings.language||"en")+"."+b]||(j(c)?c:"{#"+b+"}")},getParam:function(b,c,d){var e=a.trim,g=j(this.settings[b])?this.settings[b]:c,h;return d==="hash"?(h={},j(g,"string")?f(g.indexOf("=")>0?g.split(/[;,](?![^=;,]*(?:[;,]|$))/):g.split(","),function(a){a=a.split("="),a.length>1?h[e(a[0])]=e(a[1]):h[e(a[0])]=e(a)}):h=g,h):g},nodeChanged:function(a){var b=this,c=b.selection,d=c.getStart()||b.getBody();b.initialized&&(a=a||{},d=h&&d.ownerDocument!=b.getDoc()?b.getBody():d,a.parents=[],b.dom.getParent(d,function(b){if(b.nodeName=="BODY")return!0;a.parents.push(b)}),b.onNodeChange.dispatch(b,a?a.controlManager||b.controlManager:b.controlManager,d,c.isCollapsed(),a))},addButton:function(a,b){var c=this;c.buttons=c.buttons||{},c.buttons[a]=b},addCommand:function(a,b,c){this.execCommands[a]={func:b,scope:c||this}},addQueryStateHandler:function(a,b,c){this.queryStateCommands[a]={func:b,scope:c||this}},addQueryValueHandler:function(a,b,c){this.queryValueCommands[a]={func:b,scope:c||this}},addShortcut:function(a,b,c,d){var e=this,g;return e.settings.custom_shortcuts?(e.shortcuts=e.shortcuts||{},j(c,"string")&&(g=c,c=function(){e.execCommand(g,!1,null)}),j(c,"object")&&(g=c,c=function(){e.execCommand(g[0],g[1],g[2])}),f(o(a),function(a){var g={func:c,scope:d||this,desc:b,alt:!1,ctrl:!1,shift:!1};f(o(a,"+"),function(a){switch(a){case"alt":case"ctrl":case"shift":g[a]=!0;break;default:g.charCode=a.charCodeAt(0),g.keyCode=a.toUpperCase().charCodeAt(0)}}),e.shortcuts[(g.ctrl?"ctrl":"")+","+(g.alt?"alt":"")+","+(g.shift?"shift":"")+","+g.keyCode]=g}),!0):!1},execCommand:function(a,b,c,d){var e=this,g=0,h,i;!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(a)&&(!d||!d.skip_focus)&&e.focus(),h={},e.onBeforeExecCommand.dispatch(e,a,b,c,h);if(h.terminate)return!1;if(e.execCallback("execcommand_callback",e.id,e.selection.getNode(),a,b,c))return e.onExecCommand.dispatch(e,a,b,c,d),!0;if(h=e.execCommands[a]){i=h.func.call(h.scope,b,c);if(i!==!0)return e.onExecCommand.dispatch(e,a,b,c,d),i}f(e.plugins,function(f){if(f.execCommand&&f.execCommand(a,b,c))return e.onExecCommand.dispatch(e,a,b,c,d),g=1,!1});if(g)return!0;if(e.theme&&e.theme.execCommand&&e.theme.execCommand(a,b,c))return e.onExecCommand.dispatch(e,a,b,c,d),!0;if(e.editorCommands.execCommand(a,b,c))return e.onExecCommand.dispatch(e,a,b,c,d),!0;e.getDoc().execCommand(a,b,c),e.onExecCommand.dispatch(e,a,b,c,d)},queryCommandState:function(a){var b=this,c,d;if(b._isHidden())return;if(c=b.queryStateCommands[a]){d=c.func.call(c.scope);if(d!==!0)return d}c=b.editorCommands.queryCommandState(a);if(c!==-1)return c;try{return this.getDoc().queryCommandState(a)}catch(e){}},queryCommandValue:function(a){var b=this,c,d;if(b._isHidden())return;if(c=b.queryValueCommands[a]){d=c.func.call(c.scope);if(d!==!0)return d}c=b.editorCommands.queryCommandValue(a);if(j(c))return c;try{return this.getDoc().queryCommandValue(a)}catch(e){}},show:function(){var a=this;b.show(a.getContainer()),b.hide(a.id),a.load()},hide:function(){var a=this,c=a.getDoc();h&&c&&c.execCommand("SelectAll"),a.save(),b.hide(a.getContainer()),b.setStyle(a.id,"display",a.orgDisplay)},isHidden:function(){return!b.isHidden(this.id)},setProgressState:function(a,b,c){return this.onSetProgressState.dispatch(this,a,b,c),a},load:function(a){var b=this,c=b.getElement(),d;if(c)return a=a||{},a.load=!0,d=b.setContent(j(c.value)?c.value:c.innerHTML,a),a.element=c,a.no_events||b.onLoadContent.dispatch(b,a),a.element=c=null,d},save:function(a){var c=this,d=c.getElement(),e,g;if(!d||!c.initialized)return;return a=a||{},a.save=!0,a.no_events||(c.undoManager.typing=!1,c.undoManager.add()),a.element=d,e=a.content=c.getContent(a),a.no_events||c.onSaveContent.dispatch(c,a),e=a.content,/TEXTAREA|INPUT/i.test(d.nodeName)?d.value=e:(d.innerHTML=e,(g=b.getParent(c.id,"form"))&&f(g.elements,function(a){if(a.name==c.id)return a.value=e,!1})),a.element=d=null,e},setContent:function(b,c){var d=this,e,f=d.getBody(),g;c=c||{},c.format=c.format||"html",c.set=!0,c.content=b,c.no_events||d.onBeforeSetContent.dispatch(d,c),b=c.content;if(!a.isIE&&(b.length===0||/^\s+$/.test(b))){g=d.settings.forced_root_block,g?b="<"+g+'><br data-mce-bogus="1"></'+g+">":b='<br data-mce-bogus="1">',f.innerHTML=b,d.selection.select(f,!0),d.selection.collapse(!0);return}return c.format!=="raw"&&(b=(new a.html.Serializer({},d.schema)).serialize(d.parser.parse(b))),c.content=a.trim(b),d.dom.setHTML(f,c.content),c.no_events||d.onSetContent.dispatch(d,c),d.selection.normalize(),c.content},getContent:function(b){var c=this,d;return b=b||{},b.format=b.format||"html",b.get=!0,b.no_events||c.onBeforeGetContent.dispatch(c,b),b.format=="raw"?d=c.getBody().innerHTML:d=c.serializer.serialize(c.getBody(),b),b.content=a.trim(d),b.no_events||c.onGetContent.dispatch(c,b),b.content},isDirty:function(){var b=this;return a.trim(b.startContent)!=a.trim(b.getContent({format:"raw",no_events:1}))&&!b.isNotDirty},getContainer:function(){var a=this;return a.container||(a.container=b.get(a.editorContainer||a.id+"_parent")),a.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return b.get(this.settings.content_element||this.id)},getWin:function(){var a=this,c;return a.contentWindow||(c=b.get(a.id+"_ifr"),c&&(a.contentWindow=c.contentWindow)),a.contentWindow},getDoc:function(){var a=this,b;return a.contentDocument||(b=a.getWin(),b&&(a.contentDocument=b.document)),a.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(a,b,c){var d=this,e=d.settings;return e.urlconverter_callback?d.execCallback("urlconverter_callback",a,c,!0,b):!e.convert_urls||c&&c.nodeName=="LINK"||a.indexOf("file:")===0?a:e.relative_urls?d.documentBaseURI.toRelative(a):(a=d.documentBaseURI.toAbsolute(a,e.remove_script_host),a)},addVisual:function(a){var b=this,c=b.settings;a=a||b.getBody(),j(b.hasVisual)||(b.hasVisual=c.visual),f(b.dom.select("table,a",a),function(a){var d;switch(a.nodeName){case"TABLE":d=b.dom.getAttrib(a,"border");if(!d||d=="0")b.hasVisual?b.dom.addClass(a,c.visual_table_class):b.dom.removeClass(a,c.visual_table_class);return;case"A":d=b.dom.getAttrib(a,"name"),d&&(b.hasVisual?b.dom.addClass(a,"mceItemAnchor"):b.dom.removeClass(a,"mceItemAnchor"));return}}),b.onVisualAid.dispatch(b,a,b.hasVisual)},remove:function(){var c=this,d=c.getContainer();c.removed=1,c.hide(),c.execCallback("remove_instance_callback",c),c.onRemove.dispatch(c),c.onExecCommand.listeners=[],a.remove(c),b.remove(d)},destroy:function(b){var d=this;if(d.destroyed)return;b||(a.removeUnload(d.destroy),tinyMCE.onBeforeUnload.remove(d._beforeUnload),d.theme&&d.theme.destroy&&d.theme.destroy(),d.controlManager.destroy(),d.selection.destroy(),d.dom.destroy(),d.settings.content_editable||(c.clear(d.getWin()),c.clear(d.getDoc())),c.clear(d.getBody()),c.clear(d.formElement)),d.formElement&&(d.formElement.submit=d.formElement._mceOldSubmit,d.formElement._mceOldSubmit=null),d.contentAreaContainer=d.formElement=d.container=d.settings.content_element=d.bodyElement=d.contentDocument=d.contentWindow=null,d.selection&&(d.selection=d.selection.win=d.selection.dom=d.selection.dom.doc=null),d.destroyed=1},_addEvents:function(){function k(a,b){var c=a.type;if(d.removed)return;d.onEvent.dispatch(d,a,b)!==!1&&d[j[a.fakeType||a.type]].dispatch(d,a,b)}var d=this,e,h=d.settings,i=d.dom,j={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};f(j,function(a,c){switch(c){case"contextmenu":i.bind(d.getDoc(),c,k);break;case"paste":i.bind(d.getBody(),c,function(a){k(a)});break;case"submit":case"reset":i.bind(d.getElement().form||b.getParent(d.id,"form"),c,k);break;default:i.bind(h.content_editable?d.getBody():d.getDoc(),c,k)}}),i.bind(h.content_editable?d.getBody():g?d.getDoc():d.getWin(),"focus",function(a){d.focus(!0)}),a.isGecko&&i.bind(d.getDoc(),"DOMNodeInserted",function(a){var b;a=a.target,a.nodeType===1&&a.nodeName==="IMG"&&(b=a.getAttribute("data-mce-src"))&&(a.src=d.documentBaseURI.toAbsolute(b))});if(g){function l(){var a=this,b=a.getDoc(),c=a.settings;if(g&&!c.readonly){a._refreshContentEditable();try{b.execCommand("styleWithCSS",0,!1)}catch(d){if(!a._isHidden())try{b.execCommand("useCSS",0,!0)}catch(d){}}if(!c.table_inline_editing)try{b.execCommand("enableInlineTableEditing",!1,!1)}catch(d){}if(!c.object_resizing)try{b.execCommand("enableObjectResizing",!1,!1)}catch(d){}}}d.onBeforeExecCommand.add(l),d.onMouseDown.add(l)}d.onMouseUp.add(d.nodeChanged),d.onKeyUp.add(function(b,c){var e=c.keyCode;(e>=33&&e<=36||e>=37&&e<=40||e==13||e==45||e==46||e==8||a.isMac&&(e==91||e==93)||c.ctrlKey)&&d.nodeChanged()}),d.onKeyDown.add(function(a,b){if(b.keyCode!=8)return;var c=a.selection.getRng().startContainer,d=a.selection.getRng().startOffset;while(c&&c.nodeType&&c.nodeType!=1&&c.parentNode)c=c.parentNode;if(c&&c.parentNode&&c.parentNode.tagName==="BLOCKQUOTE"&&c.parentNode.firstChild==c&&d==0){a.formatter.toggle("blockquote",null,c.parentNode);var e=a.selection.getRng();e.setStart(c,0),e.setEnd(c,0),a.selection.setRng(e),a.selection.collapse(!1)}}),d.onReset.add(function(){d.setContent(d.startContent,{format:"raw"})});if(h.custom_shortcuts){h.custom_undo_redo_keyboard_shortcuts&&(d.addShortcut("ctrl+z",d.getLang("undo_desc"),"Undo"),d.addShortcut("ctrl+y",d.getLang("redo_desc"),"Redo")),d.addShortcut("ctrl+b",d.getLang("bold_desc"),"Bold"),d.addShortcut("ctrl+i",d.getLang("italic_desc"),"Italic"),d.addShortcut("ctrl+u",d.getLang("underline_desc"),"Underline");for(e=1;e<=6;e++)d.addShortcut("ctrl+"+e,"",["FormatBlock",!1,"h"+e]);d.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),d.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),d.addShortcut("ctrl+9","",["FormatBlock",!1,"address"]);function m(b){var c=null;return!b.altKey&&!b.ctrlKey&&!b.metaKey?c:(f(d.shortcuts,function(d){if(a.isMac&&d.ctrl!=b.metaKey)return;if(!a.isMac&&d.ctrl!=b.ctrlKey)return;if(d.alt!=b.altKey)return;if(d.shift!=b.shiftKey)return;if(b.keyCode==d.keyCode||b.charCode&&b.charCode==d.charCode)return c=d,!1}),c)}d.onKeyUp.add(function(a,b){var d=m(b);if(d)return c.cancel(b)}),d.onKeyPress.add(function(a,b){var d=m(b);if(d)return c.cancel(b)}),d.onKeyDown.add(function(a,b){var d=m(b);if(d)return d.func.call(d.scope),c.cancel(b)})}a.isIE&&i.bind(d.getDoc(),"controlselect",function(a){var b=d.resizeInfo,e;a=a.target;if(a.nodeName!=="IMG")return;b&&i.unbind(b.node,b.ev,b.cb),i.hasClass(a,"mceItemNoResize")?(ev="resizestart"
,e=i.bind(a,"resizestart",c.cancel,c)):(ev="resizeend",e=i.bind(a,ev,function(a){var b;a=a.target;if(b=i.getStyle(a,"width"))i.setAttrib(a,"width",b.replace(/[^0-9%]+/g,"")),i.setStyle(a,"width","");if(b=i.getStyle(a,"height"))i.setAttrib(a,"height",b.replace(/[^0-9%]+/g,"")),i.setStyle(a,"height","")})),b=d.resizeInfo={node:a,ev:ev,cb:e}}),a.isOpera&&d.onClick.add(function(a,b){c.prevent(b)});if(h.custom_undo_redo){function n(){d.undoManager.typing=!1,d.undoManager.add()}i.bind(d.getDoc(),"focusout",function(a){!d.removed&&d.undoManager.typing&&n()}),d.dom.bind(d.dom.getRoot(),"dragend",function(a){n()}),d.onKeyUp.add(function(a,b){var c=b.keyCode;(c>=33&&c<=36||c>=37&&c<=40||c==13||c==45||b.ctrlKey)&&n()}),d.onKeyDown.add(function(b,e){var f=e.keyCode,g;if(f==8){g=d.getDoc().selection;if(g&&g.createRange&&g.createRange().item)return d.undoManager.beforeChange(),b.dom.remove(g.createRange().item(0)),n(),c.cancel(e)}if(f>=33&&f<=36||f>=37&&f<=40||f==13||f==45){a.isIE&&f==13&&d.undoManager.beforeChange(),d.undoManager.typing&&n();return}(f<16||f>20)&&f!=224&&f!=91&&!d.undoManager.typing&&(d.undoManager.beforeChange(),d.undoManager.typing=!0,d.undoManager.add())}),d.onMouseDown.add(function(){d.undoManager.typing&&n()})}if(a.isGecko){function o(){var a=d.dom.getAttribs(d.selection.getStart().cloneNode(!1));return function(){var b=d.selection.getStart();b!==d.getBody()&&(d.dom.setAttrib(b,"style",null),f(a,function(a){b.setAttributeNode(a.cloneNode(!0))}))}}function p(){var a=d.selection;return!a.isCollapsed()&&a.getStart()!=a.getEnd()}d.onKeyPress.add(function(a,b){var e;if((b.keyCode==8||b.keyCode==46)&&p())return e=o(),d.getDoc().execCommand("delete",!1,null),e(),c.cancel(b)}),d.dom.bind(d.getDoc(),"cut",function(a){var b;p()&&(b=o(),d.onKeyUp.addToTop(c.cancel,c),setTimeout(function(){b(),d.onKeyUp.remove(c.cancel,c)},0))})}},_refreshContentEditable:function(){var a=this,b,c;a._isHidden()&&(b=a.getBody(),c=b.parentNode,c.removeChild(b),c.appendChild(b),b.focus())},_isHidden:function(){var a;return g?(a=this.selection.getSel(),!a||!a.rangeCount||a.rangeCount==0):0}})}(tinymce),function(a){var b=a.each,c,d=!0,e=!1;a.EditorCommands=function(f){function m(a,b,c){var f;return a=a.toLowerCase(),(f=i.exec[a])?(f(a,b,c),d):e}function n(a){var b;return a=a.toLowerCase(),(b=i.state[a])?b(a):-1}function o(a){var b;return a=a.toLowerCase(),(b=i.value[a])?b(a):e}function p(a,c){c=c||"exec",b(a,function(a,d){b(d.toLowerCase().split(","),function(b){i[c][b]=a})})}function q(a,b,d){return b===c&&(b=e),d===c&&(d=null),f.getDoc().execCommand(a,b,d)}function r(a){return k.match(a)}function s(a,b){k.toggle(a,b?{value:b}:c)}function t(a){l=h.getBookmark(a)}function u(){h.moveToBookmark(l)}var g=f.dom,h=f.selection,i={state:{},exec:{},value:{}},j=f.settings,k=f.formatter,l;a.extend(this,{execCommand:m,queryCommandState:n,queryCommandValue:o,addCommands:p}),p({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){f.undoManager.add()},"Cut,Copy,Paste":function(b){var c=f.getDoc(),e;try{q(b)}catch(g){e=d}if(e||!c.queryCommandSupported(b))a.isGecko?f.windowManager.confirm(f.getLang("clipboard_msg"),function(a){a&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):f.windowManager.alert(f.getLang("clipboard_no_support"))},unlink:function(a){h.isCollapsed()&&h.select(h.getNode()),q(a),h.collapse(e)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(a){var c=a.substring(7);b("left,center,right,full".split(","),function(a){c!=a&&k.remove("align"+a)}),s("align"+c),m("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(a){var b,c;q(a),b=g.getParent(h.getNode(),"ol,ul"),b&&(c=b.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(c.nodeName)&&(t(),g.split(c,b),u()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){s(a)},"ForeColor,HiliteColor,FontName":function(a,b,c){s(a,c)},FontSize:function(b,c,d){var e,f;d>=1&&d<=7&&(f=a.explode(j.font_size_style_values),e=a.explode(j.font_size_classes),e?d=e[d-1]||d:d=f[d-1]||d),s(b,d)},RemoveFormat:function(a){k.remove(a)},mceBlockQuote:function(a){s("blockquote")},FormatBlock:function(a,b,c){return s(c||"p")},mceCleanup:function(){var a=h.getBookmark();f.setContent(f.getContent({cleanup:d}),{cleanup:d}),h.moveToBookmark(a)},mceRemoveNode:function(a,b,c){var e=c||h.getNode();e!=f.getBody()&&(t(),f.dom.remove(e,d),u())},mceSelectNodeDepth:function(a,b,c){var d=0;g.getParent(h.getNode(),function(a){if(a.nodeType==1&&d++==c)return h.select(a),e},f.getBody())},mceSelectNode:function(a,b,c){h.select(c)},mceInsertContent:function(b,c,d){var e,i,j,k,l,m,n,o,p,q,r,s,t,u;e=f.parser,i=new a.html.Serializer({},f.schema),t='<span id="mce_marker" data-mce-type="bookmark">﻿</span>',m={content:d,format:"html"},h.onBeforeSetContent.dispatch(h,m),d=m.content,d.indexOf("{$caret}")==-1&&(d+="{$caret}"),d=d.replace(/\{\$caret\}/,t),h.isCollapsed()||f.getDoc().execCommand("Delete",!1,null),j=h.getNode(),m={context:j.nodeName.toLowerCase()},l=e.parse(d,m),r=l.lastChild;if(r.attr("id")=="mce_marker"){n=r;for(r=r.prev;r;r=r.walk(!0))if(r.type==3||!g.isBlock(r.name)){r.parent.insert(n,r,r.name==="br");break}}if(!m.invalid)d=i.serialize(l),r=j.firstChild,s=j.lastChild,!r||r===s&&r.nodeName==="BR"?g.setHTML(j,d):h.setContent(d);else{h.setContent(t),j=f.selection.getNode(),k=f.getBody(),j.nodeType==9?j=r=k:r=j;while(r!==k)j=r,r=r.parentNode;d=j==k?k.innerHTML:g.getOuterHTML(j),d=i.serialize(e.parse(d.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return i.serialize(l)}))),j==k?g.setHTML(k,d):g.setOuterHTML(j,d)}n=g.get("mce_marker"),o=g.getRect(n),p=g.getViewPort(f.getWin());if(o.y+o.h>p.y+p.h||o.y<p.y||o.x>p.x+p.w||o.x<p.x)u=a.isIE?f.getDoc().documentElement:f.getBody(),u.scrollLeft=o.x,u.scrollTop=o.y-p.h+25;q=g.createRng(),r=n.previousSibling,r&&r.nodeType==3?q.setStart(r,r.nodeValue.length):(q.setStartBefore(n),q.setEndBefore(n)),g.remove(n),h.setRng(q),h.onSetContent.dispatch(h,m),f.addVisual()},mceInsertRawHTML:function(a,b,c){h.setContent("tiny_mce_marker"),f.setContent(f.getContent().replace(/tiny_mce_marker/g,function(){return c}))},mceSetContent:function(a,b,c){f.setContent(c)},"Indent,Outdent":function(a){var c,d,e;c=j.indentation,d=/[a-z%]+$/i.exec(c),c=parseInt(c),!n("InsertUnorderedList")&&!n("InsertOrderedList")?b(h.getSelectedBlocks(),function(b){a=="outdent"?(e=Math.max(0,parseInt(b.style.paddingLeft||0)-c),g.setStyle(b,"paddingLeft",e?e+d:"")):g.setStyle(b,"paddingLeft",parseInt(b.style.paddingLeft||0)+c+d)}):q(a)},mceRepaint:function(){var b;if(a.isGecko)try{t(d),h.getSel()&&h.getSel().selectAllChildren(f.getBody()),h.collapse(d),u()}catch(c){}},mceToggleFormat:function(a,b,c){k.toggle(c)},InsertHorizontalRule:function(){f.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){f.hasVisual=!f.hasVisual,f.addVisual()},mceReplaceContent:function(a,b,c){f.execCommand("mceInsertContent",!1,c.replace(/\{\$selection\}/g,h.getContent({format:"text"})))},mceInsertLink:function(a,b,c){var d;typeof c=="string"&&(c={href:c}),d=g.getParent(h.getNode(),"a"),c.href=c.href.replace(" ","%20"),(!d||!c.href)&&k.remove("link"),c.href&&k.apply("link",c,d)},selectAll:function(){var a=g.getRoot(),b=g.createRng();b.setStart(a,0),b.setEnd(a,a.childNodes.length),f.selection.setRng(b)}}),p({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(a){return r("align"+a.substring(7))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){return r(a)},mceBlockQuote:function(){return r("blockquote")},Outdent:function(){var a;if(j.inline_styles){if((a=g.getParent(h.getStart(),g.isBlock))&&parseInt(a.style.paddingLeft)>0)return d;if((a=g.getParent(h.getEnd(),g.isBlock))&&parseInt(a.style.paddingLeft)>0)return d}return n("InsertUnorderedList")||n("InsertOrderedList")||!j.inline_styles&&!!g.getParent(h.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(a){return g.getParent(h.getNode(),a=="insertunorderedlist"?"UL":"OL")}},"state"),p({"FontSize,FontName":function(a){var b=0,c;if(c=g.getParent(h.getNode(),"span"))a=="fontsize"?b=c.style.fontSize:b=c.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase();return b}},"value"),j.custom_undo_redo&&p({Undo:function(){f.undoManager.undo()},Redo:function(){f.undoManager.redo()}})}}(tinymce),function(a){var b=a.util.Dispatcher;a.UndoManager=function(c){function h(){return a.trim(c.getContent({format:"raw",no_events:1}))}var d,e=0,f=[],g;return d={typing:!1,onAdd:new b(d),onUndo:new b(d),onRedo:new b(d),beforeChange:function(){g=c.selection.getBookmark(2,!0)},add:function(a){var b,i=c.settings,j;a=a||{},a.content=h(),j=f[e];if(j&&j.content==a.content)return null;f[e]&&(f[e].beforeBookmark=g);if(i.custom_undo_redo_levels&&f.length>i.custom_undo_redo_levels){for(b=0;b<f.length-1;b++)f[b]=f[b+1];f.length--,e=f.length}return a.bookmark=c.selection.getBookmark(2,!0),e<f.length-1&&(f.length=e+1),f.push(a),e=f.length-1,d.onAdd.dispatch(d,a),c.isNotDirty=0,a},undo:function(){var a,b;return d.typing&&(d.add(),d.typing=!1),e>0&&(a=f[--e],c.setContent(a.content,{format:"raw"}),c.selection.moveToBookmark(a.beforeBookmark),d.onUndo.dispatch(d,a)),a},redo:function(){var a;return e<f.length-1&&(a=f[++e],c.setContent(a.content,{format:"raw"}),c.selection.moveToBookmark(a.bookmark),d.onRedo.dispatch(d,a)),a},clear:function(){f=[],e=0,d.typing=!1},hasUndo:function(){return e>0||this.typing},hasRedo:function(){return e<f.length-1&&!this.typing}}}}(tinymce),function(a){function j(a){var b,c,d;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(a.nodeName)&&(b?(c=a.cloneNode(!1),c.appendChild(b),b=c):b=d=a.cloneNode(!1),b.removeAttribute("id"));while(a=a.parentNode);if(b)return{wrapper:b,inner:d}}function k(a,b){var c=b.ownerDocument.createRange();return c.setStart(a.endContainer,a.endOffset),c.setEndAfter(b),c.cloneContents().textContent.length==0}function l(a,b,c){var d,e;return b.isEmpty(c)?(d=b.getParent(c,"ul,ol"),b.getParent(d.parentNode,"ul,ol")||(b.split(d,c),e=b.create("p",0,'<br data-mce-bogus="1" />'),b.replace(e,c),a.select(e,1)),i):h}var b=a.dom.Event,c=a.isIE,d=a.isGecko,e=a.isOpera,f=a.each,g=a.extend,h=!0,i=!1;a.create("tinymce.ForceBlocks",{ForceBlocks:function(a){var b=this,c=a.settings,d;b.editor=a,b.dom=a.dom,d=(c.forced_root_block||"p").toLowerCase(),c.element=d.toUpperCase(),a.onPreInit.add(b.setup,b)},setup:function(){var e=this,f=e.editor,g=f.settings,i=f.dom,k=f.selection,l=f.schema.getBlockElements();if(g.forced_root_block){function m(){var a=k.getStart(),b=f.getBody(),c,d,e,h,j,m,n,r=-16777215;if(!a||a.nodeType!==1)return;while(a!=b){if(l[a.nodeName])return;a=a.parentNode}c=k.getRng(),c.setStart?(d=c.startContainer,e=c.startOffset,h=c.endContainer,j=c.endOffset):(c.item&&(c=f.getDoc().body.createTextRange(),c.moveToElementText(c.item(0))),tmpRng=c.duplicate(),tmpRng.collapse(!0),e=tmpRng.move("character",r)*-1,tmpRng.collapsed||(tmpRng=c.duplicate(),tmpRng.collapse(!1),j=tmpRng.move("character",r)*-1-e));for(a=b.firstChild;a;a)a.nodeType===3||a.nodeType==1&&!l[a.nodeName]?(m||(m=i.create(g.forced_root_block),a.parentNode.insertBefore(m,a)),n=a,a=a.nextSibling,m.appendChild(n)):(m=null,a=a.nextSibling);if(c.setStart)c.setStart(d,e),c.setEnd(h,j),k.setRng(c);else try{c=f.getDoc().body.createTextRange(),c.moveToElementText(b),c.collapse(!0),c.moveStart("character",e),j>0&&c.moveEnd("character",j),c.select()}catch(s){}f.nodeChanged()}f.onKeyUp.add(m),f.onClick.add(m)}g.force_br_newlines&&c&&f.onKeyPress.add(function(a,c){var d;if(c.keyCode==13&&k.getNode().nodeName!="LI")return k.setContent('<br id="__" /> ',{format:"raw"}),d=i.get("__"),d.removeAttribute("id"),k.select(d),k.collapse(),b.cancel(c)}),g.force_p_newlines&&(c?(a.addUnload(function(){e._previousFormats=0}),f.onKeyPress.add(function(a,b){e._previousFormats=0,b.keyCode==13&&!b.shiftKey&&a.selection.isCollapsed()&&g.keep_styles&&(e._previousFormats=j(a.selection.getStart()))}),f.onKeyUp.add(function(a,b){if(b.keyCode==13&&!b.shiftKey){var c=a.selection.getStart(),d=e._previousFormats;!c.hasChildNodes()&&d&&(c=i.getParent(c,i.isBlock),c&&c.nodeName!="LI"&&(c.innerHTML="",e._previousFormats?(c.appendChild(d.wrapper),d.inner.innerHTML="﻿"):c.innerHTML="﻿",k.select(c,1),k.collapse(!0),a.getDoc().execCommand("Delete",!1,null),e._previousFormats=0))}})):f.onKeyPress.add(function(a,c){c.keyCode==13&&!c.shiftKey&&!e.insertPara(c)&&b.cancel(c)}),d&&f.onKeyDown.add(function(a,b){(b.keyCode==8||b.keyCode==46)&&!b.shiftKey&&e.backspaceDelete(b,b.keyCode==8)}));if(a.isWebKit){function n(a){var b=k.getRng(),c,d=i.create("div",null," "),e,f=i.getViewPort(a.getWin()).h;b.insertNode(c=i.create("br")),b.setStartAfter(c),b.setEndAfter(c),k.setRng(b),k.getSel().focusNode==c.previousSibling&&(k.select(i.insertAfter(i.doc.createTextNode(" "),c)),k.collapse(h)),i.insertAfter(d,c),e=i.getPos(d).y,i.remove(d),e>f&&a.getWin().scrollTo(0,e)}f.onKeyPress.add(function(a,c){c.keyCode==13&&(c.shiftKey||g.force_br_newlines&&!i.getParent(k.getNode(),"h1,h2,h3,h4,h5,h6,ol,ul"))&&(n(a),b.cancel(c))})}c&&g.element!="P"&&(f.onKeyPress.add(function(a,b){e.lastElm=k.getNode().nodeName}),f.onKeyUp.add(function(a,b){var c,d=k.getNode(),f=a.getBody();f.childNodes.length===1&&d.nodeName=="P"?(d=i.rename(d,g.element),k.select(d),k.collapse(),a.nodeChanged()):b.keyCode==13&&!b.shiftKey&&e.lastElm!="P"&&(c=i.getParent(d,"p"),c&&(i.rename(c,g.element),a.nodeChanged()))}))},getParentBlock:function(a){var b=this.dom;return b.getParent(a,b.isBlock)},insertPara:function(a){function I(a,b){var c=[],f,h,j;a.innerHTML="";if(g.keep_styles){h=b;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(h.nodeName)&&(f=h.cloneNode(i),d.setAttrib(f,"id",""),c.push(f));while(h=h.parentNode)}if(c.length>0){for(j=c.length-1,f=a;j>=0;j--)f=f.appendChild(c[j]);return c[0].innerHTML=e?" ":"<br />",c[0]}a.innerHTML=e?" ":"<br />"}var b=this,c=b.editor,d=c.dom,f=c.getDoc(),g=c.settings,j=c.selection.getSel(),m=j.getRangeAt(0),n=f.body,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=d.getViewPort(c.getWin()),E,F,G;c.undoManager.beforeChange(),o=f.createRange(),o.setStart(j.anchorNode,j.anchorOffset),o.collapse(h),p=f.createRange(),p.setStart(j.focusNode,j.focusOffset),p.collapse(h),q=o.compareBoundaryPoints(o.START_TO_END,p)<0,r=q?j.anchorNode:j.focusNode,s=q?j.anchorOffset:j.focusOffset,t=q?j.focusNode:j.anchorNode,u=q?j.focusOffset:j.anchorOffset;if(r===t&&/^(TD|TH)$/.test(r.nodeName))return r.firstChild.nodeName=="BR"&&d.remove(r.firstChild),r.childNodes.length==0?(c.dom.add(r,g.element,null,"<br />"),z=c.dom.add(r,g.element,null,"<br />")):(C=r.innerHTML,r.innerHTML="",c.dom.add(r,g.element,null,C),z=c.dom.add(r,g.element,null,"<br />")),m=f.createRange(),m.selectNodeContents(z),m.collapse(1),c.selection.setRng(m),i;r==n&&t==n&&n.firstChild&&c.dom.isBlock(n.firstChild)&&(r=t=r.firstChild,s=u=0,o=f.createRange(),o.setStart(r,0),p=f.createRange(),p.setStart(t,0)),f.body.hasChildNodes()||f.body.appendChild(d.create("br")),r=r.nodeName=="HTML"?f.body:r,r=r.nodeName=="BODY"?r.firstChild:r,t=t.nodeName=="HTML"?f.body:t,t=t.nodeName=="BODY"?t.firstChild:t,v=b.getParentBlock(r),w=b.getParentBlock(t),x=v?v.nodeName:g.element;if(C=b.dom.getParent(v,"li,pre"))return C.nodeName=="LI"?l(c.selection,b.dom,C):h;v&&(v.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(d.getStyle(v,"position",1)))&&(x=g.element,v=null),w&&(w.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(d.getStyle(v,"position",1)))&&(x=g.element,w=null);if(/(TD|TABLE|TH|CAPTION)/.test(x)||v&&x=="DIV"&&/left|right/gi.test(d.getStyle(v,"float",1)))x=g.element,v=w=null;y=v&&v.nodeName==x?v.cloneNode(0):c.dom.create(x),z=w&&w.nodeName==x?w.cloneNode(0):c.dom.create(x),z.removeAttribute("id"),/^(H[1-6])$/.test(x)&&k(m,v)&&(z=c.dom.create(g.element)),C=A=r;do{if(C==n||C.nodeType==9||b.dom.isBlock(C)||/(TD|TABLE|TH|CAPTION)/.test(C.nodeName))break;A=C}while(C=C.previousSibling?C.previousSibling:C.parentNode);C=B=t;do{if(C==n||C.nodeType==9||b.dom.isBlock(C)||/(TD|TABLE|TH|CAPTION)/.test(C.nodeName))break;B=C}while(C=C.nextSibling?C.nextSibling:C.parentNode);A.nodeName==x?o.setStart(A,0):o.setStartBefore(A),o.setEnd(r,s),y.appendChild(o.cloneContents()||f.createTextNode(""));try{p.setEndAfter(B)}catch(H){}return p.setStart(t,u),z.appendChild(p.cloneContents()||f.createTextNode("")),m=f.createRange(),!A.previousSibling&&A.parentNode.nodeName==x?m.setStartBefore(A.parentNode):o.startContainer.nodeName==x&&o.startOffset==0?m.setStartBefore(o.startContainer):m.setStart(o.startContainer,o.startOffset),!B.nextSibling&&B.parentNode.nodeName==x?m.setEndAfter(B.parentNode):m.setEnd(p.endContainer,p.endOffset),m.deleteContents(),e&&c.getWin().scrollTo(0,D.y),y.firstChild&&y.firstChild.nodeName==x&&(y.innerHTML=y.firstChild.innerHTML),z.firstChild&&z.firstChild.nodeName==x&&(z.innerHTML=z.firstChild.innerHTML),d.isEmpty(y)&&I(y,r),d.isEmpty(z)&&(G=I(z,t)),e&&parseFloat(opera.version())<9.5?(m.insertNode(y),m.insertNode(z)):(m.insertNode(z),m.insertNode(y)),z.normalize(),y.normalize(),c.selection.select(z,!0),c.selection.collapse(!0),E=c.dom.getPos(z).y,(E<D.y||E+25>D.y+D.h)&&c.getWin().scrollTo(0,E<D.y?E:E-D.h+25),c.undoManager.add(),i},backspaceDelete:function(c,d){var e=this,f=e.editor,g=f.getBody(),h=f.dom,j,k=f.selection,l=k.getRng(),m=l.startContainer,j,n,o,p;if(!d&&l.collapsed&&m.nodeType==1&&l.startOffset==m.childNodes.length){p=new a.dom.TreeWalker(m.lastChild,m);for(j=m.lastChild;j;j=p.prev())if(j.nodeType==3){l.setStart(j,j.nodeValue.length),l.collapse(!0),k.setRng(l);return}}if(m&&f.dom.isBlock(m)&&!/^(TD|TH)$/.test(m.nodeName)&&d)if(m.childNodes.length==0||m.childNodes.length==1&&m.firstChild.nodeName=="BR"){j=m;while((j=j.previousSibling)&&!f.dom.isBlock(j));if(j){if(m!=g.firstChild){n=f.dom.doc.createTreeWalker(j,NodeFilter.SHOW_TEXT,null,i);while(o=n.nextNode())j=o;l=f.getDoc().createRange(),l.setStart(j,j.nodeValue?j.nodeValue.length:0),l.setEnd(j,j.nodeValue?j.nodeValue.length:0),k.setRng(l),f.dom.remove(m)}return b.cancel(c)}}}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each,e=a.extend;a.create("tinymce.ControlManager",{ControlManager:function(b,c){var e=this,f;c=c||{},e.editor=b,e.controls={},e.onAdd=new a.util.Dispatcher(e),e.onPostRender=new a.util.Dispatcher(e),e.prefix=c.prefix||b.id+"_",e._cls={},e.onPostRender.add(function(){d(e.controls,function(a){a.postRender()})})},get:function(a){return this.controls[this.prefix+a]||this.controls[a]},setActive:function(a,b){var c=null;return(c=this.get(a))&&c.setActive(b),c},setDisabled:function(a,b){var c=null;return(c=this.get(a))&&c.setDisabled(b),c},add:function(a){var b=this;return a&&(b.controls[a.id]=a,b.onAdd.dispatch(a,b)),a},createControl:function(a){var b,c=this,e=c.editor;d(e.plugins,function(d){if(d.createControl){b=d.createControl(a,c);if(b)return!1}});switch(a){case"|":case"separator":return c.createSeparator()}return!b&&e.buttons&&(b=e.buttons[a])?c.createButton(a,b):c.add(b)},createDropMenu:function(b,c,d){var f=this,g=f.editor,h,i,j,k;c=e({"class":"mceDropDown",constrain:g.settings.constrain_menus},c),c["class"]=c["class"]+" "+g.getParam("skin")+"Skin";if(j=g.getParam("skin_variant"))c["class"]+=" "+g.getParam("skin")+"Skin"+j.substring(0,1).toUpperCase()+j.substring(1);return b=f.prefix+b,k=d||f._cls.dropmenu||a.ui.DropMenu,h=f.controls[b]=new k(b,c),h.onAddItem.add(function(a,b){var c=b.settings;c.title=g.getLang(c.title,c.title),c.onclick||(c.onclick=function(a){c.cmd&&g.execCommand(c.cmd,c.ui||!1,c.value)})}),g.onRemove.add(function(){h.destroy()}),a.isIE&&(h.onShowMenu.add(function(){g.focus(),i=g.selection.getBookmark(1)}),h.onHideMenu.add(function(){i&&(g.selection.moveToBookmark(i),i=0)})),f.add(h)},createListBox:function(b,d,f){function l(b){return b.settings.use_accessible_selects&&!a.isGecko}var g=this,h=g.editor,i,j,k;return g.get(b)?null:(d.title=h.translate(d.title),d.scope=d.scope||h,d.onselect||(d.onselect=function(a){h.execCommand(d.cmd,d.ui||!1,a||d.value)}),d=e({title:d.title,"class":"mce_"+b,scope:d.scope,control_manager:g},d),b=g.prefix+b,h.settings.use_native_selects||l(h)?j=new a.ui.NativeListBox(b,d):(k=f||g._cls.listbox||a.ui.ListBox,j=new k(b,d,h)),g.controls[b]=j,a.isWebKit&&j.onPostRender.add(function(a,b){c.add(b,"mousedown",function(){h.bookmark=h.selection.getBookmark(1)}),c.add(b,"focus",function(){h.selection.moveToBookmark(h.bookmark),h.bookmark=null})}),j.hideMenu&&h.onMouseDown.add(j.hideMenu,j),g.add(j))},createButton:function(b,c,d){var f=this,g=f.editor,h,i,j;return f.get(b)?null:(c.title=g.translate(c.title),c.label=g.translate(c.label),c.scope=c.scope||g,!c.onclick&&!c.menu_button&&(c.onclick=function(){g.execCommand(c.cmd,c.ui||!1,c.value)}),c=e({title:c.title,"class":"mce_"+b,unavailable_prefix:g.getLang("unavailable",""),scope:c.scope,control_manager:f},c),b=f.prefix+b,c.menu_button?(j=d||f._cls.menubutton||a.ui.MenuButton,i=new j(b,c,g),g.onMouseDown.add(i.hideMenu,i)):(j=f._cls.button||a.ui.Button,i=new j(b,c,g)),f.add(i))},createMenuButton:function(a,b,c){return b=b||{},b.menu_button=1,this.createButton(a,b,c)},createSplitButton:function(b,c,d){var f=this,g=f.editor,h,i,j;return f.get(b)?null:(c.title=g.translate(c.title),c.scope=c.scope||g,c.onclick||(c.onclick=function(a){g.execCommand(c.cmd,c.ui||!1,a||c.value)}),c.onselect||(c.onselect=function(a){g.execCommand(c.cmd,c.ui||!1,a||c.value)}),c=e({title:c.title,"class":"mce_"+b,scope:c.scope,control_manager:f},c),b=f.prefix+b,j=d||f._cls.splitbutton||a.ui.SplitButton,i=f.add(new j(b,c,g)),g.onMouseDown.add(i.hideMenu,i),i)},createColorSplitButton:function(b,c,d){var f=this,g=f.editor,h,i,j,k;return f.get(b)?null:(c.title=g.translate(c.title),c.scope=c.scope||g,c.onclick||(c.onclick=function(b){a.isIE&&(k=g.selection.getBookmark(1)),g.execCommand(c.cmd,c.ui||!1,b||c.value)}),c.onselect||(c.onselect=function(a){g.execCommand(c.cmd,c.ui||!1,a||c.value)}),c=e({title:c.title,"class":"mce_"+b,menu_class:g.getParam("skin")+"Skin",scope:c.scope,more_colors_title:g.getLang("more_colors")},c),b=f.prefix+b,j=d||f._cls.colorsplitbutton||a.ui.ColorSplitButton,i=new j(b,c,g),g.onMouseDown.add(i.hideMenu,i),g.onRemove.add(function(){i.destroy()}),a.isIE&&(i.onShowMenu.add(function(){g.focus(),k=g.selection.getBookmark(1)}),i.onHideMenu.add(function(){k&&(g.selection.moveToBookmark(k),k=0)})),f.add(i))},createToolbar:function(b,c,d){var e,f=this,g;return b=f.prefix+b,g=d||f._cls.toolbar||a.ui.Toolbar,e=new g(b,c,f.editor),f.get(b)?null:f.add(e)},createToolbarGroup:function(b,c,d){var e,f=this,g;return b=f.prefix+b,g=d||this._cls.toolbarGroup||a.ui.ToolbarGroup,e=new g(b,c,f.editor),f.get(b)?null:f.add(e)},createSeparator:function(b){var c=b||this._cls.separator||a.ui.Separator;return new c},setControlType:function(a,b){return this._cls[a.toLowerCase()]=b},destroy:function(){d(this.controls,function(a){a.destroy()}),this.controls=null}})}(tinymce),function(a){var b=a.util.Dispatcher,c=a.each,d=a.isIE,e=a.isOpera;a.create("tinymce.WindowManager",{WindowManager:function(a){var c=this;c.editor=a,c.onOpen=new b(c),c.onClose=new b(c),c.params={},c.features={}},open:function(b,f){var g=this,h="",i,j,k=g.editor.settings.dialog_type=="modal",l,m,n,o=a.DOM.getViewPort(),p;b=b||{},f=f||{},m=e?o.w:screen.width,n=e?o.h:screen.height,b.name=b.name||"mc_"+(new Date).getTime(),b.width=parseInt(b.width||320),b.height=parseInt(b.height||240),b.resizable=!0,b.left=b.left||parseInt(m/2)-b.width/2,b.top=b.top||parseInt(n/2)-b.height/2,f.inline=!1,f.mce_width=b.width,f.mce_height=b.height,f.mce_auto_focus=b.auto_focus,k&&d&&(b.center=!0,b.help=!1,b.dialogWidth=b.width+"px",b.dialogHeight=b.height+"px",b.scroll=b.scrollbars||!1),c(b,function(b,c){a.is(b,"boolean")&&(b=b?"yes":"no"),/^(name|url)$/.test(c)||(d&&k?h+=(h?";":"")+c+":"+b:h+=(h?",":"")+c+"="+b)}),g.features=b,g.params=f,g.onOpen.dispatch(g,b,f),p=b.url||b.file,p=a._addVer(p);try{d&&k?(l=1,window.showModalDialog(p,window,h)):l=window.open(p,b.name,h)}catch(q){}l||alert(g.editor.getLang("popup_blocked"))},close:function(a){a.close(),this.onClose.dispatch(this)},createInstance:function(b,c,d,e,f,g){var h=a.resolve(b);return new h(c,d,e,f,g)},confirm:function(a,b,c,d){d=d||window,b.call(c||this,d.confirm(this._decode(this.editor.getLang(a,a))))},alert:function(a,b,c,d){var e=this;d=d||window,d.alert(e._decode(e.editor.getLang(a,a))),b&&b.call(c||e)},resizeBy:function(a,b,c){c.resizeBy(a,b)},_decode:function(b){return a.DOM.decode(b).replace(/\\n/g,"\n")}})}(tinymce),function(a){a.Formatter=function(b){function r(a){return a instanceof Array}function s(a,b){return e.getParents(a,b,e.getRoot())}function t(a){return a.nodeType===1&&(a.face==="mceinline"||a.style.fontFamily==="mceinline")}function u(a){return a?c[a]:c}function v(a,b){a&&(typeof a!="string"?d(a,function(a,b){v(b,a)}):(b=b.length?b:[b],d(b,function(a){a.deep===q&&(a.deep=!a.selector),a.split===q&&(a.split=!a.selector||a.inline),a.remove===q&&a.selector&&!a.inline&&(a.remove="none"),a.selector&&a.inline&&(a.mixed=!0,a.block_expand=!0),typeof a.classes=="string"&&(a.classes=a.classes.split(/\s+/))}),c[a]=b))}function y(c,k,l){function w(a){var b=a.startContainer,c=a.startOffset,d,e;if(b.nodeType==1||b.nodeValue===""){b=b.nodeType==1?b.childNodes[c]:b;if(b){d=new g(b,b.parentNode);for(e=d.current();e;e=d.next())if(e.nodeType==3&&!J(e)){a.setStart(e,0);break}}}return a}function y(a,b){b=b||n,a&&(b.onformat&&b.onformat(a,b,k,l),d(b.styles,function(b,c){e.setStyle(a,c,I(b,k))}),d(b.attributes,function(b,c){e.setAttrib(a,c,I(b,k))}),d(b.classes,function(b){b=I(b,k),e.hasClass(a,b)||e.addClass(a,b)}))}function z(){function a(a,b){var c=new g(b);for(l=c.current();l;l=c.prev())if(l.childNodes.length>1||l==a)return l}var c=b.selection.getRng(),d=c.startContainer,e=c.endContainer;if(d!=e&&c.endOffset==0){var f=a(d,e),h=f.nodeType==3?f.length:f.childNodes.length;c.setEnd(f,h)}return c}function A(b,c,f,g,h){var i=[],j=-1,k,l=-1,m=-1,n;return d(b.childNodes,function(a,b){if(a.nodeName==="UL"||a.nodeName==="OL")return j=b,k=a,!1}),d(b.childNodes,function(a,b){a.nodeName==="SPAN"&&e.getAttrib(a,"data-mce-type")=="bookmark"&&(a.id==c.id+"_start"?l=b:a.id==c.id+"_end"&&(m=b))}),j<=0||l<j&&m>j?(d(a.grep(b.childNodes),h),0):(n=f.cloneNode(o),d(a.grep(b.childNodes),function(a,b){if(l<j&&b<j||l>j&&b>j)i.push(a),a.parentNode.removeChild(a)}),l<j?b.insertBefore(n,k):l>j&&b.insertBefore(n,k.nextSibling),g.push(n),d(i,function(a){n.appendChild(a)}),n)}function C(b,f,g){var l=[],q,r;q=n.inline||n.block,r=e.create(q),y(r),h.walk(b,function(b){function j(b){var p=b.nodeName.toLowerCase(),s=b.parentNode.nodeName.toLowerCase(),u;if(G(p,"br")){h=0,n.block&&e.remove(b);return}if(n.wrapper&&B(b,c,k)){h=0;return}if(n.block&&!n.wrapper&&R(p)){b=e.rename(b,q),y(b),l.push(b),h=0;return}if(n.selector){d(m,function(a){if("collapsed"in a&&a.collapsed!==v)return;e.is(b,a.selector)&&!t(b)&&(y(b,a),u=!0)});if(!n.inline||u){h=0;return}}!i(q,p)||!i(s,q)||!g&&b.nodeType===3&&b.nodeValue.length===1&&b.nodeValue.charCodeAt(0)===65279||b.id==="_mce_caret"?p=="li"&&f?h=A(b,f,r,l,j):(h=0,d(a.grep(b.childNodes),j),h=0):(h||(h=r.cloneNode(o),b.parentNode.insertBefore(h,b),l.push(h)),h.appendChild(b))}var h;d(b,j)}),n.wrap_links===!1&&d(l,function(b){function c(b){var e,f,g;if(b.nodeName==="A"){f=r.cloneNode(o),l.push(f),g=a.grep(b.childNodes);for(e=0;e<g.length;e++)f.appendChild(g[e]);b.appendChild(f)}d(a.grep(b.childNodes),c)}c(b)}),d(l,function(a){function f(a){var b=0;return d(a.childNodes,function(a){!J(a)&&!P(a)&&b++}),b}function g(a){var b,c;return d(a.childNodes,function(a){if(a.nodeType==1&&!P(a)&&!t(a))return b=a,o}),b&&F(b,n)&&(c=b.cloneNode(o),y(c),e.replace(c,a,p),e.remove(b,1)),c||a}var b;b=f(a);if((l.length>1||!j(a))&&b===0){e.remove(a,1);return}if(n.inline||n.wrapper){!n.exact&&b===1&&(a=g(a)),d(m,function(b){d(e.select(b.inline,a),function(a){var c;if(b.wrap_links===!1){c=a.parentNode;do if(c.nodeName==="A")return;while(c=c.parentNode)}M(b,k,a,b.exact?a:null)})});if(B(a.parentNode,c,k))return e.remove(a,1),a=0,p;n.merge_with_parents&&e.getParent(a.parentNode,function(b){if(B(b,c,k))return e.remove(a,1),a=0,p}),a&&n.merge_siblings!==!1&&(a=Q(O(a),a),a=Q(a,O(a,p)))}})}var m=u(c),n=m[0],q,r,s,v=f.isCollapsed();if(n)if(l)l.nodeType?(r=e.createRng(),r.setStartBefore(l),r.setEndAfter(l),C(L(r,m),null,!0)):C(l,null,!0);else if(!v||!n.inline||e.select("td.mceSelected,th.mceSelected").length){var D=b.selection.getNode();b.selection.setRng(z()),q=f.getBookmark(),C(L(f.getRng(p),m),q),n.styles&&(n.styles.color||n.styles.textDecoration)&&(a.walk(D,x,"childNodes"),x(D)),f.moveToBookmark(q),f.setRng(w(f.getRng(p))),b.nodeChanged()}else T("apply",c,k)}function z(c,i,k){function x(a){var b=a.startContainer,c=a.startOffset,d,h,i,j;b.nodeType==3&&c>=b.nodeValue.length-1&&(b=b.parentNode,c=l(b)+1);if(b.nodeType==1){i=b.childNodes,b=i[Math.min(c,i.length-1)],d=new g(b),c>i.length-1&&d.next();for(h=d.current();h;h=d.next())if(h.nodeType==3&&!J(h)){j=e.create("a",null,m),h.parentNode.insertBefore(j,h),a.setStart(h,0),f.setRng(a),e.remove(j);return}}}function y(b){var c,d,e;c=a.grep(b.childNodes);for(d=0,e=n.length;d<e;d++)if(M(n[d],i,b,b))break;if(q.deep)for(d=0,e=c.length;d<e;d++)y(c[d])}function z(a){var b;return d(s(a.parentNode).reverse(),function(a){var d;!b&&a.id!="_start"&&a.id!="_end"&&(d=B(a,c,i),d&&d.split!==!1&&(b=a))}),b}function A(a,b,c,d){var f,g,h,k,l,m;if(a){m=a.parentNode;for(f=b.parentNode;f&&f!=m;f=f.parentNode){g=f.cloneNode(o);for(l=0;l<n.length;l++)if(M(n[l],i,g,g)){g=0;break}g&&(h&&g.appendChild(h),k||(k=g),h=g)}d&&(!q.mixed||!j(a))&&(b=e.split(a,b)),h&&(c.parentNode.insertBefore(h,c),k.appendChild(c))}return b}function D(a){return A(z(a),a,a,!0)}function E(a){var b=e.get(a?"_start":"_end"),c=b[a?"firstChild":"lastChild"];return P(c)&&(c=c[a?"firstChild":"lastChild"]),e.remove(b,!0),c}function F(a){var c,e;a=L(a,n,p),q.split&&(c=S(a,p),e=S(a),c!=e?(c=K(c,"span",{id:"_start","data-mce-type":"bookmark"}),e=K(e,"span",{id:"_end","data-mce-type":"bookmark"}),D(c),D(e),c=E(p),e=E()):c=e=D(c),a.startContainer=c.parentNode,a.startOffset=l(c),a.endContainer=e.parentNode,a.endOffset=l(e)+1),h.walk(a,function(a){d(a,function(a){y(a),a.nodeType===1&&b.dom.getStyle(a,"text-decoration")==="underline"&&a.parentNode&&w(a.parentNode)==="underline"&&M({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,a)})})}var n=u(c),q=n[0],r,t,v;if(k){k.nodeType?(v=e.createRng(),v.setStartBefore(k),v.setEndAfter(k),F(v)):F(k);return}!f.isCollapsed()||!q.inline||e.select("td.mceSelected,th.mceSelected").length?(r=f.getBookmark(),F(f.getRng(p)),f.moveToBookmark(r),q.inline&&C(c,i,f.getStart())&&x(f.getRng(!0)),b.nodeChanged()):T("remove",c,i),a.isWebKit&&b.execCommand("mceCleanup")}function A(a,b,c){var d=u(a);!C(a,b,c)||"toggle"in d[0]&&!d[0].toggle?y(a,b,c):z(a,b,c)}function B(a,b,c,d){function j(a,b,f){var g,h,i=b[f],j;if(b.onmatch)return b.onmatch(a,b,f);if(i)if(i.length===q){for(g in i)if(i.hasOwnProperty(g)){f==="attributes"?h=e.getAttrib(a,g):h=H(a,g);if(d&&!h&&!b.exact)return;if((!d||b.exact)&&!G(h,I(i[g],c)))return}}else for(j=0;j<i.length;j++)if(f==="attributes"?e.getAttrib(a,i[j]):H(a,i[j]))return b;return b}var f=u(b),g,h,i;if(f&&a)for(h=0;h<f.length;h++){g=f[h];if(F(a,g)&&j(a,g,"attributes")&&j(a,g,"styles")){if(i=g.classes)for(h=0;h<i.length;h++)if(!e.hasClass(a,i[h]))return;return g}}}function C(a,b,c){function g(c){return c=e.getParent(c,function(c){return!!B(c,a,b,!0)}),B(c,a,b)}var d;return c?g(c):(c=f.getNode(),g(c)?p:(d=f.getStart(),d!=c&&g(d)?p:o))}function D(a,b){var c,d=[],g={},h,i,j;return c=f.getStart(),e.getParent(c,function(c){var e,f;for(e=0;e<a.length;e++)f=a[e],!g[f]&&B(c,f,b)&&(g[f]=!0,d.push(f))}),d}function E(a){var b=u(a),c,d,g,h,i;if(b){c=f.getStart(),d=s(c);for(h=b.length-1;h>=0;h--){i=b[h].selector;if(!i)return p;for(g=d.length-1;g>=0;g--)if(e.is(d[g],i))return p}}return o}function F(a,b){if(G(a,b.inline))return p;if(G(a,b.block))return p;if(b.selector)return e.is(a,b.selector)}function G(a,b){return a=a||"",b=b||"",a=""+(a.nodeName||a),b=""+(b.nodeName||b),a.toLowerCase()==b.toLowerCase()}function H(a,b){var c=e.getStyle(a,b);if(b=="color"||b=="backgroundColor")c=e.toHex(c);return b=="fontWeight"&&c==700&&(c="bold"),""+c}function I(a,b){return typeof a!="string"?a=a(b):b&&(a=a.replace(/%(\w+)/g,function(a,c){return b[c]||a})),a}function J(a){return a&&a.nodeType===3&&/^([\t \r\n]+|)$/.test(a.nodeValue)}function K(a,b,c){var d=e.create(b,c);return a.parentNode.insertBefore(d,a),d.appendChild(a),d}function L(a,c,d){function t(a){var b,d,g,l,m;b=d=a?f:i,m=a?"previousSibling":"nextSibling",root=e.getRoot();if(b.nodeType==3&&!J(b))if(a?h>0:k<b.nodeValue.length)return b;for(;;){if(d==root||!c[0].block_expand&&j(d))return d;for(l=d[m];l;l=l[m])if(!P(l)&&!J(l))return d
;d=d.parentNode}return b}function u(a,b){b===q&&(b=a.nodeType===3?a.length:a.childNodes.length);while(a&&a.hasChildNodes())a=a.childNodes[b],a&&(b=a.nodeType===3?a.length:a.childNodes.length);return{node:a,offset:b}}var f=a.startContainer,h=a.startOffset,i=a.endContainer,k=a.endOffset,m,n,p,r;f.nodeType==1&&f.hasChildNodes()&&(n=f.childNodes.length-1,f=f.childNodes[h>n?n:h],f.nodeType==3&&(h=0)),i.nodeType==1&&i.hasChildNodes()&&(n=i.childNodes.length-1,i=i.childNodes[k>n?n:k-1],i.nodeType==3&&(k=i.nodeValue.length));if(P(f.parentNode)||P(f))f=P(f)?f:f.parentNode,f=f.nextSibling||f,f.nodeType==3&&(h=0);if(P(i.parentNode)||P(i))i=P(i)?i:i.parentNode,i=i.previousSibling||i,i.nodeType==3&&(k=i.length);if(c[0].inline){if(a.collapsed){function v(a,c,f){function m(a,b){var c,e,g=a.nodeValue;return typeof b=="undefined"&&(b=f?g.length:0),f?(c=g.lastIndexOf(" ",b),e=g.lastIndexOf(" ",b),c=c>e?c:e,c!==-1&&!d&&c++):(c=g.indexOf(" ",b),e=g.indexOf(" ",b),c=c!==-1&&(e===-1||c<e)?c:e),c}var h,i,k,l;if(a.nodeType===3){k=m(a,c);if(k!==-1)return{container:a,offset:k};l=a}h=new g(a,e.getParent(a,j)||b.getBody());while(i=h[f?"prev":"next"]())if(i.nodeType===3){l=i,k=m(i);if(k!==-1)return{container:i,offset:k}}else if(j(i))break;if(l)return f?c=0:c=l.length,{container:l,offset:c}}r=v(f,h,!0),r&&(f=r.container,h=r.offset),r=v(i,k),r&&(i=r.container,k=r.offset)}p=u(i,k);if(p.node){while(p.node&&p.offset===0&&p.node.previousSibling)p=u(p.node.previousSibling);p.node&&p.offset>0&&p.node.nodeType===3&&p.node.nodeValue.charAt(p.offset-1)===" "&&(p.offset>1?(i=p.node,i.splitText(p.offset-1)):!p.node.previousSibling)}}if(c[0].inline||c[0].block_expand){if(!c[0].inline||f.nodeType!=3||h===0)f=t(!0);if(!c[0].inline||i.nodeType!=3||k===i.nodeValue.length)i=t()}if(c[0].selector&&c[0].expand!==o&&!c[0].inline){function w(b,d){var f,g,h,i;b.nodeType==3&&b.nodeValue.length==0&&b[d]&&(b=b[d]),f=s(b);for(g=0;g<f.length;g++)for(h=0;h<c.length;h++){i=c[h];if("collapsed"in i&&i.collapsed!==a.collapsed)continue;if(e.is(f[g],i.selector))return f[g]}return b}f=w(f,"previousSibling"),i=w(i,"nextSibling")}if(c[0].block||c[0].selector){function x(a,b,d){var f;c[0].wrapper||(f=e.getParent(a,c[0].block)),f||(f=e.getParent(a.nodeType==3?a.parentNode:a,j)),f&&c[0].wrapper&&(f=s(f,"ul,ol").reverse()[0]||f);if(!f){f=a;while(f[b]&&!j(f[b])){f=f[b];if(G(f,"br"))break}}return f||a}f=x(f,"previousSibling"),i=x(i,"nextSibling"),c[0].block&&(j(f)||(f=t(!0)),j(i)||(i=t()))}return f.nodeType==1&&(h=l(f),f=f.parentNode),i.nodeType==1&&(k=l(i)+1,i=i.parentNode),{startContainer:f,startOffset:h,endContainer:i,endOffset:k}}function M(a,b,c,f){var g,h,i;if(!F(c,a))return o;if(a.remove!="all"){d(a.styles,function(a,d){a=I(a,b),typeof d=="number"&&(d=a,f=0),(!f||G(H(f,d),a))&&e.setStyle(c,d,""),i=1}),i&&e.getAttrib(c,"style")==""&&(c.removeAttribute("style"),c.removeAttribute("data-mce-style")),d(a.attributes,function(a,g){var h;a=I(a,b),typeof g=="number"&&(g=a,f=0);if(!f||G(e.getAttrib(f,g),a)){if(g=="class"){a=e.getAttrib(c,g);if(a){h="",d(a.split(/\s+/),function(a){/mce\w+/.test(a)&&(h+=(h?" ":"")+a)});if(h){e.setAttrib(c,g,h);return}}}g=="class"&&c.removeAttribute("className"),n.test(g)&&c.removeAttribute("data-mce-"+g),c.removeAttribute(g)}}),d(a.classes,function(a){a=I(a,b),(!f||e.hasClass(f,a))&&e.removeClass(c,a)}),h=e.getAttribs(c);for(g=0;g<h.length;g++)if(h[g].nodeName.indexOf("_")!==0)return o}if(a.remove!="none")return N(c,a),p}function N(b,c){var f=b.parentNode,g;if(c.block)if(!k){function h(a,b,c){return a=O(a,b,c),!a||a.nodeName=="BR"||j(a)}j(b)&&!j(f)&&(!h(b,o)&&!h(b.firstChild,p,1)&&b.insertBefore(e.create("br"),b.firstChild),!h(b,p)&&!h(b.lastChild,o,1)&&b.appendChild(e.create("br")))}else f==e.getRoot()&&(!c.list_block||!G(b,c.list_block))&&d(a.grep(b.childNodes),function(a){i(k,a.nodeName.toLowerCase())?g?g.appendChild(a):g=K(a,k):g=0});if(c.selector&&c.inline&&!G(c.inline,b))return;e.remove(b,1)}function O(a,b,c){if(a){b=b?"nextSibling":"previousSibling";for(a=c?a:a[b];a;a=a[b])if(a.nodeType==1||!J(a))return a}}function P(a){return a&&a.nodeType==1&&a.getAttribute("data-mce-type")=="bookmark"}function Q(b,c){function i(a,b){function c(a){var b={};return d(e.getAttribs(a),function(c){var d=c.nodeName.toLowerCase();d.indexOf("_")!==0&&d!=="style"&&(b[d]=e.getAttrib(a,d))}),b}function f(a,b){var c,d;for(d in a)if(a.hasOwnProperty(d)){c=b[d];if(c===q)return o;if(a[d]!=c)return o;delete b[d]}for(d in b)if(b.hasOwnProperty(d))return o;return p}return a.nodeName!=b.nodeName?o:f(c(a),c(b))?f(e.parseStyle(e.getAttrib(a,"style")),e.parseStyle(e.getAttrib(b,"style")))?p:o:o}var f,g,h;if(b&&c){function j(a,b){for(g=a;g;g=g[b]){if(g.nodeType==3&&g.nodeValue.length!==0)return a;if(g.nodeType==1&&!P(g))return g}return a}b=j(b,"previousSibling"),c=j(c,"nextSibling");if(i(b,c)){for(g=b.nextSibling;g&&g!=c;)h=g,g=g.nextSibling,b.appendChild(h);return e.remove(c),d(a.grep(c.childNodes),function(a){b.appendChild(a)}),b}}return c}function R(a){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(a)}function S(a,c){var d,e,f,h;return d=a[c?"startContainer":"endContainer"],e=a[c?"startOffset":"endOffset"],d.nodeType==1&&(f=d.childNodes.length-1,!c&&e&&e--,d=d.childNodes[e>f?f:e]),d.nodeType===3&&c&&e>=d.nodeValue.length&&(d=(new g(d,b.getBody())).next()||d),d.nodeType===3&&!c&&e==0&&(d=(new g(d,b.getBody())).prev()||d),d}function T(c,d,i){function n(a){var c=e.create("span",{id:k,"data-mce-bogus":!0,style:l?"color:red":""});return a&&c.appendChild(b.getDoc().createTextNode(j)),c}function o(a,b){while(a){if(a.nodeType===3&&a.nodeValue!==j||a.childNodes.length>1)return!1;b&&a.nodeType===1&&b.push(a),a=a.firstChild}return!0}function p(a){while(a){if(a.id===k)return a;a=a.parentNode}}function q(a){var b;if(a){b=new g(a,a);for(a=b.current();a;a=b.next())if(a.nodeType===3)return a}}function r(a,b){var c,d;if(!a){a=p(f.getStart());if(!a)while(a=e.get(k))r(a,!1)}else d=f.getRng(!0),o(a)?(b!==!1&&(d.setStartBefore(a),d.setEndBefore(a)),e.remove(a)):(c=q(a),c=c.deleteData(0,1),e.remove(a,1)),f.setRng(d)}function s(){var a,b,c,e,g,k,l;a=f.getRng(!0),e=a.startOffset,k=a.startContainer,l=k.nodeValue,b=p(f.getStart()),b&&(c=q(b)),l&&e>0&&e<l.length&&/\w/.test(l.charAt(e))&&/\w/.test(l.charAt(e-1))?(g=f.getBookmark(),a.collapse(!0),a=L(a,u(d)),a=h.split(a),y(d,i,a),f.moveToBookmark(g)):(!b||c.nodeValue!==j?(b=n(!0),c=b.firstChild,a.insertNode(b),e=1,y(d,i,b)):y(d,i,b),f.setCursorLocation(c,e))}function t(){var a=f.getRng(!0),b,c,g,k,l,m,o=[],p,q;b=a.startContainer,c=a.startOffset,l=b;if(b.nodeType==3){if(c!=b.nodeValue.length||b.nodeValue===j)k=!0;l=l.parentNode}while(l){if(B(l,d,i)){m=l;break}l.nextSibling&&(k=!0),o.push(l),l=l.parentNode}if(!m)return;if(k)g=f.getBookmark(),a.collapse(!0),a=L(a,u(d),!0),a=h.split(a),z(d,i,a),f.moveToBookmark(g);else{q=n(),l=q;for(p=o.length-1;p>=0;p--)l.appendChild(o[p].cloneNode(!1)),l=l.firstChild;l.appendChild(e.doc.createTextNode(j)),l=l.firstChild,e.insertAfter(q,m),f.setCursorLocation(l,1)}}var j,k="_mce_caret",l=b.settings.caret_debug;j=a.isGecko?"​":m,b.onBeforeGetContent.addToTop(function(){var a=[],b;if(o(p(f.getStart()),a)){b=a.length;while(b--)e.setAttrib(a[b],"data-mce-bogus","1")}}),a.each("onMouseUp onKeyUp".split(" "),function(a){b[a].addToTop(function(){r()})}),b.onKeyDown.addToTop(function(a,b){var c=b.keyCode;(c==8||c==37||c==39)&&r(p(f.getStart()))}),c=="apply"?s():t()}var c={},d=a.each,e=b.dom,f=b.selection,g=a.dom.TreeWalker,h=new a.dom.RangeUtils(e),i=b.schema.isValidChild,j=e.isBlock,k=b.settings.forced_root_block,l=e.nodeIndex,m="﻿",n=/^(src|href|style)$/,o=!1,p=!0,q,w=function(a){var c;return b.dom.getParent(a,function(a){return c=b.dom.getStyle(a,"text-decoration"),c&&c!=="none"}),c},x=function(a){var c;a.nodeType===1&&a.parentNode&&a.parentNode.nodeType===1&&(c=w(a.parentNode),b.dom.getStyle(a,"color")&&c?b.dom.setStyle(a,"text-decoration",c):b.dom.getStyle(a,"textdecoration")===c&&b.dom.setStyle(a,"text-decoration",null))};a.extend(this,{get:u,register:v,apply:y,remove:z,toggle:A,match:C,matchAll:D,matchNode:B,canApply:E})}}(tinymce),tinymce.onAddEditor.add(function(a,b){var c,d,e,f=b.settings;if(f.inline_styles){d=a.explode(f.font_size_legacy_values);function g(b,c){a.each(c,function(a,c){a&&e.setStyle(b,c,a)}),e.rename(b,"span")}c={font:function(a,b){g(b,{backgroundColor:b.style.backgroundColor,color:b.color,fontFamily:b.face,fontSize:d[parseInt(b.size)-1]})},u:function(a,b){g(b,{textDecoration:"underline"})},strike:function(a,b){g(b,{textDecoration:"line-through"})}};function h(d,g){e=d.dom,f.convert_fonts_to_spans&&a.each(e.select("font,u,strike",g.node),function(a){c[a.nodeName.toLowerCase()](b.dom,a)})}b.onPreProcess.add(h),b.onSetContent.add(h),b.onInit.add(function(){b.selection.onSetContent.add(h)})}}),function(a){var b=/^\s*|\s*$/g,c,d="B".replace(/A(.)|B/,"$1")==="$1",e={majorVersion:"3",minorVersion:"4.7",releaseDate:"2011-11-03",_init:function(){function b(a){return a.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(a.src)?(/_(src|dev)\.js/g.test(a.src)&&(c.suffix="_src"),(k=a.src.indexOf("?"))!=-1&&(c.query=a.src.substring(k+1)),c.baseURL=a.src.substring(0,a.src.lastIndexOf("/")),j&&c.baseURL.indexOf("://")==-1&&c.baseURL.indexOf("/")!==0&&(c.baseURL=j+c.baseURL),c.baseURL):null}var c=this,d=document,e=navigator,f=e.userAgent,g,h,i,j,k,l;c.isOpera=a.opera&&opera.buildNumber,c.isWebKit=/WebKit/.test(f),c.isIE=!c.isWebKit&&!c.isOpera&&/MSIE/gi.test(f)&&/Explorer/gi.test(e.appName),c.isIE6=c.isIE&&/MSIE [56]/.test(f),c.isIE7=c.isIE&&/MSIE [7]/.test(f),c.isIE8=c.isIE&&/MSIE [8]/.test(f),c.isIE9=c.isIE&&/MSIE [9]/.test(f),c.isGecko=!c.isWebKit&&/Gecko/.test(f),c.isMac=f.indexOf("Mac")!=-1,c.isAir=/adobeair/i.test(f),c.isIDevice=/(iPad|iPhone)/.test(f),c.isIOS5=c.isIDevice&&f.match(/AppleWebKit\/(\d*)/)[1]>=534;if(a.tinyMCEPreInit){c.suffix=tinyMCEPreInit.suffix,c.baseURL=tinyMCEPreInit.base,c.query=tinyMCEPreInit.query;return}c.suffix="",h=d.getElementsByTagName("base");for(g=0;g<h.length;g++)if(l=h[g].href)/^https?:\/\/[^\/]+$/.test(l)&&(l+="/"),j=l?l.match(/.*\//)[0]:"";h=d.getElementsByTagName("script");for(g=0;g<h.length;g++)if(b(h[g]))return;i=d.getElementsByTagName("head")[0];if(i){h=i.getElementsByTagName("script");for(g=0;g<h.length;g++)if(b(h[g]))return}return},is:function(a,b){return b?b=="array"&&a.hasOwnProperty&&a instanceof Array?!0:typeof a==b:a!==c},makeMap:function(a,b,c){var d;a=a||[],b=b||",",typeof a=="string"&&(a=a.split(b)),c=c||{},d=a.length;while(d--)c[a[d]]={};return c},each:function(a,b,d){var e,f;if(!a)return 0;d=d||a;if(a.length!==c){for(e=0,f=a.length;e<f;e++)if(b.call(d,a[e],e,a)===!1)return 0}else for(e in a)if(a.hasOwnProperty(e)&&b.call(d,a[e],e,a)===!1)return 0;return 1},trim:function(a){return(a?""+a:"").replace(b,"")},create:function(a,b,c){var d=this,e,f,g,h,i,j=0;a=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(a),g=a[3].match(/(^|\.)(\w+)$/i)[2],f=d.createNS(a[3].replace(/\.\w+$/,""),c);if(f[g])return;if(a[2]=="static"){f[g]=b,this.onCreate&&this.onCreate(a[2],a[3],f[g]);return}b[g]||(b[g]=function(){},j=1),f[g]=b[g],d.extend(f[g].prototype,b),a[5]&&(e=d.resolve(a[5]).prototype,h=a[5].match(/\.(\w+)$/i)[1],i=f[g],j?f[g]=function(){return e[h].apply(this,arguments)}:f[g]=function(){return this.parent=e[h],i.apply(this,arguments)},f[g].prototype[g]=f[g],d.each(e,function(a,b){f[g].prototype[b]=e[b]}),d.each(b,function(a,b){e[b]?f[g].prototype[b]=function(){return this.parent=e[b],a.apply(this,arguments)}:b!=g&&(f[g].prototype[b]=a)})),d.each(b["static"],function(a,b){f[g][b]=a}),this.onCreate&&this.onCreate(a[2],a[3],f[g].prototype)},walk:function(a,b,c,d){d=d||this,a&&(c&&(a=a[c]),e.each(a,function(a,f){if(b.call(d,a,f,c)===!1)return!1;e.walk(a,b,c,d)}))},createNS:function(b,c){var d,e;c=c||a,b=b.split(".");for(d=0;d<b.length;d++)e=b[d],c[e]||(c[e]={}),c=c[e];return c},resolve:function(b,c){var d,e;c=c||a,b=b.split(".");for(d=0,e=b.length;d<e;d++){c=c[b[d]];if(!c)break}return c},addUnload:function(b,c){var d=this;b={func:b,scope:c||this};if(!d.unloads){function e(){var b=d.unloads,c,g;if(b){for(g in b)c=b[g],c&&c.func&&c.func.call(c.scope,1);a.detachEvent?(a.detachEvent("onbeforeunload",f),a.detachEvent("onunload",e)):a.removeEventListener&&a.removeEventListener("unload",e,!1),d.unloads=c=b=w=e=0,a.CollectGarbage&&CollectGarbage()}}function f(){var b=document;if(b.readyState=="interactive"){function c(){b.detachEvent("onstop",c),e&&e(),b=0}b&&b.attachEvent("onstop",c),a.setTimeout(function(){b&&b.detachEvent("onstop",c)},0)}}a.attachEvent?(a.attachEvent("onunload",e),a.attachEvent("onbeforeunload",f)):a.addEventListener&&a.addEventListener("unload",e,!1),d.unloads=[b]}else d.unloads.push(b);return b},removeUnload:function(a){var b=this.unloads,c=null;return e.each(b,function(d,e){if(d&&d.func==a)return b.splice(e,1),c=a,!1}),c},explode:function(a,b){return a?e.map(a.split(b||","),e.trim):a},_addVer:function(a){var b;return this.query?(b=(a.indexOf("?")==-1?"?":"&")+this.query,a.indexOf("#")==-1?a+b:a.replace("#",b+"#")):a},_replace:function(a,b,e){return d?e.replace(a,function(){var a=b,d=arguments,e;for(e=0;e<d.length-2;e++)d[e]===c?a=a.replace(new RegExp("\\$"+e,"g"),""):a=a.replace(new RegExp("\\$"+e,"g"),d[e]);return a}):e.replace(a,b)}};e._init(),a.tinymce=a.tinyMCE=e}(window),function(a,b){var c=b.is,d=/^(href|src|style)$/i,e;if(!a&&window.console)return console.log("Load jQuery first!");b.$=a,b.adapter={patchEditor:function(b){function c(a,b){var c=this;return b&&c.removeAttr("data-mce-style"),i.css.apply(c,arguments)}function f(a,c){var f=this;return d.test(a)?c!==e?(f.each(function(d,e){b.dom.setAttrib(e,a,c)}),f):f.attr("data-mce-"+a):i.attr.apply(f,arguments)}function g(a){return function(c){return c&&(c=b.dom.processHTML(c)),a.call(this,c)}}function h(a){return a.css!==c&&(a.css=c,a.attr=f,a.html=g(i.html),a.append=g(i.append),a.prepend=g(i.prepend),a.after=g(i.after),a.before=g(i.before),a.replaceWith=g(i.replaceWith),a.tinymce=b,a.pushStack=function(){return h(i.pushStack.apply(this,arguments))}),a}var i=a.fn;b.$=function(c,d){var e=b.getDoc();return h(a(c||e,e||d))}}},b.extend=a.extend,b.extend(b,{map:a.map,grep:function(b,c){return a.grep(b,c||function(){return 1})},inArray:function(b,c){return a.inArray(c,b||[])}});var f={"tinymce.dom.DOMUtils":{select:function(b,c){var d=this;return a.find(b,d.get(c)||d.get(d.settings.root_element)||d.doc,[])},is:function(b,c){return a(this.get(b)).is(c)}}};b.onCreate=function(a,c,d){b.extend(d,f[c])}}(window.jQuery,tinymce),tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(a){this.scope=a||this,this.listeners=[]},add:function(a,b){return this.listeners.push({cb:a,scope:b||this.scope}),a},addToTop:function(a,b){return this.listeners.unshift({cb:a,scope:b||this.scope}),a},remove:function(a){var b=this.listeners,c=null;return tinymce.each(b,function(d,e){if(a==d.cb)return c=a,b.splice(e,1),!1}),c},dispatch:function(){var a,b=arguments,c,d=this.listeners,e;for(c=0;c<d.length;c++){e=d[c],a=e.cb.apply(e.scope,b);if(a===!1)break}return a}}),function(){var a=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(b,c){var d=this,e,f,g,h;b=tinymce.trim(b),c=d.settings=c||{};if(/^([\w\-]+):([^\/]{2})/i.test(b)||/^\s*#/.test(b)){d.source=b;return}b.indexOf("/")===0&&b.indexOf("//")!==0&&(b=(c.base_uri?c.base_uri.protocol||"http":"http")+"://mce_host"+b),/^[\w-]*:?\/\//.test(b)||(h=c.base_uri?c.base_uri.path:(new tinymce.util.URI(location.href)).directory,b=(c.base_uri&&c.base_uri.protocol||"http")+"://mce_host"+d.toAbsPath(h,b)),b=b.replace(/@@/g,"(mce_at)"),b=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(b),a(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(a,c){var e=b[c];e&&(e=e.replace(/\(mce_at\)/g,"@@")),d[a]=e});if(g=c.base_uri){d.protocol||(d.protocol=g.protocol),d.userInfo||(d.userInfo=g.userInfo),!d.port&&d.host=="mce_host"&&(d.port=g.port);if(!d.host||d.host=="mce_host")d.host=g.host;d.source=""}},setPath:function(a){var b=this;a=/^(.*?)\/?(\w+)?$/.exec(a),b.path=a[0],b.directory=a[1],b.file=a[2],b.source="",b.getURI()},toRelative:function(a){var b=this,c;return a==="./"?a:(a=new tinymce.util.URI(a,{base_uri:b}),a.host!="mce_host"&&b.host!=a.host&&a.host||b.port!=a.port||b.protocol!=a.protocol?a.getURI():(c=b.toRelPath(b.path,a.path),a.query&&(c+="?"+a.query),a.anchor&&(c+="#"+a.anchor),c))},toAbsolute:function(a,b){var a=new tinymce.util.URI(a,{base_uri:this});return a.getURI(this.host==a.host&&this.protocol==a.protocol?b:0)},toRelPath:function(a,b){var c,d=0,e="",f,g;a=a.substring(0,a.lastIndexOf("/")),a=a.split("/"),c=b.split("/");if(a.length>=c.length)for(f=0,g=a.length;f<g;f++)if(f>=c.length||a[f]!=c[f]){d=f+1;break}if(a.length<c.length)for(f=0,g=c.length;f<g;f++)if(f>=a.length||a[f]!=c[f]){d=f+1;break}if(d==1)return b;for(f=0,g=a.length-(d-1);f<g;f++)e+="../";for(f=d-1,g=c.length;f<g;f++)f!=d-1?e+="/"+c[f]:e+=c[f];return e},toAbsPath:function(b,c){var d,e=0,f=[],g,h;g=/\/$/.test(c)?"/":"",b=b.split("/"),c=c.split("/"),a(b,function(a){a&&f.push(a)}),b=f;for(d=c.length-1,f=[];d>=0;d--){if(c[d].length==0||c[d]==".")continue;if(c[d]==".."){e++;continue}if(e>0){e--;continue}f.push(c[d])}return d=b.length-e,d<=0?h=f.reverse().join("/"):h=b.slice(0,d).join("/")+"/"+f.reverse().join("/"),h.indexOf("/")!==0&&(h="/"+h),g&&h.lastIndexOf("/")!==h.length-1&&(h+=g),h},getURI:function(a){var b,c=this;if(!c.source||a)b="",a||(c.protocol&&(b+=c.protocol+"://"),c.userInfo&&(b+=c.userInfo+"@"),c.host&&(b+=c.host),c.port&&(b+=":"+c.port)),c.path&&(b+=c.path),c.query&&(b+="?"+c.query),c.anchor&&(b+="#"+c.anchor),c.source=b;return c.source}})}(),function(){var a=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(b){var c=this.get(b),d;return c&&a(c.split("&"),function(a){a=a.split("="),d=d||{},d[unescape(a[0])]=unescape(a[1])}),d},setHash:function(b,c,d,e,f,g){var h="";a(c,function(a,b){h+=(h?"&":"")+escape(b)+"="+escape(a)}),this.set(b,h,d,e,f,g)},get:function(a){var b=document.cookie,c,d=a+"=",e;if(!b)return;e=b.indexOf("; "+d);if(e==-1){e=b.indexOf(d);if(e!=0)return null}else e+=2;return c=b.indexOf(";",e),c==-1&&(c=b.length),unescape(b.substring(e+d.length,c))},set:function(a,b,c,d,e,f){document.cookie=a+"="+escape(b)+(c?"; expires="+c.toGMTString():"")+(d?"; path="+escape(d):"")+(e?"; domain="+e:"")+(f?"; secure":"")},remove:function(a,b){var c=new Date;c.setTime(c.getTime()-1e3),this.set(a,"",c,b,c)}})}(),function(){function serialize(a,b){var c,d,e;b=b||'"';if(a==null)return"null";e=typeof a;if(e=="string")return d="\bb\tt\nn\ff\rr\"\"''\\\\",b+a.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,e){return b==='"'&&a==="'"?a:(c=d.indexOf(e),c+1?"\\"+d.charAt(c+1):(a=e.charCodeAt().toString(16),"\\u"+"0000".substring(a.length)+a))})+b;if(e=="object"){if(a.hasOwnProperty&&a instanceof Array){for(c=0,d="[";c<a.length;c++)d+=(c>0?",":"")+serialize(a[c],b);return d+"]"}d="{";for(c in a)a.hasOwnProperty(c)&&(d+=typeof a[c]!="function"?(d.length>1?","+b:b)+c+b+":"+serialize(a[c],b):"");return d+"}"}return""+a}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}}(),tinymce.create("static tinymce.util.XHR",{send:function(a){function b(a){c=0;try{c=new ActiveXObject(a)}catch(b){}return c}var c,d,e=window,f=0;a.scope=a.scope||this,a.success_scope=a.success_scope||a.scope,a.error_scope=a.error_scope||a.scope,a.async=a.async===!1?!1:!0,a.data=a.data||"",c=e.XMLHttpRequest?new XMLHttpRequest:b("Microsoft.XMLHTTP")||b("Msxml2.XMLHTTP");if(c){c.overrideMimeType&&c.overrideMimeType(a.content_type),c.open(a.type||(a.data?"POST":"GET"),a.url,a.async),a.content_type&&c.setRequestHeader("Content-Type",a.content_type),c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.send(a.data);function g(){!a.async||c.readyState==4||f++>1e4?(a.success&&f<1e4&&c.status==200?a.success.call(a.success_scope,""+c.responseText,c,a):a.error&&a.error.call(a.error_scope,f>1e4?"TIMED_OUT":"GENERAL",c,a),c=null):e.setTimeout(g,10)}if(!a.async)return g();d=e.setTimeout(g,10)}}}),function(){var a=tinymce.extend,b=tinymce.util.JSON,c=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(b){this.settings=a({},b),this.count=0},send:function(d){var e=d.error,f=d.success;d=a(this.settings,d),d.success=function(a,c){a=b.parse(a),typeof a=="undefined"&&(a={error:"JSON Parse error."}),a.error?e.call(d.error_scope||d.scope,a.error,c):f.call(d.success_scope||d.scope,a.result)},d.error=function(a,b){e&&e.call(d.error_scope||d.scope,a,b)},d.data=b.serialize({id:d.id||"c"+this.count++,method:d.method,params:d.params}),d.content_type="application/json",c.send(d)},"static":{sendRPC:function(a){return(new tinymce.util.JSONRequest).send(a)}}})}(),function(a){a.VK={DELETE:46,BACKSPACE:8,ENTER:13,TAB:9,SPACEBAR:32,UP:38,DOWN:40}}(tinymce),function(a){function b(b){var c=b.dom,d=b.selection;b.onKeyDown.add(function(b,e){var f,g,h,i,j;j=e.keyCode==l;if(j||e.keyCode==k){e.preventDefault(),f=d.getRng(),g=c.getParent(f.startContainer,c.isBlock),j&&(g=c.getNext(g,c.isBlock));if(g){h=g.firstChild;while(h&&h.nodeType==3&&h.nodeValue.length==0)h=h.nextSibling;h&&h.nodeName==="SPAN"&&(i=h.cloneNode(!1))}b.getDoc().execCommand(j?"ForwardDelete":"Delete",!1,null),g=c.getParent(f.startContainer,c.isBlock),a.each(c.select("span.Apple-style-span,font.Apple-style-span",g),function(a){var b=d.getBookmark();i?c.replace(i.cloneNode(!1),a,!0):c.remove(a,!0),d.moveToBookmark(b)})}})}function c(a){a.onKeyUp.add(function(a,b){var c=b.keyCode;if(c==l||c==k)if(a.dom.isEmpty(a.getBody())){a.setContent("",{format:"raw"}),a.nodeChanged();return}})}function d(a){a.dom.bind(a.getDoc(),"focusin",function(){a.selection.setRng(a.selection.getRng())})}function e(b){b.onKeyDown.add(function(b,c){if(c.keyCode===k&&b.selection.isCollapsed()&&b.selection.getRng(!0).startOffset===0){var d=b.selection.getNode(),e=d.previousSibling;e&&e.nodeName&&e.nodeName.toLowerCase()==="hr"&&(b.dom.remove(e),a.dom.Event.cancel(c))}})}function f(a){Range.prototype.getClientRects||a.onMouseDown.add(function(a,b){if(b.target.nodeName==="HTML"){var c=a.getBody();c.blur(),setTimeout(function(){c.focus()},0)}})}function g(a){a.onClick.add(function(a,b){b=b.target,/^(IMG|HR)$/.test(b.nodeName)&&a.selection.getSel().setBaseAndExtent(b,0,b,1),b.nodeName=="A"&&a.dom.hasClass(b,"mceItemAnchor")&&a.selection.select(b),a.nodeChanged()})}function h(b){var c,d;b.dom.bind(b.getDoc(),"selectionchange",function(){d&&(clearTimeout(d),d=0),d=window.setTimeout(function(){var d=b.selection.getRng();if(!c||!a.dom.RangeUtils.compareRanges(d,c))b.nodeChanged(),c=d},50)})}function i(a){document.body.setAttribute("role","application")}var j=a.VK,k=j.BACKSPACE,l=j.DELETE;a.create("tinymce.util.Quirks",{Quirks:function(j){a.isWebKit&&(b(j),c(j),d(j),g(j),a.isIDevice&&h(j)),a.isIE&&(e(j),c(j),i(j)),a.isGecko&&(e(j),f(j))}})}(tinymce),function(a){function b(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.textContent||b.innerText||a}function c(a,b){var c,d,f,g={};if(a){a=a.split(","),b=b||10;for(c=0;c<a.length;c+=2)d=String.fromCharCode(parseInt(a[c],b)),e[d]||(f="&"+a[c+1]+";",g[d]=f,g[f]=d);return g}}var d,e,f,g=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,h=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,i=/[<>&\"\']/g,j=/&(#x|#)?([\w]+);/g,k={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};e={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},f={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},d=c("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),a.html=a.html||{},a.html.Entities={encodeRaw:function(a,b){return a.replace(b?g:h,function(a){return e[a]||a})},encodeAllRaw:function(a){return(""+a).replace(i,function(a){return e[a]||a})},encodeNumeric:function(a,b){return a.replace(b?g:h,function(a){return a.length>1?"&#"+((a.charCodeAt(0)-55296)*1024+(a.charCodeAt(1)-56320)+65536)+";":e[a]||"&#"+a.charCodeAt(0)+";"})},encodeNamed:function(a,b,c){return c=c||d,a.replace(b?g:h,function(a){return e[a]||c[a]||a})},getEncodeFunc:function(b,f){function i(a,b){return a.replace(b?g:h,function(a){return e[a]||f[a]||"&#"+a.charCodeAt(0)+";"||a})}function j(a,b){return k.encodeNamed(a,b,f)}var k=a.html.Entities;return f=c(f)||d,b=a.makeMap(b.replace(/\+/g,",")),b.named&&b.numeric?i:b.named?f?j:k.encodeNamed:b.numeric?k.encodeNumeric:k.encodeRaw},decode:function(a){return a.replace(j,function(a,c,e){return c?(e=parseInt(e,c.length===2?16:10),e>65535?(e-=65536,String.fromCharCode(55296+(e>>10),56320+(e&1023))):k[e]||String.fromCharCode(e)):f[a]||d[a]||b(a)})}}}(tinymce),tinymce.html.Styles=function(a,b){function c(a,b,c,d){function e(a){return a=parseInt(a).toString(16),a.length>1?a:"0"+a}return"#"+e(b)+e(c)+e(d)}var d=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,e=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,f=/\s*([^:]+):\s*([^;]+);?/g,g=/\s+$/,h=/rgb/,i,j,k={},l;a=a||{},l="\\\" \\' \\; \\: ; : ﻿".split(" ");for(j=0;j<l.length;j++)k[l[j]]="﻿"+j,k["﻿"+j]=l[j];return{toHex:function(a){return a.replace(d,c)},parse:function(b){function h(a,b){var c,d,e,f;c=n[a+"-top"+b];if(!c)return;d=n[a+"-right"+b];if(c!=d)return;e=n[a+"-bottom"+b];if(d!=e)return;f=n[a+"-left"+b];if(e!=f)return;n[a+b]=f,delete n[a+"-top"+b],delete n[a+"-right"+b],delete n[a+"-bottom"+b],delete n[a+"-left"+b]}function i(a){var b=n[a],c;if(!b||b.indexOf(" ")<0)return;b=b.split(" "),c=b.length;while(c--)if(b[c]!==b[0])return!1;return n[a]=b[0],!0}function j(a,b,c,d){if(!i(b))return;if(!i(c))return;if(!i(d))return;n[a]=n[b]+" "+n[c]+" "+n[d],delete n[b],delete n[c],delete n[d]}function l(a){return r=!0,k[a]}function m(a,b){return r&&(a=a.replace(/\uFEFF[0-9]/g,function(a){return k[a]})),b||(a=a.replace(/\\([\'\";:])/g,"$1")),a}var n={},o,p,q,r,s=a.url_converter,t=a.url_converter_scope||this;if(b){b=b.replace(/\\[\"\';:\uFEFF]/g,l).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(a){return a.replace(/[;:]/g,l)});while(o=f.exec(b)){p=o[1].replace(g,"").toLowerCase(),q=o[2].replace(g,"");if(p&&q.length>0){if(p==="font-weight"&&q==="700")q="bold";else if(p==="color"||p==="background-color")q=q.toLowerCase();q=q.replace(d,c),q=q.replace(e,function(a,b,c,d,e,f){return e=e||f,e?(e=m(e),"'"+e.replace(/\'/g,"\\'")+"'"):(b=m(b||c||d),s&&(b=s.call(t,b,"style")),"url('"+b.replace(/\'/g,"\\'")+"')")}),n[p]=r?m(q,!0):q}f.lastIndex=o.index+o[0].length}h("border",""),h("border","-width"),h("border","-color"),h("border","-style"),h("padding",""),h("margin",""),j("border","border-width","border-style","border-color"),n.border==="medium none"&&delete n.border}return n},serialize:function(a,c){function d(c){var d,f,g,h;d=b.styles[c];if(d)for(f=0,g=d.length;f<g;f++)c=d[f],h=a[c],h!==i&&h.length>0&&(e+=(e.length>0?" ":"")+c+": "+h+";")}var e="",f,g;if(c&&b&&b.styles)d("*"),d(c);else for(f in a)g=a[f],g!==i&&g.length>0&&(e+=(e.length>0?" ":"")+f+": "+g+";");return e}}},function(a){function b(a,b){return a.split(b||",")}function c(a,c){function d(b){return b.replace(/[A-Z]+/g,function(b){return d(a[b])})}var e,f={};for(e in a)a.hasOwnProperty(e)&&(a[e]=d(a[e]));return d(c).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(a,c,d,e){d=b(d,"|"),f[c]={attributes:l(d),attributesOrder:d,children:l(e,"|",{"#comment":{}})}}),f}var d={},e,f,g,h,i={},j,k,l=a.makeMap,m=a.each;f="h1,h2,h3,h4,h5,h6,hr,p,div,address,pre,form,table,tbody,thead,tfoot,th,tr,td,li,ol,ul,caption,blockquote,center,dl,dt,dd,dir,fieldset,noscript,menu,isindex,samp,header,footer,article,section,hgroup",f=l(f,",",l(f.toUpperCase())),d=c({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]"
),e=l("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected,autoplay,loop,controls"),g=l("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,source"),h=a.extend(l("td,th,iframe,video,audio,object"),g),j=l("pre,script,style,textarea"),k=l("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),a.html.Schema=function(c){function n(a){return new RegExp("^"+a.replace(/([?+*])/g,".$1")+"$")}function o(c){var d,e,f,g,h,i,j,k,m,o,p,q,r,s,t,v,x,y,z,A,B,C,D=/^([#+-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,E=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,F=/[*?+]/;if(c){c=b(c),u["@"]&&(x=u["@"].attributes,y=u["@"].attributesOrder);for(d=0,e=c.length;d<e;d++){i=D.exec(c[d]);if(i){t=i[1],o=i[2],v=i[3],m=i[4],r={},s=[],j={attributes:r,attributesOrder:s},t==="#"&&(j.paddEmpty=!0),t==="-"&&(j.removeEmpty=!0);if(x){for(A in x)r[A]=x[A];s.push.apply(s,y)}if(m){m=b(m,"|");for(f=0,g=m.length;f<g;f++){i=E.exec(m[f]);if(i){k={},q=i[1],p=i[2].replace(/::/g,":"),t=i[3],C=i[4],q==="!"&&(j.attributesRequired=j.attributesRequired||[],j.attributesRequired.push(p),k.required=!0);if(q==="-"){delete r[p],s.splice(a.inArray(s,p),1);continue}t&&(t==="="&&(j.attributesDefault=j.attributesDefault||[],j.attributesDefault.push({name:p,value:C}),k.defaultValue=C),t===":"&&(j.attributesForced=j.attributesForced||[],j.attributesForced.push({name:p,value:C}),k.forcedValue=C),t==="<"&&(k.validValues=l(C,"?"))),F.test(p)?(j.attributePatterns=j.attributePatterns||[],k.pattern=n(p),j.attributePatterns.push(k)):(r[p]||s.push(p),r[p]=k)}}}!x&&o=="@"&&(x=r,y=s),v&&(j.outputName=o,u[v]=j),F.test(o)?(j.pattern=n(o),w.push(j)):u[o]=j}}}}function p(a){u={},w=[],o(a),m(d,function(a,b){v[b]=a.children})}function q(a){var c=/^(~)?(.+)$/;a&&m(b(a),function(a){var b=c.exec(a),d=b[1]==="~",e=d?"span":"div",g=b[2];v[g]=v[e],i[g]=e,d||(f[g]={}),m(v,function(a,b){a[e]&&(a[g]=a[e])})})}function r(a){var c=/^([+\-]?)(\w+)\[([^\]]+)\]$/;a&&m(b(a),function(a){var d=c.exec(a),e,f;d&&(f=d[1],f?e=v[d[2]]:e=v[d[2]]={"#comment":{}},e=v[d[2]],m(b(d[3],"|"),function(a){f==="-"?delete e[a]:e[a]={}}))})}function s(a){var b=u[a],c;if(b)return b;c=w.length;while(c--){b=w[c];if(b.pattern.test(a))return b}}var t=this,u={},v={},w=[],x,y;c=c||{},c.verify_html===!1&&(c.valid_elements="*[*]"),c.valid_styles&&(x={},m(c.valid_styles,function(b,c){x[c]=a.explode(b)})),y=c.whitespace_elements?l(c.whitespace_elements):j,c.valid_elements?p(c.valid_elements):(m(d,function(a,b){u[b]={attributes:a.attributes,attributesOrder:a.attributesOrder},v[b]=a.children}),m(b("strong/b,em/i"),function(a){a=b(a,"/"),u[a[1]].outputName=a[0]}),u.img.attributesDefault=[{name:"alt",value:""}],m(b("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr"),function(a){u[a].removeEmpty=!0}),m(b("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(a){u[a].paddEmpty=!0})),q(c.custom_elements),r(c.valid_children),o(c.extended_valid_elements),r("+ol[ul|ol],+ul[ul|ol]"),s("span")||o("span[!data-mce-type|*]"),c.invalid_elements&&a.each(a.explode(c.invalid_elements),function(a){u[a]&&delete u[a]}),t.children=v,t.styles=x,t.getBoolAttrs=function(){return e},t.getBlockElements=function(){return f},t.getShortEndedElements=function(){return g},t.getSelfClosingElements=function(){return k},t.getNonEmptyElements=function(){return h},t.getWhiteSpaceElements=function(){return y},t.isValidChild=function(a,b){var c=v[a];return!!c&&!!c[b]},t.getElementRule=s,t.getCustomElements=function(){return i},t.addValidElements=o,t.setValidElements=p,t.addCustomElements=q,t.addValidChildren=r},a.html.Schema.boolAttrMap=e,a.html.Schema.blockElementsMap=f}(tinymce),function(a){a.html.SaxParser=function(b,c){var d=this,e=function(){};b=b||{},d.schema=c=c||new a.html.Schema,b.fix_self_closing!==!1&&(b.fix_self_closing=!0),a.each("comment cdata text start end pi doctype".split(" "),function(a){a&&(d[a]=b[a]||e)}),d.parse=function(d){function e(a){var b,c;b=k.length;while(b--)if(k[b].name===a)break;if(b>=0){for(c=k.length-1;c>=b;c--)a=k[c],a.valid&&f.end(a.name);k.length=b}}var f=this,g,h=0,i,j,k=[],l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K=0,L=a.html.Entities.decode,M,N;G=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([^\\s\\/<>]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/)>))","g"),H=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g,I={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi},r=c.getShortEndedElements(),F=c.getSelfClosingElements(),s=c.getBoolAttrs(),u=b.validate,q=b.remove_internals,M=b.fix_self_closing,N=a.isIE,z=/^:/;while(g=G.exec(d)){h<g.index&&f.text(L(d.substr(h,g.index-h)));if(i=g[6])i=i.toLowerCase(),N&&z.test(i)&&(i=i.substr(1)),e(i);else if(i=g[7]){i=i.toLowerCase(),N&&z.test(i)&&(i=i.substr(1)),t=i in r,M&&F[i]&&k.length>0&&k[k.length-1].name===i&&e(i);if(!u||(v=c.getElementRule(i))){w=!0,u&&(A=v.attributes,B=v.attributePatterns),(y=g[8])?(p=y.indexOf("data-mce-type")!==-1,p&&q&&(w=!1),l=[],l.map={},y.replace(H,function(a,b,c,d,e){var f,g;b=b.toLowerCase(),c=b in s?b:L(c||d||e||"");if(u&&!p&&b.indexOf("data-")!==0){f=A[b];if(!f&&B){g=B.length;while(g--){f=B[g];if(f.pattern.test(b))break}g===-1&&(f=null)}if(!f)return;if(f.validValues&&!(c in f.validValues))return}l.map[b]=c,l.push({name:b,value:c})})):(l=[],l.map={});if(u&&!p){C=v.attributesRequired,D=v.attributesDefault,E=v.attributesForced;if(E){m=E.length;while(m--)x=E[m],o=x.name,J=x.value,J==="{$uid}"&&(J="mce_"+K++),l.map[o]=J,l.push({name:o,value:J})}if(D){m=D.length;while(m--)x=D[m],o=x.name,o in l.map||(J=x.value,J==="{$uid}"&&(J="mce_"+K++),l.map[o]=J,l.push({name:o,value:J}))}if(C){m=C.length;while(m--)if(C[m]in l.map)break;m===-1&&(w=!1)}l.map["data-mce-bogus"]&&(w=!1)}w&&f.start(i,l,t)}else w=!1;if(j=I[i]){j.lastIndex=h=g.index+g[0].length,(g=j.exec(d))?(w&&(n=d.substr(h,g.index-h)),h=g.index+g[0].length):(n=d.substr(h),h=d.length),w&&n.length>0&&f.text(n,!0),w&&f.end(i),G.lastIndex=h;continue}t||(!y||y.indexOf("/")!=y.length-1?k.push({name:i,valid:w}):w&&f.end(i))}else(i=g[1])?f.comment(i):(i=g[2])?f.cdata(i):(i=g[3])?f.doctype(i):(i=g[4])&&f.pi(i,g[5]);h=g.index+g[0].length}h<d.length&&f.text(L(d.substr(h)));for(m=k.length-1;m>=0;m--)i=k[m],i.valid&&f.end(i.name)}}}(tinymce),function(a){function b(a,b,c){var d,e,f=c?"lastChild":"firstChild",g=c?"prev":"next";if(a[f])return a[f];if(a!==b){d=a[g];if(d)return d;for(e=a.parent;e&&e!==b;e=e.parent){d=e[g];if(d)return d}}}function c(a,b){this.name=a,this.type=b,b===1&&(this.attributes=[],this.attributes.map={})}var d=/^[ \t\r\n]*$/,e={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};a.extend(c.prototype,{replace:function(a){var b=this;return a.parent&&a.remove(),b.insert(a,b),b.remove(),b},attr:function(a,b){var c=this,d,e,f;if(typeof a!="string"){for(e in a)c.attr(e,a[e]);return c}if(d=c.attributes){if(b!==f){if(b===null){if(a in d.map){delete d.map[a],e=d.length;while(e--)if(d[e].name===a)return d=d.splice(e,1),c}return c}if(a in d.map){e=d.length;while(e--)if(d[e].name===a){d[e].value=b;break}}else d.push({name:a,value:b});return d.map[a]=b,c}return d.map[a]}},clone:function(){var a=this,b=new c(a.name,a.type),d,e,f,g,h;if(f=a.attributes){h=[],h.map={};for(d=0,e=f.length;d<e;d++)g=f[d],g.name!=="id"&&(h[h.length]={name:g.name,value:g.value},h.map[g.name]=g.value);b.attributes=h}return b.value=a.value,b.shortEnded=a.shortEnded,b},wrap:function(a){var b=this;return b.parent.insert(a,b),a.append(b),b},unwrap:function(){var a=this,b,c;for(b=a.firstChild;b;)c=b.next,a.insert(b,a,!0),b=c;a.remove()},remove:function(){var a=this,b=a.parent,c=a.next,d=a.prev;return b&&(b.firstChild===a?(b.firstChild=c,c&&(c.prev=null)):d.next=c,b.lastChild===a?(b.lastChild=d,d&&(d.next=null)):c.prev=d,a.parent=a.next=a.prev=null),a},append:function(a){var b=this,c;return a.parent&&a.remove(),c=b.lastChild,c?(c.next=a,a.prev=c,b.lastChild=a):b.lastChild=b.firstChild=a,a.parent=b,a},insert:function(a,b,c){var d;return a.parent&&a.remove(),d=b.parent||this,c?(b===d.firstChild?d.firstChild=a:b.prev.next=a,a.prev=b.prev,a.next=b,b.prev=a):(b===d.lastChild?d.lastChild=a:b.next.prev=a,a.next=b.next,a.prev=b,b.next=a),a.parent=d,a},getAll:function(a){var c=this,d,e=[];for(d=c.firstChild;d;d=b(d,c))d.name===a&&e.push(d);return e},empty:function(){var a=this,c,d,e;if(a.firstChild){c=[];for(e=a.firstChild;e;e=b(e,a))c.push(e);d=c.length;while(d--)e=c[d],e.parent=e.firstChild=e.lastChild=e.next=e.prev=null}return a.firstChild=a.lastChild=null,a},isEmpty:function(a){var c=this,e=c.firstChild,f,g;if(e)do{if(e.type===1){if(e.attributes.map["data-mce-bogus"])continue;if(a[e.name])return!1;f=e.attributes.length;while(f--){g=e.attributes[f].name;if(g==="name"||g.indexOf("data-")===0)return!1}}if(e.type===3&&!d.test(e.value))return!1}while(e=b(e,c));return!0},walk:function(a){return b(this,null,a)}}),a.extend(c,{create:function(a,b){var d,f;d=new c(a,e[a]||1);if(b)for(f in b)d.attr(f,b[f]);return d}}),a.html.Node=c}(tinymce),function(a){var b=a.html.Node;a.html.DomParser=function(c,d){function e(c){var e,g,h,i,j,k,l,m,n,o,p,q,r,s;q=a.makeMap("tr,td,th,tbody,thead,tfoot,table"),p=d.getNonEmptyElements();for(e=0;e<c.length;e++){g=c[e];if(!g.parent)continue;i=[g];for(h=g.parent;h&&!d.isValidChild(h.name,g.name)&&!q[h.name];h=h.parent)i.push(h);if(h&&i.length>1){i.reverse(),j=k=f.filterNode(i[0].clone());for(n=0;n<i.length-1;n++){d.isValidChild(k.name,i[n].name)?(l=f.filterNode(i[n].clone()),k.append(l)):l=k;for(m=i[n].firstChild;m&&m!=i[n+1];)s=m.next,l.append(m),m=s;k=l}j.isEmpty(p)?h.insert(g,i[0],!0):(h.insert(j,i[0],!0),h.insert(g,j)),h=i[0],(h.isEmpty(p)||h.firstChild===h.lastChild&&h.firstChild.name==="br")&&h.empty().remove()}else if(g.parent){if(g.name==="li"){r=g.prev;if(!r||r.name!=="ul"&&r.name!=="ul"){r=g.next;if(!r||r.name!=="ul"&&r.name!=="ul"){g.wrap(f.filterNode(new b("ul",1)));continue}r.insert(g,r.firstChild,!0);continue}r.append(g);continue}d.isValidChild(g.parent.name,"div")&&d.isValidChild("div",g.name)?g.wrap(f.filterNode(new b("div",1))):g.name==="style"||g.name==="script"?g.empty().remove():g.unwrap()}}}var f=this,g={},h=[],i={},j={};c=c||{},c.validate="validate"in c?c.validate:!0,c.root_name=c.root_name||"body",f.schema=d=d||new a.html.Schema,f.filterNode=function(a){var b,c,d;c in g&&(d=i[c],d?d.push(a):i[c]=[a]),b=h.length;while(b--)c=h[b].name,c in a.attributes.map&&(d=j[c],d?d.push(a):j[c]=[a]);return a},f.addNodeFilter=function(b,c){a.each(a.explode(b),function(a){var b=g[a];b||(g[a]=b=[]),b.push(c)})},f.addAttributeFilter=function(b,c){a.each(a.explode(b),function(a){var b;for(b=0;b<h.length;b++)if(h[b].name===a){h[b].callbacks.push(c);return}h.push({name:a,callbacks:[c]})})},f.parse=function(f,k){function l(){var a=p.firstChild,b,c;while(a)b=a.next,a.type==3||a.type==1&&a.name!=="p"&&!z[a.name]&&!a.attr("data-mce-type")?c?c.append(a):(c=m(H,1),p.insert(c,a),c.append(a)):c=null,a=b}function m(a,c){var d=new b(a,c),e;return a in g&&(e=i[a],e?e.push(d):i[a]=[d]),d}function n(a){var b,c,d;for(b=a.prev;b&&b.type===3;)c=b.value.replace(C,""),c.length>0?(b.value=c,b=b.prev):(d=b.prev,b.remove(),b=d)}var o,p,q,r,s,t,u,v,w,x,y,z,A,B=[],C,D,E,F,G,H;k=k||{},i={},j={},z=a.extend(a.makeMap("script,style,head,html,body,title,meta,param"),d.getBlockElements()),G=d.getNonEmptyElements(),F=d.children,y=c.validate,H="forced_root_block"in k?k.forced_root_block:c.forced_root_block,E=d.getWhiteSpaceElements(),A=/^[ \t\r\n]+/,C=/[ \t\r\n]+$/,D=/[ \t\r\n]+/g,o=new a.html.SaxParser({validate:y,fix_self_closing:!y,cdata:function(a){q.append(m("#cdata",4)).value=a},text:function(a,b){var c;E[q.name]||(a=a.replace(D," "),q.lastChild&&z[q.lastChild.name]&&(a=a.replace(A,""))),a.length!==0&&(c=m("#text",3),c.raw=!!b,q.append(c).value=a)},comment:function(a){q.append(m("#comment",8)).value=a},pi:function(a,b){q.append(m(a,7)).value=b,n(q)},doctype:function(a){var b;b=q.append(m("#doctype",10)),b.value=a,n(q)},start:function(a,b,c){var e,f,g,i,k,l,o,p;g=y?d.getElementRule(a):{};if(g){e=m(g.outputName||a,1),e.attributes=b,e.shortEnded=c,q.append(e),p=F[q.name],p&&F[e.name]&&!p[e.name]&&B.push(e),f=h.length;while(f--)k=h[f].name,k in b.map&&(w=j[k],w?w.push(e):j[k]=[e]);z[a]&&n(e),c||(q=e)}},end:function(a){var c,e,f,g,h;e=y?d.getElementRule(a):{};if(e){if(z[a]){if(!E[q.name]){for(c=q.firstChild;c&&c.type===3;)f=c.value.replace(A,""),f.length>0?(c.value=f,c=c.next):(g=c.next,c.remove(),c=g);for(c=q.lastChild;c&&c.type===3;)f=c.value.replace(C,""),f.length>0?(c.value=f,c=c.prev):(g=c.prev,c.remove(),c=g)}c=q.prev,c&&c.type===3&&(f=c.value.replace(A,""),f.length>0?c.value=f:c.remove())}if(e.removeEmpty||e.paddEmpty)if(q.isEmpty(G))if(e.paddEmpty)q.empty().append(new b("#text","3")).value=" ";else if(!q.attributes.map.name){h=q.parent,q.empty().remove(),q=h;return}q=q.parent}}},d),p=q=new b(k.context||c.root_name,11),o.parse(f),y&&B.length&&(k.context?k.invalid=!0:e(B)),H&&p.name=="body"&&l();if(!k.invalid){for(x in i){w=g[x],r=i[x],u=r.length;while(u--)r[u].parent||r.splice(u,1);for(s=0,t=w.length;s<t;s++)w[s](r,x,k)}for(s=0,t=h.length;s<t;s++){w=h[s];if(w.name in j){r=j[w.name],u=r.length;while(u--)r[u].parent||r.splice(u,1);for(u=0,v=w.callbacks.length;u<v;u++)w.callbacks[u](r,w.name,k)}}}return p},c.remove_trailing_brs&&f.addNodeFilter("br",function(b,c){var e,f=b.length,g,h=d.getBlockElements(),i=d.getNonEmptyElements(),j,k,l;h.body=1;for(e=0;e<f;e++){g=b[e],j=g.parent;if(h[g.parent.name]&&g===j.lastChild){k=g.prev;while(k){l=k.name;if(l!=="span"||k.attr("data-mce-type")!=="bookmark"){if(l!=="br")break;if(l==="br"){g=null;break}}k=k.prev}g&&(g.remove(),j.isEmpty(i)&&(elementRule=d.getElementRule(j.name),elementRule&&(elementRule.removeEmpty?j.remove():elementRule.paddEmpty&&(j.empty().append(new a.html.Node("#text",3)).value=" "))))}}})}}(tinymce),tinymce.html.Writer=function(a){var b=[],c,d,e,f,g;return a=a||{},c=a.indent,d=tinymce.makeMap(a.indent_before||""),e=tinymce.makeMap(a.indent_after||""),f=tinymce.html.Entities.getEncodeFunc(a.entity_encoding||"raw",a.entities),g=a.element_format=="html",{start:function(a,h,i){var j,k,l,m;c&&d[a]&&b.length>0&&(m=b[b.length-1],m.length>0&&m!=="\n"&&b.push("\n")),b.push("<",a);if(h)for(j=0,k=h.length;j<k;j++)l=h[j],b.push(" ",l.name,'="',f(l.value,!0),'"');!i||g?b[b.length]=">":b[b.length]=" />",i&&c&&e[a]&&b.length>0&&(m=b[b.length-1],m.length>0&&m!=="\n"&&b.push("\n"))},end:function(a){var d;b.push("</",a,">"),c&&e[a]&&b.length>0&&(d=b[b.length-1],d.length>0&&d!=="\n"&&b.push("\n"))},text:function(a,c){a.length>0&&(b[b.length]=c?a:f(a))},cdata:function(a){b.push("<![CDATA[",a,"]]>")},comment:function(a){b.push("<!--",a,"-->")},pi:function(a,d){d?b.push("<?",a," ",d,"?>"):b.push("<?",a,"?>"),c&&b.push("\n")},doctype:function(a){b.push("<!DOCTYPE",a,">",c?"\n":"")},reset:function(){b.length=0},getContent:function(){return b.join("").replace(/\n$/,"")}}},function(a){a.html.Serializer=function(b,c){var d=this,e=new a.html.Writer(b);b=b||{},b.validate="validate"in b?b.validate:!0,d.schema=c=c||new a.html.Schema,d.writer=e,d.serialize=function(a){function d(a){var b=f[a.type],h,i,j,k,l,m,n,o,p;if(!b){h=a.name,i=a.shortEnded,j=a.attributes;if(g&&j&&j.length>1){m=[],m.map={},p=c.getElementRule(a.name);for(n=0,o=p.attributesOrder.length;n<o;n++)k=p.attributesOrder[n],k in j.map&&(l=j.map[k],m.map[k]=l,m.push({name:k,value:l}));for(n=0,o=j.length;n<o;n++)k=j[n].name,k in m.map||(l=j.map[k],m.map[k]=l,m.push({name:k,value:l}));j=m}e.start(a.name,j,i);if(!i){if(a=a.firstChild)do d(a);while(a=a.next);e.end(h)}}else b(a)}var f,g;return g=b.validate,f={3:function(a,b){e.text(a.value,a.raw)},8:function(a){e.comment(a.value)},7:function(a){e.pi(a.name,a.value)},10:function(a){e.doctype(a.value)},4:function(a){e.cdata(a.value)},11:function(a){if(a=a.firstChild)do d(a);while(a=a.next)}},e.reset(),a.type==1&&!b.inner?d(a):f[11](a),e.getContent()}}}(tinymce),function(a){var b=a.each,c=a.is,d=a.isWebKit,e=a.isIE,f=a.html.Entities,g=/^([a-z0-9],?)+$/i,h=a.html.Schema.blockElementsMap,i=/^[ \t\r\n]*$/;a.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(b,c){var d=this,f,g;d.doc=b,d.win=window,d.files={},d.cssFlicker=!1,d.counter=0,d.stdMode=!a.isIE||b.documentMode>=8,d.boxModel=!a.isIE||b.compatMode=="CSS1Compat"||d.stdMode,d.hasOuterHTML="outerHTML"in b.createElement("a"),d.settings=c=a.extend({keep_values:!1,hex_colors:1},c),d.schema=c.schema,d.styles=new a.html.Styles({url_converter:c.url_converter,url_converter_scope:c.url_converter_scope},c.schema);if(a.isIE6)try{b.execCommand("BackgroundImageCache",!1,!0)}catch(h){d.cssFlicker=!0}if(e&&c.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(a){b.createElement(a)});for(g in c.schema.getCustomElements())b.createElement(g)}a.addUnload(d.destroy,d)},getRoot:function(){var a=this,b=a.settings;return b&&a.get(b.root_element)||a.doc.body},getViewPort:function(a){var b,c;return a=a?a:this.win,b=a.document,c=this.boxModel?b.documentElement:b.body,{x:a.pageXOffset||c.scrollLeft,y:a.pageYOffset||c.scrollTop,w:a.innerWidth||c.clientWidth,h:a.innerHeight||c.clientHeight}},getRect:function(a){var b,c=this,d;return a=c.get(a),b=c.getPos(a),d=c.getSize(a),{x:b.x,y:b.y,w:d.w,h:d.h}},getSize:function(a){var b=this,c,d;return a=b.get(a),c=b.getStyle(a,"width"),d=b.getStyle(a,"height"),c.indexOf("px")===-1&&(c=0),d.indexOf("px")===-1&&(d=0),{w:parseInt(c)||a.offsetWidth||a.clientWidth,h:parseInt(d)||a.offsetHeight||a.clientHeight}},getParent:function(a,b,c){return this.getParents(a,b,c,!1)},getParents:function(a,b,d,e){var f=this,g,h=f.settings,i=[];a=f.get(a),e=e===undefined,h.strict_root&&(d=d||f.getRoot()),c(b,"string")&&(g=b,b==="*"?b=function(a){return a.nodeType==1}:b=function(a){return f.is(a,g)});while(a){if(a==d||!a.nodeType||a.nodeType===9)break;if(!b||b(a)){if(!e)return a;i.push(a)}a=a.parentNode}return e?i:null},get:function(a){var b;if(a&&this.doc&&typeof a=="string"){b=a,a=this.doc.getElementById(a);if(a&&a.id!==b)return this.doc.getElementsByName(b)[1]}return a},getNext:function(a,b){return this._findSib(a,b,"nextSibling")},getPrev:function(a,b){return this._findSib(a,b,"previousSibling")},add:function(a,b,d,e,f){var g=this;return this.run(a,function(a){var h,i;return h=c(b,"string")?g.doc.createElement(b):b,g.setAttribs(h,d),e&&(e.nodeType?h.appendChild(e):g.setHTML(h,e)),f?h:a.appendChild(h)})},create:function(a,b,c){return this.add(this.doc.createElement(a),a,b,c,1)},createHTML:function(a,b,c){var d="",e=this,f;d+="<"+a;for(f in b)b.hasOwnProperty(f)&&(d+=" "+f+'="'+e.encode(b[f])+'"');return typeof c!="undefined"?d+">"+c+"</"+a+">":d+" />"},remove:function(b,c){return this.run(b,function(b){var d,e=b.parentNode;if(!e)return null;if(c)while(d=b.firstChild)!a.isIE||d.nodeType!==3||d.nodeValue?e.insertBefore(d,b):b.removeChild(d);return e.removeChild(b)})},setStyle:function(b,c,d){var f=this;return f.run(b,function(g){var h,i;h=g.style,c=c.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}),f.pixelStyles.test(c)&&(a.is(d,"number")||/^[\-0-9\.]+$/.test(d))&&(d+="px");switch(c){case"opacity":if(e){h.filter=d===""?"":"alpha(opacity="+d*100+")";if(!b.currentStyle||!b.currentStyle.hasLayout)h.display="inline-block"}h[c]=h["-moz-opacity"]=h["-khtml-opacity"]=d||"";break;case"float":e?h.styleFloat=d:h.cssFloat=d;break;default:h[c]=d||""}f.settings.update_styles&&f.setAttrib(g,"data-mce-style")})},getStyle:function(a,b,c){a=this.get(a);if(!a)return;if(this.doc.defaultView&&c){b=b.replace(/[A-Z]/g,function(a){return"-"+a});try{return this.doc.defaultView.getComputedStyle(a,null).getPropertyValue(b)}catch(d){return null}}return b=b.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}),b=="float"&&(b=e?"styleFloat":"cssFloat"),a.currentStyle&&c?a.currentStyle[b]:a.style?a.style[b]:undefined},setStyles:function(a,c){var d=this,e=d.settings,f;f=e.update_styles,e.update_styles=0,b(c,function(b,c){d.setStyle(a,c,b)}),e.update_styles=f,e.update_styles&&d.setAttrib(a,e.cssText)},removeAllAttribs:function(a){return this.run(a,function(a){var b,c=a.attributes;for(b=c.length-1;b>=0;b--)a.removeAttributeNode(c.item(b))})},setAttrib:function(a,d,e){var f=this;if(!a||!d)return;return f.settings.strict&&(d=d.toLowerCase()),this.run(a,function(a){var g=f.settings;if(e!==null)switch(d){case"style":if(!c(e,"string")){b(e,function(b,c){f.setStyle(a,c,b)});return}g.keep_values&&(e&&!f._isRes(e)?a.setAttribute("data-mce-style",e,2):a.removeAttribute("data-mce-style",2)),a.style.cssText=e;break;case"class":a.className=e||"";break;case"src":case"href":g.keep_values&&(g.url_converter&&(e=g.url_converter.call(g.url_converter_scope||f,e,d,a)),f.setAttrib(a,"data-mce-"+d,e,2));break;case"shape":a.setAttribute("data-mce-style",e)}c(e)&&e!==null&&e.length!==0?a.setAttribute(d,""+e,2):a.removeAttribute(d,2)})},setAttribs:function(a,c){var d=this;return this.run(a,function(a){b(c,function(b,c){d.setAttrib(a,c,b)})})},getAttrib:function(b,f,g){var h,i=this,j;b=i.get(b);if(!b||b.nodeType!==1)return g===j?!1:g;c(g)||(g="");if(/^(src|href|style|coords|shape)$/.test(f)){h=b.getAttribute("data-mce-"+f);if(h)return h}e&&i.props[f]&&(h=b[i.props[f]],h=h&&h.nodeValue?h.nodeValue:h),h||(h=b.getAttribute(f,2));if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(f))return b[i.props[f]]===!0&&h===""?f:h?f:"";if(b.nodeName==="FORM"&&b.getAttributeNode(f))return b.getAttributeNode(f).nodeValue;f==="style"&&(h=h||b.style.cssText,h&&(h=i.serializeStyle(i.parseStyle(h),b.nodeName),i.settings.keep_values&&!i._isRes(h)&&b.setAttribute("data-mce-style",h))),d&&f==="class"&&h&&(h=h.replace(/(apple|webkit)\-[a-z\-]+/gi,""));if(e)switch(f){case"rowspan":case"colspan":h===1&&(h="");break;case"size":if(h==="+0"||h===20||h===0)h="";break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":h===0&&(h="");break;case"hspace":h===-1&&(h="");break;case"maxlength":case"tabindex":if(h===32768||h===2147483647||h==="32768")h="";break;case"multiple":case"compact":case"noshade":case"nowrap":if(h===65535)return f;return g;case"shape":h=h.toLowerCase();break;default:f.indexOf("on")===0&&h&&(h=a._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+h))}return h!==j&&h!==null&&h!==""?""+h:g},getPos:function(a,b){var c=this,d=0,e=0,f,g=c.doc,h;a=c.get(a),b=b||g.body;if(a){if(a.getBoundingClientRect)return a=a.getBoundingClientRect(),f=c.boxModel?g.documentElement:g.body,d=a.left+(g.documentElement.scrollLeft||g.body.scrollLeft)-f.clientTop,e=a.top+(g.documentElement.scrollTop||g.body.scrollTop)-f.clientLeft,{x:d,y:e};h=a;while(h&&h!=b&&h.nodeType)d+=h.offsetLeft||0,e+=h.offsetTop||0,h=h.offsetParent;h=a.parentNode;while(h&&h!=b&&h.nodeType)d-=h.scrollLeft||0,e-=h.scrollTop||0,h=h.parentNode}return{x:d,y:e}},parseStyle:function(a){return this.styles.parse(a)},serializeStyle:function(a,b){return this.styles.serialize(a,b)},loadCSS:function(c){var d=this,f=d.doc,g;c||(c=""),g=d.select("head")[0],b(c.split(","),function(b){var c;if(d.files[b])return;d.files[b]=!0,c=d.create("link",{rel:"stylesheet",href:a._addVer(b)}),e&&f.documentMode&&f.recalc&&(c.onload=function(){f.recalc&&f.recalc(),c.onload=null}),g.appendChild(c)})},addClass:function(a,b){return this.run(a,function(a){var c;return b?this.hasClass(a,b)?a.className:(c=this.removeClass(a,b),a.className=(c!=""?c+" ":"")+b):0})},removeClass:function(b,c){var d=this,e;return d.run(b,function(b){var f;return d.hasClass(b,c)?(e||(e=new RegExp("(^|\\s+)"+c+"(\\s+|$)","g")),f=b.className.replace(e," "),f=a.trim(f!=" "?f:""),b.className=f,f||(b.removeAttribute("class"),b.removeAttribute("className")),f):b.className})},hasClass:function(a,b){return a=this.get(a),!a||!b?!1:(" "+a.className+" ").indexOf(" "+b+" ")!==-1},show:function(a){return this.setStyle(a,"display","block")},hide:function(a){return this.setStyle(a,"display","none")},isHidden:function(a){return a=this.get(a),!a||a.style.display=="none"||this.getStyle(a,"display")=="none"},uniqueId:function(a){return(a?a:"mce_")+this.counter++},setHTML:function(a,c){var d=this;return d.run(a,function(a){if(e){while(a.firstChild)a.removeChild(a.firstChild);try{a.innerHTML="<br />"+c,a.removeChild(a.firstChild)}catch(f){a=d.create("div"),a.innerHTML="<br />"+c,b(a.childNodes,function(b,c){c&&a.appendChild(b)})}}else a.innerHTML=c;return c})},getOuterHTML:function(a){var b,c=this;return a=c.get(a),a?a.nodeType===1&&c.hasOuterHTML?a.outerHTML:(b=(a.ownerDocument||c.doc).createElement("body"),b.appendChild(a.cloneNode(!0)),b.innerHTML):null},setOuterHTML:function(a,b,c){function d(a,b,c){var d,e;e=c.createElement("body"),e.innerHTML=b,d=e.lastChild;while(d)f.insertAfter(d.cloneNode(!0),a),d=d.previousSibling;f.remove(a)}var f=this;return this.run(a,function(a){a=f.get(a);if(a.nodeType==1){c=c||a.ownerDocument||f.doc;if(e)try{e&&a.nodeType==1?a.outerHTML=b:d(a,b,c)}catch(g){d(a,b,c)}else d(a,b,c)}})},decode:f.decode,encode:f.encodeAllRaw,insertAfter:function(a,b){return b=this.get(b),this.run(a,function(a){var c,d;return c=b.parentNode,d=b.nextSibling,d?c.insertBefore(a,d):c.appendChild(a),a})},isBlock:function(a){var b=a.nodeType;return b?b===1&&!!h[a.nodeName]:!!h[a]},replace:function(d,e,f){var g=this;return c(e,"array")&&(d=d.cloneNode(!0)),g.run(e,function(c){return f&&b(a.grep(c.childNodes),function(a){d.appendChild(a)}),c.parentNode.replaceChild(d,c)})},rename:function(a,c){var d=this,e;return a.nodeName!=c.toUpperCase()&&(e=d.create(c),b(d.getAttribs(a),function(b){d.setAttrib(e,b.nodeName,d.getAttrib(a,b.nodeName))}),d.replace(e,a,1)),e||a},findCommonAncestor:function(a,b){var c=a,d;while(c){d=b;while(d&&c!=d)d=d.parentNode;if(c==d)break;c=c.parentNode}return!c&&a.ownerDocument?a.ownerDocument.documentElement:c},toHex:function(a){function b(a){return a=parseInt(a).toString(16),a.length>1?a:"0"+a}var c=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(a);return c?(a="#"+b(c[1])+b(c[2])+b(c[3]),a):a},getClasses:function(){function c(d){b(d.imports,function(a){c(a)}),b(d.cssRules||d.rules,function(d){switch(d.type||1){case 1:d.selectorText&&b(d.selectorText.split(","),function(b){b=b.replace(/^\s*|\s*$|^\s\./g,"");if(/\.mce/.test(b)||!/\.[\w\-]+$/.test(b))return;i=b,b=a._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",b);if(h&&!(b=h(b,i)))return;g[b]||(e.push({"class":b}),g[b]=1)});break;case 3:c(d.styleSheet)}})}var d=this,e=[],f,g={},h=d.settings.class_filter,i;if(d.classes)return d.classes;try{b(d.doc.styleSheets,c)}catch(j){}return e.length>0&&(d.classes=e),e},run:function(a,c,d){var e=this,f;return e.doc&&typeof a=="string"&&(a=e.get(a)),a?(d=d||this,!a.nodeType&&(a.length||a.length===0)?(f=[],b(a,function(a,b){a&&(typeof a=="string"&&(a=e.doc.getElementById(a)),f.push(c.call(d,a,b)))}),f):c.call(d,a)):!1},getAttribs:function(a){var b;return a=this.get(a),a?e?(b=[],a.nodeName=="OBJECT"?a.attributes:(a.nodeName==="OPTION"&&this.getAttrib(a,"selected")&&b.push({specified:1,nodeName:"selected"}),a.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(a){b.push({specified:1,nodeName:a})}),b)):a.attributes:[]},isEmpty:function(b,c){var d=this,e,f,g,h,j,k;b=b.firstChild;if(b){h=new a.dom.TreeWalker(b),c=c||d.schema?d.schema.getNonEmptyElements():null;do{g=b.nodeType;if(g===1){if(b.getAttribute("data-mce-bogus"))continue;j=b.nodeName.toLowerCase();if(c&&c[j]){k=b.parentNode;if(j==="br"&&d.isBlock(k)&&k.firstChild===b&&k.lastChild===b)continue;return!1}f=d.getAttribs(b),e=b.attributes.length;while(e--){j=b.attributes[e].nodeName;if(j==="name"||j==="data-mce-bookmark")return!1}}if(g===3&&!i.test(b.nodeValue))return!1}while(b=h.next())}return!0},destroy:function(b){var c=this;c.events&&c.events.destroy(),c.win=c.doc=c.root=c.events=null,b||a.removeUnload(c.destroy)},createRng:function(){var b=this.doc;return b.createRange?b.createRange():new a.dom.Range(this)},nodeIndex:function(a,b){var c=0,d,e,f;if(a)for(d=a.nodeType,a=a.previousSibling,e=a;a;a=a.previousSibling){f=a.nodeType;if(b&&f==3)if(f==d||!a.nodeValue.length)continue;c++,d=f}return c},split:function(b,c,d){function e(b){var c,d=b.childNodes,g=b.nodeType;if(g==1&&b.getAttribute("data-mce-type")=="bookmark")return;for(c=d.length-1;c>=0;c--)e(d[c]);if(g!=9){if(g==3&&b.nodeValue.length>0){if(!f.isBlock(b.parentNode)||a.trim(b.nodeValue).length>0)return}else if(g==1){d=b.childNodes,d.length==1&&d[0]&&d[0].nodeType==1&&d[0].getAttribute("data-mce-type")=="bookmark"&&b.parentNode.insertBefore(d[0],b);if(d.length||/^(br|hr|input|img)$/i.test(b.nodeName))return}f.remove(b)}return b}var f=this,g=f.createRng(),h,i,j;if(b&&c)return g.setStart(b.parentNode,f.nodeIndex(b)),g.setEnd(c.parentNode,f.nodeIndex(c)),h=g.extractContents(),g=f.createRng(),g.setStart(c.parentNode,f.nodeIndex(c)+1),g.setEnd(b.parentNode,f.nodeIndex(b)+1),i=g.extractContents(),j=b.parentNode,j.insertBefore(e(h),b),d?j.replaceChild(d,c):j.insertBefore(c,b),j.insertBefore(e(i),b),f.remove(b),d||c},bind:function(b,c,d,e){var f=this;return f.events||(f.events=new a.dom.EventUtils),f.events.add(b,c,d,e||this)},unbind:function(b,c,d){var e=this;return e.events||(e.events=new a.dom.EventUtils),e.events.remove(b,c,d)},_findSib:function(a,b,d){var e=this,f=b;if(a){c(f,"string")&&(f=function(a){return e.is(a,b)});for(a=a[d];a;a=a[d])if(f(a))return a}return null},_isRes:function(a){return/^(top|left|bottom|right|width|height)/i.test(a)||/;\s*(top|left|bottom|right|width|height)/i.test(a)}}),a.DOM=new a.dom.DOMUtils(document,{process_html:0})}(tinymce),function(a){function b(a){function c(a,b){v(K,a,b)}function d(a,b){v(L,a,b)}function e(a){c(a.parentNode,R(a))}function f(a){c(a.parentNode,R(a)+1)}function g(a){d(a.parentNode,R(a))}function h(a){d(a.parentNode,R(a)+1)}function i(a){a?(F[O]=F[N],F[P]=F[M]):(F[N]=F[O],F[M]=F[P]),F.collapsed=K}function j(a){e(a),h(a)}function k(a){c(a,0),d(a,a.nodeType===1?a.childNodes.length:a.nodeValue.length)}function l(a,b){var c=F[N],d=F[M],e=F[O],f=F[P],g=b.startContainer,h=b.startOffset,i=b.endContainer,j=b.endOffset;if(a===0)return u(c,d,g,h);if(a===1)return u(e,f,g,h);if(a===2)return u(e,f,i,j);if(a===3)return u(c,d,i,j)}function m(){w(J)}function n(){return w(H)}function o(){return w(I)}function p(b){var c=this[N],d=this[M],e,f;c.nodeType!==3&&c.nodeType!==4||!c.nodeValue?(c.childNodes.length>0&&(f=c.childNodes[d]),f?c.insertBefore(b,f):c.appendChild(b)):d?d>=c.nodeValue.length?a.insertAfter(b,c):(e=c.splitText(d),c.parentNode.insertBefore(b,e)):c.parentNode.insertBefore(b,c)}function q(a){var b=F.extractContents();F.insertNode(a),a.appendChild(b),F.selectNode(a)}function r(){return Q(new b(a),{startContainer:F[N],startOffset:F[M],endContainer:F[O],endOffset:F[P],collapsed:F.collapsed,commonAncestorContainer:F.commonAncestorContainer})}function s(a,b){var c;if(a.nodeType==3)return a;if(b<0)return a;c=a.firstChild;while(c&&b>0)--b,c=c.nextSibling;return c?c:a}function t(){return F[N]==F[O]&&F[M]==F[P]}function u(b,c,d,e){var f,g,h,i,j,k;if(b==d)return c==e?0:c<e?-1:1;f=d;while(f&&f.parentNode!=b)f=f.parentNode;if(f){g=0,h=b.firstChild;while(h!=f&&g<c)g++,h=h.nextSibling;return c<=g?-1:1}f=b;while(f&&f.parentNode!=d)f=f.parentNode;if(f){g=0,h=d.firstChild;while(h!=f&&g<e)g++,h=h.nextSibling;return g<e?-1:1}i=a.findCommonAncestor(b,d),j=b;while(j&&j.parentNode!=i)j=j.parentNode;j||(j=i),k=d;while(k&&k.parentNode!=i)k=k.parentNode;k||(k=i);if(j==k)return 0;h=i.firstChild;while(h){if(h==j)return-1;if(h==k)return 1;h=h.nextSibling}}function v(b,c,d){var e,f;b?(F[N]=c,F[M]=d):(F[O]=c,F[P]=d),e=F[O];while(e.parentNode)e=e.parentNode;f=F[N];while(f.parentNode)f=f.parentNode;f==e?u(F[N],F[M],F[O],F[P])>0&&F.collapse(b):F.collapse(b),F.collapsed=t(),F.commonAncestorContainer=a.findCommonAncestor(F[N],F[O])}function w(a){var b,c=0,d=0,e,f,g,h,i,j;if(F[N]==F[O])return x(a);for(b=F[O],e=b.parentNode;e;b=e,e=e.parentNode){if(e==F[N])return y(b,a);++c}for(b=F[N],e=b.parentNode;e;b=e,e=e.parentNode){if(e==F[O])return z(b,a);++d}f=d-c,g=F[N];while(f>0)g=g.parentNode,f--;h=F[O];while(f<0)h=h.parentNode,f++;for(i=g.parentNode,j=h.parentNode;i!=j;i=i.parentNode,j=j.parentNode)g=i,h=j;return A(g,h,a)}function x(a){var b,c,d,e,f,g,h;a!=J&&(b=G.createDocumentFragment()
);if(F[M]==F[P])return b;if(F[N].nodeType==3){c=F[N].nodeValue,d=c.substring(F[M],F[P]),a!=I&&(F[N].deleteData(F[M],F[P]-F[M]),F.collapse(K));if(a==J)return;return b.appendChild(G.createTextNode(d)),b}e=s(F[N],F[M]),f=F[P]-F[M];while(f>0)g=e.nextSibling,h=E(e,a),b&&b.appendChild(h),--f,e=g;return a!=I&&F.collapse(K),b}function y(a,b){var c,d,e,f,g,h;b!=J&&(c=G.createDocumentFragment()),d=B(a,b),c&&c.appendChild(d),e=R(a),f=e-F[M];if(f<=0)return b!=I&&(F.setEndBefore(a),F.collapse(L)),c;d=a.previousSibling;while(f>0)g=d.previousSibling,h=E(d,b),c&&c.insertBefore(h,c.firstChild),--f,d=g;return b!=I&&(F.setEndBefore(a),F.collapse(L)),c}function z(a,b){var c,d,e,f,g,h;b!=J&&(c=G.createDocumentFragment()),e=C(a,b),c&&c.appendChild(e),d=R(a),++d,f=F[P]-d,e=a.nextSibling;while(f>0)g=e.nextSibling,h=E(e,b),c&&c.appendChild(h),--f,e=g;return b!=I&&(F.setStartAfter(a),F.collapse(K)),c}function A(a,b,c){var d,e,f,g,h,i,j,k;c!=J&&(e=G.createDocumentFragment()),d=C(a,c),e&&e.appendChild(d),f=a.parentNode,g=R(a),h=R(b),++g,i=h-g,j=a.nextSibling;while(i>0)k=j.nextSibling,d=E(j,c),e&&e.appendChild(d),j=k,--i;return d=B(b,c),e&&e.appendChild(d),c!=I&&(F.setStartAfter(a),F.collapse(K)),e}function B(a,b){var c=s(F[O],F[P]-1),d,e,f,g,h,i=c!=F[O];if(c==a)return D(c,i,L,b);d=c.parentNode,e=D(d,L,L,b);while(d){while(c)f=c.previousSibling,g=D(c,i,L,b),b!=J&&e.insertBefore(g,e.firstChild),i=K,c=f;if(d==a)return e;c=d.previousSibling,d=d.parentNode,h=D(d,L,L,b),b!=J&&h.appendChild(e),e=h}}function C(a,b){var c=s(F[N],F[M]),d=c!=F[N],e,f,g,h,i;if(c==a)return D(c,d,K,b);e=c.parentNode,f=D(e,L,K,b);while(e){while(c)g=c.nextSibling,h=D(c,d,K,b),b!=J&&f.appendChild(h),d=K,c=g;if(e==a)return f;c=e.nextSibling,e=e.parentNode,i=D(e,L,K,b),b!=J&&i.appendChild(f),f=i}}function D(a,b,c,d){var e,f,g,h,i;if(b)return E(a,d);if(a.nodeType==3){e=a.nodeValue,c?(h=F[M],f=e.substring(h),g=e.substring(0,h)):(h=F[P],f=e.substring(0,h),g=e.substring(h)),d!=I&&(a.nodeValue=g);if(d==J)return;return i=a.cloneNode(L),i.nodeValue=f,i}if(d==J)return;return a.cloneNode(L)}function E(a,b){if(b!=J)return b==I?a.cloneNode(K):a;a.parentNode.removeChild(a)}var F=this,G=a.doc,H=0,I=1,J=2,K=!0,L=!1,M="startOffset",N="startContainer",O="endContainer",P="endOffset",Q=tinymce.extend,R=a.nodeIndex;Q(F,{startContainer:G,startOffset:0,endContainer:G,endOffset:0,collapsed:K,commonAncestorContainer:G,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:c,setEnd:d,setStartBefore:e,setStartAfter:f,setEndBefore:g,setEndAfter:h,collapse:i,selectNode:j,selectNodeContents:k,compareBoundaryPoints:l,deleteContents:m,extractContents:n,cloneContents:o,insertNode:p,surroundContents:q,cloneRange:r})}a.Range=b}(tinymce.dom),function(){function a(a){function b(b,c){var d,e=0,f,g,h,i,j,k,l=-1,m;d=b.duplicate(),d.collapse(c),m=d.parentElement();if(m.ownerDocument!==a.dom.doc)return;while(m.contentEditable==="false")m=m.parentNode;if(!m.hasChildNodes())return{node:m,inside:1};h=m.children,f=h.length-1;while(e<=f){k=Math.floor((e+f)/2),i=h[k],d.moveToElementText(i),l=d.compareEndPoints(c?"StartToStart":"EndToEnd",b);if(l>0)f=k-1;else{if(!(l<0))return{node:i};e=k+1}}if(l<0){i?d.collapse(!1):(d.moveToElementText(m),d.collapse(!0),i=m,g=!0),d.setEndPoint(c?"EndToStart":"EndToEnd",b);if(d.compareEndPoints(c?"StartToStart":"StartToEnd",b)>0){d=b.duplicate(),d.collapse(c),j=-1;while(m==d.parentElement()){if(d.move("character",-1)==0)break;j++}}j=j||d.text.replace("\r\n"," ").length}else d.collapse(!0),d.setEndPoint(c?"StartToStart":"StartToEnd",b),j=d.text.replace("\r\n"," ").length;return{node:i,position:l,offset:j,inside:g}}function c(){function c(a){var c=b(f,a),d,e,h=0,i,j,k;d=c.node,e=c.offset;if(c.inside&&!d.hasChildNodes()){g[a?"setStart":"setEnd"](d,0);return}if(e===j){g[a?"setStartBefore":"setEndAfter"](d);return}if(c.position<0){i=c.inside?d.firstChild:d.nextSibling;if(!i){g[a?"setStartAfter":"setEndAfter"](d);return}if(!e){i.nodeType==3?g[a?"setStart":"setEnd"](i,0):g[a?"setStartBefore":"setEndBefore"](i);return}while(i){k=i.nodeValue,h+=k.length;if(h>=e){d=i,h-=e,h=k.length-h;break}i=i.nextSibling}}else{i=d.previousSibling;if(!i)return g[a?"setStartBefore":"setEndBefore"](d);if(!e){d.nodeType==3?g[a?"setStart":"setEnd"](i,d.nodeValue.length):g[a?"setStartAfter":"setEndAfter"](i);return}while(i){h+=i.nodeValue.length;if(h>=e){d=i,h-=e;break}i=i.previousSibling}}g[a?"setStart":"setEnd"](d,h)}var f=a.getRng(),g=e.createRng(),h,i,j,k,l,m;h=f.item?f.item(0):f.parentElement();if(h.ownerDocument!=e.doc)return g;i=a.isCollapsed();if(f.item)return g.setStart(h.parentNode,e.nodeIndex(h)),g.setEnd(g.startContainer,g.startOffset+1),g;try{c(!0),i||c()}catch(n){if(n.number!=-2147024809)throw n;l=d.getBookmark(2),j=f.duplicate(),j.collapse(!0),h=j.parentElement(),i||(j=f.duplicate(),j.collapse(!1),k=j.parentElement(),k.innerHTML=k.innerHTML),h.innerHTML=h.innerHTML,d.moveToBookmark(l),f=a.getRng(),c(!0),i||c()}return g}var d=this,e=a.dom,f=!0,g=!1;this.getBookmark=function(c){function d(a){var a,b,c,d,f,g=[];b=a.parentNode,c=e.getRoot().parentNode;while(b!=c&&b.nodeType!==9){d=b.children,f=d.length;while(f--)if(a===d[f]){g.push(f);break}a=b,b=b.parentNode}return g}function f(a){var c;c=b(g,a);if(c)return{position:c.position,offset:c.offset,indexes:d(c.node),inside:c.inside}}var g=a.getRng(),h,i,j={};return c===2&&(g.item?j.start={ctrl:!0,indexes:d(g.item(0))}:(j.start=f(!0),a.isCollapsed()||(j.end=f()))),j},this.moveToBookmark=function(a){function b(a){var b,c,d,f;b=e.getRoot();for(c=a.length-1;c>=0;c--)f=b.children,d=a[c],d<=f.length-1&&(b=f[d]);return b}function c(c){var e=a[c?"start":"end"],g,h,i;e&&(g=e.position>0,h=f.createTextRange(),h.moveToElementText(b(e.indexes)),offset=e.offset,offset!==i?(h.collapse(e.inside||g),h.moveStart("character",g?-offset:offset)):h.collapse(c),d.setEndPoint(c?"StartToStart":"EndToStart",h),c&&d.collapse(!0))}var d,f=e.doc.body;a.start&&(a.start.ctrl?(d=f.createControlRange(),d.addElement(b(a.start.indexes)),d.select()):(d=f.createTextRange(),c(!0),c(),d.select()))},this.addRange=function(b){function c(a){var b,c,g,n,o;g=e.create("a"),b=a?h:j,c=a?i:k,n=d.duplicate();if(b==l||b==l.documentElement)b=m,c=0;b.nodeType==3?(b.parentNode.insertBefore(g,b),n.moveToElementText(g),n.moveStart("character",c),e.remove(g),d.setEndPoint(a?"StartToStart":"EndToEnd",n)):(o=b.childNodes,o.length?(c>=o.length?e.insertAfter(g,o[o.length-1]):b.insertBefore(g,o[c]),n.moveToElementText(g)):(g=l.createTextNode("﻿"),b.appendChild(g),n.moveToElementText(g.parentNode),n.collapse(f)),d.setEndPoint(a?"StartToStart":"EndToEnd",n),e.remove(g))}var d,g,h,i,j,k,l=a.dom.doc,m=l.body;h=b.startContainer,i=b.startOffset,j=b.endContainer,k=b.endOffset,d=m.createTextRange();if(h==j&&h.nodeType==1&&i==k-1&&i==k-1)try{g=m.createControlRange(),g.addElement(h.childNodes[i]),g.select();return}catch(n){}c(!0),c(),d.select()},this.getRangeAt=c}tinymce.dom.TridentSelection=a}(),function(a){var b=a.each,c=a.DOM,d=a.isIE,e=a.isWebKit,f;a.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[],this.events=[]},add:function(e,f,g,h){var i,j=this,k=j.events,l;if(f instanceof Array)return l=[],b(f,function(a){l.push(j.add(e,a,g,h))}),l;if(e&&e.hasOwnProperty&&e instanceof Array)return l=[],b(e,function(a){a=c.get(a),l.push(j.add(a,f,g,h))}),l;e=c.get(e);if(!e)return;return i=function(b){if(j.disabled)return;return b=b||window.event,b&&d&&(b.target||(b.target=b.srcElement),a.extend(b,j._stoppers)),h?g.call(h,b):g(b)},f=="unload"?(a.unloads.unshift({func:i}),i):f=="init"?(j.domLoaded?i():j.inits.push(i),i):(k.push({obj:e,name:f,func:g,cfunc:i,scope:h}),j._add(e,f,i),g)},remove:function(a,d,e){var f=this,g=f.events,h=!1,i;return a&&a.hasOwnProperty&&a instanceof Array?(i=[],b(a,function(a){a=c.get(a),i.push(f.remove(a,d,e))}),i):(a=c.get(a),b(g,function(b,c){if(b.obj==a&&b.name==d&&(!e||b.func==e||b.cfunc==e))return g.splice(c,1),f._remove(a,d,b.cfunc),h=!0,!1}),h)},clear:function(a){var b=this,d=b.events,e,f;if(a){a=c.get(a);for(e=d.length-1;e>=0;e--)f=d[e],f.obj===a&&(b._remove(f.obj,f.name,f.cfunc),f.obj=f.cfunc=null,d.splice(e,1))}},cancel:function(a){return a?(this.stop(a),this.prevent(a)):!1},stop:function(a){return a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,!1},prevent:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,!1},destroy:function(){var a=this;b(a.events,function(b,c){a._remove(b.obj,b.name,b.cfunc),b.obj=b.cfunc=null}),a.events=[],a=null},_add:function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener?a.addEventListener(b,c,!1):a["on"+b]=c},_remove:function(a,b,c){if(a)try{a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener?a.removeEventListener(b,c,!1):a["on"+b]=null}catch(d){}},_pageInit:function(a){var c=this;if(c.domLoaded)return;c.domLoaded=!0,b(c.inits,function(a){a()}),c.inits=[]},_wait:function(a){var b=this,c=a.document;if(a.tinyMCE_GZ&&tinyMCE_GZ.loaded){b.domLoaded=1;return}c.attachEvent?(c.attachEvent("onreadystatechange",function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",arguments.callee),b._pageInit(a))}),c.documentElement.doScroll&&a==a.top&&function(){if(b.domLoaded)return;try{c.documentElement.doScroll("left")}catch(d){setTimeout(arguments.callee,0);return}b._pageInit(a)}()):c.addEventListener&&b._add(a,"DOMContentLoaded",function(){b._pageInit(a)}),b._add(a,"load",function(){b._pageInit(a)})},_stoppers:{preventDefault:function(){this.returnValue=!1},stopPropagation:function(){this.cancelBubble=!0}}}),f=a.dom.Event=new a.dom.EventUtils,f._wait(window),a.addUnload(function(){f.destroy()})}(tinymce),function(a){a.dom.Element=function(b,c){var d=this,e,f;d.settings=c=c||{},d.id=b,d.dom=e=c.dom||a.DOM,a.isIE||(f=e.get(d.id)),a.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(a){d[a]=function(){var c=[b],f;for(f=0;f<arguments.length;f++)c.push(arguments[f]);return c=e[a].apply(e,c),d.update(a),c}}),a.extend(d,{on:function(b,c,e){return a.dom.Event.add(d.id,b,c,e)},getXY:function(){return{x:parseInt(d.getStyle("left")),y:parseInt(d.getStyle("top"))}},getSize:function(){var a=e.get(d.id);return{w:parseInt(d.getStyle("width")||a.clientWidth),h:parseInt(d.getStyle("height")||a.clientHeight)}},moveTo:function(a,b){d.setStyles({left:a,top:b})},moveBy:function(a,b){var c=d.getXY();d.moveTo(c.x+a,c.y+b)},resizeTo:function(a,b){d.setStyles({width:a,height:b})},resizeBy:function(a,b){var c=d.getSize();d.resizeTo(c.w+a,c.h+b)},update:function(b){var f;if(a.isIE6&&c.blocker){b=b||"";if(b.indexOf("get")===0||b.indexOf("has")===0||b.indexOf("is")===0)return;if(b=="remove"){e.remove(d.blocker);return}d.blocker?f=e.get(d.blocker):(d.blocker=e.uniqueId(),f=e.add(c.container||e.getRoot(),"iframe",{id:d.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),e.setStyle(f,"opacity",0)),e.setStyles(f,{left:d.getStyle("left",1),top:d.getStyle("top",1),width:d.getStyle("width",1),height:d.getStyle("height",1),display:d.getStyle("display",1),zIndex:parseInt(d.getStyle("zIndex",1)||0)-1})}}})}}(tinymce),function(a){function b(a){return a.replace(/[\n\r]+/g,"")}var c=a.is,d=a.isIE,e=a.each;a.create("tinymce.dom.Selection",{Selection:function(b,c,d){var f=this;f.dom=b,f.win=c,f.serializer=d,e(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(b){f[b]=new a.util.Dispatcher(f)}),f.win.getSelection||(f.tridentSel=new a.dom.TridentSelection(f)),a.isIE&&b.boxModel&&this._fixIESelection(),a.addUnload(f.destroy,f)},setCursorLocation:function(a,b){var c=this,d=c.dom.createRng();d.setStart(a,b),d.setEnd(a,b),c.setRng(d),c.collapse(!1)},getContent:function(a){var b=this,d=b.getRng(),e=b.dom.create("body"),f=b.getSel(),g,h,i;return a=a||{},g=h="",a.get=!0,a.format=a.format||"html",a.forced_root_block="",b.onBeforeGetContent.dispatch(b,a),a.format=="text"?b.isCollapsed()?"":d.text||(f.toString?f.toString():""):(d.cloneContents?(i=d.cloneContents(),i&&e.appendChild(i)):c(d.item)||c(d.htmlText)?(e.innerHTML="<br>"+(d.item?d.item(0).outerHTML:d.htmlText),e.removeChild(e.firstChild)):e.innerHTML=d.toString(),/^\s/.test(e.innerHTML)&&(g=" "),/\s+$/.test(e.innerHTML)&&(h=" "),a.getInner=!0,a.content=b.isCollapsed()?"":g+b.serializer.serialize(e,a)+h,b.onGetContent.dispatch(b,a),a.content)},setContent:function(a,b){var c=this,d=c.getRng(),e,f=c.win.document,g,h;b=b||{format:"html"},b.set=!0,a=b.content=a,b.no_events||c.onBeforeSetContent.dispatch(c,b),a=b.content;if(d.insertNode){a+='<span id="__caret">_</span>',d.startContainer==f&&d.endContainer==f?f.body.innerHTML=a:(d.deleteContents(),f.body.childNodes.length==0?f.body.innerHTML=a:d.createContextualFragment?d.insertNode(d.createContextualFragment(a)):(g=f.createDocumentFragment(),h=f.createElement("div"),g.appendChild(h),h.outerHTML=a,d.insertNode(g))),e=c.dom.get("__caret"),d=f.createRange(),d.setStartBefore(e),d.setEndBefore(e),c.setRng(d),c.dom.remove("__caret");try{c.setRng(d)}catch(i){}}else d.item&&(f.execCommand("Delete",!1,null),d=c.getRng()),/^\s+/.test(a)?(d.pasteHTML('<span id="__mce_tmp">_</span>'+a),c.dom.remove("__mce_tmp")):d.pasteHTML(a);b.no_events||c.onSetContent.dispatch(c,b)},getStart:function(){var a=this.getRng(),b,c,d,e;if(a.duplicate||a.item){if(a.item)return a.item(0);d=a.duplicate(),d.collapse(1),b=d.parentElement(),c=e=a.parentElement();while(e=e.parentNode)if(e==b){b=c;break}return b}return b=a.startContainer,b.nodeType==1&&b.hasChildNodes()&&(b=b.childNodes[Math.min(b.childNodes.length-1,a.startOffset)]),b&&b.nodeType==3?b.parentNode:b},getEnd:function(){var a=this,b=a.getRng(),c,d;return b.duplicate||b.item?b.item?b.item(0):(b=b.duplicate(),b.collapse(0),c=b.parentElement(),c&&c.nodeName=="BODY"?c.lastChild||c:c):(c=b.endContainer,d=b.endOffset,c.nodeType==1&&c.hasChildNodes()&&(c=c.childNodes[d>0?d-1:d]),c&&c.nodeType==3?c.parentNode:c)},getBookmark:function(a,b){function c(a,b){var c=0;return e(f.select(a),function(a,d){a==b&&(c=d)}),c}var d=this,f=d.dom,g,h,i,j,k,l,m,n="﻿",o;if(a==2){function p(){function a(a,c){var f=a[c?"startContainer":"endContainer"],g=a[c?"startOffset":"endOffset"],h=[],i,j,k=0;if(f.nodeType==3){if(b)for(i=f.previousSibling;i&&i.nodeType==3;i=i.previousSibling)g+=i.nodeValue.length;h.push(g)}else j=f.childNodes,g>=j.length&&j.length&&(k=1,g=Math.max(0,j.length-1)),h.push(d.dom.nodeIndex(j[g],b)+k);for(;f&&f!=e;f=f.parentNode)h.push(d.dom.nodeIndex(f,b));return h}var c=d.getRng(!0),e=f.getRoot(),g={};return g.start=a(c,!0),d.isCollapsed()||(g.end=a(c)),g}return d.tridentSel?d.tridentSel.getBookmark(a):p()}if(a)return{rng:d.getRng()};g=d.getRng(),i=f.uniqueId(),j=tinyMCE.activeEditor.selection.isCollapsed(),o="overflow:hidden;line-height:0px";if(g.duplicate||g.item){if(!!g.item)return l=g.item(0),k=l.nodeName,{name:k,index:c(k,l)};h=g.duplicate();try{g.collapse(),g.pasteHTML('<span data-mce-type="bookmark" id="'+i+'_start" style="'+o+'">'+n+"</span>"),j||(h.collapse(!1),g.moveToElementText(h.parentElement()),g.compareEndPoints("StartToEnd",h)==0&&h.move("character",-1),h.pasteHTML('<span data-mce-type="bookmark" id="'+i+'_end" style="'+o+'">'+n+"</span>"))}catch(q){return null}}else{l=d.getNode(),k=l.nodeName;if(k=="IMG")return{name:k,index:c(k,l)};h=g.cloneRange(),j||(h.collapse(!1),h.insertNode(f.create("span",{"data-mce-type":"bookmark",id:i+"_end",style:o},n))),g.collapse(!0),g.insertNode(f.create("span",{"data-mce-type":"bookmark",id:i+"_start",style:o},n))}return d.moveToBookmark({id:i,keep:1}),{id:i}},moveToBookmark:function(b){var c=this,f=c.dom,g,h,i,j,k,l,m,n;if(b)if(b.start){i=f.createRng(),j=f.getRoot();function o(a){var c=b[a?"start":"end"],d,e,f,g;if(c){f=c[0];for(e=j,d=c.length-1;d>=1;d--){g=e.childNodes;if(c[d]>g.length-1)return;e=g[c[d]]}e.nodeType===3&&(f=Math.min(c[0],e.nodeValue.length)),e.nodeType===1&&(f=Math.min(c[0],e.childNodes.length)),a?i.setStart(e,f):i.setEnd(e,f)}return!0}if(c.tridentSel)return c.tridentSel.moveToBookmark(b);o(!0)&&o()&&c.setRng(i)}else if(b.id){function p(c){var d=f.get(b.id+"_"+c),g,h,i,j,o=b.keep;if(d){g=d.parentNode,c=="start"?(o?(g=d.firstChild,h=1):h=f.nodeIndex(d),k=l=g,m=n=h):(o?(g=d.firstChild,h=1):h=f.nodeIndex(d),l=g,n=h);if(!o){j=d.previousSibling,i=d.nextSibling,e(a.grep(d.childNodes),function(a){a.nodeType==3&&(a.nodeValue=a.nodeValue.replace(/\uFEFF/g,""))});while(d=f.get(b.id+"_"+c))f.remove(d,1);j&&i&&j.nodeType==i.nodeType&&j.nodeType==3&&!a.isOpera&&(h=j.nodeValue.length,j.appendData(i.nodeValue),f.remove(i),c=="start"?(k=l=j,m=n=h):(l=j,n=h))}}}function q(a){return f.isBlock(a)&&!a.innerHTML&&(a.innerHTML=d?" ":'<br data-mce-bogus="1" />'),a}p("start"),p("end"),k&&(i=f.createRng(),i.setStart(q(k),m),i.setEnd(q(l),n),c.setRng(i))}else b.name?c.select(f.select(b.name)[b.index]):b.rng&&c.setRng(b.rng)},select:function(b,c){var d=this,e=d.dom,f=e.createRng(),g;if(b){g=e.nodeIndex(b),f.setStart(b.parentNode,g),f.setEnd(b.parentNode,g+1);if(c){function h(b,c){var d=new a.dom.TreeWalker(b,b);do{if(b.nodeType==3&&a.trim(b.nodeValue).length!=0){c?f.setStart(b,0):f.setEnd(b,b.nodeValue.length);return}if(b.nodeName=="BR"){c?f.setStartBefore(b):f.setEndBefore(b);return}}while(b=c?d.next():d.prev())}h(b,1),h(b)}d.setRng(f)}return b},isCollapsed:function(){var a=this,b=a.getRng(),c=a.getSel();return!b||b.item?!1:b.compareEndPoints?b.compareEndPoints("StartToEnd",b)===0:!c||b.collapsed},collapse:function(a){var b=this,c=b.getRng(),d;c.item&&(d=c.item(0),c=b.win.document.body.createTextRange(),c.moveToElementText(d)),c.collapse(!!a),b.setRng(c)},getSel:function(){var a=this,b=this.win;return b.getSelection?b.getSelection():b.document.selection},getRng:function(b){var c=this,d,e,f,g=c.win.document;if(b&&c.tridentSel)return c.tridentSel.getRangeAt(0);try{if(d=c.getSel())e=d.rangeCount>0?d.getRangeAt(0):d.createRange?d.createRange():g.createRange()}catch(h){}return a.isIE&&e&&e.setStart&&g.selection.createRange().item&&(f=g.selection.createRange().item(0),e=g.createRange(),e.setStartBefore(f),e.setEndAfter(f)),e||(e=g.createRange?g.createRange():g.body.createTextRange()),c.selectedRange&&c.explicitRange&&(e.compareBoundaryPoints(e.START_TO_START,c.selectedRange)===0&&e.compareBoundaryPoints(e.END_TO_END,c.selectedRange)===0?e=c.explicitRange:(c.selectedRange=null,c.explicitRange=null)),e},setRng:function(a){var b,c=this;if(!c.tridentSel){b=c.getSel();if(b){c.explicitRange=a;try{b.removeAllRanges()}catch(d){}b.addRange(a),c.selectedRange=b.getRangeAt(0)}}else{if(a.cloneRange){c.tridentSel.addRange(a);return}try{a.select()}catch(d){}}},setNode:function(a){var b=this;return b.setContent(b.dom.getOuterHTML(a)),a},getNode:function(){var a=this,b=a.getRng(),c=a.getSel(),d,e=b.startContainer,f=b.endContainer;if(!b)return a.dom.getRoot();if(b.setStart){d=b.commonAncestorContainer;if(!b.collapsed){b.startContainer==b.endContainer&&b.endOffset-b.startOffset<2&&b.startContainer.hasChildNodes()&&(d=b.startContainer.childNodes[b.startOffset]);if(e.nodeType===3&&f.nodeType===3){function g(a,b){var c=a;while(a&&a.nodeType===3&&a.length===0)a=b?a.nextSibling:a.previousSibling;return a||c}e.length===b.startOffset?e=g(e.nextSibling,!0):e=e.parentNode,b.endOffset===0?f=g(f.previousSibling,!1):f=f.parentNode;if(e&&e===f)return e}}return d&&d.nodeType==3?d.parentNode:d}return b.item?b.item(0):b.parentElement()},getSelectedBlocks:function(b,c){var d=this,e=d.dom,f,g,h,i=[];f=e.getParent(b||d.getStart(),e.isBlock),g=e.getParent(c||d.getEnd(),e.isBlock),f&&i.push(f);if(f&&g&&f!=g){h=f;var j=new a.dom.TreeWalker(f,e.getRoot());while((h=j.next())&&h!=g)e.isBlock(h)&&i.push(h)}return g&&f!=g&&i.push(g),i},normalize:function(){function b(b){var f,g,h,i=c.dom,j=i.getRoot(),k;f=d[(b?"start":"end")+"Container"],g=d[(b?"start":"end")+"Offset"],f.nodeType===9&&(f=f.body,g=0);if(f===j&&f.hasChildNodes()){f=f.childNodes[Math.min(!b&&g>0?g-1:g,f.childNodes.length-1)],g=0;if(f.hasChildNodes()){k=f,h=new a.dom.TreeWalker(f,j);do{if(k.nodeType===3){g=b?0:k.nodeValue.length-1,f=k;break}if(k.nodeName==="BR"){g=i.nodeIndex(k),f=k.parentNode;break}}while(k=b?h.next():h.prev());e=!0}}e&&d["set"+(b?"Start":"End")](f,g)}var c=this,d,e;if(a.isIE)return;d=c.getRng(),b(!0),d.collapsed&&b(),e&&c.setRng(d)},destroy:function(b){var c=this;c.win=null,b||a.removeUnload(c.destroy)},_fixIESelection:function(){function a(a,b){var c=f.createTextRange();try{c.moveToPoint(a,b)}catch(d){c=null}return c}function b(b){var d;b.button?(d=a(b.x,b.y),d&&(d.compareEndPoints("StartToStart",h)>0?d.setEndPoint("StartToStart",h):d.setEndPoint("EndToEnd",h),d.select())):c()}function c(){var a=e.selection.createRange();h&&!a.item&&a.compareEndPoints("StartToEnd",a)===0&&h.select(),d.unbind(e,"mouseup",c),d.unbind(e,"mousemove",b),h=g=0}var d=this.dom,e=d.doc,f=e.body,g,h,i;e.documentElement.unselectable=!0,d.bind(e,["mousedown","contextmenu"],function(f){if(f.target.nodeName==="HTML"){g&&c(),i=e.documentElement;if(i.scrollHeight>i.clientHeight)return;g=1,h=a(f.x,f.y),h&&(d.bind(e,"mouseup",c),d.bind(e,"mousemove",b),d.win.focus(),h.select())}})}})}(tinymce),function(a){a.dom.Serializer=function(b,c,d){var e,f,g=a.isIE,h=a.each,i;return b.apply_source_formatting||(b.indent=!1),b.remove_trailing_brs=!0,c=c||a.DOM,d=d||new a.html.Schema(b),b.entity_encoding=b.entity_encoding||"named",e=new a.util.Dispatcher(self),f=new a.util.Dispatcher(self),i=new a.html.DomParser(b,d),i.addAttributeFilter("src,href,style",function(a,d){var e=a.length,f,g,h="data-mce-"+d,i=b.url_converter,j=b.url_converter_scope,k;while(e--)f=a[e],g=f.attributes.map[h],g!==k?(f.attr(d,g.length>0?g:null),f.attr(h,null)):(g=f.attributes.map[d],d==="style"?g=c.serializeStyle(c.parseStyle(g),f.name):i&&(g=i.call(j,g,d,f.name)),f.attr(d,g.length>0?g:null))}),i.addAttributeFilter("class",function(a,b){var c=a.length,d,e;while(c--)d=a[c],e=d.attr("class").replace(/\s*mce(Item\w+|Selected)\s*/g,""),d.attr("class",e.length>0?e:null)}),i.addAttributeFilter("data-mce-type",function(a,b,c){var d=a.length,e;while(d--)e=a[d],e.attributes.map["data-mce-type"]==="bookmark"&&!c.cleanup&&e.remove()}),i.addNodeFilter("script,style",function(a,b){function c(a){return a.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,"").replace(/\s*(\/\/\s*\]\]>|\/\/\s*-->|\]\]>|-->|\]\]-->)\s*$/g,"")}var d=a.length,e,f;while(d--)e=a[d],f=e.firstChild?e.firstChild.value:"",b==="script"?(e.attr("type",(e.attr("type")||"text/javascript").replace(/^mce\-/,"")),f.length>0&&(e.firstChild.value="// <![CDATA[\n"+c(f)+"\n// ]]>")):f.length>0&&(e.firstChild.value="<!--\n"+c(f)+"\n-->")}),i.addNodeFilter("#comment",function(a,b){var c=a.length,d;while(c--)d=a[c],d.value.indexOf("[CDATA[")===0?(d.name="#cdata",d.type=4,d.value=d.value.replace(/^\[CDATA\[|\]\]$/g,"")):d.value.indexOf("mce:protected ")===0&&(d.name="#text",d.type=3,d.raw=!0,d.value=unescape(d.value).substr(14))}),i.addNodeFilter("xml:namespace,input",function(a,b){var c=a.length,d;while(c--)d=a[c],d.type===7?d.remove():d.type===1&&b==="input"&&!("type"in d.attributes.map)&&d.attr("type","text")}),b.fix_list_elements&&i.addNodeFilter("ul,ol",function(a,b){var c=a.length,d,e;while(c--)d=a[c],e=d.parent,(e.name==="ul"||e.name==="ol")&&d.prev&&d.prev.name==="li"&&d.prev.append(d)}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(a,b){var c=a.length;while(c--)a[c].attr(b,null)}),{schema:d,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,onPreProcess:e,onPostProcess:f,serialize:function(j,k){var l,m,n,o,p;return g&&c.select("script,style,select,map").length>0?(p=j.innerHTML,j=j.cloneNode(!1),c.setHTML(j,p)):j=j.cloneNode(!0),l=j.ownerDocument.implementation,l.createHTMLDocument&&(m=l.createHTMLDocument(""),h(j.nodeName=="BODY"?j.childNodes:[j],function(a){m.body.appendChild(m.importNode(a,!0))}),j.nodeName!="BODY"?j=m.body.firstChild:j=m.body,n=c.doc,c.doc=m),k=k||{},k.format=k.format||"html",k.no_events||(k.node=j,e.dispatch(self,k)),o=new a.html.Serializer(b,d),k.content=o.serialize(i.parse(k.getInner?j.innerHTML:a.trim(c.getOuterHTML(j),k),k)),k.cleanup||(k.content=k.content.replace(/\uFEFF|\u200B/g,"")),k.no_events||f.dispatch(self,k),n&&(c.doc=n),k.node=null,k.content},addRules:function(a){d.addValidElements(a)},setRules:function(a){d.setValidElements(a)}}}}(tinymce),function(a){a.dom.ScriptLoader=function(b){function c(b,c){function d(){g.remove(k),h&&(h.onreadystatechange=h.onload=h=null),c()}function e(){typeof console!="undefined"&&console.log&&console.log("Failed to load: "+b)}var f=this,g=a.DOM,h,i,j,k;k=g.uniqueId();if(a.isIE6){i=new a.util.URI(b),j=location;if(i.host==j.hostname&&i.port==j.port&&i.protocol+":"==j.protocol&&i.protocol.toLowerCase()!="file"){a.util.XHR.send({url:a._addVer(i.getURI()),success:function(a){var b=g.create("script",{type:"text/javascript"});b.text=a,document.getElementsByTagName("head")[0].appendChild(b),g.remove(b),d()},error:e});return}}h=g.create("script",{id:k,type:"text/javascript",src:a._addVer(b)}),a.isIE||(h.onload=d),h.onerror=e,a.isOpera||(h.onreadystatechange=function(){var a=h.readyState;(a=="complete"||a=="loaded")&&d()}),(document.getElementsByTagName("head")[0]||document.body).appendChild(h)}var d=0,e=1,f=2,g={},h=[],i={},j=[],k=0,l;this.isDone=function(a){return g[a]==f},this.markDone=function(a){g[a]=f},this.add=this.load=function(a,b,c){var e,f=g[a];f==l&&(h.push(a),g[a]=d),b&&(i[a]||(i[a]=[]),i[a].push({func:b,scope:c||this}))},this.loadQueue=function(a,b){this.loadScripts(h,a,b)},this.loadScripts=function(b,d,h){function m(b){a.each(i[b],function(a){a.func.call(a.scope)}),i[b]=l}var n;j.push({func:d,scope:h||this}),n=function(){var d=a.grep(b);b.length=0,a.each(d,function(a){if(g[a]==f){m(a);return}g[a]!=e&&(g[a]=e,k++,c(a,function(){g[a]=f,k--,m(a),n()}))}),k||(a.each(j,function(a){a.func.call(a.scope)}),j.length=0)},n()}},a.ScriptLoader=new a.dom.ScriptLoader}(tinymce),tinymce.dom.TreeWalker=function(a,b){function c(a,c,d,e){var f,g;if(a){if(!e&&a[c])return a[c];if(a!=b){f=a[d];if(f)return f;for(g=a.parentNode;g&&g!=b;g=g.parentNode){f=g[d];if(f)return f}}}}var d=a;this.current=function(){return d},this.next=function(a){return d=c(d,"firstChild","nextSibling",a)},this.prev=function(a){return d=c(d,"lastChild","previousSibling",a)}},function(a){a.dom.RangeUtils=function(b){var c="﻿";this.walk=function(c,d){function e(a){var b;return b=a[0],b.nodeType===3&&b===i&&j>=b.nodeValue.length&&a.splice(0,1),b=a[a.length-1],l===0&&a.length>0&&b===k&&b.nodeType===3&&a.splice(a.length-1,1),a}function f(a,b,c){var d=[];for(;a&&a!=c;a=a[b])d.push(a);return d}function g(a,b){do{if(a.parentNode==b)return a;a=a.parentNode}while(a)}function h(a,b,c){var g=c?"nextSibling":"previousSibling";for(p=a,q=p.parentNode;p&&p!=b;p=q)q=p.parentNode,r=f(p==a?p:p[g],g),r.length&&(c||r.reverse(),d(e(r)))}var i=c.startContainer,j=c.startOffset,k=c.endContainer,l=c.endOffset,m,n,o,p,q,r,s;s=b.select("td.mceSelected,th.mceSelected");if(s.length>0){a.each(s,function(a){d([a])});return}i.nodeType==1&&i.hasChildNodes()&&(i=i.childNodes[j]),k.nodeType==1&&k.hasChildNodes()&&(k=k.childNodes[Math.min(l-1,k.childNodes.length-1)]);if(i==k)return d(e([i]));m=b.findCommonAncestor(i,k);for(p=i;p;p=p.parentNode){if(p===k)return h(i,m,!0);if(p===m)break}for(p=k;p;p=p.parentNode){if(p===i)return h(k,m);if(p===m)break}n=g(i,m)||i,o=g(k,m)||k,h(i,n,!0),r=f(n==i?n:n.nextSibling,"nextSibling",o==k?o.nextSibling:o),r.length&&d(e(r)),h(k,o)},this.split=function(a){function b(a,b){return a.splitText(b)}var c=a.startContainer,d=a.startOffset,e=a.endContainer,f=a.endOffset;return c==e&&c.nodeType==3?d>0&&d<c.nodeValue.length&&(e=b(c,d),c=e.previousSibling,f>d?(f-=d,c=e=b(e,f).previousSibling,f=e.nodeValue.length,d=0):f=0):(c.nodeType==3&&d>0&&d<c.nodeValue.length&&(c=b(c,d),d=0),e.nodeType==3&&f>0&&f<e.nodeValue.length&&(e=b(e,f).previousSibling,f=e.nodeValue.length)),{startContainer:c,startOffset:d,endContainer:e,endOffset:f}}},a.dom.RangeUtils.compareRanges=function(a,b){if(a&&b){if(!a.item&&!a.duplicate)return a.startContainer==b.startContainer&&a.startOffset==b.startOffset;if(a.item&&b.item&&a.item(0)===b.item(0))return!0;if(a.isEqual&&b.isEqual&&b.isEqual(a))return!0}return!1}}(tinymce),function(a){var b=a.dom.Event,c=a.each;a.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(d,e){var f=this,g=d.root,h=d.items,i=d.enableUpDown,j=d.enableLeftRight||!d.enableUpDown,k=d.excludeFromTabOrder,l,m,n,o,p;e=e||a.DOM,l=function(a){p=a.target.id},m=function(a){e.setAttrib(a.target.id,"tabindex","-1")},o=function(a){var b=e.get(p);e.setAttrib(b,"tabindex","0"),b.focus()},f.focus=function(){e.get(p).focus()},f.destroy=function(){c(h,function(a){e.unbind(e.get(a.id),"focus",l),e.unbind(e.get(a.id),"blur",m)}),e.unbind(e.get(g),"focus",o),e.unbind(e.get(g),"keydown",n),h=e=g=f.focus=l=m=n=o=null,f.destroy=function(){}},f.moveFocus=function(a,g){var i=-1,j=f.controls,k;if(!p)return;c(h,function(a,b){if(a.id===p)return i=b,!1}),i+=a,i<0?i=h.length-1:i>=h.length&&(i=0),k=h[i],e.setAttrib(p,"tabindex","-1"),e.setAttrib(k.id,"tabindex","0"),e.get(k.id).focus(),d.actOnFocus&&d.onAction(k.id),g&&b.cancel(g)},n=function(a){var c=37,e=39,g=38,h=40,k=27,l=14,m=13,n=32;switch(a.keyCode){case c:j&&f.moveFocus(-1);break;case e:j&&f.moveFocus(1);break;case g:i&&f.moveFocus(-1);break;case h:i&&f.moveFocus(1);break;case k:d.onCancel&&(d.onCancel(),b.cancel(a));break;case l:case m:case n:d.onAction&&(d.onAction(p),b.cancel(a))}},c(h,function(a,b){var c;a.id||(a.id=e.uniqueId("_mce_item_")),k?(e.bind(a.id,"blur",m),c="-1"):c=b===0?"0":"-1",e.setAttrib(a.id,"tabindex",c),e.bind(e.get(a.id),"focus",l)}),h[0]&&(p=h[0].id),e.setAttrib(g,"tabindex","-1"),e.bind(e.get(g),"focus",o),e.bind(e.get(g),"keydown",n)}})}(tinymce),function(a){var b=a.DOM,c=a.is;a.create("tinymce.ui.Control",{Control:function(b,c,d){this.id=b,this.settings=c=c||{},this.rendered=!1,this.onRender=new a.util.Dispatcher(this),this.classPrefix="",this.scope=c.scope||this,this.disabled=0,this.active=0,this.editor=d},setAriaProperty:function(a,c){var d=b.get(this.id+"_aria")||b.get(this.id);d&&b.setAttrib(d,"aria-"+a,!!c)},focus:function(){b.get(this.id).focus()},setDisabled:function(a){a!=this.disabled&&(this.setAriaProperty("disabled",a),this.setState("Disabled",a),this.setState("Enabled",!a),this.disabled=a)},isDisabled:function(){return this.disabled},setActive:function(a){a!=this.active&&(this.setState("Active",a),this.active=a,this.setAriaProperty("pressed",a))},isActive:function(){return this.active},setState:function(a,c){var d=b.get(this.id);a=this.classPrefix+a,c?b.addClass(d,a):b.removeClass(d,a)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(a){b.setHTML(a,this.renderHTML())},postRender:function(){var a=this,b;c(a.disabled)&&(b=a.disabled,a.disabled=-1,a.setDisabled(b)),c(a.active)&&(b=a.active,a.active=-1,a.setActive(b))},remove:function(){b.remove(this.id),this.destroy()},destroy:function(){a.dom.Event.clear(this.id)}})}(tinymce),tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(a,b,c){this.parent(a,b,c),this.controls=[],this.lookup={}},add:function(a){return this.lookup[a.id]=a,this.controls.push(a),a},get:function(a){return this.lookup[a]}}),tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(a,b){this.parent(a,b),this.classPrefix="mceSeparator",this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}}),function(a){var b=a.is,c=a.DOM,d=a.each,e=a.walk;a.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(a,b){this.parent(a,b),this.classPrefix="mceMenuItem"},setSelected:function(a){this.setState("Selected",a),this.setAriaProperty("checked",!!a),this.selected=a},isSelected:function(){return this.selected},postRender:function(){var a=this;a.parent(),b(a.selected)&&a.setSelected(a.selected)}})}(tinymce),function(a){var b=a.is,c=a.DOM,d=a.each,e=a.walk;a.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(b,c){var d=this;d.parent(b,c),d.items={},d.collapsed=!1,d.menuCount=0,d.onAddItem=new a.util.Dispatcher(this)},expand:function(a){var b=this;a&&e(b,function(a){a.expand&&a.expand()},"items",b),b.collapsed=!1},collapse:function(a){var b=this;a&&e(b,function(a){a.collapse&&a.collapse()},"items",b),b.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(b){return b.settings||(b=new a.ui.MenuItem(b.id||c.uniqueId(),b)),this.onAddItem.dispatch(this,b),this.items[b.id]=b},addSeparator:function(){return this.add({separator:!0})},addMenu:function(a){return a
.collapse||(a=this.createMenu(a)),this.menuCount++,this.add(a)},hasMenus:function(){return this.menuCount!==0},remove:function(a){delete this.items[a.id]},removeAll:function(){var a=this;e(a,function(a){a.removeAll?a.removeAll():a.remove(),a.destroy()},"items",a),a.items={}},createMenu:function(b){var d=new a.ui.Menu(b.id||c.uniqueId(),b);return d.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),d}})}(tinymce),function(a){var b=a.is,c=a.DOM,d=a.each,e=a.dom.Event,f=a.dom.Element;a.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(d,e){e=e||{},e.container=e.container||c.doc.body,e.offset_x=e.offset_x||0,e.offset_y=e.offset_y||0,e.vp_offset_x=e.vp_offset_x||0,e.vp_offset_y=e.vp_offset_y||0,b(e.icons)&&!e.icons&&(e["class"]+=" mceNoIcons"),this.parent(d,e),this.onShowMenu=new a.util.Dispatcher(this),this.onHideMenu=new a.util.Dispatcher(this),this.classPrefix="mceMenu"},createMenu:function(b){var d=this,e=d.settings,f;return b.container=b.container||e.container,b.parent=d,b.constrain=b.constrain||e.constrain,b["class"]=b["class"]||e["class"],b.vp_offset_x=b.vp_offset_x||e.vp_offset_x,b.vp_offset_y=b.vp_offset_y||e.vp_offset_y,b.keyboard_focus=e.keyboard_focus,f=new a.ui.DropMenu(b.id||c.uniqueId(),b),f.onAddItem.add(d.onAddItem.dispatch,d.onAddItem),f},focus:function(){var a=this;a.keyboardNav&&a.keyboardNav.focus()},update:function(){var a=this,b=a.settings,d=c.get("menu_"+a.id+"_tbl"),e=c.get("menu_"+a.id+"_co"),f,g;f=b.max_width?Math.min(d.clientWidth,b.max_width):d.clientWidth,g=b.max_height?Math.min(d.clientHeight,b.max_height):d.clientHeight,c.boxModel?a.element.setStyles({width:f,height:g}):a.element.setStyles({width:f+2,height:g+2}),b.max_width&&c.setStyle(e,"width",f),b.max_height&&(c.setStyle(e,"height",g),d.clientHeight<b.max_height&&c.setStyle(e,"overflow","hidden"))},showMenu:function(b,g,h){var i=this,j=i.settings,k,l=c.getViewPort(),m,n,o,p,q=2,r,s,t=i.classPrefix;i.collapse(1);if(i.isMenuVisible)return;i.rendered?k=c.get("menu_"+i.id):(k=c.add(i.settings.container,i.renderNode()),d(i.items,function(a){a.postRender()}),i.element=new f("menu_"+i.id,{blocker:1,container:j.container})),a.isOpera||c.setStyles(k,{left:-65535,top:-65535}),c.show(k),i.update(),b+=j.offset_x||0,g+=j.offset_y||0,l.w-=4,l.h-=4,j.constrain&&(m=k.clientWidth-q,n=k.clientHeight-q,o=l.x+l.w,p=l.y+l.h,b+j.vp_offset_x+m>o&&(b=h?h-m:Math.max(0,o-j.vp_offset_x-m)),g+j.vp_offset_y+n>p&&(g=Math.max(0,p-j.vp_offset_y-n))),c.setStyles(k,{left:b,top:g}),i.element.update(),i.isMenuVisible=1,i.mouseClickFunc=e.add(k,"click",function(a){var b;a=a.target;if(a&&(a=c.getParent(a,"tr"))&&!c.hasClass(a,t+"ItemSub")){b=i.items[a.id];if(b.isDisabled())return;r=i;while(r)r.hideMenu&&r.hideMenu(),r=r.settings.parent;return b.settings.onclick&&b.settings.onclick(a),e.cancel(a)}}),i.hasMenus()&&(i.mouseOverFunc=e.add(k,"mouseover",function(a){var b,d,e;a=a.target;if(a&&(a=c.getParent(a,"tr"))){b=i.items[a.id],i.lastMenu&&i.lastMenu.collapse(1);if(b.isDisabled())return;a&&c.hasClass(a,t+"ItemSub")&&(d=c.getRect(a),b.showMenu(d.x+d.w-q,d.y-q,d.x),i.lastMenu=b,c.addClass(c.get(b.id).firstChild,t+"ItemActive"))}})),e.add(k,"keydown",i._keyHandler,i),i.onShowMenu.dispatch(i),j.keyboard_focus&&i._setupKeyboardNav()},hideMenu:function(a){var b=this,d=c.get("menu_"+b.id),f;if(!b.isMenuVisible)return;b.keyboardNav&&b.keyboardNav.destroy(),e.remove(d,"mouseover",b.mouseOverFunc),e.remove(d,"click",b.mouseClickFunc),e.remove(d,"keydown",b._keyHandler),c.hide(d),b.isMenuVisible=0,a||b.collapse(1),b.element&&b.element.hide(),(f=c.get(b.id))&&c.removeClass(f.firstChild,b.classPrefix+"ItemActive"),b.onHideMenu.dispatch(b)},add:function(a){var b=this,d;return a=b.parent(a),b.isRendered&&(d=c.get("menu_"+b.id))&&b._add(c.select("tbody",d)[0],a),a},collapse:function(a){this.parent(a),this.hideMenu(1)},remove:function(a){return c.remove(a.id),this.destroy(),this.parent(a)},destroy:function(){var a=this,b=c.get("menu_"+a.id);a.keyboardNav&&a.keyboardNav.destroy(),e.remove(b,"mouseover",a.mouseOverFunc),e.remove(c.select("a",b),"focus",a.mouseOverFunc),e.remove(b,"click",a.mouseClickFunc),e.remove(b,"keydown",a._keyHandler),a.element&&a.element.remove(),c.remove(b)},renderNode:function(){var a=this,b=a.settings,e,g,h,i;return i=c.create("div",{role:"listbox",id:"menu_"+a.id,"class":b["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"}),a.settings.parent&&c.setAttrib(i,"aria-parent","menu_"+a.settings.parent.id),h=c.add(i,"div",{role:"presentation",id:"menu_"+a.id+"_co","class":a.classPrefix+(b["class"]?" "+b["class"]:"")}),a.element=new f("menu_"+a.id,{blocker:1,container:b.container}),b.menu_line&&c.add(h,"span",{"class":a.classPrefix+"Line"}),e=c.add(h,"table",{role:"presentation",id:"menu_"+a.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),g=c.add(e,"tbody"),d(a.items,function(b){a._add(g,b)}),a.rendered=!0,i},_setupKeyboardNav:function(){var b,d,e=this;b=c.select("#menu_"+e.id)[0],d=c.select("a[role=option]","menu_"+e.id),d.splice(0,0,b),e.keyboardNav=new a.ui.KeyboardNavigation({root:"menu_"+e.id,items:d,onCancel:function(){e.hideMenu()},enableUpDown:!0}),b.focus()},_keyHandler:function(a){var b=this,c;switch(a.keyCode){case 37:b.settings.parent&&(b.hideMenu(),b.settings.parent.focus(),e.cancel(a));break;case 39:b.mouseOverFunc&&b.mouseOverFunc(a)}},_add:function(a,b){var d,e=b.settings,f,g,h,i=this.classPrefix,j;if(e.separator){g=c.add(a,"tr",{id:b.id,"class":i+"ItemSeparator"}),c.add(g,"td",{"class":i+"ItemSeparator"}),(d=g.previousSibling)&&c.addClass(d,"mceLast");return}d=g=c.add(a,"tr",{id:b.id,"class":i+"Item "+i+"ItemEnabled"}),d=h=c.add(d,e.titleItem?"th":"td"),d=f=c.add(d,"a",{id:b.id+"_aria",role:e.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),e.parent&&(c.setAttrib(f,"aria-haspopup","true"),c.setAttrib(f,"aria-owns","menu_"+b.id)),c.addClass(h,e["class"]),j=c.add(d,"span",{"class":"mceIcon"+(e.icon?" mce_"+e.icon:"")}),e.icon_src&&c.add(j,"img",{src:e.icon_src}),d=c.add(d,e.element||"span",{"class":"mceText",title:b.settings.title},b.settings.title),b.settings.style&&c.setAttrib(d,"style",b.settings.style),a.childNodes.length==1&&c.addClass(g,"mceFirst"),(d=g.previousSibling)&&c.hasClass(d,i+"ItemSeparator")&&c.addClass(g,"mceFirst"),b.collapse&&c.addClass(g,i+"ItemSub"),(d=g.previousSibling)&&c.removeClass(d,"mceLast"),c.addClass(g,"mceLast")}})}(tinymce),function(a){var b=a.DOM;a.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(a,b,c){this.parent(a,b,c),this.classPrefix="mceButton"},renderHTML:function(){var a=this.classPrefix,c=this.settings,d,e;return e=b.encode(c.label||""),d='<a role="button" id="'+this.id+'" href="javascript:;" class="'+a+" "+a+"Enabled "+c["class"]+(e?" "+a+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+b.encode(c.title)+'">',c.image&&(!this.editor||!this.editor.forcedHighContrastMode)?d+='<img class="mceIcon" src="'+c.image+'" alt="'+b.encode(c.title)+'" />'+e:d+='<span class="mceIcon '+c["class"]+'"></span>'+(e?'<span class="'+a+'Label">'+e+"</span>":""),d+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+c.title+"</span>",d+="</a>",d},postRender:function(){var b=this,c=b.settings;a.dom.Event.add(b.id,"click",function(a){if(!b.isDisabled())return c.onclick.call(c.scope,a)})}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each,e=a.util.Dispatcher;a.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(b,c,d){var f=this;f.parent(b,c,d),f.items=[],f.onChange=new e(f),f.onPostRender=new e(f),f.onAdd=new e(f),f.onRenderMenu=new a.util.Dispatcher(this),f.classPrefix="mceListBox"},select:function(a){var b=this,c,e;if(a==undefined)return b.selectByIndex(-1);a&&a.call?e=a:e=function(b){return b==a},a!=b.selectedValue&&(d(b.items,function(a,d){if(e(a.value))return c=1,b.selectByIndex(d),!1}),c||b.selectByIndex(-1))},selectByIndex:function(a){var c=this,d,e,f;a!=c.selectedIndex&&(d=b.get(c.id+"_text"),f=b.get(c.id+"_voiceDesc"),e=c.items[a],e?(c.selectedValue=e.value,c.selectedIndex=a,b.setHTML(d,b.encode(e.title)),b.setHTML(f,c.settings.title+" - "+e.title),b.removeClass(d,"mceTitle"),b.setAttrib(c.id,"aria-valuenow",e.title)):(b.setHTML(d,b.encode(c.settings.title)),b.setHTML(f,b.encode(c.settings.title)),b.addClass(d,"mceTitle"),c.selectedValue=c.selectedIndex=null,b.setAttrib(c.id,"aria-valuenow",c.settings.title)),d=0)},add:function(b,c,d){var e=this;d=d||{},d=a.extend(d,{title:b,value:c}),e.items.push(d),e.onAdd.dispatch(e,d)},getLength:function(){return this.items.length},renderHTML:function(){var a="",c=this,d=c.settings,e=c.classPrefix;return a='<span role="listbox" aria-haspopup="true" aria-labelledby="'+c.id+'_voiceDesc" aria-describedby="'+c.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+c.id+'" cellpadding="0" cellspacing="0" class="'+e+" "+e+"Enabled"+(d["class"]?" "+d["class"]:"")+'"><tbody><tr>',a+="<td>"+b.createHTML("span",{id:c.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},c.settings.title),a+=b.createHTML("a",{id:c.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},b.encode(c.settings.title))+"</td>",a+="<td>"+b.createHTML("a",{id:c.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span></span>')+"</td>",a+="</tr></tbody></table></span>",a},showMenu:function(){var e=this,f,g=b.get(this.id),h;if(e.isDisabled()||e.items.length==0)return;if(e.menu&&e.menu.isMenuVisible)return e.hideMenu();e.isMenuRendered||(e.renderMenu(),e.isMenuRendered=!0),f=b.getPos(g),h=e.menu,h.settings.offset_x=f.x,h.settings.offset_y=f.y,h.settings.keyboard_focus=!a.isOpera,e.oldID&&h.items[e.oldID].setSelected(0),d(e.items,function(a){a.value===e.selectedValue&&(h.items[a.id].setSelected(1),e.oldID=a.id)}),h.showMenu(0,g.clientHeight),c.add(b.doc,"mousedown",e.hideMenu,e),b.addClass(e.id,e.classPrefix+"Selected")},hideMenu:function(a){var d=this;if(d.menu&&d.menu.isMenuVisible){b.removeClass(d.id,d.classPrefix+"Selected");if(!(!a||a.type!="mousedown"||a.target.id!=d.id+"_text"&&a.target.id!=d.id+"_open"))return;if(!a||!b.getParent(a.target,".mceMenu"))b.removeClass(d.id,d.classPrefix+"Selected"),c.remove(b.doc,"mousedown",d.hideMenu,d),d.menu.hideMenu()}},renderMenu:function(){var a=this,c;c=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":a.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150}),c.onHideMenu.add(function(){a.hideMenu(),a.focus()}),c.add({title:a.settings.title,"class":"mceMenuItemTitle",onclick:function(){a.settings.onselect("")!==!1&&a.select("")}}),d(a.items,function(d){d.value===undefined?c.add({title:d.title,role:"option","class":"mceMenuItemTitle",onclick:function(){a.settings.onselect("")!==!1&&a.select("")}}):(d.id=b.uniqueId(),d.role="option",d.onclick=function(){a.settings.onselect(d.value)!==!1&&a.select(d.value)},c.add(d))}),a.onRenderMenu.dispatch(a,c),a.menu=c},postRender:function(){var d=this,e=d.classPrefix;c.add(d.id,"click",d.showMenu,d),c.add(d.id,"keydown",function(a){a.keyCode==32&&(d.showMenu(a),c.cancel(a))}),c.add(d.id,"focus",function(){d._focused||(d.keyDownHandler=c.add(d.id,"keydown",function(a){a.keyCode==40&&(d.showMenu(),c.cancel(a))}),d.keyPressHandler=c.add(d.id,"keypress",function(a){var b;a.keyCode==13&&(b=d.selectedValue,d.selectedValue=null,c.cancel(a),d.settings.onselect(b))})),d._focused=1}),c.add(d.id,"blur",function(){c.remove(d.id,"keydown",d.keyDownHandler),c.remove(d.id,"keypress",d.keyPressHandler),d._focused=0});if(a.isIE6||!b.boxModel)c.add(d.id,"mouseover",function(){b.hasClass(d.id,e+"Disabled")||b.addClass(d.id,e+"Hover")}),c.add(d.id,"mouseout",function(){b.hasClass(d.id,e+"Disabled")||b.removeClass(d.id,e+"Hover")});d.onPostRender.dispatch(d,b.get(d.id))},destroy:function(){this.parent(),c.clear(this.id+"_text"),c.clear(this.id+"_open")}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each,e=a.util.Dispatcher;a.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(a,b){this.parent(a,b),this.classPrefix="mceNativeListBox"},setDisabled:function(a){b.get(this.id).disabled=a,this.setAriaProperty("disabled",a)},isDisabled:function(){return b.get(this.id).disabled},select:function(a){var b=this,c,e;if(a==undefined)return b.selectByIndex(-1);a&&a.call?e=a:e=function(b){return b==a},a!=b.selectedValue&&(d(b.items,function(a,d){if(e(a.value))return c=1,b.selectByIndex(d),!1}),c||b.selectByIndex(-1))},selectByIndex:function(a){b.get(this.id).selectedIndex=a+1,this.selectedValue=this.items[a]?this.items[a].value:null},add:function(a,c,d){var e,f=this;d=d||{},d.value=c,f.isRendered()&&b.add(b.get(this.id),"option",d,a),e={title:a,value:c,attribs:d},f.items.push(e),f.onAdd.dispatch(f,e)},getLength:function(){return this.items.length},renderHTML:function(){var a,c=this;return a=b.createHTML("option",{value:""},"-- "+c.settings.title+" --"),d(c.items,function(c){a+=b.createHTML("option",{value:c.value},c.title)}),a=b.createHTML("select",{id:c.id,"class":"mceNativeListBox","aria-labelledby":c.id+"_aria"},a),a+=b.createHTML("span",{id:c.id+"_aria",style:"display: none"},c.settings.title),a},postRender:function(){function d(a){var b=e.items[a.target.selectedIndex-1];b&&(b=b.value)&&(e.onChange.dispatch(e,b),e.settings.onselect&&e.settings.onselect(b))}var e=this,f,g=!0;e.rendered=!0,c.add(e.id,"change",d),c.add(e.id,"keydown",function(b){var h;c.remove(e.id,"change",f),g=!1,h=c.add(e.id,"blur",function(){if(g)return;g=!0,c.add(e.id,"change",d),c.remove(e.id,"blur",h)});if(!(!a.isWebKit||b.keyCode!=37&&b.keyCode!=39))return c.prevent(b);if(b.keyCode==13||b.keyCode==32)return d(b),c.cancel(b)}),e.onPostRender.dispatch(e,b.get(e.id))}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each;a.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(c,d,e){this.parent(c,d,e),this.onRenderMenu=new a.util.Dispatcher(this),d.menu_container=d.menu_container||b.doc.body},showMenu:function(){var a=this,d,e,f=b.get(a.id),g;if(a.isDisabled())return;a.isMenuRendered||(a.renderMenu(),a.isMenuRendered=!0);if(a.isMenuVisible)return a.hideMenu();d=b.getPos(a.settings.menu_container),e=b.getPos(f),g=a.menu,g.settings.offset_x=e.x,g.settings.offset_y=e.y,g.settings.vp_offset_x=e.x,g.settings.vp_offset_y=e.y,g.settings.keyboard_focus=a._focused,g.showMenu(0,f.clientHeight),c.add(b.doc,"mousedown",a.hideMenu,a),a.setState("Selected",1),a.isMenuVisible=1},renderMenu:function(){var a=this,b;b=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:a.settings.icons}),b.onHideMenu.add(function(){a.hideMenu(),a.focus()}),a.onRenderMenu.dispatch(a,b),a.menu=b},hideMenu:function(a){var d=this;if(a&&a.type=="mousedown"&&b.getParent(a.target,function(a){return a.id===d.id||a.id===d.id+"_open"}))return;if(!a||!b.getParent(a.target,".mceMenu"))d.setState("Selected",0),c.remove(b.doc,"mousedown",d.hideMenu,d),d.menu&&d.menu.hideMenu();d.isMenuVisible=0},postRender:function(){var a=this,b=a.settings;c.add(a.id,"click",function(){a.isDisabled()||(b.onclick&&b.onclick(a.value),a.showMenu())})}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each;a.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(a,b,c){this.parent(a,b,c),this.classPrefix="mceSplitButton"},renderHTML:function(){var a,c=this,d=c.settings,e;return a="<tbody><tr>",d.image?e=b.createHTML("img ",{src:d.image,role:"presentation","class":"mceAction "+d["class"]}):e=b.createHTML("span",{"class":"mceAction "+d["class"]},""),e+=b.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:c.id+"_voice",style:"display:none;"},d.title),a+="<td >"+b.createHTML("a",{role:"button",id:c.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+d["class"],onclick:"return false;",onmousedown:"return false;",title:d.title},e)+"</td>",e=b.createHTML("span",{"class":"mceOpen "+d["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span>'),a+="<td >"+b.createHTML("a",{role:"button",id:c.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+d["class"],onclick:"return false;",onmousedown:"return false;",title:d.title},e)+"</td>",a+="</tr></tbody>",a=b.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+d["class"],cellpadding:"0",cellspacing:"0",title:d.title},a),b.createHTML("div",{id:c.id,role:"button",tabindex:"0","aria-labelledby":c.id+"_voice","aria-haspopup":"true"},a)},postRender:function(){var d=this,e=d.settings,f;e.onclick&&(f=function(a){d.isDisabled()||(e.onclick(d.value),c.cancel(a))},c.add(d.id+"_action","click",f),c.add(d.id,["click","keydown"],function(a){var b=32,e=14,g=13,h=38,i=40;if((a.keyCode===32||a.keyCode===13||a.keyCode===14)&&!a.altKey&&!a.ctrlKey&&!a.metaKey)f(),c.cancel(a);else if(a.type==="click"||a.keyCode===i)d.showMenu(),c.cancel(a)})),c.add(d.id+"_open","click",function(a){d.showMenu(),c.cancel(a)}),c.add([d.id,d.id+"_open"],"focus",function(){d._focused=1}),c.add([d.id,d.id+"_open"],"blur",function(){d._focused=0});if(a.isIE6||!b.boxModel)c.add(d.id,"mouseover",function(){b.hasClass(d.id,"mceSplitButtonDisabled")||b.addClass(d.id,"mceSplitButtonHover")}),c.add(d.id,"mouseout",function(){b.hasClass(d.id,"mceSplitButtonDisabled")||b.removeClass(d.id,"mceSplitButtonHover")})},destroy:function(){this.parent(),c.clear(this.id+"_action"),c.clear(this.id+"_open"),c.clear(this.id)}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.is,e=a.each;a.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(b,c,d){var e=this;e.parent(b,c,d),e.settings=c=a.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},e.settings),e.onShowMenu=new a.util.Dispatcher(e),e.onHideMenu=new a.util.Dispatcher(e),e.value=c.default_color},showMenu:function(){var a=this,d,e,f,g;if(a.isDisabled())return;a.isMenuRendered||(a.renderMenu(),a.isMenuRendered=!0);if(a.isMenuVisible)return a.hideMenu();f=b.get(a.id),b.show(a.id+"_menu"),b.addClass(f,"mceSplitButtonSelected"),g=b.getPos(f),b.setStyles(a.id+"_menu",{left:g.x,top:g.y+f.clientHeight,zIndex:2e5}),f=0,c.add(b.doc,"mousedown",a.hideMenu,a),a.onShowMenu.dispatch(a),a._focused&&(a._keyHandler=c.add(a.id+"_menu","keydown",function(b){b.keyCode==27&&a.hideMenu()}),b.select("a",a.id+"_menu")[0].focus()),a.isMenuVisible=1},hideMenu:function(a){var d=this;if(d.isMenuVisible){if(a&&a.type=="mousedown"&&b.getParent(a.target,function(a){return a.id===d.id+"_open"}))return;if(!a||!b.getParent(a.target,".mceSplitButtonMenu"))b.removeClass(d.id,"mceSplitButtonSelected"),c.remove(b.doc,"mousedown",d.hideMenu,d),c.remove(d.id+"_menu","keydown",d._keyHandler),b.hide(d.id+"_menu");d.isMenuVisible=0,d.onHideMenu.dispatch()}},renderMenu:function(){var f=this,g,h=0,i=f.settings,j,k,l,m,n;return m=b.add(i.menu_container,"div",{role:"listbox",id:f.id+"_menu","class":i.menu_class+" "+i["class"],style:"position:absolute;left:0;top:-1000px;"}),g=b.add(m,"div",{"class":i["class"]+" mceSplitButtonMenu"}),b.add(g,"span",{"class":"mceMenuLine"}),j=b.add(g,"table",{role:"presentation","class":"mceColorSplitMenu"}),k=b.add(j,"tbody"),h=0,e(d(i.colors,"array")?i.colors:i.colors.split(","),function(a){a=a.replace(/^#/,""),h--||(l=b.add(k,"tr"),h=i.grid_width-1),j=b.add(l,"td"),j=b.add(j,"a",{role:"option",href:"javascript:;",style:{backgroundColor:"#"+a},title:f.editor.getLang("colors."+a,a),"data-mce-color":"#"+a}),f.editor.forcedHighContrastMode&&(j=b.add(j,"canvas",{width:16,height:16,"aria-hidden":"true"}),j.getContext&&(n=j.getContext("2d"))?(n.fillStyle="#"+a,n.fillRect(0,0,16,16)):b.remove(j))}),i.more_colors_func&&(j=b.add(k,"tr"),j=b.add(j,"td",{colspan:i.grid_width,"class":"mceMoreColors"}),j=b.add(j,"a",{role:"option",id:f.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},i.more_colors_title),c.add(j,"click",function(a){return i.more_colors_func.call(i.more_colors_scope||this),c.cancel(a)})),b.addClass(g,"mceColorSplitMenu"),new a.ui.KeyboardNavigation({root:f.id+"_menu",items:b.select("a",f.id+"_menu"),onCancel:function(){f.hideMenu(),f.focus()}}),c.add(f.id+"_menu","mousedown",function(a){return c.cancel(a)}),c.add(f.id+"_menu","click",function(a){var d;return a=b.getParent(a.target,"a",k),a&&a.nodeName.toLowerCase()=="a"&&(d=a.getAttribute("data-mce-color"))&&f.setColor(d),c.cancel(a)}),m},setColor:function(a){this.displayColor(a),this.hideMenu(),this.settings.onselect(a)},displayColor:function(a){var c=this;b.setStyle(c.id+"_preview","backgroundColor",a),c.value=a},postRender:function(){var a=this,c=a.id;a.parent(),b.add(c+"_action","div",{id:c+"_preview","class":"mceColorPreview"}),b.setStyle(a.id+"_preview","backgroundColor",a.value)},destroy:function(){this.parent(),c.clear(this.id+"_menu"),c.clear(this.id+"_more"),b.remove(this.id+"_menu")}})}(tinymce),function(a){var b=a.DOM,c=a.each,d=a.dom.Event;a.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var c=this,d=[],e=c.controls,f=a.each,g=c.settings;return d.push('<div id="'+c.id+'" role="group" aria-labelledby="'+c.id+'_voice">'),d.push("<span role='application'>"),d.push('<span id="'+c.id+'_voice" class="mceVoiceLabel" style="display:none;">'+b.encode(g.name)+"</span>"),f(e,function(a){d.push(a.renderHTML())}),d.push("</span>"),d.push("</div>"),d.join("")},focus:function(){var a=this;b.get(a.id).focus()},postRender:function(){var d=this,e=[];c(d.controls,function(a){c(a.controls,function(a){a.id&&e.push(a)})}),d.keyNav=new a.ui.KeyboardNavigation({root:d.id,items:e,onCancel:function(){a.isWebKit&&b.get(d.editor.id+"_ifr").focus(),d.editor.focus()},excludeFromTabOrder:!d.settings.tab_focus_toolbar})},destroy:function(){var a=this;a.parent(),a.keyNav.destroy(),d.clear(a.id)}})}(tinymce),function(a){var b=a.DOM,c=a.each;a.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var a=this,c="",d,e,f=a.settings,g,h,i,j;j=a.controls;for(g=0;g<j.length;g++)e=j[g],h=j[g-1],i=j[g+1],g===0&&(d="mceToolbarStart",e.Button?d+=" mceToolbarStartButton":e.SplitButton?d+=" mceToolbarStartSplitButton":e.ListBox&&(d+=" mceToolbarStartListBox"),c+=b.createHTML("td",{"class":d},b.createHTML("span",null,"<!-- IE -->"))),h&&e.ListBox&&(h.Button||h.SplitButton)&&(c+=b.createHTML("td",{"class":"mceToolbarEnd"},b.createHTML("span",null,"<!-- IE -->"))),b.stdMode?c+='<td style="position: relative">'+e.renderHTML()+"</td>":c+="<td>"+e.renderHTML()+"</td>",i&&e.ListBox&&(i.Button||i.SplitButton)&&(c+=b.createHTML("td",{"class":"mceToolbarStart"},b.createHTML("span",null,"<!-- IE -->")));return d="mceToolbarEnd",e.Button?d+=" mceToolbarEndButton":e.SplitButton?d+=" mceToolbarEndSplitButton":e.ListBox&&(d+=" mceToolbarEndListBox"),c+=b.createHTML("td",{"class":d},b.createHTML("span",null,"<!-- IE -->")),b.createHTML("table",{id:a.id,"class":"mceToolbar"+(f["class"]?" "+f["class"]:""),cellpadding:"0",cellspacing:"0",align:a.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+c+"</tr></tbody>")}})}(tinymce),function(a){var b=a.util.Dispatcher,c=a.each;a.create("tinymce.AddOnManager",{AddOnManager:function(){var a=this;a.items=[],a.urls={},a.lookup={},a.onAdd=new b(a)},get:function(a){return this.lookup[a]?this.lookup[a].instance:undefined},dependencies:function(a){var b;return this.lookup[a]&&(b=this.lookup[a].dependencies),b||[]},requireLangPack:function(b){var c=a.settings;c&&c.language&&c.language_load!==!1&&a.ScriptLoader.add(this.urls[b]+"/langs/"+c.language+".js")},add:function(a,b,c){return this.items.push(b),this.lookup[a]={instance:b,dependencies:c},this.onAdd.dispatch(this,a,b),b},createUrl:function(a,b){return typeof b=="object"?b:{prefix:a.prefix,resource:b,suffix:a.suffix}},addComponents:function(b,c){var d=this.urls[b];a.each(c,function(b){a.ScriptLoader.add(d+"/"+b)})},load:function(b,c,d,e){function f(){var f=g.dependencies(b);a.each(f,function(a){var b=g.createUrl(c,a);g.load(b.resource,b,undefined,undefined)}),d&&(e?d.call(e):d.call(a.ScriptLoader))}var g=this,h=c;if(g.urls[b])return;typeof c=="object"&&(h=c.prefix+c.resource+c.suffix),h.indexOf("/")!=0&&h.indexOf("://")==-1&&(h=a.baseURL+"/"+h),g.urls[b]=h.substring(0,h.lastIndexOf("/")),g.lookup[b]?f():a.ScriptLoader.add(h,f,e)}}),a.PluginManager=new a.AddOnManager,a.ThemeManager=new a.AddOnManager}(tinymce),function(a){var b=a.each,c=a.extend,d=a.DOM,e=a.dom.Event,f=a.ThemeManager,g=a.PluginManager,h=a.explode,i=a.util.Dispatcher,j,k=0;a.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(a.documentBaseURL)||(a.documentBaseURL+="/"),a.baseURL=(new a.util.URI(a.documentBaseURL)).toAbsolute(a.baseURL),a.baseURI=new a.util.URI(a.baseURL),a.onBeforeUnload=new i(a),e.add(window,"beforeunload",function(b){a.onBeforeUnload.dispatch(a,b)}),a.onAddEditor=new i(a),a.onRemoveEditor=new i(a),a.EditorManager=c(a,{editors:[],i18n:{},activeEditor:null,init:function(f){function g(b,c,d){var e=b[c];if(!e)return;return a.is(e,"string")&&(d=e.replace(/\.\w+$/,""),d=d?a.resolve(d):0,e=a.resolve(e)),e.apply(d||this,Array.prototype.slice.call(arguments,2))}var i=this,j,l=a.ScriptLoader,m,n=[],o;f=c({theme:"simple",language:"en"},f),i.settings=f,e.add(document,"init",function(){var c,e;g(f,"onpageload");switch(f.mode){case"exact":c=f.elements||"",c.length>0&&b(h(c),function(c){d.get(c)?(o=new a.Editor(c,f),n.push(o),o.render(1)):b(document.forms,function(e){b(e.elements,function(b){b.name===c&&(c="mce_editor_"+k++,d.setAttrib(b,"id",c),o=new a.Editor(c,f),n.push(o),o.render(1))})})});break;case"textareas":case"specific_textareas":function j(a,b){return b.constructor===RegExp?b.test(a.className):d.hasClass(a,b)}b(d.select("textarea"),function(b){if(f.editor_deselector&&j(b,f.editor_deselector))return;if(!f.editor_selector||j(b,f.editor_selector)){m=d.get(b.name),!b.id&&!m&&(b.id=b.name);if(!b.id||i.get(b.id))b.id=d.uniqueId();o=new a.Editor(b.id,f),n.push(o),o.render(1)}})}f.oninit&&(c=e=0,b(n,function(a){e++,a.initialized?c++:a.onInit.add(function(){c++,c==e&&g(f,"oninit")}),c==e&&g(f,"oninit")}))})},get:function(a){return a===j?this.editors:this.editors[a]},getInstanceById:function(a){return this.get(a)},add:function(b){var c=this,d=c.editors;return d[b.id]=b,d.push(b),c._setActive(b),c.onAddEditor.dispatch(c,b),a.adapter&&a.adapter.patchEditor(b),b},remove:function(a){var b=this,c,d=b.editors;if(!d[a.id])return null;delete d[a.id];for(c=0;c<d.length;c++)if(d[c]==a){d.splice(c,1);break}return b.activeEditor==a&&b._setActive(d[0]),a.destroy(),b.onRemoveEditor.dispatch(b,a),a},execCommand:function(b,c,d){var e=this,f=e.get(d),g;switch(b){case"mceFocus":return f.focus(),!0;case"mceAddEditor":case"mceAddControl":return e.get(d)||(new a.Editor(d,e.settings)).render(),!0;case"mceAddFrameControl":g=d.window,g.tinyMCE=tinyMCE,g.tinymce=a,a.DOM.doc=g.document,a.DOM.win=g,f=new a.Editor(d.element_id,d),f.render();if(a.isIE){function h(){f.destroy(),g.detachEvent("onunload",h),g=g.tinyMCE=g.tinymce=null}g.attachEvent("onunload",h)}return d.page_window=null,!0;case"mceRemoveEditor":case"mceRemoveControl":return f&&f.remove(),!0;case"mceToggleEditor":if(!f)return e.execCommand("mceAddControl",0,d),!0;return f.isHidden()?f.show():f.hide(),!0}return e.activeEditor?e.activeEditor.execCommand(b,c,d):!1},execInstanceCommand:function(a,b,c,d){var e=this.get(a);return e?e.execCommand(b,c,d):!1},triggerSave:function(){b(this.editors,function(a){a.save()})},addI18n:function(c,d){var e,f=this.i18n;a.is(c,"string")?b(d,function(a,b){f[c+"."+b]=a}):b(c,function(a,c){b(a,function(a,d){b(a,function(a,b){d==="common"?f[c+"."+b]=a:f[c+"."+d+"."+b]=a})})})},_setActive:function(a){this.selectedInstance=this.activeEditor=a}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.extend,e=a.util.Dispatcher,f=a.each,g=a.isGecko,h=a.isIE,i=a.isWebKit,j=a.is,k=a.ThemeManager,l=a.PluginManager,m=a.inArray,n=a.grep,o=a.explode;a.create("tinymce.Editor",{Editor:function(b,c){var g=this;g.id=g.editorId=b,g.execCommands={},g.queryStateCommands={},g.queryValueCommands={},g.isNotDirty=!1,g.plugins={},f(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(a){g[a]=new e(g)}),g.settings=c=d({id:b,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:a.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:a.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",validate:!0,entity_encoding:"named",url_converter:g.convertURL,url_converter_scope:g,ie7_compat:!0},c),g.documentBaseURI=new a.util.URI(c.document_base_url||a.documentBaseURL,{base_uri:tinyMCE.baseURI}),g.baseURI=a.baseURI,g.contentCSS=[],g.execCallback("setup",g)},render:function(d){function e(){h.language&&h.language_load!==!1&&j.add(a.baseURL+"/langs/"+h.language+".js"),h.theme&&h.theme.charAt(0)!="-"&&!k.urls[h.theme]&&k.load(h.theme,"themes/"+h.theme+"/editor_template"+a.suffix+".js"),f(o(h.plugins),function(b){if(b&&!l.urls[b])if(b.charAt(0)=="-"){b=b.substr(1,b.length);var c=l.dependencies(b);f(c,function(b){var c={prefix:"plugins/",resource:b,suffix:"/editor_plugin"+a.suffix+".js"},b=l.createUrl(c,b);l.load(b.resource,b)})}else{if(b=="safari")return;l.load(b,{prefix:"plugins/",resource:b,suffix:"/editor_plugin"+a.suffix+".js"})}}),j.loadQueue(function(){g.removed||g.init()})}var g=this,h=g.settings,i=g.id,j=a.ScriptLoader;if(!c.domLoaded){c.add(document,"init",function(){g.render()});return}tinyMCE.settings=h;if(!g.getElement())return;if(a.isIDevice&&!a.isIOS5)return;!/TEXTAREA|INPUT/i.test(g.getElement().nodeName)&&h.hidden_input&&b.getParent(i,"form")&&b.insertAfter(b.create("input",{type:"hidden",name:i}),i),a.WindowManager&&(g.windowManager=new a.WindowManager(g)),h.encoding=="xml"&&g.onGetContent.add(function(a,c){c.save&&(c.content=b.encode(c.content))}),h.add_form_submit_trigger&&g.onSubmit.addToTop(function(){g.initialized&&(g.save(),g.isNotDirty=1)}),h.add_unload_trigger&&(g._beforeUnload=tinyMCE.onBeforeUnload.add(function(){g.initialized&&!g.destroyed&&!g.isHidden()&&g.save({format:"raw",no_events:!0})})),a.addUnload(g.destroy,g),h.submit_patch&&g.onBeforeRenderUI.add(function(){var b=g.getElement().form;if(!b)return;if(b._mceOldSubmit)return;!b.submit.nodeType&&!b.submit.length&&(g.formElement=b,b._mceOldSubmit=b.submit,b.submit=function(){return a.triggerSave(),g.isNotDirty=1,g.formElement._mceOldSubmit(g.formElement)}),b=null}),e()},init:function(){function c(b){var d=l.get(b),g=l.urls[b]||a.documentBaseURL.replace(/\/$/,""),h;d&&a.inArray(w,b)===-1&&(f(l.dependencies(b),function(a){c(a)}),h=new d(e,g),e.plugins[b]=h,h.init&&(h.init(e,g),w.push(b)))}var d,e=this,i=e.settings,j,m,n=e.getElement(),p,q,r,s,t,u,v,w=[];a.add(e),i.aria_label=i.aria_label||b.getAttrib(n,"aria-label",e.getLang("aria.rich_text_area")),i.theme&&(i.theme=i.theme.replace(/-/,""
),p=k.get(i.theme),e.theme=new p,e.theme.init&&i.init_theme&&e.theme.init(e,k.urls[i.theme]||a.documentBaseURL.replace(/\/$/,""))),f(o(i.plugins.replace(/\-/g,"")),c),i.popup_css!==!1&&(i.popup_css?i.popup_css=e.documentBaseURI.toAbsolute(i.popup_css):i.popup_css=e.baseURI.toAbsolute("themes/"+i.theme+"/skins/"+i.skin+"/dialog.css")),i.popup_css_add&&(i.popup_css+=","+e.documentBaseURI.toAbsolute(i.popup_css_add)),e.controlManager=new a.ControlManager(e),i.custom_undo_redo&&(e.onBeforeExecCommand.add(function(a,b,c,d,f){b!="Undo"&&b!="Redo"&&b!="mceRepaint"&&(!f||!f.skip_undo)&&e.undoManager.beforeChange()}),e.onExecCommand.add(function(a,b,c,d,f){b!="Undo"&&b!="Redo"&&b!="mceRepaint"&&(!f||!f.skip_undo)&&e.undoManager.add()})),e.onExecCommand.add(function(a,b){/^(FontName|FontSize)$/.test(b)||e.nodeChanged()});if(g){function x(a,b){(!b||!b.initial)&&e.execCommand("mceRepaint")}e.onUndo.add(x),e.onRedo.add(x),e.onSetContent.add(x)}e.onBeforeRenderUI.dispatch(e,e.controlManager),i.render_ui&&(j=i.width||n.style.width||n.offsetWidth,m=i.height||n.style.height||n.offsetHeight,e.orgDisplay=n.style.display,u=/^[0-9\.]+(|px)$/i,u.test(""+j)&&(j=Math.max(parseInt(j)+(p.deltaWidth||0),100)),u.test(""+m)&&(m=Math.max(parseInt(m)+(p.deltaHeight||0),100)),p=e.theme.renderUI({targetNode:n,width:j,height:m,deltaWidth:i.delta_width,deltaHeight:i.delta_height}),e.editorContainer=p.editorContainer),document.domain&&location.hostname!=document.domain&&(a.relaxedDomain=document.domain),b.setStyles(p.sizeContainer||p.editorContainer,{width:j,height:m}),i.content_css&&a.each(o(i.content_css),function(a){e.contentCSS.push(e.documentBaseURI.toAbsolute(a))}),m=(p.iframeHeight||m)+(typeof m=="number"?p.deltaHeight||0:""),m<100&&(m=100),e.iframeHTML=i.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">',i.document_base_url!=a.documentBaseURL&&(e.iframeHTML+='<base href="'+e.documentBaseURI.getURI()+'" />'),i.ie7_compat?e.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />':e.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />',e.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';for(v=0;v<e.contentCSS.length;v++)e.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+e.contentCSS[v]+'" />';s=i.body_id||"tinymce",s.indexOf("=")!=-1&&(s=e.getParam("body_id","","hash"),s=s[e.id]||s),t=i.body_class||"",t.indexOf("=")!=-1&&(t=e.getParam("body_class","","hash"),t=t[e.id]||""),e.iframeHTML+='</head><body id="'+s+'" class="mceContentBody '+t+'"><br></body></html>',a.relaxedDomain&&(h||a.isOpera&&parseFloat(opera.version())<11)&&(r='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()'),d=b.add(p.iframeContainer,"iframe",{id:e.id+"_ifr",src:r||'javascript:""',frameBorder:"0",allowTransparency:"true",title:i.aria_label,style:{width:"100%",height:m,display:"block"}}),e.contentAreaContainer=p.iframeContainer,b.get(p.editorContainer).style.display=e.orgDisplay,b.get(e.id).style.display="none",b.setAttrib(e.id,"aria-hidden",!0),(!a.relaxedDomain||!r)&&e.setupIframe(),n=d=p=null},setupIframe:function(){var d=this,e=d.settings,i=b.get(d.id),j=d.getDoc(),k,l;if(!h||!a.relaxedDomain)j.open(),j.write(d.iframeHTML),j.close(),a.relaxedDomain&&(j.domain=a.relaxedDomain);l=d.getBody(),l.disabled=!0,e.readonly||(l.contentEditable=!0),l.disabled=!1,d.schema=new a.html.Schema(e),d.dom=new a.dom.DOMUtils(d.getDoc(),{keep_values:!0,url_converter:d.convertURL,url_converter_scope:d,hex_colors:e.force_hex_style_colors,class_filter:e.class_filter,update_styles:1,fix_ie_paragraphs:1,schema:d.schema}),d.parser=new a.html.DomParser(e,d.schema),d.settings.allow_html_in_named_anchor||d.parser.addAttributeFilter("name",function(a,b){var c=a.length,d,e,f,g;while(c--){g=a[c];if(g.name==="a"&&g.firstChild){f=g.parent,d=g.lastChild;do e=d.prev,f.insert(d,g),d=e;while(d)}}}),d.parser.addAttributeFilter("src,href,style",function(a,b){var c=a.length,e,f=d.dom,g,h;while(c--)e=a[c],g=e.attr(b),h="data-mce-"+b,e.attributes.map[h]||(b==="style"?e.attr(h,f.serializeStyle(f.parseStyle(g),e.name)):e.attr(h,d.convertURL(g,b,e.name)))}),d.parser.addNodeFilter("script",function(a,b){var c=a.length,d;while(c--)d=a[c],d.attr("type","mce-"+(d.attr("type")||"text/javascript"))}),d.parser.addNodeFilter("#cdata",function(a,b){var c=a.length,d;while(c--)d=a[c],d.type=8,d.name="#comment",d.value="[CDATA["+d.value+"]]"}),d.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(b,c){var e=b.length,f,g=d.schema.getNonEmptyElements();while(e--)f=b[e],f.isEmpty(g)&&(f.empty().append(new a.html.Node("br",1)).shortEnded=!0)}),d.serializer=new a.dom.Serializer(e,d.dom,d.schema),d.selection=new a.dom.Selection(d.dom,d.getWin(),d.serializer),d.formatter=new a.Formatter(this),d.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(a){return!0},onformat:function(a,b,c){f(c,function(b,c){d.dom.setAttrib(a,c,b)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),f("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(a){d.formatter.register(a,{block:a,remove:"all"})}),d.formatter.register(d.settings.formats),d.undoManager=new a.UndoManager(d),d.undoManager.onAdd.add(function(a,b){if(a.hasUndo())return d.onChange.dispatch(d,b,a)}),d.undoManager.onUndo.add(function(a,b){return d.onUndo.dispatch(d,b,a)}),d.undoManager.onRedo.add(function(a,b){return d.onRedo.dispatch(d,b,a)}),d.forceBlocks=new a.ForceBlocks(d,{forced_root_block:e.forced_root_block}),d.editorCommands=new a.EditorCommands(d),d.serializer.onPreProcess.add(function(a,b){return d.onPreProcess.dispatch(d,b,a)}),d.serializer.onPostProcess.add(function(a,b){return d.onPostProcess.dispatch(d,b,a)}),d.onPreInit.dispatch(d),e.gecko_spellcheck||(d.getBody().spellcheck=0),e.readonly||d._addEvents(),d.controlManager.onPostRender.dispatch(d,d.controlManager),d.onPostRender.dispatch(d),d.quirks=new a.util.Quirks(this),e.directionality&&(d.getBody().dir=e.directionality),e.nowrap&&(d.getBody().style.whiteSpace="nowrap"),e.handle_node_change_callback&&d.onNodeChange.add(function(a,b,c){d.execCallback("handle_node_change_callback",d.id,c,-1,-1,!0,d.selection.isCollapsed())}),e.save_callback&&d.onSaveContent.add(function(a,b){var c=d.execCallback("save_callback",d.id,b.content,d.getBody());c&&(b.content=c)}),e.onchange_callback&&d.onChange.add(function(a,b){d.execCallback("onchange_callback",d,b)}),e.protect&&d.onBeforeSetContent.add(function(a,b){e.protect&&f(e.protect,function(a){b.content=b.content.replace(a,function(a){return"<!--mce:protected "+escape(a)+"-->"})})}),e.convert_newlines_to_brs&&d.onBeforeSetContent.add(function(a,b){b.initial&&(b.content=b.content.replace(/\r?\n/g,"<br />"))}),e.preformatted&&d.onPostProcess.add(function(a,b){b.content=b.content.replace(/^\s*<pre.*?>/,""),b.content=b.content.replace(/<\/pre>\s*$/,""),b.set&&(b.content='<pre class="mceItemHidden">'+b.content+"</pre>")}),e.verify_css_classes&&(d.serializer.attribValueFilter=function(a,b){var c,e;return a=="class"?(d.classesRE||(e=d.dom.getClasses(),e.length>0&&(c="",f(e,function(a){c+=(c?"|":"")+a["class"]}),d.classesRE=new RegExp("("+c+")","gi"))),!d.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(b)||d.classesRE.test(b)?b:""):b}),e.cleanup_callback&&(d.onBeforeSetContent.add(function(a,b){b.content=d.execCallback("cleanup_callback","insert_to_editor",b.content,b)}),d.onPreProcess.add(function(a,b){b.set&&d.execCallback("cleanup_callback","insert_to_editor_dom",b.node,b),b.get&&d.execCallback("cleanup_callback","get_from_editor_dom",b.node,b)}),d.onPostProcess.add(function(a,b){b.set&&(b.content=d.execCallback("cleanup_callback","insert_to_editor",b.content,b)),b.get&&(b.content=d.execCallback("cleanup_callback","get_from_editor",b.content,b))})),e.save_callback&&d.onGetContent.add(function(a,b){b.save&&(b.content=d.execCallback("save_callback",d.id,b.content,d.getBody()))}),e.handle_event_callback&&d.onEvent.add(function(a,b,e){d.execCallback("handle_event_callback",b,a,e)===!1&&c.cancel(b)}),d.onSetContent.add(function(){d.addVisual(d.getBody())}),e.padd_empty_editor&&d.onPostProcess.add(function(a,b){b.content=b.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")});if(g){function m(a,b){f(a.dom.select("a"),function(b){var c=b.parentNode;a.dom.isBlock(c)&&c.lastChild===b&&a.dom.add(c,"br",{"data-mce-bogus":1})})}d.onExecCommand.add(function(a,b){b==="CreateLink"&&m(a)}),d.onSetContent.add(d.selection.onSetContent.add(m))}d.load({initial:!0,format:"html"}),d.startContent=d.getContent({format:"raw"}),d.undoManager.add(),d.initialized=!0,d.onInit.dispatch(d),d.execCallback("setupcontent_callback",d.id,d.getBody(),d.getDoc()),d.execCallback("init_instance_callback",d),d.focus(!0),d.nodeChanged({initial:1}),f(d.contentCSS,function(a){d.dom.loadCSS(a)}),e.auto_focus&&setTimeout(function(){var b=a.get(e.auto_focus);b.selection.select(b.getBody(),1),b.selection.collapse(1),b.getBody().focus(),b.getWin().focus()},100),i=null},focus:function(b){var c,d=this,e=d.selection,f=d.settings.content_editable,g,h,i=d.getDoc();b||(g=e.getRng(),g.item&&(h=g.item(0)),d._refreshContentEditable(),e.normalize(),f||d.getWin().focus(),a.isGecko&&d.getBody().focus(),h&&h.ownerDocument==i&&(g=i.body.createControlRange(),g.addElement(h),g.select())),a.activeEditor!=d&&((c=a.activeEditor)!=null&&c.onDeactivate.dispatch(c,d),d.onActivate.dispatch(d,c)),a._setActive(d)},execCallback:function(b){var c=this,d=c.settings[b],e;if(!d)return;return c.callbackLookup&&(e=c.callbackLookup[b])&&(d=e.func,e=e.scope),j(d,"string")&&(e=d.replace(/\.\w+$/,""),e=e?a.resolve(e):0,d=a.resolve(d),c.callbackLookup=c.callbackLookup||{},c.callbackLookup[b]={func:d,scope:e}),d.apply(e||c,Array.prototype.slice.call(arguments,1))},translate:function(b){var c=this.settings.language||"en",d=a.i18n;return b?d[c+"."+b]||b.replace(/{\#([^}]+)\}/g,function(a,b){return d[c+"."+b]||"{#"+b+"}"}):""},getLang:function(b,c){return a.i18n[(this.settings.language||"en")+"."+b]||(j(c)?c:"{#"+b+"}")},getParam:function(b,c,d){var e=a.trim,g=j(this.settings[b])?this.settings[b]:c,h;return d==="hash"?(h={},j(g,"string")?f(g.indexOf("=")>0?g.split(/[;,](?![^=;,]*(?:[;,]|$))/):g.split(","),function(a){a=a.split("="),a.length>1?h[e(a[0])]=e(a[1]):h[e(a[0])]=e(a)}):h=g,h):g},nodeChanged:function(a){var b=this,c=b.selection,d=c.getStart()||b.getBody();b.initialized&&(a=a||{},d=h&&d.ownerDocument!=b.getDoc()?b.getBody():d,a.parents=[],b.dom.getParent(d,function(b){if(b.nodeName=="BODY")return!0;a.parents.push(b)}),b.onNodeChange.dispatch(b,a?a.controlManager||b.controlManager:b.controlManager,d,c.isCollapsed(),a))},addButton:function(a,b){var c=this;c.buttons=c.buttons||{},c.buttons[a]=b},addCommand:function(a,b,c){this.execCommands[a]={func:b,scope:c||this}},addQueryStateHandler:function(a,b,c){this.queryStateCommands[a]={func:b,scope:c||this}},addQueryValueHandler:function(a,b,c){this.queryValueCommands[a]={func:b,scope:c||this}},addShortcut:function(a,b,c,d){var e=this,g;return e.settings.custom_shortcuts?(e.shortcuts=e.shortcuts||{},j(c,"string")&&(g=c,c=function(){e.execCommand(g,!1,null)}),j(c,"object")&&(g=c,c=function(){e.execCommand(g[0],g[1],g[2])}),f(o(a),function(a){var g={func:c,scope:d||this,desc:b,alt:!1,ctrl:!1,shift:!1};f(o(a,"+"),function(a){switch(a){case"alt":case"ctrl":case"shift":g[a]=!0;break;default:g.charCode=a.charCodeAt(0),g.keyCode=a.toUpperCase().charCodeAt(0)}}),e.shortcuts[(g.ctrl?"ctrl":"")+","+(g.alt?"alt":"")+","+(g.shift?"shift":"")+","+g.keyCode]=g}),!0):!1},execCommand:function(a,b,c,d){var e=this,g=0,h,i;!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(a)&&(!d||!d.skip_focus)&&e.focus(),h={},e.onBeforeExecCommand.dispatch(e,a,b,c,h);if(h.terminate)return!1;if(e.execCallback("execcommand_callback",e.id,e.selection.getNode(),a,b,c))return e.onExecCommand.dispatch(e,a,b,c,d),!0;if(h=e.execCommands[a]){i=h.func.call(h.scope,b,c);if(i!==!0)return e.onExecCommand.dispatch(e,a,b,c,d),i}f(e.plugins,function(f){if(f.execCommand&&f.execCommand(a,b,c))return e.onExecCommand.dispatch(e,a,b,c,d),g=1,!1});if(g)return!0;if(e.theme&&e.theme.execCommand&&e.theme.execCommand(a,b,c))return e.onExecCommand.dispatch(e,a,b,c,d),!0;if(e.editorCommands.execCommand(a,b,c))return e.onExecCommand.dispatch(e,a,b,c,d),!0;e.getDoc().execCommand(a,b,c),e.onExecCommand.dispatch(e,a,b,c,d)},queryCommandState:function(a){var b=this,c,d;if(b._isHidden())return;if(c=b.queryStateCommands[a]){d=c.func.call(c.scope);if(d!==!0)return d}c=b.editorCommands.queryCommandState(a);if(c!==-1)return c;try{return this.getDoc().queryCommandState(a)}catch(e){}},queryCommandValue:function(a){var b=this,c,d;if(b._isHidden())return;if(c=b.queryValueCommands[a]){d=c.func.call(c.scope);if(d!==!0)return d}c=b.editorCommands.queryCommandValue(a);if(j(c))return c;try{return this.getDoc().queryCommandValue(a)}catch(e){}},show:function(){var a=this;b.show(a.getContainer()),b.hide(a.id),a.load()},hide:function(){var a=this,c=a.getDoc();h&&c&&c.execCommand("SelectAll"),a.save(),b.hide(a.getContainer()),b.setStyle(a.id,"display",a.orgDisplay)},isHidden:function(){return!b.isHidden(this.id)},setProgressState:function(a,b,c){return this.onSetProgressState.dispatch(this,a,b,c),a},load:function(a){var b=this,c=b.getElement(),d;if(c)return a=a||{},a.load=!0,d=b.setContent(j(c.value)?c.value:c.innerHTML,a),a.element=c,a.no_events||b.onLoadContent.dispatch(b,a),a.element=c=null,d},save:function(a){var c=this,d=c.getElement(),e,g;if(!d||!c.initialized)return;return a=a||{},a.save=!0,a.no_events||(c.undoManager.typing=!1,c.undoManager.add()),a.element=d,e=a.content=c.getContent(a),a.no_events||c.onSaveContent.dispatch(c,a),e=a.content,/TEXTAREA|INPUT/i.test(d.nodeName)?d.value=e:(d.innerHTML=e,(g=b.getParent(c.id,"form"))&&f(g.elements,function(a){if(a.name==c.id)return a.value=e,!1})),a.element=d=null,e},setContent:function(b,c){var d=this,e,f=d.getBody(),g;c=c||{},c.format=c.format||"html",c.set=!0,c.content=b,c.no_events||d.onBeforeSetContent.dispatch(d,c),b=c.content;if(!a.isIE&&(b.length===0||/^\s+$/.test(b))){g=d.settings.forced_root_block,g?b="<"+g+'><br data-mce-bogus="1"></'+g+">":b='<br data-mce-bogus="1">',f.innerHTML=b,d.selection.select(f,!0),d.selection.collapse(!0);return}return c.format!=="raw"&&(b=(new a.html.Serializer({},d.schema)).serialize(d.parser.parse(b))),c.content=a.trim(b),d.dom.setHTML(f,c.content),c.no_events||d.onSetContent.dispatch(d,c),d.selection.normalize(),c.content},getContent:function(b){var c=this,d;return b=b||{},b.format=b.format||"html",b.get=!0,b.no_events||c.onBeforeGetContent.dispatch(c,b),b.format=="raw"?d=c.getBody().innerHTML:d=c.serializer.serialize(c.getBody(),b),b.content=a.trim(d),b.no_events||c.onGetContent.dispatch(c,b),b.content},isDirty:function(){var b=this;return a.trim(b.startContent)!=a.trim(b.getContent({format:"raw",no_events:1}))&&!b.isNotDirty},getContainer:function(){var a=this;return a.container||(a.container=b.get(a.editorContainer||a.id+"_parent")),a.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return b.get(this.settings.content_element||this.id)},getWin:function(){var a=this,c;return a.contentWindow||(c=b.get(a.id+"_ifr"),c&&(a.contentWindow=c.contentWindow)),a.contentWindow},getDoc:function(){var a=this,b;return a.contentDocument||(b=a.getWin(),b&&(a.contentDocument=b.document)),a.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(a,b,c){var d=this,e=d.settings;return e.urlconverter_callback?d.execCallback("urlconverter_callback",a,c,!0,b):!e.convert_urls||c&&c.nodeName=="LINK"||a.indexOf("file:")===0?a:e.relative_urls?d.documentBaseURI.toRelative(a):(a=d.documentBaseURI.toAbsolute(a,e.remove_script_host),a)},addVisual:function(a){var b=this,c=b.settings;a=a||b.getBody(),j(b.hasVisual)||(b.hasVisual=c.visual),f(b.dom.select("table,a",a),function(a){var d;switch(a.nodeName){case"TABLE":d=b.dom.getAttrib(a,"border");if(!d||d=="0")b.hasVisual?b.dom.addClass(a,c.visual_table_class):b.dom.removeClass(a,c.visual_table_class);return;case"A":d=b.dom.getAttrib(a,"name"),d&&(b.hasVisual?b.dom.addClass(a,"mceItemAnchor"):b.dom.removeClass(a,"mceItemAnchor"));return}}),b.onVisualAid.dispatch(b,a,b.hasVisual)},remove:function(){var c=this,d=c.getContainer();c.removed=1,c.hide(),c.execCallback("remove_instance_callback",c),c.onRemove.dispatch(c),c.onExecCommand.listeners=[],a.remove(c),b.remove(d)},destroy:function(b){var d=this;if(d.destroyed)return;b||(a.removeUnload(d.destroy),tinyMCE.onBeforeUnload.remove(d._beforeUnload),d.theme&&d.theme.destroy&&d.theme.destroy(),d.controlManager.destroy(),d.selection.destroy(),d.dom.destroy(),d.settings.content_editable||(c.clear(d.getWin()),c.clear(d.getDoc())),c.clear(d.getBody()),c.clear(d.formElement)),d.formElement&&(d.formElement.submit=d.formElement._mceOldSubmit,d.formElement._mceOldSubmit=null),d.contentAreaContainer=d.formElement=d.container=d.settings.content_element=d.bodyElement=d.contentDocument=d.contentWindow=null,d.selection&&(d.selection=d.selection.win=d.selection.dom=d.selection.dom.doc=null),d.destroyed=1},_addEvents:function(){function d(a,b){var c=a.type;if(e.removed)return;e.onEvent.dispatch(e,a,b)!==!1&&e[k[a.fakeType||a.type]].dispatch(e,a,b)}var e=this,h,i=e.settings,j=e.dom,k={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};f(k,function(a,c){switch(c){case"contextmenu":j.bind(e.getDoc(),c,d);break;case"paste":j.bind(e.getBody(),c,function(a){d(a)});break;case"submit":case"reset":j.bind(e.getElement().form||b.getParent(e.id,"form"),c,d);break;default:j.bind(i.content_editable?e.getBody():e.getDoc(),c,d)}}),j.bind(i.content_editable?e.getBody():g?e.getDoc():e.getWin(),"focus",function(a){e.focus(!0)}),a.isGecko&&j.bind(e.getDoc(),"DOMNodeInserted",function(a){var b;a=a.target,a.nodeType===1&&a.nodeName==="IMG"&&(b=a.getAttribute("data-mce-src"))&&(a.src=e.documentBaseURI.toAbsolute(b))});if(g){function l(){var a=this,b=a.getDoc(),c=a.settings;if(g&&!c.readonly){a._refreshContentEditable();try{b.execCommand("styleWithCSS",0,!1)}catch(d){if(!a._isHidden())try{b.execCommand("useCSS",0,!0)}catch(d){}}if(!c.table_inline_editing)try{b.execCommand("enableInlineTableEditing",!1,!1)}catch(d){}if(!c.object_resizing)try{b.execCommand("enableObjectResizing",!1,!1)}catch(d){}}}e.onBeforeExecCommand.add(l),e.onMouseDown.add(l)}e.onMouseUp.add(e.nodeChanged),e.onKeyUp.add(function(b,c){var d=c.keyCode;(d>=33&&d<=36||d>=37&&d<=40||d==13||d==45||d==46||d==8||a.isMac&&(d==91||d==93)||c.ctrlKey)&&e.nodeChanged()}),e.onKeyDown.add(function(a,b){if(b.keyCode!=8)return;var c=a.selection.getRng().startContainer,d=a.selection.getRng().startOffset;while(c&&c.nodeType&&c.nodeType!=1&&c.parentNode)c=c.parentNode;if(c&&c.parentNode&&c.parentNode.tagName==="BLOCKQUOTE"&&c.parentNode.firstChild==c&&d==0){a.formatter.toggle("blockquote",null,c.parentNode);var e=a.selection.getRng();e.setStart(c,0),e.setEnd(c,0),a.selection.setRng(e),a.selection.collapse(!1)}}),e.onReset.add(function(){e.setContent(e.startContent,{format:"raw"})});if(i.custom_shortcuts){i.custom_undo_redo_keyboard_shortcuts&&(e.addShortcut("ctrl+z",e.getLang("undo_desc"),"Undo"),e.addShortcut("ctrl+y",e.getLang("redo_desc"),"Redo")),e.addShortcut("ctrl+b",e.getLang("bold_desc"),"Bold"),e.addShortcut("ctrl+i",e.getLang("italic_desc"),"Italic"),e.addShortcut("ctrl+u",e.getLang("underline_desc"),"Underline");for(h=1;h<=6;h++)e.addShortcut("ctrl+"+h,"",["FormatBlock",!1,"h"+h]);e.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),e.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),e.addShortcut("ctrl+9","",["FormatBlock",!1,"address"]);function m(b){var c=null;return!b.altKey&&!b.ctrlKey&&!b.metaKey?c:(f(e.shortcuts,function(d){if(a.isMac&&d.ctrl!=b.metaKey)return;if(!a.isMac&&d.ctrl!=b.ctrlKey)return;if(d.alt!=b.altKey)return;if(d.shift!=b.shiftKey)return;if(b.keyCode==d.keyCode||b.charCode&&b.charCode==d.charCode)return c=d,!1}),c)}e.onKeyUp.add(function(a,b){var d=m(b);if(d)return c.cancel(b)}),e.onKeyPress.add(function(a,b){var d=m(b);if(d)return c.cancel(b)}),e.onKeyDown.add(function(a,b){var d=m(b);if(d)return d.func.call(d.scope),c.cancel(b)})}a.isIE&&j.bind(e.getDoc(),"controlselect",function(a){var b=e.resizeInfo,d;a=a.target;if(a.nodeName!=="IMG")return;b&&j.unbind(b.node,b.ev,b.cb),j.hasClass(a,"mceItemNoResize")?(ev="resizestart",d=j.bind(a,"resizestart",c.cancel,c)):(ev="resizeend",d=j.bind(a,ev,function(a){var b;a=a.target;if(b=j.getStyle(a,"width"))j.setAttrib(a,"width",b.replace(/[^0-9%]+/g,"")),j.setStyle(a,"width","");if(b=j.getStyle(a,"height"))j.setAttrib(a,"height",b.replace(/[^0-9%]+/g,"")),j.setStyle(a,"height","")})),b=e.resizeInfo={node:a,ev:ev,cb:d}}),a.isOpera&&e.onClick.add(function(a,b){c.prevent(b)});if(i.custom_undo_redo){function n(){e.undoManager.typing=!1,e.undoManager.add()}j.bind(e.getDoc(),"focusout",function(a){!e.removed&&e.undoManager.typing&&n()}),e.dom.bind(e.dom.getRoot(),"dragend",function(a){n()}),e.onKeyUp.add(function(a,b){var c=b.keyCode;(c>=33&&c<=36||c>=37&&c<=40||c==13||c==45||b.ctrlKey)&&n()}),e.onKeyDown.add(function(b,d){var f=d.keyCode,g;if(f==8){g=e.getDoc().selection;if(g&&g.createRange&&g.createRange().item)return e.undoManager.beforeChange(),b.dom.remove(g.createRange().item(0)),n(),c.cancel(d)}if(f>=33&&f<=36||f>=37&&f<=40||f==13||f==45){a.isIE&&f==13&&e.undoManager.beforeChange(),e.undoManager.typing&&n();return}(f<16||f>20)&&f!=224&&f!=91&&!e.undoManager.typing&&(e.undoManager.beforeChange(),e.undoManager.typing=!0,e.undoManager.add())}),e.onMouseDown.add(function(){e.undoManager.typing&&n()})}if(a.isGecko){function o(){var a=e.dom.getAttribs(e.selection.getStart().cloneNode(!1));return function(){var b=e.selection.getStart();b!==e.getBody()&&(e.dom.setAttrib(b,"style",null),f(a,function(a){b.setAttributeNode(a.cloneNode(!0))}))}}function p(){var a=e.selection;return!a.isCollapsed()&&a.getStart()!=a.getEnd()}e.onKeyPress.add(function(a,b){var d;if((b.keyCode==8||b.keyCode==46)&&p())return d=o(),e.getDoc().execCommand("delete",!1,null),d(),c.cancel(b)}),e.dom.bind(e.getDoc(),"cut",function(a){var b;p()&&(b=o(),e.onKeyUp.addToTop(c.cancel,c),setTimeout(function(){b(),e.onKeyUp.remove(c.cancel,c)},0))})}},_refreshContentEditable:function(){var a=this,b,c;a._isHidden()&&(b=a.getBody(),c=b.parentNode,c.removeChild(b),c.appendChild(b),b.focus())},_isHidden:function(){var a;return g?(a=this.selection.getSel(),!a||!a.rangeCount||a.rangeCount==0):0}})}(tinymce),function(a){var b=a.each,c,d=!0,e=!1;a.EditorCommands=function(f){function g(a,b,c){var f;return a=a.toLowerCase(),(f=r.exec[a])?(f(a,b,c),d):e}function h(a){var b;return a=a.toLowerCase(),(b=r.state[a])?b(a):-1}function i(a){var b;return a=a.toLowerCase(),(b=r.value[a])?b(a):e}function j(a,c){c=c||"exec",b(a,function(a,d){b(d.toLowerCase().split(","),function(b){r[c][b]=a})})}function k(a,b,d){return b===c&&(b=e),d===c&&(d=null),f.getDoc().execCommand(a,b,d)}function l(a){return t.match(a)}function m(a,b){t.toggle(a,b?{value:b}:c)}function n(a){u=q.getBookmark(a)}function o(){q.moveToBookmark(u)}var p=f.dom,q=f.selection,r={state:{},exec:{},value:{}},s=f.settings,t=f.formatter,u;a.extend(this,{execCommand:g,queryCommandState:h,queryCommandValue:i,addCommands:j}),j({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){f.undoManager.add()},"Cut,Copy,Paste":function(b){var c=f.getDoc(),e;try{k(b)}catch(g){e=d}if(e||!c.queryCommandSupported(b))a.isGecko?f.windowManager.confirm(f.getLang("clipboard_msg"),function(a){a&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):f.windowManager.alert(f.getLang("clipboard_no_support"))},unlink:function(a){q.isCollapsed()&&q.select(q.getNode()),k(a),q.collapse(e)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(a){var c=a.substring(7);b("left,center,right,full".split(","),function(a){c!=a&&t.remove("align"+a)}),m("align"+c),g("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(a){var b,c;k(a),b=p.getParent(q.getNode(),"ol,ul"),b&&(c=b.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(c.nodeName)&&(n(),p.split(c,b),o()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){m(a)},"ForeColor,HiliteColor,FontName":function(a,b,c){m(a,c)},FontSize:function(b,c,d){var e,f;d>=1&&d<=7&&(f=a.explode(s.font_size_style_values),e=a.explode(s.font_size_classes),e?d=e[d-1]||d:d=f[d-1]||d),m(b,d)},RemoveFormat:function(a){t.remove(a)},mceBlockQuote:function(a){m("blockquote")},FormatBlock:function(a,b,c){return m(c||"p")},mceCleanup:function(){var a=q.getBookmark();f.setContent(f.getContent({cleanup:d}),{cleanup:d}),q.moveToBookmark(a)},mceRemoveNode:function(a,b,c){var e=c||q.getNode();e!=f.getBody()&&(n(),f.dom.remove(e,d),o())},mceSelectNodeDepth:function(a,b,c){var d=0;p.getParent(q.getNode(),function(a){if(a.nodeType==1&&d++==c)return q.select(a),e},f.getBody())},mceSelectNode:function(a,b,c){q.select(c)},mceInsertContent:function(b,c,d){var e,g,h,i,j,k,l,m,n,o,r,s,t,u;e=f.parser,g=new a.html.Serializer({},f.schema),t='<span id="mce_marker" data-mce-type="bookmark">﻿</span>',k={content:d,format:"html"},q.onBeforeSetContent.dispatch(q,k),d=k.content,d.indexOf("{$caret}")==-1&&(d+="{$caret}"),d=d.replace(/\{\$caret\}/,t),q.isCollapsed()||f.getDoc().execCommand("Delete",!1,null),h=q.getNode(),k={context:h.nodeName.toLowerCase()},j=e.parse(d,k),r=j.lastChild;if(r.attr("id")=="mce_marker"){l=r;for(r=r.prev;r;r=r.walk(!0))if(r.type==3||!p.isBlock(r.name)){r.parent.insert(l,r,r.name==="br");break}}if(!k.invalid)d=g.serialize(j),r=h.firstChild,s=h.lastChild,!r||r===s&&r.nodeName==="BR"?p.setHTML(h,d):q.setContent(d);else{q.setContent(t),h=f.selection.getNode(),i=f.getBody(),h.nodeType==9?h=r=i:r=h;while(r!==i)h=r,r=r.parentNode;d=h==i?i.innerHTML:p.getOuterHTML(h),d=g.serialize(e.parse(d.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return g.serialize(j)}))),h==i?p.setHTML(i,d):p.setOuterHTML(h,d)}l=p.get("mce_marker"),m=p.getRect(l),n=p.getViewPort(f.getWin());if(m.y+m.h>n.y+n.h||m.y<n.y||m.x>n.x+n.w||m.x<n.x)u=a.isIE?f.getDoc().documentElement:f.getBody(),u.scrollLeft=m.x,u.scrollTop=m.y-n.h+25;o=p.createRng(),r=l.previousSibling,r&&r.nodeType==3?o.setStart(r,r.nodeValue.length):(o.setStartBefore(l),o.setEndBefore(l)),p.remove(l),q.setRng(o),q.onSetContent.dispatch(q,k),f.addVisual()},mceInsertRawHTML:function(a,b,c){q.setContent("tiny_mce_marker"),f.setContent(f.getContent().replace(/tiny_mce_marker/g,function(){return c}))},mceSetContent:function(a,b,c){f.setContent(c)},"Indent,Outdent":function(a){var c,d,e;c=s.indentation,d=/[a-z%]+$/i.exec(c),c=parseInt(c),!h("InsertUnorderedList")&&!h("InsertOrderedList")?b(q.getSelectedBlocks(),function(b){a=="outdent"?(e=Math.max(0,parseInt(b.style.paddingLeft||0)-c),p.setStyle(b,"paddingLeft",e?e+d:"")):p.setStyle(b,"paddingLeft",parseInt(b.style.paddingLeft||0)+c+d)}):k(a)},mceRepaint:function(){var b;if(a.isGecko)try{n(d),q.getSel()&&q.getSel().selectAllChildren(f.getBody()),q.collapse(d),o()}catch(c){}},mceToggleFormat:function(a,b,c){t.toggle(c)},InsertHorizontalRule:function(){f.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){f.hasVisual=!f.hasVisual,f.addVisual()},mceReplaceContent:function(a,b,c){f.execCommand("mceInsertContent",!1,c.replace(/\{\$selection\}/g,q.getContent({format:"text"})))},mceInsertLink:function(a,b,c){var d;typeof c=="string"&&(c={href:c}),d=p.getParent(q.getNode(),"a"),c.href=c.href.replace(" ","%20"),(!d||!c.href)&&t.remove("link"),c.href&&t.apply("link",c,d)},selectAll:function(){var a=p.getRoot(),b=p.createRng();b.setStart(a,0),b.setEnd(a,a.childNodes.length),f.selection.setRng(b)}}),j({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(a){return l("align"+a.substring(7))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){return l(a)},mceBlockQuote:function(){return l("blockquote")},Outdent:function(){var a;if(s.inline_styles){if((a=p.getParent(q.getStart(),p.isBlock))&&parseInt(a.style.paddingLeft)>0)return d;if((a=p.getParent(q.getEnd(),p.isBlock))&&parseInt(a.style.paddingLeft)>0)return d}return h("InsertUnorderedList")||h("InsertOrderedList")||!s.inline_styles&&!!p.getParent(q.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(a){return p.getParent(q.getNode(),a=="insertunorderedlist"?"UL":"OL")}},"state"),j({"FontSize,FontName":function(a){var b=0,c;if(c=p.getParent(q.getNode(),"span"))a=="fontsize"?b=c.style.fontSize:b=c.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase();return b}},"value"),s.custom_undo_redo&&j({Undo:function(){f.undoManager.undo()},Redo:function(){f.undoManager.redo()}})}}(tinymce),function(a){var b=a.util.Dispatcher;a.UndoManager=function(c){function d(){return a.trim(c.getContent({format:"raw",no_events:1}))}var e,f=0,g=[],h;return e={typing:!1,onAdd:new b(e),onUndo:new b(e),onRedo:new b(e),beforeChange:function(){h=c.selection.getBookmark(2,!0)},add:function(a){var b,i=c.settings,j;a=a||{},a.content=d(),j=g[f];if(j&&j.content==a.content)return null;g[f]&&(g[f].beforeBookmark=h);if(i.custom_undo_redo_levels&&g.length>i.custom_undo_redo_levels){for(b=0;b<g.length-1;b++)g[b]=g[b+1];g.length--,f=g.length}return a.bookmark=c.selection.getBookmark(2,!0),f<g.length-1&&(g.length=f+1),g.push(a),f=g.length-1,e.onAdd.dispatch(e,a),c.isNotDirty=0,a},undo:function(){var a,b;return e.typing&&(e.add(),e.typing=!1),f>0&&(a=g[--f],c.setContent(a.content,{format:"raw"}),c.selection.moveToBookmark(a.beforeBookmark),e.onUndo.dispatch(e,a)),a},redo:function(){var a;return f<g.length-1&&(a=g[++f],c.setContent(a.content,{format:"raw"}),c.selection.moveToBookmark(a.bookmark),e.onRedo.dispatch(e,a)),a},clear:function(){g=[],f=0,e.typing=!1},hasUndo:function(){return f>0||this.typing},hasRedo:function(){return f<g.length-1&&!this.typing}}}}(tinymce),function(a){function b(a){var b,c,d;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(a.nodeName)&&(b?(c=a.cloneNode(!1),c.appendChild(b),b=c):b=d=a.cloneNode(!1),b.removeAttribute("id"));while(a=a.parentNode);if(b)return{wrapper:b,inner:d}}function c(a,b){var c=b.ownerDocument.createRange();return c.setStart(a.endContainer,a.endOffset),c.setEndAfter(b),c.cloneContents().textContent.length==0}function d(a,b,c){var d,e;return b.isEmpty(c)?(d=b.getParent(c,"ul,ol"),b.getParent(d.parentNode,"ul,ol")||(b.split(d,c),e=b.create("p",0,'<br data-mce-bogus="1" />'),b.replace(e,c),a.select(e,1)),l):k}var e=a.dom.Event,f=a.isIE,g=a.isGecko,h=a.isOpera,i=a.each,j=a.extend,k=!0,l=!1;a.create("tinymce.ForceBlocks",{ForceBlocks:function(a){var b=this,c=a.settings,d;b.editor=a,b.dom=a.dom,d=
(c.forced_root_block||"p").toLowerCase(),c.element=d.toUpperCase(),a.onPreInit.add(b.setup,b)},setup:function(){var c=this,d=c.editor,h=d.settings,i=d.dom,j=d.selection,l=d.schema.getBlockElements();if(h.forced_root_block){function m(){var a=j.getStart(),b=d.getBody(),c,e,f,g,k,m,n,o=-16777215;if(!a||a.nodeType!==1)return;while(a!=b){if(l[a.nodeName])return;a=a.parentNode}c=j.getRng(),c.setStart?(e=c.startContainer,f=c.startOffset,g=c.endContainer,k=c.endOffset):(c.item&&(c=d.getDoc().body.createTextRange(),c.moveToElementText(c.item(0))),tmpRng=c.duplicate(),tmpRng.collapse(!0),f=tmpRng.move("character",o)*-1,tmpRng.collapsed||(tmpRng=c.duplicate(),tmpRng.collapse(!1),k=tmpRng.move("character",o)*-1-f));for(a=b.firstChild;a;a)a.nodeType===3||a.nodeType==1&&!l[a.nodeName]?(m||(m=i.create(h.forced_root_block),a.parentNode.insertBefore(m,a)),n=a,a=a.nextSibling,m.appendChild(n)):(m=null,a=a.nextSibling);if(c.setStart)c.setStart(e,f),c.setEnd(g,k),j.setRng(c);else try{c=d.getDoc().body.createTextRange(),c.moveToElementText(b),c.collapse(!0),c.moveStart("character",f),k>0&&c.moveEnd("character",k),c.select()}catch(p){}d.nodeChanged()}d.onKeyUp.add(m),d.onClick.add(m)}h.force_br_newlines&&f&&d.onKeyPress.add(function(a,b){var c;if(b.keyCode==13&&j.getNode().nodeName!="LI")return j.setContent('<br id="__" /> ',{format:"raw"}),c=i.get("__"),c.removeAttribute("id"),j.select(c),j.collapse(),e.cancel(b)}),h.force_p_newlines&&(f?(a.addUnload(function(){c._previousFormats=0}),d.onKeyPress.add(function(a,d){c._previousFormats=0,d.keyCode==13&&!d.shiftKey&&a.selection.isCollapsed()&&h.keep_styles&&(c._previousFormats=b(a.selection.getStart()))}),d.onKeyUp.add(function(a,b){if(b.keyCode==13&&!b.shiftKey){var d=a.selection.getStart(),e=c._previousFormats;!d.hasChildNodes()&&e&&(d=i.getParent(d,i.isBlock),d&&d.nodeName!="LI"&&(d.innerHTML="",c._previousFormats?(d.appendChild(e.wrapper),e.inner.innerHTML="﻿"):d.innerHTML="﻿",j.select(d,1),j.collapse(!0),a.getDoc().execCommand("Delete",!1,null),c._previousFormats=0))}})):d.onKeyPress.add(function(a,b){b.keyCode==13&&!b.shiftKey&&!c.insertPara(b)&&e.cancel(b)}),g&&d.onKeyDown.add(function(a,b){(b.keyCode==8||b.keyCode==46)&&!b.shiftKey&&c.backspaceDelete(b,b.keyCode==8)}));if(a.isWebKit){function n(a){var b=j.getRng(),c,d=i.create("div",null," "),e,f=i.getViewPort(a.getWin()).h;b.insertNode(c=i.create("br")),b.setStartAfter(c),b.setEndAfter(c),j.setRng(b),j.getSel().focusNode==c.previousSibling&&(j.select(i.insertAfter(i.doc.createTextNode(" "),c)),j.collapse(k)),i.insertAfter(d,c),e=i.getPos(d).y,i.remove(d),e>f&&a.getWin().scrollTo(0,e)}d.onKeyPress.add(function(a,b){b.keyCode==13&&(b.shiftKey||h.force_br_newlines&&!i.getParent(j.getNode(),"h1,h2,h3,h4,h5,h6,ol,ul"))&&(n(a),e.cancel(b))})}f&&h.element!="P"&&(d.onKeyPress.add(function(a,b){c.lastElm=j.getNode().nodeName}),d.onKeyUp.add(function(a,b){var d,e=j.getNode(),f=a.getBody();f.childNodes.length===1&&e.nodeName=="P"?(e=i.rename(e,h.element),j.select(e),j.collapse(),a.nodeChanged()):b.keyCode==13&&!b.shiftKey&&c.lastElm!="P"&&(d=i.getParent(e,"p"),d&&(i.rename(d,h.element),a.nodeChanged()))}))},getParentBlock:function(a){var b=this.dom;return b.getParent(a,b.isBlock)},insertPara:function(a){function b(a,b){var c=[],d,e,f;a.innerHTML="";if(j.keep_styles){e=b;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(e.nodeName)&&(d=e.cloneNode(l),g.setAttrib(d,"id",""),c.push(d));while(e=e.parentNode)}if(c.length>0){for(f=c.length-1,d=a;f>=0;f--)d=d.appendChild(c[f]);return c[0].innerHTML=h?" ":"<br />",c[0]}a.innerHTML=h?" ":"<br />"}var e=this,f=e.editor,g=f.dom,i=f.getDoc(),j=f.settings,m=f.selection.getSel(),n=m.getRangeAt(0),o=i.body,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E=g.getViewPort(f.getWin()),F,G,H;f.undoManager.beforeChange(),p=i.createRange(),p.setStart(m.anchorNode,m.anchorOffset),p.collapse(k),q=i.createRange(),q.setStart(m.focusNode,m.focusOffset),q.collapse(k),r=p.compareBoundaryPoints(p.START_TO_END,q)<0,s=r?m.anchorNode:m.focusNode,t=r?m.anchorOffset:m.focusOffset,u=r?m.focusNode:m.anchorNode,v=r?m.focusOffset:m.anchorOffset;if(s===u&&/^(TD|TH)$/.test(s.nodeName))return s.firstChild.nodeName=="BR"&&g.remove(s.firstChild),s.childNodes.length==0?(f.dom.add(s,j.element,null,"<br />"),A=f.dom.add(s,j.element,null,"<br />")):(D=s.innerHTML,s.innerHTML="",f.dom.add(s,j.element,null,D),A=f.dom.add(s,j.element,null,"<br />")),n=i.createRange(),n.selectNodeContents(A),n.collapse(1),f.selection.setRng(n),l;s==o&&u==o&&o.firstChild&&f.dom.isBlock(o.firstChild)&&(s=u=s.firstChild,t=v=0,p=i.createRange(),p.setStart(s,0),q=i.createRange(),q.setStart(u,0)),i.body.hasChildNodes()||i.body.appendChild(g.create("br")),s=s.nodeName=="HTML"?i.body:s,s=s.nodeName=="BODY"?s.firstChild:s,u=u.nodeName=="HTML"?i.body:u,u=u.nodeName=="BODY"?u.firstChild:u,w=e.getParentBlock(s),x=e.getParentBlock(u),y=w?w.nodeName:j.element;if(D=e.dom.getParent(w,"li,pre"))return D.nodeName=="LI"?d(f.selection,e.dom,D):k;w&&(w.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(g.getStyle(w,"position",1)))&&(y=j.element,w=null),x&&(x.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(g.getStyle(w,"position",1)))&&(y=j.element,x=null);if(/(TD|TABLE|TH|CAPTION)/.test(y)||w&&y=="DIV"&&/left|right/gi.test(g.getStyle(w,"float",1)))y=j.element,w=x=null;z=w&&w.nodeName==y?w.cloneNode(0):f.dom.create(y),A=x&&x.nodeName==y?x.cloneNode(0):f.dom.create(y),A.removeAttribute("id"),/^(H[1-6])$/.test(y)&&c(n,w)&&(A=f.dom.create(j.element)),D=B=s;do{if(D==o||D.nodeType==9||e.dom.isBlock(D)||/(TD|TABLE|TH|CAPTION)/.test(D.nodeName))break;B=D}while(D=D.previousSibling?D.previousSibling:D.parentNode);D=C=u;do{if(D==o||D.nodeType==9||e.dom.isBlock(D)||/(TD|TABLE|TH|CAPTION)/.test(D.nodeName))break;C=D}while(D=D.nextSibling?D.nextSibling:D.parentNode);B.nodeName==y?p.setStart(B,0):p.setStartBefore(B),p.setEnd(s,t),z.appendChild(p.cloneContents()||i.createTextNode(""));try{q.setEndAfter(C)}catch(I){}return q.setStart(u,v),A.appendChild(q.cloneContents()||i.createTextNode("")),n=i.createRange(),!B.previousSibling&&B.parentNode.nodeName==y?n.setStartBefore(B.parentNode):p.startContainer.nodeName==y&&p.startOffset==0?n.setStartBefore(p.startContainer):n.setStart(p.startContainer,p.startOffset),!C.nextSibling&&C.parentNode.nodeName==y?n.setEndAfter(C.parentNode):n.setEnd(q.endContainer,q.endOffset),n.deleteContents(),h&&f.getWin().scrollTo(0,E.y),z.firstChild&&z.firstChild.nodeName==y&&(z.innerHTML=z.firstChild.innerHTML),A.firstChild&&A.firstChild.nodeName==y&&(A.innerHTML=A.firstChild.innerHTML),g.isEmpty(z)&&b(z,s),g.isEmpty(A)&&(H=b(A,u)),h&&parseFloat(opera.version())<9.5?(n.insertNode(z),n.insertNode(A)):(n.insertNode(A),n.insertNode(z)),A.normalize(),z.normalize(),f.selection.select(A,!0),f.selection.collapse(!0),F=f.dom.getPos(A).y,(F<E.y||F+25>E.y+E.h)&&f.getWin().scrollTo(0,F<E.y?F:F-E.h+25),f.undoManager.add(),l},backspaceDelete:function(b,c){var d=this,f=d.editor,g=f.getBody(),h=f.dom,i,j=f.selection,k=j.getRng(),m=k.startContainer,i,n,o,p;if(!c&&k.collapsed&&m.nodeType==1&&k.startOffset==m.childNodes.length){p=new a.dom.TreeWalker(m.lastChild,m);for(i=m.lastChild;i;i=p.prev())if(i.nodeType==3){k.setStart(i,i.nodeValue.length),k.collapse(!0),j.setRng(k);return}}if(m&&f.dom.isBlock(m)&&!/^(TD|TH)$/.test(m.nodeName)&&c)if(m.childNodes.length==0||m.childNodes.length==1&&m.firstChild.nodeName=="BR"){i=m;while((i=i.previousSibling)&&!f.dom.isBlock(i));if(i){if(m!=g.firstChild){n=f.dom.doc.createTreeWalker(i,NodeFilter.SHOW_TEXT,null,l);while(o=n.nextNode())i=o;k=f.getDoc().createRange(),k.setStart(i,i.nodeValue?i.nodeValue.length:0),k.setEnd(i,i.nodeValue?i.nodeValue.length:0),j.setRng(k),f.dom.remove(m)}return e.cancel(b)}}}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each,e=a.extend;a.create("tinymce.ControlManager",{ControlManager:function(b,c){var e=this,f;c=c||{},e.editor=b,e.controls={},e.onAdd=new a.util.Dispatcher(e),e.onPostRender=new a.util.Dispatcher(e),e.prefix=c.prefix||b.id+"_",e._cls={},e.onPostRender.add(function(){d(e.controls,function(a){a.postRender()})})},get:function(a){return this.controls[this.prefix+a]||this.controls[a]},setActive:function(a,b){var c=null;return(c=this.get(a))&&c.setActive(b),c},setDisabled:function(a,b){var c=null;return(c=this.get(a))&&c.setDisabled(b),c},add:function(a){var b=this;return a&&(b.controls[a.id]=a,b.onAdd.dispatch(a,b)),a},createControl:function(a){var b,c=this,e=c.editor;d(e.plugins,function(d){if(d.createControl){b=d.createControl(a,c);if(b)return!1}});switch(a){case"|":case"separator":return c.createSeparator()}return!b&&e.buttons&&(b=e.buttons[a])?c.createButton(a,b):c.add(b)},createDropMenu:function(b,c,d){var f=this,g=f.editor,h,i,j,k;c=e({"class":"mceDropDown",constrain:g.settings.constrain_menus},c),c["class"]=c["class"]+" "+g.getParam("skin")+"Skin";if(j=g.getParam("skin_variant"))c["class"]+=" "+g.getParam("skin")+"Skin"+j.substring(0,1).toUpperCase()+j.substring(1);return b=f.prefix+b,k=d||f._cls.dropmenu||a.ui.DropMenu,h=f.controls[b]=new k(b,c),h.onAddItem.add(function(a,b){var c=b.settings;c.title=g.getLang(c.title,c.title),c.onclick||(c.onclick=function(a){c.cmd&&g.execCommand(c.cmd,c.ui||!1,c.value)})}),g.onRemove.add(function(){h.destroy()}),a.isIE&&(h.onShowMenu.add(function(){g.focus(),i=g.selection.getBookmark(1)}),h.onHideMenu.add(function(){i&&(g.selection.moveToBookmark(i),i=0)})),f.add(h)},createListBox:function(b,d,f){function g(b){return b.settings.use_accessible_selects&&!a.isGecko}var h=this,i=h.editor,j,k,l;return h.get(b)?null:(d.title=i.translate(d.title),d.scope=d.scope||i,d.onselect||(d.onselect=function(a){i.execCommand(d.cmd,d.ui||!1,a||d.value)}),d=e({title:d.title,"class":"mce_"+b,scope:d.scope,control_manager:h},d),b=h.prefix+b,i.settings.use_native_selects||g(i)?k=new a.ui.NativeListBox(b,d):(l=f||h._cls.listbox||a.ui.ListBox,k=new l(b,d,i)),h.controls[b]=k,a.isWebKit&&k.onPostRender.add(function(a,b){c.add(b,"mousedown",function(){i.bookmark=i.selection.getBookmark(1)}),c.add(b,"focus",function(){i.selection.moveToBookmark(i.bookmark),i.bookmark=null})}),k.hideMenu&&i.onMouseDown.add(k.hideMenu,k),h.add(k))},createButton:function(b,c,d){var f=this,g=f.editor,h,i,j;return f.get(b)?null:(c.title=g.translate(c.title),c.label=g.translate(c.label),c.scope=c.scope||g,!c.onclick&&!c.menu_button&&(c.onclick=function(){g.execCommand(c.cmd,c.ui||!1,c.value)}),c=e({title:c.title,"class":"mce_"+b,unavailable_prefix:g.getLang("unavailable",""),scope:c.scope,control_manager:f},c),b=f.prefix+b,c.menu_button?(j=d||f._cls.menubutton||a.ui.MenuButton,i=new j(b,c,g),g.onMouseDown.add(i.hideMenu,i)):(j=f._cls.button||a.ui.Button,i=new j(b,c,g)),f.add(i))},createMenuButton:function(a,b,c){return b=b||{},b.menu_button=1,this.createButton(a,b,c)},createSplitButton:function(b,c,d){var f=this,g=f.editor,h,i,j;return f.get(b)?null:(c.title=g.translate(c.title),c.scope=c.scope||g,c.onclick||(c.onclick=function(a){g.execCommand(c.cmd,c.ui||!1,a||c.value)}),c.onselect||(c.onselect=function(a){g.execCommand(c.cmd,c.ui||!1,a||c.value)}),c=e({title:c.title,"class":"mce_"+b,scope:c.scope,control_manager:f},c),b=f.prefix+b,j=d||f._cls.splitbutton||a.ui.SplitButton,i=f.add(new j(b,c,g)),g.onMouseDown.add(i.hideMenu,i),i)},createColorSplitButton:function(b,c,d){var f=this,g=f.editor,h,i,j,k;return f.get(b)?null:(c.title=g.translate(c.title),c.scope=c.scope||g,c.onclick||(c.onclick=function(b){a.isIE&&(k=g.selection.getBookmark(1)),g.execCommand(c.cmd,c.ui||!1,b||c.value)}),c.onselect||(c.onselect=function(a){g.execCommand(c.cmd,c.ui||!1,a||c.value)}),c=e({title:c.title,"class":"mce_"+b,menu_class:g.getParam("skin")+"Skin",scope:c.scope,more_colors_title:g.getLang("more_colors")},c),b=f.prefix+b,j=d||f._cls.colorsplitbutton||a.ui.ColorSplitButton,i=new j(b,c,g),g.onMouseDown.add(i.hideMenu,i),g.onRemove.add(function(){i.destroy()}),a.isIE&&(i.onShowMenu.add(function(){g.focus(),k=g.selection.getBookmark(1)}),i.onHideMenu.add(function(){k&&(g.selection.moveToBookmark(k),k=0)})),f.add(i))},createToolbar:function(b,c,d){var e,f=this,g;return b=f.prefix+b,g=d||f._cls.toolbar||a.ui.Toolbar,e=new g(b,c,f.editor),f.get(b)?null:f.add(e)},createToolbarGroup:function(b,c,d){var e,f=this,g;return b=f.prefix+b,g=d||this._cls.toolbarGroup||a.ui.ToolbarGroup,e=new g(b,c,f.editor),f.get(b)?null:f.add(e)},createSeparator:function(b){var c=b||this._cls.separator||a.ui.Separator;return new c},setControlType:function(a,b){return this._cls[a.toLowerCase()]=b},destroy:function(){d(this.controls,function(a){a.destroy()}),this.controls=null}})}(tinymce),function(a){var b=a.util.Dispatcher,c=a.each,d=a.isIE,e=a.isOpera;a.create("tinymce.WindowManager",{WindowManager:function(a){var c=this;c.editor=a,c.onOpen=new b(c),c.onClose=new b(c),c.params={},c.features={}},open:function(b,f){var g=this,h="",i,j,k=g.editor.settings.dialog_type=="modal",l,m,n,o=a.DOM.getViewPort(),p;b=b||{},f=f||{},m=e?o.w:screen.width,n=e?o.h:screen.height,b.name=b.name||"mc_"+(new Date).getTime(),b.width=parseInt(b.width||320),b.height=parseInt(b.height||240),b.resizable=!0,b.left=b.left||parseInt(m/2)-b.width/2,b.top=b.top||parseInt(n/2)-b.height/2,f.inline=!1,f.mce_width=b.width,f.mce_height=b.height,f.mce_auto_focus=b.auto_focus,k&&d&&(b.center=!0,b.help=!1,b.dialogWidth=b.width+"px",b.dialogHeight=b.height+"px",b.scroll=b.scrollbars||!1),c(b,function(b,c){a.is(b,"boolean")&&(b=b?"yes":"no"),/^(name|url)$/.test(c)||(d&&k?h+=(h?";":"")+c+":"+b:h+=(h?",":"")+c+"="+b)}),g.features=b,g.params=f,g.onOpen.dispatch(g,b,f),p=b.url||b.file,p=a._addVer(p);try{d&&k?(l=1,window.showModalDialog(p,window,h)):l=window.open(p,b.name,h)}catch(q){}l||alert(g.editor.getLang("popup_blocked"))},close:function(a){a.close(),this.onClose.dispatch(this)},createInstance:function(b,c,d,e,f,g){var h=a.resolve(b);return new h(c,d,e,f,g)},confirm:function(a,b,c,d){d=d||window,b.call(c||this,d.confirm(this._decode(this.editor.getLang(a,a))))},alert:function(a,b,c,d){var e=this;d=d||window,d.alert(e._decode(e.editor.getLang(a,a))),b&&b.call(c||e)},resizeBy:function(a,b,c){c.resizeBy(a,b)},_decode:function(b){return a.DOM.decode(b).replace(/\\n/g,"\n")}})}(tinymce),function(a){a.Formatter=function(b){function c(a){return a instanceof Array}function d(a,b){return F.getParents(a,b,F.getRoot())}function e(a){return a.nodeType===1&&(a.face==="mceinline"||a.style.fontFamily==="mceinline")}function f(a){return a?D[a]:D}function g(a,b){a&&(typeof a!="string"?E(a,function(a,b){g(b,a)}):(b=b.length?b:[b],E(b,function(a){a.deep===R&&(a.deep=!a.selector),a.split===R&&(a.split=!a.selector||a.inline),a.remove===R&&a.selector&&!a.inline&&(a.remove="none"),a.selector&&a.inline&&(a.mixed=!0,a.block_expand=!0),typeof a.classes=="string"&&(a.classes=a.classes.split(/\s+/))}),D[a]=b))}function h(c,d,g){function h(a){var b=a.startContainer,c=a.startOffset,d,e;if(b.nodeType==1||b.nodeValue===""){b=b.nodeType==1?b.childNodes[c]:b;if(b){d=new H(b,b.parentNode);for(e=d.current();e;e=d.next())if(e.nodeType==3&&!s(e)){a.setStart(e,0);break}}}return a}function i(a,b){b=b||q,a&&(b.onformat&&b.onformat(a,b,d,g),E(b.styles,function(b,c){F.setStyle(a,c,r(b,d))}),E(b.attributes,function(b,c){F.setAttrib(a,c,r(b,d))}),E(b.classes,function(b){b=r(b,d),F.hasClass(a,b)||F.addClass(a,b)}))}function j(){function a(a,b){var c=new H(b);for(g=c.current();g;g=c.prev())if(g.childNodes.length>1||g==a)return g}var c=b.selection.getRng(),d=c.startContainer,e=c.endContainer;if(d!=e&&c.endOffset==0){var f=a(d,e),h=f.nodeType==3?f.length:f.childNodes.length;c.setEnd(f,h)}return c}function l(b,c,d,e,f){var g=[],h=-1,i,j=-1,k=-1,l;return E(b.childNodes,function(a,b){if(a.nodeName==="UL"||a.nodeName==="OL")return h=b,i=a,!1}),E(b.childNodes,function(a,b){a.nodeName==="SPAN"&&F.getAttrib(a,"data-mce-type")=="bookmark"&&(a.id==c.id+"_start"?j=b:a.id==c.id+"_end"&&(k=b))}),h<=0||j<h&&k>h?(E(a.grep(b.childNodes),f),0):(l=d.cloneNode(P),E(a.grep(b.childNodes),function(a,b){if(j<h&&b<h||j>h&&b>h)g.push(a),a.parentNode.removeChild(a)}),j<h?b.insertBefore(l,i):j>h&&b.insertBefore(l,i.nextSibling),e.push(l),E(g,function(a){l.appendChild(a)}),l)}function m(b,f,g){var h=[],j,m;j=q.inline||q.block,m=F.create(j),i(m),I.walk(b,function(b){function o(b){var s=b.nodeName.toLowerCase(),t=b.parentNode.nodeName.toLowerCase(),u;if(p(s,"br")){r=0,q.block&&F.remove(b);return}if(q.wrapper&&k(b,c,d)){r=0;return}if(q.block&&!q.wrapper&&A(s)){b=F.rename(b,j),i(b),h.push(b),r=0;return}if(q.selector){E(n,function(a){if("collapsed"in a&&a.collapsed!==D)return;F.is(b,a.selector)&&!e(b)&&(i(b,a),u=!0)});if(!q.inline||u){r=0;return}}!J(j,s)||!J(t,j)||!g&&b.nodeType===3&&b.nodeValue.length===1&&b.nodeValue.charCodeAt(0)===65279||b.id==="_mce_caret"?s=="li"&&f?r=l(b,f,m,h,o):(r=0,E(a.grep(b.childNodes),o),r=0):(r||(r=m.cloneNode(P),b.parentNode.insertBefore(r,b),h.push(r)),r.appendChild(b))}var r;E(b,o)}),q.wrap_links===!1&&E(h,function(b){function c(b){var d,e,f;if(b.nodeName==="A"){e=m.cloneNode(P),h.push(e),f=a.grep(b.childNodes);for(d=0;d<f.length;d++)e.appendChild(f[d]);b.appendChild(e)}E(a.grep(b.childNodes),c)}c(b)}),E(h,function(a){function b(a){var b=0;return E(a.childNodes,function(a){!s(a)&&!y(a)&&b++}),b}function f(a){var b,c;return E(a.childNodes,function(a){if(a.nodeType==1&&!y(a)&&!e(a))return b=a,P}),b&&o(b,q)&&(c=b.cloneNode(P),i(c),F.replace(c,a,Q),F.remove(b,1)),c||a}var g;g=b(a);if((h.length>1||!K(a))&&g===0){F.remove(a,1);return}if(q.inline||q.wrapper){!q.exact&&g===1&&(a=f(a)),E(n,function(b){E(F.select(b.inline,a),function(a){var c;if(b.wrap_links===!1){c=a.parentNode;do if(c.nodeName==="A")return;while(c=c.parentNode)}v(b,d,a,b.exact?a:null)})});if(k(a.parentNode,c,d))return F.remove(a,1),a=0,Q;q.merge_with_parents&&F.getParent(a.parentNode,function(b){if(k(b,c,d))return F.remove(a,1),a=0,Q}),a&&q.merge_siblings!==!1&&(a=z(x(a),a),a=z(a,x(a,Q)))}})}var n=f(c),q=n[0],t,w,B,D=G.isCollapsed();if(q)if(g)g.nodeType?(w=F.createRng(),w.setStartBefore(g),w.setEndAfter(g),m(u(w,n),null,!0)):m(g,null,!0);else if(!D||!q.inline||F.select("td.mceSelected,th.mceSelected").length){var L=b.selection.getNode();b.selection.setRng(j()),t=G.getBookmark(),m(u(G.getRng(Q),n),t),q.styles&&(q.styles.color||q.styles.textDecoration)&&(a.walk(L,T,"childNodes"),T(L)),G.moveToBookmark(t),G.setRng(h(G.getRng(Q))),b.nodeChanged()}else C("apply",c,d)}function i(c,e,g){function h(a){var b=a.startContainer,c=a.startOffset,d,e,f,g;b.nodeType==3&&c>=b.nodeValue.length-1&&(b=b.parentNode,c=M(b)+1);if(b.nodeType==1){f=b.childNodes,b=f[Math.min(c,f.length-1)],d=new H(b),c>f.length-1&&d.next();for(e=d.current();e;e=d.next())if(e.nodeType==3&&!s(e)){g=F.create("a",null,N),e.parentNode.insertBefore(g,e),a.setStart(e,0),G.setRng(a),F.remove(g);return}}}function i(b){var c,d,f;c=a.grep(b.childNodes);for(d=0,f=q.length;d<f;d++)if(v(q[d],e,b,b))break;if(r.deep)for(d=0,f=c.length;d<f;d++)i(c[d])}function j(a){var b;return E(d(a.parentNode).reverse(),function(a){var d;!b&&a.id!="_start"&&a.id!="_end"&&(d=k(a,c,e),d&&d.split!==!1&&(b=a))}),b}function m(a,b,c,d){var f,g,h,i,j,k;if(a){k=a.parentNode;for(f=b.parentNode;f&&f!=k;f=f.parentNode){g=f.cloneNode(P);for(j=0;j<q.length;j++)if(v(q[j],e,g,g)){g=0;break}g&&(h&&g.appendChild(h),i||(i=g),h=g)}d&&(!r.mixed||!K(a))&&(b=F.split(a,b)),h&&(c.parentNode.insertBefore(h,c),i.appendChild(c))}return b}function n(a){return m(j(a),a,a,!0)}function o(a){var b=F.get(a?"_start":"_end"),c=b[a?"firstChild":"lastChild"];return y(c)&&(c=c[a?"firstChild":"lastChild"]),F.remove(b,!0),c}function p(a){var c,d;a=u(a,q,Q),r.split&&(c=B(a,Q),d=B(a),c!=d?(c=t(c,"span",{id:"_start","data-mce-type":"bookmark"}),d=t(d,"span",{id:"_end","data-mce-type":"bookmark"}),n(c),n(d),c=o(Q),d=o()):c=d=n(c),a.startContainer=c.parentNode,a.startOffset=M(c),a.endContainer=d.parentNode,a.endOffset=M(d)+1),I.walk(a,function(a){E(a,function(a){i(a),a.nodeType===1&&b.dom.getStyle(a,"text-decoration")==="underline"&&a.parentNode&&S(a.parentNode)==="underline"&&v({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,a)})})}var q=f(c),r=q[0],w,x,z;if(g){g.nodeType?(z=F.createRng(),z.setStartBefore(g),z.setEndAfter(g),p(z)):p(g);return}!G.isCollapsed()||!r.inline||F.select("td.mceSelected,th.mceSelected").length?(w=G.getBookmark(),p(G.getRng(Q)),G.moveToBookmark(w),r.inline&&l(c,e,G.getStart())&&h(G.getRng(!0)),b.nodeChanged()):C("remove",c,e),a.isWebKit&&b.execCommand("mceCleanup")}function j(a,b,c){var d=f(a);!l(a,b,c)||"toggle"in d[0]&&!d[0].toggle?h(a,b,c):i(a,b,c)}function k(a,b,c,d){function e(a,b,e){var f,g,h=b[e],i;if(b.onmatch)return b.onmatch(a,b,e);if(h)if(h.length===R){for(f in h)if(h.hasOwnProperty(f)){e==="attributes"?g=F.getAttrib(a,f):g=q(a,f);if(d&&!g&&!b.exact)return;if((!d||b.exact)&&!p(g,r(h[f],c)))return}}else for(i=0;i<h.length;i++)if(e==="attributes"?F.getAttrib(a,h[i]):q(a,h[i]))return b;return b}var g=f(b),h,i,j;if(g&&a)for(i=0;i<g.length;i++){h=g[i];if(o(a,h)&&e(a,h,"attributes")&&e(a,h,"styles")){if(j=h.classes)for(i=0;i<j.length;i++)if(!F.hasClass(a,j[i]))return;return h}}}function l(a,b,c){function d(c){return c=F.getParent(c,function(c){return!!k(c,a,b,!0)}),k(c,a,b)}var e;return c?d(c):(c=G.getNode(),d(c)?Q:(e=G.getStart(),e!=c&&d(e)?Q:P))}function m(a,b){var c,d=[],e={},f,g,h;return c=G.getStart(),F.getParent(c,function(c){var f,g;for(f=0;f<a.length;f++)g=a[f],!e[g]&&k(c,g,b)&&(e[g]=!0,d.push(g))}),d}function n(a){var b=f(a),c,e,g,h,i;if(b){c=G.getStart(),e=d(c);for(h=b.length-1;h>=0;h--){i=b[h].selector;if(!i)return Q;for(g=e.length-1;g>=0;g--)if(F.is(e[g],i))return Q}}return P}function o(a,b){if(p(a,b.inline))return Q;if(p(a,b.block))return Q;if(b.selector)return F.is(a,b.selector)}function p(a,b){return a=a||"",b=b||"",a=""+(a.nodeName||a),b=""+(b.nodeName||b),a.toLowerCase()==b.toLowerCase()}function q(a,b){var c=F.getStyle(a,b);if(b=="color"||b=="backgroundColor")c=F.toHex(c);return b=="fontWeight"&&c==700&&(c="bold"),""+c}function r(a,b){return typeof a!="string"?a=a(b):b&&(a=a.replace(/%(\w+)/g,function(a,c){return b[c]||a})),a}function s(a){return a&&a.nodeType===3&&/^([\t \r\n]+|)$/.test(a.nodeValue)}function t(a,b,c){var d=F.create(b,c);return a.parentNode.insertBefore(d,a),d.appendChild(a),d}function u(a,c,e){function f(a){var b,d,e,f,g;b=d=a?h:j,g=a?"previousSibling":"nextSibling",root=F.getRoot();if(b.nodeType==3&&!s(b))if(a?i>0:k<b.nodeValue.length)return b;for(;;){if(d==root||!c[0].block_expand&&K(d))return d;for(f=d[g];f;f=f[g])if(!y(f)&&!s(f))return d;d=d.parentNode}return b}function g(a,b){b===R&&(b=a.nodeType===3?a.length:a.childNodes.length);while(a&&a.hasChildNodes())a=a.childNodes[b],a&&(b=a.nodeType===3?a.length:a.childNodes.length);return{node:a,offset:b}}var h=a.startContainer,i=a.startOffset,j=a.endContainer,k=a.endOffset,l,m,n,o;h.nodeType==1&&h.hasChildNodes()&&(m=h.childNodes.length-1,h=h.childNodes[i>m?m:i],h.nodeType==3&&(i=0)),j.nodeType==1&&j.hasChildNodes()&&(m=j.childNodes.length-1,j=j.childNodes[k>m?m:k-1],j.nodeType==3&&(k=j.nodeValue.length));if(y(h.parentNode)||y(h))h=y(h)?h:h.parentNode,h=h.nextSibling||h,h.nodeType==3&&(i=0);if(y(j.parentNode)||y(j))j=y(j)?j:j.parentNode,j=j.previousSibling||j,j.nodeType==3&&(k=j.length);if(c[0].inline){if(a.collapsed){function q(a,c,d){function f(a,b){var c,f,g=a.nodeValue;return typeof b=="undefined"&&(b=d?g.length:0),d?(c=g.lastIndexOf(" ",b),f=g.lastIndexOf(" ",b),c=c>f?c:f,c!==-1&&!e&&c++):(c=g.indexOf(" ",b),f=g.indexOf(" ",b),c=c!==-1&&(f===-1||c<f)?c:f),c}var g,h,i,j;if(a.nodeType===3){i=f(a,c);if(i!==-1)return{container:a,offset:i};j=a}g=new H(a,F.getParent(a,K)||b.getBody());while(h=g[d?"prev":"next"]())if(h.nodeType===3){j=h,i=f(h);if(i!==-1)return{container:h,offset:i}}else if(K(h))break;if(j)return d?c=0:c=j.length,{container:j,offset:c}}o=q(h,i,!0),o&&(h=o.container,i=o.offset),o=q(j,k),o&&(j=o.container,k=o.offset)}n=g(j,k);if(n.node){while(n.node&&n.offset===0&&n.node.previousSibling)n=g(n.node.previousSibling);n.node&&n.offset>0&&n.node.nodeType===3&&n.node.nodeValue.charAt(n.offset-1)===" "&&(n.offset>1?(j=n.node,j.splitText(n.offset-1)):!n.node.previousSibling)}}if(c[0].inline||c[0].block_expand){if(!c[0].inline||h.nodeType!=3||i===0)h=f(!0);if(!c[0].inline||j.nodeType!=3||k===j.nodeValue.length)j=f()}if(c[0].selector&&c[0].expand!==P&&!c[0].inline){function r(b,e){var f,g,h,i;b.nodeType==3&&b.nodeValue.length==0&&b[e]&&(b=b[e]),f=d(b);for(g=0;g<f.length;g++)for(h=0;h<c.length;h++){i=c[h];if("collapsed"in i&&i.collapsed!==a.collapsed)continue;if(F.is(f[g],i.selector))return f[g]}return b}h=r(h,"previousSibling"),j=r(j,"nextSibling")}if(c[0].block||c[0].selector){function t(a,b,e){var f;c[0].wrapper||(f=F.getParent(a,c[0].block)),f||(f=F.getParent(a.nodeType==3?a.parentNode:a,K)),f&&c[0].wrapper&&(f=d(f,"ul,ol").reverse()[0]||f);if(!f){f=a;while(f[b]&&!K(f[b])){f=f[b];if(p(f,"br"))break}}return f||a}h=t(h,"previousSibling"),j=t(j,"nextSibling"),c[0].block&&(K(h)||(h=f(!0)),K(j)||(j=f()))}return h.nodeType==1&&(i=M(h),h=h.parentNode),j.nodeType==1&&(k=M(j)+1,j=j.parentNode),{startContainer:h,startOffset:i,endContainer:j,endOffset:k}}function v(a,b,c,d){var e,f,g;if(!o(c,a))return P;if(a.remove!="all"){E(a.styles,function(a,e){a=r(a,b),typeof e=="number"&&(e=a,d=0),(!d||p(q(d,e),a))&&F.setStyle(c,e,""),g=1}),g&&F.getAttrib(c,"style")==""&&(c.removeAttribute("style"),c.removeAttribute("data-mce-style")),E(a.attributes,function(a,e){var f;a=r(a,b),typeof e=="number"&&(e=a,d=0);if(!d||p(F.getAttrib(d,e),a)){if(e=="class"){a=F.getAttrib(c,e);if(a){f="",E(a.split(/\s+/),function(a){/mce\w+/.test(a)&&(f+=(f?" ":"")+a)});if(f){F.setAttrib(c,e,f);return}}}e=="class"&&c.removeAttribute("className"),O.test(e)&&c.removeAttribute("data-mce-"+e),c.removeAttribute(e)}}),E(a.classes,function(a){a=r(a,b),(!d||F.hasClass(d,a))&&F.removeClass(c,a)}),f=F.getAttribs(c);for(e=0;e<f.length;e++)if(f[e].nodeName.indexOf("_")!==0)return P}if(a.remove!="none")return w(c,a),Q}function w(b,c){var d=b.parentNode,e;if(c.block)if(!L){function f(a,b,c){return a=x(a,b,c),!a||a.nodeName=="BR"||K(a)}K(b)&&!K(d)&&(!f(b,P)&&!f(b.firstChild,Q,1)&&b.insertBefore(F.create("br"),b.firstChild),!f(b,Q)&&!f(b.lastChild,P,1)&&b.appendChild(F.create("br")))}else d==F.getRoot()&&(!c.list_block||!p(b,c.list_block))&&E(a.grep(b.childNodes),function(a){J(L,a.nodeName.toLowerCase())?e?e.appendChild(a):e=t(a,L):e=0});if(c.selector&&c.inline&&!p(c.inline,b))return;F.remove(b,1)}function x(a,b,c){if(a){b=b?"nextSibling":"previousSibling";for(a=c?a:a[b];a;a=a[b])if(a.nodeType==1||!s(a))return a}}function y(a){return a&&a.nodeType==1&&a.getAttribute("data-mce-type")=="bookmark"}function z(b,c){function d(a,b){function c(a){var b={};return E(F.getAttribs(a),function(c){var d=c.nodeName.toLowerCase();d.indexOf("_")!==0&&d!=="style"&&(b[d]=F.getAttrib(a,d))}),b}function d(a,b){var c,d;for(d in a)if(a.hasOwnProperty(d)){c=b[d];if(c===R)return P;if(a[d]!=c)return P;delete b[d]}for(d in b)if(b.hasOwnProperty(d))return P;return Q}return a.nodeName!=b.nodeName?P:d(c(a),c(b))?d(F.parseStyle(F.getAttrib(a,"style")),F.parseStyle(F.getAttrib(b,"style")))?Q:P:P}var e,f,g;if(b&&c){function h(a,b){for(f=a;f;f=f[b]){if(f.nodeType==3&&f.nodeValue.length!==0)return a;if(f.nodeType==1&&!y(f))return f}return a}b=h(b,"previousSibling"),c=h(c,"nextSibling");if(d(b,c)){for(f=b.nextSibling;f&&f!=c;)g=f,f=f.nextSibling,b.appendChild(g);return F.remove(c),E(a.grep(c.childNodes),function(a){b.appendChild(a)}),b}}return c}function A(a){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(a)}function B(a,c){var d,e,f,g;return d=a[c?"startContainer":"endContainer"],e=a[c?"startOffset":"endOffset"],d.nodeType==1&&(f=d.childNodes.length-1,!c&&e&&e--,d=d.childNodes[e>f?f:e]),d.nodeType===3&&c&&e>=d.nodeValue.length&&(d=(new H(d,b.getBody())).next()||d),d.nodeType===3&&!c&&e==0&&(d=(new H(d,b.getBody())).prev()||d),d}function C(c,d,e){function g(a){var c=F.create("span",{id:r,"data-mce-bogus":!0,style:s?"color:red":""});return a&&c.appendChild(b.getDoc().createTextNode(q)),c}function j(a,b){while(a){if(a.nodeType===3&&a.nodeValue!==q||a.childNodes.length>1)return!1;b&&a.nodeType===1&&b.push(a),a=a.firstChild}return!0}function l(a){while(a){if(a.id===r)return a;a=a.parentNode}}function m(a){var b;if(a){b=new H(a,a);for(a=b.current();a;a=b.next())if(a.nodeType===3)return a}}function n(a,b){var c,d;if(!a){a=l(G.getStart());if(!a)while(a=F.get(r))n(a,!1)}else d=G.getRng(!0),j(a)?(b!==!1&&(d.setStartBefore(a),d.setEndBefore(a)),F.remove(a)):(c=m(a),c=c.deleteData(0,1),F.remove(a,1)),G.setRng(d)}function o(){var a,b,c,i,j,k,n;a=G.getRng(!0),i=a.startOffset,k=a.startContainer,n=k.nodeValue,b=l(G.getStart()),b&&(c=m(b)),n&&i>0&&i<n.length&&/\w/.test(n.charAt(i))&&/\w/.test(n.charAt(i-1))?(j=G.getBookmark(),a.collapse(!0),a=u(a,f(d)),a=I.split(a),h(d,e,a),G.moveToBookmark(j)):(!b||c.nodeValue!==q?(b=g(!0),c=b.firstChild,a.insertNode(b),i=1,h(d,e,b)):h(d,e,b),G.setCursorLocation(c,i))}function p(){var a=G.getRng(!0),b,c,h,j,l,m,n=[],o,p;b=a.startContainer,c=a.startOffset,l=b;if(b.nodeType==3){if(c!=b.nodeValue.length||b.nodeValue===q)j=!0;l=l.parentNode}while(l){if(k(l,d,e)){m=l;break}l.nextSibling&&(j=!0),n.push(l),l=l.parentNode}if(!m)return;if(j)h=G.getBookmark(),a.collapse(!0),a=u(a,f(d),!0),a=I.split(a),i(d,e,a),G.moveToBookmark(h);else{p=g(),l=p;for(o=n.length-1;o>=0;o--)l.appendChild(n[o].cloneNode(!1)),l=l.firstChild;l.appendChild(F.doc.createTextNode(q)),l=l.firstChild,F.insertAfter(p,m),G.setCursorLocation(l,1)}}var q,r="_mce_caret",s=b.settings.caret_debug;q=a.isGecko?"​":N,b.onBeforeGetContent.addToTop(function(){var a=[],b;if(j(l(G.getStart()),a)){b=a.length;while(b--)F.setAttrib(a[b],"data-mce-bogus","1")}}),a.each("onMouseUp onKeyUp".split(" "),function(a){b[a].addToTop(function(){n()})}),b.onKeyDown.addToTop(function(a,b){var c=b.keyCode;(c==8||c==37||c==39)&&n(l(G.getStart()))}),c=="apply"?o():p()}var D={},E=a.each,F=b.dom,G=b.selection,H=a.dom.TreeWalker,I=new a.dom.RangeUtils(F),J=b.schema.isValidChild,K=F.isBlock,L=b.settings.forced_root_block,M=F.nodeIndex,N="﻿",O=/^(src|href|style)$/,P=!1,Q=!0,R,S=function(a){var c;return b.dom.getParent(a,function(a){return c=b.dom.getStyle(a,"text-decoration"),c&&c!=="none"}),c},T=function(a){var c;a.nodeType===1&&a.parentNode&&a.parentNode.nodeType===1&&(c=S(a.parentNode),b.dom.getStyle(a,"color")&&c?b.dom.setStyle(a,"text-decoration",c):b.dom.getStyle(a,"textdecoration")===c&&b.dom.setStyle(a,"text-decoration",null))};a.extend(this,{get:f,register:g,apply:h,remove:i,toggle:j,match:l,matchAll:m,matchNode:k,canApply:n})}}(tinymce),tinymce.onAddEditor.add(function(a,b){var c,d,e,f=b.settings;if(f.inline_styles){d=a.explode(f.font_size_legacy_values);function g(b,c){a.each(c,function(a,c){a&&e.setStyle(b,c,a)}),e.rename(b,"span")}c={font:function(a,b){g(b,{backgroundColor:b.style.backgroundColor,color:b.color,fontFamily:b.face,fontSize:d[parseInt(b.size)-1]})},u:function(a,b){g(b,{textDecoration:"underline"})},strike:function(a,b){g(b,{textDecoration:"line-through"})}};function h(d,g){e=d.dom,f.convert_fonts_to_spans&&a.each(e.select("font,u,strike",g.node),function(a){c[a.nodeName.toLowerCase()](b.dom,a)})}b.onPreProcess.add(h),b.onSetContent.add(h),b.onInit.add(function(){b.selection.onSetContent.add(h)})}}),function(a){var b=/^\s*|\s*$/g,c,d="B".replace(/A(.)|B/,"$1")==="$1",e={majorVersion:"3",minorVersion:"4.7",releaseDate:"2011-11-03",_init:function(){function l(a){return a.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(a.src)?(/_(src|dev)\.js/g.test(a.src)&&(b.suffix="_src"),(j=a.src.indexOf("?"))!=-1&&(b.query=a.src.substring(j+1)),b.baseURL=a.src.substring(0,a.src.lastIndexOf("/")),i&&b.baseURL.indexOf("://")==-1&&b.baseURL.indexOf("/")!==0&&(b.baseURL=i+b.baseURL),b.baseURL):null}var b=this,c=document,d=navigator,e=d.userAgent,f,g,h,i,j,k;b.isOpera=a.opera&&opera.buildNumber,b.isWebKit=/WebKit/.test(e),b.isIE=!b.isWebKit&&!b.isOpera&&/MSIE/gi.test(e)&&/Explorer/gi.test(d.appName),b.isIE6=b.isIE&&/MSIE [56]/.test(e),b.isIE7=b.isIE&&/MSIE [7]/.test(e),b.isIE8=b.isIE&&/MSIE [8]/.test(e),b.isIE9=b.isIE&&/MSIE [9]/.test(e),b.isGecko=!b.isWebKit&&/Gecko/.test(e),b.isMac=e.indexOf("Mac")!=-1,b.isAir=/adobeair/i.test(e),b.isIDevice=/(iPad|iPhone)/.test(e),b.isIOS5=b.isIDevice&&e.match(/AppleWebKit\/(\d*)/)[1]>=534;if(a.tinyMCEPreInit){b.suffix=tinyMCEPreInit.suffix,b.baseURL=tinyMCEPreInit.base,b.query=tinyMCEPreInit.query;return}b.suffix="",g=c.getElementsByTagName("base");for(f=0;f<g.length;f++)if(k=g[f].href)/^https?:\/\/[^\/]+$/.test(k)&&(k+="/"),i=k?k.match(/.*\//)[0]:"";g=c.getElementsByTagName("script");for(f=0;f<g.length;f++)if(l(g[f]))return;h=c.getElementsByTagName("head")[0];if(h){g=h.getElementsByTagName("script");for(f=0;f<g.length;f++)if(l(g[f]))return}return},is:function(a,b){return b?b=="array"&&
a.hasOwnProperty&&a instanceof Array?!0:typeof a==b:a!==c},makeMap:function(a,b,c){var d;a=a||[],b=b||",",typeof a=="string"&&(a=a.split(b)),c=c||{},d=a.length;while(d--)c[a[d]]={};return c},each:function(a,b,d){var e,f;if(!a)return 0;d=d||a;if(a.length!==c){for(e=0,f=a.length;e<f;e++)if(b.call(d,a[e],e,a)===!1)return 0}else for(e in a)if(a.hasOwnProperty(e)&&b.call(d,a[e],e,a)===!1)return 0;return 1},trim:function(a){return(a?""+a:"").replace(b,"")},create:function(a,b,c){var d=this,e,f,g,h,i,j=0;a=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(a),g=a[3].match(/(^|\.)(\w+)$/i)[2],f=d.createNS(a[3].replace(/\.\w+$/,""),c);if(f[g])return;if(a[2]=="static"){f[g]=b,this.onCreate&&this.onCreate(a[2],a[3],f[g]);return}b[g]||(b[g]=function(){},j=1),f[g]=b[g],d.extend(f[g].prototype,b),a[5]&&(e=d.resolve(a[5]).prototype,h=a[5].match(/\.(\w+)$/i)[1],i=f[g],j?f[g]=function(){return e[h].apply(this,arguments)}:f[g]=function(){return this.parent=e[h],i.apply(this,arguments)},f[g].prototype[g]=f[g],d.each(e,function(a,b){f[g].prototype[b]=e[b]}),d.each(b,function(a,b){e[b]?f[g].prototype[b]=function(){return this.parent=e[b],a.apply(this,arguments)}:b!=g&&(f[g].prototype[b]=a)})),d.each(b["static"],function(a,b){f[g][b]=a}),this.onCreate&&this.onCreate(a[2],a[3],f[g].prototype)},walk:function(a,b,c,d){d=d||this,a&&(c&&(a=a[c]),e.each(a,function(a,f){if(b.call(d,a,f,c)===!1)return!1;e.walk(a,b,c,d)}))},createNS:function(b,c){var d,e;c=c||a,b=b.split(".");for(d=0;d<b.length;d++)e=b[d],c[e]||(c[e]={}),c=c[e];return c},resolve:function(b,c){var d,e;c=c||a,b=b.split(".");for(d=0,e=b.length;d<e;d++){c=c[b[d]];if(!c)break}return c},addUnload:function(b,c){var d=this;b={func:b,scope:c||this};if(!d.unloads){function e(){var b=d.unloads,c,i;if(b){for(i in b)c=b[i],c&&c.func&&c.func.call(c.scope,1);a.detachEvent?(a.detachEvent("onbeforeunload",f),a.detachEvent("onunload",e)):a.removeEventListener&&a.removeEventListener("unload",e,!1),d.unloads=c=b=w=e=0,a.CollectGarbage&&CollectGarbage()}}function f(){var b=document;if(b.readyState=="interactive"){function c(){b.detachEvent("onstop",c),e&&e(),b=0}b&&b.attachEvent("onstop",c),a.setTimeout(function(){b&&b.detachEvent("onstop",c)},0)}}a.attachEvent?(a.attachEvent("onunload",e),a.attachEvent("onbeforeunload",f)):a.addEventListener&&a.addEventListener("unload",e,!1),d.unloads=[b]}else d.unloads.push(b);return b},removeUnload:function(a){var b=this.unloads,c=null;return e.each(b,function(d,e){if(d&&d.func==a)return b.splice(e,1),c=a,!1}),c},explode:function(a,b){return a?e.map(a.split(b||","),e.trim):a},_addVer:function(a){var b;return this.query?(b=(a.indexOf("?")==-1?"?":"&")+this.query,a.indexOf("#")==-1?a+b:a.replace("#",b+"#")):a},_replace:function(a,b,e){return d?e.replace(a,function(){var a=b,d=arguments,e;for(e=0;e<d.length-2;e++)d[e]===c?a=a.replace(new RegExp("\\$"+e,"g"),""):a=a.replace(new RegExp("\\$"+e,"g"),d[e]);return a}):e.replace(a,b)}};e._init(),a.tinymce=a.tinyMCE=e}(window),function(a,b){var c=b.is,d=/^(href|src|style)$/i,e;if(!a&&window.console)return console.log("Load jQuery first!");b.$=a,b.adapter={patchEditor:function(b){function f(a,b){var d=this;return b&&d.removeAttr("data-mce-style"),c.css.apply(d,arguments)}function g(a,f){var g=this;return d.test(a)?f!==e?(g.each(function(c,d){b.dom.setAttrib(d,a,f)}),g):g.attr("data-mce-"+a):c.attr.apply(g,arguments)}function h(a){return function(c){return c&&(c=b.dom.processHTML(c)),a.call(this,c)}}function i(a){return a.css!==f&&(a.css=f,a.attr=g,a.html=h(c.html),a.append=h(c.append),a.prepend=h(c.prepend),a.after=h(c.after),a.before=h(c.before),a.replaceWith=h(c.replaceWith),a.tinymce=b,a.pushStack=function(){return i(c.pushStack.apply(this,arguments))}),a}var c=a.fn;b.$=function(c,d){var e=b.getDoc();return i(a(c||e,e||d))}}},b.extend=a.extend,b.extend(b,{map:a.map,grep:function(b,c){return a.grep(b,c||function(){return 1})},inArray:function(b,c){return a.inArray(c,b||[])}});var f={"tinymce.dom.DOMUtils":{select:function(b,c){var d=this;return a.find(b,d.get(c)||d.get(d.settings.root_element)||d.doc,[])},is:function(b,c){return a(this.get(b)).is(c)}}};b.onCreate=function(a,c,d){b.extend(d,f[c])}}(window.jQuery,tinymce),tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(a){this.scope=a||this,this.listeners=[]},add:function(a,b){return this.listeners.push({cb:a,scope:b||this.scope}),a},addToTop:function(a,b){return this.listeners.unshift({cb:a,scope:b||this.scope}),a},remove:function(a){var b=this.listeners,c=null;return tinymce.each(b,function(d,e){if(a==d.cb)return c=a,b.splice(e,1),!1}),c},dispatch:function(){var a,b=arguments,c,d=this.listeners,e;for(c=0;c<d.length;c++){e=d[c],a=e.cb.apply(e.scope,b);if(a===!1)break}return a}}),function(){var a=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(b,c){var d=this,e,f,g,h;b=tinymce.trim(b),c=d.settings=c||{};if(/^([\w\-]+):([^\/]{2})/i.test(b)||/^\s*#/.test(b)){d.source=b;return}b.indexOf("/")===0&&b.indexOf("//")!==0&&(b=(c.base_uri?c.base_uri.protocol||"http":"http")+"://mce_host"+b),/^[\w-]*:?\/\//.test(b)||(h=c.base_uri?c.base_uri.path:(new tinymce.util.URI(location.href)).directory,b=(c.base_uri&&c.base_uri.protocol||"http")+"://mce_host"+d.toAbsPath(h,b)),b=b.replace(/@@/g,"(mce_at)"),b=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(b),a(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(a,c){var e=b[c];e&&(e=e.replace(/\(mce_at\)/g,"@@")),d[a]=e});if(g=c.base_uri){d.protocol||(d.protocol=g.protocol),d.userInfo||(d.userInfo=g.userInfo),!d.port&&d.host=="mce_host"&&(d.port=g.port);if(!d.host||d.host=="mce_host")d.host=g.host;d.source=""}},setPath:function(a){var b=this;a=/^(.*?)\/?(\w+)?$/.exec(a),b.path=a[0],b.directory=a[1],b.file=a[2],b.source="",b.getURI()},toRelative:function(a){var b=this,c;return a==="./"?a:(a=new tinymce.util.URI(a,{base_uri:b}),a.host!="mce_host"&&b.host!=a.host&&a.host||b.port!=a.port||b.protocol!=a.protocol?a.getURI():(c=b.toRelPath(b.path,a.path),a.query&&(c+="?"+a.query),a.anchor&&(c+="#"+a.anchor),c))},toAbsolute:function(a,b){var a=new tinymce.util.URI(a,{base_uri:this});return a.getURI(this.host==a.host&&this.protocol==a.protocol?b:0)},toRelPath:function(a,b){var c,d=0,e="",f,g;a=a.substring(0,a.lastIndexOf("/")),a=a.split("/"),c=b.split("/");if(a.length>=c.length)for(f=0,g=a.length;f<g;f++)if(f>=c.length||a[f]!=c[f]){d=f+1;break}if(a.length<c.length)for(f=0,g=c.length;f<g;f++)if(f>=a.length||a[f]!=c[f]){d=f+1;break}if(d==1)return b;for(f=0,g=a.length-(d-1);f<g;f++)e+="../";for(f=d-1,g=c.length;f<g;f++)f!=d-1?e+="/"+c[f]:e+=c[f];return e},toAbsPath:function(b,c){var d,e=0,f=[],g,h;g=/\/$/.test(c)?"/":"",b=b.split("/"),c=c.split("/"),a(b,function(a){a&&f.push(a)}),b=f;for(d=c.length-1,f=[];d>=0;d--){if(c[d].length==0||c[d]==".")continue;if(c[d]==".."){e++;continue}if(e>0){e--;continue}f.push(c[d])}return d=b.length-e,d<=0?h=f.reverse().join("/"):h=b.slice(0,d).join("/")+"/"+f.reverse().join("/"),h.indexOf("/")!==0&&(h="/"+h),g&&h.lastIndexOf("/")!==h.length-1&&(h+=g),h},getURI:function(a){var b,c=this;if(!c.source||a)b="",a||(c.protocol&&(b+=c.protocol+"://"),c.userInfo&&(b+=c.userInfo+"@"),c.host&&(b+=c.host),c.port&&(b+=":"+c.port)),c.path&&(b+=c.path),c.query&&(b+="?"+c.query),c.anchor&&(b+="#"+c.anchor),c.source=b;return c.source}})}(),function(){var a=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(b){var c=this.get(b),d;return c&&a(c.split("&"),function(a){a=a.split("="),d=d||{},d[unescape(a[0])]=unescape(a[1])}),d},setHash:function(b,c,d,e,f,g){var h="";a(c,function(a,b){h+=(h?"&":"")+escape(b)+"="+escape(a)}),this.set(b,h,d,e,f,g)},get:function(a){var b=document.cookie,c,d=a+"=",e;if(!b)return;e=b.indexOf("; "+d);if(e==-1){e=b.indexOf(d);if(e!=0)return null}else e+=2;return c=b.indexOf(";",e),c==-1&&(c=b.length),unescape(b.substring(e+d.length,c))},set:function(a,b,c,d,e,f){document.cookie=a+"="+escape(b)+(c?"; expires="+c.toGMTString():"")+(d?"; path="+escape(d):"")+(e?"; domain="+e:"")+(f?"; secure":"")},remove:function(a,b){var c=new Date;c.setTime(c.getTime()-1e3),this.set(a,"",c,b,c)}})}(),function(){function serialize(a,b){var c,d,e;b=b||'"';if(a==null)return"null";e=typeof a;if(e=="string")return d="\bb\tt\nn\ff\rr\"\"''\\\\",b+a.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,e){return b==='"'&&a==="'"?a:(c=d.indexOf(e),c+1?"\\"+d.charAt(c+1):(a=e.charCodeAt().toString(16),"\\u"+"0000".substring(a.length)+a))})+b;if(e=="object"){if(a.hasOwnProperty&&a instanceof Array){for(c=0,d="[";c<a.length;c++)d+=(c>0?",":"")+serialize(a[c],b);return d+"]"}d="{";for(c in a)a.hasOwnProperty(c)&&(d+=typeof a[c]!="function"?(d.length>1?","+b:b)+c+b+":"+serialize(a[c],b):"");return d+"}"}return""+a}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}}(),tinymce.create("static tinymce.util.XHR",{send:function(a){function f(a){b=0;try{b=new ActiveXObject(a)}catch(c){}return b}var b,c,d=window,e=0;a.scope=a.scope||this,a.success_scope=a.success_scope||a.scope,a.error_scope=a.error_scope||a.scope,a.async=a.async===!1?!1:!0,a.data=a.data||"",b=d.XMLHttpRequest?new XMLHttpRequest:f("Microsoft.XMLHTTP")||f("Msxml2.XMLHTTP");if(b){b.overrideMimeType&&b.overrideMimeType(a.content_type),b.open(a.type||(a.data?"POST":"GET"),a.url,a.async),a.content_type&&b.setRequestHeader("Content-Type",a.content_type),b.setRequestHeader("X-Requested-With","XMLHttpRequest"),b.send(a.data);function g(){!a.async||b.readyState==4||e++>1e4?(a.success&&e<1e4&&b.status==200?a.success.call(a.success_scope,""+b.responseText,b,a):a.error&&a.error.call(a.error_scope,e>1e4?"TIMED_OUT":"GENERAL",b,a),b=null):d.setTimeout(g,10)}if(!a.async)return g();c=d.setTimeout(g,10)}}}),function(){var a=tinymce.extend,b=tinymce.util.JSON,c=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(b){this.settings=a({},b),this.count=0},send:function(d){var e=d.error,f=d.success;d=a(this.settings,d),d.success=function(a,c){a=b.parse(a),typeof a=="undefined"&&(a={error:"JSON Parse error."}),a.error?e.call(d.error_scope||d.scope,a.error,c):f.call(d.success_scope||d.scope,a.result)},d.error=function(a,b){e&&e.call(d.error_scope||d.scope,a,b)},d.data=b.serialize({id:d.id||"c"+this.count++,method:d.method,params:d.params}),d.content_type="application/json",c.send(d)},"static":{sendRPC:function(a){return(new tinymce.util.JSONRequest).send(a)}}})}(),function(a){a.VK={DELETE:46,BACKSPACE:8,ENTER:13,TAB:9,SPACEBAR:32,UP:38,DOWN:40}}(tinymce),function(a){function e(b){var e=b.dom,f=b.selection;b.onKeyDown.add(function(b,g){var h,i,j,k,l;l=g.keyCode==d;if(l||g.keyCode==c){g.preventDefault(),h=f.getRng(),i=e.getParent(h.startContainer,e.isBlock),l&&(i=e.getNext(i,e.isBlock));if(i){j=i.firstChild;while(j&&j.nodeType==3&&j.nodeValue.length==0)j=j.nextSibling;j&&j.nodeName==="SPAN"&&(k=j.cloneNode(!1))}b.getDoc().execCommand(l?"ForwardDelete":"Delete",!1,null),i=e.getParent(h.startContainer,e.isBlock),a.each(e.select("span.Apple-style-span,font.Apple-style-span",i),function(a){var b=f.getBookmark();k?e.replace(k.cloneNode(!1),a,!0):e.remove(a,!0),f.moveToBookmark(b)})}})}function f(a){a.onKeyUp.add(function(a,b){var e=b.keyCode;if(e==d||e==c)if(a.dom.isEmpty(a.getBody())){a.setContent("",{format:"raw"}),a.nodeChanged();return}})}function g(a){a.dom.bind(a.getDoc(),"focusin",function(){a.selection.setRng(a.selection.getRng())})}function h(b){b.onKeyDown.add(function(b,d){if(d.keyCode===c&&b.selection.isCollapsed()&&b.selection.getRng(!0).startOffset===0){var e=b.selection.getNode(),f=e.previousSibling;f&&f.nodeName&&f.nodeName.toLowerCase()==="hr"&&(b.dom.remove(f),a.dom.Event.cancel(d))}})}function i(a){Range.prototype.getClientRects||a.onMouseDown.add(function(a,b){if(b.target.nodeName==="HTML"){var c=a.getBody();c.blur(),setTimeout(function(){c.focus()},0)}})}function j(a){a.onClick.add(function(a,b){b=b.target,/^(IMG|HR)$/.test(b.nodeName)&&a.selection.getSel().setBaseAndExtent(b,0,b,1),b.nodeName=="A"&&a.dom.hasClass(b,"mceItemAnchor")&&a.selection.select(b),a.nodeChanged()})}function k(b){var c,d;b.dom.bind(b.getDoc(),"selectionchange",function(){d&&(clearTimeout(d),d=0),d=window.setTimeout(function(){var d=b.selection.getRng();if(!c||!a.dom.RangeUtils.compareRanges(d,c))b.nodeChanged(),c=d},50)})}function l(a){document.body.setAttribute("role","application")}var b=a.VK,c=b.BACKSPACE,d=b.DELETE;a.create("tinymce.util.Quirks",{Quirks:function(b){a.isWebKit&&(e(b),f(b),g(b),j(b),a.isIDevice&&k(b)),a.isIE&&(h(b),f(b),l(b)),a.isGecko&&(h(b),i(b))}})}(tinymce),function(a){function j(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.textContent||b.innerText||a}function k(a,b){var d,e,f,g={};if(a){a=a.split(","),b=b||10;for(d=0;d<a.length;d+=2)e=String.fromCharCode(parseInt(a[d],b)),c[e]||(f="&"+a[d+1]+";",g[e]=f,g[f]=e);return g}}var b,c,d,e=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,g=/[<>&\"\']/g,h=/&(#x|#)?([\w]+);/g,i={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};c={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},d={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},b=k("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),a.html=a.html||{},a.html.Entities={encodeRaw:function(a,b){return a.replace(b?e:f,function(a){return c[a]||a})},encodeAllRaw:function(a){return(""+a).replace(g,function(a){return c[a]||a})},encodeNumeric:function(a,b){return a.replace(b?e:f,function(a){return a.length>1?"&#"+((a.charCodeAt(0)-55296)*1024+(a.charCodeAt(1)-56320)+65536)+";":c[a]||"&#"+a.charCodeAt(0)+";"})},encodeNamed:function(a,d,g){return g=g||b,a.replace(d?e:f,function(a){return c[a]||g[a]||a})},getEncodeFunc:function(d,g){function i(a,b){return a.replace(b?e:f,function(a){return c[a]||g[a]||"&#"+a.charCodeAt(0)+";"||a})}function j(a,b){return h.encodeNamed(a,b,g)}var h=a.html.Entities;return g=k(g)||b,d=a.makeMap(d.replace(/\+/g,",")),d.named&&d.numeric?i:d.named?g?j:h.encodeNamed:d.numeric?h.encodeNumeric:h.encodeRaw},decode:function(a){return a.replace(h,function(a,c,e){return c?(e=parseInt(e,c.length===2?16:10),e>65535?(e-=65536,String.fromCharCode(55296+(e>>10),56320+(e&1023))):i[e]||String.fromCharCode(e)):d[a]||b[a]||j(a)})}}}(tinymce),tinymce.html.Styles=function(a,b){function l(a,b,c,d){function e(a){return a=parseInt(a).toString(16),a.length>1?a:"0"+a}return"#"+e(b)+e(c)+e(d)}var c=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,d=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,e=/\s*([^:]+):\s*([^;]+);?/g,f=/\s+$/,g=/rgb/,h,i,j={},k;a=a||{},k="\\\" \\' \\; \\: ; : ﻿".split(" ");for(i=0;i<k.length;i++)j[k[i]]="﻿"+i,j["﻿"+i]=k[i];return{toHex:function(a){return a.replace(c,l)},parse:function(b){function p(a,b){var c,d,e,f;c=g[a+"-top"+b];if(!c)return;d=g[a+"-right"+b];if(c!=d)return;e=g[a+"-bottom"+b];if(d!=e)return;f=g[a+"-left"+b];if(e!=f)return;g[a+b]=f,delete g[a+"-top"+b],delete g[a+"-right"+b],delete g[a+"-bottom"+b],delete g[a+"-left"+b]}function q(a){var b=g[a],c;if(!b||b.indexOf(" ")<0)return;b=b.split(" "),c=b.length;while(c--)if(b[c]!==b[0])return!1;return g[a]=b[0],!0}function r(a,b,c,d){if(!q(b))return;if(!q(c))return;if(!q(d))return;g[a]=g[b]+" "+g[c]+" "+g[d],delete g[b],delete g[c],delete g[d]}function s(a){return m=!0,j[a]}function t(a,b){return m&&(a=a.replace(/\uFEFF[0-9]/g,function(a){return j[a]})),b||(a=a.replace(/\\([\'\";:])/g,"$1")),a}var g={},h,i,k,m,n=a.url_converter,o=a.url_converter_scope||this;if(b){b=b.replace(/\\[\"\';:\uFEFF]/g,s).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(a){return a.replace(/[;:]/g,s)});while(h=e.exec(b)){i=h[1].replace(f,"").toLowerCase(),k=h[2].replace(f,"");if(i&&k.length>0){if(i==="font-weight"&&k==="700")k="bold";else if(i==="color"||i==="background-color")k=k.toLowerCase();k=k.replace(c,l),k=k.replace(d,function(a,b,c,d,e,f){return e=e||f,e?(e=t(e),"'"+e.replace(/\'/g,"\\'")+"'"):(b=t(b||c||d),n&&(b=n.call(o,b,"style")),"url('"+b.replace(/\'/g,"\\'")+"')")}),g[i]=m?t(k,!0):k}e.lastIndex=h.index+h[0].length}p("border",""),p("border","-width"),p("border","-color"),p("border","-style"),p("padding",""),p("margin",""),r("border","border-width","border-style","border-color"),g.border==="medium none"&&delete g.border}return g},serialize:function(a,c){function g(c){var e,f,g,i;e=b.styles[c];if(e)for(f=0,g=e.length;f<g;f++)c=e[f],i=a[c],i!==h&&i.length>0&&(d+=(d.length>0?" ":"")+c+": "+i+";")}var d="",e,f;if(c&&b&&b.styles)g("*"),g(c);else for(e in a)f=a[e],f!==h&&f.length>0&&(d+=(d.length>0?" ":"")+e+": "+f+";");return d}}},function(a){function l(a,b){return a.split(b||",")}function m(a,b){function e(b){return b.replace(/[A-Z]+/g,function(b){return e(a[b])})}var c,d={};for(c in a)a.hasOwnProperty(c)&&(a[c]=e(a[c]));return e(b).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(a,b,c,e){c=l(c,"|"),d[b]={attributes:j(c),attributesOrder:c,children:j(e,"|",{"#comment":{}})}}),d}var b={},c,d,e,f,g={},h,i,j=a.makeMap,k=a.each;d="h1,h2,h3,h4,h5,h6,hr,p,div,address,pre,form,table,tbody,thead,tfoot,th,tr,td,li,ol,ul,caption,blockquote,center,dl,dt,dd,dir,fieldset,noscript,menu,isindex,samp,header,footer,article,section,hgroup",d=j(d,",",j(d.toUpperCase())),b=m({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]"),c=j("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected,autoplay,loop,controls"),e=j("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,source"),f=a.extend(j("td,th,iframe,video,audio,object"),e),h=j("pre,script,style,textarea"),i=j("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),a.html.Schema=function(m){function t(a){return new RegExp("^"+a.replace(/([?+*])/g,".$1")+"$")}function u(b){var c,d,e,f,g,h,i,k,m,n,p,r,s,u,v,w,x,y,A,B,C,D,E=/^([#+-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,F=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,G=/[*?+]/;if(b){b=l(b),o["@"]&&(x=o["@"].attributes,y=o["@"].attributesOrder);for(c=0,d=b.length;c<d;c++){h=E.exec(b[c]);if(h){v=h[1],n=h[2],w=h[3],m=h[4],s={},u=[],i={attributes:s,attributesOrder:u},v==="#"&&(i.paddEmpty=!0),v==="-"&&(i.removeEmpty=!0);if(x){for(B in x)s[B]=x[B];u.push.apply(u,y)}if(m){m=l(m,"|");for(e=0,f=m.length;e<f;e++){h=F.exec(m[e]);if(h){k={},r=h[1],p=h[2].replace(/::/g,":"),v=h[3],D=h[4],r==="!"&&(i.attributesRequired=i.attributesRequired||[],i.attributesRequired.push(p),k.required=!0);if(r==="-"){delete s[p],u.splice(a.inArray(u,p),1);continue}v&&(v==="="&&(i.attributesDefault=i.attributesDefault||[],i.attributesDefault.push({name:p,value:D}),k.defaultValue=D),v===":"&&(i.attributesForced=i.attributesForced||[],i.attributesForced.push({name:p,value:D}),k.forcedValue=D),v==="<"&&(k.validValues=j(D,"?"))),G.test(p)?(i.attributePatterns=i.attributePatterns||[],k.pattern=t(p),i.attributePatterns.push(k)):(s[p]||u.push(p),s[p]=k)}}}!x&&n=="@"&&(x=s,y=u),w&&(i.outputName=n,o[w]=i),G.test(n)?(i.pattern=t(n),q.push(i)):o[n]=i}}}}function v(a){o={},q=[],u(a),k(b,function(a,b){p[b]=a.children})}function w(a){var b=/^(~)?(.+)$/;a&&k(l(a),function(a){var c=b.exec(a),e=c[1]==="~",f=e?"span":"div",h=c[2];p[h]=p[f],g[h]=f,e||(d[h]={}),k(p,function(a,b){a[f]&&(a[h]=a[f])})})}function x(a){var b=/^([+\-]?)(\w+)\[([^\]]+)\]$/;a&&k(l(a),function(a){var c=b.exec(a),d,e;c&&(e=c[1],e?d=p[c[2]]:d=p[c[2]]={"#comment":{}},d=p[c[2]],k(l(c[3],"|"),function(a){e==="-"?delete d[a]:d[a]={}}))})}function y(a){var b=o[a],c;if(b)return b;c=q.length;while(c--){b=q[c];if(b.pattern.test(a))return b}}var n=this,o={},p={},q=[],r,s;m=m||{},m.verify_html===!1&&(m.valid_elements="*[*]"),m.valid_styles&&(r={},k(m.valid_styles,function(b,c){r[c]=a.explode(b)})),s=m.whitespace_elements?j(m.whitespace_elements):h,m.valid_elements?v(m.valid_elements):(k(b,function(a,b){o[b]={attributes:a.attributes,attributesOrder:a.attributesOrder},p[b]=a.children}),k(l("strong/b,em/i"),function(a){a=l(a,"/"),o[a[1]].outputName=a[0]}),o.img.attributesDefault=[{name:"alt",value:""}],k(l("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr"),function(a){o[a].removeEmpty=!0}),k(l("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(a){o[a].paddEmpty=!0})),w(m.custom_elements),x(m.valid_children),u(m.extended_valid_elements),x("+ol[ul|ol],+ul[ul|ol]"),y("span")||u("span[!data-mce-type|*]"),m.invalid_elements&&a.each(a.explode(m.invalid_elements),function(a){o[a]&&delete o[a]}),n.children=p,n.styles=r,n.getBoolAttrs=function(){return c},n.getBlockElements=function(){return d},n.getShortEndedElements=function(){return e},n.getSelfClosingElements=function(){return i},n.getNonEmptyElements=function(){return f},n.getWhiteSpaceElements=function(){return s},n.isValidChild=function(a,b){var c=p[a];return!!c&&!!c[b]},n.getElementRule=y,n.getCustomElements=function(){return g},n.addValidElements=u,n.setValidElements=v,n.addCustomElements=w,n.addValidChildren=x},a.html.Schema.boolAttrMap=c,a.html.Schema.blockElementsMap=d}(tinymce),function(a){a.html.SaxParser=function(b,c){var d=this,e=function(){};b=b||{},d.schema=c=c||new a.html.Schema,b.fix_self_closing!==!1&&(b.fix_self_closing=!0),a.each("comment cdata text start end pi doctype".split(" "),function(a){a&&(d[a]=b[a]||e)}),d.parse=function(d){function N(a){var b,c;b=j.length;while(b--)if(j[b].name===a)break;if(b>=0){for(c=j.length-1;c>=b;c--)a=j[c],a.valid&&e.end(a.name);j.length=b}}var e=this,f,g=0,h,i,j=[],k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J=0,K=a.html.Entities.decode,L,M;F=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([^\\s\\/<>]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/)>))","g"),G=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g,H={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi},q=c.getShortEndedElements(),E=c.getSelfClosingElements(),r=c.getBoolAttrs(),t=b.validate,p=b.remove_internals,L=b.fix_self_closing,M=a.isIE,y=/^:/;while(f=F.exec(d)){g<f.index&&e.text(K(d.substr(g,f.index-g)));if(h=f[6])h=h.toLowerCase(),M&&y.test(h)&&(h=h.substr(1)),N(h);else if(h=f[7]){h=h.toLowerCase(),M&&y.test(h)&&(h=h.substr(1)),s=h in q,L&&E[h]&&j.length>0&&j[j.length-1].name===h&&N(h);if(!t||(u=c.getElementRule(h))){v=!0,t&&(z=u.attributes,A=u.attributePatterns),(x=f[8])?(o=x.indexOf("data-mce-type")!==-1,o&&p&&(v=!1),k=[],k.map={},x.replace(G,function(a,b,c,d,e){var f,g;b=b.toLowerCase(),c=b in r?b:K(c||d||e||"");if(t&&!o&&b.indexOf("data-")!==0){f=z[b];if(!f&&A){g=A.length;while(g--){f=A[g];if(f.pattern.test(b))break}g===-1&&(f=null)}if(!f)return;if(f.validValues&&!(c in f.validValues))return}k.map[b]=c,k.push({name:b,value:c})})):(k=[],k.map={});if(t&&!o){B=u.attributesRequired,C=u.attributesDefault,D=u.attributesForced;if(D){l=D.length;while(l--)w=D[l],n=w.name,I=w.value,I==="{$uid}"&&(I="mce_"+J++),k.map[n]=I,k.push({name:n,value:I})}if(C){l=C.length;while(l--)w=C[l],n=w.name,n in k.map||(I=w.value,I==="{$uid}"&&(I="mce_"+J++),k.map[n]=I,k.push({name:n,value:I}))}if(B){l=B.length;while(l--)if(B[l]in k.map)break;l===-1&&(v=!1)}k.map["data-mce-bogus"]&&(v=!1)}v&&e.start(h,k,s)}else v=!1;if(i=H[h]){i.lastIndex=g=f.index+f[0].length,(f=i.exec(d))?(v&&(m=d.substr(g,f.index-g)),g=f.index+f[0].length):(m=d.substr(g),g=d.length),v&&m.length>0&&e.text(m,!0),v&&e.end(h),F.lastIndex=g;continue}s||(!x||x.indexOf("/")!=x.length-1?j.push({name:h,valid:v}):v&&e.end(h))}else(h=f[1])?e.comment(h):(h=f[2])?e.cdata(h):(h=f[3])?e.doctype(h):(h=f[4])&&e.pi(h,f[5]);g=f.index+f[0].length}g<d.length&&e.text(K(d.substr(g)));for(l=j.length-1;l>=0;l--)h=j[l],h.valid&&e.end(h.name)}}}(tinymce),function(a){function d(a,b,c){var d,e,f=c?"lastChild":"firstChild",g=c?"prev":"next";if(a[f])return a[f];if(a!==b){d=a[g];if(d)return d;for(e=a.parent;e&&e!==b;e=e.parent){d=e[g];if(d)return d}}}function e(a,b){this.name=a,this.type=b,b===1&&(this.attributes=[],this.attributes.map={})}var b=/^[ \t\r\n]*$/,c={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};a.extend(e.prototype,{replace:function(a){var b=this;return a.parent&&a.remove(),b.insert(a,b),b.remove(),b},attr:function(a,b){var c=this,d,e,f;if(typeof a!="string"){for(e in a)c.attr(e,a[e]);return c}if(d=c.attributes){if(b!==f){if(b===null){if(a in d.map){delete d.map[a],e=d.length;while(e--)if(d[e].name===a)return d=d.splice(e,1),c}return c}if(a in d.map){e=d.length;while(e--)if(d[e].name===a){d[e].value=b;break}}else d.push({name:a,value:b});return d.map[a]=b,c}return d.map[a]}},clone:function(){var a=this,b=new e(a.name,a.type),c,d,f,g,h;if(f=a.attributes){h=[],h.map={};for(c=0,d=f.length;c<d;c++)g=f[c],g.name!=="id"&&(h[h.length]={name:g.name,value:g.value},h.map[g.name]=g.value);b.attributes=h}return b.value=a.value,b.shortEnded=a.shortEnded,b},wrap:function(a){var b=this;return b.parent.insert(a,b),a.append(b),b},unwrap:function(){var a=this,b,c;for(b=a.firstChild;b;)c=b.next,a.insert(b,a,!0),b=c;a.remove()},remove:function(){var a=this,b=a.parent,c=a.next,d=a.prev;return b&&(b.firstChild===a?(b.firstChild=c,c&&(c.prev=null)):d.next=c,b.lastChild===a?(b.lastChild=d,d&&(d.next=null)):c.prev=d,a.parent=a.next=a.prev=null),a},append:function(a){var b=this,c;return a.parent&&a.remove(),c=b.lastChild,c?(c.next=a,a.prev=c,b.lastChild=a):b.lastChild=b.firstChild=a,a.parent=b,a},insert:function(a,b,c){var d;return a.parent&&a.remove(),d=b.parent||this,c?(b===d.firstChild?d.firstChild=a:b.prev.next=a,a.prev=b.prev,a.next=b,b.prev=a):(b===d.lastChild?d.lastChild=a:b.next.prev=a,a.next=b.next,a.prev=b,b.next=a),a.parent=d,a},getAll:function(a){var b=this,c,e=[];for(c=b.firstChild;c;c=d(c,b))c.name===a&&e.push(c);return e},empty:function(){var a=this,b,c,e;if(a.firstChild){b=[];for(e=a.firstChild;e;e=d(e,a))b.push(e);c=b.length;while(c--)e=b[c],e.parent=e.firstChild=e.lastChild=e.next=e.prev=null}return a.firstChild=a.lastChild=null,a},isEmpty:function(a){var c=this,e=c.firstChild,f,g;if(e)do{if(e.type===1){if(e.attributes.map["data-mce-bogus"])continue;if(a[e.name])return!1;f=e.attributes.length;while(f--){g=e.attributes[f].name;if(g==="name"||g.indexOf("data-")===0)return!1}}if(e.type===3&&!b.test(e.value))return!1}while(e=d(e,c));return!0},walk:function(a){return d(this,null,a)}}),a.extend(e,{create:function(a,b){var d,f;d=new e(a,c[a]||1);if(b)for(f in b)d.attr(f,b[f]);return d}}),a.html.Node=e}(tinymce),function(a){var b=a.html.Node;a.html.DomParser=function(c,d){function j(c){var f,g,h,i,j,k,l,m,n,o,p,q,r,s;q=a.makeMap("tr,td,th,tbody,thead,tfoot,table"),p=d.getNonEmptyElements();for(f=0;f<c.length;f++){g=c[f];if(!g.parent)continue;i=[g];for(h=g.parent;h&&!d.isValidChild
(h.name,g.name)&&!q[h.name];h=h.parent)i.push(h);if(h&&i.length>1){i.reverse(),j=k=e.filterNode(i[0].clone());for(n=0;n<i.length-1;n++){d.isValidChild(k.name,i[n].name)?(l=e.filterNode(i[n].clone()),k.append(l)):l=k;for(m=i[n].firstChild;m&&m!=i[n+1];)s=m.next,l.append(m),m=s;k=l}j.isEmpty(p)?h.insert(g,i[0],!0):(h.insert(j,i[0],!0),h.insert(g,j)),h=i[0],(h.isEmpty(p)||h.firstChild===h.lastChild&&h.firstChild.name==="br")&&h.empty().remove()}else if(g.parent){if(g.name==="li"){r=g.prev;if(!r||r.name!=="ul"&&r.name!=="ul"){r=g.next;if(!r||r.name!=="ul"&&r.name!=="ul"){g.wrap(e.filterNode(new b("ul",1)));continue}r.insert(g,r.firstChild,!0);continue}r.append(g);continue}d.isValidChild(g.parent.name,"div")&&d.isValidChild("div",g.name)?g.wrap(e.filterNode(new b("div",1))):g.name==="style"||g.name==="script"?g.empty().remove():g.unwrap()}}}var e=this,f={},g=[],h={},i={};c=c||{},c.validate="validate"in c?c.validate:!0,c.root_name=c.root_name||"body",e.schema=d=d||new a.html.Schema,e.filterNode=function(a){var b,c,d;c in f&&(d=h[c],d?d.push(a):h[c]=[a]),b=g.length;while(b--)c=g[b].name,c in a.attributes.map&&(d=i[c],d?d.push(a):i[c]=[a]);return a},e.addNodeFilter=function(b,c){a.each(a.explode(b),function(a){var b=f[a];b||(f[a]=b=[]),b.push(c)})},e.addAttributeFilter=function(b,c){a.each(a.explode(b),function(a){var b;for(b=0;b<g.length;b++)if(g[b].name===a){g[b].callbacks.push(c);return}g.push({name:a,callbacks:[c]})})},e.parse=function(e,k){function F(){var a=m.firstChild,b,c;while(a)b=a.next,a.type==3||a.type==1&&a.name!=="p"&&!w[a.name]&&!a.attr("data-mce-type")?c?c.append(a):(c=G(E,1),m.insert(c,a),c.append(a)):c=null,a=b}function G(a,c){var d=new b(a,c),e;return a in f&&(e=h[a],e?e.push(d):h[a]=[d]),d}function H(a){var b,c,d;for(b=a.prev;b&&b.type===3;)c=b.value.replace(z,""),c.length>0?(b.value=c,b=b.prev):(d=b.prev,b.remove(),b=d)}var l,m,n,o,p,q,r,s,t,u,v,w,x,y=[],z,A,B,C,D,E;k=k||{},h={},i={},w=a.extend(a.makeMap("script,style,head,html,body,title,meta,param"),d.getBlockElements()),D=d.getNonEmptyElements(),C=d.children,v=c.validate,E="forced_root_block"in k?k.forced_root_block:c.forced_root_block,B=d.getWhiteSpaceElements(),x=/^[ \t\r\n]+/,z=/[ \t\r\n]+$/,A=/[ \t\r\n]+/g,l=new a.html.SaxParser({validate:v,fix_self_closing:!v,cdata:function(a){n.append(G("#cdata",4)).value=a},text:function(a,b){var c;B[n.name]||(a=a.replace(A," "),n.lastChild&&w[n.lastChild.name]&&(a=a.replace(x,""))),a.length!==0&&(c=G("#text",3),c.raw=!!b,n.append(c).value=a)},comment:function(a){n.append(G("#comment",8)).value=a},pi:function(a,b){n.append(G(a,7)).value=b,H(n)},doctype:function(a){var b;b=n.append(G("#doctype",10)),b.value=a,H(n)},start:function(a,b,c){var e,f,h,j,k,l,m,o;h=v?d.getElementRule(a):{};if(h){e=G(h.outputName||a,1),e.attributes=b,e.shortEnded=c,n.append(e),o=C[n.name],o&&C[e.name]&&!o[e.name]&&y.push(e),f=g.length;while(f--)k=g[f].name,k in b.map&&(t=i[k],t?t.push(e):i[k]=[e]);w[a]&&H(e),c||(n=e)}},end:function(a){var c,e,f,g,h;e=v?d.getElementRule(a):{};if(e){if(w[a]){if(!B[n.name]){for(c=n.firstChild;c&&c.type===3;)f=c.value.replace(x,""),f.length>0?(c.value=f,c=c.next):(g=c.next,c.remove(),c=g);for(c=n.lastChild;c&&c.type===3;)f=c.value.replace(z,""),f.length>0?(c.value=f,c=c.prev):(g=c.prev,c.remove(),c=g)}c=n.prev,c&&c.type===3&&(f=c.value.replace(x,""),f.length>0?c.value=f:c.remove())}if(e.removeEmpty||e.paddEmpty)if(n.isEmpty(D))if(e.paddEmpty)n.empty().append(new b("#text","3")).value=" ";else if(!n.attributes.map.name){h=n.parent,n.empty().remove(),n=h;return}n=n.parent}}},d),m=n=new b(k.context||c.root_name,11),l.parse(e),v&&y.length&&(k.context?k.invalid=!0:j(y)),E&&m.name=="body"&&F();if(!k.invalid){for(u in h){t=f[u],o=h[u],r=o.length;while(r--)o[r].parent||o.splice(r,1);for(p=0,q=t.length;p<q;p++)t[p](o,u,k)}for(p=0,q=g.length;p<q;p++){t=g[p];if(t.name in i){o=i[t.name],r=o.length;while(r--)o[r].parent||o.splice(r,1);for(r=0,s=t.callbacks.length;r<s;r++)t.callbacks[r](o,t.name,k)}}}return m},c.remove_trailing_brs&&e.addNodeFilter("br",function(b,c){var e,f=b.length,g,h=d.getBlockElements(),i=d.getNonEmptyElements(),j,k,l;h.body=1;for(e=0;e<f;e++){g=b[e],j=g.parent;if(h[g.parent.name]&&g===j.lastChild){k=g.prev;while(k){l=k.name;if(l!=="span"||k.attr("data-mce-type")!=="bookmark"){if(l!=="br")break;if(l==="br"){g=null;break}}k=k.prev}g&&(g.remove(),j.isEmpty(i)&&(elementRule=d.getElementRule(j.name),elementRule&&(elementRule.removeEmpty?j.remove():elementRule.paddEmpty&&(j.empty().append(new a.html.Node("#text",3)).value=" "))))}}})}}(tinymce),tinymce.html.Writer=function(a){var b=[],c,d,e,f,g;return a=a||{},c=a.indent,d=tinymce.makeMap(a.indent_before||""),e=tinymce.makeMap(a.indent_after||""),f=tinymce.html.Entities.getEncodeFunc(a.entity_encoding||"raw",a.entities),g=a.element_format=="html",{start:function(a,h,i){var j,k,l,m;c&&d[a]&&b.length>0&&(m=b[b.length-1],m.length>0&&m!=="\n"&&b.push("\n")),b.push("<",a);if(h)for(j=0,k=h.length;j<k;j++)l=h[j],b.push(" ",l.name,'="',f(l.value,!0),'"');!i||g?b[b.length]=">":b[b.length]=" />",i&&c&&e[a]&&b.length>0&&(m=b[b.length-1],m.length>0&&m!=="\n"&&b.push("\n"))},end:function(a){var d;b.push("</",a,">"),c&&e[a]&&b.length>0&&(d=b[b.length-1],d.length>0&&d!=="\n"&&b.push("\n"))},text:function(a,c){a.length>0&&(b[b.length]=c?a:f(a))},cdata:function(a){b.push("<![CDATA[",a,"]]>")},comment:function(a){b.push("<!--",a,"-->")},pi:function(a,d){d?b.push("<?",a," ",d,"?>"):b.push("<?",a,"?>"),c&&b.push("\n")},doctype:function(a){b.push("<!DOCTYPE",a,">",c?"\n":"")},reset:function(){b.length=0},getContent:function(){return b.join("").replace(/\n$/,"")}}},function(a){a.html.Serializer=function(b,c){var d=this,e=new a.html.Writer(b);b=b||{},b.validate="validate"in b?b.validate:!0,d.schema=c=c||new a.html.Schema,d.writer=e,d.serialize=function(a){function g(a){var b=d[a.type],h,j,k,l,m,n,o,p,q;if(!b){h=a.name,j=a.shortEnded,k=a.attributes;if(f&&k&&k.length>1){n=[],n.map={},q=c.getElementRule(a.name);for(o=0,p=q.attributesOrder.length;o<p;o++)l=q.attributesOrder[o],l in k.map&&(m=k.map[l],n.map[l]=m,n.push({name:l,value:m}));for(o=0,p=k.length;o<p;o++)l=k[o].name,l in n.map||(m=k.map[l],n.map[l]=m,n.push({name:l,value:m}));k=n}e.start(a.name,k,j);if(!j){if(a=a.firstChild)do g(a);while(a=a.next);e.end(h)}}else b(a)}var d,f;return f=b.validate,d={3:function(a,b){e.text(a.value,a.raw)},8:function(a){e.comment(a.value)},7:function(a){e.pi(a.name,a.value)},10:function(a){e.doctype(a.value)},4:function(a){e.cdata(a.value)},11:function(a){if(a=a.firstChild)do g(a);while(a=a.next)}},e.reset(),a.type==1&&!b.inner?g(a):d[11](a),e.getContent()}}}(tinymce),function(a){var b=a.each,c=a.is,d=a.isWebKit,e=a.isIE,f=a.html.Entities,g=/^([a-z0-9],?)+$/i,h=a.html.Schema.blockElementsMap,i=/^[ \t\r\n]*$/;a.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(b,c){var d=this,f,g;d.doc=b,d.win=window,d.files={},d.cssFlicker=!1,d.counter=0,d.stdMode=!a.isIE||b.documentMode>=8,d.boxModel=!a.isIE||b.compatMode=="CSS1Compat"||d.stdMode,d.hasOuterHTML="outerHTML"in b.createElement("a"),d.settings=c=a.extend({keep_values:!1,hex_colors:1},c),d.schema=c.schema,d.styles=new a.html.Styles({url_converter:c.url_converter,url_converter_scope:c.url_converter_scope},c.schema);if(a.isIE6)try{b.execCommand("BackgroundImageCache",!1,!0)}catch(h){d.cssFlicker=!0}if(e&&c.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(a){b.createElement(a)});for(g in c.schema.getCustomElements())b.createElement(g)}a.addUnload(d.destroy,d)},getRoot:function(){var a=this,b=a.settings;return b&&a.get(b.root_element)||a.doc.body},getViewPort:function(a){var b,c;return a=a?a:this.win,b=a.document,c=this.boxModel?b.documentElement:b.body,{x:a.pageXOffset||c.scrollLeft,y:a.pageYOffset||c.scrollTop,w:a.innerWidth||c.clientWidth,h:a.innerHeight||c.clientHeight}},getRect:function(a){var b,c=this,d;return a=c.get(a),b=c.getPos(a),d=c.getSize(a),{x:b.x,y:b.y,w:d.w,h:d.h}},getSize:function(a){var b=this,c,d;return a=b.get(a),c=b.getStyle(a,"width"),d=b.getStyle(a,"height"),c.indexOf("px")===-1&&(c=0),d.indexOf("px")===-1&&(d=0),{w:parseInt(c)||a.offsetWidth||a.clientWidth,h:parseInt(d)||a.offsetHeight||a.clientHeight}},getParent:function(a,b,c){return this.getParents(a,b,c,!1)},getParents:function(a,b,d,e){var f=this,g,h=f.settings,i=[];a=f.get(a),e=e===undefined,h.strict_root&&(d=d||f.getRoot()),c(b,"string")&&(g=b,b==="*"?b=function(a){return a.nodeType==1}:b=function(a){return f.is(a,g)});while(a){if(a==d||!a.nodeType||a.nodeType===9)break;if(!b||b(a)){if(!e)return a;i.push(a)}a=a.parentNode}return e?i:null},get:function(a){var b;if(a&&this.doc&&typeof a=="string"){b=a,a=this.doc.getElementById(a);if(a&&a.id!==b)return this.doc.getElementsByName(b)[1]}return a},getNext:function(a,b){return this._findSib(a,b,"nextSibling")},getPrev:function(a,b){return this._findSib(a,b,"previousSibling")},add:function(a,b,d,e,f){var g=this;return this.run(a,function(a){var h,i;return h=c(b,"string")?g.doc.createElement(b):b,g.setAttribs(h,d),e&&(e.nodeType?h.appendChild(e):g.setHTML(h,e)),f?h:a.appendChild(h)})},create:function(a,b,c){return this.add(this.doc.createElement(a),a,b,c,1)},createHTML:function(a,b,c){var d="",e=this,f;d+="<"+a;for(f in b)b.hasOwnProperty(f)&&(d+=" "+f+'="'+e.encode(b[f])+'"');return typeof c!="undefined"?d+">"+c+"</"+a+">":d+" />"},remove:function(b,c){return this.run(b,function(b){var d,e=b.parentNode;if(!e)return null;if(c)while(d=b.firstChild)!a.isIE||d.nodeType!==3||d.nodeValue?e.insertBefore(d,b):b.removeChild(d);return e.removeChild(b)})},setStyle:function(b,c,d){var f=this;return f.run(b,function(g){var h,i;h=g.style,c=c.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}),f.pixelStyles.test(c)&&(a.is(d,"number")||/^[\-0-9\.]+$/.test(d))&&(d+="px");switch(c){case"opacity":if(e){h.filter=d===""?"":"alpha(opacity="+d*100+")";if(!b.currentStyle||!b.currentStyle.hasLayout)h.display="inline-block"}h[c]=h["-moz-opacity"]=h["-khtml-opacity"]=d||"";break;case"float":e?h.styleFloat=d:h.cssFloat=d;break;default:h[c]=d||""}f.settings.update_styles&&f.setAttrib(g,"data-mce-style")})},getStyle:function(a,b,c){a=this.get(a);if(!a)return;if(this.doc.defaultView&&c){b=b.replace(/[A-Z]/g,function(a){return"-"+a});try{return this.doc.defaultView.getComputedStyle(a,null).getPropertyValue(b)}catch(d){return null}}return b=b.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}),b=="float"&&(b=e?"styleFloat":"cssFloat"),a.currentStyle&&c?a.currentStyle[b]:a.style?a.style[b]:undefined},setStyles:function(a,c){var d=this,e=d.settings,f;f=e.update_styles,e.update_styles=0,b(c,function(b,c){d.setStyle(a,c,b)}),e.update_styles=f,e.update_styles&&d.setAttrib(a,e.cssText)},removeAllAttribs:function(a){return this.run(a,function(a){var b,c=a.attributes;for(b=c.length-1;b>=0;b--)a.removeAttributeNode(c.item(b))})},setAttrib:function(a,d,e){var f=this;if(!a||!d)return;return f.settings.strict&&(d=d.toLowerCase()),this.run(a,function(a){var g=f.settings;if(e!==null)switch(d){case"style":if(!c(e,"string")){b(e,function(b,c){f.setStyle(a,c,b)});return}g.keep_values&&(e&&!f._isRes(e)?a.setAttribute("data-mce-style",e,2):a.removeAttribute("data-mce-style",2)),a.style.cssText=e;break;case"class":a.className=e||"";break;case"src":case"href":g.keep_values&&(g.url_converter&&(e=g.url_converter.call(g.url_converter_scope||f,e,d,a)),f.setAttrib(a,"data-mce-"+d,e,2));break;case"shape":a.setAttribute("data-mce-style",e)}c(e)&&e!==null&&e.length!==0?a.setAttribute(d,""+e,2):a.removeAttribute(d,2)})},setAttribs:function(a,c){var d=this;return this.run(a,function(a){b(c,function(b,c){d.setAttrib(a,c,b)})})},getAttrib:function(b,f,g){var h,i=this,j;b=i.get(b);if(!b||b.nodeType!==1)return g===j?!1:g;c(g)||(g="");if(/^(src|href|style|coords|shape)$/.test(f)){h=b.getAttribute("data-mce-"+f);if(h)return h}e&&i.props[f]&&(h=b[i.props[f]],h=h&&h.nodeValue?h.nodeValue:h),h||(h=b.getAttribute(f,2));if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(f))return b[i.props[f]]===!0&&h===""?f:h?f:"";if(b.nodeName==="FORM"&&b.getAttributeNode(f))return b.getAttributeNode(f).nodeValue;f==="style"&&(h=h||b.style.cssText,h&&(h=i.serializeStyle(i.parseStyle(h),b.nodeName),i.settings.keep_values&&!i._isRes(h)&&b.setAttribute("data-mce-style",h))),d&&f==="class"&&h&&(h=h.replace(/(apple|webkit)\-[a-z\-]+/gi,""));if(e)switch(f){case"rowspan":case"colspan":h===1&&(h="");break;case"size":if(h==="+0"||h===20||h===0)h="";break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":h===0&&(h="");break;case"hspace":h===-1&&(h="");break;case"maxlength":case"tabindex":if(h===32768||h===2147483647||h==="32768")h="";break;case"multiple":case"compact":case"noshade":case"nowrap":if(h===65535)return f;return g;case"shape":h=h.toLowerCase();break;default:f.indexOf("on")===0&&h&&(h=a._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+h))}return h!==j&&h!==null&&h!==""?""+h:g},getPos:function(a,b){var c=this,d=0,e=0,f,g=c.doc,h;a=c.get(a),b=b||g.body;if(a){if(a.getBoundingClientRect)return a=a.getBoundingClientRect(),f=c.boxModel?g.documentElement:g.body,d=a.left+(g.documentElement.scrollLeft||g.body.scrollLeft)-f.clientTop,e=a.top+(g.documentElement.scrollTop||g.body.scrollTop)-f.clientLeft,{x:d,y:e};h=a;while(h&&h!=b&&h.nodeType)d+=h.offsetLeft||0,e+=h.offsetTop||0,h=h.offsetParent;h=a.parentNode;while(h&&h!=b&&h.nodeType)d-=h.scrollLeft||0,e-=h.scrollTop||0,h=h.parentNode}return{x:d,y:e}},parseStyle:function(a){return this.styles.parse(a)},serializeStyle:function(a,b){return this.styles.serialize(a,b)},loadCSS:function(c){var d=this,f=d.doc,g;c||(c=""),g=d.select("head")[0],b(c.split(","),function(b){var c;if(d.files[b])return;d.files[b]=!0,c=d.create("link",{rel:"stylesheet",href:a._addVer(b)}),e&&f.documentMode&&f.recalc&&(c.onload=function(){f.recalc&&f.recalc(),c.onload=null}),g.appendChild(c)})},addClass:function(a,b){return this.run(a,function(a){var c;return b?this.hasClass(a,b)?a.className:(c=this.removeClass(a,b),a.className=(c!=""?c+" ":"")+b):0})},removeClass:function(b,c){var d=this,e;return d.run(b,function(b){var f;return d.hasClass(b,c)?(e||(e=new RegExp("(^|\\s+)"+c+"(\\s+|$)","g")),f=b.className.replace(e," "),f=a.trim(f!=" "?f:""),b.className=f,f||(b.removeAttribute("class"),b.removeAttribute("className")),f):b.className})},hasClass:function(a,b){return a=this.get(a),!a||!b?!1:(" "+a.className+" ").indexOf(" "+b+" ")!==-1},show:function(a){return this.setStyle(a,"display","block")},hide:function(a){return this.setStyle(a,"display","none")},isHidden:function(a){return a=this.get(a),!a||a.style.display=="none"||this.getStyle(a,"display")=="none"},uniqueId:function(a){return(a?a:"mce_")+this.counter++},setHTML:function(a,c){var d=this;return d.run(a,function(a){if(e){while(a.firstChild)a.removeChild(a.firstChild);try{a.innerHTML="<br />"+c,a.removeChild(a.firstChild)}catch(f){a=d.create("div"),a.innerHTML="<br />"+c,b(a.childNodes,function(b,c){c&&a.appendChild(b)})}}else a.innerHTML=c;return c})},getOuterHTML:function(a){var b,c=this;return a=c.get(a),a?a.nodeType===1&&c.hasOuterHTML?a.outerHTML:(b=(a.ownerDocument||c.doc).createElement("body"),b.appendChild(a.cloneNode(!0)),b.innerHTML):null},setOuterHTML:function(a,b,c){function f(a,b,c){var e,f;f=c.createElement("body"),f.innerHTML=b,e=f.lastChild;while(e)d.insertAfter(e.cloneNode(!0),a),e=e.previousSibling;d.remove(a)}var d=this;return this.run(a,function(a){a=d.get(a);if(a.nodeType==1){c=c||a.ownerDocument||d.doc;if(e)try{e&&a.nodeType==1?a.outerHTML=b:f(a,b,c)}catch(g){f(a,b,c)}else f(a,b,c)}})},decode:f.decode,encode:f.encodeAllRaw,insertAfter:function(a,b){return b=this.get(b),this.run(a,function(a){var c,d;return c=b.parentNode,d=b.nextSibling,d?c.insertBefore(a,d):c.appendChild(a),a})},isBlock:function(a){var b=a.nodeType;return b?b===1&&!!h[a.nodeName]:!!h[a]},replace:function(d,e,f){var g=this;return c(e,"array")&&(d=d.cloneNode(!0)),g.run(e,function(c){return f&&b(a.grep(c.childNodes),function(a){d.appendChild(a)}),c.parentNode.replaceChild(d,c)})},rename:function(a,c){var d=this,e;return a.nodeName!=c.toUpperCase()&&(e=d.create(c),b(d.getAttribs(a),function(b){d.setAttrib(e,b.nodeName,d.getAttrib(a,b.nodeName))}),d.replace(e,a,1)),e||a},findCommonAncestor:function(a,b){var c=a,d;while(c){d=b;while(d&&c!=d)d=d.parentNode;if(c==d)break;c=c.parentNode}return!c&&a.ownerDocument?a.ownerDocument.documentElement:c},toHex:function(a){function c(a){return a=parseInt(a).toString(16),a.length>1?a:"0"+a}var b=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(a);return b?(a="#"+c(b[1])+c(b[2])+c(b[3]),a):a},getClasses:function(){function i(c){b(c.imports,function(a){i(a)}),b(c.cssRules||c.rules,function(c){switch(c.type||1){case 1:c.selectorText&&b(c.selectorText.split(","),function(b){b=b.replace(/^\s*|\s*$|^\s\./g,"");if(/\.mce/.test(b)||!/\.[\w\-]+$/.test(b))return;h=b,b=a._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",b);if(g&&!(b=g(b,h)))return;f[b]||(d.push({"class":b}),f[b]=1)});break;case 3:i(c.styleSheet)}})}var c=this,d=[],e,f={},g=c.settings.class_filter,h;if(c.classes)return c.classes;try{b(c.doc.styleSheets,i)}catch(j){}return d.length>0&&(c.classes=d),d},run:function(a,c,d){var e=this,f;return e.doc&&typeof a=="string"&&(a=e.get(a)),a?(d=d||this,!a.nodeType&&(a.length||a.length===0)?(f=[],b(a,function(a,b){a&&(typeof a=="string"&&(a=e.doc.getElementById(a)),f.push(c.call(d,a,b)))}),f):c.call(d,a)):!1},getAttribs:function(a){var b;return a=this.get(a),a?e?(b=[],a.nodeName=="OBJECT"?a.attributes:(a.nodeName==="OPTION"&&this.getAttrib(a,"selected")&&b.push({specified:1,nodeName:"selected"}),a.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(a){b.push({specified:1,nodeName:a})}),b)):a.attributes:[]},isEmpty:function(b,c){var d=this,e,f,g,h,j,k;b=b.firstChild;if(b){h=new a.dom.TreeWalker(b),c=c||d.schema?d.schema.getNonEmptyElements():null;do{g=b.nodeType;if(g===1){if(b.getAttribute("data-mce-bogus"))continue;j=b.nodeName.toLowerCase();if(c&&c[j]){k=b.parentNode;if(j==="br"&&d.isBlock(k)&&k.firstChild===b&&k.lastChild===b)continue;return!1}f=d.getAttribs(b),e=b.attributes.length;while(e--){j=b.attributes[e].nodeName;if(j==="name"||j==="data-mce-bookmark")return!1}}if(g===3&&!i.test(b.nodeValue))return!1}while(b=h.next())}return!0},destroy:function(b){var c=this;c.events&&c.events.destroy(),c.win=c.doc=c.root=c.events=null,b||a.removeUnload(c.destroy)},createRng:function(){var b=this.doc;return b.createRange?b.createRange():new a.dom.Range(this)},nodeIndex:function(a,b){var c=0,d,e,f;if(a)for(d=a.nodeType,a=a.previousSibling,e=a;a;a=a.previousSibling){f=a.nodeType;if(b&&f==3)if(f==d||!a.nodeValue.length)continue;c++,d=f}return c},split:function(b,c,d){function j(b){var c,d=b.childNodes,f=b.nodeType;if(f==1&&b.getAttribute("data-mce-type")=="bookmark")return;for(c=d.length-1;c>=0;c--)j(d[c]);if(f!=9){if(f==3&&b.nodeValue.length>0){if(!e.isBlock(b.parentNode)||a.trim(b.nodeValue).length>0)return}else if(f==1){d=b.childNodes,d.length==1&&d[0]&&d[0].nodeType==1&&d[0].getAttribute("data-mce-type")=="bookmark"&&b.parentNode.insertBefore(d[0],b);if(d.length||/^(br|hr|input|img)$/i.test(b.nodeName))return}e.remove(b)}return b}var e=this,f=e.createRng(),g,h,i;if(b&&c)return f.setStart(b.parentNode,e.nodeIndex(b)),f.setEnd(c.parentNode,e.nodeIndex(c)),g=f.extractContents(),f=e.createRng(),f.setStart(c.parentNode,e.nodeIndex(c)+1),f.setEnd(b.parentNode,e.nodeIndex(b)+1),h=f.extractContents(),i=b.parentNode,i.insertBefore(j(g),b),d?i.replaceChild(d,c):i.insertBefore(c,b),i.insertBefore(j(h),b),e.remove(b),d||c},bind:function(b,c,d,e){var f=this;return f.events||(f.events=new a.dom.EventUtils),f.events.add(b,c,d,e||this)},unbind:function(b,c,d){var e=this;return e.events||(e.events=new a.dom.EventUtils),e.events.remove(b,c,d)},_findSib:function(a,b,d){var e=this,f=b;if(a){c(f,"string")&&(f=function(a){return e.is(a,b)});for(a=a[d];a;a=a[d])if(f(a))return a}return null},_isRes:function(a){return/^(top|left|bottom|right|width|height)/i.test(a)||/;\s*(top|left|bottom|right|width|height)/i.test(a)}}),a.DOM=new a.dom.DOMUtils(document,{process_html:0})}(tinymce),function(a){function b(a){function p(a,b){I(h,a,b)}function q(a,b){I(i,a,b)}function r(a){p(a.parentNode,o(a))}function s(a){p(a.parentNode,o(a)+1)}function t(a){q(a.parentNode,o(a))}function u(a){q(a.parentNode,o(a)+1)}function v(a){a?(c[l]=c[k],c[m]=c[j]):(c[k]=c[l],c[j]=c[m]),c.collapsed=h}function w(a){r(a),u(a)}function x(a){p(a,0),q(a,a.nodeType===1?a.childNodes.length:a.nodeValue.length)}function y(a,b){var d=c[k],e=c[j],f=c[l],g=c[m],h=b.startContainer,i=b.startOffset,n=b.endContainer,o=b.endOffset;if(a===0)return H(d,e,h,i);if(a===1)return H(f,g,h,i);if(a===2)return H(f,g,n,o);if(a===3)return H(d,e,n,o)}function z(){J(g)}function A(){return J(e)}function B(){return J(f)}function C(b){var c=this[k],d=this[j],e,f;c.nodeType!==3&&c.nodeType!==4||!c.nodeValue?(c.childNodes.length>0&&(f=c.childNodes[d]),f?c.insertBefore(b,f):c.appendChild(b)):d?d>=c.nodeValue.length?a.insertAfter(b,c):(e=c.splitText(d),c.parentNode.insertBefore(b,e)):c.parentNode.insertBefore(b,c)}function D(a){var b=c.extractContents();c.insertNode(a),a.appendChild(b),c.selectNode(a)}function E(){return n(new b(a),{startContainer:c[k],startOffset:c[j],endContainer:c[l],endOffset:c[m],collapsed:c.collapsed,commonAncestorContainer:c.commonAncestorContainer})}function F(a,b){var c;if(a.nodeType==3)return a;if(b<0)return a;c=a.firstChild;while(c&&b>0)--b,c=c.nextSibling;return c?c:a}function G(){return c[k]==c[l]&&c[j]==c[m]}function H(b,c,d,e){var f,g,h,i,j,k;if(b==d)return c==e?0:c<e?-1:1;f=d;while(f&&f.parentNode!=b)f=f.parentNode;if(f){g=0,h=b.firstChild;while(h!=f&&g<c)g++,h=h.nextSibling;return c<=g?-1:1}f=b;while(f&&f.parentNode!=d)f=f.parentNode;if(f){g=0,h=d.firstChild;while(h!=f&&g<e)g++,h=h.nextSibling;return g<e?-1:1}i=a.findCommonAncestor(b,d),j=b;while(j&&j.parentNode!=i)j=j.parentNode;j||(j=i),k=d;while(k&&k.parentNode!=i)k=k.parentNode;k||(k=i);if(j==k)return 0;h=i.firstChild;while(h){if(h==j)return-1;if(h==k)return 1;h=h.nextSibling}}function I(b,d,e){var f,g;b?(c[k]=d,c[j]=e):(c[l]=d,c[m]=e),f=c[l];while(f.parentNode)f=f.parentNode;g=c[k];while(g.parentNode)g=g.parentNode;g==f?H(c[k],c[j],c[l],c[m])>0&&c.collapse(b):c.collapse(b),c.collapsed=G(),c.commonAncestorContainer=a.findCommonAncestor(c[k],c[l])}function J(a){var b,d=0,e=0,f,g,h,i,j,m;if(c[k]==c[l])return K(a);for(b=c[l],f=b.parentNode;f;b=f,f=f.parentNode){if(f==c[k])return L(b,a);++d}for(b=c[k],f=b.parentNode;f;b=f,f=f.parentNode){if(f==c[l])return M(b,a);++e}g=e-d,h=c[k];while(g>0)h=h.parentNode,g--;i=c[l];while(g<0)i=i.parentNode,g++;for(j=h.parentNode,m=i.parentNode;j!=m;j=j.parentNode,m=m.parentNode)h=j,i=m;return N(h,i,a)}function K(a){var b,e,i,l,n,o,p;a!=g&&(b=d.createDocumentFragment());if(c[j]==c[m])return b;if(c[k].nodeType==3){e=c[k].nodeValue,i=e.substring(c[j],c[m]),a!=f&&(c[k].deleteData(c[j],c[m]-c[j]),c.collapse(h));if(a==g)return;return b.appendChild(d.createTextNode(i)),b}l=F(c[k],c[j]),n=c[m]-c[j];while(n>0)o=l.nextSibling,p=R(l,a),b&&b.appendChild(p),--n,l=o;return a!=f&&c.collapse(h),b}function L(a,b){var e,h,k,l,m,n;b!=g&&(e=d.createDocumentFragment()),h=O(a,b),e&&e.appendChild(h),k=o(a),l=k-c[j];if(l<=0)return b!=f&&(c.setEndBefore(a),c.collapse(i)),e;h=a.previousSibling;while(l>0)m=h.previousSibling,n=R(h,b),e&&e.insertBefore(n,e.firstChild),--l,h=m;return b!=f&&(c.setEndBefore(a),c.collapse(i)),e}function M(a,b){var e,i,j,k,l,n;b!=g&&(e=d.createDocumentFragment()),j=P(a,b),e&&e.appendChild(j),i=o(a),++i,k=c[m]-i,j=a.nextSibling;while(k>0)l=j.nextSibling,n=R(j,b),e&&e.appendChild(n),--k,j=l;return b!=f&&(c.setStartAfter(a),c.collapse(h)),e}function N(a,b,e){var i,j,k,l,m,n,p,q;e!=g&&(j=d.createDocumentFragment()),i=P(a,e),j&&j.appendChild(i),k=a.parentNode,l=o(a),m=o(b),++l,n=m-l,p=a.nextSibling;while(n>0)q=p.nextSibling,i=R(p,e),j&&j.appendChild(i),p=q,--n;return i=O(b,e),j&&j.appendChild(i),e!=f&&(c.setStartAfter(a),c.collapse(h)),j}function O(a,b){var d=F(c[l],c[m]-1),e,f,j,k,n,o=d!=c[l];if(d==a)return Q(d,o,i,b);e=d.parentNode,f=Q(e,i,i,b);while(e){while(d)j=d.previousSibling,k=Q(d,o,i,b),b!=g&&f.insertBefore(k,f.firstChild),o=h,d=j;if(e==a)return f;d=e.previousSibling,e=e.parentNode,n=Q(e,i,i,b),b!=g&&n.appendChild(f),f=n}}function P(a,b){var d=F(c[k],c[j]),e=d!=c[k],f,l,m,n,o;if(d==a)return Q(d,e,h,b);f=d.parentNode,l=Q(f,i,h,b);while(f){while(d)m=d.nextSibling,n=Q(d,e,h,b),b!=g&&l.appendChild(n),e=h,d=m;if(f==a)return l;d=f.nextSibling,f=f.parentNode,o=Q(f,i,h,b),b!=g&&o.appendChild(l),l=o}}function Q(a,b,d,e){var h,k,l,n,o;if(b)return R(a,e);if(a.nodeType==3){h=a.nodeValue,d?(n=c[j],k=h.substring(n),l=h.substring(0,n)):(n=c[m],k=h.substring(0,n),l=h.substring(n)),e!=f&&(a.nodeValue=l);if(e==g)return;return o=a.cloneNode(i),o.nodeValue=k,o}if(e==g)return;return a.cloneNode(i)}function R(a,b){if(b!=g)return b==f?a.cloneNode(h):a;a.parentNode.removeChild(a)}var c=this,d=a.doc,e=0,f=1,g=2,h=!0,i=!1,j="startOffset",k="startContainer",l="endContainer",m="endOffset",n=tinymce.extend,o=a.nodeIndex;n(c,{startContainer:d,startOffset:0,endContainer:d,endOffset:0,collapsed:h,commonAncestorContainer:d,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:p,setEnd:q,setStartBefore:r,setStartAfter:s,setEndBefore:t,setEndAfter:u,collapse:v,selectNode:w,selectNodeContents:x,compareBoundaryPoints:y,deleteContents:z,extractContents:A,cloneContents:B,insertNode:C,surroundContents:D,cloneRange:E})}a.Range=b}(tinymce.dom),function(){function a(a){function f(b,c){var d,e=0,f,g,h,i,j,k,l=-1,m;d=b.duplicate(),d.collapse(c),m=d.parentElement();if(m.ownerDocument!==a.dom.doc)return;while(m.contentEditable==="false")m=m.parentNode;if(!m.hasChildNodes())return{node:m,inside:1};h=m.children,f=h.length-1;while(e<=f){k=Math.floor((e+f)/2),i=h[k],d.moveToElementText(i),l=d.compareEndPoints(c?"StartToStart":"EndToEnd",b);if(l>0)f=k-1;else{if(!(l<0))return{node:i};e=k+1}}if(l<0){i?d.collapse(!1):(d.moveToElementText(m),d.collapse(!0),i=m,g=!0),d.setEndPoint(c?"EndToStart":"EndToEnd",b);if(d.compareEndPoints(c?"StartToStart":"StartToEnd",b)>0){d=b.duplicate(),d.collapse(c),j=-1;while(m==d.parentElement()){if(d.move("character",-1)==0)break;j++}}j=j||d.text.replace("\r\n"," ").length}else d.collapse(!0),d.setEndPoint(c?"StartToStart":"StartToEnd",b),j=d.text.replace("\r\n"," ").length;return{node:i,position:l,offset:j,inside:g}}function g(){function n(a){var b=f(d,a),c,g,h=0,i,j,k;c=b.node,g=b.offset;if(b.inside&&!c.hasChildNodes()){e[a?"setStart":"setEnd"](c,0);return}if(g===j){e[a?"setStartBefore":"setEndAfter"](c);return}if(b.position<0){i=b.inside?c.firstChild:c.nextSibling;if(!i){e[a?"setStartAfter":"setEndAfter"](c);return}if(!g){i.nodeType==3?e[a?"setStart":"setEnd"](i,0):e[a?"setStartBefore":"setEndBefore"](i);return}while(i){k=i.nodeValue,h+=k.length;if(h>=g){c=i,h-=g,h=k.length-h;break}i=i.nextSibling}}else{i=c.previousSibling;if(!i)return e[a?"setStartBefore":"setEndBefore"](c);if(!g){c.nodeType==3?e[a?"setStart":"setEnd"](i,c.nodeValue.length):e[a?"setStartAfter":"setEndAfter"](i);return}while(i){h+=i.nodeValue.length;if(h>=g){c=i,h-=g;break}i=i.previousSibling}}e[a?"setStart":"setEnd"](c,h)}var d=a.getRng(),e=c.createRng(),g,i,j,k,l,m;g=d.item?d.item(0):d.parentElement();if(g.ownerDocument!=c.doc)return e;i=a.isCollapsed();if(d.item)return e.setStart(g.parentNode,c.nodeIndex(g)),e.setEnd(e.startContainer,e.startOffset+1),e;try{n(!0),i||n()}catch(o){if(o.number!=-2147024809)throw o;l=b.getBookmark(2),j=d.duplicate(),j.collapse(!0),g=j.parentElement(),i||(j=d.duplicate(),j.collapse(!1),k=j.parentElement(),k.innerHTML=k.innerHTML),g.innerHTML=g.innerHTML,b.moveToBookmark(l),d=a.getRng(),n(!0),i||n()}return e}var b=this,c=a.dom,d=!0,e=!1;this.getBookmark=function(b){function j(a){var a,b,d,e,f,g=[];b=a.parentNode,d=c.getRoot().parentNode;while(b!=d&&b.nodeType!==9){e=b.children,f=e.length;while(f--)if(a===e[f]){g.push(f);break}a=b,b=b.parentNode}return g}function k(a){var b;b=f(d,a);if(b)return{position:b.position,offset:b.offset,indexes:j(b.node),inside:b.inside}}var d=a.getRng(),e,g,i={};return b===2&&(d.item?i.start={ctrl:!0,indexes:j(d.item(0))}:(i.start=k(!0),a.isCollapsed()||(i.end=k()))),i},this.moveToBookmark=function(a){function e(a){var b,d,e,f;b=c.getRoot();for(d=a.length-1;d>=0;d--)f=b.children,e=a[d],e<=f.length-1&&(b=f[e]);return b}function f(c){var f=a[c?"start":"end"],g,h,l;f&&(g=f.position>0,h=d.createTextRange(),h.moveToElementText(e(f.indexes)),offset=f.offset,offset!==l?(h.collapse(f.inside||g),h.moveStart("character",g?-offset:offset)):h.collapse(c),b.setEndPoint(c?"StartToStart":"EndToStart",h),c&&b.collapse(!0))}var b,d=c.doc.body;a.start&&(a.start.ctrl?(b=d.createControlRange(),b.addElement(e(a.start.indexes)),b.select()):(b=d.createTextRange(),f(!0),f(),b.select()))},this.addRange=function(b){function n(a){var b,f,n,o,t;n=c.create("a"),b=a?g:j,f=a?i:k,o=e.duplicate();if(b==l||b==l.documentElement)b=m,f=0;b.nodeType==3?(b.parentNode.insertBefore(n,b),o.moveToElementText(n),o.moveStart("character",f),c.remove(n),e.setEndPoint(a?"StartToStart":"EndToEnd",o)):(t=b.childNodes,t.length?(f>=t.length?c.insertAfter(n,t[t.length-1]):b.insertBefore(n,t[f]),o.moveToElementText(n)):(n=l.createTextNode("﻿"),b.appendChild(n),o.moveToElementText(n.parentNode),o.collapse(d)),e.setEndPoint(a?"StartToStart":"EndToEnd",o),c.remove(n))}var e,f,g,i,j,k,l=a.dom.doc,m=l.body;g=b.startContainer,i=b.startOffset,j=b.endContainer,k=b.endOffset,e=m.createTextRange();if(g==j&&g.nodeType==1&&i==k-1&&i==k-1)try{f=m.createControlRange(),f.addElement(g.childNodes[i]),f.select();return}catch(o){}n(!0),n(),e.select()},this.getRangeAt=g}tinymce.dom.TridentSelection=a}(),function(a){var b=a.each,c=a.DOM,d=a.isIE,e=a.isWebKit,f;a.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[],this.events=[]},add:function(e,f,g,h){var i,j=this,k=j.events,l;if(f instanceof Array)return l=[],b(f,function(a){l.push(j.add(e,a,g,h))}),l;if(e&&e.hasOwnProperty&&e instanceof Array)return l=[],b(e,function(a){a=c.get(a),l.push(j.add(a,f,g,h))}),l;e=c.get(e);if(!e)return;return i=function(b){if(j.disabled)return;return b=b||window.event,b&&d&&(b.target||(b.target=b.srcElement),a.extend(b,j._stoppers)),h?g.call(h,b):g(b)},f=="unload"?(a.unloads.unshift({func:i}),i):f=="init"?(j.domLoaded?i():j.inits.push(i),i):(k.push({obj:e,name:f,func:g,cfunc:i,scope:h}),j._add(e,f,i),g)},remove:function(a,d,e){var f=this,g=f.events,h=!1,i;return a&&a.hasOwnProperty&&a instanceof Array?(i=[],b(a,function(a){a=c.get(a),i.push(f.remove(a,d,e))}),i):(a=c.get(a),b(g,function(b,c){if(b.obj==a&&b.name==d&&(!e||b.func==e||b.cfunc==e))return g.splice(c,1),f._remove(a,d,b.cfunc),h=!0,!1}),h)},clear:function(a){var b=this,d=b.events,e,f;if(a){a=c.get(a);for(e=d.length-1;e>=0;e--)f=d[e],f.obj===a&&(b._remove(f.obj,f.name,f.cfunc),f.obj=f.cfunc=null,d.splice(e,1))}},cancel:function(a){return a?(this.stop(a),this.prevent(a)):!1},stop:function(a){return a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,!1},prevent:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,!1},destroy:function(){var a=this;b(a.events,function(b,c){a._remove(b.obj,b.name,b.cfunc),b.obj=b.cfunc=null}),a.events=[],a=null},_add:function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener?a.addEventListener(b,c,!1):a["on"+b]=c},_remove:function(a,b,c){if(a)try{a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener?a.removeEventListener(b,c,!1):a["on"+b]=null}catch(d){}},_pageInit:function(a){var c=this;if(c.domLoaded)return;c.domLoaded=!0,b(c.inits,function(a){a()}),c.inits=[]},_wait:function(a){var b=this,c=a.document;if(a.tinyMCE_GZ&&tinyMCE_GZ.loaded){b.domLoaded=1;return}c.attachEvent?(c.attachEvent("onreadystatechange",function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",arguments.callee),b._pageInit(a))}),c.documentElement.doScroll&&a==a.top&&function(){if(b.domLoaded)return;try{c.documentElement.doScroll("left")}catch(d){setTimeout(arguments.callee,0);return}b._pageInit(a)}()):c.addEventListener&&b._add(a,"DOMContentLoaded",function(){b._pageInit(a)}),b._add(a,"load",function(){b._pageInit(a)})},_stoppers:{preventDefault:function(){this.returnValue=!1
},stopPropagation:function(){this.cancelBubble=!0}}}),f=a.dom.Event=new a.dom.EventUtils,f._wait(window),a.addUnload(function(){f.destroy()})}(tinymce),function(a){a.dom.Element=function(b,c){var d=this,e,f;d.settings=c=c||{},d.id=b,d.dom=e=c.dom||a.DOM,a.isIE||(f=e.get(d.id)),a.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(a){d[a]=function(){var c=[b],f;for(f=0;f<arguments.length;f++)c.push(arguments[f]);return c=e[a].apply(e,c),d.update(a),c}}),a.extend(d,{on:function(b,c,e){return a.dom.Event.add(d.id,b,c,e)},getXY:function(){return{x:parseInt(d.getStyle("left")),y:parseInt(d.getStyle("top"))}},getSize:function(){var a=e.get(d.id);return{w:parseInt(d.getStyle("width")||a.clientWidth),h:parseInt(d.getStyle("height")||a.clientHeight)}},moveTo:function(a,b){d.setStyles({left:a,top:b})},moveBy:function(a,b){var c=d.getXY();d.moveTo(c.x+a,c.y+b)},resizeTo:function(a,b){d.setStyles({width:a,height:b})},resizeBy:function(a,b){var c=d.getSize();d.resizeTo(c.w+a,c.h+b)},update:function(b){var f;if(a.isIE6&&c.blocker){b=b||"";if(b.indexOf("get")===0||b.indexOf("has")===0||b.indexOf("is")===0)return;if(b=="remove"){e.remove(d.blocker);return}d.blocker?f=e.get(d.blocker):(d.blocker=e.uniqueId(),f=e.add(c.container||e.getRoot(),"iframe",{id:d.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),e.setStyle(f,"opacity",0)),e.setStyles(f,{left:d.getStyle("left",1),top:d.getStyle("top",1),width:d.getStyle("width",1),height:d.getStyle("height",1),display:d.getStyle("display",1),zIndex:parseInt(d.getStyle("zIndex",1)||0)-1})}}})}}(tinymce),function(a){function b(a){return a.replace(/[\n\r]+/g,"")}var c=a.is,d=a.isIE,e=a.each;a.create("tinymce.dom.Selection",{Selection:function(b,c,d){var f=this;f.dom=b,f.win=c,f.serializer=d,e(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(b){f[b]=new a.util.Dispatcher(f)}),f.win.getSelection||(f.tridentSel=new a.dom.TridentSelection(f)),a.isIE&&b.boxModel&&this._fixIESelection(),a.addUnload(f.destroy,f)},setCursorLocation:function(a,b){var c=this,d=c.dom.createRng();d.setStart(a,b),d.setEnd(a,b),c.setRng(d),c.collapse(!1)},getContent:function(a){var b=this,d=b.getRng(),e=b.dom.create("body"),f=b.getSel(),g,h,i;return a=a||{},g=h="",a.get=!0,a.format=a.format||"html",a.forced_root_block="",b.onBeforeGetContent.dispatch(b,a),a.format=="text"?b.isCollapsed()?"":d.text||(f.toString?f.toString():""):(d.cloneContents?(i=d.cloneContents(),i&&e.appendChild(i)):c(d.item)||c(d.htmlText)?(e.innerHTML="<br>"+(d.item?d.item(0).outerHTML:d.htmlText),e.removeChild(e.firstChild)):e.innerHTML=d.toString(),/^\s/.test(e.innerHTML)&&(g=" "),/\s+$/.test(e.innerHTML)&&(h=" "),a.getInner=!0,a.content=b.isCollapsed()?"":g+b.serializer.serialize(e,a)+h,b.onGetContent.dispatch(b,a),a.content)},setContent:function(a,b){var c=this,d=c.getRng(),e,f=c.win.document,g,h;b=b||{format:"html"},b.set=!0,a=b.content=a,b.no_events||c.onBeforeSetContent.dispatch(c,b),a=b.content;if(d.insertNode){a+='<span id="__caret">_</span>',d.startContainer==f&&d.endContainer==f?f.body.innerHTML=a:(d.deleteContents(),f.body.childNodes.length==0?f.body.innerHTML=a:d.createContextualFragment?d.insertNode(d.createContextualFragment(a)):(g=f.createDocumentFragment(),h=f.createElement("div"),g.appendChild(h),h.outerHTML=a,d.insertNode(g))),e=c.dom.get("__caret"),d=f.createRange(),d.setStartBefore(e),d.setEndBefore(e),c.setRng(d),c.dom.remove("__caret");try{c.setRng(d)}catch(i){}}else d.item&&(f.execCommand("Delete",!1,null),d=c.getRng()),/^\s+/.test(a)?(d.pasteHTML('<span id="__mce_tmp">_</span>'+a),c.dom.remove("__mce_tmp")):d.pasteHTML(a);b.no_events||c.onSetContent.dispatch(c,b)},getStart:function(){var a=this.getRng(),b,c,d,e;if(a.duplicate||a.item){if(a.item)return a.item(0);d=a.duplicate(),d.collapse(1),b=d.parentElement(),c=e=a.parentElement();while(e=e.parentNode)if(e==b){b=c;break}return b}return b=a.startContainer,b.nodeType==1&&b.hasChildNodes()&&(b=b.childNodes[Math.min(b.childNodes.length-1,a.startOffset)]),b&&b.nodeType==3?b.parentNode:b},getEnd:function(){var a=this,b=a.getRng(),c,d;return b.duplicate||b.item?b.item?b.item(0):(b=b.duplicate(),b.collapse(0),c=b.parentElement(),c&&c.nodeName=="BODY"?c.lastChild||c:c):(c=b.endContainer,d=b.endOffset,c.nodeType==1&&c.hasChildNodes()&&(c=c.childNodes[d>0?d-1:d]),c&&c.nodeType==3?c.parentNode:c)},getBookmark:function(a,b){function o(a,b){var c=0;return e(d.select(a),function(a,d){a==b&&(c=d)}),c}var c=this,d=c.dom,f,g,h,i,j,k,l,m="﻿",n;if(a==2){function p(){function g(a,d){var f=a[d?"startContainer":"endContainer"],g=a[d?"startOffset":"endOffset"],h=[],i,j,k=0;if(f.nodeType==3){if(b)for(i=f.previousSibling;i&&i.nodeType==3;i=i.previousSibling)g+=i.nodeValue.length;h.push(g)}else j=f.childNodes,g>=j.length&&j.length&&(k=1,g=Math.max(0,j.length-1)),h.push(c.dom.nodeIndex(j[g],b)+k);for(;f&&f!=e;f=f.parentNode)h.push(c.dom.nodeIndex(f,b));return h}var a=c.getRng(!0),e=d.getRoot(),f={};return f.start=g(a,!0),c.isCollapsed()||(f.end=g(a)),f}return c.tridentSel?c.tridentSel.getBookmark(a):p()}if(a)return{rng:c.getRng()};f=c.getRng(),h=d.uniqueId(),i=tinyMCE.activeEditor.selection.isCollapsed(),n="overflow:hidden;line-height:0px";if(f.duplicate||f.item){if(!!f.item)return k=f.item(0),j=k.nodeName,{name:j,index:o(j,k)};g=f.duplicate();try{f.collapse(),f.pasteHTML('<span data-mce-type="bookmark" id="'+h+'_start" style="'+n+'">'+m+"</span>"),i||(g.collapse(!1),f.moveToElementText(g.parentElement()),f.compareEndPoints("StartToEnd",g)==0&&g.move("character",-1),g.pasteHTML('<span data-mce-type="bookmark" id="'+h+'_end" style="'+n+'">'+m+"</span>"))}catch(q){return null}}else{k=c.getNode(),j=k.nodeName;if(j=="IMG")return{name:j,index:o(j,k)};g=f.cloneRange(),i||(g.collapse(!1),g.insertNode(d.create("span",{"data-mce-type":"bookmark",id:h+"_end",style:n},m))),f.collapse(!0),f.insertNode(d.create("span",{"data-mce-type":"bookmark",id:h+"_start",style:n},m))}return c.moveToBookmark({id:h,keep:1}),{id:h}},moveToBookmark:function(b){var c=this,f=c.dom,g,h,i,j,k,l,m,n;if(b)if(b.start){i=f.createRng(),j=f.getRoot();function o(a){var c=b[a?"start":"end"],d,e,f,g;if(c){f=c[0];for(e=j,d=c.length-1;d>=1;d--){g=e.childNodes;if(c[d]>g.length-1)return;e=g[c[d]]}e.nodeType===3&&(f=Math.min(c[0],e.nodeValue.length)),e.nodeType===1&&(f=Math.min(c[0],e.childNodes.length)),a?i.setStart(e,f):i.setEnd(e,f)}return!0}if(c.tridentSel)return c.tridentSel.moveToBookmark(b);o(!0)&&o()&&c.setRng(i)}else if(b.id){function p(c){var d=f.get(b.id+"_"+c),g,h,i,j,o=b.keep;if(d){g=d.parentNode,c=="start"?(o?(g=d.firstChild,h=1):h=f.nodeIndex(d),k=l=g,m=n=h):(o?(g=d.firstChild,h=1):h=f.nodeIndex(d),l=g,n=h);if(!o){j=d.previousSibling,i=d.nextSibling,e(a.grep(d.childNodes),function(a){a.nodeType==3&&(a.nodeValue=a.nodeValue.replace(/\uFEFF/g,""))});while(d=f.get(b.id+"_"+c))f.remove(d,1);j&&i&&j.nodeType==i.nodeType&&j.nodeType==3&&!a.isOpera&&(h=j.nodeValue.length,j.appendData(i.nodeValue),f.remove(i),c=="start"?(k=l=j,m=n=h):(l=j,n=h))}}}function q(a){return f.isBlock(a)&&!a.innerHTML&&(a.innerHTML=d?" ":'<br data-mce-bogus="1" />'),a}p("start"),p("end"),k&&(i=f.createRng(),i.setStart(q(k),m),i.setEnd(q(l),n),c.setRng(i))}else b.name?c.select(f.select(b.name)[b.index]):b.rng&&c.setRng(b.rng)},select:function(b,c){var d=this,e=d.dom,f=e.createRng(),g;if(b){g=e.nodeIndex(b),f.setStart(b.parentNode,g),f.setEnd(b.parentNode,g+1);if(c){function h(b,c){var d=new a.dom.TreeWalker(b,b);do{if(b.nodeType==3&&a.trim(b.nodeValue).length!=0){c?f.setStart(b,0):f.setEnd(b,b.nodeValue.length);return}if(b.nodeName=="BR"){c?f.setStartBefore(b):f.setEndBefore(b);return}}while(b=c?d.next():d.prev())}h(b,1),h(b)}d.setRng(f)}return b},isCollapsed:function(){var a=this,b=a.getRng(),c=a.getSel();return!b||b.item?!1:b.compareEndPoints?b.compareEndPoints("StartToEnd",b)===0:!c||b.collapsed},collapse:function(a){var b=this,c=b.getRng(),d;c.item&&(d=c.item(0),c=b.win.document.body.createTextRange(),c.moveToElementText(d)),c.collapse(!!a),b.setRng(c)},getSel:function(){var a=this,b=this.win;return b.getSelection?b.getSelection():b.document.selection},getRng:function(b){var c=this,d,e,f,g=c.win.document;if(b&&c.tridentSel)return c.tridentSel.getRangeAt(0);try{if(d=c.getSel())e=d.rangeCount>0?d.getRangeAt(0):d.createRange?d.createRange():g.createRange()}catch(h){}return a.isIE&&e&&e.setStart&&g.selection.createRange().item&&(f=g.selection.createRange().item(0),e=g.createRange(),e.setStartBefore(f),e.setEndAfter(f)),e||(e=g.createRange?g.createRange():g.body.createTextRange()),c.selectedRange&&c.explicitRange&&(e.compareBoundaryPoints(e.START_TO_START,c.selectedRange)===0&&e.compareBoundaryPoints(e.END_TO_END,c.selectedRange)===0?e=c.explicitRange:(c.selectedRange=null,c.explicitRange=null)),e},setRng:function(a){var b,c=this;if(!c.tridentSel){b=c.getSel();if(b){c.explicitRange=a;try{b.removeAllRanges()}catch(d){}b.addRange(a),c.selectedRange=b.getRangeAt(0)}}else{if(a.cloneRange){c.tridentSel.addRange(a);return}try{a.select()}catch(d){}}},setNode:function(a){var b=this;return b.setContent(b.dom.getOuterHTML(a)),a},getNode:function(){var a=this,b=a.getRng(),c=a.getSel(),d,e=b.startContainer,f=b.endContainer;if(!b)return a.dom.getRoot();if(b.setStart){d=b.commonAncestorContainer;if(!b.collapsed){b.startContainer==b.endContainer&&b.endOffset-b.startOffset<2&&b.startContainer.hasChildNodes()&&(d=b.startContainer.childNodes[b.startOffset]);if(e.nodeType===3&&f.nodeType===3){function g(a,b){var c=a;while(a&&a.nodeType===3&&a.length===0)a=b?a.nextSibling:a.previousSibling;return a||c}e.length===b.startOffset?e=g(e.nextSibling,!0):e=e.parentNode,b.endOffset===0?f=g(f.previousSibling,!1):f=f.parentNode;if(e&&e===f)return e}}return d&&d.nodeType==3?d.parentNode:d}return b.item?b.item(0):b.parentElement()},getSelectedBlocks:function(b,c){var d=this,e=d.dom,f,g,h,i=[];f=e.getParent(b||d.getStart(),e.isBlock),g=e.getParent(c||d.getEnd(),e.isBlock),f&&i.push(f);if(f&&g&&f!=g){h=f;var j=new a.dom.TreeWalker(f,e.getRoot());while((h=j.next())&&h!=g)e.isBlock(h)&&i.push(h)}return g&&f!=g&&i.push(g),i},normalize:function(){function e(e){var h,j,k,l=b.dom,m=l.getRoot(),n;h=c[(e?"start":"end")+"Container"],j=c[(e?"start":"end")+"Offset"],h.nodeType===9&&(h=h.body,j=0);if(h===m&&h.hasChildNodes()){h=h.childNodes[Math.min(!e&&j>0?j-1:j,h.childNodes.length-1)],j=0;if(h.hasChildNodes()){n=h,k=new a.dom.TreeWalker(h,m);do{if(n.nodeType===3){j=e?0:n.nodeValue.length-1,h=n;break}if(n.nodeName==="BR"){j=l.nodeIndex(n),h=n.parentNode;break}}while(n=e?k.next():k.prev());d=!0}}d&&c["set"+(e?"Start":"End")](h,j)}var b=this,c,d;if(a.isIE)return;c=b.getRng(),e(!0),c.collapsed&&e(),d&&b.setRng(c)},destroy:function(b){var c=this;c.win=null,b||a.removeUnload(c.destroy)},_fixIESelection:function(){function g(a,b){var d=c.createTextRange();try{d.moveToPoint(a,b)}catch(e){d=null}return d}function h(a){var b;a.button?(b=g(a.x,a.y),b&&(b.compareEndPoints("StartToStart",e)>0?b.setEndPoint("StartToStart",e):b.setEndPoint("EndToEnd",e),b.select())):i()}function i(){var c=b.selection.createRange();e&&!c.item&&c.compareEndPoints("StartToEnd",c)===0&&e.select(),a.unbind(b,"mouseup",i),a.unbind(b,"mousemove",h),e=d=0}var a=this.dom,b=a.doc,c=b.body,d,e,f;b.documentElement.unselectable=!0,a.bind(b,["mousedown","contextmenu"],function(c){if(c.target.nodeName==="HTML"){d&&i(),f=b.documentElement;if(f.scrollHeight>f.clientHeight)return;d=1,e=g(c.x,c.y),e&&(a.bind(b,"mouseup",i),a.bind(b,"mousemove",h),a.win.focus(),e.select())}})}})}(tinymce),function(a){a.dom.Serializer=function(b,c,d){var e,f,g=a.isIE,h=a.each,i;return b.apply_source_formatting||(b.indent=!1),b.remove_trailing_brs=!0,c=c||a.DOM,d=d||new a.html.Schema(b),b.entity_encoding=b.entity_encoding||"named",e=new a.util.Dispatcher(self),f=new a.util.Dispatcher(self),i=new a.html.DomParser(b,d),i.addAttributeFilter("src,href,style",function(a,d){var e=a.length,f,g,h="data-mce-"+d,i=b.url_converter,j=b.url_converter_scope,k;while(e--)f=a[e],g=f.attributes.map[h],g!==k?(f.attr(d,g.length>0?g:null),f.attr(h,null)):(g=f.attributes.map[d],d==="style"?g=c.serializeStyle(c.parseStyle(g),f.name):i&&(g=i.call(j,g,d,f.name)),f.attr(d,g.length>0?g:null))}),i.addAttributeFilter("class",function(a,b){var c=a.length,d,e;while(c--)d=a[c],e=d.attr("class").replace(/\s*mce(Item\w+|Selected)\s*/g,""),d.attr("class",e.length>0?e:null)}),i.addAttributeFilter("data-mce-type",function(a,b,c){var d=a.length,e;while(d--)e=a[d],e.attributes.map["data-mce-type"]==="bookmark"&&!c.cleanup&&e.remove()}),i.addNodeFilter("script,style",function(a,b){function f(a){return a.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,"").replace(/\s*(\/\/\s*\]\]>|\/\/\s*-->|\]\]>|-->|\]\]-->)\s*$/g,"")}var c=a.length,d,e;while(c--)d=a[c],e=d.firstChild?d.firstChild.value:"",b==="script"?(d.attr("type",(d.attr("type")||"text/javascript").replace(/^mce\-/,"")),e.length>0&&(d.firstChild.value="// <![CDATA[\n"+f(e)+"\n// ]]>")):e.length>0&&(d.firstChild.value="<!--\n"+f(e)+"\n-->")}),i.addNodeFilter("#comment",function(a,b){var c=a.length,d;while(c--)d=a[c],d.value.indexOf("[CDATA[")===0?(d.name="#cdata",d.type=4,d.value=d.value.replace(/^\[CDATA\[|\]\]$/g,"")):d.value.indexOf("mce:protected ")===0&&(d.name="#text",d.type=3,d.raw=!0,d.value=unescape(d.value).substr(14))}),i.addNodeFilter("xml:namespace,input",function(a,b){var c=a.length,d;while(c--)d=a[c],d.type===7?d.remove():d.type===1&&b==="input"&&!("type"in d.attributes.map)&&d.attr("type","text")}),b.fix_list_elements&&i.addNodeFilter("ul,ol",function(a,b){var c=a.length,d,e;while(c--)d=a[c],e=d.parent,(e.name==="ul"||e.name==="ol")&&d.prev&&d.prev.name==="li"&&d.prev.append(d)}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(a,b){var c=a.length;while(c--)a[c].attr(b,null)}),{schema:d,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,onPreProcess:e,onPostProcess:f,serialize:function(j,k){var l,m,n,o,p;return g&&c.select("script,style,select,map").length>0?(p=j.innerHTML,j=j.cloneNode(!1),c.setHTML(j,p)):j=j.cloneNode(!0),l=j.ownerDocument.implementation,l.createHTMLDocument&&(m=l.createHTMLDocument(""),h(j.nodeName=="BODY"?j.childNodes:[j],function(a){m.body.appendChild(m.importNode(a,!0))}),j.nodeName!="BODY"?j=m.body.firstChild:j=m.body,n=c.doc,c.doc=m),k=k||{},k.format=k.format||"html",k.no_events||(k.node=j,e.dispatch(self,k)),o=new a.html.Serializer(b,d),k.content=o.serialize(i.parse(k.getInner?j.innerHTML:a.trim(c.getOuterHTML(j),k),k)),k.cleanup||(k.content=k.content.replace(/\uFEFF|\u200B/g,"")),k.no_events||f.dispatch(self,k),n&&(c.doc=n),k.node=null,k.content},addRules:function(a){d.addValidElements(a)},setRules:function(a){d.setValidElements(a)}}}}(tinymce),function(a){a.dom.ScriptLoader=function(b){function l(b,c){function j(){e.remove(i),f&&(f.onreadystatechange=f.onload=f=null),c()}function k(){typeof console!="undefined"&&console.log&&console.log("Failed to load: "+b)}var d=this,e=a.DOM,f,g,h,i;i=e.uniqueId();if(a.isIE6){g=new a.util.URI(b),h=location;if(g.host==h.hostname&&g.port==h.port&&g.protocol+":"==h.protocol&&g.protocol.toLowerCase()!="file"){a.util.XHR.send({url:a._addVer(g.getURI()),success:function(a){var b=e.create("script",{type:"text/javascript"});b.text=a,document.getElementsByTagName("head")[0].appendChild(b),e.remove(b),j()},error:k});return}}f=e.create("script",{id:i,type:"text/javascript",src:a._addVer(b)}),a.isIE||(f.onload=j),f.onerror=k,a.isOpera||(f.onreadystatechange=function(){var a=f.readyState;(a=="complete"||a=="loaded")&&j()}),(document.getElementsByTagName("head")[0]||document.body).appendChild(f)}var c=0,d=1,e=2,f={},g=[],h={},i=[],j=0,k;this.isDone=function(a){return f[a]==e},this.markDone=function(a){f[a]=e},this.add=this.load=function(a,b,d){var e,i=f[a];i==k&&(g.push(a),f[a]=c),b&&(h[a]||(h[a]=[]),h[a].push({func:b,scope:d||this}))},this.loadQueue=function(a,b){this.loadScripts(g,a,b)},this.loadScripts=function(b,c,g){function n(b){a.each(h[b],function(a){a.func.call(a.scope)}),h[b]=k}var m;i.push({func:c,scope:g||this}),m=function(){var c=a.grep(b);b.length=0,a.each(c,function(a){if(f[a]==e){n(a);return}f[a]!=d&&(f[a]=d,j++,l(a,function(){f[a]=e,j--,n(a),m()}))}),j||(a.each(i,function(a){a.func.call(a.scope)}),i.length=0)},m()}},a.ScriptLoader=new a.dom.ScriptLoader}(tinymce),tinymce.dom.TreeWalker=function(a,b){function d(a,c,d,e){var f,g;if(a){if(!e&&a[c])return a[c];if(a!=b){f=a[d];if(f)return f;for(g=a.parentNode;g&&g!=b;g=g.parentNode){f=g[d];if(f)return f}}}}var c=a;this.current=function(){return c},this.next=function(a){return c=d(c,"firstChild","nextSibling",a)},this.prev=function(a){return c=d(c,"lastChild","previousSibling",a)}},function(a){a.dom.RangeUtils=function(b){var c="﻿";this.walk=function(c,d){function p(a){var b;return b=a[0],b.nodeType===3&&b===e&&f>=b.nodeValue.length&&a.splice(0,1),b=a[a.length-1],h===0&&a.length>0&&b===g&&b.nodeType===3&&a.splice(a.length-1,1),a}function q(a,b,c){var d=[];for(;a&&a!=c;a=a[b])d.push(a);return d}function r(a,b){do{if(a.parentNode==b)return a;a=a.parentNode}while(a)}function s(a,b,c){var e=c?"nextSibling":"previousSibling";for(l=a,m=l.parentNode;l&&l!=b;l=m)m=l.parentNode,n=q(l==a?l:l[e],e),n.length&&(c||n.reverse(),d(p(n)))}var e=c.startContainer,f=c.startOffset,g=c.endContainer,h=c.endOffset,i,j,k,l,m,n,o;o=b.select("td.mceSelected,th.mceSelected");if(o.length>0){a.each(o,function(a){d([a])});return}e.nodeType==1&&e.hasChildNodes()&&(e=e.childNodes[f]),g.nodeType==1&&g.hasChildNodes()&&(g=g.childNodes[Math.min(h-1,g.childNodes.length-1)]);if(e==g)return d(p([e]));i=b.findCommonAncestor(e,g);for(l=e;l;l=l.parentNode){if(l===g)return s(e,i,!0);if(l===i)break}for(l=g;l;l=l.parentNode){if(l===e)return s(g,i);if(l===i)break}j=r(e,i)||e,k=r(g,i)||g,s(e,j,!0),n=q(j==e?j:j.nextSibling,"nextSibling",k==g?k.nextSibling:k),n.length&&d(p(n)),s(g,k)},this.split=function(a){function f(a,b){return a.splitText(b)}var b=a.startContainer,c=a.startOffset,d=a.endContainer,e=a.endOffset;return b==d&&b.nodeType==3?c>0&&c<b.nodeValue.length&&(d=f(b,c),b=d.previousSibling,e>c?(e-=c,b=d=f(d,e).previousSibling,e=d.nodeValue.length,c=0):e=0):(b.nodeType==3&&c>0&&c<b.nodeValue.length&&(b=f(b,c),c=0),d.nodeType==3&&e>0&&e<d.nodeValue.length&&(d=f(d,e).previousSibling,e=d.nodeValue.length)),{startContainer:b,startOffset:c,endContainer:d,endOffset:e}}},a.dom.RangeUtils.compareRanges=function(a,b){if(a&&b){if(!a.item&&!a.duplicate)return a.startContainer==b.startContainer&&a.startOffset==b.startOffset;if(a.item&&b.item&&a.item(0)===b.item(0))return!0;if(a.isEqual&&b.isEqual&&b.isEqual(a))return!0}return!1}}(tinymce),function(a){var b=a.dom.Event,c=a.each;a.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(d,e){var f=this,g=d.root,h=d.items,i=d.enableUpDown,j=d.enableLeftRight||!d.enableUpDown,k=d.excludeFromTabOrder,l,m,n,o,p;e=e||a.DOM,l=function(a){p=a.target.id},m=function(a){e.setAttrib(a.target.id,"tabindex","-1")},o=function(a){var b=e.get(p);e.setAttrib(b,"tabindex","0"),b.focus()},f.focus=function(){e.get(p).focus()},f.destroy=function(){c(h,function(a){e.unbind(e.get(a.id),"focus",l),e.unbind(e.get(a.id),"blur",m)}),e.unbind(e.get(g),"focus",o),e.unbind(e.get(g),"keydown",n),h=e=g=f.focus=l=m=n=o=null,f.destroy=function(){}},f.moveFocus=function(a,g){var i=-1,j=f.controls,k;if(!p)return;c(h,function(a,b){if(a.id===p)return i=b,!1}),i+=a,i<0?i=h.length-1:i>=h.length&&(i=0),k=h[i],e.setAttrib(p,"tabindex","-1"),e.setAttrib(k.id,"tabindex","0"),e.get(k.id).focus(),d.actOnFocus&&d.onAction(k.id),g&&b.cancel(g)},n=function(a){var c=37,e=39,g=38,h=40,k=27,l=14,m=13,n=32;switch(a.keyCode){case c:j&&f.moveFocus(-1);break;case e:j&&f.moveFocus(1);break;case g:i&&f.moveFocus(-1);break;case h:i&&f.moveFocus(1);break;case k:d.onCancel&&(d.onCancel(),b.cancel(a));break;case l:case m:case n:d.onAction&&(d.onAction(p),b.cancel(a))}},c(h,function(a,b){var c;a.id||(a.id=e.uniqueId("_mce_item_")),k?(e.bind(a.id,"blur",m),c="-1"):c=b===0?"0":"-1",e.setAttrib(a.id,"tabindex",c),e.bind(e.get(a.id),"focus",l)}),h[0]&&(p=h[0].id),e.setAttrib(g,"tabindex","-1"),e.bind(e.get(g),"focus",o),e.bind(e.get(g),"keydown",n)}})}(tinymce),function(a){var b=a.DOM,c=a.is;a.create("tinymce.ui.Control",{Control:function(b,c,d){this.id=b,this.settings=c=c||{},this.rendered=!1,this.onRender=new a.util.Dispatcher(this),this.classPrefix="",this.scope=c.scope||this,this.disabled=0,this.active=0,this.editor=d},setAriaProperty:function(a,c){var d=b.get(this.id+"_aria")||b.get(this.id);d&&b.setAttrib(d,"aria-"+a,!!c)},focus:function(){b.get(this.id).focus()},setDisabled:function(a){a!=this.disabled&&(this.setAriaProperty("disabled",a),this.setState("Disabled",a),this.setState("Enabled",!a),this.disabled=a)},isDisabled:function(){return this.disabled},setActive:function(a){a!=this.active&&(this.setState("Active",a),this.active=a,this.setAriaProperty("pressed",a))},isActive:function(){return this.active},setState:function(a,c){var d=b.get(this.id);a=this.classPrefix+a,c?b.addClass(d,a):b.removeClass(d,a)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(a){b.setHTML(a,this.renderHTML())},postRender:function(){var a=this,b;c(a.disabled)&&(b=a.disabled,a.disabled=-1,a.setDisabled(b)),c(a.active)&&(b=a.active,a.active=-1,a.setActive(b))},remove:function(){b.remove(this.id),this.destroy()},destroy:function(){a.dom.Event.clear(this.id)}})}(tinymce),tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(a,b,c){this.parent(a,b,c),this.controls=[],this.lookup={}},add:function(a){return this.lookup[a.id]=a,this.controls.push(a),a},get:function(a){return this.lookup[a]}}),tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(a,b){this.parent(a,b),this.classPrefix="mceSeparator",this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}}),function(a){var b=a.is,c=a.DOM,d=a.each,e=a.walk;a.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(a,b){this.parent(a,b),this.classPrefix="mceMenuItem"},setSelected:function(a){this.setState("Selected",a),this.setAriaProperty("checked",!!a),this.selected=a},isSelected:function(){return this.selected},postRender:function(){var a=this;a.parent(),b(a.selected)&&a.setSelected(a.selected)}})}(tinymce),function(a){var b=a.is,c=a.DOM,d=a.each,e=a.walk;a.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(b,c){var d=this;d.parent(b,c),d.items={},d.collapsed=!1,d.menuCount=0,d.onAddItem=new a.util.Dispatcher(this)},expand:function(a){var b=this;a&&e(b,function(a){a.expand&&a.expand()},"items",b),b.collapsed=!1},collapse:function(a){var b=this;a&&e(b,function(a){a.collapse&&a.collapse()},"items",b),b.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(b){return b.settings||(b=new a.ui.MenuItem(b.id||c.uniqueId(),b)),this.onAddItem.dispatch(this,b),this.items[b.id]=b},addSeparator:function(){return this.add({separator:!0})},addMenu:function(a){return a.collapse||(a=this.createMenu(a)),this.menuCount++,this.add(a)},hasMenus:function(){return this.menuCount!==0},remove:function(a){delete this.items[a.id]},removeAll:function(){var a=this;e(a,function(a){a.removeAll?a.removeAll():a.remove(),a.destroy()},"items",a),a.items={}},createMenu:function(b){var d=new a.ui.Menu(b.id||c.uniqueId(),b);return d.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),d}})}(tinymce),function(a){var b=a.is,c=a.DOM,d=a.each,e=a.dom.Event,f=a.dom.Element;a.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(d,e){e=e||{},e.container=e.container||c.doc.body,e.offset_x=e.offset_x||0,e.offset_y=e.offset_y||0,e.vp_offset_x=e.vp_offset_x||0,e.vp_offset_y=e.vp_offset_y||0,b(e.icons)&&!e.icons&&(e["class"]+=" mceNoIcons"),this.parent(d,e),this.onShowMenu=new a.util.Dispatcher(this),this.onHideMenu=new a.util.Dispatcher(this),this.classPrefix="mceMenu"},createMenu:function(b){var d=this,e=d.settings,f;return b.container=b.container||e.container,b.parent=d,b.constrain=b.constrain||e.constrain,b["class"]=b["class"]||e["class"],b.vp_offset_x=b.vp_offset_x||e.vp_offset_x,b.vp_offset_y=b.vp_offset_y||e.vp_offset_y,b.keyboard_focus=e.keyboard_focus,f=new a.ui.DropMenu(b.id||c.uniqueId(),b),f.onAddItem.add(d.onAddItem.dispatch,d.onAddItem),f},focus:function(){var a=this;a.keyboardNav&&a.keyboardNav.focus()},update:function(){var a=this,b=a.settings,d=c.get("menu_"+a.id+"_tbl"),e=c.get("menu_"+a.id+"_co"),f,g;f=b.max_width?Math.min(d.clientWidth,b.max_width):d.clientWidth,g=b.max_height?Math.min(d.clientHeight,b.max_height):d.clientHeight,c.boxModel?a.element.setStyles({width:f,height:g}):a.element.setStyles({width:f+2,height:g+2}),b.max_width&&c.setStyle(e,"width",f),b.max_height&&(c.setStyle(e,"height",g),d.clientHeight<b.max_height&&c.setStyle(e,"overflow","hidden"))},showMenu:function(b,g,h){var i=this,j=i.settings,k,l=c.getViewPort(),m,n,o,p,q=2,r,s,t=i.classPrefix;i.collapse(1);if(i.isMenuVisible)return;i.rendered?k=c.get("menu_"+i.id):(k=c.add(i.settings.container,i.renderNode()),d(i.items,function(a){a.postRender()}),i.element=new f("menu_"+i.id,{blocker:1,container:j.container})),a.isOpera||c.setStyles(k,{left:-65535,top:-65535}),c.show(k),i.update(),b+=j.offset_x||0,g+=j.offset_y||0,l.w-=4,l.h-=4,j.constrain&&(m=k.clientWidth-q,n=k.clientHeight-q,o=l.x+l.w,p=l.y+l.h,b+j.vp_offset_x+m>o&&(b=h?h-m:Math.max(0,o-j.vp_offset_x-m)),g+j.vp_offset_y+n>p&&(g=Math.max(0,p-j.vp_offset_y-n))),c.setStyles(k,{left:b,top:g}),i.element.update(),i.isMenuVisible=1,i.mouseClickFunc=e.add(k,"click",function(a){var b;a=a.target;if(a&&(a=c.getParent(a,"tr"))&&!c.hasClass(a,t+"ItemSub")){b=i.items[a.id];if(b.isDisabled())return;r=i;while(r)r.hideMenu&&r.hideMenu(),r=r.settings.parent;return b.settings.onclick&&b.settings.onclick(a),e.cancel(a)}}),i.hasMenus()&&(i.mouseOverFunc=e.add(k,"mouseover",function(a){var b,d,e;a=a.target;if(a&&(a=c.getParent(a,"tr"))){b=i.items[a.id],i.lastMenu&&i.lastMenu.collapse(1);if(b.isDisabled())return;a&&c.hasClass(a,t+"ItemSub")&&(d=c.getRect(a),b.showMenu(d.x+d.w-q,d.y-q,d.x),i.lastMenu=b,c.addClass(c.get(b.id).firstChild,t+"ItemActive"))}})),e.add(k,"keydown",i._keyHandler,i),i.onShowMenu.dispatch(i),j.keyboard_focus&&i._setupKeyboardNav()},hideMenu:function(a){var b=this,d=c.get("menu_"+b.id),f;if(!b.isMenuVisible)return;b.keyboardNav&&b.keyboardNav.destroy(),e.remove(d,"mouseover",b.mouseOverFunc),e.remove(d,"click",b.mouseClickFunc),e.remove(d,"keydown",b._keyHandler),c.hide(d),b.isMenuVisible=0,a||b.collapse(1),b.element&&b.element.hide(),(f=c.get(b.id))&&c.removeClass(f.firstChild,b.classPrefix+"ItemActive"),b.onHideMenu.dispatch(b)},add:function(a){var b=this,d;return a=b.parent(a),b.isRendered&&(d=c.get("menu_"+b.id))&&b._add(c.select("tbody",d)[0],a),a},collapse:function(a){this.parent(a),this.hideMenu(1)},remove:function(a){return c.remove(a.id),this.destroy(),this.parent(a)},destroy:function(){var a=this,b=c.get("menu_"+a.id);a.keyboardNav&&a.keyboardNav.destroy(),e.remove(b,"mouseover",a.mouseOverFunc),e.remove(c.select("a",b),"focus",a.mouseOverFunc),e.remove(b,"click",a.mouseClickFunc),e.remove(b,"keydown",a._keyHandler),a.element&&a.element.remove(),c.remove(b)},renderNode:function(){var a=this,b=a.settings,e,g,h,i;return i=c.create("div",{role:"listbox",id:"menu_"+a.id,"class":b["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"}),a.settings.parent&&c.setAttrib(i,"aria-parent","menu_"+a.settings.parent.id),h=c.add(i,"div",{role:"presentation",id:"menu_"+a.id+"_co","class":a.classPrefix+(b["class"]?" "+b["class"]:"")}),a.element=new f("menu_"+a.id,{blocker:1,container:b.container}),b.menu_line&&c.add(h,"span",{"class":a.classPrefix+"Line"}),e=c.add(h,"table",{role:"presentation",id:"menu_"+a.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),g=c.add(e,"tbody"),d(a.items,function(b){a._add(g,b)}),a.rendered=!0,i},_setupKeyboardNav:function(){var b,d,e=this;b=c.select("#menu_"+e.id)[0],d=c.select("a[role=option]","menu_"+e.id),d.splice(0,0,b),e.keyboardNav=new a.ui.KeyboardNavigation({root:"menu_"+e.id,items:d,onCancel:function(){e.hideMenu()},enableUpDown:!0}),b.focus()},_keyHandler:function(a){var b=this,c;switch(a.keyCode){case 37:b.settings.parent&&(b.hideMenu(),b.settings.parent.focus(),e.cancel(a));break;case 39:b.mouseOverFunc&&b.mouseOverFunc(a)}},_add:function(a,b){var d,e=b.settings,f,g,h,i=this.classPrefix,j;if(e.separator){g=c.add(a,"tr",{id:b.id,"class":i+"ItemSeparator"}),c.add(g,"td",{"class":i+"ItemSeparator"}),(d=g.previousSibling)&&c.addClass(d,"mceLast");return}d=g=c.add(a,"tr",{id:b.id,"class":i+"Item "+i+"ItemEnabled"}),d=h=c.add(d,e.titleItem?"th":"td"),d=f=c.add(d,"a",{id:b.id+"_aria",role:e.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),e.parent&&(c.setAttrib(f,"aria-haspopup","true"),c.setAttrib(f,"aria-owns","menu_"+b.id)),c.addClass(h,e["class"]),j=c.add(d,"span",{"class":"mceIcon"+(e.icon?" mce_"+e.icon:"")}),e.icon_src&&c.add(j,"img",{src:e.icon_src}),d=c.add(d,e.element||"span",{"class":"mceText",title:b.settings.title},b.settings.title),b.settings.style&&c.setAttrib(d,"style",b.settings.style),a.childNodes.length==1&&c.addClass(g,"mceFirst"),(d=g.previousSibling)&&c.hasClass(d,i+"ItemSeparator")&&c.addClass(g,"mceFirst"),b.collapse&&c.addClass(g,i+"ItemSub"),(d=g.previousSibling)&&c.removeClass(d,"mceLast"),c.addClass(g,"mceLast")}})}(tinymce),function(a){var b=a.DOM;a.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(a,b,c){this.parent(a,b,c),this.classPrefix="mceButton"},renderHTML:function(){var a=this.classPrefix,c=this.settings,d,e;return e=b.encode(c.label||""),d='<a role="button" id="'+this.id+'" href="javascript:;" class="'+a+" "+a+"Enabled "+c["class"]+(e?" "+a+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+b.encode(c.title)+'">',c.image&&(!this.editor||!this.editor.forcedHighContrastMode)?d+='<img class="mceIcon" src="'+c.image+'" alt="'+b.encode(c.title)+'" />'+e:d+='<span class="mceIcon '+c["class"]+'"></span>'+(e?'<span class="'+a+'Label">'+e+"</span>":""),d+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+c.title+"</span>",d+="</a>",d},postRender:function(){var b=this,c=b.settings;a.dom.Event.add(b.id,"click",function(a){if(!b.isDisabled())return c.onclick.call(c.scope,a)})}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each,e=a.util.Dispatcher;a.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(b,c,d){var f=this;f.parent(b,c,d),f.items=[],f.onChange=new e(f),f.onPostRender=new e(f),f.onAdd=new e(f),f.onRenderMenu=new a.util.Dispatcher(this),f.classPrefix="mceListBox"},select:function(a){var b=this,c,e;if(a==undefined)return b.selectByIndex(-1);a&&a.call?e=a:e=function(b){return b==a},a!=b.selectedValue&&(d(b.items,function(a,d){if(e(a.value))return c=1,b.selectByIndex(d),!1}),c||b.selectByIndex(-1))},selectByIndex:function(a){var c=this,d,e,f;a!=c.selectedIndex&&(d=b.get(c.id+"_text"),f=b.get(c.id+"_voiceDesc"),e=c.items[a],e?(c.selectedValue=e.value,c.selectedIndex=a,b.setHTML(d,b.encode(e.title)),b.setHTML(f,c.settings.title+" - "+e.title),b.removeClass(d,"mceTitle"),b.setAttrib(c.id,"aria-valuenow",e.title)):(b.setHTML(d,b.encode(c.settings.title)),b.setHTML(f,b.encode(c.settings.title)),b.addClass(d,"mceTitle"),c.selectedValue=c.selectedIndex=null,b.setAttrib(c.id,"aria-valuenow",c.settings.title)),d=0)},add:function(b,c,d){var e=this;d=d||{},d=a.extend(d,{title:b,value:c}),e.items.push(d),e.onAdd.dispatch(e,d)},getLength:function(){return this.items.length},renderHTML:function(){var a="",c=this,d=c.settings,e=c.classPrefix;return a='<span role="listbox" aria-haspopup="true" aria-labelledby="'+c.id+'_voiceDesc" aria-describedby="'+c.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+c.id+'" cellpadding="0" cellspacing="0" class="'+e+" "+e+"Enabled"+(d["class"]?" "+d["class"]:"")+'"><tbody><tr>',a+="<td>"+b.createHTML("span",{id:c.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},c.settings.title),a+=b.createHTML("a",{id:c.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},b.encode(c.settings.title))+"</td>",a+="<td>"+b.createHTML("a",{id:c.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span></span>'
)+"</td>",a+="</tr></tbody></table></span>",a},showMenu:function(){var e=this,f,g=b.get(this.id),h;if(e.isDisabled()||e.items.length==0)return;if(e.menu&&e.menu.isMenuVisible)return e.hideMenu();e.isMenuRendered||(e.renderMenu(),e.isMenuRendered=!0),f=b.getPos(g),h=e.menu,h.settings.offset_x=f.x,h.settings.offset_y=f.y,h.settings.keyboard_focus=!a.isOpera,e.oldID&&h.items[e.oldID].setSelected(0),d(e.items,function(a){a.value===e.selectedValue&&(h.items[a.id].setSelected(1),e.oldID=a.id)}),h.showMenu(0,g.clientHeight),c.add(b.doc,"mousedown",e.hideMenu,e),b.addClass(e.id,e.classPrefix+"Selected")},hideMenu:function(a){var d=this;if(d.menu&&d.menu.isMenuVisible){b.removeClass(d.id,d.classPrefix+"Selected");if(!(!a||a.type!="mousedown"||a.target.id!=d.id+"_text"&&a.target.id!=d.id+"_open"))return;if(!a||!b.getParent(a.target,".mceMenu"))b.removeClass(d.id,d.classPrefix+"Selected"),c.remove(b.doc,"mousedown",d.hideMenu,d),d.menu.hideMenu()}},renderMenu:function(){var a=this,c;c=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":a.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150}),c.onHideMenu.add(function(){a.hideMenu(),a.focus()}),c.add({title:a.settings.title,"class":"mceMenuItemTitle",onclick:function(){a.settings.onselect("")!==!1&&a.select("")}}),d(a.items,function(d){d.value===undefined?c.add({title:d.title,role:"option","class":"mceMenuItemTitle",onclick:function(){a.settings.onselect("")!==!1&&a.select("")}}):(d.id=b.uniqueId(),d.role="option",d.onclick=function(){a.settings.onselect(d.value)!==!1&&a.select(d.value)},c.add(d))}),a.onRenderMenu.dispatch(a,c),a.menu=c},postRender:function(){var d=this,e=d.classPrefix;c.add(d.id,"click",d.showMenu,d),c.add(d.id,"keydown",function(a){a.keyCode==32&&(d.showMenu(a),c.cancel(a))}),c.add(d.id,"focus",function(){d._focused||(d.keyDownHandler=c.add(d.id,"keydown",function(a){a.keyCode==40&&(d.showMenu(),c.cancel(a))}),d.keyPressHandler=c.add(d.id,"keypress",function(a){var b;a.keyCode==13&&(b=d.selectedValue,d.selectedValue=null,c.cancel(a),d.settings.onselect(b))})),d._focused=1}),c.add(d.id,"blur",function(){c.remove(d.id,"keydown",d.keyDownHandler),c.remove(d.id,"keypress",d.keyPressHandler),d._focused=0});if(a.isIE6||!b.boxModel)c.add(d.id,"mouseover",function(){b.hasClass(d.id,e+"Disabled")||b.addClass(d.id,e+"Hover")}),c.add(d.id,"mouseout",function(){b.hasClass(d.id,e+"Disabled")||b.removeClass(d.id,e+"Hover")});d.onPostRender.dispatch(d,b.get(d.id))},destroy:function(){this.parent(),c.clear(this.id+"_text"),c.clear(this.id+"_open")}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each,e=a.util.Dispatcher;a.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(a,b){this.parent(a,b),this.classPrefix="mceNativeListBox"},setDisabled:function(a){b.get(this.id).disabled=a,this.setAriaProperty("disabled",a)},isDisabled:function(){return b.get(this.id).disabled},select:function(a){var b=this,c,e;if(a==undefined)return b.selectByIndex(-1);a&&a.call?e=a:e=function(b){return b==a},a!=b.selectedValue&&(d(b.items,function(a,d){if(e(a.value))return c=1,b.selectByIndex(d),!1}),c||b.selectByIndex(-1))},selectByIndex:function(a){b.get(this.id).selectedIndex=a+1,this.selectedValue=this.items[a]?this.items[a].value:null},add:function(a,c,d){var e,f=this;d=d||{},d.value=c,f.isRendered()&&b.add(b.get(this.id),"option",d,a),e={title:a,value:c,attribs:d},f.items.push(e),f.onAdd.dispatch(f,e)},getLength:function(){return this.items.length},renderHTML:function(){var a,c=this;return a=b.createHTML("option",{value:""},"-- "+c.settings.title+" --"),d(c.items,function(c){a+=b.createHTML("option",{value:c.value},c.title)}),a=b.createHTML("select",{id:c.id,"class":"mceNativeListBox","aria-labelledby":c.id+"_aria"},a),a+=b.createHTML("span",{id:c.id+"_aria",style:"display: none"},c.settings.title),a},postRender:function(){function g(a){var b=d.items[a.target.selectedIndex-1];b&&(b=b.value)&&(d.onChange.dispatch(d,b),d.settings.onselect&&d.settings.onselect(b))}var d=this,e,f=!0;d.rendered=!0,c.add(d.id,"change",g),c.add(d.id,"keydown",function(b){var j;c.remove(d.id,"change",e),f=!1,j=c.add(d.id,"blur",function(){if(f)return;f=!0,c.add(d.id,"change",g),c.remove(d.id,"blur",j)});if(!(!a.isWebKit||b.keyCode!=37&&b.keyCode!=39))return c.prevent(b);if(b.keyCode==13||b.keyCode==32)return g(b),c.cancel(b)}),d.onPostRender.dispatch(d,b.get(d.id))}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each;a.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(c,d,e){this.parent(c,d,e),this.onRenderMenu=new a.util.Dispatcher(this),d.menu_container=d.menu_container||b.doc.body},showMenu:function(){var a=this,d,e,f=b.get(a.id),g;if(a.isDisabled())return;a.isMenuRendered||(a.renderMenu(),a.isMenuRendered=!0);if(a.isMenuVisible)return a.hideMenu();d=b.getPos(a.settings.menu_container),e=b.getPos(f),g=a.menu,g.settings.offset_x=e.x,g.settings.offset_y=e.y,g.settings.vp_offset_x=e.x,g.settings.vp_offset_y=e.y,g.settings.keyboard_focus=a._focused,g.showMenu(0,f.clientHeight),c.add(b.doc,"mousedown",a.hideMenu,a),a.setState("Selected",1),a.isMenuVisible=1},renderMenu:function(){var a=this,b;b=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:a.settings.icons}),b.onHideMenu.add(function(){a.hideMenu(),a.focus()}),a.onRenderMenu.dispatch(a,b),a.menu=b},hideMenu:function(a){var d=this;if(a&&a.type=="mousedown"&&b.getParent(a.target,function(a){return a.id===d.id||a.id===d.id+"_open"}))return;if(!a||!b.getParent(a.target,".mceMenu"))d.setState("Selected",0),c.remove(b.doc,"mousedown",d.hideMenu,d),d.menu&&d.menu.hideMenu();d.isMenuVisible=0},postRender:function(){var a=this,b=a.settings;c.add(a.id,"click",function(){a.isDisabled()||(b.onclick&&b.onclick(a.value),a.showMenu())})}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each;a.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(a,b,c){this.parent(a,b,c),this.classPrefix="mceSplitButton"},renderHTML:function(){var a,c=this,d=c.settings,e;return a="<tbody><tr>",d.image?e=b.createHTML("img ",{src:d.image,role:"presentation","class":"mceAction "+d["class"]}):e=b.createHTML("span",{"class":"mceAction "+d["class"]},""),e+=b.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:c.id+"_voice",style:"display:none;"},d.title),a+="<td >"+b.createHTML("a",{role:"button",id:c.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+d["class"],onclick:"return false;",onmousedown:"return false;",title:d.title},e)+"</td>",e=b.createHTML("span",{"class":"mceOpen "+d["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span>'),a+="<td >"+b.createHTML("a",{role:"button",id:c.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+d["class"],onclick:"return false;",onmousedown:"return false;",title:d.title},e)+"</td>",a+="</tr></tbody>",a=b.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+d["class"],cellpadding:"0",cellspacing:"0",title:d.title},a),b.createHTML("div",{id:c.id,role:"button",tabindex:"0","aria-labelledby":c.id+"_voice","aria-haspopup":"true"},a)},postRender:function(){var d=this,e=d.settings,f;e.onclick&&(f=function(a){d.isDisabled()||(e.onclick(d.value),c.cancel(a))},c.add(d.id+"_action","click",f),c.add(d.id,["click","keydown"],function(a){var b=32,e=14,g=13,h=38,i=40;if((a.keyCode===32||a.keyCode===13||a.keyCode===14)&&!a.altKey&&!a.ctrlKey&&!a.metaKey)f(),c.cancel(a);else if(a.type==="click"||a.keyCode===i)d.showMenu(),c.cancel(a)})),c.add(d.id+"_open","click",function(a){d.showMenu(),c.cancel(a)}),c.add([d.id,d.id+"_open"],"focus",function(){d._focused=1}),c.add([d.id,d.id+"_open"],"blur",function(){d._focused=0});if(a.isIE6||!b.boxModel)c.add(d.id,"mouseover",function(){b.hasClass(d.id,"mceSplitButtonDisabled")||b.addClass(d.id,"mceSplitButtonHover")}),c.add(d.id,"mouseout",function(){b.hasClass(d.id,"mceSplitButtonDisabled")||b.removeClass(d.id,"mceSplitButtonHover")})},destroy:function(){this.parent(),c.clear(this.id+"_action"),c.clear(this.id+"_open"),c.clear(this.id)}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.is,e=a.each;a.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(b,c,d){var e=this;e.parent(b,c,d),e.settings=c=a.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},e.settings),e.onShowMenu=new a.util.Dispatcher(e),e.onHideMenu=new a.util.Dispatcher(e),e.value=c.default_color},showMenu:function(){var a=this,d,e,f,g;if(a.isDisabled())return;a.isMenuRendered||(a.renderMenu(),a.isMenuRendered=!0);if(a.isMenuVisible)return a.hideMenu();f=b.get(a.id),b.show(a.id+"_menu"),b.addClass(f,"mceSplitButtonSelected"),g=b.getPos(f),b.setStyles(a.id+"_menu",{left:g.x,top:g.y+f.clientHeight,zIndex:2e5}),f=0,c.add(b.doc,"mousedown",a.hideMenu,a),a.onShowMenu.dispatch(a),a._focused&&(a._keyHandler=c.add(a.id+"_menu","keydown",function(b){b.keyCode==27&&a.hideMenu()}),b.select("a",a.id+"_menu")[0].focus()),a.isMenuVisible=1},hideMenu:function(a){var d=this;if(d.isMenuVisible){if(a&&a.type=="mousedown"&&b.getParent(a.target,function(a){return a.id===d.id+"_open"}))return;if(!a||!b.getParent(a.target,".mceSplitButtonMenu"))b.removeClass(d.id,"mceSplitButtonSelected"),c.remove(b.doc,"mousedown",d.hideMenu,d),c.remove(d.id+"_menu","keydown",d._keyHandler),b.hide(d.id+"_menu");d.isMenuVisible=0,d.onHideMenu.dispatch()}},renderMenu:function(){var f=this,g,h=0,i=f.settings,j,k,l,m,n;return m=b.add(i.menu_container,"div",{role:"listbox",id:f.id+"_menu","class":i.menu_class+" "+i["class"],style:"position:absolute;left:0;top:-1000px;"}),g=b.add(m,"div",{"class":i["class"]+" mceSplitButtonMenu"}),b.add(g,"span",{"class":"mceMenuLine"}),j=b.add(g,"table",{role:"presentation","class":"mceColorSplitMenu"}),k=b.add(j,"tbody"),h=0,e(d(i.colors,"array")?i.colors:i.colors.split(","),function(a){a=a.replace(/^#/,""),h--||(l=b.add(k,"tr"),h=i.grid_width-1),j=b.add(l,"td"),j=b.add(j,"a",{role:"option",href:"javascript:;",style:{backgroundColor:"#"+a},title:f.editor.getLang("colors."+a,a),"data-mce-color":"#"+a}),f.editor.forcedHighContrastMode&&(j=b.add(j,"canvas",{width:16,height:16,"aria-hidden":"true"}),j.getContext&&(n=j.getContext("2d"))?(n.fillStyle="#"+a,n.fillRect(0,0,16,16)):b.remove(j))}),i.more_colors_func&&(j=b.add(k,"tr"),j=b.add(j,"td",{colspan:i.grid_width,"class":"mceMoreColors"}),j=b.add(j,"a",{role:"option",id:f.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},i.more_colors_title),c.add(j,"click",function(a){return i.more_colors_func.call(i.more_colors_scope||this),c.cancel(a)})),b.addClass(g,"mceColorSplitMenu"),new a.ui.KeyboardNavigation({root:f.id+"_menu",items:b.select("a",f.id+"_menu"),onCancel:function(){f.hideMenu(),f.focus()}}),c.add(f.id+"_menu","mousedown",function(a){return c.cancel(a)}),c.add(f.id+"_menu","click",function(a){var d;return a=b.getParent(a.target,"a",k),a&&a.nodeName.toLowerCase()=="a"&&(d=a.getAttribute("data-mce-color"))&&f.setColor(d),c.cancel(a)}),m},setColor:function(a){this.displayColor(a),this.hideMenu(),this.settings.onselect(a)},displayColor:function(a){var c=this;b.setStyle(c.id+"_preview","backgroundColor",a),c.value=a},postRender:function(){var a=this,c=a.id;a.parent(),b.add(c+"_action","div",{id:c+"_preview","class":"mceColorPreview"}),b.setStyle(a.id+"_preview","backgroundColor",a.value)},destroy:function(){this.parent(),c.clear(this.id+"_menu"),c.clear(this.id+"_more"),b.remove(this.id+"_menu")}})}(tinymce),function(a){var b=a.DOM,c=a.each,d=a.dom.Event;a.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var c=this,d=[],e=c.controls,f=a.each,g=c.settings;return d.push('<div id="'+c.id+'" role="group" aria-labelledby="'+c.id+'_voice">'),d.push("<span role='application'>"),d.push('<span id="'+c.id+'_voice" class="mceVoiceLabel" style="display:none;">'+b.encode(g.name)+"</span>"),f(e,function(a){d.push(a.renderHTML())}),d.push("</span>"),d.push("</div>"),d.join("")},focus:function(){var a=this;b.get(a.id).focus()},postRender:function(){var d=this,e=[];c(d.controls,function(a){c(a.controls,function(a){a.id&&e.push(a)})}),d.keyNav=new a.ui.KeyboardNavigation({root:d.id,items:e,onCancel:function(){a.isWebKit&&b.get(d.editor.id+"_ifr").focus(),d.editor.focus()},excludeFromTabOrder:!d.settings.tab_focus_toolbar})},destroy:function(){var a=this;a.parent(),a.keyNav.destroy(),d.clear(a.id)}})}(tinymce),function(a){var b=a.DOM,c=a.each;a.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var a=this,c="",d,e,f=a.settings,g,h,i,j;j=a.controls;for(g=0;g<j.length;g++)e=j[g],h=j[g-1],i=j[g+1],g===0&&(d="mceToolbarStart",e.Button?d+=" mceToolbarStartButton":e.SplitButton?d+=" mceToolbarStartSplitButton":e.ListBox&&(d+=" mceToolbarStartListBox"),c+=b.createHTML("td",{"class":d},b.createHTML("span",null,"<!-- IE -->"))),h&&e.ListBox&&(h.Button||h.SplitButton)&&(c+=b.createHTML("td",{"class":"mceToolbarEnd"},b.createHTML("span",null,"<!-- IE -->"))),b.stdMode?c+='<td style="position: relative">'+e.renderHTML()+"</td>":c+="<td>"+e.renderHTML()+"</td>",i&&e.ListBox&&(i.Button||i.SplitButton)&&(c+=b.createHTML("td",{"class":"mceToolbarStart"},b.createHTML("span",null,"<!-- IE -->")));return d="mceToolbarEnd",e.Button?d+=" mceToolbarEndButton":e.SplitButton?d+=" mceToolbarEndSplitButton":e.ListBox&&(d+=" mceToolbarEndListBox"),c+=b.createHTML("td",{"class":d},b.createHTML("span",null,"<!-- IE -->")),b.createHTML("table",{id:a.id,"class":"mceToolbar"+(f["class"]?" "+f["class"]:""),cellpadding:"0",cellspacing:"0",align:a.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+c+"</tr></tbody>")}})}(tinymce),function(a){var b=a.util.Dispatcher,c=a.each;a.create("tinymce.AddOnManager",{AddOnManager:function(){var a=this;a.items=[],a.urls={},a.lookup={},a.onAdd=new b(a)},get:function(a){return this.lookup[a]?this.lookup[a].instance:undefined},dependencies:function(a){var b;return this.lookup[a]&&(b=this.lookup[a].dependencies),b||[]},requireLangPack:function(b){var c=a.settings;c&&c.language&&c.language_load!==!1&&a.ScriptLoader.add(this.urls[b]+"/langs/"+c.language+".js")},add:function(a,b,c){return this.items.push(b),this.lookup[a]={instance:b,dependencies:c},this.onAdd.dispatch(this,a,b),b},createUrl:function(a,b){return typeof b=="object"?b:{prefix:a.prefix,resource:b,suffix:a.suffix}},addComponents:function(b,c){var d=this.urls[b];a.each(c,function(b){a.ScriptLoader.add(d+"/"+b)})},load:function(b,c,d,e){function h(){var g=f.dependencies(b);a.each(g,function(a){var b=f.createUrl(c,a);f.load(b.resource,b,undefined,undefined)}),d&&(e?d.call(e):d.call(a.ScriptLoader))}var f=this,g=c;if(f.urls[b])return;typeof c=="object"&&(g=c.prefix+c.resource+c.suffix),g.indexOf("/")!=0&&g.indexOf("://")==-1&&(g=a.baseURL+"/"+g),f.urls[b]=g.substring(0,g.lastIndexOf("/")),f.lookup[b]?h():a.ScriptLoader.add(g,h,e)}}),a.PluginManager=new a.AddOnManager,a.ThemeManager=new a.AddOnManager}(tinymce),function(a){var b=a.each,c=a.extend,d=a.DOM,e=a.dom.Event,f=a.ThemeManager,g=a.PluginManager,h=a.explode,i=a.util.Dispatcher,j,k=0;a.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(a.documentBaseURL)||(a.documentBaseURL+="/"),a.baseURL=(new a.util.URI(a.documentBaseURL)).toAbsolute(a.baseURL),a.baseURI=new a.util.URI(a.baseURL),a.onBeforeUnload=new i(a),e.add(window,"beforeunload",function(b){a.onBeforeUnload.dispatch(a,b)}),a.onAddEditor=new i(a),a.onRemoveEditor=new i(a),a.EditorManager=c(a,{editors:[],i18n:{},activeEditor:null,init:function(f){function o(b,c,d){var e=b[c];if(!e)return;return a.is(e,"string")&&(d=e.replace(/\.\w+$/,""),d=d?a.resolve(d):0,e=a.resolve(e)),e.apply(d||this,Array.prototype.slice.call(arguments,2))}var g=this,i,j=a.ScriptLoader,l,m=[],n;f=c({theme:"simple",language:"en"},f),g.settings=f,e.add(document,"init",function(){var c,e;o(f,"onpageload");switch(f.mode){case"exact":c=f.elements||"",c.length>0&&b(h(c),function(c){d.get(c)?(n=new a.Editor(c,f),m.push(n),n.render(1)):b(document.forms,function(e){b(e.elements,function(b){b.name===c&&(c="mce_editor_"+k++,d.setAttrib(b,"id",c),n=new a.Editor(c,f),m.push(n),n.render(1))})})});break;case"textareas":case"specific_textareas":function i(a,b){return b.constructor===RegExp?b.test(a.className):d.hasClass(a,b)}b(d.select("textarea"),function(b){if(f.editor_deselector&&i(b,f.editor_deselector))return;if(!f.editor_selector||i(b,f.editor_selector)){l=d.get(b.name),!b.id&&!l&&(b.id=b.name);if(!b.id||g.get(b.id))b.id=d.uniqueId();n=new a.Editor(b.id,f),m.push(n),n.render(1)}})}f.oninit&&(c=e=0,b(m,function(a){e++,a.initialized?c++:a.onInit.add(function(){c++,c==e&&o(f,"oninit")}),c==e&&o(f,"oninit")}))})},get:function(a){return a===j?this.editors:this.editors[a]},getInstanceById:function(a){return this.get(a)},add:function(b){var c=this,d=c.editors;return d[b.id]=b,d.push(b),c._setActive(b),c.onAddEditor.dispatch(c,b),a.adapter&&a.adapter.patchEditor(b),b},remove:function(a){var b=this,c,d=b.editors;if(!d[a.id])return null;delete d[a.id];for(c=0;c<d.length;c++)if(d[c]==a){d.splice(c,1);break}return b.activeEditor==a&&b._setActive(d[0]),a.destroy(),b.onRemoveEditor.dispatch(b,a),a},execCommand:function(b,c,d){var e=this,f=e.get(d),g;switch(b){case"mceFocus":return f.focus(),!0;case"mceAddEditor":case"mceAddControl":return e.get(d)||(new a.Editor(d,e.settings)).render(),!0;case"mceAddFrameControl":g=d.window,g.tinyMCE=tinyMCE,g.tinymce=a,a.DOM.doc=g.document,a.DOM.win=g,f=new a.Editor(d.element_id,d),f.render();if(a.isIE){function h(){f.destroy(),g.detachEvent("onunload",h),g=g.tinyMCE=g.tinymce=null}g.attachEvent("onunload",h)}return d.page_window=null,!0;case"mceRemoveEditor":case"mceRemoveControl":return f&&f.remove(),!0;case"mceToggleEditor":if(!f)return e.execCommand("mceAddControl",0,d),!0;return f.isHidden()?f.show():f.hide(),!0}return e.activeEditor?e.activeEditor.execCommand(b,c,d):!1},execInstanceCommand:function(a,b,c,d){var e=this.get(a);return e?e.execCommand(b,c,d):!1},triggerSave:function(){b(this.editors,function(a){a.save()})},addI18n:function(c,d){var e,f=this.i18n;a.is(c,"string")?b(d,function(a,b){f[c+"."+b]=a}):b(c,function(a,c){b(a,function(a,d){b(a,function(a,b){d==="common"?f[c+"."+b]=a:f[c+"."+d+"."+b]=a})})})},_setActive:function(a){this.selectedInstance=this.activeEditor=a}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.extend,e=a.util.Dispatcher,f=a.each,g=a.isGecko,h=a.isIE,i=a.isWebKit,j=a.is,k=a.ThemeManager,l=a.PluginManager,m=a.inArray,n=a.grep,o=a.explode;a.create("tinymce.Editor",{Editor:function(b,c){var g=this;g.id=g.editorId=b,g.execCommands={},g.queryStateCommands={},g.queryValueCommands={},g.isNotDirty=!1,g.plugins={},f(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(a){g[a]=new e(g)}),g.settings=c=d({id:b,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:a.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:a.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",validate:!0,entity_encoding:"named",url_converter:g.convertURL,url_converter_scope:g,ie7_compat:!0},c),g.documentBaseURI=new a.util.URI(c.document_base_url||a.documentBaseURL,{base_uri:tinyMCE.baseURI}),g.baseURI=a.baseURI,g.contentCSS=[],g.execCallback("setup",g)},render:function(d){function j(){g.language&&g.language_load!==!1&&i.add(a.baseURL+"/langs/"+g.language+".js"),g.theme&&g.theme.charAt(0)!="-"&&!k.urls[g.theme]&&k.load(g.theme,"themes/"+g.theme+"/editor_template"+a.suffix+".js"),f(o(g.plugins),function(b){if(b&&!l.urls[b])if(b.charAt(0)=="-"){b=b.substr(1,b.length);var c=l.dependencies(b);f(c,function(b){var c={prefix:"plugins/",resource:b,suffix:"/editor_plugin"+a.suffix+".js"},b=l.createUrl(c,b);l.load(b.resource,b)})}else{if(b=="safari")return;l.load(b,{prefix:"plugins/",resource:b,suffix:"/editor_plugin"+a.suffix+".js"})}}),i.loadQueue(function(){e.removed||e.init()})}var e=this,g=e.settings,h=e.id,i=a.ScriptLoader;if(!c.domLoaded){c.add(document,"init",function(){e.render()});return}tinyMCE.settings=g;if(!e.getElement())return;if(a.isIDevice&&!a.isIOS5)return;!/TEXTAREA|INPUT/i.test(e.getElement().nodeName)&&g.hidden_input&&b.getParent(h,"form")&&b.insertAfter(b.create("input",{type:"hidden",name:h}),h),a.WindowManager&&(e.windowManager=new a.WindowManager(e)),g.encoding=="xml"&&e.onGetContent.add(function(a,c){c.save&&(c.content=b.encode(c.content))}),g.add_form_submit_trigger&&e.onSubmit.addToTop(function(){e.initialized&&(e.save(),e.isNotDirty=1)}),g.add_unload_trigger&&(e._beforeUnload=tinyMCE.onBeforeUnload.add(function(){e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0})})),a.addUnload(e.destroy,e),g.submit_patch&&e.onBeforeRenderUI.add(function(){var b=e.getElement().form;if(!b)return;if(b._mceOldSubmit)return;!b.submit.nodeType&&!b.submit.length&&(e.formElement=b,b._mceOldSubmit=b.submit,b.submit=function(){return a.triggerSave(),e.isNotDirty=1,e.formElement._mceOldSubmit(e.formElement)}),b=null}),j()},init:function(){function w(b){var c=l.get(b),e=l.urls[b]||a.documentBaseURL.replace(/\/$/,""),g;c&&a.inArray(v,b)===-1&&(f(l.dependencies(b),function(a){w(a)}),g=new c(d,e),d.plugins[b]=g,g.init&&(g.init(d,e),v.push(b)))}var c,d=this,e=d.settings,i,j,m=d.getElement(),n,p,q,r,s,t,u,v=[];a.add(d),e.aria_label=e.aria_label||b.getAttrib(m,"aria-label",d.getLang("aria.rich_text_area")),e.theme&&(e.theme=e.theme.replace(/-/,""),n=k.get(e.theme),d.theme=new n,d.theme.init&&e.init_theme&&d.theme.init(d,k.urls[e.theme]||a.documentBaseURL.replace(/\/$/,""))),f(o(e.plugins.replace(/\-/g,"")),w),e.popup_css!==!1&&(e.popup_css?e.popup_css=d.documentBaseURI.toAbsolute(e.popup_css):e.popup_css=d.baseURI.toAbsolute("themes/"+e.theme+"/skins/"+e.skin+"/dialog.css")),e.popup_css_add&&(e.popup_css+=","+d.documentBaseURI.toAbsolute(e.popup_css_add)),d.controlManager=new a.ControlManager(d),e.custom_undo_redo&&(d.onBeforeExecCommand.add(function(a,b,c,e,f){b!="Undo"&&b!="Redo"&&b!="mceRepaint"&&(!f||!f.skip_undo)&&d.undoManager.beforeChange()}),d.onExecCommand.add(function(a,b,c,e,f){b!="Undo"&&b!="Redo"&&b!="mceRepaint"&&(!f||!f.skip_undo)&&d.undoManager.add()})),d.onExecCommand.add(function(a,b){/^(FontName|FontSize)$/.test(b)||d.nodeChanged()});if(g){function x(a,b){(!b||!b.initial)&&d.execCommand("mceRepaint")}d.onUndo.add(x),d.onRedo.add(x),d.onSetContent.add(x)}d.onBeforeRenderUI.dispatch(d,d.controlManager),e.render_ui&&(i=e.width||m.style.width||m.offsetWidth,j=e.height||m.style.height||m.offsetHeight,d.orgDisplay=m.style.display,t=/^[0-9\.]+(|px)$/i,t.test(""+i)&&(i=Math.max(parseInt(i)+(n.deltaWidth||0),100)),t.test(""+j)&&(j=Math.max(parseInt(j)+(n.deltaHeight||0),100)),n=d.theme.renderUI({targetNode:m,width:i,height:j,deltaWidth:e.delta_width,deltaHeight:e.delta_height}),d.editorContainer=n.editorContainer),document.domain&&location.hostname!=document.domain&&(a.relaxedDomain=document.domain),b.setStyles(n.sizeContainer||n.editorContainer,{width:i,height:j}),e.content_css&&a.each(o(e.content_css),function(a){d.contentCSS.push(d.documentBaseURI.toAbsolute(a))}),j=(n.iframeHeight||j)+(typeof j=="number"?n.deltaHeight||0:""),j<100&&(j=100),d.iframeHTML=e.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">',e.document_base_url!=a.documentBaseURL&&(d.iframeHTML+='<base href="'+d.documentBaseURI.getURI()+'" />'),e.ie7_compat?d.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />':d.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />',d.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';for(u=0;u<d.contentCSS.length;u++)d.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+d.contentCSS[u]+'" />';r=e.body_id||"tinymce",r.indexOf("=")!=-1&&(r=d.getParam("body_id","","hash"),r=r[d.id]||r),s=e.body_class||"",s.indexOf("=")!=-1&&(s=d.getParam("body_class","","hash"),s=s[d.id]||""),d.iframeHTML+='</head><body id="'+r+'" class="mceContentBody '+s+'"><br></body></html>',a.relaxedDomain&&(h||a.isOpera&&parseFloat(opera.version())<11)&&(q='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+d.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()'),c=b.add(n.iframeContainer,"iframe",{id:d.id+"_ifr",src:q||'javascript:""',frameBorder:"0",allowTransparency:"true",title:e.aria_label,style:{width:"100%",height:j,display:"block"}}),d.contentAreaContainer=n.iframeContainer,b.get(n.editorContainer).style.display=d.orgDisplay,b.get(d.id).style.display="none",b.setAttrib(d.id,"aria-hidden",!0),(!a.relaxedDomain||!q)&&d.setupIframe(),m=c=n=null},setupIframe:function(){var d=this,e=d.settings,i=b.get(d.id),j=d.getDoc(),k,l;if(!h||!a.relaxedDomain)j.open(),j.write(d.iframeHTML),j.close(),a.relaxedDomain&&(j.domain=a.relaxedDomain);l=d.getBody(),l.disabled=!0,e.readonly||(l.contentEditable=!0),l.disabled=!1,d.schema=new a.html.Schema(e),d.dom=new a.dom.DOMUtils(d.getDoc(),{keep_values:!0,url_converter:d.convertURL,url_converter_scope:d,hex_colors:e.force_hex_style_colors,class_filter:e.class_filter,update_styles:1,fix_ie_paragraphs:1,schema:d.schema}),d.parser=new a.html.DomParser(e,d.schema),d.settings.allow_html_in_named_anchor||d.parser.addAttributeFilter("name",function(a,b){var c=a.length,d,e,f,g;while(c--){g=a[c];if(g.name==="a"&&g.firstChild){f=g.parent,d=g.lastChild;do e=d.prev,f.insert(d,g),d=e;while(d)}}}),d.parser.addAttributeFilter("src,href,style",function(a,b){var c=a.length,e,f=d.dom,g,h;while(c--)e=a[c],g=e.attr(b),h="data-mce-"+b,e.attributes.map[h]||(b==="style"?e.attr(h,f.serializeStyle(f.parseStyle(g),e.name)):e.attr(h,d.convertURL(g,b,e.name)))}),d.parser.addNodeFilter("script",function(a,b){var c=a.length,d;while(c--)d=a[c],d.attr("type","mce-"+(d.attr("type")||"text/javascript"))}),d.parser.addNodeFilter("#cdata",function(a,b){var c=a.length,d;while(c--)d=a[c],d.type=8,d.name="#comment",d.value="[CDATA["+d.value+"]]"}),d.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(b,c){var e=b.length,f,g=d.schema.getNonEmptyElements();while(e--)f=b[e],f.isEmpty(g)&&(f.empty().append(new a.html.Node("br",1)).shortEnded=!0)}),d.serializer=new a.dom.Serializer(e,d.dom,d.schema),d.selection=new a.dom.Selection(d.dom,d.getWin(),d.serializer),d.formatter=new a.Formatter(this),d.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(a){return!0},onformat:function(a,b,c){f(c,function(b,c){d.dom.setAttrib(a,c,b)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),f("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(a){d.formatter.register(a,{block:a,remove:"all"})}),d.formatter.register(d.settings.formats),d.undoManager=new a.UndoManager(d),d.undoManager.onAdd.add(function(a,b){if(a.hasUndo())return d.onChange.dispatch(d,b,a)}),d.undoManager.onUndo.add(function(a,b){return d.onUndo.dispatch(d,b,a)}),d.undoManager.onRedo.add(function(a,b){return d.onRedo.dispatch(d,b,a)}),d.forceBlocks=new a.ForceBlocks(d,{forced_root_block:e.forced_root_block}),d.editorCommands=new a.EditorCommands(d),d.serializer.onPreProcess.add(function(a,b){return d.onPreProcess.dispatch(d,b,a)}),d.serializer.onPostProcess.add(function(a,b){return d.onPostProcess.dispatch(d,b,a)}),d.onPreInit.dispatch(d),e.gecko_spellcheck||(d.getBody().spellcheck=0),e.readonly||d._addEvents(),d.controlManager.onPostRender.dispatch(d,d.controlManager),d.onPostRender.dispatch(d),d.quirks=new a.util.Quirks(this),e.directionality&&(d.getBody().dir=e.directionality),e.nowrap&&(d.getBody().style.whiteSpace="nowrap"),e.handle_node_change_callback&&d.onNodeChange.add(function(a,b,c){d.execCallback("handle_node_change_callback",d.id,c,-1,-1,!0,d.selection.isCollapsed())}),e.save_callback&&d.onSaveContent.add(function(a,b){var c=d.execCallback("save_callback",d.id,b.content,d.getBody());c&&(b.content=c)}),e.onchange_callback&&d.onChange.add(function(a,b){d.execCallback("onchange_callback",d,b)}),e.protect&&d.onBeforeSetContent.add(function(a,b){e.protect&&f(e.protect,function(a){b.content=b.content.replace(a,function(a){return"<!--mce:protected "+escape(a)+"-->"})})}),e.convert_newlines_to_brs&&d.onBeforeSetContent.add(function(a,b){b.initial&&(b.content=b.content.replace(/\r?\n/g,"<br />"))}),e.preformatted&&d.onPostProcess.add(function(a,b){b.content=b.content.replace(/^\s*<pre.*?>/,""),b.content=b.content.replace(/<\/pre>\s*$/,""),b.set&&(b.content='<pre class="mceItemHidden">'+b.content+"</pre>")}),e.verify_css_classes&&(d.serializer.attribValueFilter=function(a,b){var c,e;return a=="class"?(d.classesRE||(e=d.dom.getClasses(),e.length>0&&(c="",f(e,function(a){c+=(c?"|":"")+a["class"]}),d.classesRE=new RegExp("("+c+")","gi"))),!d.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(b)||d.classesRE.test(b)?b:""):b}),e.cleanup_callback&&(d.onBeforeSetContent.add(function(a,b){b.content=d.execCallback("cleanup_callback","insert_to_editor",b.content,b)}),d.onPreProcess.add(function(a,b){b.set&&d.execCallback("cleanup_callback","insert_to_editor_dom",b.node,b),b.get&&d.execCallback("cleanup_callback","get_from_editor_dom",b.node,b)}),d.onPostProcess.add(function(a,b){b.set&&(b.content=d.execCallback("cleanup_callback","insert_to_editor",
b.content,b)),b.get&&(b.content=d.execCallback("cleanup_callback","get_from_editor",b.content,b))})),e.save_callback&&d.onGetContent.add(function(a,b){b.save&&(b.content=d.execCallback("save_callback",d.id,b.content,d.getBody()))}),e.handle_event_callback&&d.onEvent.add(function(a,b,e){d.execCallback("handle_event_callback",b,a,e)===!1&&c.cancel(b)}),d.onSetContent.add(function(){d.addVisual(d.getBody())}),e.padd_empty_editor&&d.onPostProcess.add(function(a,b){b.content=b.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")});if(g){function m(a,b){f(a.dom.select("a"),function(b){var c=b.parentNode;a.dom.isBlock(c)&&c.lastChild===b&&a.dom.add(c,"br",{"data-mce-bogus":1})})}d.onExecCommand.add(function(a,b){b==="CreateLink"&&m(a)}),d.onSetContent.add(d.selection.onSetContent.add(m))}d.load({initial:!0,format:"html"}),d.startContent=d.getContent({format:"raw"}),d.undoManager.add(),d.initialized=!0,d.onInit.dispatch(d),d.execCallback("setupcontent_callback",d.id,d.getBody(),d.getDoc()),d.execCallback("init_instance_callback",d),d.focus(!0),d.nodeChanged({initial:1}),f(d.contentCSS,function(a){d.dom.loadCSS(a)}),e.auto_focus&&setTimeout(function(){var b=a.get(e.auto_focus);b.selection.select(b.getBody(),1),b.selection.collapse(1),b.getBody().focus(),b.getWin().focus()},100),i=null},focus:function(b){var c,d=this,e=d.selection,f=d.settings.content_editable,g,h,i=d.getDoc();b||(g=e.getRng(),g.item&&(h=g.item(0)),d._refreshContentEditable(),e.normalize(),f||d.getWin().focus(),a.isGecko&&d.getBody().focus(),h&&h.ownerDocument==i&&(g=i.body.createControlRange(),g.addElement(h),g.select())),a.activeEditor!=d&&((c=a.activeEditor)!=null&&c.onDeactivate.dispatch(c,d),d.onActivate.dispatch(d,c)),a._setActive(d)},execCallback:function(b){var c=this,d=c.settings[b],e;if(!d)return;return c.callbackLookup&&(e=c.callbackLookup[b])&&(d=e.func,e=e.scope),j(d,"string")&&(e=d.replace(/\.\w+$/,""),e=e?a.resolve(e):0,d=a.resolve(d),c.callbackLookup=c.callbackLookup||{},c.callbackLookup[b]={func:d,scope:e}),d.apply(e||c,Array.prototype.slice.call(arguments,1))},translate:function(b){var c=this.settings.language||"en",d=a.i18n;return b?d[c+"."+b]||b.replace(/{\#([^}]+)\}/g,function(a,b){return d[c+"."+b]||"{#"+b+"}"}):""},getLang:function(b,c){return a.i18n[(this.settings.language||"en")+"."+b]||(j(c)?c:"{#"+b+"}")},getParam:function(b,c,d){var e=a.trim,g=j(this.settings[b])?this.settings[b]:c,h;return d==="hash"?(h={},j(g,"string")?f(g.indexOf("=")>0?g.split(/[;,](?![^=;,]*(?:[;,]|$))/):g.split(","),function(a){a=a.split("="),a.length>1?h[e(a[0])]=e(a[1]):h[e(a[0])]=e(a)}):h=g,h):g},nodeChanged:function(a){var b=this,c=b.selection,d=c.getStart()||b.getBody();b.initialized&&(a=a||{},d=h&&d.ownerDocument!=b.getDoc()?b.getBody():d,a.parents=[],b.dom.getParent(d,function(b){if(b.nodeName=="BODY")return!0;a.parents.push(b)}),b.onNodeChange.dispatch(b,a?a.controlManager||b.controlManager:b.controlManager,d,c.isCollapsed(),a))},addButton:function(a,b){var c=this;c.buttons=c.buttons||{},c.buttons[a]=b},addCommand:function(a,b,c){this.execCommands[a]={func:b,scope:c||this}},addQueryStateHandler:function(a,b,c){this.queryStateCommands[a]={func:b,scope:c||this}},addQueryValueHandler:function(a,b,c){this.queryValueCommands[a]={func:b,scope:c||this}},addShortcut:function(a,b,c,d){var e=this,g;return e.settings.custom_shortcuts?(e.shortcuts=e.shortcuts||{},j(c,"string")&&(g=c,c=function(){e.execCommand(g,!1,null)}),j(c,"object")&&(g=c,c=function(){e.execCommand(g[0],g[1],g[2])}),f(o(a),function(a){var g={func:c,scope:d||this,desc:b,alt:!1,ctrl:!1,shift:!1};f(o(a,"+"),function(a){switch(a){case"alt":case"ctrl":case"shift":g[a]=!0;break;default:g.charCode=a.charCodeAt(0),g.keyCode=a.toUpperCase().charCodeAt(0)}}),e.shortcuts[(g.ctrl?"ctrl":"")+","+(g.alt?"alt":"")+","+(g.shift?"shift":"")+","+g.keyCode]=g}),!0):!1},execCommand:function(a,b,c,d){var e=this,g=0,h,i;!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(a)&&(!d||!d.skip_focus)&&e.focus(),h={},e.onBeforeExecCommand.dispatch(e,a,b,c,h);if(h.terminate)return!1;if(e.execCallback("execcommand_callback",e.id,e.selection.getNode(),a,b,c))return e.onExecCommand.dispatch(e,a,b,c,d),!0;if(h=e.execCommands[a]){i=h.func.call(h.scope,b,c);if(i!==!0)return e.onExecCommand.dispatch(e,a,b,c,d),i}f(e.plugins,function(f){if(f.execCommand&&f.execCommand(a,b,c))return e.onExecCommand.dispatch(e,a,b,c,d),g=1,!1});if(g)return!0;if(e.theme&&e.theme.execCommand&&e.theme.execCommand(a,b,c))return e.onExecCommand.dispatch(e,a,b,c,d),!0;if(e.editorCommands.execCommand(a,b,c))return e.onExecCommand.dispatch(e,a,b,c,d),!0;e.getDoc().execCommand(a,b,c),e.onExecCommand.dispatch(e,a,b,c,d)},queryCommandState:function(a){var b=this,c,d;if(b._isHidden())return;if(c=b.queryStateCommands[a]){d=c.func.call(c.scope);if(d!==!0)return d}c=b.editorCommands.queryCommandState(a);if(c!==-1)return c;try{return this.getDoc().queryCommandState(a)}catch(e){}},queryCommandValue:function(a){var b=this,c,d;if(b._isHidden())return;if(c=b.queryValueCommands[a]){d=c.func.call(c.scope);if(d!==!0)return d}c=b.editorCommands.queryCommandValue(a);if(j(c))return c;try{return this.getDoc().queryCommandValue(a)}catch(e){}},show:function(){var a=this;b.show(a.getContainer()),b.hide(a.id),a.load()},hide:function(){var a=this,c=a.getDoc();h&&c&&c.execCommand("SelectAll"),a.save(),b.hide(a.getContainer()),b.setStyle(a.id,"display",a.orgDisplay)},isHidden:function(){return!b.isHidden(this.id)},setProgressState:function(a,b,c){return this.onSetProgressState.dispatch(this,a,b,c),a},load:function(a){var b=this,c=b.getElement(),d;if(c)return a=a||{},a.load=!0,d=b.setContent(j(c.value)?c.value:c.innerHTML,a),a.element=c,a.no_events||b.onLoadContent.dispatch(b,a),a.element=c=null,d},save:function(a){var c=this,d=c.getElement(),e,g;if(!d||!c.initialized)return;return a=a||{},a.save=!0,a.no_events||(c.undoManager.typing=!1,c.undoManager.add()),a.element=d,e=a.content=c.getContent(a),a.no_events||c.onSaveContent.dispatch(c,a),e=a.content,/TEXTAREA|INPUT/i.test(d.nodeName)?d.value=e:(d.innerHTML=e,(g=b.getParent(c.id,"form"))&&f(g.elements,function(a){if(a.name==c.id)return a.value=e,!1})),a.element=d=null,e},setContent:function(b,c){var d=this,e,f=d.getBody(),g;c=c||{},c.format=c.format||"html",c.set=!0,c.content=b,c.no_events||d.onBeforeSetContent.dispatch(d,c),b=c.content;if(!a.isIE&&(b.length===0||/^\s+$/.test(b))){g=d.settings.forced_root_block,g?b="<"+g+'><br data-mce-bogus="1"></'+g+">":b='<br data-mce-bogus="1">',f.innerHTML=b,d.selection.select(f,!0),d.selection.collapse(!0);return}return c.format!=="raw"&&(b=(new a.html.Serializer({},d.schema)).serialize(d.parser.parse(b))),c.content=a.trim(b),d.dom.setHTML(f,c.content),c.no_events||d.onSetContent.dispatch(d,c),d.selection.normalize(),c.content},getContent:function(b){var c=this,d;return b=b||{},b.format=b.format||"html",b.get=!0,b.no_events||c.onBeforeGetContent.dispatch(c,b),b.format=="raw"?d=c.getBody().innerHTML:d=c.serializer.serialize(c.getBody(),b),b.content=a.trim(d),b.no_events||c.onGetContent.dispatch(c,b),b.content},isDirty:function(){var b=this;return a.trim(b.startContent)!=a.trim(b.getContent({format:"raw",no_events:1}))&&!b.isNotDirty},getContainer:function(){var a=this;return a.container||(a.container=b.get(a.editorContainer||a.id+"_parent")),a.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return b.get(this.settings.content_element||this.id)},getWin:function(){var a=this,c;return a.contentWindow||(c=b.get(a.id+"_ifr"),c&&(a.contentWindow=c.contentWindow)),a.contentWindow},getDoc:function(){var a=this,b;return a.contentDocument||(b=a.getWin(),b&&(a.contentDocument=b.document)),a.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(a,b,c){var d=this,e=d.settings;return e.urlconverter_callback?d.execCallback("urlconverter_callback",a,c,!0,b):!e.convert_urls||c&&c.nodeName=="LINK"||a.indexOf("file:")===0?a:e.relative_urls?d.documentBaseURI.toRelative(a):(a=d.documentBaseURI.toAbsolute(a,e.remove_script_host),a)},addVisual:function(a){var b=this,c=b.settings;a=a||b.getBody(),j(b.hasVisual)||(b.hasVisual=c.visual),f(b.dom.select("table,a",a),function(a){var d;switch(a.nodeName){case"TABLE":d=b.dom.getAttrib(a,"border");if(!d||d=="0")b.hasVisual?b.dom.addClass(a,c.visual_table_class):b.dom.removeClass(a,c.visual_table_class);return;case"A":d=b.dom.getAttrib(a,"name"),d&&(b.hasVisual?b.dom.addClass(a,"mceItemAnchor"):b.dom.removeClass(a,"mceItemAnchor"));return}}),b.onVisualAid.dispatch(b,a,b.hasVisual)},remove:function(){var c=this,d=c.getContainer();c.removed=1,c.hide(),c.execCallback("remove_instance_callback",c),c.onRemove.dispatch(c),c.onExecCommand.listeners=[],a.remove(c),b.remove(d)},destroy:function(b){var d=this;if(d.destroyed)return;b||(a.removeUnload(d.destroy),tinyMCE.onBeforeUnload.remove(d._beforeUnload),d.theme&&d.theme.destroy&&d.theme.destroy(),d.controlManager.destroy(),d.selection.destroy(),d.dom.destroy(),d.settings.content_editable||(c.clear(d.getWin()),c.clear(d.getDoc())),c.clear(d.getBody()),c.clear(d.formElement)),d.formElement&&(d.formElement.submit=d.formElement._mceOldSubmit,d.formElement._mceOldSubmit=null),d.contentAreaContainer=d.formElement=d.container=d.settings.content_element=d.bodyElement=d.contentDocument=d.contentWindow=null,d.selection&&(d.selection=d.selection.win=d.selection.dom=d.selection.dom.doc=null),d.destroyed=1},_addEvents:function(){function k(a,b){var c=a.type;if(d.removed)return;d.onEvent.dispatch(d,a,b)!==!1&&d[j[a.fakeType||a.type]].dispatch(d,a,b)}var d=this,e,h=d.settings,i=d.dom,j={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};f(j,function(a,c){switch(c){case"contextmenu":i.bind(d.getDoc(),c,k);break;case"paste":i.bind(d.getBody(),c,function(a){k(a)});break;case"submit":case"reset":i.bind(d.getElement().form||b.getParent(d.id,"form"),c,k);break;default:i.bind(h.content_editable?d.getBody():d.getDoc(),c,k)}}),i.bind(h.content_editable?d.getBody():g?d.getDoc():d.getWin(),"focus",function(a){d.focus(!0)}),a.isGecko&&i.bind(d.getDoc(),"DOMNodeInserted",function(a){var b;a=a.target,a.nodeType===1&&a.nodeName==="IMG"&&(b=a.getAttribute("data-mce-src"))&&(a.src=d.documentBaseURI.toAbsolute(b))});if(g){function l(){var a=this,b=a.getDoc(),c=a.settings;if(g&&!c.readonly){a._refreshContentEditable();try{b.execCommand("styleWithCSS",0,!1)}catch(d){if(!a._isHidden())try{b.execCommand("useCSS",0,!0)}catch(d){}}if(!c.table_inline_editing)try{b.execCommand("enableInlineTableEditing",!1,!1)}catch(d){}if(!c.object_resizing)try{b.execCommand("enableObjectResizing",!1,!1)}catch(d){}}}d.onBeforeExecCommand.add(l),d.onMouseDown.add(l)}d.onMouseUp.add(d.nodeChanged),d.onKeyUp.add(function(b,c){var e=c.keyCode;(e>=33&&e<=36||e>=37&&e<=40||e==13||e==45||e==46||e==8||a.isMac&&(e==91||e==93)||c.ctrlKey)&&d.nodeChanged()}),d.onKeyDown.add(function(a,b){if(b.keyCode!=8)return;var c=a.selection.getRng().startContainer,d=a.selection.getRng().startOffset;while(c&&c.nodeType&&c.nodeType!=1&&c.parentNode)c=c.parentNode;if(c&&c.parentNode&&c.parentNode.tagName==="BLOCKQUOTE"&&c.parentNode.firstChild==c&&d==0){a.formatter.toggle("blockquote",null,c.parentNode);var e=a.selection.getRng();e.setStart(c,0),e.setEnd(c,0),a.selection.setRng(e),a.selection.collapse(!1)}}),d.onReset.add(function(){d.setContent(d.startContent,{format:"raw"})});if(h.custom_shortcuts){h.custom_undo_redo_keyboard_shortcuts&&(d.addShortcut("ctrl+z",d.getLang("undo_desc"),"Undo"),d.addShortcut("ctrl+y",d.getLang("redo_desc"),"Redo")),d.addShortcut("ctrl+b",d.getLang("bold_desc"),"Bold"),d.addShortcut("ctrl+i",d.getLang("italic_desc"),"Italic"),d.addShortcut("ctrl+u",d.getLang("underline_desc"),"Underline");for(e=1;e<=6;e++)d.addShortcut("ctrl+"+e,"",["FormatBlock",!1,"h"+e]);d.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),d.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),d.addShortcut("ctrl+9","",["FormatBlock",!1,"address"]);function m(b){var c=null;return!b.altKey&&!b.ctrlKey&&!b.metaKey?c:(f(d.shortcuts,function(d){if(a.isMac&&d.ctrl!=b.metaKey)return;if(!a.isMac&&d.ctrl!=b.ctrlKey)return;if(d.alt!=b.altKey)return;if(d.shift!=b.shiftKey)return;if(b.keyCode==d.keyCode||b.charCode&&b.charCode==d.charCode)return c=d,!1}),c)}d.onKeyUp.add(function(a,b){var d=m(b);if(d)return c.cancel(b)}),d.onKeyPress.add(function(a,b){var d=m(b);if(d)return c.cancel(b)}),d.onKeyDown.add(function(a,b){var d=m(b);if(d)return d.func.call(d.scope),c.cancel(b)})}a.isIE&&i.bind(d.getDoc(),"controlselect",function(a){var b=d.resizeInfo,e;a=a.target;if(a.nodeName!=="IMG")return;b&&i.unbind(b.node,b.ev,b.cb),i.hasClass(a,"mceItemNoResize")?(ev="resizestart",e=i.bind(a,"resizestart",c.cancel,c)):(ev="resizeend",e=i.bind(a,ev,function(a){var b;a=a.target;if(b=i.getStyle(a,"width"))i.setAttrib(a,"width",b.replace(/[^0-9%]+/g,"")),i.setStyle(a,"width","");if(b=i.getStyle(a,"height"))i.setAttrib(a,"height",b.replace(/[^0-9%]+/g,"")),i.setStyle(a,"height","")})),b=d.resizeInfo={node:a,ev:ev,cb:e}}),a.isOpera&&d.onClick.add(function(a,b){c.prevent(b)});if(h.custom_undo_redo){function n(){d.undoManager.typing=!1,d.undoManager.add()}i.bind(d.getDoc(),"focusout",function(a){!d.removed&&d.undoManager.typing&&n()}),d.dom.bind(d.dom.getRoot(),"dragend",function(a){n()}),d.onKeyUp.add(function(a,b){var c=b.keyCode;(c>=33&&c<=36||c>=37&&c<=40||c==13||c==45||b.ctrlKey)&&n()}),d.onKeyDown.add(function(b,e){var f=e.keyCode,g;if(f==8){g=d.getDoc().selection;if(g&&g.createRange&&g.createRange().item)return d.undoManager.beforeChange(),b.dom.remove(g.createRange().item(0)),n(),c.cancel(e)}if(f>=33&&f<=36||f>=37&&f<=40||f==13||f==45){a.isIE&&f==13&&d.undoManager.beforeChange(),d.undoManager.typing&&n();return}(f<16||f>20)&&f!=224&&f!=91&&!d.undoManager.typing&&(d.undoManager.beforeChange(),d.undoManager.typing=!0,d.undoManager.add())}),d.onMouseDown.add(function(){d.undoManager.typing&&n()})}if(a.isGecko){function o(){var a=d.dom.getAttribs(d.selection.getStart().cloneNode(!1));return function(){var b=d.selection.getStart();b!==d.getBody()&&(d.dom.setAttrib(b,"style",null),f(a,function(a){b.setAttributeNode(a.cloneNode(!0))}))}}function p(){var a=d.selection;return!a.isCollapsed()&&a.getStart()!=a.getEnd()}d.onKeyPress.add(function(a,b){var e;if((b.keyCode==8||b.keyCode==46)&&p())return e=o(),d.getDoc().execCommand("delete",!1,null),e(),c.cancel(b)}),d.dom.bind(d.getDoc(),"cut",function(a){var b;p()&&(b=o(),d.onKeyUp.addToTop(c.cancel,c),setTimeout(function(){b(),d.onKeyUp.remove(c.cancel,c)},0))})}},_refreshContentEditable:function(){var a=this,b,c;a._isHidden()&&(b=a.getBody(),c=b.parentNode,c.removeChild(b),c.appendChild(b),b.focus())},_isHidden:function(){var a;return g?(a=this.selection.getSel(),!a||!a.rangeCount||a.rangeCount==0):0}})}(tinymce),function(a){var b=a.each,c,d=!0,e=!1;a.EditorCommands=function(f){function m(a,b,c){var f;return a=a.toLowerCase(),(f=i.exec[a])?(f(a,b,c),d):e}function n(a){var b;return a=a.toLowerCase(),(b=i.state[a])?b(a):-1}function o(a){var b;return a=a.toLowerCase(),(b=i.value[a])?b(a):e}function p(a,c){c=c||"exec",b(a,function(a,d){b(d.toLowerCase().split(","),function(b){i[c][b]=a})})}function q(a,b,d){return b===c&&(b=e),d===c&&(d=null),f.getDoc().execCommand(a,b,d)}function r(a){return k.match(a)}function s(a,b){k.toggle(a,b?{value:b}:c)}function t(a){l=h.getBookmark(a)}function u(){h.moveToBookmark(l)}var g=f.dom,h=f.selection,i={state:{},exec:{},value:{}},j=f.settings,k=f.formatter,l;a.extend(this,{execCommand:m,queryCommandState:n,queryCommandValue:o,addCommands:p}),p({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){f.undoManager.add()},"Cut,Copy,Paste":function(b){var c=f.getDoc(),e;try{q(b)}catch(g){e=d}if(e||!c.queryCommandSupported(b))a.isGecko?f.windowManager.confirm(f.getLang("clipboard_msg"),function(a){a&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):f.windowManager.alert(f.getLang("clipboard_no_support"))},unlink:function(a){h.isCollapsed()&&h.select(h.getNode()),q(a),h.collapse(e)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(a){var c=a.substring(7);b("left,center,right,full".split(","),function(a){c!=a&&k.remove("align"+a)}),s("align"+c),m("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(a){var b,c;q(a),b=g.getParent(h.getNode(),"ol,ul"),b&&(c=b.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(c.nodeName)&&(t(),g.split(c,b),u()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){s(a)},"ForeColor,HiliteColor,FontName":function(a,b,c){s(a,c)},FontSize:function(b,c,d){var e,f;d>=1&&d<=7&&(f=a.explode(j.font_size_style_values),e=a.explode(j.font_size_classes),e?d=e[d-1]||d:d=f[d-1]||d),s(b,d)},RemoveFormat:function(a){k.remove(a)},mceBlockQuote:function(a){s("blockquote")},FormatBlock:function(a,b,c){return s(c||"p")},mceCleanup:function(){var a=h.getBookmark();f.setContent(f.getContent({cleanup:d}),{cleanup:d}),h.moveToBookmark(a)},mceRemoveNode:function(a,b,c){var e=c||h.getNode();e!=f.getBody()&&(t(),f.dom.remove(e,d),u())},mceSelectNodeDepth:function(a,b,c){var d=0;g.getParent(h.getNode(),function(a){if(a.nodeType==1&&d++==c)return h.select(a),e},f.getBody())},mceSelectNode:function(a,b,c){h.select(c)},mceInsertContent:function(b,c,d){var e,i,j,k,l,m,n,o,p,q,r,s,t,u;e=f.parser,i=new a.html.Serializer({},f.schema),t='<span id="mce_marker" data-mce-type="bookmark">﻿</span>',m={content:d,format:"html"},h.onBeforeSetContent.dispatch(h,m),d=m.content,d.indexOf("{$caret}")==-1&&(d+="{$caret}"),d=d.replace(/\{\$caret\}/,t),h.isCollapsed()||f.getDoc().execCommand("Delete",!1,null),j=h.getNode(),m={context:j.nodeName.toLowerCase()},l=e.parse(d,m),r=l.lastChild;if(r.attr("id")=="mce_marker"){n=r;for(r=r.prev;r;r=r.walk(!0))if(r.type==3||!g.isBlock(r.name)){r.parent.insert(n,r,r.name==="br");break}}if(!m.invalid)d=i.serialize(l),r=j.firstChild,s=j.lastChild,!r||r===s&&r.nodeName==="BR"?g.setHTML(j,d):h.setContent(d);else{h.setContent(t),j=f.selection.getNode(),k=f.getBody(),j.nodeType==9?j=r=k:r=j;while(r!==k)j=r,r=r.parentNode;d=j==k?k.innerHTML:g.getOuterHTML(j),d=i.serialize(e.parse(d.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return i.serialize(l)}))),j==k?g.setHTML(k,d):g.setOuterHTML(j,d)}n=g.get("mce_marker"),o=g.getRect(n),p=g.getViewPort(f.getWin());if(o.y+o.h>p.y+p.h||o.y<p.y||o.x>p.x+p.w||o.x<p.x)u=a.isIE?f.getDoc().documentElement:f.getBody(),u.scrollLeft=o.x,u.scrollTop=o.y-p.h+25;q=g.createRng(),r=n.previousSibling,r&&r.nodeType==3?q.setStart(r,r.nodeValue.length):(q.setStartBefore(n),q.setEndBefore(n)),g.remove(n),h.setRng(q),h.onSetContent.dispatch(h,m),f.addVisual()},mceInsertRawHTML:function(a,b,c){h.setContent("tiny_mce_marker"),f.setContent(f.getContent().replace(/tiny_mce_marker/g,function(){return c}))},mceSetContent:function(a,b,c){f.setContent(c)},"Indent,Outdent":function(a){var c,d,e;c=j.indentation,d=/[a-z%]+$/i.exec(c),c=parseInt(c),!n("InsertUnorderedList")&&!n("InsertOrderedList")?b(h.getSelectedBlocks(),function(b){a=="outdent"?(e=Math.max(0,parseInt(b.style.paddingLeft||0)-c),g.setStyle(b,"paddingLeft",e?e+d:"")):g.setStyle(b,"paddingLeft",parseInt(b.style.paddingLeft||0)+c+d)}):q(a)},mceRepaint:function(){var b;if(a.isGecko)try{t(d),h.getSel()&&h.getSel().selectAllChildren(f.getBody()),h.collapse(d),u()}catch(c){}},mceToggleFormat:function(a,b,c){k.toggle(c)},InsertHorizontalRule:function(){f.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){f.hasVisual=!f.hasVisual,f.addVisual()},mceReplaceContent:function(a,b,c){f.execCommand("mceInsertContent",!1,c.replace(/\{\$selection\}/g,h.getContent({format:"text"})))},mceInsertLink:function(a,b,c){var d;typeof c=="string"&&(c={href:c}),d=g.getParent(h.getNode(),"a"),c.href=c.href.replace(" ","%20"),(!d||!c.href)&&k.remove("link"),c.href&&k.apply("link",c,d)},selectAll:function(){var a=g.getRoot(),b=g.createRng();b.setStart(a,0),b.setEnd(a,a.childNodes.length),f.selection.setRng(b)}}),p({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(a){return r("align"+a.substring(7))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){return r(a)},mceBlockQuote:function(){return r("blockquote")},Outdent:function(){var a;if(j.inline_styles){if((a=g.getParent(h.getStart(),g.isBlock))&&parseInt(a.style.paddingLeft)>0)return d;if((a=g.getParent(h.getEnd(),g.isBlock))&&parseInt(a.style.paddingLeft)>0)return d}return n("InsertUnorderedList")||n("InsertOrderedList")||!j.inline_styles&&!!g.getParent(h.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(a){return g.getParent(h.getNode(),a=="insertunorderedlist"?"UL":"OL")}},"state"),p({"FontSize,FontName":function(a){var b=0,c;if(c=g.getParent(h.getNode(),"span"))a=="fontsize"?b=c.style.fontSize:b=c.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase();return b}},"value"),j.custom_undo_redo&&p({Undo:function(){f.undoManager.undo()},Redo:function(){f.undoManager.redo()}})}}(tinymce),function(a){var b=a.util.Dispatcher;a.UndoManager=function(c){function h(){return a.trim(c.getContent({format:"raw",no_events:1}))}var d,e=0,f=[],g;return d={typing:!1,onAdd:new b(d),onUndo:new b(d),onRedo:new b(d),beforeChange:function(){g=c.selection.getBookmark(2,!0)},add:function(a){var b,i=c.settings,j;a=a||{},a.content=h(),j=f[e];if(j&&j.content==a.content)return null;f[e]&&(f[e].beforeBookmark=g);if(i.custom_undo_redo_levels&&f.length>i.custom_undo_redo_levels){for(b=0;b<f.length-1;b++)f[b]=f[b+1];f.length--,e=f.length}return a.bookmark=c.selection.getBookmark(2,!0),e<f.length-1&&(f.length=e+1),f.push(a),e=f.length-1,d.onAdd.dispatch(d,a),c.isNotDirty=0,a},undo:function(){var a,b;return d.typing&&(d.add(),d.typing=!1),e>0&&(a=f[--e],c.setContent(a.content,{format:"raw"}),c.selection.moveToBookmark(a.beforeBookmark),d.onUndo.dispatch(d,a)),a},redo:function(){var a;return e<f.length-1&&(a=f[++e],c.setContent(a.content,{format:"raw"}),c.selection.moveToBookmark(a.bookmark),d.onRedo.dispatch(d,a)),a},clear:function(){f=[],e=0,d.typing=!1},hasUndo:function(){return e>0||this.typing},hasRedo:function(){return e<f.length-1&&!this.typing}}}}(tinymce),function(a){function j(a){var b,c,d;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(a.nodeName)&&(b?(c=a.cloneNode(!1),c.appendChild(b),b=c):b=d=a.cloneNode(!1),b.removeAttribute("id"));while(a=a.parentNode);if(b)return{wrapper:b,inner:d}}function k(a,b){var c=b.ownerDocument.createRange();return c.setStart(a.endContainer,a.endOffset),c.setEndAfter(b),c.cloneContents().textContent.length==0}function l(a,b,c){var d,e;return b.isEmpty(c)?(d=b.getParent(c,"ul,ol"),b.getParent(d.parentNode,"ul,ol")||(b.split(d,c),e=b.create("p",0,'<br data-mce-bogus="1" />'),b.replace(e,c),a.select(e,1)),i):h}var b=a.dom.Event,c=a.isIE,d=a.isGecko,e=a.isOpera,f=a.each,g=a.extend,h=!0,i=!1;a.create("tinymce.ForceBlocks",{ForceBlocks:function(a){var b=this,c=a.settings,d;b.editor=a,b.dom=a.dom,d=(c.forced_root_block||"p").toLowerCase(),c.element=d.toUpperCase(),a.onPreInit.add(b.setup,b)},setup:function(){var e=this,f=e.editor,g=f.settings,i=f.dom,k=f.selection,l=f.schema.getBlockElements();if(g.forced_root_block){function m(){var a=k.getStart(),b=f.getBody(),c,d,e,h,j,m,n,r=-16777215;if(!a||a.nodeType!==1)return;while(a!=b){if(l[a.nodeName])return;a=a.parentNode}c=k.getRng(),c.setStart?(d=c.startContainer,e=c.startOffset,h=c.endContainer,j=c.endOffset):(c.item&&(c=f.getDoc().body.createTextRange(),c.moveToElementText(c.item(0))),tmpRng=c.duplicate(),tmpRng.collapse(!0),e=tmpRng.move("character",r)*-1,tmpRng.collapsed||(tmpRng=c.duplicate(),tmpRng.collapse(!1),j=tmpRng.move("character",r)*-1-e));for(a=b.firstChild;a;a)a.nodeType===3||a.nodeType==1&&!l[a.nodeName]?(m||(m=i.create(g.forced_root_block),a.parentNode.insertBefore(m,a)),n=a,a=a.nextSibling,m.appendChild(n)):(m=null,a=a.nextSibling);if(c.setStart)c.setStart(d,e),c.setEnd(h,j),k.setRng(c);else try{c=f.getDoc().body.createTextRange(),c.moveToElementText(b),c.collapse(!0),c.moveStart("character",e),j>0&&c.moveEnd("character",j),c.select()}catch(s){}f.nodeChanged()}f.onKeyUp.add(m),f.onClick.add(m)}g.force_br_newlines&&c&&f.onKeyPress.add(function(a,c){var d;if(c.keyCode==13&&k.getNode().nodeName!="LI")return k.setContent('<br id="__" /> ',{format:"raw"}),d=i.get("__"),d.removeAttribute("id"),k.select(d),k.collapse(),b.cancel(c)}),g.force_p_newlines&&(c?(a.addUnload(function(){e._previousFormats=0}),f.onKeyPress.add(function(a,b){e._previousFormats=0,b.keyCode==13&&!b.shiftKey&&a.selection.isCollapsed()&&g.keep_styles&&(e._previousFormats=j(a.selection.getStart()))}),f.onKeyUp.add(function(a,b){if(b.keyCode==13&&!b.shiftKey){var c=a.selection.getStart(),d=e._previousFormats;!c.hasChildNodes()&&d&&(c=i.getParent(c,i.isBlock),c&&c.nodeName!="LI"&&(c.innerHTML="",e._previousFormats?(c.appendChild(d.wrapper),d.inner.innerHTML="﻿"):c.innerHTML="﻿",k.select(c,1),k.collapse(!0),a.getDoc().execCommand("Delete",!1,null),e._previousFormats=0))}})):f.onKeyPress.add(function(a,c){c.keyCode==13&&!c.shiftKey&&!e.insertPara(c)&&b.cancel(c)}),d&&f.onKeyDown.add(function(a,b){(b.keyCode==8||b.keyCode==46)&&!b.shiftKey&&e.backspaceDelete(b,b.keyCode==8)}));if(a.isWebKit){function n(a){var b=k.getRng(),c,d=i.create("div",null," "),e,f=i.getViewPort(a.getWin()).h;b.insertNode(c=i.create("br")),b.setStartAfter(c),b.setEndAfter(c),k.setRng(b),k.getSel().focusNode==c.previousSibling&&(k.select(i.insertAfter(i.doc.createTextNode(" "),c)),k.collapse(h)),i.insertAfter(d,c),e=i.getPos(d).y,i.remove(d),e>f&&a.getWin().scrollTo(0,e)}f.onKeyPress.add(function(a,c){c.keyCode==13&&(c.shiftKey||g.force_br_newlines&&!i.getParent(k.getNode(),"h1,h2,h3,h4,h5,h6,ol,ul"))&&(n(a),b.cancel(c))})}c&&g.element!="P"&&(f.onKeyPress.add(function(a,b){e.lastElm=k.getNode().nodeName}),f.onKeyUp.add(function(a,b){var c,d=k.getNode(),f=a.getBody();f.childNodes.length===1&&d.nodeName=="P"?(d=i.rename(d,g.element),k.select(d),k.collapse(),a.nodeChanged()):b.keyCode==13&&!b.shiftKey&&e.lastElm!="P"&&(c=i.getParent(d,"p"),c&&(i.rename(c,g.element),a.nodeChanged()))}))},getParentBlock:function(a){var b=this.dom;return b.getParent(a,b.isBlock)},insertPara:function(a){function I(a,b){var c=[],f,h,j;a.innerHTML="";if(g.keep_styles){h=b;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(h.nodeName)&&(f=h.cloneNode(i),d.setAttrib(f,"id",""),c.push(f));while(h=h.parentNode)}if(c.length>0){for(j=c.length-1,f=a;j>=0;j--)f=f.appendChild(c[j]);return c[0].innerHTML=e?" ":"<br />",c[0]}a.innerHTML=e?" ":"<br />"}var b=this,c=b.editor,d=c.dom,f=c.getDoc(),g=c.settings,j=c.selection.getSel(),m=j.getRangeAt(0),n=f.body,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=d.getViewPort(c.getWin()),E,F,G;c.undoManager.beforeChange(),o=f.createRange(),o.setStart(j.anchorNode,j.anchorOffset),o.collapse(h),p=f.createRange(),p.setStart(j.focusNode,j.focusOffset),p.collapse(h),q=o.compareBoundaryPoints(o.START_TO_END,p)<0,r=q?j.anchorNode:j.focusNode,s=q?j.anchorOffset:j.focusOffset,t=q?j.focusNode:j.anchorNode,u=q?j.focusOffset:j.anchorOffset;if(r===t&&/^(TD|TH)$/.test(r.nodeName))return r.firstChild.nodeName=="BR"&&d.remove(r.firstChild),r.childNodes.length==0?(c.dom.add(r,g.element,null,"<br />"),z=c.dom.add(r,g.element,null,"<br />")):(C=r.innerHTML,r.innerHTML="",c.dom.add(r,g.element,null,C),z=c.dom.add(r,g.element,null,"<br />")),m=f.createRange(),m.selectNodeContents(z),m.collapse(1),c.selection.setRng(m),i;r==n&&t==n&&n.firstChild&&c.dom.isBlock(n.firstChild)&&(r=t=r.firstChild,s=u=0,o=f.createRange(),o.setStart(r,0),p=f.createRange(),p.setStart(t,0)),f.body.hasChildNodes()||f.body.appendChild(d.create("br")),r=r.nodeName=="HTML"?f.body:r,r=r.nodeName=="BODY"?r.firstChild:r,t=t.nodeName=="HTML"?f.body:t,t=t.nodeName=="BODY"?t.firstChild:t,v=b.getParentBlock(r),w=b.getParentBlock(t),x=v?v.nodeName:g.element;if(C=b.dom.getParent(v,"li,pre"))return C.nodeName=="LI"?l(c.selection,b.dom,C):h;v&&(v.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(d.getStyle(v,"position",1)))&&(x=g.element,v=null),w&&(w.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(d.getStyle(v,"position",1)))&&(x=g.element,w=null);if(/(TD|TABLE|TH|CAPTION)/.test(x)||v&&x=="DIV"&&/left|right/gi.test(d.getStyle(v,"float",1)))x=g.element,v=w=null;y=v&&v.nodeName==x?v.cloneNode(0):c.dom.create(x),z=w&&w.nodeName==x?w.cloneNode(0):c.dom.create(x),z.removeAttribute("id"),/^(H[1-6])$/.test(x)&&k(m,v)&&(z=c.dom.create(g.element)),C=A=r;do{if(C==n||C.nodeType==9||b.dom.isBlock(C)||/(TD|TABLE|TH|CAPTION)/.test(C.nodeName))break;A=C}while(C=C.previousSibling?C.previousSibling:C.parentNode);C=B=t;do{if(C==n||C.nodeType==9||b.dom.isBlock(C)||/(TD|TABLE|TH|CAPTION)/.test(C.nodeName))break;B=C}while(C=C.nextSibling?C.nextSibling:C.parentNode);A.nodeName==x?o.setStart(A,0):o.setStartBefore(A),o.setEnd(r,s),y.appendChild(o.cloneContents()||f.createTextNode(""));try{p.setEndAfter(B)}catch(H){}return p.setStart(t,u),z.appendChild(p.cloneContents()||f.createTextNode("")),m=f.createRange(),!A.previousSibling&&A.parentNode.nodeName==x?m.setStartBefore(A.parentNode):o.startContainer.nodeName==x&&o.startOffset==0?m.setStartBefore(o.startContainer):m.setStart(o.startContainer,o.startOffset),!B.nextSibling&&B.parentNode.nodeName==x?m.setEndAfter(B.parentNode):m.setEnd(p.endContainer,p.endOffset),m.deleteContents(),e&&c.getWin().scrollTo(0,D.y),y.firstChild&&y.firstChild.nodeName==x&&(y.innerHTML=y.firstChild.innerHTML),z.firstChild&&z.firstChild.nodeName==x&&(z.innerHTML=z.firstChild.innerHTML),d.isEmpty(y)&&I(y,r),d.isEmpty(z)&&(G=I(z,t)),e&&parseFloat(opera.version())<9.5?(m.insertNode(y),m.insertNode(z)):(m.insertNode(z),m.insertNode(y)),z.normalize(),y.normalize(),c.selection.select(z,!0),c.selection.collapse(!0),E=c.dom.getPos(z).y,(E<D.y||E+25>D.y+D.h)&&c.getWin().scrollTo(0,E<D.y?E:E-D.h+25),c.undoManager.add(),i},backspaceDelete:function(c,d){var e=this,f=e.editor,g=f.getBody(),h=f.dom,j,k=f.selection,l=k.getRng(),m=l.startContainer,j,n,o,p;if(!d&&l.collapsed&&m.nodeType==1&&l.startOffset==m.childNodes.length){p=new a.dom.TreeWalker(m.lastChild,m);for(j=m.lastChild;j;j=p.prev())if(j.nodeType==3){l.setStart(j,j.nodeValue.length),l.collapse(!0),k.setRng(l);return}}if(m&&f.dom.isBlock(m)&&!/^(TD|TH)$/.test(m.nodeName)&&d)if(m.childNodes.length==0||m.childNodes.length==1&&m.firstChild.nodeName=="BR"){j=m;while((j=j.previousSibling)&&!f.dom.isBlock(j));if(j){if(m!=g.firstChild){n=f.dom.doc.createTreeWalker(j,NodeFilter.SHOW_TEXT,null,i);while(o=n.nextNode())j=o;l=f.getDoc().createRange(),l.setStart(j,j.nodeValue?j.nodeValue.length:0),l.setEnd(j,j.nodeValue?j.nodeValue.length:0),k.setRng(l),f.dom.remove(m)}return b.cancel(c)}}}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each,e=a.extend;a.create("tinymce.ControlManager",{ControlManager:function(b,c){var e=this,f;c=c||{},e.editor=b,e.controls={},e.onAdd=new a.util.Dispatcher(e),e.onPostRender=new a.util.Dispatcher(e),e.prefix=c.prefix||b.id+"_",e._cls={},e.onPostRender.add(function(){d(e.controls,function(a){a.postRender()})})},get:function(a){return this.controls[this.prefix+a]||this.controls[a]},setActive:function(a,b){var c=null;return(c=this.get(a))&&c.setActive(b),c},setDisabled:function(a,b){var c=null;return(c=this.get(a))&&c.setDisabled(b),c},add:function(a){var b=this;return a&&(b.controls[a.id]=a,b.onAdd.dispatch(a,b)),a},createControl:function(a){var b,c=this,e=c.editor;d(e.plugins,function(d){if(d.createControl){b=d.createControl(a,c);if(b)return!1}});switch(a){case"|":case"separator":return c.createSeparator()}return!b&&e.buttons&&(b=e.buttons[a])?c.createButton(a,b):c.add(b)},createDropMenu:function(b,c,d){var f=this,g=f.editor,h,i,j,k;c=e({"class":"mceDropDown",constrain:g.settings.constrain_menus},c),c["class"]=c["class"]+" "+g.getParam("skin")+"Skin";if(j=g.getParam("skin_variant"))c["class"]+=" "+g.getParam("skin")+"Skin"+j.substring(0,1).toUpperCase()+j.substring(1);return b=f.prefix+b,k=d||f._cls.dropmenu||a.ui.DropMenu,h=f.controls[b]=new k(b,c),h.onAddItem.add(function(a,b){var c=b.settings;c.title=g.getLang(c.title,c.title),c.onclick||(c.onclick=function(a){c.cmd&&g.execCommand(c.cmd,c.ui||!1,c.value)})}),g.onRemove.add(function(){h.destroy()}),a.isIE&&(h.onShowMenu.add(function(){g.focus(),i=g.selection.getBookmark(1)}),h.onHideMenu.add(function(){i&&(g.selection.moveToBookmark(i),i=0)})),f.add(h)},createListBox:function(b,d,f){function l(b){return b.settings.use_accessible_selects&&!a.isGecko}var g=this,h=g.editor,i,j,k;return g.get(b)?null:
(d.title=h.translate(d.title),d.scope=d.scope||h,d.onselect||(d.onselect=function(a){h.execCommand(d.cmd,d.ui||!1,a||d.value)}),d=e({title:d.title,"class":"mce_"+b,scope:d.scope,control_manager:g},d),b=g.prefix+b,h.settings.use_native_selects||l(h)?j=new a.ui.NativeListBox(b,d):(k=f||g._cls.listbox||a.ui.ListBox,j=new k(b,d,h)),g.controls[b]=j,a.isWebKit&&j.onPostRender.add(function(a,b){c.add(b,"mousedown",function(){h.bookmark=h.selection.getBookmark(1)}),c.add(b,"focus",function(){h.selection.moveToBookmark(h.bookmark),h.bookmark=null})}),j.hideMenu&&h.onMouseDown.add(j.hideMenu,j),g.add(j))},createButton:function(b,c,d){var f=this,g=f.editor,h,i,j;return f.get(b)?null:(c.title=g.translate(c.title),c.label=g.translate(c.label),c.scope=c.scope||g,!c.onclick&&!c.menu_button&&(c.onclick=function(){g.execCommand(c.cmd,c.ui||!1,c.value)}),c=e({title:c.title,"class":"mce_"+b,unavailable_prefix:g.getLang("unavailable",""),scope:c.scope,control_manager:f},c),b=f.prefix+b,c.menu_button?(j=d||f._cls.menubutton||a.ui.MenuButton,i=new j(b,c,g),g.onMouseDown.add(i.hideMenu,i)):(j=f._cls.button||a.ui.Button,i=new j(b,c,g)),f.add(i))},createMenuButton:function(a,b,c){return b=b||{},b.menu_button=1,this.createButton(a,b,c)},createSplitButton:function(b,c,d){var f=this,g=f.editor,h,i,j;return f.get(b)?null:(c.title=g.translate(c.title),c.scope=c.scope||g,c.onclick||(c.onclick=function(a){g.execCommand(c.cmd,c.ui||!1,a||c.value)}),c.onselect||(c.onselect=function(a){g.execCommand(c.cmd,c.ui||!1,a||c.value)}),c=e({title:c.title,"class":"mce_"+b,scope:c.scope,control_manager:f},c),b=f.prefix+b,j=d||f._cls.splitbutton||a.ui.SplitButton,i=f.add(new j(b,c,g)),g.onMouseDown.add(i.hideMenu,i),i)},createColorSplitButton:function(b,c,d){var f=this,g=f.editor,h,i,j,k;return f.get(b)?null:(c.title=g.translate(c.title),c.scope=c.scope||g,c.onclick||(c.onclick=function(b){a.isIE&&(k=g.selection.getBookmark(1)),g.execCommand(c.cmd,c.ui||!1,b||c.value)}),c.onselect||(c.onselect=function(a){g.execCommand(c.cmd,c.ui||!1,a||c.value)}),c=e({title:c.title,"class":"mce_"+b,menu_class:g.getParam("skin")+"Skin",scope:c.scope,more_colors_title:g.getLang("more_colors")},c),b=f.prefix+b,j=d||f._cls.colorsplitbutton||a.ui.ColorSplitButton,i=new j(b,c,g),g.onMouseDown.add(i.hideMenu,i),g.onRemove.add(function(){i.destroy()}),a.isIE&&(i.onShowMenu.add(function(){g.focus(),k=g.selection.getBookmark(1)}),i.onHideMenu.add(function(){k&&(g.selection.moveToBookmark(k),k=0)})),f.add(i))},createToolbar:function(b,c,d){var e,f=this,g;return b=f.prefix+b,g=d||f._cls.toolbar||a.ui.Toolbar,e=new g(b,c,f.editor),f.get(b)?null:f.add(e)},createToolbarGroup:function(b,c,d){var e,f=this,g;return b=f.prefix+b,g=d||this._cls.toolbarGroup||a.ui.ToolbarGroup,e=new g(b,c,f.editor),f.get(b)?null:f.add(e)},createSeparator:function(b){var c=b||this._cls.separator||a.ui.Separator;return new c},setControlType:function(a,b){return this._cls[a.toLowerCase()]=b},destroy:function(){d(this.controls,function(a){a.destroy()}),this.controls=null}})}(tinymce),function(a){var b=a.util.Dispatcher,c=a.each,d=a.isIE,e=a.isOpera;a.create("tinymce.WindowManager",{WindowManager:function(a){var c=this;c.editor=a,c.onOpen=new b(c),c.onClose=new b(c),c.params={},c.features={}},open:function(b,f){var g=this,h="",i,j,k=g.editor.settings.dialog_type=="modal",l,m,n,o=a.DOM.getViewPort(),p;b=b||{},f=f||{},m=e?o.w:screen.width,n=e?o.h:screen.height,b.name=b.name||"mc_"+(new Date).getTime(),b.width=parseInt(b.width||320),b.height=parseInt(b.height||240),b.resizable=!0,b.left=b.left||parseInt(m/2)-b.width/2,b.top=b.top||parseInt(n/2)-b.height/2,f.inline=!1,f.mce_width=b.width,f.mce_height=b.height,f.mce_auto_focus=b.auto_focus,k&&d&&(b.center=!0,b.help=!1,b.dialogWidth=b.width+"px",b.dialogHeight=b.height+"px",b.scroll=b.scrollbars||!1),c(b,function(b,c){a.is(b,"boolean")&&(b=b?"yes":"no"),/^(name|url)$/.test(c)||(d&&k?h+=(h?";":"")+c+":"+b:h+=(h?",":"")+c+"="+b)}),g.features=b,g.params=f,g.onOpen.dispatch(g,b,f),p=b.url||b.file,p=a._addVer(p);try{d&&k?(l=1,window.showModalDialog(p,window,h)):l=window.open(p,b.name,h)}catch(q){}l||alert(g.editor.getLang("popup_blocked"))},close:function(a){a.close(),this.onClose.dispatch(this)},createInstance:function(b,c,d,e,f,g){var h=a.resolve(b);return new h(c,d,e,f,g)},confirm:function(a,b,c,d){d=d||window,b.call(c||this,d.confirm(this._decode(this.editor.getLang(a,a))))},alert:function(a,b,c,d){var e=this;d=d||window,d.alert(e._decode(e.editor.getLang(a,a))),b&&b.call(c||e)},resizeBy:function(a,b,c){c.resizeBy(a,b)},_decode:function(b){return a.DOM.decode(b).replace(/\\n/g,"\n")}})}(tinymce),function(a){a.Formatter=function(b){function r(a){return a instanceof Array}function s(a,b){return e.getParents(a,b,e.getRoot())}function t(a){return a.nodeType===1&&(a.face==="mceinline"||a.style.fontFamily==="mceinline")}function u(a){return a?c[a]:c}function v(a,b){a&&(typeof a!="string"?d(a,function(a,b){v(b,a)}):(b=b.length?b:[b],d(b,function(a){a.deep===q&&(a.deep=!a.selector),a.split===q&&(a.split=!a.selector||a.inline),a.remove===q&&a.selector&&!a.inline&&(a.remove="none"),a.selector&&a.inline&&(a.mixed=!0,a.block_expand=!0),typeof a.classes=="string"&&(a.classes=a.classes.split(/\s+/))}),c[a]=b))}function y(c,k,l){function w(a){var b=a.startContainer,c=a.startOffset,d,e;if(b.nodeType==1||b.nodeValue===""){b=b.nodeType==1?b.childNodes[c]:b;if(b){d=new g(b,b.parentNode);for(e=d.current();e;e=d.next())if(e.nodeType==3&&!J(e)){a.setStart(e,0);break}}}return a}function y(a,b){b=b||n,a&&(b.onformat&&b.onformat(a,b,k,l),d(b.styles,function(b,c){e.setStyle(a,c,I(b,k))}),d(b.attributes,function(b,c){e.setAttrib(a,c,I(b,k))}),d(b.classes,function(b){b=I(b,k),e.hasClass(a,b)||e.addClass(a,b)}))}function z(){function a(a,b){var c=new g(b);for(l=c.current();l;l=c.prev())if(l.childNodes.length>1||l==a)return l}var c=b.selection.getRng(),d=c.startContainer,e=c.endContainer;if(d!=e&&c.endOffset==0){var f=a(d,e),h=f.nodeType==3?f.length:f.childNodes.length;c.setEnd(f,h)}return c}function A(b,c,f,g,h){var i=[],j=-1,k,l=-1,m=-1,n;return d(b.childNodes,function(a,b){if(a.nodeName==="UL"||a.nodeName==="OL")return j=b,k=a,!1}),d(b.childNodes,function(a,b){a.nodeName==="SPAN"&&e.getAttrib(a,"data-mce-type")=="bookmark"&&(a.id==c.id+"_start"?l=b:a.id==c.id+"_end"&&(m=b))}),j<=0||l<j&&m>j?(d(a.grep(b.childNodes),h),0):(n=f.cloneNode(o),d(a.grep(b.childNodes),function(a,b){if(l<j&&b<j||l>j&&b>j)i.push(a),a.parentNode.removeChild(a)}),l<j?b.insertBefore(n,k):l>j&&b.insertBefore(n,k.nextSibling),g.push(n),d(i,function(a){n.appendChild(a)}),n)}function C(b,f,g){var l=[],q,r;q=n.inline||n.block,r=e.create(q),y(r),h.walk(b,function(b){function j(b){var p=b.nodeName.toLowerCase(),s=b.parentNode.nodeName.toLowerCase(),u;if(G(p,"br")){h=0,n.block&&e.remove(b);return}if(n.wrapper&&B(b,c,k)){h=0;return}if(n.block&&!n.wrapper&&R(p)){b=e.rename(b,q),y(b),l.push(b),h=0;return}if(n.selector){d(m,function(a){if("collapsed"in a&&a.collapsed!==v)return;e.is(b,a.selector)&&!t(b)&&(y(b,a),u=!0)});if(!n.inline||u){h=0;return}}!i(q,p)||!i(s,q)||!g&&b.nodeType===3&&b.nodeValue.length===1&&b.nodeValue.charCodeAt(0)===65279||b.id==="_mce_caret"?p=="li"&&f?h=A(b,f,r,l,j):(h=0,d(a.grep(b.childNodes),j),h=0):(h||(h=r.cloneNode(o),b.parentNode.insertBefore(h,b),l.push(h)),h.appendChild(b))}var h;d(b,j)}),n.wrap_links===!1&&d(l,function(b){function c(b){var e,f,g;if(b.nodeName==="A"){f=r.cloneNode(o),l.push(f),g=a.grep(b.childNodes);for(e=0;e<g.length;e++)f.appendChild(g[e]);b.appendChild(f)}d(a.grep(b.childNodes),c)}c(b)}),d(l,function(a){function f(a){var b=0;return d(a.childNodes,function(a){!J(a)&&!P(a)&&b++}),b}function g(a){var b,c;return d(a.childNodes,function(a){if(a.nodeType==1&&!P(a)&&!t(a))return b=a,o}),b&&F(b,n)&&(c=b.cloneNode(o),y(c),e.replace(c,a,p),e.remove(b,1)),c||a}var b;b=f(a);if((l.length>1||!j(a))&&b===0){e.remove(a,1);return}if(n.inline||n.wrapper){!n.exact&&b===1&&(a=g(a)),d(m,function(b){d(e.select(b.inline,a),function(a){var c;if(b.wrap_links===!1){c=a.parentNode;do if(c.nodeName==="A")return;while(c=c.parentNode)}M(b,k,a,b.exact?a:null)})});if(B(a.parentNode,c,k))return e.remove(a,1),a=0,p;n.merge_with_parents&&e.getParent(a.parentNode,function(b){if(B(b,c,k))return e.remove(a,1),a=0,p}),a&&n.merge_siblings!==!1&&(a=Q(O(a),a),a=Q(a,O(a,p)))}})}var m=u(c),n=m[0],q,r,s,v=f.isCollapsed();if(n)if(l)l.nodeType?(r=e.createRng(),r.setStartBefore(l),r.setEndAfter(l),C(L(r,m),null,!0)):C(l,null,!0);else if(!v||!n.inline||e.select("td.mceSelected,th.mceSelected").length){var D=b.selection.getNode();b.selection.setRng(z()),q=f.getBookmark(),C(L(f.getRng(p),m),q),n.styles&&(n.styles.color||n.styles.textDecoration)&&(a.walk(D,x,"childNodes"),x(D)),f.moveToBookmark(q),f.setRng(w(f.getRng(p))),b.nodeChanged()}else T("apply",c,k)}function z(c,i,k){function x(a){var b=a.startContainer,c=a.startOffset,d,h,i,j;b.nodeType==3&&c>=b.nodeValue.length-1&&(b=b.parentNode,c=l(b)+1);if(b.nodeType==1){i=b.childNodes,b=i[Math.min(c,i.length-1)],d=new g(b),c>i.length-1&&d.next();for(h=d.current();h;h=d.next())if(h.nodeType==3&&!J(h)){j=e.create("a",null,m),h.parentNode.insertBefore(j,h),a.setStart(h,0),f.setRng(a),e.remove(j);return}}}function y(b){var c,d,e;c=a.grep(b.childNodes);for(d=0,e=n.length;d<e;d++)if(M(n[d],i,b,b))break;if(q.deep)for(d=0,e=c.length;d<e;d++)y(c[d])}function z(a){var b;return d(s(a.parentNode).reverse(),function(a){var d;!b&&a.id!="_start"&&a.id!="_end"&&(d=B(a,c,i),d&&d.split!==!1&&(b=a))}),b}function A(a,b,c,d){var f,g,h,k,l,m;if(a){m=a.parentNode;for(f=b.parentNode;f&&f!=m;f=f.parentNode){g=f.cloneNode(o);for(l=0;l<n.length;l++)if(M(n[l],i,g,g)){g=0;break}g&&(h&&g.appendChild(h),k||(k=g),h=g)}d&&(!q.mixed||!j(a))&&(b=e.split(a,b)),h&&(c.parentNode.insertBefore(h,c),k.appendChild(c))}return b}function D(a){return A(z(a),a,a,!0)}function E(a){var b=e.get(a?"_start":"_end"),c=b[a?"firstChild":"lastChild"];return P(c)&&(c=c[a?"firstChild":"lastChild"]),e.remove(b,!0),c}function F(a){var c,e;a=L(a,n,p),q.split&&(c=S(a,p),e=S(a),c!=e?(c=K(c,"span",{id:"_start","data-mce-type":"bookmark"}),e=K(e,"span",{id:"_end","data-mce-type":"bookmark"}),D(c),D(e),c=E(p),e=E()):c=e=D(c),a.startContainer=c.parentNode,a.startOffset=l(c),a.endContainer=e.parentNode,a.endOffset=l(e)+1),h.walk(a,function(a){d(a,function(a){y(a),a.nodeType===1&&b.dom.getStyle(a,"text-decoration")==="underline"&&a.parentNode&&w(a.parentNode)==="underline"&&M({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,a)})})}var n=u(c),q=n[0],r,t,v;if(k){k.nodeType?(v=e.createRng(),v.setStartBefore(k),v.setEndAfter(k),F(v)):F(k);return}!f.isCollapsed()||!q.inline||e.select("td.mceSelected,th.mceSelected").length?(r=f.getBookmark(),F(f.getRng(p)),f.moveToBookmark(r),q.inline&&C(c,i,f.getStart())&&x(f.getRng(!0)),b.nodeChanged()):T("remove",c,i),a.isWebKit&&b.execCommand("mceCleanup")}function A(a,b,c){var d=u(a);!C(a,b,c)||"toggle"in d[0]&&!d[0].toggle?y(a,b,c):z(a,b,c)}function B(a,b,c,d){function j(a,b,f){var g,h,i=b[f],j;if(b.onmatch)return b.onmatch(a,b,f);if(i)if(i.length===q){for(g in i)if(i.hasOwnProperty(g)){f==="attributes"?h=e.getAttrib(a,g):h=H(a,g);if(d&&!h&&!b.exact)return;if((!d||b.exact)&&!G(h,I(i[g],c)))return}}else for(j=0;j<i.length;j++)if(f==="attributes"?e.getAttrib(a,i[j]):H(a,i[j]))return b;return b}var f=u(b),g,h,i;if(f&&a)for(h=0;h<f.length;h++){g=f[h];if(F(a,g)&&j(a,g,"attributes")&&j(a,g,"styles")){if(i=g.classes)for(h=0;h<i.length;h++)if(!e.hasClass(a,i[h]))return;return g}}}function C(a,b,c){function g(c){return c=e.getParent(c,function(c){return!!B(c,a,b,!0)}),B(c,a,b)}var d;return c?g(c):(c=f.getNode(),g(c)?p:(d=f.getStart(),d!=c&&g(d)?p:o))}function D(a,b){var c,d=[],g={},h,i,j;return c=f.getStart(),e.getParent(c,function(c){var e,f;for(e=0;e<a.length;e++)f=a[e],!g[f]&&B(c,f,b)&&(g[f]=!0,d.push(f))}),d}function E(a){var b=u(a),c,d,g,h,i;if(b){c=f.getStart(),d=s(c);for(h=b.length-1;h>=0;h--){i=b[h].selector;if(!i)return p;for(g=d.length-1;g>=0;g--)if(e.is(d[g],i))return p}}return o}function F(a,b){if(G(a,b.inline))return p;if(G(a,b.block))return p;if(b.selector)return e.is(a,b.selector)}function G(a,b){return a=a||"",b=b||"",a=""+(a.nodeName||a),b=""+(b.nodeName||b),a.toLowerCase()==b.toLowerCase()}function H(a,b){var c=e.getStyle(a,b);if(b=="color"||b=="backgroundColor")c=e.toHex(c);return b=="fontWeight"&&c==700&&(c="bold"),""+c}function I(a,b){return typeof a!="string"?a=a(b):b&&(a=a.replace(/%(\w+)/g,function(a,c){return b[c]||a})),a}function J(a){return a&&a.nodeType===3&&/^([\t \r\n]+|)$/.test(a.nodeValue)}function K(a,b,c){var d=e.create(b,c);return a.parentNode.insertBefore(d,a),d.appendChild(a),d}function L(a,c,d){function t(a){var b,d,g,l,m;b=d=a?f:i,m=a?"previousSibling":"nextSibling",root=e.getRoot();if(b.nodeType==3&&!J(b))if(a?h>0:k<b.nodeValue.length)return b;for(;;){if(d==root||!c[0].block_expand&&j(d))return d;for(l=d[m];l;l=l[m])if(!P(l)&&!J(l))return d;d=d.parentNode}return b}function u(a,b){b===q&&(b=a.nodeType===3?a.length:a.childNodes.length);while(a&&a.hasChildNodes())a=a.childNodes[b],a&&(b=a.nodeType===3?a.length:a.childNodes.length);return{node:a,offset:b}}var f=a.startContainer,h=a.startOffset,i=a.endContainer,k=a.endOffset,m,n,p,r;f.nodeType==1&&f.hasChildNodes()&&(n=f.childNodes.length-1,f=f.childNodes[h>n?n:h],f.nodeType==3&&(h=0)),i.nodeType==1&&i.hasChildNodes()&&(n=i.childNodes.length-1,i=i.childNodes[k>n?n:k-1],i.nodeType==3&&(k=i.nodeValue.length));if(P(f.parentNode)||P(f))f=P(f)?f:f.parentNode,f=f.nextSibling||f,f.nodeType==3&&(h=0);if(P(i.parentNode)||P(i))i=P(i)?i:i.parentNode,i=i.previousSibling||i,i.nodeType==3&&(k=i.length);if(c[0].inline){if(a.collapsed){function v(a,c,f){function m(a,b){var c,e,g=a.nodeValue;return typeof b=="undefined"&&(b=f?g.length:0),f?(c=g.lastIndexOf(" ",b),e=g.lastIndexOf(" ",b),c=c>e?c:e,c!==-1&&!d&&c++):(c=g.indexOf(" ",b),e=g.indexOf(" ",b),c=c!==-1&&(e===-1||c<e)?c:e),c}var h,i,k,l;if(a.nodeType===3){k=m(a,c);if(k!==-1)return{container:a,offset:k};l=a}h=new g(a,e.getParent(a,j)||b.getBody());while(i=h[f?"prev":"next"]())if(i.nodeType===3){l=i,k=m(i);if(k!==-1)return{container:i,offset:k}}else if(j(i))break;if(l)return f?c=0:c=l.length,{container:l,offset:c}}r=v(f,h,!0),r&&(f=r.container,h=r.offset),r=v(i,k),r&&(i=r.container,k=r.offset)}p=u(i,k);if(p.node){while(p.node&&p.offset===0&&p.node.previousSibling)p=u(p.node.previousSibling);p.node&&p.offset>0&&p.node.nodeType===3&&p.node.nodeValue.charAt(p.offset-1)===" "&&(p.offset>1?(i=p.node,i.splitText(p.offset-1)):!p.node.previousSibling)}}if(c[0].inline||c[0].block_expand){if(!c[0].inline||f.nodeType!=3||h===0)f=t(!0);if(!c[0].inline||i.nodeType!=3||k===i.nodeValue.length)i=t()}if(c[0].selector&&c[0].expand!==o&&!c[0].inline){function w(b,d){var f,g,h,i;b.nodeType==3&&b.nodeValue.length==0&&b[d]&&(b=b[d]),f=s(b);for(g=0;g<f.length;g++)for(h=0;h<c.length;h++){i=c[h];if("collapsed"in i&&i.collapsed!==a.collapsed)continue;if(e.is(f[g],i.selector))return f[g]}return b}f=w(f,"previousSibling"),i=w(i,"nextSibling")}if(c[0].block||c[0].selector){function x(a,b,d){var f;c[0].wrapper||(f=e.getParent(a,c[0].block)),f||(f=e.getParent(a.nodeType==3?a.parentNode:a,j)),f&&c[0].wrapper&&(f=s(f,"ul,ol").reverse()[0]||f);if(!f){f=a;while(f[b]&&!j(f[b])){f=f[b];if(G(f,"br"))break}}return f||a}f=x(f,"previousSibling"),i=x(i,"nextSibling"),c[0].block&&(j(f)||(f=t(!0)),j(i)||(i=t()))}return f.nodeType==1&&(h=l(f),f=f.parentNode),i.nodeType==1&&(k=l(i)+1,i=i.parentNode),{startContainer:f,startOffset:h,endContainer:i,endOffset:k}}function M(a,b,c,f){var g,h,i;if(!F(c,a))return o;if(a.remove!="all"){d(a.styles,function(a,d){a=I(a,b),typeof d=="number"&&(d=a,f=0),(!f||G(H(f,d),a))&&e.setStyle(c,d,""),i=1}),i&&e.getAttrib(c,"style")==""&&(c.removeAttribute("style"),c.removeAttribute("data-mce-style")),d(a.attributes,function(a,g){var h;a=I(a,b),typeof g=="number"&&(g=a,f=0);if(!f||G(e.getAttrib(f,g),a)){if(g=="class"){a=e.getAttrib(c,g);if(a){h="",d(a.split(/\s+/),function(a){/mce\w+/.test(a)&&(h+=(h?" ":"")+a)});if(h){e.setAttrib(c,g,h);return}}}g=="class"&&c.removeAttribute("className"),n.test(g)&&c.removeAttribute("data-mce-"+g),c.removeAttribute(g)}}),d(a.classes,function(a){a=I(a,b),(!f||e.hasClass(f,a))&&e.removeClass(c,a)}),h=e.getAttribs(c);for(g=0;g<h.length;g++)if(h[g].nodeName.indexOf("_")!==0)return o}if(a.remove!="none")return N(c,a),p}function N(b,c){var f=b.parentNode,g;if(c.block)if(!k){function h(a,b,c){return a=O(a,b,c),!a||a.nodeName=="BR"||j(a)}j(b)&&!j(f)&&(!h(b,o)&&!h(b.firstChild,p,1)&&b.insertBefore(e.create("br"),b.firstChild),!h(b,p)&&!h(b.lastChild,o,1)&&b.appendChild(e.create("br")))}else f==e.getRoot()&&(!c.list_block||!G(b,c.list_block))&&d(a.grep(b.childNodes),function(a){i(k,a.nodeName.toLowerCase())?g?g.appendChild(a):g=K(a,k):g=0});if(c.selector&&c.inline&&!G(c.inline,b))return;e.remove(b,1)}function O(a,b,c){if(a){b=b?"nextSibling":"previousSibling";for(a=c?a:a[b];a;a=a[b])if(a.nodeType==1||!J(a))return a}}function P(a){return a&&a.nodeType==1&&a.getAttribute("data-mce-type")=="bookmark"}function Q(b,c){function i(a,b){function c(a){var b={};return d(e.getAttribs(a),function(c){var d=c.nodeName.toLowerCase();d.indexOf("_")!==0&&d!=="style"&&(b[d]=e.getAttrib(a,d))}),b}function f(a,b){var c,d;for(d in a)if(a.hasOwnProperty(d)){c=b[d];if(c===q)return o;if(a[d]!=c)return o;delete b[d]}for(d in b)if(b.hasOwnProperty(d))return o;return p}return a.nodeName!=b.nodeName?o:f(c(a),c(b))?f(e.parseStyle(e.getAttrib(a,"style")),e.parseStyle(e.getAttrib(b,"style")))?p:o:o}var f,g,h;if(b&&c){function j(a,b){for(g=a;g;g=g[b]){if(g.nodeType==3&&g.nodeValue.length!==0)return a;if(g.nodeType==1&&!P(g))return g}return a}b=j(b,"previousSibling"),c=j(c,"nextSibling");if(i(b,c)){for(g=b.nextSibling;g&&g!=c;)h=g,g=g.nextSibling,b.appendChild(h);return e.remove(c),d(a.grep(c.childNodes),function(a){b.appendChild(a)}),b}}return c}function R(a){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(a)}function S(a,c){var d,e,f,h;return d=a[c?"startContainer":"endContainer"],e=a[c?"startOffset":"endOffset"],d.nodeType==1&&(f=d.childNodes.length-1,!c&&e&&e--,d=d.childNodes[e>f?f:e]),d.nodeType===3&&c&&e>=d.nodeValue.length&&(d=(new g(d,b.getBody())).next()||d),d.nodeType===3&&!c&&e==0&&(d=(new g(d,b.getBody())).prev()||d),d}function T(c,d,i){function n(a){var c=e.create("span",{id:k,"data-mce-bogus":!0,style:l?"color:red":""});return a&&c.appendChild(b.getDoc().createTextNode(j)),c}function o(a,b){while(a){if(a.nodeType===3&&a.nodeValue!==j||a.childNodes.length>1)return!1;b&&a.nodeType===1&&b.push(a),a=a.firstChild}return!0}function p(a){while(a){if(a.id===k)return a;a=a.parentNode}}function q(a){var b;if(a){b=new g(a,a);for(a=b.current();a;a=b.next())if(a.nodeType===3)return a}}function r(a,b){var c,d;if(!a){a=p(f.getStart());if(!a)while(a=e.get(k))r(a,!1)}else d=f.getRng(!0),o(a)?(b!==!1&&(d.setStartBefore(a),d.setEndBefore(a)),e.remove(a)):(c=q(a),c=c.deleteData(0,1),e.remove(a,1)),f.setRng(d)}function s(){var a,b,c,e,g,k,l;a=f.getRng(!0),e=a.startOffset,k=a.startContainer,l=k.nodeValue,b=p(f.getStart()),b&&(c=q(b)),l&&e>0&&e<l.length&&/\w/.test(l.charAt(e))&&/\w/.test(l.charAt(e-1))?(g=f.getBookmark(),a.collapse(!0),a=L(a,u(d)),a=h.split(a),y(d,i,a),f.moveToBookmark(g)):(!b||c.nodeValue!==j?(b=n(!0),c=b.firstChild,a.insertNode(b),e=1,y(d,i,b)):y(d,i,b),f.setCursorLocation(c,e))}function t(){var a=f.getRng(!0),b,c,g,k,l,m,o=[],p,q;b=a.startContainer,c=a.startOffset,l=b;if(b.nodeType==3){if(c!=b.nodeValue.length||b.nodeValue===j)k=!0;l=l.parentNode}while(l){if(B(l,d,i)){m=l;break}l.nextSibling&&(k=!0),o.push(l),l=l.parentNode}if(!m)return;if(k)g=f.getBookmark(),a.collapse(!0),a=L(a,u(d),!0),a=h.split(a),z(d,i,a),f.moveToBookmark(g);else{q=n(),l=q;for(p=o.length-1;p>=0;p--)l.appendChild(o[p].cloneNode(!1)),l=l.firstChild;l.appendChild(e.doc.createTextNode(j)),l=l.firstChild,e.insertAfter(q,m),f.setCursorLocation(l,1)}}var j,k="_mce_caret",l=b.settings.caret_debug;j=a.isGecko?"​":m,b.onBeforeGetContent.addToTop(function(){var a=[],b;if(o(p(f.getStart()),a)){b=a.length;while(b--)e.setAttrib(a[b],"data-mce-bogus","1")}}),a.each("onMouseUp onKeyUp".split(" "),function(a){b[a].addToTop(function(){r()})}),b.onKeyDown.addToTop(function(a,b){var c=b.keyCode;(c==8||c==37||c==39)&&r(p(f.getStart()))}),c=="apply"?s():t()}var c={},d=a.each,e=b.dom,f=b.selection,g=a.dom.TreeWalker,h=new a.dom.RangeUtils(e),i=b.schema.isValidChild,j=e.isBlock,k=b.settings.forced_root_block,l=e.nodeIndex,m="﻿",n=/^(src|href|style)$/,o=!1,p=!0,q,w=function(a){var c;return b.dom.getParent(a,function(a){return c=b.dom.getStyle(a,"text-decoration"),c&&c!=="none"}),c},x=function(a){var c;a.nodeType===1&&a.parentNode&&a.parentNode.nodeType===1&&(c=w(a.parentNode),b.dom.getStyle(a,"color")&&c?b.dom.setStyle(a,"text-decoration",c):b.dom.getStyle(a,"textdecoration")===c&&b.dom.setStyle(a,"text-decoration",null))};a.extend(this,{get:u,register:v,apply:y,remove:z,toggle:A,match:C,matchAll:D,matchNode:B,canApply:E})}}(tinymce),tinymce.onAddEditor.add(function(a,b){var c,d,e,f=b.settings;if(f.inline_styles){d=a.explode(f.font_size_legacy_values);function g(b,c){a.each(c,function(a,c){a&&e.setStyle(b,c,a)}),e.rename(b,"span")}c={font:function(a,b){g(b,{backgroundColor:b.style.backgroundColor,color:b.color,fontFamily:b.face,fontSize:d[parseInt(b.size)-1]})},u:function(a,b){g(b,{textDecoration:"underline"})},strike:function(a,b){g(b,{textDecoration:"line-through"})}};function h(d,g){e=d.dom,f.convert_fonts_to_spans&&a.each(e.select("font,u,strike",g.node),function(a){c[a.nodeName.toLowerCase()](b.dom,a)})}b.onPreProcess.add(h),b.onSetContent.add(h),b.onInit.add(function(){b.selection.onSetContent.add(h)})}}),function(a){var b=/^\s*|\s*$/g,c,d="B".replace(/A(.)|B/,"$1")==="$1",e={majorVersion:"3",minorVersion:"4.7",releaseDate:"2011-11-03",_init:function(){function l(a){return a.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(a.src)?(/_(src|dev)\.js/g.test(a.src)&&(b.suffix="_src"),(j=a.src.indexOf("?"))!=-1&&(b.query=a.src.substring(j+1)),b.baseURL=a.src.substring(0,a.src.lastIndexOf("/")),i&&b.baseURL.indexOf("://")==-1&&b.baseURL.indexOf("/")!==0&&(b.baseURL=i+b.baseURL),b.baseURL):null}var b=this,c=document,d=navigator,e=d.userAgent,f,g,h,i,j,k;b.isOpera=a.opera&&opera.buildNumber,b.isWebKit=/WebKit/.test(e),b.isIE=!b.isWebKit&&!b.isOpera&&/MSIE/gi.test(e)&&/Explorer/gi.test(d.appName),b.isIE6=b.isIE&&/MSIE [56]/.test(e),b.isIE7=b.isIE&&/MSIE [7]/.test(e),b.isIE8=b.isIE&&/MSIE [8]/.test(e),b.isIE9=b.isIE&&/MSIE [9]/.test(e),b.isGecko=!b.isWebKit&&/Gecko/.test(e),b.isMac=e.indexOf("Mac")!=-1,b.isAir=/adobeair/i.test(e),b.isIDevice=/(iPad|iPhone)/.test(e),b.isIOS5=b.isIDevice&&e.match(/AppleWebKit\/(\d*)/)[1]>=534;if(a.tinyMCEPreInit){b.suffix=tinyMCEPreInit.suffix,b.baseURL=tinyMCEPreInit.base,b.query=tinyMCEPreInit.query;return}b.suffix="",g=c.getElementsByTagName("base");for(f=0;f<g.length;f++)if(k=g[f].href)/^https?:\/\/[^\/]+$/.test(k)&&(k+="/"),i=k?k.match(/.*\//)[0]:"";g=c.getElementsByTagName("script");for(f=0;f<g.length;f++)if(l(g[f]))return;h=c.getElementsByTagName("head")[0];if(h){g=h.getElementsByTagName("script");for(f=0;f<g.length;f++)if(l(g[f]))return}return},is:function(a,b){return b?b=="array"&&a.hasOwnProperty&&a instanceof Array?!0:typeof a==b:a!==c},makeMap:function(a,b,c){var d;a=a||[],b=b||",",typeof a=="string"&&(a=a.split(b)),c=c||{},d=a.length;while(d--)c[a[d]]={};return c},each:function(a,b,d){var e,f;if(!a)return 0;d=d||a;if(a.length!==c){for(e=0,f=a.length;e<f;e++)if(b.call(d,a[e],e,a)===!1)return 0}else for(e in a)if(a.hasOwnProperty(e)&&b.call(d,a[e],e,a)===!1)return 0;return 1},trim:function(a){return(a?""+a:"").replace(b,"")},create:function(a,b,c){var d=this,e,f,g,h,i,j=0;a=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(a),g=a[3].match(/(^|\.)(\w+)$/i)[2],f=d.createNS(a[3].replace(/\.\w+$/,""),c);if(f[g])return;if(a[2]=="static"){f[g]=b,this.onCreate&&this.onCreate(a[2],a[3],f[g]);return}b[g]||(b[g]=function(){},j=1),f[g]=b[g],d.extend(f[g].prototype,b),a[5]&&(e=d.resolve(a[5]).prototype,h=a[5].match(/\.(\w+)$/i)[1],i=f[g],j?f[g]=function(){return e[h].apply(this,arguments)}:f[g]=function(){return this.parent=e[h],i.apply(this,arguments)},f[g].prototype[g]=f[g],d.each(e,function(a,b){f[g].prototype[b]=e[b]}),d.each(b,function(a,b){e[b]?f[g].prototype[b]=function(){return this.parent=e[b],a.apply(this,arguments)}:b!=g&&(f[g].prototype[b]=a)})),d.each(b["static"],function(a,b){f[g][b]=a}),this.onCreate&&this.onCreate(a[2],a[3],f[g].prototype)},walk:function(a,b,c,d){d=d||this,a&&(c&&(a=a[c]),e.each(a,function(a,g){if(b.call(d,a,g,c)===!1)return!1;e.walk(a,b,c,d)}))},createNS:function(b,c){var d,e;c=c||a,b=b.split(".");for(d=0;d<b.length;d++)e=b[d],c[e]||(c[e]={}),c=c[e];return c},resolve:function(b,c){var d,e;c=c||a,b=b.split(".");for(d=0,e=b.length;d<e;d++){c=c[b[d]];if(!c)break}return c},addUnload:function(b,c){var d=this;b={func:b,scope:c||this};if(!d.unloads){function e(){var b=d.unloads,c,g;if(b){for(g in b)c=b[g],c&&c.func&&c.func.call(c.scope,1);a.detachEvent?(a.detachEvent("onbeforeunload",f),a.detachEvent("onunload",e)):a.removeEventListener&&a.removeEventListener("unload",e,!1),d.unloads=c=b=w=e=0,a.CollectGarbage&&CollectGarbage()}}function f(){var b=document;if(b.readyState=="interactive"){function c(){b.detachEvent("onstop",c),e&&e(),b=0}b&&b.attachEvent("onstop",c),a.setTimeout(function(){b&&b.detachEvent("onstop",c)},0)}}a.attachEvent?(a.attachEvent("onunload",e),a.attachEvent("onbeforeunload",f)):a.addEventListener&&a.addEventListener("unload",e,!1),d.unloads=[b]}else d.unloads.push(b);return b},removeUnload:function(a){var b=this.unloads,c=null;return e.each(b,function(d,e){if(d&&d.func==a)return b.splice(e,1),c=a,!1}),c},explode:function(a,b){return a?e.map(a.split(b||","),e.trim):a},_addVer:function(a){var b;return this.query?(b=(a.indexOf("?")==-1?"?":"&")+this.query,a.indexOf("#")==-1?a+b:a.replace("#",b+"#")):a},_replace:function(a,b,e){return d?e.replace(a,function(){var a=b,d=arguments,e;for(e=0;e<d.length-2;e++)d[e]===c?a=a.replace(new RegExp("\\$"+e,"g"),""):a=a.replace(new RegExp("\\$"+e,"g"),d[e]);return a}):e.replace(a,b)}};e._init(),a.tinymce=a.tinyMCE=e}(window),function(a,b){var c=b.is,d=/^(href|src|style)$/i,e;if(!a&&window.console)return console.log("Load jQuery first!");b.$=a,b.adapter={patchEditor:function(b){function f(a,b){var d=this;return b&&d.removeAttr("data-mce-style"),c.css.apply(d,arguments)}function g(a,f){var g=this;return d.test(a)?f!==e?(g.each(function(c,d){b.dom.setAttrib(d,a,f)}),g):g.attr("data-mce-"+a):c.attr.apply(g,arguments)}function h(a){return function(c){return c&&(c=b.dom.processHTML(c)),a.call(this,c)}}function i(a){return a.css!==f&&(a.css=f,a.attr=g,a.html=h(c.html),a.append=h(c.append),a.prepend=h(c.prepend),a.after=h(c.after),a.before=h(c.before),a.replaceWith=h(c.replaceWith),a.tinymce=b,a.pushStack=function(){return i(c.pushStack.apply(this,arguments))}),a}var c=a.fn;b.$=function(c,d){var e=b.getDoc();return i(a(c||e,e||d))}}},b.extend=a.extend,b.extend(b,{map:a.map,grep:function(b,c){return a.grep(b,c||function(){return 1})},inArray:function(b,c){return a.inArray(c,b||[])}});var f={"tinymce.dom.DOMUtils":{select:function(b,c){var d=this;return a.find(b,d.get(c)||d.get(d.settings.root_element)||d.doc,[])},is:function(b,c){return a(this.get(b)).is(c)}}};b.onCreate=function(a,c,d){b.extend(d,f[c])}}(window.jQuery,tinymce),tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(a){this.scope=a||this,this.listeners=[]},add:function(a,b){return this.listeners.push({cb:a,scope:b||this.scope}),a},addToTop:function(a,b){return this.listeners.unshift({cb:a,scope:b||this.scope}),a},remove:function(a){var b=this.listeners,c=null;return tinymce.each(b,function(d,e){if(a==d.cb)return c=a,b.splice(e,1),!1}),c},dispatch:function(){var a,b=arguments,c,d=this.listeners,e;for(c=0;c<d.length;c++){e=d[c],a=e.cb.apply(e.scope,b);if(a===!1)break}return a}}),function(){var a=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(b,c){var d=this,e,f,g,h;b=tinymce.trim(b),c=d.settings=c||{};if(/^([\w\-]+):([^\/]{2})/i.test(b)||/^\s*#/.test(b)){d.source=b;return}b.indexOf("/")===0&&b.indexOf("//")!==0&&(b=(c.base_uri?c.base_uri.protocol||"http":"http")+"://mce_host"+b),/^[\w-]*:?\/\//.test(b)||(h=c.base_uri?c.base_uri.path:(new tinymce.util.URI(location.href)).directory,b=(c.base_uri&&c.base_uri.protocol||"http")+"://mce_host"+d.toAbsPath(h,b)),b=b.replace(/@@/g,"(mce_at)"),b=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(b),a(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(a,c){var e=b[c];e&&(e=e.replace(/\(mce_at\)/g,"@@")),d[a]=e});if(g=c.base_uri){d.protocol||(d.protocol=g.protocol),d.userInfo||(d.userInfo=g.userInfo),!d.port&&d.host=="mce_host"&&(d.port=g.port);if(!d.host||d.host=="mce_host")d.host=g.host;d.source=""}},setPath:function(a){var b=this;a=/^(.*?)\/?(\w+)?$/.exec(a),b.path=a[0],b.directory=a[1],b.file=a[2],b.source="",b.getURI()},toRelative:function(a){var b=this,c;return a==="./"?a:(a=new tinymce.util.URI(a,{base_uri:b}),a.host!="mce_host"&&b.host!=a.host&&a.host||b.port!=a.port||b.protocol!=a.protocol?a.getURI():(c=b.toRelPath(b.path,a.path),a.query&&(c+="?"+a.query),a.anchor&&(c+="#"+a.anchor),c))},toAbsolute:function(a,b){var a=new tinymce.util.URI(a,{base_uri:this});return a.getURI(this.host==a.host&&this.protocol==a.protocol?b:0)},toRelPath:function(a,b){var c,d=0,e="",f,g;a=a.substring(0,a.lastIndexOf("/")),a=a.split("/"),c=b.split("/");if(a.length>=c.length)for(f=0,g=a.length;f<g;f++)if(f>=c.length||a[f]!=c[f]){d=f+1;break}if(a.length<c.length)for(f=0,g=c.length;f<g;f++)if(f>=a.length||a[f]!=c[f]){d=f+1;break}if(d==1)return b;for(f=0,g=a.length-(d-1);f<g;f++)e+="../";for(f=d-1,g=c.length;f<g;f++)f!=d-1?e+="/"+c[f]:e+=c[f];return e},toAbsPath:function(b,c){var d,e=0,f=[],g,h;g=/\/$/.test(c)?"/":"",b=b.split("/"),c=c.split("/"),a(b,function(a){a&&f.push(a)}),b=f;for(d=c.length-1,f=[];d>=0;d--){if(c[d].length==0||c[d]==".")continue;if(c[d]==".."){e++;continue}if(e>0){e--;continue}f.push(c[d])}return d=b.length-e,d<=0?h=f.reverse().join("/"):h=b.slice(0,d).join("/")+"/"+f.reverse().join("/"),h.indexOf("/")!==0&&(h="/"+h),g&&h.lastIndexOf("/")!==h.length-1&&(h+=g),h},getURI:function(a){var b,c=this;if(!c.source||a)b="",a||(c.protocol&&(b+=c.protocol+"://"),c.userInfo&&(b+=c.userInfo+"@"),c.host&&(b+=c.host),c.port&&(b+=":"+c.port)),c.path&&(b+=c.path),c.query&&(b+="?"+c.query),c.anchor&&(b+="#"+c.anchor),c.source=b;return c.source}})}(),function(){var a=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(b){var c=this.get(b),d;return c&&a(c.split("&"),function(a){a=a.split("="),d=d||{},d[unescape(a[0])]=unescape(a[1])}),d},setHash:function(b,c,d,e,f,g){var h="";a(c,function(a,b){h+=(h?"&":"")+escape(b)+"="+escape(a)}),this.set(b,h,d,e,f,g)},get:function(a){var b=document.cookie,c,d=a+"=",e;if(!b)return;e=b.indexOf("; "+d);if(e==-1){e=b.indexOf(d);if(e!=0)return null}else e+=2;return c=b.indexOf(";",e),c==-1&&(c=b.length),unescape(b.substring(e+d.length,c))},set:function(a,b,c,d,e,f){document.cookie=a+"="+escape(b)+(c?"; expires="+c.toGMTString():"")+(d?"; path="+escape(d):"")+(e?"; domain="+e:"")+(f?"; secure":"")},remove:function(a,b){var c=new Date;c.setTime(c.getTime()-1e3),this.set(a,"",c,b,c)}})}(),function(){function serialize(a,b){var c,d,e;b=b||'"';if(a==null)return"null";e=typeof a;if(e=="string")return d="\bb\tt\nn\ff\rr\"\"''\\\\",b+a.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,e){return b==='"'&&a==="'"?a:(c=d.indexOf(e),c+1?"\\"+d.charAt(c+1):(a=e.charCodeAt().toString(16),"\\u"+"0000".substring(a.length)+a))})+b;if(e=="object"){if(a.hasOwnProperty&&a instanceof Array){for(c=0,d="[";c<a.length;c++)d+=(c>0?",":"")+serialize(a[c],b);return d+"]"}d="{";for(c in a)a.hasOwnProperty(c)&&(d+=typeof a[c]!="function"?(d.length>1?","+b:b)+c+b+":"+serialize(a[c],b):"");return d+"}"}return""+a}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}}(),tinymce.create("static tinymce.util.XHR",{send:function(a){function f(a){b=0;try{b=new ActiveXObject(a)}catch(c){}return b}var b,c,d=window,e=0;a.scope=a.scope||this,a.success_scope=a.success_scope||a.scope,a.error_scope=a.error_scope||a.scope,a.async=a.async===!1?!1:!0,a.data=a.data||"",b=d.XMLHttpRequest?new XMLHttpRequest:f("Microsoft.XMLHTTP")||f("Msxml2.XMLHTTP");if(b){b.overrideMimeType&&b.overrideMimeType(a.content_type),b.open(a.type||(a.data?"POST":"GET"),a.url
,a.async),a.content_type&&b.setRequestHeader("Content-Type",a.content_type),b.setRequestHeader("X-Requested-With","XMLHttpRequest"),b.send(a.data);function g(){!a.async||b.readyState==4||e++>1e4?(a.success&&e<1e4&&b.status==200?a.success.call(a.success_scope,""+b.responseText,b,a):a.error&&a.error.call(a.error_scope,e>1e4?"TIMED_OUT":"GENERAL",b,a),b=null):d.setTimeout(g,10)}if(!a.async)return g();c=d.setTimeout(g,10)}}}),function(){var a=tinymce.extend,b=tinymce.util.JSON,c=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(b){this.settings=a({},b),this.count=0},send:function(d){var e=d.error,f=d.success;d=a(this.settings,d),d.success=function(a,c){a=b.parse(a),typeof a=="undefined"&&(a={error:"JSON Parse error."}),a.error?e.call(d.error_scope||d.scope,a.error,c):f.call(d.success_scope||d.scope,a.result)},d.error=function(a,b){e&&e.call(d.error_scope||d.scope,a,b)},d.data=b.serialize({id:d.id||"c"+this.count++,method:d.method,params:d.params}),d.content_type="application/json",c.send(d)},"static":{sendRPC:function(a){return(new tinymce.util.JSONRequest).send(a)}}})}(),function(a){a.VK={DELETE:46,BACKSPACE:8,ENTER:13,TAB:9,SPACEBAR:32,UP:38,DOWN:40}}(tinymce),function(a){function e(b){var e=b.dom,f=b.selection;b.onKeyDown.add(function(b,g){var h,i,j,k,l;l=g.keyCode==d;if(l||g.keyCode==c){g.preventDefault(),h=f.getRng(),i=e.getParent(h.startContainer,e.isBlock),l&&(i=e.getNext(i,e.isBlock));if(i){j=i.firstChild;while(j&&j.nodeType==3&&j.nodeValue.length==0)j=j.nextSibling;j&&j.nodeName==="SPAN"&&(k=j.cloneNode(!1))}b.getDoc().execCommand(l?"ForwardDelete":"Delete",!1,null),i=e.getParent(h.startContainer,e.isBlock),a.each(e.select("span.Apple-style-span,font.Apple-style-span",i),function(a){var b=f.getBookmark();k?e.replace(k.cloneNode(!1),a,!0):e.remove(a,!0),f.moveToBookmark(b)})}})}function f(a){a.onKeyUp.add(function(a,b){var e=b.keyCode;if(e==d||e==c)if(a.dom.isEmpty(a.getBody())){a.setContent("",{format:"raw"}),a.nodeChanged();return}})}function g(a){a.dom.bind(a.getDoc(),"focusin",function(){a.selection.setRng(a.selection.getRng())})}function h(b){b.onKeyDown.add(function(b,d){if(d.keyCode===c&&b.selection.isCollapsed()&&b.selection.getRng(!0).startOffset===0){var e=b.selection.getNode(),f=e.previousSibling;f&&f.nodeName&&f.nodeName.toLowerCase()==="hr"&&(b.dom.remove(f),a.dom.Event.cancel(d))}})}function i(a){Range.prototype.getClientRects||a.onMouseDown.add(function(a,b){if(b.target.nodeName==="HTML"){var c=a.getBody();c.blur(),setTimeout(function(){c.focus()},0)}})}function j(a){a.onClick.add(function(a,b){b=b.target,/^(IMG|HR)$/.test(b.nodeName)&&a.selection.getSel().setBaseAndExtent(b,0,b,1),b.nodeName=="A"&&a.dom.hasClass(b,"mceItemAnchor")&&a.selection.select(b),a.nodeChanged()})}function k(b){var c,d;b.dom.bind(b.getDoc(),"selectionchange",function(){d&&(clearTimeout(d),d=0),d=window.setTimeout(function(){var d=b.selection.getRng();if(!c||!a.dom.RangeUtils.compareRanges(d,c))b.nodeChanged(),c=d},50)})}function l(a){document.body.setAttribute("role","application")}var b=a.VK,c=b.BACKSPACE,d=b.DELETE;a.create("tinymce.util.Quirks",{Quirks:function(b){a.isWebKit&&(e(b),f(b),g(b),j(b),a.isIDevice&&k(b)),a.isIE&&(h(b),f(b),l(b)),a.isGecko&&(h(b),i(b))}})}(tinymce),function(a){function j(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.textContent||b.innerText||a}function k(a,b){var d,e,f,g={};if(a){a=a.split(","),b=b||10;for(d=0;d<a.length;d+=2)e=String.fromCharCode(parseInt(a[d],b)),c[e]||(f="&"+a[d+1]+";",g[e]=f,g[f]=e);return g}}var b,c,d,e=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,g=/[<>&\"\']/g,h=/&(#x|#)?([\w]+);/g,i={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};c={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},d={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},b=k("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),a.html=a.html||{},a.html.Entities={encodeRaw:function(a,b){return a.replace(b?e:f,function(a){return c[a]||a})},encodeAllRaw:function(a){return(""+a).replace(g,function(a){return c[a]||a})},encodeNumeric:function(a,b){return a.replace(b?e:f,function(a){return a.length>1?"&#"+((a.charCodeAt(0)-55296)*1024+(a.charCodeAt(1)-56320)+65536)+";":c[a]||"&#"+a.charCodeAt(0)+";"})},encodeNamed:function(a,d,g){return g=g||b,a.replace(d?e:f,function(a){return c[a]||g[a]||a})},getEncodeFunc:function(d,g){function i(a,b){return a.replace(b?e:f,function(a){return c[a]||g[a]||"&#"+a.charCodeAt(0)+";"||a})}function j(a,b){return h.encodeNamed(a,b,g)}var h=a.html.Entities;return g=k(g)||b,d=a.makeMap(d.replace(/\+/g,",")),d.named&&d.numeric?i:d.named?g?j:h.encodeNamed:d.numeric?h.encodeNumeric:h.encodeRaw},decode:function(a){return a.replace(h,function(a,c,e){return c?(e=parseInt(e,c.length===2?16:10),e>65535?(e-=65536,String.fromCharCode(55296+(e>>10),56320+(e&1023))):i[e]||String.fromCharCode(e)):d[a]||b[a]||j(a)})}}}(tinymce),tinymce.html.Styles=function(a,b){function l(a,b,c,d){function e(a){return a=parseInt(a).toString(16),a.length>1?a:"0"+a}return"#"+e(b)+e(c)+e(d)}var c=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,d=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,e=/\s*([^:]+):\s*([^;]+);?/g,f=/\s+$/,g=/rgb/,h,i,j={},k;a=a||{},k="\\\" \\' \\; \\: ; : ﻿".split(" ");for(i=0;i<k.length;i++)j[k[i]]="﻿"+i,j["﻿"+i]=k[i];return{toHex:function(a){return a.replace(c,l)},parse:function(b){function p(a,b){var c,d,e,f;c=g[a+"-top"+b];if(!c)return;d=g[a+"-right"+b];if(c!=d)return;e=g[a+"-bottom"+b];if(d!=e)return;f=g[a+"-left"+b];if(e!=f)return;g[a+b]=f,delete g[a+"-top"+b],delete g[a+"-right"+b],delete g[a+"-bottom"+b],delete g[a+"-left"+b]}function q(a){var b=g[a],c;if(!b||b.indexOf(" ")<0)return;b=b.split(" "),c=b.length;while(c--)if(b[c]!==b[0])return!1;return g[a]=b[0],!0}function r(a,b,c,d){if(!q(b))return;if(!q(c))return;if(!q(d))return;g[a]=g[b]+" "+g[c]+" "+g[d],delete g[b],delete g[c],delete g[d]}function s(a){return m=!0,j[a]}function t(a,b){return m&&(a=a.replace(/\uFEFF[0-9]/g,function(a){return j[a]})),b||(a=a.replace(/\\([\'\";:])/g,"$1")),a}var g={},h,i,k,m,n=a.url_converter,o=a.url_converter_scope||this;if(b){b=b.replace(/\\[\"\';:\uFEFF]/g,s).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(a){return a.replace(/[;:]/g,s)});while(h=e.exec(b)){i=h[1].replace(f,"").toLowerCase(),k=h[2].replace(f,"");if(i&&k.length>0){if(i==="font-weight"&&k==="700")k="bold";else if(i==="color"||i==="background-color")k=k.toLowerCase();k=k.replace(c,l),k=k.replace(d,function(a,b,c,d,e,f){return e=e||f,e?(e=t(e),"'"+e.replace(/\'/g,"\\'")+"'"):(b=t(b||c||d),n&&(b=n.call(o,b,"style")),"url('"+b.replace(/\'/g,"\\'")+"')")}),g[i]=m?t(k,!0):k}e.lastIndex=h.index+h[0].length}p("border",""),p("border","-width"),p("border","-color"),p("border","-style"),p("padding",""),p("margin",""),r("border","border-width","border-style","border-color"),g.border==="medium none"&&delete g.border}return g},serialize:function(a,c){function g(c){var e,f,g,i;e=b.styles[c];if(e)for(f=0,g=e.length;f<g;f++)c=e[f],i=a[c],i!==h&&i.length>0&&(d+=(d.length>0?" ":"")+c+": "+i+";")}var d="",e,f;if(c&&b&&b.styles)g("*"),g(c);else for(e in a)f=a[e],f!==h&&f.length>0&&(d+=(d.length>0?" ":"")+e+": "+f+";");return d}}},function(a){function l(a,b){return a.split(b||",")}function m(a,b){function e(b){return b.replace(/[A-Z]+/g,function(b){return e(a[b])})}var c,d={};for(c in a)a.hasOwnProperty(c)&&(a[c]=e(a[c]));return e(b).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(a,b,c,e){c=l(c,"|"),d[b]={attributes:j(c),attributesOrder:c,children:j(e,"|",{"#comment":{}})}}),d}var b={},c,d,e,f,g={},h,i,j=a.makeMap,k=a.each;d="h1,h2,h3,h4,h5,h6,hr,p,div,address,pre,form,table,tbody,thead,tfoot,th,tr,td,li,ol,ul,caption,blockquote,center,dl,dt,dd,dir,fieldset,noscript,menu,isindex,samp,header,footer,article,section,hgroup",d=j(d,",",j(d.toUpperCase())),b=m({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]"),c=j("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected,autoplay,loop,controls"),e=j("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,source"),f=a.extend(j("td,th,iframe,video,audio,object"),e),h=j("pre,script,style,textarea"),i=j("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),a.html.Schema=function(m){function t(a){return new RegExp("^"+a.replace(/([?+*])/g,".$1")+"$")}function u(b){var c,d,e,f,g,h,i,k,m,n,p,r,s,u,v,w,x,y,z,A,B,C,D=/^([#+-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,E=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,F=/[*?+]/;if(b){b=l(b),o["@"]&&(x=o["@"].attributes,y=o["@"].attributesOrder);for(c=0,d=b.length;c<d;c++){h=D.exec(b[c]);if(h){v=h[1],n=h[2],w=h[3],m=h[4],s={},u=[],i={attributes:s,attributesOrder:u},v==="#"&&(i.paddEmpty=!0),v==="-"&&(i.removeEmpty=!0);if(x){for(A in x)s[A]=x[A];u.push.apply(u,y)}if(m){m=l(m,"|");for(e=0,f=m.length;e<f;e++){h=E.exec(m[e]);if(h){k={},r=h[1],p=h[2].replace(/::/g,":"),v=h[3],C=h[4],r==="!"&&(i.attributesRequired=i.attributesRequired||[],i.attributesRequired.push(p),k.required=!0);if(r==="-"){delete s[p],u.splice(a.inArray(u,p),1);continue}v&&(v==="="&&(i.attributesDefault=i.attributesDefault||[],i.attributesDefault.push({name:p,value:C}),k.defaultValue=C),v===":"&&(i.attributesForced=i.attributesForced||[],i.attributesForced.push({name:p,value:C}),k.forcedValue=C),v==="<"&&(k.validValues=j(C,"?"))),F.test(p)?(i.attributePatterns=i.attributePatterns||[],k.pattern=t(p),i.attributePatterns.push(k)):(s[p]||u.push(p),s[p]=k)}}}!x&&n=="@"&&(x=s,y=u),w&&(i.outputName=n,o[w]=i),F.test(n)?(i.pattern=t(n),q.push(i)):o[n]=i}}}}function v(a){o={},q=[],u(a),k(b,function(a,b){p[b]=a.children})}function w(a){var b=/^(~)?(.+)$/;a&&k(l(a),function(a){var c=b.exec(a),e=c[1]==="~",f=e?"span":"div",h=c[2];p[h]=p[f],g[h]=f,e||(d[h]={}),k(p,function(a,b){a[f]&&(a[h]=a[f])})})}function x(a){var b=/^([+\-]?)(\w+)\[([^\]]+)\]$/;a&&k(l(a),function(a){var c=b.exec(a),d,e;c&&(e=c[1],e?d=p[c[2]]:d=p[c[2]]={"#comment":{}},d=p[c[2]],k(l(c[3],"|"),function(a){e==="-"?delete d[a]:d[a]={}}))})}function y(a){var b=o[a],c;if(b)return b;c=q.length;while(c--){b=q[c];if(b.pattern.test(a))return b}}var n=this,o={},p={},q=[],r,s;m=m||{},m.verify_html===!1&&(m.valid_elements="*[*]"),m.valid_styles&&(r={},k(m.valid_styles,function(b,c){r[c]=a.explode(b)})),s=m.whitespace_elements?j(m.whitespace_elements):h,m.valid_elements?v(m.valid_elements):(k(b,function(a,b){o[b]={attributes:a.attributes,attributesOrder:a.attributesOrder},p[b]=a.children}),k(l("strong/b,em/i"),function(a){a=l(a,"/"),o[a[1]].outputName=a[0]}),o.img.attributesDefault=[{name:"alt",value:""}],k(l("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr"),function(a){o[a].removeEmpty=!0}),k(l("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(a){o[a].paddEmpty=!0})),w(m.custom_elements),x(m.valid_children),u(m.extended_valid_elements),x("+ol[ul|ol],+ul[ul|ol]"),y("span")||u("span[!data-mce-type|*]"),m.invalid_elements&&a.each(a.explode(m.invalid_elements),function(a){o[a]&&delete o[a]}),n.children=p,n.styles=r,n.getBoolAttrs=function(){return c},n.getBlockElements=function(){return d},n.getShortEndedElements=function(){return e},n.getSelfClosingElements=function(){return i},n.getNonEmptyElements=function(){return f},n.getWhiteSpaceElements=function(){return s},n.isValidChild=function(a,b){var c=p[a];return!!c&&!!c[b]},n.getElementRule=y,n.getCustomElements=function(){return g},n.addValidElements=u,n.setValidElements=v,n.addCustomElements=w,n.addValidChildren=x},a.html.Schema.boolAttrMap=c,a.html.Schema.blockElementsMap=d}(tinymce),function(a){a.html.SaxParser=function(b,c){var d=this,e=function(){};b=b||{},d.schema=c=c||new a.html.Schema,b.fix_self_closing!==!1&&(b.fix_self_closing=!0),a.each("comment cdata text start end pi doctype".split(" "),function(a){a&&(d[a]=b[a]||e)}),d.parse=function(d){function N(a){var b,c;b=j.length;while(b--)if(j[b].name===a)break;if(b>=0){for(c=j.length-1;c>=b;c--)a=j[c],a.valid&&e.end(a.name);j.length=b}}var e=this,f,g=0,h,i,j=[],k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J=0,K=a.html.Entities.decode,L,M;F=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([^\\s\\/<>]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/)>))","g"),G=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g,H={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi},q=c.getShortEndedElements(),E=c.getSelfClosingElements(),r=c.getBoolAttrs(),t=b.validate,p=b.remove_internals,L=b.fix_self_closing,M=a.isIE,y=/^:/;while(f=F.exec(d)){g<f.index&&e.text(K(d.substr(g,f.index-g)));if(h=f[6])h=h.toLowerCase(),M&&y.test(h)&&(h=h.substr(1)),N(h);else if(h=f[7]){h=h.toLowerCase(),M&&y.test(h)&&(h=h.substr(1)),s=h in q,L&&E[h]&&j.length>0&&j[j.length-1].name===h&&N(h);if(!t||(u=c.getElementRule(h))){v=!0,t&&(z=u.attributes,A=u.attributePatterns),(x=f[8])?(o=x.indexOf("data-mce-type")!==-1,o&&p&&(v=!1),k=[],k.map={},x.replace(G,function(a,b,c,d,e){var f,g;b=b.toLowerCase(),c=b in r?b:K(c||d||e||"");if(t&&!o&&b.indexOf("data-")!==0){f=z[b];if(!f&&A){g=A.length;while(g--){f=A[g];if(f.pattern.test(b))break}g===-1&&(f=null)}if(!f)return;if(f.validValues&&!(c in f.validValues))return}k.map[b]=c,k.push({name:b,value:c})})):(k=[],k.map={});if(t&&!o){B=u.attributesRequired,C=u.attributesDefault,D=u.attributesForced;if(D){l=D.length;while(l--)w=D[l],n=w.name,I=w.value,I==="{$uid}"&&(I="mce_"+J++),k.map[n]=I,k.push({name:n,value:I})}if(C){l=C.length;while(l--)w=C[l],n=w.name,n in k.map||(I=w.value,I==="{$uid}"&&(I="mce_"+J++),k.map[n]=I,k.push({name:n,value:I}))}if(B){l=B.length;while(l--)if(B[l]in k.map)break;l===-1&&(v=!1)}k.map["data-mce-bogus"]&&(v=!1)}v&&e.start(h,k,s)}else v=!1;if(i=H[h]){i.lastIndex=g=f.index+f[0].length,(f=i.exec(d))?(v&&(m=d.substr(g,f.index-g)),g=f.index+f[0].length):(m=d.substr(g),g=d.length),v&&m.length>0&&e.text(m,!0),v&&e.end(h),F.lastIndex=g;continue}s||(!x||x.indexOf("/")!=x.length-1?j.push({name:h,valid:v}):v&&e.end(h))}else(h=f[1])?e.comment(h):(h=f[2])?e.cdata(h):(h=f[3])?e.doctype(h):(h=f[4])&&e.pi(h,f[5]);g=f.index+f[0].length}g<d.length&&e.text(K(d.substr(g)));for(l=j.length-1;l>=0;l--)h=j[l],h.valid&&e.end(h.name)}}}(tinymce),function(a){function d(a,b,c){var d,e,f=c?"lastChild":"firstChild",g=c?"prev":"next";if(a[f])return a[f];if(a!==b){d=a[g];if(d)return d;for(e=a.parent;e&&e!==b;e=e.parent){d=e[g];if(d)return d}}}function e(a,b){this.name=a,this.type=b,b===1&&(this.attributes=[],this.attributes.map={})}var b=/^[ \t\r\n]*$/,c={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};a.extend(e.prototype,{replace:function(a){var b=this;return a.parent&&a.remove(),b.insert(a,b),b.remove(),b},attr:function(a,b){var c=this,d,e,f;if(typeof a!="string"){for(e in a)c.attr(e,a[e]);return c}if(d=c.attributes){if(b!==f){if(b===null){if(a in d.map){delete d.map[a],e=d.length;while(e--)if(d[e].name===a)return d=d.splice(e,1),c}return c}if(a in d.map){e=d.length;while(e--)if(d[e].name===a){d[e].value=b;break}}else d.push({name:a,value:b});return d.map[a]=b,c}return d.map[a]}},clone:function(){var a=this,b=new e(a.name,a.type),c,d,f,g,h;if(f=a.attributes){h=[],h.map={};for(c=0,d=f.length;c<d;c++)g=f[c],g.name!=="id"&&(h[h.length]={name:g.name,value:g.value},h.map[g.name]=g.value);b.attributes=h}return b.value=a.value,b.shortEnded=a.shortEnded,b},wrap:function(a){var b=this;return b.parent.insert(a,b),a.append(b),b},unwrap:function(){var a=this,b,c;for(b=a.firstChild;b;)c=b.next,a.insert(b,a,!0),b=c;a.remove()},remove:function(){var a=this,b=a.parent,c=a.next,d=a.prev;return b&&(b.firstChild===a?(b.firstChild=c,c&&(c.prev=null)):d.next=c,b.lastChild===a?(b.lastChild=d,d&&(d.next=null)):c.prev=d,a.parent=a.next=a.prev=null),a},append:function(a){var b=this,c;return a.parent&&a.remove(),c=b.lastChild,c?(c.next=a,a.prev=c,b.lastChild=a):b.lastChild=b.firstChild=a,a.parent=b,a},insert:function(a,b,c){var d;return a.parent&&a.remove(),d=b.parent||this,c?(b===d.firstChild?d.firstChild=a:b.prev.next=a,a.prev=b.prev,a.next=b,b.prev=a):(b===d.lastChild?d.lastChild=a:b.next.prev=a,a.next=b.next,a.prev=b,b.next=a),a.parent=d,a},getAll:function(a){var b=this,c,e=[];for(c=b.firstChild;c;c=d(c,b))c.name===a&&e.push(c);return e},empty:function(){var a=this,b,c,e;if(a.firstChild){b=[];for(e=a.firstChild;e;e=d(e,a))b.push(e);c=b.length;while(c--)e=b[c],e.parent=e.firstChild=e.lastChild=e.next=e.prev=null}return a.firstChild=a.lastChild=null,a},isEmpty:function(a){var c=this,e=c.firstChild,f,g;if(e)do{if(e.type===1){if(e.attributes.map["data-mce-bogus"])continue;if(a[e.name])return!1;f=e.attributes.length;while(f--){g=e.attributes[f].name;if(g==="name"||g.indexOf("data-")===0)return!1}}if(e.type===3&&!b.test(e.value))return!1}while(e=d(e,c));return!0},walk:function(a){return d(this,null,a)}}),a.extend(e,{create:function(a,b){var d,f;d=new e(a,c[a]||1);if(b)for(f in b)d.attr(f,b[f]);return d}}),a.html.Node=e}(tinymce),function(a){var b=a.html.Node;a.html.DomParser=function(c,d){function j(c){var f,g,h,i,j,k,l,m,n,o,p,q,r,s;q=a.makeMap("tr,td,th,tbody,thead,tfoot,table"),p=d.getNonEmptyElements();for(f=0;f<c.length;f++){g=c[f];if(!g.parent)continue;i=[g];for(h=g.parent;h&&!d.isValidChild(h.name,g.name)&&!q[h.name];h=h.parent)i.push(h);if(h&&i.length>1){i.reverse(),j=k=e.filterNode(i[0].clone());for(n=0;n<i.length-1;n++){d.isValidChild(k.name,i[n].name)?(l=e.filterNode(i[n].clone()),k.append(l)):l=k;for(m=i[n].firstChild;m&&m!=i[n+1];)s=m.next,l.append(m),m=s;k=l}j.isEmpty(p)?h.insert(g,i[0],!0):(h.insert(j,i[0],!0),h.insert(g,j)),h=i[0],(h.isEmpty(p)||h.firstChild===h.lastChild&&h.firstChild.name==="br")&&h.empty().remove()}else if(g.parent){if(g.name==="li"){r=g.prev;if(!r||r.name!=="ul"&&r.name!=="ul"){r=g.next;if(!r||r.name!=="ul"&&r.name!=="ul"){g.wrap(e.filterNode(new b("ul",1)));continue}r.insert(g,r.firstChild,!0);continue}r.append(g);continue}d.isValidChild(g.parent.name,"div")&&d.isValidChild("div",g.name)?g.wrap(e.filterNode(new b("div",1))):g.name==="style"||g.name==="script"?g.empty().remove():g.unwrap()}}}var e=this,f={},g=[],h={},i={};c=c||{},c.validate="validate"in c?c.validate:!0,c.root_name=c.root_name||"body",e.schema=d=d||new a.html.Schema,e.filterNode=function(a){var b,c,d;c in f&&(d=h[c],d?d.push(a):h[c]=[a]),b=g.length;while(b--)c=g[b].name,c in a.attributes.map&&(d=i[c],d?d.push(a):i[c]=[a]);return a},e.addNodeFilter=function(b,c){a.each(a.explode(b),function(a){var b=f[a];b||(f[a]=b=[]),b.push(c)})},e.addAttributeFilter=function(b,c){a.each(a.explode(b),function(a){var b;for(b=0;b<g.length;b++)if(g[b].name===a){g[b].callbacks.push(c);return}g.push({name:a,callbacks:[c]})})},e.parse=function(e,k){function F(){var a=m.firstChild,b,c;while(a)b=a.next,a.type==3||a.type==1&&a.name!=="p"&&!w[a.name]&&!a.attr("data-mce-type")?c?c.append(a):(c=G(E,1),m.insert(c,a),c.append(a)):c=null,a=b}function G(a,c){var d=new b(a,c),e;return a in f&&(e=h[a],e?e.push(d):h[a]=[d]),d}function H(a){var b,c,d;for(b=a.prev;b&&b.type===3;)c=b.value.replace(z,""),c.length>0?(b.value=c,b=b.prev):(d=b.prev,b.remove(),b=d)}var l,m,n,o,p,q,r,s,t,u,v,w,x,y=[],z,A,B,C,D,E;k=k||{},h={},i={},w=a.extend(a.makeMap("script,style,head,html,body,title,meta,param"),d.getBlockElements()),D=d.getNonEmptyElements(),C=d.children,v=c.validate,E="forced_root_block"in k?k.forced_root_block:c.forced_root_block,B=d.getWhiteSpaceElements(),x=/^[ \t\r\n]+/,z=/[ \t\r\n]+$/,A=/[ \t\r\n]+/g,l=new a.html.SaxParser({validate:v,fix_self_closing:!v,cdata:function(a){n.append(G("#cdata",4)).value=a},text:function(a,b){var c;B[n.name]||(a=a.replace(A," "),n.lastChild&&w[n.lastChild.name]&&(a=a.replace(x,""))),a.length!==0&&(c=G("#text",3),c.raw=!!b,n.append(c).value=a)},comment:function(a){n.append(G("#comment",8)).value=a},pi:function(a,b){n.append(G(a,7)).value=b,H(n)},doctype:function(a){var b;b=n.append(G("#doctype",10)),b.value=a,H(n)},start:function(a,b,c){var e,f,h,j,k,l,m,o;h=v?d.getElementRule(a):{};if(h){e=G(h.outputName||a,1),e.attributes=b,e.shortEnded=c,n.append(e),o=C[n.name],o&&C[e.name]&&!o[e.name]&&y.push(e),f=g.length;while(f--)k=g[f].name,k in b.map&&(t=i[k],t?t.push(e):i[k]=[e]);w[a]&&H(e),c||(n=e)}},end:function(a){var c,e,f,g,h;e=v?d.getElementRule(a):{};if(e){if(w[a]){if(!B[n.name]){for(c=n.firstChild;c&&c.type===3;)f=c.value.replace(x,""),f.length>0?(c.value=f,c=c.next):(g=c.next,c.remove(),c=g);for(c=n.lastChild;c&&c.type===3;)f=c.value.replace(z,""),f.length>0?(c.value=f,c=c.prev):(g=c.prev,c.remove(),c=g)}c=n.prev,c&&c.type===3&&(f=c.value.replace(x,""),f.length>0?c.value=f:c.remove())}if(e.removeEmpty||e.paddEmpty)if(n.isEmpty(D))if(e.paddEmpty)n.empty().append(new b("#text","3")).value=" ";else if(!n.attributes.map.name){h=n.parent,n.empty().remove(),n=h;return}n=n.parent}}},d),m=n=new b(k.context||c.root_name,11),l.parse(e),v&&y.length&&(k.context?k.invalid=!0:j(y)),E&&m.name=="body"&&F();if(!k.invalid){for(u in h){t=f[u],o=h[u],r=o.length;while(r--)o[r].parent||o.splice(r,1);for(p=0,q=t.length;p<q;p++)t[p](o,u,k)}for(p=0,q=g.length;p<q;p++){t=g[p];if(t.name in i){o=i[t.name],r=o.length;while(r--)o[r].parent||o.splice(r,1);for(r=0,s=t.callbacks.length;r<s;r++)t.callbacks[r](o,t.name,k)}}}return m},c.remove_trailing_brs&&e.addNodeFilter("br",function(b,c){var e,f=b.length,g,h=d.getBlockElements(),i=d.getNonEmptyElements(),j,k,l;h.body=1;for(e=0;e<f;e++){g=b[e],j=g.parent;if(h[g.parent.name]&&g===j.lastChild){k=g.prev;while(k){l=k.name;if(l!=="span"||k.attr("data-mce-type")!=="bookmark"){if(l!=="br")break;if(l==="br"){g=null;break}}k=k.prev}g&&(g.remove(),j.isEmpty(i)&&(elementRule=d.getElementRule(j.name),elementRule&&(elementRule.removeEmpty?j.remove():elementRule.paddEmpty&&(j.empty().append(new a.html.Node("#text",3)).value=" "))))}}})}}(tinymce),tinymce.html.Writer=function(a){var b=[],c,d,e,f,g;return a=a||{},c=a.indent,d=tinymce.makeMap(a.indent_before||""),e=tinymce.makeMap(a.indent_after||""),f=tinymce.html.Entities.getEncodeFunc(a.entity_encoding||"raw",a.entities),g=a.element_format=="html",{start:function(a,h,i){var j,k,l,m;c&&d[a]&&b.length>0&&(m=b[b.length-1],m.length>0&&m!=="\n"&&b.push("\n")),b.push("<",a);if(h)for(j=0,k=h.length;j<k;j++)l=h[j],b.push(" ",l.name,'="',f(l.value,!0),'"');!i||g?b[b.length]=">":b[b.length]=" />",i&&c&&e[a]&&b.length>0&&(m=b[b.length-1],m.length>0&&m!=="\n"&&b.push("\n"))},end:function(a){var d;b.push("</",a,">"),c&&e[a]&&b.length>0&&(d=b[b.length-1],d.length>0&&d!=="\n"&&b.push("\n"))},text:function(a,c){a.length>0&&(b[b.length]=c?a:f(a))},cdata:function(a){b.push("<![CDATA[",a,"]]>")},comment:function(a){b.push("<!--",a,"-->")},pi:function(a,d){d?b.push("<?",a," ",d,"?>"):b.push("<?",a,"?>"),c&&b.push("\n")},doctype:function(a){b.push("<!DOCTYPE",a,">",c?"\n":"")},reset:function(){b.length=0},getContent:function(){return b.join("").replace(/\n$/,"")}}},function(a){a.html.Serializer=function(b,c){var d=this,e=new a.html.Writer(b);b=b||{},b.validate="validate"in b?b.validate:!0,d.schema=c=c||new a.html.Schema,d.writer=e,d.serialize=function(a){function g(a){var b=d[a.type],h,i,j,k,l,m,n,o,p;if(!b){h=a.name,i=a.shortEnded,j=a.attributes;if(f&&j&&j.length>1){m=[],m.map={},p=c.getElementRule(a.name);for(n=0,o=p.attributesOrder.length;n<o;n++)k=p.attributesOrder[n],k in j.map&&(l=j.map[k],m.map[k]=l,m.push({name:k,value:l}));for(n=0,o=j.length;n<o;n++)k=j[n].name,k in m.map||(l=j.map[k],m.map[k]=l,m.push({name:k,value:l}));j=m}e.start(a.name,j,i);if(!i){if(a=a.firstChild)do g(a);while(a=a.next);e.end(h)}}else b(a)}var d,f;return f=b.validate,d={3:function(a,b){e.text(a.value,a.raw)},8:function(a){e.comment(a.value)},7:function(a){e.pi(a.name,a.value)},10:function(a){e.doctype(a.value)},4:function(a){e.cdata(a.value)},11:function(a){if(a=a.firstChild)do g(a);while(a=a.next)}},e.reset(),a.type==1&&!b.inner?g(a):d[11](a),e.getContent()}}}(tinymce),function(a){var b=a.each,c=a.is,d=a.isWebKit,e=a.isIE,f=a.html.Entities,g=/^([a-z0-9],?)+$/i,h=a.html.Schema.blockElementsMap,i=/^[ \t\r\n]*$/;a.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(b,c){var d=this,f,g;d.doc=b,d.win=window,d.files={},d.cssFlicker=!1,d.counter=0,d.stdMode=!a.isIE||b.documentMode>=8,d.boxModel=!a.isIE||b.compatMode=="CSS1Compat"||d.stdMode,d.hasOuterHTML="outerHTML"in b.createElement("a"),d.settings=c=a.extend({keep_values:!1,hex_colors:1},c),d.schema=c.schema,d.styles=new a.html.Styles({url_converter:c.url_converter,url_converter_scope:c.url_converter_scope},c.schema);if(a.isIE6)try{b.execCommand("BackgroundImageCache",!1,!0)}catch(h){d.cssFlicker=!0}if(e&&c.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(a){b.createElement(a)});for(g in c.schema.getCustomElements())b.createElement(g)}a.addUnload(d.destroy,d)},getRoot:function(){var a=this,b=a.settings;return b&&a.get(b.root_element)||a.doc.body},getViewPort:function(a){var b,c;return a=a?a:this.win,b=a.document,c=this.boxModel?b.documentElement:b.body,{x:a.pageXOffset||c.scrollLeft,y:a.pageYOffset||c.scrollTop,w:a.innerWidth||c.clientWidth,h:a.innerHeight||c.clientHeight}},getRect:function(a){var b,c=this,d;return a=c.get(a),b=c.getPos(a),d=c.getSize(a),{x:b.x,y:b.y,w:d.w,h:d.h}},getSize:function(a){var b=this,c,d;return a=b.get(a),c=b.getStyle(a,"width"),d=b.getStyle(a,"height"),c.indexOf("px")===-1&&(c=0),d.indexOf("px")===-1&&(d=0),{w:parseInt(c)||a.offsetWidth||a.clientWidth,h:parseInt(d)||a.offsetHeight||a.clientHeight}},getParent:function(a,b,c){return this.getParents(a,b,c,!1)},getParents:function(a,b,d,e){var f=this,g,h=f.settings,i=[];a=f.get(a),e=e===undefined,h.strict_root&&(d=d||f.getRoot()),c(b,"string")&&(g=b,b==="*"?b=function(a){return a.nodeType==1}:b=function(a){return f.is(a,g)});while(a){if(a==d||!a.nodeType||a.nodeType===9)break;if(!b||b(a)){if(!e)return a;i.push(a)}a=a.parentNode}return e?i:null},get:function(a){var b;if(a&&this.doc&&typeof a=="string"){b=a,a=this.doc.getElementById(a);if(a&&a.id!==b)return this.doc.getElementsByName(b)[1]}return a},getNext:function(a,b){return this._findSib(a,b,"nextSibling")},getPrev:function(a,b){return this._findSib(a,b,"previousSibling")},add:function(a,b,d,e,f){var g=this;return this.run(a,function(a){var h,i;return h=c(b,"string")?g.doc.createElement(b):b,g.setAttribs(h,d),e&&(e.nodeType?h.appendChild(e):g.setHTML(h,e)),f?h:a.appendChild(h)})},create:function(a,b,c){return this.add(this
.doc.createElement(a),a,b,c,1)},createHTML:function(a,b,c){var d="",e=this,f;d+="<"+a;for(f in b)b.hasOwnProperty(f)&&(d+=" "+f+'="'+e.encode(b[f])+'"');return typeof c!="undefined"?d+">"+c+"</"+a+">":d+" />"},remove:function(b,c){return this.run(b,function(b){var d,e=b.parentNode;if(!e)return null;if(c)while(d=b.firstChild)!a.isIE||d.nodeType!==3||d.nodeValue?e.insertBefore(d,b):b.removeChild(d);return e.removeChild(b)})},setStyle:function(b,c,d){var f=this;return f.run(b,function(g){var h,i;h=g.style,c=c.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}),f.pixelStyles.test(c)&&(a.is(d,"number")||/^[\-0-9\.]+$/.test(d))&&(d+="px");switch(c){case"opacity":if(e){h.filter=d===""?"":"alpha(opacity="+d*100+")";if(!b.currentStyle||!b.currentStyle.hasLayout)h.display="inline-block"}h[c]=h["-moz-opacity"]=h["-khtml-opacity"]=d||"";break;case"float":e?h.styleFloat=d:h.cssFloat=d;break;default:h[c]=d||""}f.settings.update_styles&&f.setAttrib(g,"data-mce-style")})},getStyle:function(a,b,c){a=this.get(a);if(!a)return;if(this.doc.defaultView&&c){b=b.replace(/[A-Z]/g,function(a){return"-"+a});try{return this.doc.defaultView.getComputedStyle(a,null).getPropertyValue(b)}catch(d){return null}}return b=b.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}),b=="float"&&(b=e?"styleFloat":"cssFloat"),a.currentStyle&&c?a.currentStyle[b]:a.style?a.style[b]:undefined},setStyles:function(a,c){var d=this,e=d.settings,f;f=e.update_styles,e.update_styles=0,b(c,function(b,c){d.setStyle(a,c,b)}),e.update_styles=f,e.update_styles&&d.setAttrib(a,e.cssText)},removeAllAttribs:function(a){return this.run(a,function(a){var b,c=a.attributes;for(b=c.length-1;b>=0;b--)a.removeAttributeNode(c.item(b))})},setAttrib:function(a,d,e){var f=this;if(!a||!d)return;return f.settings.strict&&(d=d.toLowerCase()),this.run(a,function(a){var g=f.settings;if(e!==null)switch(d){case"style":if(!c(e,"string")){b(e,function(b,c){f.setStyle(a,c,b)});return}g.keep_values&&(e&&!f._isRes(e)?a.setAttribute("data-mce-style",e,2):a.removeAttribute("data-mce-style",2)),a.style.cssText=e;break;case"class":a.className=e||"";break;case"src":case"href":g.keep_values&&(g.url_converter&&(e=g.url_converter.call(g.url_converter_scope||f,e,d,a)),f.setAttrib(a,"data-mce-"+d,e,2));break;case"shape":a.setAttribute("data-mce-style",e)}c(e)&&e!==null&&e.length!==0?a.setAttribute(d,""+e,2):a.removeAttribute(d,2)})},setAttribs:function(a,c){var d=this;return this.run(a,function(a){b(c,function(b,c){d.setAttrib(a,c,b)})})},getAttrib:function(b,f,g){var h,i=this,j;b=i.get(b);if(!b||b.nodeType!==1)return g===j?!1:g;c(g)||(g="");if(/^(src|href|style|coords|shape)$/.test(f)){h=b.getAttribute("data-mce-"+f);if(h)return h}e&&i.props[f]&&(h=b[i.props[f]],h=h&&h.nodeValue?h.nodeValue:h),h||(h=b.getAttribute(f,2));if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(f))return b[i.props[f]]===!0&&h===""?f:h?f:"";if(b.nodeName==="FORM"&&b.getAttributeNode(f))return b.getAttributeNode(f).nodeValue;f==="style"&&(h=h||b.style.cssText,h&&(h=i.serializeStyle(i.parseStyle(h),b.nodeName),i.settings.keep_values&&!i._isRes(h)&&b.setAttribute("data-mce-style",h))),d&&f==="class"&&h&&(h=h.replace(/(apple|webkit)\-[a-z\-]+/gi,""));if(e)switch(f){case"rowspan":case"colspan":h===1&&(h="");break;case"size":if(h==="+0"||h===20||h===0)h="";break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":h===0&&(h="");break;case"hspace":h===-1&&(h="");break;case"maxlength":case"tabindex":if(h===32768||h===2147483647||h==="32768")h="";break;case"multiple":case"compact":case"noshade":case"nowrap":if(h===65535)return f;return g;case"shape":h=h.toLowerCase();break;default:f.indexOf("on")===0&&h&&(h=a._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+h))}return h!==j&&h!==null&&h!==""?""+h:g},getPos:function(a,b){var c=this,d=0,e=0,f,g=c.doc,h;a=c.get(a),b=b||g.body;if(a){if(a.getBoundingClientRect)return a=a.getBoundingClientRect(),f=c.boxModel?g.documentElement:g.body,d=a.left+(g.documentElement.scrollLeft||g.body.scrollLeft)-f.clientTop,e=a.top+(g.documentElement.scrollTop||g.body.scrollTop)-f.clientLeft,{x:d,y:e};h=a;while(h&&h!=b&&h.nodeType)d+=h.offsetLeft||0,e+=h.offsetTop||0,h=h.offsetParent;h=a.parentNode;while(h&&h!=b&&h.nodeType)d-=h.scrollLeft||0,e-=h.scrollTop||0,h=h.parentNode}return{x:d,y:e}},parseStyle:function(a){return this.styles.parse(a)},serializeStyle:function(a,b){return this.styles.serialize(a,b)},loadCSS:function(c){var d=this,f=d.doc,g;c||(c=""),g=d.select("head")[0],b(c.split(","),function(b){var c;if(d.files[b])return;d.files[b]=!0,c=d.create("link",{rel:"stylesheet",href:a._addVer(b)}),e&&f.documentMode&&f.recalc&&(c.onload=function(){f.recalc&&f.recalc(),c.onload=null}),g.appendChild(c)})},addClass:function(a,b){return this.run(a,function(a){var c;return b?this.hasClass(a,b)?a.className:(c=this.removeClass(a,b),a.className=(c!=""?c+" ":"")+b):0})},removeClass:function(b,c){var d=this,e;return d.run(b,function(b){var f;return d.hasClass(b,c)?(e||(e=new RegExp("(^|\\s+)"+c+"(\\s+|$)","g")),f=b.className.replace(e," "),f=a.trim(f!=" "?f:""),b.className=f,f||(b.removeAttribute("class"),b.removeAttribute("className")),f):b.className})},hasClass:function(a,b){return a=this.get(a),!a||!b?!1:(" "+a.className+" ").indexOf(" "+b+" ")!==-1},show:function(a){return this.setStyle(a,"display","block")},hide:function(a){return this.setStyle(a,"display","none")},isHidden:function(a){return a=this.get(a),!a||a.style.display=="none"||this.getStyle(a,"display")=="none"},uniqueId:function(a){return(a?a:"mce_")+this.counter++},setHTML:function(a,c){var d=this;return d.run(a,function(a){if(e){while(a.firstChild)a.removeChild(a.firstChild);try{a.innerHTML="<br />"+c,a.removeChild(a.firstChild)}catch(f){a=d.create("div"),a.innerHTML="<br />"+c,b(a.childNodes,function(b,c){c&&a.appendChild(b)})}}else a.innerHTML=c;return c})},getOuterHTML:function(a){var b,c=this;return a=c.get(a),a?a.nodeType===1&&c.hasOuterHTML?a.outerHTML:(b=(a.ownerDocument||c.doc).createElement("body"),b.appendChild(a.cloneNode(!0)),b.innerHTML):null},setOuterHTML:function(a,b,c){function f(a,b,c){var e,f;f=c.createElement("body"),f.innerHTML=b,e=f.lastChild;while(e)d.insertAfter(e.cloneNode(!0),a),e=e.previousSibling;d.remove(a)}var d=this;return this.run(a,function(a){a=d.get(a);if(a.nodeType==1){c=c||a.ownerDocument||d.doc;if(e)try{e&&a.nodeType==1?a.outerHTML=b:f(a,b,c)}catch(g){f(a,b,c)}else f(a,b,c)}})},decode:f.decode,encode:f.encodeAllRaw,insertAfter:function(a,b){return b=this.get(b),this.run(a,function(a){var c,d;return c=b.parentNode,d=b.nextSibling,d?c.insertBefore(a,d):c.appendChild(a),a})},isBlock:function(a){var b=a.nodeType;return b?b===1&&!!h[a.nodeName]:!!h[a]},replace:function(d,e,f){var g=this;return c(e,"array")&&(d=d.cloneNode(!0)),g.run(e,function(c){return f&&b(a.grep(c.childNodes),function(a){d.appendChild(a)}),c.parentNode.replaceChild(d,c)})},rename:function(a,c){var d=this,e;return a.nodeName!=c.toUpperCase()&&(e=d.create(c),b(d.getAttribs(a),function(b){d.setAttrib(e,b.nodeName,d.getAttrib(a,b.nodeName))}),d.replace(e,a,1)),e||a},findCommonAncestor:function(a,b){var c=a,d;while(c){d=b;while(d&&c!=d)d=d.parentNode;if(c==d)break;c=c.parentNode}return!c&&a.ownerDocument?a.ownerDocument.documentElement:c},toHex:function(a){function c(a){return a=parseInt(a).toString(16),a.length>1?a:"0"+a}var b=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(a);return b?(a="#"+c(b[1])+c(b[2])+c(b[3]),a):a},getClasses:function(){function i(c){b(c.imports,function(a){i(a)}),b(c.cssRules||c.rules,function(c){switch(c.type||1){case 1:c.selectorText&&b(c.selectorText.split(","),function(b){b=b.replace(/^\s*|\s*$|^\s\./g,"");if(/\.mce/.test(b)||!/\.[\w\-]+$/.test(b))return;h=b,b=a._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",b);if(g&&!(b=g(b,h)))return;f[b]||(d.push({"class":b}),f[b]=1)});break;case 3:i(c.styleSheet)}})}var c=this,d=[],e,f={},g=c.settings.class_filter,h;if(c.classes)return c.classes;try{b(c.doc.styleSheets,i)}catch(j){}return d.length>0&&(c.classes=d),d},run:function(a,c,d){var e=this,f;return e.doc&&typeof a=="string"&&(a=e.get(a)),a?(d=d||this,!a.nodeType&&(a.length||a.length===0)?(f=[],b(a,function(a,b){a&&(typeof a=="string"&&(a=e.doc.getElementById(a)),f.push(c.call(d,a,b)))}),f):c.call(d,a)):!1},getAttribs:function(a){var b;return a=this.get(a),a?e?(b=[],a.nodeName=="OBJECT"?a.attributes:(a.nodeName==="OPTION"&&this.getAttrib(a,"selected")&&b.push({specified:1,nodeName:"selected"}),a.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(a){b.push({specified:1,nodeName:a})}),b)):a.attributes:[]},isEmpty:function(b,c){var d=this,e,f,g,h,j,k;b=b.firstChild;if(b){h=new a.dom.TreeWalker(b),c=c||d.schema?d.schema.getNonEmptyElements():null;do{g=b.nodeType;if(g===1){if(b.getAttribute("data-mce-bogus"))continue;j=b.nodeName.toLowerCase();if(c&&c[j]){k=b.parentNode;if(j==="br"&&d.isBlock(k)&&k.firstChild===b&&k.lastChild===b)continue;return!1}f=d.getAttribs(b),e=b.attributes.length;while(e--){j=b.attributes[e].nodeName;if(j==="name"||j==="data-mce-bookmark")return!1}}if(g===3&&!i.test(b.nodeValue))return!1}while(b=h.next())}return!0},destroy:function(b){var c=this;c.events&&c.events.destroy(),c.win=c.doc=c.root=c.events=null,b||a.removeUnload(c.destroy)},createRng:function(){var b=this.doc;return b.createRange?b.createRange():new a.dom.Range(this)},nodeIndex:function(a,b){var c=0,d,e,f;if(a)for(d=a.nodeType,a=a.previousSibling,e=a;a;a=a.previousSibling){f=a.nodeType;if(b&&f==3)if(f==d||!a.nodeValue.length)continue;c++,d=f}return c},split:function(b,c,d){function j(b){var c,d=b.childNodes,f=b.nodeType;if(f==1&&b.getAttribute("data-mce-type")=="bookmark")return;for(c=d.length-1;c>=0;c--)j(d[c]);if(f!=9){if(f==3&&b.nodeValue.length>0){if(!e.isBlock(b.parentNode)||a.trim(b.nodeValue).length>0)return}else if(f==1){d=b.childNodes,d.length==1&&d[0]&&d[0].nodeType==1&&d[0].getAttribute("data-mce-type")=="bookmark"&&b.parentNode.insertBefore(d[0],b);if(d.length||/^(br|hr|input|img)$/i.test(b.nodeName))return}e.remove(b)}return b}var e=this,f=e.createRng(),g,h,i;if(b&&c)return f.setStart(b.parentNode,e.nodeIndex(b)),f.setEnd(c.parentNode,e.nodeIndex(c)),g=f.extractContents(),f=e.createRng(),f.setStart(c.parentNode,e.nodeIndex(c)+1),f.setEnd(b.parentNode,e.nodeIndex(b)+1),h=f.extractContents(),i=b.parentNode,i.insertBefore(j(g),b),d?i.replaceChild(d,c):i.insertBefore(c,b),i.insertBefore(j(h),b),e.remove(b),d||c},bind:function(b,c,d,e){var f=this;return f.events||(f.events=new a.dom.EventUtils),f.events.add(b,c,d,e||this)},unbind:function(b,c,d){var e=this;return e.events||(e.events=new a.dom.EventUtils),e.events.remove(b,c,d)},_findSib:function(a,b,d){var e=this,f=b;if(a){c(f,"string")&&(f=function(a){return e.is(a,b)});for(a=a[d];a;a=a[d])if(f(a))return a}return null},_isRes:function(a){return/^(top|left|bottom|right|width|height)/i.test(a)||/;\s*(top|left|bottom|right|width|height)/i.test(a)}}),a.DOM=new a.dom.DOMUtils(document,{process_html:0})}(tinymce),function(a){function b(a){function p(a,b){I(h,a,b)}function q(a,b){I(i,a,b)}function r(a){p(a.parentNode,o(a))}function s(a){p(a.parentNode,o(a)+1)}function t(a){q(a.parentNode,o(a))}function u(a){q(a.parentNode,o(a)+1)}function v(a){a?(c[l]=c[k],c[m]=c[j]):(c[k]=c[l],c[j]=c[m]),c.collapsed=h}function w(a){r(a),u(a)}function x(a){p(a,0),q(a,a.nodeType===1?a.childNodes.length:a.nodeValue.length)}function y(a,b){var d=c[k],e=c[j],f=c[l],g=c[m],h=b.startContainer,i=b.startOffset,n=b.endContainer,o=b.endOffset;if(a===0)return H(d,e,h,i);if(a===1)return H(f,g,h,i);if(a===2)return H(f,g,n,o);if(a===3)return H(d,e,n,o)}function z(){J(g)}function A(){return J(e)}function B(){return J(f)}function C(b){var c=this[k],d=this[j],e,f;c.nodeType!==3&&c.nodeType!==4||!c.nodeValue?(c.childNodes.length>0&&(f=c.childNodes[d]),f?c.insertBefore(b,f):c.appendChild(b)):d?d>=c.nodeValue.length?a.insertAfter(b,c):(e=c.splitText(d),c.parentNode.insertBefore(b,e)):c.parentNode.insertBefore(b,c)}function D(a){var b=c.extractContents();c.insertNode(a),a.appendChild(b),c.selectNode(a)}function E(){return n(new b(a),{startContainer:c[k],startOffset:c[j],endContainer:c[l],endOffset:c[m],collapsed:c.collapsed,commonAncestorContainer:c.commonAncestorContainer})}function F(a,b){var c;if(a.nodeType==3)return a;if(b<0)return a;c=a.firstChild;while(c&&b>0)--b,c=c.nextSibling;return c?c:a}function G(){return c[k]==c[l]&&c[j]==c[m]}function H(b,c,d,e){var f,g,h,i,j,k;if(b==d)return c==e?0:c<e?-1:1;f=d;while(f&&f.parentNode!=b)f=f.parentNode;if(f){g=0,h=b.firstChild;while(h!=f&&g<c)g++,h=h.nextSibling;return c<=g?-1:1}f=b;while(f&&f.parentNode!=d)f=f.parentNode;if(f){g=0,h=d.firstChild;while(h!=f&&g<e)g++,h=h.nextSibling;return g<e?-1:1}i=a.findCommonAncestor(b,d),j=b;while(j&&j.parentNode!=i)j=j.parentNode;j||(j=i),k=d;while(k&&k.parentNode!=i)k=k.parentNode;k||(k=i);if(j==k)return 0;h=i.firstChild;while(h){if(h==j)return-1;if(h==k)return 1;h=h.nextSibling}}function I(b,d,e){var f,g;b?(c[k]=d,c[j]=e):(c[l]=d,c[m]=e),f=c[l];while(f.parentNode)f=f.parentNode;g=c[k];while(g.parentNode)g=g.parentNode;g==f?H(c[k],c[j],c[l],c[m])>0&&c.collapse(b):c.collapse(b),c.collapsed=G(),c.commonAncestorContainer=a.findCommonAncestor(c[k],c[l])}function J(a){var b,d=0,e=0,f,g,h,i,j,m;if(c[k]==c[l])return K(a);for(b=c[l],f=b.parentNode;f;b=f,f=f.parentNode){if(f==c[k])return L(b,a);++d}for(b=c[k],f=b.parentNode;f;b=f,f=f.parentNode){if(f==c[l])return M(b,a);++e}g=e-d,h=c[k];while(g>0)h=h.parentNode,g--;i=c[l];while(g<0)i=i.parentNode,g++;for(j=h.parentNode,m=i.parentNode;j!=m;j=j.parentNode,m=m.parentNode)h=j,i=m;return N(h,i,a)}function K(a){var b,e,i,l,n,o,p;a!=g&&(b=d.createDocumentFragment());if(c[j]==c[m])return b;if(c[k].nodeType==3){e=c[k].nodeValue,i=e.substring(c[j],c[m]),a!=f&&(c[k].deleteData(c[j],c[m]-c[j]),c.collapse(h));if(a==g)return;return b.appendChild(d.createTextNode(i)),b}l=F(c[k],c[j]),n=c[m]-c[j];while(n>0)o=l.nextSibling,p=R(l,a),b&&b.appendChild(p),--n,l=o;return a!=f&&c.collapse(h),b}function L(a,b){var e,h,k,l,m,n;b!=g&&(e=d.createDocumentFragment()),h=O(a,b),e&&e.appendChild(h),k=o(a),l=k-c[j];if(l<=0)return b!=f&&(c.setEndBefore(a),c.collapse(i)),e;h=a.previousSibling;while(l>0)m=h.previousSibling,n=R(h,b),e&&e.insertBefore(n,e.firstChild),--l,h=m;return b!=f&&(c.setEndBefore(a),c.collapse(i)),e}function M(a,b){var e,i,j,k,l,n;b!=g&&(e=d.createDocumentFragment()),j=P(a,b),e&&e.appendChild(j),i=o(a),++i,k=c[m]-i,j=a.nextSibling;while(k>0)l=j.nextSibling,n=R(j,b),e&&e.appendChild(n),--k,j=l;return b!=f&&(c.setStartAfter(a),c.collapse(h)),e}function N(a,b,e){var i,j,k,l,m,n,p,q;e!=g&&(j=d.createDocumentFragment()),i=P(a,e),j&&j.appendChild(i),k=a.parentNode,l=o(a),m=o(b),++l,n=m-l,p=a.nextSibling;while(n>0)q=p.nextSibling,i=R(p,e),j&&j.appendChild(i),p=q,--n;return i=O(b,e),j&&j.appendChild(i),e!=f&&(c.setStartAfter(a),c.collapse(h)),j}function O(a,b){var d=F(c[l],c[m]-1),e,f,j,k,n,o=d!=c[l];if(d==a)return Q(d,o,i,b);e=d.parentNode,f=Q(e,i,i,b);while(e){while(d)j=d.previousSibling,k=Q(d,o,i,b),b!=g&&f.insertBefore(k,f.firstChild),o=h,d=j;if(e==a)return f;d=e.previousSibling,e=e.parentNode,n=Q(e,i,i,b),b!=g&&n.appendChild(f),f=n}}function P(a,b){var d=F(c[k],c[j]),e=d!=c[k],f,l,m,n,o;if(d==a)return Q(d,e,h,b);f=d.parentNode,l=Q(f,i,h,b);while(f){while(d)m=d.nextSibling,n=Q(d,e,h,b),b!=g&&l.appendChild(n),e=h,d=m;if(f==a)return l;d=f.nextSibling,f=f.parentNode,o=Q(f,i,h,b),b!=g&&o.appendChild(l),l=o}}function Q(a,b,d,e){var h,k,l,n,o;if(b)return R(a,e);if(a.nodeType==3){h=a.nodeValue,d?(n=c[j],k=h.substring(n),l=h.substring(0,n)):(n=c[m],k=h.substring(0,n),l=h.substring(n)),e!=f&&(a.nodeValue=l);if(e==g)return;return o=a.cloneNode(i),o.nodeValue=k,o}if(e==g)return;return a.cloneNode(i)}function R(a,b){if(b!=g)return b==f?a.cloneNode(h):a;a.parentNode.removeChild(a)}var c=this,d=a.doc,e=0,f=1,g=2,h=!0,i=!1,j="startOffset",k="startContainer",l="endContainer",m="endOffset",n=tinymce.extend,o=a.nodeIndex;n(c,{startContainer:d,startOffset:0,endContainer:d,endOffset:0,collapsed:h,commonAncestorContainer:d,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:p,setEnd:q,setStartBefore:r,setStartAfter:s,setEndBefore:t,setEndAfter:u,collapse:v,selectNode:w,selectNodeContents:x,compareBoundaryPoints:y,deleteContents:z,extractContents:A,cloneContents:B,insertNode:C,surroundContents:D,cloneRange:E})}a.Range=b}(tinymce.dom),function(){function a(a){function f(b,c){var d,e=0,f,g,h,i,j,k,l=-1,m;d=b.duplicate(),d.collapse(c),m=d.parentElement();if(m.ownerDocument!==a.dom.doc)return;while(m.contentEditable==="false")m=m.parentNode;if(!m.hasChildNodes())return{node:m,inside:1};h=m.children,f=h.length-1;while(e<=f){k=Math.floor((e+f)/2),i=h[k],d.moveToElementText(i),l=d.compareEndPoints(c?"StartToStart":"EndToEnd",b);if(l>0)f=k-1;else{if(!(l<0))return{node:i};e=k+1}}if(l<0){i?d.collapse(!1):(d.moveToElementText(m),d.collapse(!0),i=m,g=!0),d.setEndPoint(c?"EndToStart":"EndToEnd",b);if(d.compareEndPoints(c?"StartToStart":"StartToEnd",b)>0){d=b.duplicate(),d.collapse(c),j=-1;while(m==d.parentElement()){if(d.move("character",-1)==0)break;j++}}j=j||d.text.replace("\r\n"," ").length}else d.collapse(!0),d.setEndPoint(c?"StartToStart":"StartToEnd",b),j=d.text.replace("\r\n"," ").length;return{node:i,position:l,offset:j,inside:g}}function g(){function m(a){var b=f(d,a),c,g,h=0,i,j,k;c=b.node,g=b.offset;if(b.inside&&!c.hasChildNodes()){e[a?"setStart":"setEnd"](c,0);return}if(g===j){e[a?"setStartBefore":"setEndAfter"](c);return}if(b.position<0){i=b.inside?c.firstChild:c.nextSibling;if(!i){e[a?"setStartAfter":"setEndAfter"](c);return}if(!g){i.nodeType==3?e[a?"setStart":"setEnd"](i,0):e[a?"setStartBefore":"setEndBefore"](i);return}while(i){k=i.nodeValue,h+=k.length;if(h>=g){c=i,h-=g,h=k.length-h;break}i=i.nextSibling}}else{i=c.previousSibling;if(!i)return e[a?"setStartBefore":"setEndBefore"](c);if(!g){c.nodeType==3?e[a?"setStart":"setEnd"](i,c.nodeValue.length):e[a?"setStartAfter":"setEndAfter"](i);return}while(i){h+=i.nodeValue.length;if(h>=g){c=i,h-=g;break}i=i.previousSibling}}e[a?"setStart":"setEnd"](c,h)}var d=a.getRng(),e=c.createRng(),g,h,i,j,k,l;g=d.item?d.item(0):d.parentElement();if(g.ownerDocument!=c.doc)return e;h=a.isCollapsed();if(d.item)return e.setStart(g.parentNode,c.nodeIndex(g)),e.setEnd(e.startContainer,e.startOffset+1),e;try{m(!0),h||m()}catch(n){if(n.number!=-2147024809)throw n;k=b.getBookmark(2),i=d.duplicate(),i.collapse(!0),g=i.parentElement(),h||(i=d.duplicate(),i.collapse(!1),j=i.parentElement(),j.innerHTML=j.innerHTML),g.innerHTML=g.innerHTML,b.moveToBookmark(k),d=a.getRng(),m(!0),h||m()}return e}var b=this,c=a.dom,d=!0,e=!1;this.getBookmark=function(b){function i(a){var a,b,d,e,f,g=[];b=a.parentNode,d=c.getRoot().parentNode;while(b!=d&&b.nodeType!==9){e=b.children,f=e.length;while(f--)if(a===e[f]){g.push(f);break}a=b,b=b.parentNode}return g}function j(a){var b;b=f(d,a);if(b)return{position:b.position,offset:b.offset,indexes:i(b.node),inside:b.inside}}var d=a.getRng(),e,g,h={};return b===2&&(d.item?h.start={ctrl:!0,indexes:i(d.item(0))}:(h.start=j(!0),a.isCollapsed()||(h.end=j()))),h},this.moveToBookmark=function(a){function e(a){var b,d,e,f;b=c.getRoot();for(d=a.length-1;d>=0;d--)f=b.children,e=a[d],e<=f.length-1&&(b=f[e]);return b}function f(c){var f=a[c?"start":"end"],g,h,i;f&&(g=f.position>0,h=d.createTextRange(),h.moveToElementText(e(f.indexes)),offset=f.offset,offset!==i?(h.collapse(f.inside||g),h.moveStart("character",g?-offset:offset)):h.collapse(c),b.setEndPoint(c?"StartToStart":"EndToStart",h),c&&b.collapse(!0))}var b,d=c.doc.body;a.start&&(a.start.ctrl?(b=d.createControlRange(),b.addElement(e(a.start.indexes)),b.select()):(b=d.createTextRange(),f(!0),f(),b.select()))},this.addRange=function(b){function m(a){var b,f,m,n,o;m=c.create("a"),b=a?g:i,f=a?h:j,n=e.duplicate();if(b==k||b==k.documentElement)b=l,f=0;b.nodeType==3?(b.parentNode.insertBefore(m,b),n.moveToElementText(m),n.moveStart("character",f),c.remove(m),e.setEndPoint(a?"StartToStart":"EndToEnd",n)):(o=b.childNodes,o.length?(f>=o.length?c.insertAfter(m,o[o.length-1]):b.insertBefore(m,o[f]),n.moveToElementText(m)):(m=k.createTextNode("﻿"),b.appendChild(m),n.moveToElementText(m.parentNode),n.collapse(d)),e.setEndPoint(a?"StartToStart":"EndToEnd",n),c.remove(m))}var e,f,g,h,i,j,k=a.dom.doc,l=k.body;g=b.startContainer,h=b.startOffset,i=b.endContainer,j=b.endOffset,e=l.createTextRange();if(g==i&&g.nodeType==1&&h==j-1&&h==j-1)try{f=l.createControlRange(),f.addElement(g.childNodes[h]),f.select();return}catch(n){}m(!0),m(),e.select()},this.getRangeAt=g}tinymce.dom.TridentSelection=a}(),function(a){var b=a.each,c=a.DOM,d=a.isIE,e=a.isWebKit,f;a.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[],this.events=[]},add:function(e,f,g,h){var i,j=this,k=j.events,l;if(f instanceof Array)return l=[],b(f,function(a){l.push(j.add(e,a,g,h))}),l;if(e&&e.hasOwnProperty&&e instanceof Array)return l=[],b(e,function(a){a=c.get(a),l.push(j.add(a,f,g,h))}),l;e=c.get(e);if(!e)return;return i=function(b){if(j.disabled)return;return b=b||window.event,b&&d&&(b.target||(b.target=b.srcElement),a.extend(b,j._stoppers)),h?g.call(h,b):g(b)},f=="unload"?(a.unloads.unshift({func:i}),i):f=="init"?(j.domLoaded?i():j.inits.push(i),i):(k.push({obj:e,name:f,func:g,cfunc:i,scope:h}),j._add(e,f,i),g)},remove:function(a,d,e){var f=this,g=f.events,h=!1,i;return a&&a.hasOwnProperty&&a instanceof Array?(i=[],b(a,function(a){a=c.get(a),i.push(f.remove(a,d,e))}),i):(a=c.get(a),b(g,function(b,c){if(b.obj==a&&b.name==d&&(!e||b.func==e||b.cfunc==e))return g.splice(c,1),f._remove(a,d,b.cfunc),h=!0,!1}),h)},clear:function(a){var b=this,d=b.events,e,f;if(a){a=c.get(a);for(e=d.length-1;e>=0;e--)f=d[e],f.obj===a&&(b._remove(f.obj,f.name,f.cfunc),f.obj=f.cfunc=null,d.splice(e,1))}},cancel:function(a){return a?(this.stop(a),this.prevent(a)):!1},stop:function(a){return a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,!1},prevent:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,!1},destroy:function(){var a=this;b(a.events,function(b,c){a._remove(b.obj,b.name,b.cfunc),b.obj=b.cfunc=null}),a.events=[],a=null},_add:function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener?a.addEventListener(b,c,!1):a["on"+b]=c},_remove:function(a,b,c){if(a)try{a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener?a.removeEventListener(b,c,!1):a["on"+b]=null}catch(d){}},_pageInit:function(a){var c=this;if(c.domLoaded)return;c.domLoaded=!0,b(c.inits,function(a){a()}),c.inits=[]},_wait:function(a){var b=this,c=a.document;if(a.tinyMCE_GZ&&tinyMCE_GZ.loaded){b.domLoaded=1;return}c.attachEvent?(c.attachEvent("onreadystatechange",function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",arguments.callee),b._pageInit(a))}),c.documentElement.doScroll&&a==a.top&&function(){if(b.domLoaded)return;try{c.documentElement.doScroll("left")}catch(d){setTimeout(arguments.callee,0);return}b._pageInit(a)}()):c.addEventListener&&b._add(a,"DOMContentLoaded",function(){b._pageInit(a)}),b._add(a,"load",function(){b._pageInit(a)})},_stoppers:{preventDefault:function(){this.returnValue=!1},stopPropagation:function(){this.cancelBubble=!0}}}),f=a.dom.Event=new a.dom.EventUtils,f._wait(window),a.addUnload(function(){f.destroy()})}(tinymce),function(a){a.dom.Element=function(b,c){var d=this,e,f;d.settings=c=c||{},d.id=b,d.dom=e=c.dom||a.DOM,a.isIE||(f=e.get(d.id)),a.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(a){d[a]=function(){var c=[b],f;for(f=0;f<arguments.length;f++)c.push(arguments[f]);return c=e[a].apply(e,c),d.update(a),c}}),a.extend(d,{on:function(b,c,e){return a.dom.Event.add(d.id,b,c,e)},getXY:function(){return{x:parseInt(d.getStyle("left")),y:parseInt(d.getStyle("top"))}},getSize:function(){var a=e.get(d.id);return{w:parseInt(d.getStyle("width")||a.clientWidth),h:parseInt(d.getStyle("height")||a.clientHeight)}},moveTo:function(a,b){d.setStyles({left:a,top:b})},moveBy:function(a,b){var c=d.getXY();d.moveTo(c.x+a,c.y+b)},resizeTo:function(a,b){d.setStyles({width:a,height:b})},resizeBy:function(a,b){var c=d.getSize();d.resizeTo(c.w+a,c.h+b)},update:function(b){var f;if(a.isIE6&&c.blocker){b=b||"";if(b.indexOf("get")===0||b.indexOf("has")===0||b.indexOf("is")===0)return;if(b=="remove"){e.remove(d.blocker);return}d.blocker?f=e.get(d.blocker):(d.blocker=e.uniqueId(),f=e.add(c.container||e.getRoot(),"iframe",{id:d.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),e.setStyle(f,"opacity",0)),e.setStyles(f,{left:d.getStyle("left",1),top:d.getStyle("top",1),width:d.getStyle("width",1),height:d.getStyle("height",1),display:d.getStyle("display",1),zIndex:parseInt(d.getStyle("zIndex",1)||0)-1})}}})}}(tinymce),function(a){function b(a){return a.replace(/[\n\r]+/g,"")}var c=a.is,d=a.isIE,e=a.each;a.create("tinymce.dom.Selection",{Selection:function(b,c,d){var f=this;f.dom=b,f.win=c,f.serializer=d,e(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(b){f[b]=new a.util.Dispatcher(f)}),f.win.getSelection||(f.tridentSel=new a.dom.TridentSelection(f)),a.isIE&&b.boxModel&&this._fixIESelection(),a.addUnload(f.destroy,f)},setCursorLocation:function(a,b){var c=this,d=c.dom.createRng();d.setStart(a,b),d.setEnd(a,b),c.setRng(d),c.collapse(!1)},getContent:function(a){var b=this,d=b.getRng(),e=b.dom.create("body"),f=b.getSel(),g,h,i;return a=a||{},g=h="",a.get=!0,a.format=a.format||"html",a.forced_root_block="",b.onBeforeGetContent.dispatch(b,a),a.format=="text"?b.isCollapsed()?"":d.text||(f.toString?f.toString():""):(d.cloneContents?(i=d.cloneContents(),i&&e.appendChild(i)):c(d.item)||c(d.htmlText)?(e.innerHTML="<br>"+(d.item?d.item(0).outerHTML:d.htmlText),e.removeChild(e.firstChild)):e.innerHTML=d.toString(),/^\s/.test(e.innerHTML)&&(g=" "),/\s+$/.test(e.innerHTML)&&(h=" "),a.getInner=!0,a.content=b.isCollapsed()?"":g+b.serializer.serialize(e,a)+h,b.onGetContent.dispatch(b,a),a.content)},setContent:function(a,b){var c=this,d=c.getRng(),e,f=c.win.document,g,h;b=b||{format:"html"},b.set=!0,a=b.content=a,b.no_events||c.onBeforeSetContent.dispatch(c,b),a=b.content;if(d.insertNode){a+='<span id="__caret">_</span>',d.startContainer==f&&d.endContainer==f?f.body.innerHTML=a:(d.deleteContents(),f.body.childNodes.length==0?f.body.innerHTML=a:d.createContextualFragment?d.insertNode(d.createContextualFragment(a)):(g=f.createDocumentFragment(),h=f.createElement("div"),g.appendChild(h),h.outerHTML=a,d.insertNode(g))),e=c.dom.get("__caret"),d=f.createRange(),d.setStartBefore(e),d.setEndBefore(e),c.setRng(d),c.dom.remove("__caret");try{c.setRng(d)}catch(i){}}else d.item&&(f.execCommand("Delete",!1,null),d=c.getRng()),/^\s+/.test(a)?(d.pasteHTML('<span id="__mce_tmp">_</span>'+a),c.dom.remove("__mce_tmp")):d.pasteHTML(a);b.no_events||c.onSetContent.dispatch(c,b)},getStart:function(){var a=this.getRng(),b,c,d,e;if(a.duplicate||a.item){if(a.item)return a.item(0);d=a.duplicate(),d.collapse(1),b=d.parentElement(),c=e=a.parentElement();while(e=e.parentNode)if(e==b){b=c;break}return b}return b=a.startContainer,b.nodeType==1&&b.hasChildNodes()&&(b=b.childNodes[Math.min(b.childNodes.length-1,a.startOffset)]),b&&b.nodeType==3?b.parentNode:b},getEnd:function(){var a=this,b=a.getRng(),c,d;return b.duplicate||b.item?b.item?b.item(0):(b=b.duplicate(),b.collapse(0),c=b.parentElement(),c&&c.nodeName=="BODY"?c.lastChild||c:c):(c=b.endContainer,d=b.endOffset,c.nodeType==1&&c.hasChildNodes()&&(c=c.childNodes[d>0?d-1:d]),c&&c.nodeType==3?c.parentNode:c)},getBookmark:function(a,b){function o(a,b){var c=0;return e(d.select(a),function(a,d){a==b&&(c=d)}),c}var c=this,d=c.dom,f,g,h,i,j,k,l,m="﻿",n;if(a==2){function p(){function g(a,d){var f=a[d?"startContainer":"endContainer"],g=a[d?"startOffset":"endOffset"],h=[],i,j,k=0;if(f.nodeType==3){if(b)for(i=f.previousSibling;i&&i.nodeType==3;i=i.previousSibling)g+=i.nodeValue.length;h.push(g)}else j=f.childNodes,g>=j.length&&j.length&&(k=1,g=Math.max(0,j.length-1)),h.push(c.dom.nodeIndex(j[g],b)+k);for(;f&&f!=e;f=f.parentNode)h.push(c.dom.nodeIndex(f,b));return h}var a=c.getRng(!0),e=d.getRoot(),f={};return f.start=g(a,!0),c.isCollapsed()||(f.end=g(a)),f}return c.tridentSel?c.tridentSel.getBookmark(a):p()}if(a)return{rng:c.getRng()};f=c.getRng(),h=d.uniqueId(),i=tinyMCE.activeEditor.selection.isCollapsed(),n="overflow:hidden;line-height:0px";if(f.duplicate||f.item){if(!!f.item)return k=f.item(0),j=k.nodeName,{name:j,index:o(j,k)};g=f.duplicate();try{f.collapse(),f.pasteHTML('<span data-mce-type="bookmark" id="'+h+'_start" style="'+n+'">'+m+"</span>"),i||(g.collapse(!1),f.moveToElementText(g.parentElement()),f.compareEndPoints("StartToEnd",g)==0&&g.move("character",-1),g.pasteHTML('<span data-mce-type="bookmark" id="'+h+'_end" style="'+n+'">'+m+"</span>"))}catch(q){return null}}else{k=c.getNode(),j=k.nodeName;if(j=="IMG")return{name:j,index:o(j,k)};g=f.cloneRange(),i||(g.collapse(!1),g.insertNode(d.create("span",{"data-mce-type":"bookmark",id:h+"_end",style:n},m))),f.collapse(!0),f.insertNode(d.create("span",{"data-mce-type":"bookmark",id:h+"_start",style:n},m))}return c.moveToBookmark({id:h,keep:1}),{id:h}},moveToBookmark:function(b){var c=this,f=c.dom,g,h,i,j,k,l,m,n;if(b)if(b.start){i=f.createRng(),j=f.getRoot();function o(a){var c=b[a?"start":"end"],d,e,f,g;if(c){f=c[0];for(e=j,d=c.length-1;d>=1;d--){g=e.childNodes;if(c[d]>g.length-1)return;e=g[c[d]]}e.nodeType===3&&(f=Math.min(c[0],e.nodeValue.length)),e.nodeType===1&&(f=Math.min(c[0],e.childNodes.length)),a?i.setStart(e,f):i.setEnd(e,f)}return!0}if(c.tridentSel)return c.tridentSel.moveToBookmark(b);o(!0)&&o()&&c.setRng(i)}else if(b.id){function p(c){var d=f.get(b.id+"_"+c),g,h,i,j,o=b.keep;if(d){g=d.parentNode,c=="start"?(o?(g=d.firstChild,h=1):h=f.nodeIndex(d),k=l=g,m=n=h):(o?(g=d.firstChild,h=1):h=f.nodeIndex(d),l=g,n=h);if(!o){j=d.previousSibling,i=d.nextSibling,e(a.grep(d.childNodes),function(a){a.nodeType==3&&(a.nodeValue=a.nodeValue.replace(/\uFEFF/g,""))});while(d=f.get(b.id+"_"+c))f.remove(d,1);j&&i&&j.nodeType==i.nodeType&&j.nodeType==3&&!a.isOpera&&(h=j.nodeValue.length,j.appendData(i.nodeValue),f.remove(i),c=="start"?(k=l=j,m=n=h):(l=j,n=h))}}}function q(a){return f.isBlock(a)&&!a.innerHTML&&(a.innerHTML=d?" ":'<br data-mce-bogus="1" />'),a}p("start"),p("end"),k&&(i=f.createRng(),i.setStart(q(k),m),i.setEnd(q(l),n),c.setRng(i))}else b.name?c.select(f.select(b.name)[b.index]):b.rng&&c.setRng(b.rng)},select:function(b,c){var d=this,e=d.dom,f=e.createRng(),g;if(b){g=e.nodeIndex(b),f.setStart(b.parentNode,g),f.setEnd(b.parentNode,g+1);if(c){function h(b,c){var d=new a.dom.TreeWalker(b,b);do{if(b.nodeType==3&&a.trim(b.nodeValue).length!=0){c?f.setStart(b,0):f.setEnd(b,b.nodeValue.length);return}if(b.nodeName=="BR"){c?f.setStartBefore(b):f.setEndBefore(b);return}}while(b=c?d.next():d.prev())}h(b,1),h(b)}d.setRng(f)}return b},isCollapsed:function(){var a=this,b=a.getRng(),c=a.getSel();return!b||b.item?!1:b.compareEndPoints?b.compareEndPoints("StartToEnd",b)===0:!c||b.collapsed},collapse:function(a){var b=this,c=b.getRng(),d;c.item&&(d=c.item(0),c=b.win.document.body.createTextRange(),c.moveToElementText(d)),c.collapse(!!a),b.setRng(c)},getSel:function(){var a=this,b=this.win;return b.getSelection?b.getSelection():b.document.selection},getRng:function(b){var c=this,d,e,f,g=c.win.document;if(b&&c.tridentSel)return c.tridentSel.getRangeAt(0);try{if(d=c.getSel())e=d.rangeCount>0?d.getRangeAt(0):d.createRange?d.createRange():g.createRange()}catch(h){}return a.isIE&&e&&e.setStart&&g.selection.createRange().item&&(f=g.selection.createRange().item(0),e=g.createRange(),e.setStartBefore(f),e.setEndAfter(f)),e||(e=g.createRange?g.createRange():g.body.createTextRange()),c.selectedRange&&c.explicitRange&&(e.compareBoundaryPoints(e.START_TO_START,c.selectedRange)===0&&e.compareBoundaryPoints(e.END_TO_END,c.selectedRange)===0?e=c.explicitRange:(c.selectedRange=null,c.explicitRange=null)),e},setRng:function(a){var b,c=this;if(!c.tridentSel){b=c.getSel();if(b){c.explicitRange=a;try{b.removeAllRanges()}catch(d){}b.addRange(a),c.selectedRange=b.getRangeAt(0)}}else{if(a.cloneRange){c.tridentSel.addRange(a);return}try{a.select()}catch(d){}}},setNode:function(a){var b=this;return b.setContent(b.dom.getOuterHTML(a)),a},getNode:function(){var a=this,b=a.getRng(),c=a.getSel(),d,e=b.startContainer,f=b.endContainer;if(!b)return a.dom.getRoot();if(b.setStart){d=b.commonAncestorContainer;if(!b.collapsed){b.startContainer==b.endContainer&&b.endOffset-b.startOffset<2&&b.startContainer.
hasChildNodes()&&(d=b.startContainer.childNodes[b.startOffset]);if(e.nodeType===3&&f.nodeType===3){function g(a,b){var c=a;while(a&&a.nodeType===3&&a.length===0)a=b?a.nextSibling:a.previousSibling;return a||c}e.length===b.startOffset?e=g(e.nextSibling,!0):e=e.parentNode,b.endOffset===0?f=g(f.previousSibling,!1):f=f.parentNode;if(e&&e===f)return e}}return d&&d.nodeType==3?d.parentNode:d}return b.item?b.item(0):b.parentElement()},getSelectedBlocks:function(b,c){var d=this,e=d.dom,f,g,h,i=[];f=e.getParent(b||d.getStart(),e.isBlock),g=e.getParent(c||d.getEnd(),e.isBlock),f&&i.push(f);if(f&&g&&f!=g){h=f;var j=new a.dom.TreeWalker(f,e.getRoot());while((h=j.next())&&h!=g)e.isBlock(h)&&i.push(h)}return g&&f!=g&&i.push(g),i},normalize:function(){function e(e){var f,g,h,i=b.dom,j=i.getRoot(),k;f=c[(e?"start":"end")+"Container"],g=c[(e?"start":"end")+"Offset"],f.nodeType===9&&(f=f.body,g=0);if(f===j&&f.hasChildNodes()){f=f.childNodes[Math.min(!e&&g>0?g-1:g,f.childNodes.length-1)],g=0;if(f.hasChildNodes()){k=f,h=new a.dom.TreeWalker(f,j);do{if(k.nodeType===3){g=e?0:k.nodeValue.length-1,f=k;break}if(k.nodeName==="BR"){g=i.nodeIndex(k),f=k.parentNode;break}}while(k=e?h.next():h.prev());d=!0}}d&&c["set"+(e?"Start":"End")](f,g)}var b=this,c,d;if(a.isIE)return;c=b.getRng(),e(!0),c.collapsed&&e(),d&&b.setRng(c)},destroy:function(b){var c=this;c.win=null,b||a.removeUnload(c.destroy)},_fixIESelection:function(){function g(a,b){var d=c.createTextRange();try{d.moveToPoint(a,b)}catch(e){d=null}return d}function h(a){var b;a.button?(b=g(a.x,a.y),b&&(b.compareEndPoints("StartToStart",e)>0?b.setEndPoint("StartToStart",e):b.setEndPoint("EndToEnd",e),b.select())):i()}function i(){var c=b.selection.createRange();e&&!c.item&&c.compareEndPoints("StartToEnd",c)===0&&e.select(),a.unbind(b,"mouseup",i),a.unbind(b,"mousemove",h),e=d=0}var a=this.dom,b=a.doc,c=b.body,d,e,f;b.documentElement.unselectable=!0,a.bind(b,["mousedown","contextmenu"],function(c){if(c.target.nodeName==="HTML"){d&&i(),f=b.documentElement;if(f.scrollHeight>f.clientHeight)return;d=1,e=g(c.x,c.y),e&&(a.bind(b,"mouseup",i),a.bind(b,"mousemove",h),a.win.focus(),e.select())}})}})}(tinymce),function(a){a.dom.Serializer=function(b,c,d){var e,f,g=a.isIE,h=a.each,i;return b.apply_source_formatting||(b.indent=!1),b.remove_trailing_brs=!0,c=c||a.DOM,d=d||new a.html.Schema(b),b.entity_encoding=b.entity_encoding||"named",e=new a.util.Dispatcher(self),f=new a.util.Dispatcher(self),i=new a.html.DomParser(b,d),i.addAttributeFilter("src,href,style",function(a,d){var e=a.length,f,g,h="data-mce-"+d,i=b.url_converter,j=b.url_converter_scope,k;while(e--)f=a[e],g=f.attributes.map[h],g!==k?(f.attr(d,g.length>0?g:null),f.attr(h,null)):(g=f.attributes.map[d],d==="style"?g=c.serializeStyle(c.parseStyle(g),f.name):i&&(g=i.call(j,g,d,f.name)),f.attr(d,g.length>0?g:null))}),i.addAttributeFilter("class",function(a,b){var c=a.length,d,e;while(c--)d=a[c],e=d.attr("class").replace(/\s*mce(Item\w+|Selected)\s*/g,""),d.attr("class",e.length>0?e:null)}),i.addAttributeFilter("data-mce-type",function(a,b,c){var d=a.length,e;while(d--)e=a[d],e.attributes.map["data-mce-type"]==="bookmark"&&!c.cleanup&&e.remove()}),i.addNodeFilter("script,style",function(a,b){function f(a){return a.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,"").replace(/\s*(\/\/\s*\]\]>|\/\/\s*-->|\]\]>|-->|\]\]-->)\s*$/g,"")}var c=a.length,d,e;while(c--)d=a[c],e=d.firstChild?d.firstChild.value:"",b==="script"?(d.attr("type",(d.attr("type")||"text/javascript").replace(/^mce\-/,"")),e.length>0&&(d.firstChild.value="// <![CDATA[\n"+f(e)+"\n// ]]>")):e.length>0&&(d.firstChild.value="<!--\n"+f(e)+"\n-->")}),i.addNodeFilter("#comment",function(a,b){var c=a.length,d;while(c--)d=a[c],d.value.indexOf("[CDATA[")===0?(d.name="#cdata",d.type=4,d.value=d.value.replace(/^\[CDATA\[|\]\]$/g,"")):d.value.indexOf("mce:protected ")===0&&(d.name="#text",d.type=3,d.raw=!0,d.value=unescape(d.value).substr(14))}),i.addNodeFilter("xml:namespace,input",function(a,b){var c=a.length,d;while(c--)d=a[c],d.type===7?d.remove():d.type===1&&b==="input"&&!("type"in d.attributes.map)&&d.attr("type","text")}),b.fix_list_elements&&i.addNodeFilter("ul,ol",function(a,b){var c=a.length,d,e;while(c--)d=a[c],e=d.parent,(e.name==="ul"||e.name==="ol")&&d.prev&&d.prev.name==="li"&&d.prev.append(d)}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(a,b){var c=a.length;while(c--)a[c].attr(b,null)}),{schema:d,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,onPreProcess:e,onPostProcess:f,serialize:function(j,k){var l,m,n,o,p;return g&&c.select("script,style,select,map").length>0?(p=j.innerHTML,j=j.cloneNode(!1),c.setHTML(j,p)):j=j.cloneNode(!0),l=j.ownerDocument.implementation,l.createHTMLDocument&&(m=l.createHTMLDocument(""),h(j.nodeName=="BODY"?j.childNodes:[j],function(a){m.body.appendChild(m.importNode(a,!0))}),j.nodeName!="BODY"?j=m.body.firstChild:j=m.body,n=c.doc,c.doc=m),k=k||{},k.format=k.format||"html",k.no_events||(k.node=j,e.dispatch(self,k)),o=new a.html.Serializer(b,d),k.content=o.serialize(i.parse(k.getInner?j.innerHTML:a.trim(c.getOuterHTML(j),k),k)),k.cleanup||(k.content=k.content.replace(/\uFEFF|\u200B/g,"")),k.no_events||f.dispatch(self,k),n&&(c.doc=n),k.node=null,k.content},addRules:function(a){d.addValidElements(a)},setRules:function(a){d.setValidElements(a)}}}}(tinymce),function(a){a.dom.ScriptLoader=function(b){function l(b,c){function j(){e.remove(i),f&&(f.onreadystatechange=f.onload=f=null),c()}function k(){typeof console!="undefined"&&console.log&&console.log("Failed to load: "+b)}var d=this,e=a.DOM,f,g,h,i;i=e.uniqueId();if(a.isIE6){g=new a.util.URI(b),h=location;if(g.host==h.hostname&&g.port==h.port&&g.protocol+":"==h.protocol&&g.protocol.toLowerCase()!="file"){a.util.XHR.send({url:a._addVer(g.getURI()),success:function(a){var b=e.create("script",{type:"text/javascript"});b.text=a,document.getElementsByTagName("head")[0].appendChild(b),e.remove(b),j()},error:k});return}}f=e.create("script",{id:i,type:"text/javascript",src:a._addVer(b)}),a.isIE||(f.onload=j),f.onerror=k,a.isOpera||(f.onreadystatechange=function(){var a=f.readyState;(a=="complete"||a=="loaded")&&j()}),(document.getElementsByTagName("head")[0]||document.body).appendChild(f)}var c=0,d=1,e=2,f={},g=[],h={},i=[],j=0,k;this.isDone=function(a){return f[a]==e},this.markDone=function(a){f[a]=e},this.add=this.load=function(a,b,d){var e,i=f[a];i==k&&(g.push(a),f[a]=c),b&&(h[a]||(h[a]=[]),h[a].push({func:b,scope:d||this}))},this.loadQueue=function(a,b){this.loadScripts(g,a,b)},this.loadScripts=function(b,c,g){function n(b){a.each(h[b],function(a){a.func.call(a.scope)}),h[b]=k}var m;i.push({func:c,scope:g||this}),m=function(){var c=a.grep(b);b.length=0,a.each(c,function(a){if(f[a]==e){n(a);return}f[a]!=d&&(f[a]=d,j++,l(a,function(){f[a]=e,j--,n(a),m()}))}),j||(a.each(i,function(a){a.func.call(a.scope)}),i.length=0)},m()}},a.ScriptLoader=new a.dom.ScriptLoader}(tinymce),tinymce.dom.TreeWalker=function(a,b){function d(a,c,d,e){var f,g;if(a){if(!e&&a[c])return a[c];if(a!=b){f=a[d];if(f)return f;for(g=a.parentNode;g&&g!=b;g=g.parentNode){f=g[d];if(f)return f}}}}var c=a;this.current=function(){return c},this.next=function(a){return c=d(c,"firstChild","nextSibling",a)},this.prev=function(a){return c=d(c,"lastChild","previousSibling",a)}},function(a){a.dom.RangeUtils=function(b){var c="﻿";this.walk=function(c,d){function p(a){var b;return b=a[0],b.nodeType===3&&b===e&&f>=b.nodeValue.length&&a.splice(0,1),b=a[a.length-1],h===0&&a.length>0&&b===g&&b.nodeType===3&&a.splice(a.length-1,1),a}function q(a,b,c){var d=[];for(;a&&a!=c;a=a[b])d.push(a);return d}function r(a,b){do{if(a.parentNode==b)return a;a=a.parentNode}while(a)}function s(a,b,c){var e=c?"nextSibling":"previousSibling";for(l=a,m=l.parentNode;l&&l!=b;l=m)m=l.parentNode,n=q(l==a?l:l[e],e),n.length&&(c||n.reverse(),d(p(n)))}var e=c.startContainer,f=c.startOffset,g=c.endContainer,h=c.endOffset,i,j,k,l,m,n,o;o=b.select("td.mceSelected,th.mceSelected");if(o.length>0){a.each(o,function(a){d([a])});return}e.nodeType==1&&e.hasChildNodes()&&(e=e.childNodes[f]),g.nodeType==1&&g.hasChildNodes()&&(g=g.childNodes[Math.min(h-1,g.childNodes.length-1)]);if(e==g)return d(p([e]));i=b.findCommonAncestor(e,g);for(l=e;l;l=l.parentNode){if(l===g)return s(e,i,!0);if(l===i)break}for(l=g;l;l=l.parentNode){if(l===e)return s(g,i);if(l===i)break}j=r(e,i)||e,k=r(g,i)||g,s(e,j,!0),n=q(j==e?j:j.nextSibling,"nextSibling",k==g?k.nextSibling:k),n.length&&d(p(n)),s(g,k)},this.split=function(a){function f(a,b){return a.splitText(b)}var b=a.startContainer,c=a.startOffset,d=a.endContainer,e=a.endOffset;return b==d&&b.nodeType==3?c>0&&c<b.nodeValue.length&&(d=f(b,c),b=d.previousSibling,e>c?(e-=c,b=d=f(d,e).previousSibling,e=d.nodeValue.length,c=0):e=0):(b.nodeType==3&&c>0&&c<b.nodeValue.length&&(b=f(b,c),c=0),d.nodeType==3&&e>0&&e<d.nodeValue.length&&(d=f(d,e).previousSibling,e=d.nodeValue.length)),{startContainer:b,startOffset:c,endContainer:d,endOffset:e}}},a.dom.RangeUtils.compareRanges=function(a,b){if(a&&b){if(!a.item&&!a.duplicate)return a.startContainer==b.startContainer&&a.startOffset==b.startOffset;if(a.item&&b.item&&a.item(0)===b.item(0))return!0;if(a.isEqual&&b.isEqual&&b.isEqual(a))return!0}return!1}}(tinymce),function(a){var b=a.dom.Event,c=a.each;a.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(d,e){var f=this,g=d.root,h=d.items,i=d.enableUpDown,j=d.enableLeftRight||!d.enableUpDown,k=d.excludeFromTabOrder,l,m,n,o,p;e=e||a.DOM,l=function(a){p=a.target.id},m=function(a){e.setAttrib(a.target.id,"tabindex","-1")},o=function(a){var b=e.get(p);e.setAttrib(b,"tabindex","0"),b.focus()},f.focus=function(){e.get(p).focus()},f.destroy=function(){c(h,function(a){e.unbind(e.get(a.id),"focus",l),e.unbind(e.get(a.id),"blur",m)}),e.unbind(e.get(g),"focus",o),e.unbind(e.get(g),"keydown",n),h=e=g=f.focus=l=m=n=o=null,f.destroy=function(){}},f.moveFocus=function(a,g){var i=-1,j=f.controls,k;if(!p)return;c(h,function(a,b){if(a.id===p)return i=b,!1}),i+=a,i<0?i=h.length-1:i>=h.length&&(i=0),k=h[i],e.setAttrib(p,"tabindex","-1"),e.setAttrib(k.id,"tabindex","0"),e.get(k.id).focus(),d.actOnFocus&&d.onAction(k.id),g&&b.cancel(g)},n=function(a){var c=37,e=39,g=38,h=40,k=27,l=14,m=13,n=32;switch(a.keyCode){case c:j&&f.moveFocus(-1);break;case e:j&&f.moveFocus(1);break;case g:i&&f.moveFocus(-1);break;case h:i&&f.moveFocus(1);break;case k:d.onCancel&&(d.onCancel(),b.cancel(a));break;case l:case m:case n:d.onAction&&(d.onAction(p),b.cancel(a))}},c(h,function(a,b){var c;a.id||(a.id=e.uniqueId("_mce_item_")),k?(e.bind(a.id,"blur",m),c="-1"):c=b===0?"0":"-1",e.setAttrib(a.id,"tabindex",c),e.bind(e.get(a.id),"focus",l)}),h[0]&&(p=h[0].id),e.setAttrib(g,"tabindex","-1"),e.bind(e.get(g),"focus",o),e.bind(e.get(g),"keydown",n)}})}(tinymce),function(a){var b=a.DOM,c=a.is;a.create("tinymce.ui.Control",{Control:function(b,c,d){this.id=b,this.settings=c=c||{},this.rendered=!1,this.onRender=new a.util.Dispatcher(this),this.classPrefix="",this.scope=c.scope||this,this.disabled=0,this.active=0,this.editor=d},setAriaProperty:function(a,c){var d=b.get(this.id+"_aria")||b.get(this.id);d&&b.setAttrib(d,"aria-"+a,!!c)},focus:function(){b.get(this.id).focus()},setDisabled:function(a){a!=this.disabled&&(this.setAriaProperty("disabled",a),this.setState("Disabled",a),this.setState("Enabled",!a),this.disabled=a)},isDisabled:function(){return this.disabled},setActive:function(a){a!=this.active&&(this.setState("Active",a),this.active=a,this.setAriaProperty("pressed",a))},isActive:function(){return this.active},setState:function(a,c){var d=b.get(this.id);a=this.classPrefix+a,c?b.addClass(d,a):b.removeClass(d,a)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(a){b.setHTML(a,this.renderHTML())},postRender:function(){var a=this,b;c(a.disabled)&&(b=a.disabled,a.disabled=-1,a.setDisabled(b)),c(a.active)&&(b=a.active,a.active=-1,a.setActive(b))},remove:function(){b.remove(this.id),this.destroy()},destroy:function(){a.dom.Event.clear(this.id)}})}(tinymce),tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(a,b,c){this.parent(a,b,c),this.controls=[],this.lookup={}},add:function(a){return this.lookup[a.id]=a,this.controls.push(a),a},get:function(a){return this.lookup[a]}}),tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(a,b){this.parent(a,b),this.classPrefix="mceSeparator",this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}}),function(a){var b=a.is,c=a.DOM,d=a.each,e=a.walk;a.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(a,b){this.parent(a,b),this.classPrefix="mceMenuItem"},setSelected:function(a){this.setState("Selected",a),this.setAriaProperty("checked",!!a),this.selected=a},isSelected:function(){return this.selected},postRender:function(){var a=this;a.parent(),b(a.selected)&&a.setSelected(a.selected)}})}(tinymce),function(a){var b=a.is,c=a.DOM,d=a.each,e=a.walk;a.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(b,c){var d=this;d.parent(b,c),d.items={},d.collapsed=!1,d.menuCount=0,d.onAddItem=new a.util.Dispatcher(this)},expand:function(a){var b=this;a&&e(b,function(a){a.expand&&a.expand()},"items",b),b.collapsed=!1},collapse:function(a){var b=this;a&&e(b,function(a){a.collapse&&a.collapse()},"items",b),b.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(b){return b.settings||(b=new a.ui.MenuItem(b.id||c.uniqueId(),b)),this.onAddItem.dispatch(this,b),this.items[b.id]=b},addSeparator:function(){return this.add({separator:!0})},addMenu:function(a){return a.collapse||(a=this.createMenu(a)),this.menuCount++,this.add(a)},hasMenus:function(){return this.menuCount!==0},remove:function(a){delete this.items[a.id]},removeAll:function(){var a=this;e(a,function(a){a.removeAll?a.removeAll():a.remove(),a.destroy()},"items",a),a.items={}},createMenu:function(b){var d=new a.ui.Menu(b.id||c.uniqueId(),b);return d.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),d}})}(tinymce),function(a){var b=a.is,c=a.DOM,d=a.each,e=a.dom.Event,f=a.dom.Element;a.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(d,e){e=e||{},e.container=e.container||c.doc.body,e.offset_x=e.offset_x||0,e.offset_y=e.offset_y||0,e.vp_offset_x=e.vp_offset_x||0,e.vp_offset_y=e.vp_offset_y||0,b(e.icons)&&!e.icons&&(e["class"]+=" mceNoIcons"),this.parent(d,e),this.onShowMenu=new a.util.Dispatcher(this),this.onHideMenu=new a.util.Dispatcher(this),this.classPrefix="mceMenu"},createMenu:function(b){var d=this,e=d.settings,f;return b.container=b.container||e.container,b.parent=d,b.constrain=b.constrain||e.constrain,b["class"]=b["class"]||e["class"],b.vp_offset_x=b.vp_offset_x||e.vp_offset_x,b.vp_offset_y=b.vp_offset_y||e.vp_offset_y,b.keyboard_focus=e.keyboard_focus,f=new a.ui.DropMenu(b.id||c.uniqueId(),b),f.onAddItem.add(d.onAddItem.dispatch,d.onAddItem),f},focus:function(){var a=this;a.keyboardNav&&a.keyboardNav.focus()},update:function(){var a=this,b=a.settings,d=c.get("menu_"+a.id+"_tbl"),e=c.get("menu_"+a.id+"_co"),f,g;f=b.max_width?Math.min(d.clientWidth,b.max_width):d.clientWidth,g=b.max_height?Math.min(d.clientHeight,b.max_height):d.clientHeight,c.boxModel?a.element.setStyles({width:f,height:g}):a.element.setStyles({width:f+2,height:g+2}),b.max_width&&c.setStyle(e,"width",f),b.max_height&&(c.setStyle(e,"height",g),d.clientHeight<b.max_height&&c.setStyle(e,"overflow","hidden"))},showMenu:function(b,g,h){var i=this,j=i.settings,k,l=c.getViewPort(),m,n,o,p,q=2,r,s,t=i.classPrefix;i.collapse(1);if(i.isMenuVisible)return;i.rendered?k=c.get("menu_"+i.id):(k=c.add(i.settings.container,i.renderNode()),d(i.items,function(a){a.postRender()}),i.element=new f("menu_"+i.id,{blocker:1,container:j.container})),a.isOpera||c.setStyles(k,{left:-65535,top:-65535}),c.show(k),i.update(),b+=j.offset_x||0,g+=j.offset_y||0,l.w-=4,l.h-=4,j.constrain&&(m=k.clientWidth-q,n=k.clientHeight-q,o=l.x+l.w,p=l.y+l.h,b+j.vp_offset_x+m>o&&(b=h?h-m:Math.max(0,o-j.vp_offset_x-m)),g+j.vp_offset_y+n>p&&(g=Math.max(0,p-j.vp_offset_y-n))),c.setStyles(k,{left:b,top:g}),i.element.update(),i.isMenuVisible=1,i.mouseClickFunc=e.add(k,"click",function(a){var b;a=a.target;if(a&&(a=c.getParent(a,"tr"))&&!c.hasClass(a,t+"ItemSub")){b=i.items[a.id];if(b.isDisabled())return;r=i;while(r)r.hideMenu&&r.hideMenu(),r=r.settings.parent;return b.settings.onclick&&b.settings.onclick(a),e.cancel(a)}}),i.hasMenus()&&(i.mouseOverFunc=e.add(k,"mouseover",function(a){var b,d,e;a=a.target;if(a&&(a=c.getParent(a,"tr"))){b=i.items[a.id],i.lastMenu&&i.lastMenu.collapse(1);if(b.isDisabled())return;a&&c.hasClass(a,t+"ItemSub")&&(d=c.getRect(a),b.showMenu(d.x+d.w-q,d.y-q,d.x),i.lastMenu=b,c.addClass(c.get(b.id).firstChild,t+"ItemActive"))}})),e.add(k,"keydown",i._keyHandler,i),i.onShowMenu.dispatch(i),j.keyboard_focus&&i._setupKeyboardNav()},hideMenu:function(a){var b=this,d=c.get("menu_"+b.id),f;if(!b.isMenuVisible)return;b.keyboardNav&&b.keyboardNav.destroy(),e.remove(d,"mouseover",b.mouseOverFunc),e.remove(d,"click",b.mouseClickFunc),e.remove(d,"keydown",b._keyHandler),c.hide(d),b.isMenuVisible=0,a||b.collapse(1),b.element&&b.element.hide(),(f=c.get(b.id))&&c.removeClass(f.firstChild,b.classPrefix+"ItemActive"),b.onHideMenu.dispatch(b)},add:function(a){var b=this,d;return a=b.parent(a),b.isRendered&&(d=c.get("menu_"+b.id))&&b._add(c.select("tbody",d)[0],a),a},collapse:function(a){this.parent(a),this.hideMenu(1)},remove:function(a){return c.remove(a.id),this.destroy(),this.parent(a)},destroy:function(){var a=this,b=c.get("menu_"+a.id);a.keyboardNav&&a.keyboardNav.destroy(),e.remove(b,"mouseover",a.mouseOverFunc),e.remove(c.select("a",b),"focus",a.mouseOverFunc),e.remove(b,"click",a.mouseClickFunc),e.remove(b,"keydown",a._keyHandler),a.element&&a.element.remove(),c.remove(b)},renderNode:function(){var a=this,b=a.settings,e,g,h,i;return i=c.create("div",{role:"listbox",id:"menu_"+a.id,"class":b["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"}),a.settings.parent&&c.setAttrib(i,"aria-parent","menu_"+a.settings.parent.id),h=c.add(i,"div",{role:"presentation",id:"menu_"+a.id+"_co","class":a.classPrefix+(b["class"]?" "+b["class"]:"")}),a.element=new f("menu_"+a.id,{blocker:1,container:b.container}),b.menu_line&&c.add(h,"span",{"class":a.classPrefix+"Line"}),e=c.add(h,"table",{role:"presentation",id:"menu_"+a.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),g=c.add(e,"tbody"),d(a.items,function(b){a._add(g,b)}),a.rendered=!0,i},_setupKeyboardNav:function(){var b,d,e=this;b=c.select("#menu_"+e.id)[0],d=c.select("a[role=option]","menu_"+e.id),d.splice(0,0,b),e.keyboardNav=new a.ui.KeyboardNavigation({root:"menu_"+e.id,items:d,onCancel:function(){e.hideMenu()},enableUpDown:!0}),b.focus()},_keyHandler:function(a){var b=this,c;switch(a.keyCode){case 37:b.settings.parent&&(b.hideMenu(),b.settings.parent.focus(),e.cancel(a));break;case 39:b.mouseOverFunc&&b.mouseOverFunc(a)}},_add:function(a,b){var d,e=b.settings,f,g,h,i=this.classPrefix,j;if(e.separator){g=c.add(a,"tr",{id:b.id,"class":i+"ItemSeparator"}),c.add(g,"td",{"class":i+"ItemSeparator"}),(d=g.previousSibling)&&c.addClass(d,"mceLast");return}d=g=c.add(a,"tr",{id:b.id,"class":i+"Item "+i+"ItemEnabled"}),d=h=c.add(d,e.titleItem?"th":"td"),d=f=c.add(d,"a",{id:b.id+"_aria",role:e.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),e.parent&&(c.setAttrib(f,"aria-haspopup","true"),c.setAttrib(f,"aria-owns","menu_"+b.id)),c.addClass(h,e["class"]),j=c.add(d,"span",{"class":"mceIcon"+(e.icon?" mce_"+e.icon:"")}),e.icon_src&&c.add(j,"img",{src:e.icon_src}),d=c.add(d,e.element||"span",{"class":"mceText",title:b.settings.title},b.settings.title),b.settings.style&&c.setAttrib(d,"style",b.settings.style),a.childNodes.length==1&&c.addClass(g,"mceFirst"),(d=g.previousSibling)&&c.hasClass(d,i+"ItemSeparator")&&c.addClass(g,"mceFirst"),b.collapse&&c.addClass(g,i+"ItemSub"),(d=g.previousSibling)&&c.removeClass(d,"mceLast"),c.addClass(g,"mceLast")}})}(tinymce),function(a){var b=a.DOM;a.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(a,b,c){this.parent(a,b,c),this.classPrefix="mceButton"},renderHTML:function(){var a=this.classPrefix,c=this.settings,d,e;return e=b.encode(c.label||""),d='<a role="button" id="'+this.id+'" href="javascript:;" class="'+a+" "+a+"Enabled "+c["class"]+(e?" "+a+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+b.encode(c.title)+'">',c.image&&(!this.editor||!this.editor.forcedHighContrastMode)?d+='<img class="mceIcon" src="'+c.image+'" alt="'+b.encode(c.title)+'" />'+e:d+='<span class="mceIcon '+c["class"]+'"></span>'+(e?'<span class="'+a+'Label">'+e+"</span>":""),d+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+c.title+"</span>",d+="</a>",d},postRender:function(){var b=this,c=b.settings;a.dom.Event.add(b.id,"click",function(a){if(!b.isDisabled())return c.onclick.call(c.scope,a)})}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each,e=a.util.Dispatcher;a.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(b,c,d){var f=this;f.parent(b,c,d),f.items=[],f.onChange=new e(f),f.onPostRender=new e(f),f.onAdd=new e(f),f.onRenderMenu=new a.util.Dispatcher(this),f.classPrefix="mceListBox"},select:function(a){var b=this,c,e;if(a==undefined)return b.selectByIndex(-1);a&&a.call?e=a:e=function(b){return b==a},a!=b.selectedValue&&(d(b.items,function(a,d){if(e(a.value))return c=1,b.selectByIndex(d),!1}),c||b.selectByIndex(-1))},selectByIndex:function(a){var c=this,d,e,f;a!=c.selectedIndex&&(d=b.get(c.id+"_text"),f=b.get(c.id+"_voiceDesc"),e=c.items[a],e?(c.selectedValue=e.value,c.selectedIndex=a,b.setHTML(d,b.encode(e.title)),b.setHTML(f,c.settings.title+" - "+e.title),b.removeClass(d,"mceTitle"),b.setAttrib(c.id,"aria-valuenow",e.title)):(b.setHTML(d,b.encode(c.settings.title)),b.setHTML(f,b.encode(c.settings.title)),b.addClass(d,"mceTitle"),c.selectedValue=c.selectedIndex=null,b.setAttrib(c.id,"aria-valuenow",c.settings.title)),d=0)},add:function(b,c,d){var e=this;d=d||{},d=a.extend(d,{title:b,value:c}),e.items.push(d),e.onAdd.dispatch(e,d)},getLength:function(){return this.items.length},renderHTML:function(){var a="",c=this,d=c.settings,e=c.classPrefix;return a='<span role="listbox" aria-haspopup="true" aria-labelledby="'+c.id+'_voiceDesc" aria-describedby="'+c.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+c.id+'" cellpadding="0" cellspacing="0" class="'+e+" "+e+"Enabled"+(d["class"]?" "+d["class"]:"")+'"><tbody><tr>',a+="<td>"+b.createHTML("span",{id:c.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},c.settings.title),a+=b.createHTML("a",{id:c.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},b.encode(c.settings.title))+"</td>",a+="<td>"+b.createHTML("a",{id:c.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span></span>')+"</td>",a+="</tr></tbody></table></span>",a},showMenu:function(){var e=this,f,g=b.get(this.id),h;if(e.isDisabled()||e.items.length==0)return;if(e.menu&&e.menu.isMenuVisible)return e.hideMenu();e.isMenuRendered||(e.renderMenu(),e.isMenuRendered=!0),f=b.getPos(g),h=e.menu,h.settings.offset_x=f.x,h.settings.offset_y=f.y,h.settings.keyboard_focus=!a.isOpera,e.oldID&&h.items[e.oldID].setSelected(0),d(e.items,function(a){a.value===e.selectedValue&&(h.items[a.id].setSelected(1),e.oldID=a.id)}),h.showMenu(0,g.clientHeight),c.add(b.doc,"mousedown",e.hideMenu,e),b.addClass(e.id,e.classPrefix+"Selected")},hideMenu:function(a){var d=this;if(d.menu&&d.menu.isMenuVisible){b.removeClass(d.id,d.classPrefix+"Selected");if(!(!a||a.type!="mousedown"||a.target.id!=d.id+"_text"&&a.target.id!=d.id+"_open"))return;if(!a||!b.getParent(a.target,".mceMenu"))b.removeClass(d.id,d.classPrefix+"Selected"),c.remove(b.doc,"mousedown",d.hideMenu,d),d.menu.hideMenu()}},renderMenu:function(){var a=this,c;c=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":a.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150}),c.onHideMenu.add(function(){a.hideMenu(),a.focus()}),c.add({title:a.settings.title,"class":"mceMenuItemTitle",onclick:function(){a.settings.onselect("")!==!1&&a.select("")}}),d(a.items,function(d){d.value===undefined?c.add({title:d.title,role:"option","class":"mceMenuItemTitle",onclick:function(){a.settings.onselect("")!==!1&&a.select("")}}):(d.id=b.uniqueId(),d.role="option",d.onclick=function(){a.settings.onselect(d.value)!==!1&&a.select(d.value)},c.add(d))}),a.onRenderMenu.dispatch(a,c),a.menu=c},postRender:function(){var d=this,e=d.classPrefix;c.add(d.id,"click",d.showMenu,d),c.add(d.id,"keydown",function(a){a.keyCode==32&&(d.showMenu(a),c.cancel(a))}),c.add(d.id,"focus",function(){d._focused||(d.keyDownHandler=c.add(d.id,"keydown",function(a){a.keyCode==40&&(d.showMenu(),c.cancel(a))}),d.keyPressHandler=c.add(d.id,"keypress",function(a){var b;a.keyCode==13&&(b=d.selectedValue,d.selectedValue=null,c.cancel(a),d.settings.onselect(b))})),d._focused=1}),c.add(d.id,"blur",function(){c.remove(d.id,"keydown",d.keyDownHandler),c.remove(d.id,"keypress",d.keyPressHandler),d._focused=0});if(a.isIE6||!b.boxModel)c.add(d.id,"mouseover",function(){b.hasClass(d.id,e+"Disabled")||b.addClass(d.id,e+"Hover")}),c.add(d.id,"mouseout",function(){b.hasClass(d.id,e+"Disabled")||b.removeClass(d.id,e+"Hover")});d.onPostRender.dispatch(d,b.get(d.id))},destroy:function(){this.parent(),c.clear(this.id+"_text"),c.clear(this.id+"_open")}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each,e=a.util.Dispatcher;a.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(a,b){this.parent(a,b),this.classPrefix="mceNativeListBox"},setDisabled:function(a){b.get(this.id).disabled=a,this.setAriaProperty("disabled",a)},isDisabled:function(){return b.get(this.id).disabled},select:function(a){var b=this,c,e;if(a==undefined)return b.selectByIndex(-1);a&&a.call?e=a:e=function(b){return b==a},a!=b.selectedValue&&(d(b.items,function(a,d){if(e(a.value))return c=1,b.selectByIndex(d),!1}),c||b.selectByIndex(-1))},selectByIndex:function(a){b.get(this.id).selectedIndex=a+1,this.selectedValue=this.items[a]?this.items[a].value:null},add:function(a,c,d){var e,f=this;d=d||{},d.value=c,f.isRendered()&&b.add(b.get(this.id),"option",d,a),e={title:a,value:c,attribs:d},f.items.push(e),f.onAdd.dispatch(f,e)},getLength:function(){return this.items.length},renderHTML:function(){var a,c=this;return a=b.createHTML("option",{value:""},"-- "+c.settings.title+" --"),d(c.items,function(c){a+=b.createHTML("option",{value:c.value},c.title)}),a=b.createHTML("select",{id:c.id,"class":"mceNativeListBox","aria-labelledby":c.id+"_aria"},a),a+=b.createHTML("span",{id:c.id+"_aria",style:"display: none"},c.settings.title),a},postRender:function(){function g(a){var b=d.items[a.target.selectedIndex-1];b&&(b=b.value)&&(d.onChange.dispatch(d,b),d.settings.onselect&&d.settings.onselect(b))}var d=this,e,f=!0;d.rendered=!0,c.add(d.id,"change",g),c.add(d.id,"keydown",function(b){var h;c.remove(d.id,"change",e),f=!1,h=c.add(d.id,"blur",function(){if(f)return;f=!0,c.add(d.id,"change",g),c.remove(d.id,"blur",h)});if(!(!a.isWebKit||b.keyCode!=37&&b.keyCode!=39))return c.prevent(b);if(b.keyCode==13||b.keyCode==32)return g(b),c.cancel(b)}),d.onPostRender.dispatch(d,b.get(d.id))}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each;a.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(c,d,e){this.parent(c,d,e),this.onRenderMenu=new a.util.Dispatcher(this),d.menu_container=d.menu_container||b.doc.body},showMenu:function(){var a=this,d,e,f=b.get(a.id),g;if(a.isDisabled())return;a.isMenuRendered||(a.renderMenu(),a.isMenuRendered=!0);if(a.isMenuVisible)return a.hideMenu();d=b.getPos(a.settings.menu_container),e=b.getPos(f),g=a.menu,g.settings.offset_x=e.x,g.settings.offset_y=e.y,g.settings.vp_offset_x=e.x,g.settings.vp_offset_y=e.y,g.settings.keyboard_focus=a._focused,g.showMenu(0,f.clientHeight),c.add(b.doc,"mousedown",a.hideMenu,a),a.setState("Selected",1),a.isMenuVisible=1},renderMenu:function(){var a=this,b;b=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:a.settings.icons}),b.onHideMenu.add(function(){a.hideMenu(),a.focus()}),a.onRenderMenu.dispatch(a,b),a.menu=b},hideMenu:function(a){var d=this;if(a&&a.type=="mousedown"&&b.getParent(a.target,function(a){return a.id===d.id||a.id===d.id+"_open"}))return;if(!a||!b.getParent(a.target,".mceMenu"))d.setState("Selected",0),c.remove(b.doc,"mousedown",d.hideMenu,d),d.menu&&d.menu.hideMenu();d.isMenuVisible=0},postRender:function(){var a=this,b=a.settings;c.add(a.id,"click",function(){a.isDisabled()||(b.onclick&&b.onclick(a.value),a.showMenu())})}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each;a.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(a,b,c){this.parent(a,b,c),this.classPrefix="mceSplitButton"},renderHTML:function(){var a,c=this,d=c.settings,e;return a="<tbody><tr>",d.image?e=b.createHTML("img ",{src:d.image,role:"presentation","class":"mceAction "+d["class"]}):e=b.createHTML("span",{"class":"mceAction "+d["class"]},""),e+=b.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:c.id+"_voice",style:"display:none;"},d.title),a+="<td >"+b.createHTML("a",{role:"button",id:c.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+d["class"],onclick:"return false;",onmousedown:"return false;",title:d.title},e)+"</td>",e=b.createHTML("span",{"class":"mceOpen "+d["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span>'),a+="<td >"+b.createHTML("a",{role:"button",id:c.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+d["class"],onclick:"return false;",onmousedown:"return false;",title:d.title},e)+"</td>",a+="</tr></tbody>",a=b.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+d["class"],cellpadding:"0",cellspacing:"0",title:d.title},a),b.createHTML("div",{id:c.id,role:"button",tabindex:"0","aria-labelledby":c.id+"_voice","aria-haspopup":"true"},a)},postRender:function(){var d=this,e=d.settings,f;e.onclick&&(f=function(a){d.isDisabled()||(e.onclick(d.value),c.cancel(a))},c.add(d.id+"_action","click",f),c.add(d.id,["click","keydown"],function(a){var b=32,e=14,g=13,h=38,i=40;if((a.keyCode===32||a.keyCode===13||a.keyCode===14)&&!a.altKey&&!a.ctrlKey&&!a.metaKey)f(),c.cancel(a);else if(a.type==="click"||a.keyCode===i)d.showMenu(),c.cancel(a)})),c.add(d.id+"_open","click",function(a){d.showMenu(),c.cancel(a)}),c.add([d.id,d.id+"_open"],"focus",function(){d._focused=1}),c.add([d.id,d.id+"_open"],"blur",function(){d._focused=0});if(a.isIE6||!b.boxModel)c.add(d.id,"mouseover",function(){b.hasClass(d.id,"mceSplitButtonDisabled")||b.addClass(d.id,"mceSplitButtonHover")}),c.add(d.id,"mouseout",function(){b.hasClass(d.id,"mceSplitButtonDisabled")||b.removeClass(d.id,"mceSplitButtonHover")})},destroy:function(){this.parent(),c.clear(this.id+"_action"),c.clear(this.id+"_open"),c.clear(this.id)}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.is,e=a.each;a.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(b,c,d){var e=this;e.parent(b,c,d),e.settings=c=a.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},e.settings),e.onShowMenu=new a.util.Dispatcher(e),e.onHideMenu=new a.util.Dispatcher(e),e.value=c.default_color},showMenu:function(){var a=this,d,e,f,g;if(a.isDisabled())return;a.isMenuRendered||(a.renderMenu(),a.isMenuRendered=!0);if(a.isMenuVisible)return a.hideMenu();f=b.get(a.id),b.show(a.id+"_menu"),b.addClass(f,"mceSplitButtonSelected"),g=b.getPos(f),b.setStyles(a.id+"_menu",{left:g.x,top:g.y+f.clientHeight,zIndex:2e5}),f=0,c.add(b.doc,"mousedown",a.hideMenu,a),a.onShowMenu.dispatch(a),a._focused&&(a._keyHandler=c.add(a.id+"_menu","keydown",function(b){b.keyCode==27&&a.hideMenu()}),b.select("a",a.id+"_menu")[0].focus()),a.isMenuVisible=1},hideMenu:function(a){var d=this;if(d.isMenuVisible){if(a&&a.type=="mousedown"&&b.getParent(a.target
,function(a){return a.id===d.id+"_open"}))return;if(!a||!b.getParent(a.target,".mceSplitButtonMenu"))b.removeClass(d.id,"mceSplitButtonSelected"),c.remove(b.doc,"mousedown",d.hideMenu,d),c.remove(d.id+"_menu","keydown",d._keyHandler),b.hide(d.id+"_menu");d.isMenuVisible=0,d.onHideMenu.dispatch()}},renderMenu:function(){var f=this,g,h=0,i=f.settings,j,k,l,m,n;return m=b.add(i.menu_container,"div",{role:"listbox",id:f.id+"_menu","class":i.menu_class+" "+i["class"],style:"position:absolute;left:0;top:-1000px;"}),g=b.add(m,"div",{"class":i["class"]+" mceSplitButtonMenu"}),b.add(g,"span",{"class":"mceMenuLine"}),j=b.add(g,"table",{role:"presentation","class":"mceColorSplitMenu"}),k=b.add(j,"tbody"),h=0,e(d(i.colors,"array")?i.colors:i.colors.split(","),function(a){a=a.replace(/^#/,""),h--||(l=b.add(k,"tr"),h=i.grid_width-1),j=b.add(l,"td"),j=b.add(j,"a",{role:"option",href:"javascript:;",style:{backgroundColor:"#"+a},title:f.editor.getLang("colors."+a,a),"data-mce-color":"#"+a}),f.editor.forcedHighContrastMode&&(j=b.add(j,"canvas",{width:16,height:16,"aria-hidden":"true"}),j.getContext&&(n=j.getContext("2d"))?(n.fillStyle="#"+a,n.fillRect(0,0,16,16)):b.remove(j))}),i.more_colors_func&&(j=b.add(k,"tr"),j=b.add(j,"td",{colspan:i.grid_width,"class":"mceMoreColors"}),j=b.add(j,"a",{role:"option",id:f.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},i.more_colors_title),c.add(j,"click",function(a){return i.more_colors_func.call(i.more_colors_scope||this),c.cancel(a)})),b.addClass(g,"mceColorSplitMenu"),new a.ui.KeyboardNavigation({root:f.id+"_menu",items:b.select("a",f.id+"_menu"),onCancel:function(){f.hideMenu(),f.focus()}}),c.add(f.id+"_menu","mousedown",function(a){return c.cancel(a)}),c.add(f.id+"_menu","click",function(a){var d;return a=b.getParent(a.target,"a",k),a&&a.nodeName.toLowerCase()=="a"&&(d=a.getAttribute("data-mce-color"))&&f.setColor(d),c.cancel(a)}),m},setColor:function(a){this.displayColor(a),this.hideMenu(),this.settings.onselect(a)},displayColor:function(a){var c=this;b.setStyle(c.id+"_preview","backgroundColor",a),c.value=a},postRender:function(){var a=this,c=a.id;a.parent(),b.add(c+"_action","div",{id:c+"_preview","class":"mceColorPreview"}),b.setStyle(a.id+"_preview","backgroundColor",a.value)},destroy:function(){this.parent(),c.clear(this.id+"_menu"),c.clear(this.id+"_more"),b.remove(this.id+"_menu")}})}(tinymce),function(a){var b=a.DOM,c=a.each,d=a.dom.Event;a.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var c=this,d=[],e=c.controls,f=a.each,g=c.settings;return d.push('<div id="'+c.id+'" role="group" aria-labelledby="'+c.id+'_voice">'),d.push("<span role='application'>"),d.push('<span id="'+c.id+'_voice" class="mceVoiceLabel" style="display:none;">'+b.encode(g.name)+"</span>"),f(e,function(a){d.push(a.renderHTML())}),d.push("</span>"),d.push("</div>"),d.join("")},focus:function(){var a=this;b.get(a.id).focus()},postRender:function(){var d=this,e=[];c(d.controls,function(a){c(a.controls,function(a){a.id&&e.push(a)})}),d.keyNav=new a.ui.KeyboardNavigation({root:d.id,items:e,onCancel:function(){a.isWebKit&&b.get(d.editor.id+"_ifr").focus(),d.editor.focus()},excludeFromTabOrder:!d.settings.tab_focus_toolbar})},destroy:function(){var a=this;a.parent(),a.keyNav.destroy(),d.clear(a.id)}})}(tinymce),function(a){var b=a.DOM,c=a.each;a.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var a=this,c="",d,e,f=a.settings,g,h,i,j;j=a.controls;for(g=0;g<j.length;g++)e=j[g],h=j[g-1],i=j[g+1],g===0&&(d="mceToolbarStart",e.Button?d+=" mceToolbarStartButton":e.SplitButton?d+=" mceToolbarStartSplitButton":e.ListBox&&(d+=" mceToolbarStartListBox"),c+=b.createHTML("td",{"class":d},b.createHTML("span",null,"<!-- IE -->"))),h&&e.ListBox&&(h.Button||h.SplitButton)&&(c+=b.createHTML("td",{"class":"mceToolbarEnd"},b.createHTML("span",null,"<!-- IE -->"))),b.stdMode?c+='<td style="position: relative">'+e.renderHTML()+"</td>":c+="<td>"+e.renderHTML()+"</td>",i&&e.ListBox&&(i.Button||i.SplitButton)&&(c+=b.createHTML("td",{"class":"mceToolbarStart"},b.createHTML("span",null,"<!-- IE -->")));return d="mceToolbarEnd",e.Button?d+=" mceToolbarEndButton":e.SplitButton?d+=" mceToolbarEndSplitButton":e.ListBox&&(d+=" mceToolbarEndListBox"),c+=b.createHTML("td",{"class":d},b.createHTML("span",null,"<!-- IE -->")),b.createHTML("table",{id:a.id,"class":"mceToolbar"+(f["class"]?" "+f["class"]:""),cellpadding:"0",cellspacing:"0",align:a.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+c+"</tr></tbody>")}})}(tinymce),function(a){var b=a.util.Dispatcher,c=a.each;a.create("tinymce.AddOnManager",{AddOnManager:function(){var a=this;a.items=[],a.urls={},a.lookup={},a.onAdd=new b(a)},get:function(a){return this.lookup[a]?this.lookup[a].instance:undefined},dependencies:function(a){var b;return this.lookup[a]&&(b=this.lookup[a].dependencies),b||[]},requireLangPack:function(b){var c=a.settings;c&&c.language&&c.language_load!==!1&&a.ScriptLoader.add(this.urls[b]+"/langs/"+c.language+".js")},add:function(a,b,c){return this.items.push(b),this.lookup[a]={instance:b,dependencies:c},this.onAdd.dispatch(this,a,b),b},createUrl:function(a,b){return typeof b=="object"?b:{prefix:a.prefix,resource:b,suffix:a.suffix}},addComponents:function(b,c){var d=this.urls[b];a.each(c,function(b){a.ScriptLoader.add(d+"/"+b)})},load:function(b,c,d,e){function h(){var g=f.dependencies(b);a.each(g,function(a){var b=f.createUrl(c,a);f.load(b.resource,b,undefined,undefined)}),d&&(e?d.call(e):d.call(a.ScriptLoader))}var f=this,g=c;if(f.urls[b])return;typeof c=="object"&&(g=c.prefix+c.resource+c.suffix),g.indexOf("/")!=0&&g.indexOf("://")==-1&&(g=a.baseURL+"/"+g),f.urls[b]=g.substring(0,g.lastIndexOf("/")),f.lookup[b]?h():a.ScriptLoader.add(g,h,e)}}),a.PluginManager=new a.AddOnManager,a.ThemeManager=new a.AddOnManager}(tinymce),function(a){var b=a.each,c=a.extend,d=a.DOM,e=a.dom.Event,f=a.ThemeManager,g=a.PluginManager,h=a.explode,i=a.util.Dispatcher,j,k=0;a.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(a.documentBaseURL)||(a.documentBaseURL+="/"),a.baseURL=(new a.util.URI(a.documentBaseURL)).toAbsolute(a.baseURL),a.baseURI=new a.util.URI(a.baseURL),a.onBeforeUnload=new i(a),e.add(window,"beforeunload",function(b){a.onBeforeUnload.dispatch(a,b)}),a.onAddEditor=new i(a),a.onRemoveEditor=new i(a),a.EditorManager=c(a,{editors:[],i18n:{},activeEditor:null,init:function(f){function o(b,c,d){var e=b[c];if(!e)return;return a.is(e,"string")&&(d=e.replace(/\.\w+$/,""),d=d?a.resolve(d):0,e=a.resolve(e)),e.apply(d||this,Array.prototype.slice.call(arguments,2))}var g=this,i,j=a.ScriptLoader,l,m=[],n;f=c({theme:"simple",language:"en"},f),g.settings=f,e.add(document,"init",function(){var c,e;o(f,"onpageload");switch(f.mode){case"exact":c=f.elements||"",c.length>0&&b(h(c),function(c){d.get(c)?(n=new a.Editor(c,f),m.push(n),n.render(1)):b(document.forms,function(e){b(e.elements,function(b){b.name===c&&(c="mce_editor_"+k++,d.setAttrib(b,"id",c),n=new a.Editor(c,f),m.push(n),n.render(1))})})});break;case"textareas":case"specific_textareas":function i(a,b){return b.constructor===RegExp?b.test(a.className):d.hasClass(a,b)}b(d.select("textarea"),function(b){if(f.editor_deselector&&i(b,f.editor_deselector))return;if(!f.editor_selector||i(b,f.editor_selector)){l=d.get(b.name),!b.id&&!l&&(b.id=b.name);if(!b.id||g.get(b.id))b.id=d.uniqueId();n=new a.Editor(b.id,f),m.push(n),n.render(1)}})}f.oninit&&(c=e=0,b(m,function(a){e++,a.initialized?c++:a.onInit.add(function(){c++,c==e&&o(f,"oninit")}),c==e&&o(f,"oninit")}))})},get:function(a){return a===j?this.editors:this.editors[a]},getInstanceById:function(a){return this.get(a)},add:function(b){var c=this,d=c.editors;return d[b.id]=b,d.push(b),c._setActive(b),c.onAddEditor.dispatch(c,b),a.adapter&&a.adapter.patchEditor(b),b},remove:function(a){var b=this,c,d=b.editors;if(!d[a.id])return null;delete d[a.id];for(c=0;c<d.length;c++)if(d[c]==a){d.splice(c,1);break}return b.activeEditor==a&&b._setActive(d[0]),a.destroy(),b.onRemoveEditor.dispatch(b,a),a},execCommand:function(b,c,d){var e=this,f=e.get(d),g;switch(b){case"mceFocus":return f.focus(),!0;case"mceAddEditor":case"mceAddControl":return e.get(d)||(new a.Editor(d,e.settings)).render(),!0;case"mceAddFrameControl":g=d.window,g.tinyMCE=tinyMCE,g.tinymce=a,a.DOM.doc=g.document,a.DOM.win=g,f=new a.Editor(d.element_id,d),f.render();if(a.isIE){function h(){f.destroy(),g.detachEvent("onunload",h),g=g.tinyMCE=g.tinymce=null}g.attachEvent("onunload",h)}return d.page_window=null,!0;case"mceRemoveEditor":case"mceRemoveControl":return f&&f.remove(),!0;case"mceToggleEditor":if(!f)return e.execCommand("mceAddControl",0,d),!0;return f.isHidden()?f.show():f.hide(),!0}return e.activeEditor?e.activeEditor.execCommand(b,c,d):!1},execInstanceCommand:function(a,b,c,d){var e=this.get(a);return e?e.execCommand(b,c,d):!1},triggerSave:function(){b(this.editors,function(a){a.save()})},addI18n:function(c,d){var e,f=this.i18n;a.is(c,"string")?b(d,function(a,b){f[c+"."+b]=a}):b(c,function(a,c){b(a,function(a,d){b(a,function(a,b){d==="common"?f[c+"."+b]=a:f[c+"."+d+"."+b]=a})})})},_setActive:function(a){this.selectedInstance=this.activeEditor=a}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.extend,e=a.util.Dispatcher,f=a.each,g=a.isGecko,h=a.isIE,i=a.isWebKit,j=a.is,k=a.ThemeManager,l=a.PluginManager,m=a.inArray,n=a.grep,o=a.explode;a.create("tinymce.Editor",{Editor:function(b,c){var g=this;g.id=g.editorId=b,g.execCommands={},g.queryStateCommands={},g.queryValueCommands={},g.isNotDirty=!1,g.plugins={},f(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(a){g[a]=new e(g)}),g.settings=c=d({id:b,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:a.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:a.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",validate:!0,entity_encoding:"named",url_converter:g.convertURL,url_converter_scope:g,ie7_compat:!0},c),g.documentBaseURI=new a.util.URI(c.document_base_url||a.documentBaseURL,{base_uri:tinyMCE.baseURI}),g.baseURI=a.baseURI,g.contentCSS=[],g.execCallback("setup",g)},render:function(d){function j(){g.language&&g.language_load!==!1&&i.add(a.baseURL+"/langs/"+g.language+".js"),g.theme&&g.theme.charAt(0)!="-"&&!k.urls[g.theme]&&k.load(g.theme,"themes/"+g.theme+"/editor_template"+a.suffix+".js"),f(o(g.plugins),function(b){if(b&&!l.urls[b])if(b.charAt(0)=="-"){b=b.substr(1,b.length);var c=l.dependencies(b);f(c,function(b){var c={prefix:"plugins/",resource:b,suffix:"/editor_plugin"+a.suffix+".js"},b=l.createUrl(c,b);l.load(b.resource,b)})}else{if(b=="safari")return;l.load(b,{prefix:"plugins/",resource:b,suffix:"/editor_plugin"+a.suffix+".js"})}}),i.loadQueue(function(){e.removed||e.init()})}var e=this,g=e.settings,h=e.id,i=a.ScriptLoader;if(!c.domLoaded){c.add(document,"init",function(){e.render()});return}tinyMCE.settings=g;if(!e.getElement())return;if(a.isIDevice&&!a.isIOS5)return;!/TEXTAREA|INPUT/i.test(e.getElement().nodeName)&&g.hidden_input&&b.getParent(h,"form")&&b.insertAfter(b.create("input",{type:"hidden",name:h}),h),a.WindowManager&&(e.windowManager=new a.WindowManager(e)),g.encoding=="xml"&&e.onGetContent.add(function(a,c){c.save&&(c.content=b.encode(c.content))}),g.add_form_submit_trigger&&e.onSubmit.addToTop(function(){e.initialized&&(e.save(),e.isNotDirty=1)}),g.add_unload_trigger&&(e._beforeUnload=tinyMCE.onBeforeUnload.add(function(){e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0})})),a.addUnload(e.destroy,e),g.submit_patch&&e.onBeforeRenderUI.add(function(){var b=e.getElement().form;if(!b)return;if(b._mceOldSubmit)return;!b.submit.nodeType&&!b.submit.length&&(e.formElement=b,b._mceOldSubmit=b.submit,b.submit=function(){return a.triggerSave(),e.isNotDirty=1,e.formElement._mceOldSubmit(e.formElement)}),b=null}),j()},init:function(){function w(b){var c=l.get(b),e=l.urls[b]||a.documentBaseURL.replace(/\/$/,""),g;c&&a.inArray(v,b)===-1&&(f(l.dependencies(b),function(a){w(a)}),g=new c(d,e),d.plugins[b]=g,g.init&&(g.init(d,e),v.push(b)))}var c,d=this,e=d.settings,i,j,m=d.getElement(),n,p,q,r,s,t,u,v=[];a.add(d),e.aria_label=e.aria_label||b.getAttrib(m,"aria-label",d.getLang("aria.rich_text_area")),e.theme&&(e.theme=e.theme.replace(/-/,""),n=k.get(e.theme),d.theme=new n,d.theme.init&&e.init_theme&&d.theme.init(d,k.urls[e.theme]||a.documentBaseURL.replace(/\/$/,""))),f(o(e.plugins.replace(/\-/g,"")),w),e.popup_css!==!1&&(e.popup_css?e.popup_css=d.documentBaseURI.toAbsolute(e.popup_css):e.popup_css=d.baseURI.toAbsolute("themes/"+e.theme+"/skins/"+e.skin+"/dialog.css")),e.popup_css_add&&(e.popup_css+=","+d.documentBaseURI.toAbsolute(e.popup_css_add)),d.controlManager=new a.ControlManager(d),e.custom_undo_redo&&(d.onBeforeExecCommand.add(function(a,b,c,e,f){b!="Undo"&&b!="Redo"&&b!="mceRepaint"&&(!f||!f.skip_undo)&&d.undoManager.beforeChange()}),d.onExecCommand.add(function(a,b,c,e,f){b!="Undo"&&b!="Redo"&&b!="mceRepaint"&&(!f||!f.skip_undo)&&d.undoManager.add()})),d.onExecCommand.add(function(a,b){/^(FontName|FontSize)$/.test(b)||d.nodeChanged()});if(g){function x(a,b){(!b||!b.initial)&&d.execCommand("mceRepaint")}d.onUndo.add(x),d.onRedo.add(x),d.onSetContent.add(x)}d.onBeforeRenderUI.dispatch(d,d.controlManager),e.render_ui&&(i=e.width||m.style.width||m.offsetWidth,j=e.height||m.style.height||m.offsetHeight,d.orgDisplay=m.style.display,t=/^[0-9\.]+(|px)$/i,t.test(""+i)&&(i=Math.max(parseInt(i)+(n.deltaWidth||0),100)),t.test(""+j)&&(j=Math.max(parseInt(j)+(n.deltaHeight||0),100)),n=d.theme.renderUI({targetNode:m,width:i,height:j,deltaWidth:e.delta_width,deltaHeight:e.delta_height}),d.editorContainer=n.editorContainer),document.domain&&location.hostname!=document.domain&&(a.relaxedDomain=document.domain),b.setStyles(n.sizeContainer||n.editorContainer,{width:i,height:j}),e.content_css&&a.each(o(e.content_css),function(a){d.contentCSS.push(d.documentBaseURI.toAbsolute(a))}),j=(n.iframeHeight||j)+(typeof j=="number"?n.deltaHeight||0:""),j<100&&(j=100),d.iframeHTML=e.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">',e.document_base_url!=a.documentBaseURL&&(d.iframeHTML+='<base href="'+d.documentBaseURI.getURI()+'" />'),e.ie7_compat?d.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />':d.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />',d.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';for(u=0;u<d.contentCSS.length;u++)d.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+d.contentCSS[u]+'" />';r=e.body_id||"tinymce",r.indexOf("=")!=-1&&(r=d.getParam("body_id","","hash"),r=r[d.id]||r),s=e.body_class||"",s.indexOf("=")!=-1&&(s=d.getParam("body_class","","hash"),s=s[d.id]||""),d.iframeHTML+='</head><body id="'+r+'" class="mceContentBody '+s+'"><br></body></html>',a.relaxedDomain&&(h||a.isOpera&&parseFloat(opera.version())<11)&&(q='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+d.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()'),c=b.add(n.iframeContainer,"iframe",{id:d.id+"_ifr",src:q||'javascript:""',frameBorder:"0",allowTransparency:"true",title:e.aria_label,style:{width:"100%",height:j,display:"block"}}),d.contentAreaContainer=n.iframeContainer,b.get(n.editorContainer).style.display=d.orgDisplay,b.get(d.id).style.display="none",b.setAttrib(d.id,"aria-hidden",!0),(!a.relaxedDomain||!q)&&d.setupIframe(),m=c=n=null},setupIframe:function(){var d=this,e=d.settings,i=b.get(d.id),j=d.getDoc(),k,l;if(!h||!a.relaxedDomain)j.open(),j.write(d.iframeHTML),j.close(),a.relaxedDomain&&(j.domain=a.relaxedDomain);l=d.getBody(),l.disabled=!0,e.readonly||(l.contentEditable=!0),l.disabled=!1,d.schema=new a.html.Schema(e),d.dom=new a.dom.DOMUtils(d.getDoc(),{keep_values:!0,url_converter:d.convertURL,url_converter_scope:d,hex_colors:e.force_hex_style_colors,class_filter:e.class_filter,update_styles:1,fix_ie_paragraphs:1,schema:d.schema}),d.parser=new a.html.DomParser(e,d.schema),d.settings.allow_html_in_named_anchor||d.parser.addAttributeFilter("name",function(a,b){var c=a.length,d,e,f,g;while(c--){g=a[c];if(g.name==="a"&&g.firstChild){f=g.parent,d=g.lastChild;do e=d.prev,f.insert(d,g),d=e;while(d)}}}),d.parser.addAttributeFilter("src,href,style",function(a,b){var c=a.length,e,f=d.dom,g,h;while(c--)e=a[c],g=e.attr(b),h="data-mce-"+b,e.attributes.map[h]||(b==="style"?e.attr(h,f.serializeStyle(f.parseStyle(g),e.name)):e.attr(h,d.convertURL(g,b,e.name)))}),d.parser.addNodeFilter("script",function(a,b){var c=a.length,d;while(c--)d=a[c],d.attr("type","mce-"+(d.attr("type")||"text/javascript"))}),d.parser.addNodeFilter("#cdata",function(a,b){var c=a.length,d;while(c--)d=a[c],d.type=8,d.name="#comment",d.value="[CDATA["+d.value+"]]"}),d.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(b,c){var e=b.length,f,g=d.schema.getNonEmptyElements();while(e--)f=b[e],f.isEmpty(g)&&(f.empty().append(new a.html.Node("br",1)).shortEnded=!0)}),d.serializer=new a.dom.Serializer(e,d.dom,d.schema),d.selection=new a.dom.Selection(d.dom,d.getWin(),d.serializer),d.formatter=new a.Formatter(this),d.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(a){return!0},onformat:function(a,b,c){f(c,function(b,c){d.dom.setAttrib(a,c,b)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),f("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(a){d.formatter.register(a,{block:a,remove:"all"})}),d.formatter.register(d.settings.formats),d.undoManager=new a.UndoManager(d),d.undoManager.onAdd.add(function(a,b){if(a.hasUndo())return d.onChange.dispatch(d,b,a)}),d.undoManager.onUndo.add(function(a,b){return d.onUndo.dispatch(d,b,a)}),d.undoManager.onRedo.add(function(a,b){return d.onRedo.dispatch(d,b,a)}),d.forceBlocks=new a.ForceBlocks(d,{forced_root_block:e.forced_root_block}),d.editorCommands=new a.EditorCommands(d),d.serializer.onPreProcess.add(function(a,b){return d.onPreProcess.dispatch(d,b,a)}),d.serializer.onPostProcess.add(function(a,b){return d.onPostProcess.dispatch(d,b,a)}),d.onPreInit.dispatch(d),e.gecko_spellcheck||(d.getBody().spellcheck=0),e.readonly||d._addEvents(),d.controlManager.onPostRender.dispatch(d,d.controlManager),d.onPostRender.dispatch(d),d.quirks=new a.util.Quirks(this),e.directionality&&(d.getBody().dir=e.directionality),e.nowrap&&(d.getBody().style.whiteSpace="nowrap"),e.handle_node_change_callback&&d.onNodeChange.add(function(a,b,c){d.execCallback("handle_node_change_callback",d.id,c,-1,-1,!0,d.selection.isCollapsed())}),e.save_callback&&d.onSaveContent.add(function(a,b){var c=d.execCallback("save_callback",d.id,b.content,d.getBody());c&&(b.content=c)}),e.onchange_callback&&d.onChange.add(function(a,b){d.execCallback("onchange_callback",d,b)}),e.protect&&d.onBeforeSetContent.add(function(a,b){e.protect&&f(e.protect,function(a){b.content=b.content.replace(a,function(a){return"<!--mce:protected "+escape(a)+"-->"})})}),e.convert_newlines_to_brs&&d.onBeforeSetContent.add(function(a,b){b.initial&&(b.content=b.content.replace(/\r?\n/g,"<br />"))}),e.preformatted&&d.onPostProcess.add(function(a,b){b.content=b.content.replace(/^\s*<pre.*?>/,""),b.content=b.content.replace(/<\/pre>\s*$/,""),b.set&&(b.content='<pre class="mceItemHidden">'+b.content+"</pre>")}),e.verify_css_classes&&(d.serializer.attribValueFilter=function(a,b){var c,e;return a=="class"?(d.classesRE||(e=d.dom.getClasses(),e.length>0&&(c="",f(e,function(a){c+=(c?"|":"")+a["class"]}),d.classesRE=new RegExp("("+c+")","gi"))),!d.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(b)||d.classesRE.test(b)?b:""):b}),e.cleanup_callback&&(d.onBeforeSetContent.add(function(a,b){b.content=d.execCallback("cleanup_callback","insert_to_editor",b.content,b)}),d.onPreProcess.add(function(a,b){b.set&&d.execCallback("cleanup_callback","insert_to_editor_dom",b.node,b),b.get&&d.execCallback("cleanup_callback","get_from_editor_dom",b.node,b)}),d.onPostProcess.add(function(a,b){b.set&&(b.content=d.execCallback("cleanup_callback","insert_to_editor",b.content,b)),b.get&&(b.content=d.execCallback("cleanup_callback","get_from_editor",b.content,b))})),e.save_callback&&d.onGetContent.add(function(a,b){b.save&&(b.content=d.execCallback("save_callback",d.id,b.content,d.getBody()))}),e.handle_event_callback&&d.onEvent.add(function(a,b,e){d.execCallback("handle_event_callback",b,a,e)===!1&&c.cancel(b)}),d.onSetContent.add(function(){d.addVisual(d.getBody())}),e.padd_empty_editor&&d.onPostProcess.add(function(a,b){b.content=b.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")});if(g){function m(a,b){f(a.dom.select("a"),function(b){var c=b.parentNode;a.dom.isBlock(c)&&c.lastChild===b&&a.dom.add(c,"br",{"data-mce-bogus":1})})}d.onExecCommand.add(function(a,b){b==="CreateLink"&&m(a)}),d.onSetContent.add(d.selection.onSetContent.add(m))}d.load({initial:!0,format:"html"}),d.startContent=d.getContent({format:"raw"}),d.undoManager.add(),d.initialized=!0,d.onInit.dispatch(d),d.execCallback("setupcontent_callback",d.id,d.getBody(),d.getDoc()),d.execCallback("init_instance_callback",d),d.focus(!0),d.nodeChanged({initial:1}),f(d.contentCSS,function(a){d.dom.loadCSS(a)}),e.auto_focus&&setTimeout(function(){var b=a.get(e.auto_focus);b.selection.select(b.getBody(),1),b.selection.collapse(1),b.getBody().focus(),b.getWin().focus()},100),i=null},focus:function(b){var c,d=this,e=d.selection,f=d.settings.content_editable,g,h,i=d.getDoc();b||(g=e.getRng(),g.item&&(h=g.item(0)),d._refreshContentEditable(),e.normalize(),f||d.getWin().focus(),a.isGecko&&d.getBody().focus(),h&&h.ownerDocument==i&&(g=i.body.createControlRange(),g.addElement(h),g.select())),a.activeEditor!=d&&((c=a.activeEditor)!=null&&c.onDeactivate.dispatch(c,d),d.onActivate.dispatch(d,c)),a._setActive(d)},execCallback:function(b){var c=this,d=c.settings[b],e;if(!d)return;return c.callbackLookup&&(e=c.callbackLookup[b])&&(d=e.func,e=e.scope),j(d,"string")&&(e=d.replace(/\.\w+$/,""),e=e?a.resolve(e):0,d=a.resolve(d),c.callbackLookup=c.callbackLookup||{},c.callbackLookup[b]={func:d,scope:e}),d.apply(e||c,Array.prototype.slice.call(arguments,1))},translate:function(b){var c=this.settings.language||"en",d=a.i18n;return b?d[c+"."+b]||b.replace(/{\#([^}]+)\}/g,function(a,b){return d[c+"."+b]||"{#"+b+"}"}):""},getLang:function(b,c){return a.i18n[(this.settings.language||"en")+"."+b]||(j(c)?c:"{#"+b+"}")},getParam:function(b,c,d){var e=a.trim,g=j(this.settings[b])?this.settings[b]:c,h;return d==="hash"?(h={},j(g,"string")?f(g.indexOf("=")>0?g.split(/[;,](?![^=;,]*(?:[;,]|$))/):g.split(","),function(a){a=a.split("="),a.length>1?h[e(a[0])]=e(a[1]):h[e(a[0])]=e(a)}):h=g,h):g},nodeChanged:function(a){var b=this,c=b.selection,d=c.getStart()||b.getBody();b.initialized&&(a=a||{},d=h&&d.ownerDocument!=b.getDoc()?b.getBody():d,a.parents=[],b.dom.getParent(d,function(b){if(b.nodeName=="BODY")return!0;a.parents.push(b)}),b.onNodeChange.dispatch(b,a?a.controlManager||b.controlManager:b.controlManager,d,c.isCollapsed(),a))},addButton:function(a,b){var c=this;c.buttons=c.buttons||{},c.buttons[a]=b},addCommand:function(a,b,c){this.execCommands[a]={func:b,scope:c||this}},addQueryStateHandler:function(a,b,c){this.queryStateCommands[a]={func:b,scope:c||this}},addQueryValueHandler:function(a,b,c){this.queryValueCommands[a]={func:b,scope:c||this}},addShortcut:function(a,b,c,d){var e=this,g;return e.settings.custom_shortcuts?(e.shortcuts=e.shortcuts||{},j(c,"string")&&(g=c,c=function(){e.execCommand(g,!1,null)}),j(c,"object")&&(g=c,c=function(){e.execCommand(g[0],g[1],g[2])}),f(o(a),function(a){var g={func:c,scope:d||this,desc:b,alt:!1,ctrl:!1,shift:!1};f(o(a,"+"),function(a){switch(a){case"alt":case"ctrl":case"shift":g[a]=!0;break;default:g.charCode=a.charCodeAt(0),g.keyCode=a.toUpperCase().charCodeAt(0)}}),e.shortcuts[(g.ctrl?"ctrl":"")+","+(g.alt?"alt":"")+","+(g.shift?"shift":"")+","+g.keyCode]=g}),!0):!1},execCommand:function(a,b,c,d){var e=this,g=0,h,i;!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(a)&&(!d||!d.skip_focus)&&e.focus(),h={},e.onBeforeExecCommand.dispatch(e,a,b,c,h);if(h.terminate)return!1;if(e.execCallback("execcommand_callback",e.id,e.selection.getNode(),a,b,c))return e.onExecCommand.dispatch(e,a,b,c,d),!0;if(h=e.execCommands[a]){i=h.func.call(h.scope,b,c);if(i!==!0)return e.onExecCommand.dispatch(e,a,b,c,d),i}f(e.plugins,function(f){if(f.execCommand&&f.execCommand(a,b,c))return e.onExecCommand.dispatch(e,a,b,c,d),g=1,!1});if(g)return!0;if(e.theme&&e.theme.execCommand&&e.theme.execCommand(a,b,c))return e.onExecCommand.dispatch(e,a,b,c,d),!0;if(e.editorCommands.execCommand(a,b,c))return e.onExecCommand.dispatch(e,a,b,c,d),!0;e.getDoc().execCommand(a,b,c),e.onExecCommand.dispatch(e,a,b,c,d)},queryCommandState:function(a){var b=this,c,d;if(b._isHidden())return;if(c=b.queryStateCommands[a]){d=c.func.call(c.scope);if(d!==!0)return d}c=b.editorCommands.queryCommandState(a);if(c!==-1)return c;try{return this.getDoc().queryCommandState(a)}catch(e){}},queryCommandValue:function(a){var b=this,c,d;if(b._isHidden())return;if(c=b.queryValueCommands[a]){d=c.func.call(c.scope);if(d!==!0)return d}c=b.editorCommands.queryCommandValue(a);if(j(c))return c;try{return this.getDoc().queryCommandValue(a)}catch(e){}},show:function(){var a=this;b.show(a.getContainer()),b.hide(a.id),a.load()},hide:function(){var a=this,c=a.getDoc();h&&c&&c.execCommand("SelectAll"),a.save(),b.hide(a.getContainer()),b.setStyle(a.id,"display",a.orgDisplay)},isHidden:function(){return!b.isHidden(this.id)},setProgressState:function(a,b,c){return this.onSetProgressState.dispatch(this,a,b,c),a},load:function(a){var b=this,c=b.getElement(),d;if(c)return a=a||{},a.load=!0,d=b.setContent(j(c.value)?c.value:c.innerHTML,a),a.element=c,a.no_events||b.onLoadContent.dispatch(b,a),a.element=c=null,d},save:function(a){var c=this,d=c.getElement(),e,g;if(!d||!c.initialized)return;return a=a||{},a.save=!0,a.no_events||(c.undoManager.typing=!1,c.undoManager.add()),a.element=d,e=a.content=c.getContent(a),a.no_events||c.onSaveContent.dispatch(c,a),e=a.content,/TEXTAREA|INPUT/i.test(d.nodeName)?d.value=e:(d.innerHTML=e,(g=b.getParent(c.id,"form"))&&f(g.elements,function(a){if(a.name==c.id)return a.value=e,!1})),a.element=d=null,e},setContent:function(b,c){var d=this,e,f=d.getBody(),g;c=c||{},c.format=c.format||"html",c.set=!0,c.content=b,c.no_events||d.onBeforeSetContent.dispatch(d,c),b=c.content;if(!a.isIE&&(b.length===0||/^\s+$/.test(b))){g=d.settings.forced_root_block,g?b="<"+g+'><br data-mce-bogus="1"></'+g+">":b='<br data-mce-bogus="1">',f.innerHTML=b,d.selection.select(f,!0),d.selection.collapse(!0);return}return c.format!=="raw"&&(b=(new a.html.Serializer({},d.schema)).serialize(d.parser.parse(b))),c.content=a.trim(b),d.dom.setHTML(f,c.content),c.no_events||d.onSetContent.dispatch(d,c),d.selection.normalize(),c.content},getContent:function(b){var c=this,d;return b=b||{},b.format=b.format||"html",b.get=!0,b.no_events||c.onBeforeGetContent.dispatch(c,b),b.format=="raw"?d=c.getBody().innerHTML:d=c.serializer.serialize(c.getBody(),b),b.content=a.trim(d),b.no_events||c.onGetContent.dispatch(c,b),b.content},isDirty:function(){var b=this;return a.trim(b.startContent)!=a.trim(b.getContent({format:"raw",no_events:1}))&&!b.isNotDirty},getContainer:function(){var a=this;return a.container||(a.container=b.get(a.editorContainer||a.id+"_parent")),a.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return b.get(this.settings.content_element||this.id)},getWin:function(){var a=this,c;return a.contentWindow||(c=b.get(a.id+"_ifr"),c&&(a.contentWindow=c.contentWindow)),a.contentWindow},getDoc:function(){var a=this,b;return a.contentDocument||(b=a.getWin(),b&&(a.contentDocument=b.document)),a.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(a,b,c){var d=this,e=d.settings;return e.urlconverter_callback?d.execCallback("urlconverter_callback",a,c,!0,b):!e.convert_urls||c&&c.nodeName=="LINK"||a.indexOf("file:")===0?a:e.relative_urls?d.documentBaseURI.toRelative(a):(a=d.documentBaseURI.toAbsolute(a,e.remove_script_host),a)},addVisual:function(a){var b=this,c=b.settings;a=a||b.getBody(),j(b.hasVisual)||(b.hasVisual=c.visual),f(b.dom.select("table,a",a),function(a){var d;switch(a.nodeName){case"TABLE":d=b.dom.getAttrib(a,"border");if(!d||d=="0")b.hasVisual?b.dom.addClass(a,c.visual_table_class):b.dom.removeClass(a,c.visual_table_class);return;case"A":d=b.dom.getAttrib(a,"name"),d&&(b.hasVisual?b.dom.addClass(a,"mceItemAnchor"):b.dom.removeClass(a,"mceItemAnchor"));return}}),b.onVisualAid.dispatch(b,a,b.hasVisual)},remove:function(){var c=this,d=c.getContainer();c.removed=1,c.hide(),c.execCallback("remove_instance_callback",c),c.onRemove.dispatch(c),c.onExecCommand.listeners=[],a.remove(c),b.remove(d)},destroy:function(b){var d=this;if(d.destroyed)return;b||(a.removeUnload(d.destroy),tinyMCE.onBeforeUnload.remove(d._beforeUnload),d.theme&&d.theme.destroy&&d.theme.destroy(),d.controlManager.destroy(),d.selection.destroy(),d.dom.destroy(),d.settings.content_editable||(c.clear(d.getWin()),c.clear(d.getDoc())),c.clear(d.getBody()),c.clear(d.formElement)),d.formElement&&(d.formElement.submit=d.formElement._mceOldSubmit,d.formElement._mceOldSubmit=null),d.contentAreaContainer=d.formElement=d.container=d.settings.content_element=d.bodyElement=d.contentDocument=d.contentWindow=null,d.selection&&
(d.selection=d.selection.win=d.selection.dom=d.selection.dom.doc=null),d.destroyed=1},_addEvents:function(){function k(a,b){var c=a.type;if(d.removed)return;d.onEvent.dispatch(d,a,b)!==!1&&d[j[a.fakeType||a.type]].dispatch(d,a,b)}var d=this,e,h=d.settings,i=d.dom,j={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};f(j,function(a,c){switch(c){case"contextmenu":i.bind(d.getDoc(),c,k);break;case"paste":i.bind(d.getBody(),c,function(a){k(a)});break;case"submit":case"reset":i.bind(d.getElement().form||b.getParent(d.id,"form"),c,k);break;default:i.bind(h.content_editable?d.getBody():d.getDoc(),c,k)}}),i.bind(h.content_editable?d.getBody():g?d.getDoc():d.getWin(),"focus",function(a){d.focus(!0)}),a.isGecko&&i.bind(d.getDoc(),"DOMNodeInserted",function(a){var b;a=a.target,a.nodeType===1&&a.nodeName==="IMG"&&(b=a.getAttribute("data-mce-src"))&&(a.src=d.documentBaseURI.toAbsolute(b))});if(g){function l(){var a=this,b=a.getDoc(),c=a.settings;if(g&&!c.readonly){a._refreshContentEditable();try{b.execCommand("styleWithCSS",0,!1)}catch(d){if(!a._isHidden())try{b.execCommand("useCSS",0,!0)}catch(d){}}if(!c.table_inline_editing)try{b.execCommand("enableInlineTableEditing",!1,!1)}catch(d){}if(!c.object_resizing)try{b.execCommand("enableObjectResizing",!1,!1)}catch(d){}}}d.onBeforeExecCommand.add(l),d.onMouseDown.add(l)}d.onMouseUp.add(d.nodeChanged),d.onKeyUp.add(function(b,c){var e=c.keyCode;(e>=33&&e<=36||e>=37&&e<=40||e==13||e==45||e==46||e==8||a.isMac&&(e==91||e==93)||c.ctrlKey)&&d.nodeChanged()}),d.onKeyDown.add(function(a,b){if(b.keyCode!=8)return;var c=a.selection.getRng().startContainer,d=a.selection.getRng().startOffset;while(c&&c.nodeType&&c.nodeType!=1&&c.parentNode)c=c.parentNode;if(c&&c.parentNode&&c.parentNode.tagName==="BLOCKQUOTE"&&c.parentNode.firstChild==c&&d==0){a.formatter.toggle("blockquote",null,c.parentNode);var e=a.selection.getRng();e.setStart(c,0),e.setEnd(c,0),a.selection.setRng(e),a.selection.collapse(!1)}}),d.onReset.add(function(){d.setContent(d.startContent,{format:"raw"})});if(h.custom_shortcuts){h.custom_undo_redo_keyboard_shortcuts&&(d.addShortcut("ctrl+z",d.getLang("undo_desc"),"Undo"),d.addShortcut("ctrl+y",d.getLang("redo_desc"),"Redo")),d.addShortcut("ctrl+b",d.getLang("bold_desc"),"Bold"),d.addShortcut("ctrl+i",d.getLang("italic_desc"),"Italic"),d.addShortcut("ctrl+u",d.getLang("underline_desc"),"Underline");for(e=1;e<=6;e++)d.addShortcut("ctrl+"+e,"",["FormatBlock",!1,"h"+e]);d.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),d.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),d.addShortcut("ctrl+9","",["FormatBlock",!1,"address"]);function m(b){var c=null;return!b.altKey&&!b.ctrlKey&&!b.metaKey?c:(f(d.shortcuts,function(d){if(a.isMac&&d.ctrl!=b.metaKey)return;if(!a.isMac&&d.ctrl!=b.ctrlKey)return;if(d.alt!=b.altKey)return;if(d.shift!=b.shiftKey)return;if(b.keyCode==d.keyCode||b.charCode&&b.charCode==d.charCode)return c=d,!1}),c)}d.onKeyUp.add(function(a,b){var d=m(b);if(d)return c.cancel(b)}),d.onKeyPress.add(function(a,b){var d=m(b);if(d)return c.cancel(b)}),d.onKeyDown.add(function(a,b){var d=m(b);if(d)return d.func.call(d.scope),c.cancel(b)})}a.isIE&&i.bind(d.getDoc(),"controlselect",function(a){var b=d.resizeInfo,e;a=a.target;if(a.nodeName!=="IMG")return;b&&i.unbind(b.node,b.ev,b.cb),i.hasClass(a,"mceItemNoResize")?(ev="resizestart",e=i.bind(a,"resizestart",c.cancel,c)):(ev="resizeend",e=i.bind(a,ev,function(a){var b;a=a.target;if(b=i.getStyle(a,"width"))i.setAttrib(a,"width",b.replace(/[^0-9%]+/g,"")),i.setStyle(a,"width","");if(b=i.getStyle(a,"height"))i.setAttrib(a,"height",b.replace(/[^0-9%]+/g,"")),i.setStyle(a,"height","")})),b=d.resizeInfo={node:a,ev:ev,cb:e}}),a.isOpera&&d.onClick.add(function(a,b){c.prevent(b)});if(h.custom_undo_redo){function n(){d.undoManager.typing=!1,d.undoManager.add()}i.bind(d.getDoc(),"focusout",function(a){!d.removed&&d.undoManager.typing&&n()}),d.dom.bind(d.dom.getRoot(),"dragend",function(a){n()}),d.onKeyUp.add(function(a,b){var c=b.keyCode;(c>=33&&c<=36||c>=37&&c<=40||c==13||c==45||b.ctrlKey)&&n()}),d.onKeyDown.add(function(b,e){var f=e.keyCode,g;if(f==8){g=d.getDoc().selection;if(g&&g.createRange&&g.createRange().item)return d.undoManager.beforeChange(),b.dom.remove(g.createRange().item(0)),n(),c.cancel(e)}if(f>=33&&f<=36||f>=37&&f<=40||f==13||f==45){a.isIE&&f==13&&d.undoManager.beforeChange(),d.undoManager.typing&&n();return}(f<16||f>20)&&f!=224&&f!=91&&!d.undoManager.typing&&(d.undoManager.beforeChange(),d.undoManager.typing=!0,d.undoManager.add())}),d.onMouseDown.add(function(){d.undoManager.typing&&n()})}if(a.isGecko){function o(){var a=d.dom.getAttribs(d.selection.getStart().cloneNode(!1));return function(){var b=d.selection.getStart();b!==d.getBody()&&(d.dom.setAttrib(b,"style",null),f(a,function(a){b.setAttributeNode(a.cloneNode(!0))}))}}function p(){var a=d.selection;return!a.isCollapsed()&&a.getStart()!=a.getEnd()}d.onKeyPress.add(function(a,b){var e;if((b.keyCode==8||b.keyCode==46)&&p())return e=o(),d.getDoc().execCommand("delete",!1,null),e(),c.cancel(b)}),d.dom.bind(d.getDoc(),"cut",function(a){var b;p()&&(b=o(),d.onKeyUp.addToTop(c.cancel,c),setTimeout(function(){b(),d.onKeyUp.remove(c.cancel,c)},0))})}},_refreshContentEditable:function(){var a=this,b,c;a._isHidden()&&(b=a.getBody(),c=b.parentNode,c.removeChild(b),c.appendChild(b),b.focus())},_isHidden:function(){var a;return g?(a=this.selection.getSel(),!a||!a.rangeCount||a.rangeCount==0):0}})}(tinymce),function(a){var b=a.each,c,d=!0,e=!1;a.EditorCommands=function(f){function m(a,b,c){var f;return a=a.toLowerCase(),(f=i.exec[a])?(f(a,b,c),d):e}function n(a){var b;return a=a.toLowerCase(),(b=i.state[a])?b(a):-1}function o(a){var b;return a=a.toLowerCase(),(b=i.value[a])?b(a):e}function p(a,c){c=c||"exec",b(a,function(a,d){b(d.toLowerCase().split(","),function(b){i[c][b]=a})})}function q(a,b,d){return b===c&&(b=e),d===c&&(d=null),f.getDoc().execCommand(a,b,d)}function r(a){return k.match(a)}function s(a,b){k.toggle(a,b?{value:b}:c)}function t(a){l=h.getBookmark(a)}function u(){h.moveToBookmark(l)}var g=f.dom,h=f.selection,i={state:{},exec:{},value:{}},j=f.settings,k=f.formatter,l;a.extend(this,{execCommand:m,queryCommandState:n,queryCommandValue:o,addCommands:p}),p({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){f.undoManager.add()},"Cut,Copy,Paste":function(b){var c=f.getDoc(),e;try{q(b)}catch(g){e=d}if(e||!c.queryCommandSupported(b))a.isGecko?f.windowManager.confirm(f.getLang("clipboard_msg"),function(a){a&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):f.windowManager.alert(f.getLang("clipboard_no_support"))},unlink:function(a){h.isCollapsed()&&h.select(h.getNode()),q(a),h.collapse(e)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(a){var c=a.substring(7);b("left,center,right,full".split(","),function(a){c!=a&&k.remove("align"+a)}),s("align"+c),m("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(a){var b,c;q(a),b=g.getParent(h.getNode(),"ol,ul"),b&&(c=b.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(c.nodeName)&&(t(),g.split(c,b),u()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){s(a)},"ForeColor,HiliteColor,FontName":function(a,b,c){s(a,c)},FontSize:function(b,c,d){var e,f;d>=1&&d<=7&&(f=a.explode(j.font_size_style_values),e=a.explode(j.font_size_classes),e?d=e[d-1]||d:d=f[d-1]||d),s(b,d)},RemoveFormat:function(a){k.remove(a)},mceBlockQuote:function(a){s("blockquote")},FormatBlock:function(a,b,c){return s(c||"p")},mceCleanup:function(){var a=h.getBookmark();f.setContent(f.getContent({cleanup:d}),{cleanup:d}),h.moveToBookmark(a)},mceRemoveNode:function(a,b,c){var e=c||h.getNode();e!=f.getBody()&&(t(),f.dom.remove(e,d),u())},mceSelectNodeDepth:function(a,b,c){var d=0;g.getParent(h.getNode(),function(a){if(a.nodeType==1&&d++==c)return h.select(a),e},f.getBody())},mceSelectNode:function(a,b,c){h.select(c)},mceInsertContent:function(b,c,d){var e,i,j,k,l,m,n,o,p,q,r,s,t,u;e=f.parser,i=new a.html.Serializer({},f.schema),t='<span id="mce_marker" data-mce-type="bookmark">﻿</span>',m={content:d,format:"html"},h.onBeforeSetContent.dispatch(h,m),d=m.content,d.indexOf("{$caret}")==-1&&(d+="{$caret}"),d=d.replace(/\{\$caret\}/,t),h.isCollapsed()||f.getDoc().execCommand("Delete",!1,null),j=h.getNode(),m={context:j.nodeName.toLowerCase()},l=e.parse(d,m),r=l.lastChild;if(r.attr("id")=="mce_marker"){n=r;for(r=r.prev;r;r=r.walk(!0))if(r.type==3||!g.isBlock(r.name)){r.parent.insert(n,r,r.name==="br");break}}if(!m.invalid)d=i.serialize(l),r=j.firstChild,s=j.lastChild,!r||r===s&&r.nodeName==="BR"?g.setHTML(j,d):h.setContent(d);else{h.setContent(t),j=f.selection.getNode(),k=f.getBody(),j.nodeType==9?j=r=k:r=j;while(r!==k)j=r,r=r.parentNode;d=j==k?k.innerHTML:g.getOuterHTML(j),d=i.serialize(e.parse(d.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return i.serialize(l)}))),j==k?g.setHTML(k,d):g.setOuterHTML(j,d)}n=g.get("mce_marker"),o=g.getRect(n),p=g.getViewPort(f.getWin());if(o.y+o.h>p.y+p.h||o.y<p.y||o.x>p.x+p.w||o.x<p.x)u=a.isIE?f.getDoc().documentElement:f.getBody(),u.scrollLeft=o.x,u.scrollTop=o.y-p.h+25;q=g.createRng(),r=n.previousSibling,r&&r.nodeType==3?q.setStart(r,r.nodeValue.length):(q.setStartBefore(n),q.setEndBefore(n)),g.remove(n),h.setRng(q),h.onSetContent.dispatch(h,m),f.addVisual()},mceInsertRawHTML:function(a,b,c){h.setContent("tiny_mce_marker"),f.setContent(f.getContent().replace(/tiny_mce_marker/g,function(){return c}))},mceSetContent:function(a,b,c){f.setContent(c)},"Indent,Outdent":function(a){var c,d,e;c=j.indentation,d=/[a-z%]+$/i.exec(c),c=parseInt(c),!n("InsertUnorderedList")&&!n("InsertOrderedList")?b(h.getSelectedBlocks(),function(b){a=="outdent"?(e=Math.max(0,parseInt(b.style.paddingLeft||0)-c),g.setStyle(b,"paddingLeft",e?e+d:"")):g.setStyle(b,"paddingLeft",parseInt(b.style.paddingLeft||0)+c+d)}):q(a)},mceRepaint:function(){var b;if(a.isGecko)try{t(d),h.getSel()&&h.getSel().selectAllChildren(f.getBody()),h.collapse(d),u()}catch(c){}},mceToggleFormat:function(a,b,c){k.toggle(c)},InsertHorizontalRule:function(){f.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){f.hasVisual=!f.hasVisual,f.addVisual()},mceReplaceContent:function(a,b,c){f.execCommand("mceInsertContent",!1,c.replace(/\{\$selection\}/g,h.getContent({format:"text"})))},mceInsertLink:function(a,b,c){var d;typeof c=="string"&&(c={href:c}),d=g.getParent(h.getNode(),"a"),c.href=c.href.replace(" ","%20"),(!d||!c.href)&&k.remove("link"),c.href&&k.apply("link",c,d)},selectAll:function(){var a=g.getRoot(),b=g.createRng();b.setStart(a,0),b.setEnd(a,a.childNodes.length),f.selection.setRng(b)}}),p({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(a){return r("align"+a.substring(7))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){return r(a)},mceBlockQuote:function(){return r("blockquote")},Outdent:function(){var a;if(j.inline_styles){if((a=g.getParent(h.getStart(),g.isBlock))&&parseInt(a.style.paddingLeft)>0)return d;if((a=g.getParent(h.getEnd(),g.isBlock))&&parseInt(a.style.paddingLeft)>0)return d}return n("InsertUnorderedList")||n("InsertOrderedList")||!j.inline_styles&&!!g.getParent(h.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(a){return g.getParent(h.getNode(),a=="insertunorderedlist"?"UL":"OL")}},"state"),p({"FontSize,FontName":function(a){var b=0,c;if(c=g.getParent(h.getNode(),"span"))a=="fontsize"?b=c.style.fontSize:b=c.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase();return b}},"value"),j.custom_undo_redo&&p({Undo:function(){f.undoManager.undo()},Redo:function(){f.undoManager.redo()}})}}(tinymce),function(a){var b=a.util.Dispatcher;a.UndoManager=function(c){function h(){return a.trim(c.getContent({format:"raw",no_events:1}))}var d,e=0,f=[],g;return d={typing:!1,onAdd:new b(d),onUndo:new b(d),onRedo:new b(d),beforeChange:function(){g=c.selection.getBookmark(2,!0)},add:function(a){var b,i=c.settings,j;a=a||{},a.content=h(),j=f[e];if(j&&j.content==a.content)return null;f[e]&&(f[e].beforeBookmark=g);if(i.custom_undo_redo_levels&&f.length>i.custom_undo_redo_levels){for(b=0;b<f.length-1;b++)f[b]=f[b+1];f.length--,e=f.length}return a.bookmark=c.selection.getBookmark(2,!0),e<f.length-1&&(f.length=e+1),f.push(a),e=f.length-1,d.onAdd.dispatch(d,a),c.isNotDirty=0,a},undo:function(){var a,b;return d.typing&&(d.add(),d.typing=!1),e>0&&(a=f[--e],c.setContent(a.content,{format:"raw"}),c.selection.moveToBookmark(a.beforeBookmark),d.onUndo.dispatch(d,a)),a},redo:function(){var a;return e<f.length-1&&(a=f[++e],c.setContent(a.content,{format:"raw"}),c.selection.moveToBookmark(a.bookmark),d.onRedo.dispatch(d,a)),a},clear:function(){f=[],e=0,d.typing=!1},hasUndo:function(){return e>0||this.typing},hasRedo:function(){return e<f.length-1&&!this.typing}}}}(tinymce),function(a){function j(a){var b,c,d;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(a.nodeName)&&(b?(c=a.cloneNode(!1),c.appendChild(b),b=c):b=d=a.cloneNode(!1),b.removeAttribute("id"));while(a=a.parentNode);if(b)return{wrapper:b,inner:d}}function k(a,b){var c=b.ownerDocument.createRange();return c.setStart(a.endContainer,a.endOffset),c.setEndAfter(b),c.cloneContents().textContent.length==0}function l(a,b,c){var d,e;return b.isEmpty(c)?(d=b.getParent(c,"ul,ol"),b.getParent(d.parentNode,"ul,ol")||(b.split(d,c),e=b.create("p",0,'<br data-mce-bogus="1" />'),b.replace(e,c),a.select(e,1)),i):h}var b=a.dom.Event,c=a.isIE,d=a.isGecko,e=a.isOpera,f=a.each,g=a.extend,h=!0,i=!1;a.create("tinymce.ForceBlocks",{ForceBlocks:function(a){var b=this,c=a.settings,d;b.editor=a,b.dom=a.dom,d=(c.forced_root_block||"p").toLowerCase(),c.element=d.toUpperCase(),a.onPreInit.add(b.setup,b)},setup:function(){var e=this,f=e.editor,g=f.settings,i=f.dom,k=f.selection,l=f.schema.getBlockElements();if(g.forced_root_block){function m(){var a=k.getStart(),b=f.getBody(),c,d,e,h,j,m,n,o=-16777215;if(!a||a.nodeType!==1)return;while(a!=b){if(l[a.nodeName])return;a=a.parentNode}c=k.getRng(),c.setStart?(d=c.startContainer,e=c.startOffset,h=c.endContainer,j=c.endOffset):(c.item&&(c=f.getDoc().body.createTextRange(),c.moveToElementText(c.item(0))),tmpRng=c.duplicate(),tmpRng.collapse(!0),e=tmpRng.move("character",o)*-1,tmpRng.collapsed||(tmpRng=c.duplicate(),tmpRng.collapse(!1),j=tmpRng.move("character",o)*-1-e));for(a=b.firstChild;a;a)a.nodeType===3||a.nodeType==1&&!l[a.nodeName]?(m||(m=i.create(g.forced_root_block),a.parentNode.insertBefore(m,a)),n=a,a=a.nextSibling,m.appendChild(n)):(m=null,a=a.nextSibling);if(c.setStart)c.setStart(d,e),c.setEnd(h,j),k.setRng(c);else try{c=f.getDoc().body.createTextRange(),c.moveToElementText(b),c.collapse(!0),c.moveStart("character",e),j>0&&c.moveEnd("character",j),c.select()}catch(p){}f.nodeChanged()}f.onKeyUp.add(m),f.onClick.add(m)}g.force_br_newlines&&c&&f.onKeyPress.add(function(a,c){var d;if(c.keyCode==13&&k.getNode().nodeName!="LI")return k.setContent('<br id="__" /> ',{format:"raw"}),d=i.get("__"),d.removeAttribute("id"),k.select(d),k.collapse(),b.cancel(c)}),g.force_p_newlines&&(c?(a.addUnload(function(){e._previousFormats=0}),f.onKeyPress.add(function(a,b){e._previousFormats=0,b.keyCode==13&&!b.shiftKey&&a.selection.isCollapsed()&&g.keep_styles&&(e._previousFormats=j(a.selection.getStart()))}),f.onKeyUp.add(function(a,b){if(b.keyCode==13&&!b.shiftKey){var c=a.selection.getStart(),d=e._previousFormats;!c.hasChildNodes()&&d&&(c=i.getParent(c,i.isBlock),c&&c.nodeName!="LI"&&(c.innerHTML="",e._previousFormats?(c.appendChild(d.wrapper),d.inner.innerHTML="﻿"):c.innerHTML="﻿",k.select(c,1),k.collapse(!0),a.getDoc().execCommand("Delete",!1,null),e._previousFormats=0))}})):f.onKeyPress.add(function(a,c){c.keyCode==13&&!c.shiftKey&&!e.insertPara(c)&&b.cancel(c)}),d&&f.onKeyDown.add(function(a,b){(b.keyCode==8||b.keyCode==46)&&!b.shiftKey&&e.backspaceDelete(b,b.keyCode==8)}));if(a.isWebKit){function n(a){var b=k.getRng(),c,d=i.create("div",null," "),e,f=i.getViewPort(a.getWin()).h;b.insertNode(c=i.create("br")),b.setStartAfter(c),b.setEndAfter(c),k.setRng(b),k.getSel().focusNode==c.previousSibling&&(k.select(i.insertAfter(i.doc.createTextNode(" "),c)),k.collapse(h)),i.insertAfter(d,c),e=i.getPos(d).y,i.remove(d),e>f&&a.getWin().scrollTo(0,e)}f.onKeyPress.add(function(a,c){c.keyCode==13&&(c.shiftKey||g.force_br_newlines&&!i.getParent(k.getNode(),"h1,h2,h3,h4,h5,h6,ol,ul"))&&(n(a),b.cancel(c))})}c&&g.element!="P"&&(f.onKeyPress.add(function(a,b){e.lastElm=k.getNode().nodeName}),f.onKeyUp.add(function(a,b){var c,d=k.getNode(),f=a.getBody();f.childNodes.length===1&&d.nodeName=="P"?(d=i.rename(d,g.element),k.select(d),k.collapse(),a.nodeChanged()):b.keyCode==13&&!b.shiftKey&&e.lastElm!="P"&&(c=i.getParent(d,"p"),c&&(i.rename(c,g.element),a.nodeChanged()))}))},getParentBlock:function(a){var b=this.dom;return b.getParent(a,b.isBlock)},insertPara:function(a){function I(a,b){var c=[],f,h,j;a.innerHTML="";if(g.keep_styles){h=b;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(h.nodeName)&&(f=h.cloneNode(i),d.setAttrib(f,"id",""),c.push(f));while(h=h.parentNode)}if(c.length>0){for(j=c.length-1,f=a;j>=0;j--)f=f.appendChild(c[j]);return c[0].innerHTML=e?" ":"<br />",c[0]}a.innerHTML=e?" ":"<br />"}var b=this,c=b.editor,d=c.dom,f=c.getDoc(),g=c.settings,j=c.selection.getSel(),m=j.getRangeAt(0),n=f.body,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=d.getViewPort(c.getWin()),E,F,G;c.undoManager.beforeChange(),o=f.createRange(),o.setStart(j.anchorNode,j.anchorOffset),o.collapse(h),p=f.createRange(),p.setStart(j.focusNode,j.focusOffset),p.collapse(h),q=o.compareBoundaryPoints(o.START_TO_END,p)<0,r=q?j.anchorNode:j.focusNode,s=q?j.anchorOffset:j.focusOffset,t=q?j.focusNode:j.anchorNode,u=q?j.focusOffset:j.anchorOffset;if(r===t&&/^(TD|TH)$/.test(r.nodeName))return r.firstChild.nodeName=="BR"&&d.remove(r.firstChild),r.childNodes.length==0?(c.dom.add(r,g.element,null,"<br />"),z=c.dom.add(r,g.element,null,"<br />")):(C=r.innerHTML,r.innerHTML="",c.dom.add(r,g.element,null,C),z=c.dom.add(r,g.element,null,"<br />")),m=f.createRange(),m.selectNodeContents(z),m.collapse(1),c.selection.setRng(m),i;r==n&&t==n&&n.firstChild&&c.dom.isBlock(n.firstChild)&&(r=t=r.firstChild,s=u=0,o=f.createRange(),o.setStart(r,0),p=f.createRange(),p.setStart(t,0)),f.body.hasChildNodes()||f.body.appendChild(d.create("br")),r=r.nodeName=="HTML"?f.body:r,r=r.nodeName=="BODY"?r.firstChild:r,t=t.nodeName=="HTML"?f.body:t,t=t.nodeName=="BODY"?t.firstChild:t,v=b.getParentBlock(r),w=b.getParentBlock(t),x=v?v.nodeName:g.element;if(C=b.dom.getParent(v,"li,pre"))return C.nodeName=="LI"?l(c.selection,b.dom,C):h;v&&(v.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(d.getStyle(v,"position",1)))&&(x=g.element,v=null),w&&(w.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(d.getStyle(v,"position",1)))&&(x=g.element,w=null);if(/(TD|TABLE|TH|CAPTION)/.test(x)||v&&x=="DIV"&&/left|right/gi.test(d.getStyle(v,"float",1)))x=g.element,v=w=null;y=v&&v.nodeName==x?v.cloneNode(0):c.dom.create(x),z=w&&w.nodeName==x?w.cloneNode(0):c.dom.create(x),z.removeAttribute("id"),/^(H[1-6])$/.test(x)&&k(m,v)&&(z=c.dom.create(g.element)),C=A=r;do{if(C==n||C.nodeType==9||b.dom.isBlock(C)||/(TD|TABLE|TH|CAPTION)/.test(C.nodeName))break;A=C}while(C=C.previousSibling?C.previousSibling:C.parentNode);C=B=t;do{if(C==n||C.nodeType==9||b.dom.isBlock(C)||/(TD|TABLE|TH|CAPTION)/.test(C.nodeName))break;B=C}while(C=C.nextSibling?C.nextSibling:C.parentNode);A.nodeName==x?o.setStart(A,0):o.setStartBefore(A),o.setEnd(r,s),y.appendChild(o.cloneContents()||f.createTextNode(""));try{p.setEndAfter(B)}catch(H){}return p.setStart(t,u),z.appendChild(p.cloneContents()||f.createTextNode("")),m=f.createRange(),!A.previousSibling&&A.parentNode.nodeName==x?m.setStartBefore(A.parentNode):o.startContainer.nodeName==x&&o.startOffset==0?m.setStartBefore(o.startContainer):m.setStart(o.startContainer,o.startOffset),!B.nextSibling&&B.parentNode.nodeName==x?m.setEndAfter(B.parentNode):m.setEnd(p.endContainer,p.endOffset),m.deleteContents(),e&&c.getWin().scrollTo(0,D.y),y.firstChild&&y.firstChild.nodeName==x&&(y.innerHTML=y.firstChild.innerHTML),z.firstChild&&z.firstChild.nodeName==x&&(z.innerHTML=z.firstChild.innerHTML),d.isEmpty(y)&&I(y,r),d.isEmpty(z)&&(G=I(z,t)),e&&parseFloat(opera.version())<9.5?(m.insertNode(y),m.insertNode(z)):(m.insertNode(z),m.insertNode(y)),z.normalize(),y.normalize(),c.selection.select(z,!0),c.selection.collapse(!0),E=c.dom.getPos(z).y,(E<D.y||E+25>D.y+D.h)&&c.getWin().scrollTo(0,E<D.y?E:E-D.h+25),c.undoManager.add(),i},backspaceDelete:function(c,d){var e=this,f=e.editor,g=f.getBody(),h=f.dom,j,k=f.selection,l=k.getRng(),m=l.startContainer,j,n,o,p;if(!d&&l.collapsed&&m.nodeType==1&&l.startOffset==m.childNodes.length){p=new a.dom.TreeWalker(m.lastChild,m);for(j=m.lastChild;j;j=p.prev())if(j.nodeType==3){l.setStart(j,j.nodeValue.length),l.collapse(!0),k.setRng(l);return}}if(m&&f.dom.isBlock(m)&&!/^(TD|TH)$/.test(m.nodeName)&&d)if(m.childNodes.length==0||m.childNodes.length==1&&m.firstChild.nodeName=="BR"){j=m;while((j=j.previousSibling)&&!f.dom.isBlock(j));if(j){if(m!=g.firstChild){n=f.dom.doc.createTreeWalker(j,NodeFilter.SHOW_TEXT,null,i);while(o=n.nextNode())j=o;l=f.getDoc().createRange(),l.setStart(j,j.nodeValue?j.nodeValue.length:0),l.setEnd(j,j.nodeValue?j.nodeValue.length:0),k.setRng(l),f.dom.remove(m)}return b.cancel(c)}}}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each,e=a.extend;a.create("tinymce.ControlManager",{ControlManager:function(b,c){var e=this,f;c=c||{},e.editor=b,e.controls={},e.onAdd=new a.util.Dispatcher(e),e.onPostRender=new a.util.Dispatcher(e),e.prefix=c.prefix||b.id+"_",e._cls={},e.onPostRender.add(function(){d(e.controls,function(a){a.postRender()})})},get:function(a){return this.controls[this.prefix+a]||this.controls[a]},setActive:function(a,b){var c=null;return(c=this.get(a))&&c.setActive(b),c},setDisabled:function(a,b){var c=null;return(c=this.get(a))&&c.setDisabled(b),c},add:function(a){var b=this;return a&&(b.controls[a.id]=a,b.onAdd.dispatch(a,b)),a},createControl:function(a){var b,c=this,e=c.editor;d(e.plugins,function(d){if(d.createControl){b=d.createControl(a,c);if(b)return!1}});switch(a){case"|":case"separator":return c.createSeparator()}return!b&&e.buttons&&(b=e.buttons[a])?c.createButton(a,b):c.add(b)},createDropMenu:function(b,c,d){var f=this,g=f.editor,h,i,j,k;c=e({"class":"mceDropDown",constrain:g.settings.constrain_menus},c),c["class"]=c["class"]+" "+g.getParam("skin")+"Skin";if(j=g.getParam("skin_variant"))c["class"]+=" "+g.getParam("skin")+"Skin"+j.substring(0,1).toUpperCase()+j.substring(1);return b=f.prefix+b,k=d||f._cls.dropmenu||a.ui.DropMenu,h=f.controls[b]=new k(b,c),h.onAddItem.add(function(a,b){var c=b.settings;c.title=g.getLang(c.title,c.title),c.onclick||(c.onclick=function(a){c.cmd&&g.execCommand(c.cmd,c.ui||!1,c.value)})}),g.onRemove.add(function(){h.destroy()}),a.isIE&&(h.onShowMenu.add(function(){g.focus(),i=g.selection.getBookmark(1)}),h.onHideMenu.add(function(){i&&(g.selection.moveToBookmark(i),i=0)})),f.add(h)},createListBox:function(b,d,f){function l(b){return b.settings.use_accessible_selects&&!a.isGecko}var g=this,h=g.editor,i,j,k;return g.get(b)?null:(d.title=h.translate(d.title),d.scope=d.scope||h,d.onselect||(d.onselect=function(a){h.execCommand(d.cmd,d.ui||!1,a||d.value)}),d=e({title:d.title,"class":"mce_"+b,scope:d.scope,control_manager:g},d),b=g.prefix+b,h.settings.use_native_selects||l(h)?j=new a.ui.NativeListBox(b,d):(k=f||g._cls.listbox||a.ui.ListBox,j=new k(b,d,h)),g.controls[b]=j,a.isWebKit&&j.onPostRender.add(function(a,b){c.add(b,"mousedown",function(){h.bookmark=h.selection.getBookmark(1)}),c.add(b,"focus",function(){h.selection.moveToBookmark(h.bookmark),h.bookmark=null})}),j.hideMenu&&h.onMouseDown.add(j.hideMenu,j),g.add(j))},createButton:function(b,c,d){var f=this,g=f.editor,h,i,j;return f.get(b)?null:(c.title=g.translate(c.title),c.label=g.translate(c.label),c.scope=c.scope||g,!c.onclick&&!c.menu_button&&(c.onclick=function(){g.execCommand(c.cmd,c.ui||!1,c.value)}),c=e({title:c.title,"class":"mce_"+b,unavailable_prefix:g.getLang("unavailable",""),scope:c.scope,control_manager:f},c),b=f.prefix+b,c.menu_button?(j=d||f._cls.menubutton||a.ui.MenuButton,i=new j(b,c,g),g.onMouseDown.add(i.hideMenu,i)):(j=f._cls.button||a.ui.Button,i=new j(b,c,g)),f.add(i))},createMenuButton:function(a,b,c){return b=b||{},b.menu_button=1,this.createButton(a,b,c)},createSplitButton:function(b,c,d){var f=this,g=f.editor,h,i,j;return f.get(b)?null:(c.title=g.translate(c.title),c.scope=c.scope||g,c.onclick||(c.onclick=function(a){g.execCommand(c.cmd,c.ui||!1,a||c.value)}),c.onselect||(c.onselect=function(a){g.execCommand(c.cmd,c.ui||!1,a||c.value)}),c=e({title:c.title,"class":"mce_"+b,scope:c.scope,control_manager:f},c),b=f.prefix+b,j=d||f._cls.splitbutton||a.ui.SplitButton,i=f.add(new j(b,c,g)),g.onMouseDown.add(i.hideMenu,i),i)},createColorSplitButton:function(b,c,d){var f=this,g=f.editor,h,i,j,k;return f.get(b)?null:(c.title=g.translate(c.title),c.scope=c.scope||g,c.onclick||(c.onclick=function(b){a.isIE&&(k=g.selection.getBookmark(1)),g.execCommand(c.cmd,c.ui||!1,b||c.value)}),c.onselect||(c.onselect=function(a){g.execCommand(c.cmd,c.ui||!1,a||c.value)}),c=e({title:c.title,"class":"mce_"+b,menu_class:g.getParam("skin")+"Skin",scope:c.scope,more_colors_title:g.getLang("more_colors")},c),b=f.prefix+b,j=d||f._cls.colorsplitbutton||a.ui.ColorSplitButton,i=new j(b,c,g),g.onMouseDown.add(i.hideMenu,i),g.onRemove.add(function(){i.destroy()}),a.isIE&&(i.onShowMenu.add(function(){g.focus(),k=g.selection.getBookmark(1)}),i.onHideMenu.add(function(){k&&(g.selection.moveToBookmark(k),k=0)})),f.add(i))},createToolbar:function(b,c,d){var e,f=this,g;return b=f.prefix+b,g=d||f._cls.toolbar||a.ui.Toolbar,e=new g(b,c,f.editor),f.get(b)?null:f.add(e)},createToolbarGroup:function(b,c,d){var e,f=this,g;return b=f.prefix+b,g=d||this._cls.toolbarGroup||a.ui.ToolbarGroup,e=new g(b,c,f.editor),f.get(b)?null:f.add(e)},createSeparator:function(b){var c=b||this._cls.separator||a.ui.Separator;return new c},setControlType:function(a,b){return this._cls[a.toLowerCase()]=b},destroy:function(){d(this.controls,function(a){a.destroy()}),this.controls=null}})}(tinymce),function(a){var b=a.util.Dispatcher,c=a.each,d=a.isIE,e=a.isOpera;a.create("tinymce.WindowManager",{WindowManager:function(a){var c=this;c.editor=a,c.onOpen=new b(c),c.onClose=new b(c),c.params={},c.features={}},open:function(b,f){var g=this,h="",i,j,k=g.editor.settings.dialog_type=="modal",l,m,n,o=a.DOM.getViewPort(),p;b=b||{},f=f||{},m=e?o.w:screen.width,n=e?o.h:screen.height,b.name=b.name||"mc_"+(new Date).getTime(),b.width=parseInt(b.width||320),b.height=parseInt(b.height||240),b.resizable=!0,b.left=b.left||parseInt(m/2)-b.width/2,b.top=b.top||parseInt(n/2)-b.height/2,f.inline=!1,f.mce_width=b.width,f.mce_height=b.height,f.mce_auto_focus=b.auto_focus,k&&d&&(b.center=!0,b.help=!1,b.dialogWidth=b.width+"px",b.dialogHeight=b.height+"px",b.scroll=b.scrollbars||!1),c(b,function(b,c){a.is(b,"boolean")&&(b=b?"yes":"no"),/^(name|url)$/.test(c)||(d&&k?h+=(h?";":"")+c+":"+b:h+=(h?",":"")+c+"="+b)}),g.features=b,g.params=f,g.onOpen.dispatch(g,b,f),p=b.url||b.file,p=a._addVer(p);try{d&&k?(l=1,window.showModalDialog(p,window,h)):l=window.open(p,b.name,h)}catch(q){}l||alert(g.editor.getLang("popup_blocked"))},close:function(a){a.close(),this.onClose.dispatch(this)},createInstance:function(b,c,d,e,f,g){var h=a.resolve(b);return new h(c,d,e,f,g)},confirm:function(a,b,c,d){d=d||window,b.call(c||this,d.confirm(this._decode(this.editor.getLang(a,a))))},alert:function(a,b,c,d){var e=this;d=d||window,d.alert(e._decode(e.editor.getLang(a,a))),b&&b.call(c||e)},resizeBy:function(a,b,c){c.resizeBy(a,b)},_decode:function(b){return a.DOM.decode(b).replace(/\\n/g,"\n")}})}(tinymce),function(a){a.Formatter=function(b){function r(a){return a instanceof Array}function s(a,b){return e.getParents(a,b,e.getRoot())}function t(a){return a.nodeType===1&&(a.face==="mceinline"||a.style.fontFamily==="mceinline")}function u(a){return a?c[a]:c}function v(a,b){a&&(typeof a!="string"?d(a,function(a,b){v(b,a)}):(b=b.length?b:[b],d(b,function(a){a.deep===q&&(a.deep=!a.selector),a.split===q&&(a.split=!a.selector||a.inline),a.remove===q&&a.selector&&!a.inline&&(a.remove="none"),a.selector&&a.inline&&(a.mixed=!0,a.block_expand=!0),typeof a.classes=="string"&&(a.classes=a.classes.split(/\s+/))}),c[a]=b))}function y(c,k,l){function w(a){var b=a.startContainer,c=a.startOffset,d,e;if(b.nodeType==1||b.nodeValue===""){b=b.nodeType==1?b.childNodes[c]:b;if(b){d=new g(b,b.parentNode);for(e=d.current();e;e=d.next())if(e.nodeType==3&&!J(e)){a.setStart(e,0);break}}}return a}function y(a,b){b=b||n,a&&(b.onformat&&b.onformat(a,b,k,l),d(b.styles,function(b,c){e.setStyle(a,c,I(b,k))}),d(b.attributes,function(b,c){e.setAttrib(a,c,I(b,k))}),d(b.classes,function(b){b=I(b,k),e.hasClass(a,b)||e.addClass(a,b)}))}function z(){function a(a,b){var c=new g(b);for(l=c.current();l;l=c.prev())if(l.childNodes.length>1||l==a)return l}var c=b.selection.getRng(),d=c.startContainer,e=c.endContainer;if(d!=e&&c.endOffset==0){var f=a(d,e),h=f.nodeType==3?f.length:f.childNodes.length;c.setEnd(f,h)}return c}function A(b,c,f,g,h){var i=[],j=-1,k,l=-1,m=-1,n;return d(b.childNodes,function(a,b){if(a.nodeName==="UL"||a.nodeName==="OL")return j=b,k=a,!1}),d(b.childNodes,function(a,b){a.nodeName==="SPAN"&&e.getAttrib(a,"data-mce-type")=="bookmark"&&(a.id==c.id+"_start"?l=b:a.id==c.id+"_end"&&(m=b))}),j<=0||l<j&&m>j?(d(a.grep(b.childNodes),h),0):(n=f.cloneNode(o),d(a.grep(b.childNodes),function(a,b){if(l<j&&b<j||l>j&&b>j)i.push(a),a.parentNode.removeChild(a)}),l<j?b.insertBefore(n,k):l>j&&b.insertBefore(n,k.nextSibling),g.push(n),d(i,function(a){n.appendChild(a)}),n)}function C(b,f,g){var l=[],q,r;q=n.inline||n.block,r=e.create(q),y(r),h.walk(b,function(b){function j(b){var p=b.nodeName.toLowerCase(),s=b.parentNode.nodeName.toLowerCase(),u;if(G(p,"br")){h=0,n.block&&e.remove(b);return}if(n.wrapper&&B(b,c,k)){h=0;return}if(n.block&&!n.wrapper&&R(p)){b=e.rename(b,q),y(b),l.push(b),h=0;return}if(n.selector){d(m,function(a){if("collapsed"in a&&a.collapsed!==v)return;e.is(b,a.selector)&&!t(b)&&(y(b,a),u=!0)});if(!n.inline||u){h=0;return}}!i(q,p)||!i(s,q)||!g&&b.nodeType===3&&b.nodeValue.length===1&&b.nodeValue.charCodeAt(0)===65279||b.id==="_mce_caret"?p=="li"&&f?h=A(b,f,r,l,j):(h=0,d(a.grep(b.childNodes),j),h=0):(h||(h=r.cloneNode(o),b.parentNode.insertBefore(h,b),l.push(h)),h.appendChild(b))}var h;d(b,j)}),n.wrap_links===!1&&d(l,function(b){function c(b){var e,f,g;if(b.nodeName==="A"){f=r.cloneNode(o),l.push(f),g=a.grep(b.childNodes);for(e=0;e<g.length;e++)f.appendChild(g[e]);b.appendChild(f)}d(a.grep(b.childNodes),c)}c(b)}),d(l,function(a){function f(a){var b=0;return d(a.childNodes,function(a){!J(a)&&!P(a)&&b++}),b}function g(a){var b,c;return d(a.childNodes,function(a){if(a.nodeType==1&&!P(a)&&!t(a))return b=a,o}),b&&F(b,n)&&(c=b.cloneNode(o),y(c),e.replace(c,a,p),e.remove(b,1)),c||a}var b;b=f(a);if((l.length>1||!j(a))&&b===0){e.remove(a,1);return}if(n.inline||n.wrapper){!n.exact&&b===1&&(a=g(a)),d(m,function(b){d(e.select(b.inline,a),function(a){var c;if(b.wrap_links===!1){c=a.parentNode;do if(c.nodeName==="A")return;while(c=c.parentNode)}M(b,k,a,b.exact?a:null)})});if(B(a.parentNode,c,k))return e.remove(a,1),a=0,p;n.merge_with_parents&&e.getParent(a.parentNode,function(b){if(B(b,c,k))return e.remove(a,1),a=0,p}),a&&n.merge_siblings!==!1&&(a=Q(O(a),a),a=Q(a,O(a,p)))}})}var m=u(c),n=m[0],q,r,s,v=f.isCollapsed();if(n)if(l)l.nodeType?(r=e.createRng(),r.setStartBefore(l),r.setEndAfter(l),C(L(r,m),null,!0)):C(l,null,!0);else if(!v||!n.inline||e.select("td.mceSelected,th.mceSelected").length){var D=b.selection.getNode();b.selection.setRng(z()),q=f.getBookmark(),C(L(f.getRng(p),m),q),n.styles&&(n.styles.color||n.styles.textDecoration)&&(a.walk(D,x,"childNodes"),x(D)),f.moveToBookmark(q),f.setRng(w(f.getRng(p))),b.nodeChanged()}else T("apply",c,k)}function z(c,i,k){function x(a){var b=a.startContainer,c=a.startOffset,d,h,i,j;b.nodeType==3&&c>=b.nodeValue.length-1&&(b=b.parentNode,c=l(b)+1);if(b.nodeType==1){i=b.childNodes,b=i[Math.min(c,i.length-1)],d=new g(b),c>i.length-1&&d.next();for(h=d.current();h;h=d.next())if(h.nodeType==3&&!J(h)){j=e.create("a",null,m),h.parentNode.insertBefore(j,h),a.setStart(h,0),f.setRng(a),e.remove(j);return}}}function y(b){var c,d,e;c=a.grep(b.childNodes);for(d=0,e=n.length;d<e;d++)if(M(n[d],i,b,b))break;if(q.deep)for(d=0,e=c.length;d<e;d++)y(c[d])}function z(a){var b;return d(s(a.parentNode).reverse(),function(a){var d;!b&&a.id!="_start"&&a.id!="_end"&&
(d=B(a,c,i),d&&d.split!==!1&&(b=a))}),b}function A(a,b,c,d){var f,g,h,k,l,m;if(a){m=a.parentNode;for(f=b.parentNode;f&&f!=m;f=f.parentNode){g=f.cloneNode(o);for(l=0;l<n.length;l++)if(M(n[l],i,g,g)){g=0;break}g&&(h&&g.appendChild(h),k||(k=g),h=g)}d&&(!q.mixed||!j(a))&&(b=e.split(a,b)),h&&(c.parentNode.insertBefore(h,c),k.appendChild(c))}return b}function D(a){return A(z(a),a,a,!0)}function E(a){var b=e.get(a?"_start":"_end"),c=b[a?"firstChild":"lastChild"];return P(c)&&(c=c[a?"firstChild":"lastChild"]),e.remove(b,!0),c}function F(a){var c,e;a=L(a,n,p),q.split&&(c=S(a,p),e=S(a),c!=e?(c=K(c,"span",{id:"_start","data-mce-type":"bookmark"}),e=K(e,"span",{id:"_end","data-mce-type":"bookmark"}),D(c),D(e),c=E(p),e=E()):c=e=D(c),a.startContainer=c.parentNode,a.startOffset=l(c),a.endContainer=e.parentNode,a.endOffset=l(e)+1),h.walk(a,function(a){d(a,function(a){y(a),a.nodeType===1&&b.dom.getStyle(a,"text-decoration")==="underline"&&a.parentNode&&w(a.parentNode)==="underline"&&M({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,a)})})}var n=u(c),q=n[0],r,t,v;if(k){k.nodeType?(v=e.createRng(),v.setStartBefore(k),v.setEndAfter(k),F(v)):F(k);return}!f.isCollapsed()||!q.inline||e.select("td.mceSelected,th.mceSelected").length?(r=f.getBookmark(),F(f.getRng(p)),f.moveToBookmark(r),q.inline&&C(c,i,f.getStart())&&x(f.getRng(!0)),b.nodeChanged()):T("remove",c,i),a.isWebKit&&b.execCommand("mceCleanup")}function A(a,b,c){var d=u(a);!C(a,b,c)||"toggle"in d[0]&&!d[0].toggle?y(a,b,c):z(a,b,c)}function B(a,b,c,d){function j(a,b,f){var g,h,i=b[f],j;if(b.onmatch)return b.onmatch(a,b,f);if(i)if(i.length===q){for(g in i)if(i.hasOwnProperty(g)){f==="attributes"?h=e.getAttrib(a,g):h=H(a,g);if(d&&!h&&!b.exact)return;if((!d||b.exact)&&!G(h,I(i[g],c)))return}}else for(j=0;j<i.length;j++)if(f==="attributes"?e.getAttrib(a,i[j]):H(a,i[j]))return b;return b}var f=u(b),g,h,i;if(f&&a)for(h=0;h<f.length;h++){g=f[h];if(F(a,g)&&j(a,g,"attributes")&&j(a,g,"styles")){if(i=g.classes)for(h=0;h<i.length;h++)if(!e.hasClass(a,i[h]))return;return g}}}function C(a,b,c){function g(c){return c=e.getParent(c,function(c){return!!B(c,a,b,!0)}),B(c,a,b)}var d;return c?g(c):(c=f.getNode(),g(c)?p:(d=f.getStart(),d!=c&&g(d)?p:o))}function D(a,b){var c,d=[],g={},h,i,j;return c=f.getStart(),e.getParent(c,function(c){var e,f;for(e=0;e<a.length;e++)f=a[e],!g[f]&&B(c,f,b)&&(g[f]=!0,d.push(f))}),d}function E(a){var b=u(a),c,d,g,h,i;if(b){c=f.getStart(),d=s(c);for(h=b.length-1;h>=0;h--){i=b[h].selector;if(!i)return p;for(g=d.length-1;g>=0;g--)if(e.is(d[g],i))return p}}return o}function F(a,b){if(G(a,b.inline))return p;if(G(a,b.block))return p;if(b.selector)return e.is(a,b.selector)}function G(a,b){return a=a||"",b=b||"",a=""+(a.nodeName||a),b=""+(b.nodeName||b),a.toLowerCase()==b.toLowerCase()}function H(a,b){var c=e.getStyle(a,b);if(b=="color"||b=="backgroundColor")c=e.toHex(c);return b=="fontWeight"&&c==700&&(c="bold"),""+c}function I(a,b){return typeof a!="string"?a=a(b):b&&(a=a.replace(/%(\w+)/g,function(a,c){return b[c]||a})),a}function J(a){return a&&a.nodeType===3&&/^([\t \r\n]+|)$/.test(a.nodeValue)}function K(a,b,c){var d=e.create(b,c);return a.parentNode.insertBefore(d,a),d.appendChild(a),d}function L(a,c,d){function t(a){var b,d,g,l,m;b=d=a?f:i,m=a?"previousSibling":"nextSibling",root=e.getRoot();if(b.nodeType==3&&!J(b))if(a?h>0:k<b.nodeValue.length)return b;for(;;){if(d==root||!c[0].block_expand&&j(d))return d;for(l=d[m];l;l=l[m])if(!P(l)&&!J(l))return d;d=d.parentNode}return b}function u(a,b){b===q&&(b=a.nodeType===3?a.length:a.childNodes.length);while(a&&a.hasChildNodes())a=a.childNodes[b],a&&(b=a.nodeType===3?a.length:a.childNodes.length);return{node:a,offset:b}}var f=a.startContainer,h=a.startOffset,i=a.endContainer,k=a.endOffset,m,n,p,r;f.nodeType==1&&f.hasChildNodes()&&(n=f.childNodes.length-1,f=f.childNodes[h>n?n:h],f.nodeType==3&&(h=0)),i.nodeType==1&&i.hasChildNodes()&&(n=i.childNodes.length-1,i=i.childNodes[k>n?n:k-1],i.nodeType==3&&(k=i.nodeValue.length));if(P(f.parentNode)||P(f))f=P(f)?f:f.parentNode,f=f.nextSibling||f,f.nodeType==3&&(h=0);if(P(i.parentNode)||P(i))i=P(i)?i:i.parentNode,i=i.previousSibling||i,i.nodeType==3&&(k=i.length);if(c[0].inline){if(a.collapsed){function v(a,c,f){function m(a,b){var c,e,g=a.nodeValue;return typeof b=="undefined"&&(b=f?g.length:0),f?(c=g.lastIndexOf(" ",b),e=g.lastIndexOf(" ",b),c=c>e?c:e,c!==-1&&!d&&c++):(c=g.indexOf(" ",b),e=g.indexOf(" ",b),c=c!==-1&&(e===-1||c<e)?c:e),c}var h,i,k,l;if(a.nodeType===3){k=m(a,c);if(k!==-1)return{container:a,offset:k};l=a}h=new g(a,e.getParent(a,j)||b.getBody());while(i=h[f?"prev":"next"]())if(i.nodeType===3){l=i,k=m(i);if(k!==-1)return{container:i,offset:k}}else if(j(i))break;if(l)return f?c=0:c=l.length,{container:l,offset:c}}r=v(f,h,!0),r&&(f=r.container,h=r.offset),r=v(i,k),r&&(i=r.container,k=r.offset)}p=u(i,k);if(p.node){while(p.node&&p.offset===0&&p.node.previousSibling)p=u(p.node.previousSibling);p.node&&p.offset>0&&p.node.nodeType===3&&p.node.nodeValue.charAt(p.offset-1)===" "&&(p.offset>1?(i=p.node,i.splitText(p.offset-1)):!p.node.previousSibling)}}if(c[0].inline||c[0].block_expand){if(!c[0].inline||f.nodeType!=3||h===0)f=t(!0);if(!c[0].inline||i.nodeType!=3||k===i.nodeValue.length)i=t()}if(c[0].selector&&c[0].expand!==o&&!c[0].inline){function w(b,d){var f,g,h,i;b.nodeType==3&&b.nodeValue.length==0&&b[d]&&(b=b[d]),f=s(b);for(g=0;g<f.length;g++)for(h=0;h<c.length;h++){i=c[h];if("collapsed"in i&&i.collapsed!==a.collapsed)continue;if(e.is(f[g],i.selector))return f[g]}return b}f=w(f,"previousSibling"),i=w(i,"nextSibling")}if(c[0].block||c[0].selector){function x(a,b,d){var f;c[0].wrapper||(f=e.getParent(a,c[0].block)),f||(f=e.getParent(a.nodeType==3?a.parentNode:a,j)),f&&c[0].wrapper&&(f=s(f,"ul,ol").reverse()[0]||f);if(!f){f=a;while(f[b]&&!j(f[b])){f=f[b];if(G(f,"br"))break}}return f||a}f=x(f,"previousSibling"),i=x(i,"nextSibling"),c[0].block&&(j(f)||(f=t(!0)),j(i)||(i=t()))}return f.nodeType==1&&(h=l(f),f=f.parentNode),i.nodeType==1&&(k=l(i)+1,i=i.parentNode),{startContainer:f,startOffset:h,endContainer:i,endOffset:k}}function M(a,b,c,f){var g,h,i;if(!F(c,a))return o;if(a.remove!="all"){d(a.styles,function(a,d){a=I(a,b),typeof d=="number"&&(d=a,f=0),(!f||G(H(f,d),a))&&e.setStyle(c,d,""),i=1}),i&&e.getAttrib(c,"style")==""&&(c.removeAttribute("style"),c.removeAttribute("data-mce-style")),d(a.attributes,function(a,g){var h;a=I(a,b),typeof g=="number"&&(g=a,f=0);if(!f||G(e.getAttrib(f,g),a)){if(g=="class"){a=e.getAttrib(c,g);if(a){h="",d(a.split(/\s+/),function(a){/mce\w+/.test(a)&&(h+=(h?" ":"")+a)});if(h){e.setAttrib(c,g,h);return}}}g=="class"&&c.removeAttribute("className"),n.test(g)&&c.removeAttribute("data-mce-"+g),c.removeAttribute(g)}}),d(a.classes,function(a){a=I(a,b),(!f||e.hasClass(f,a))&&e.removeClass(c,a)}),h=e.getAttribs(c);for(g=0;g<h.length;g++)if(h[g].nodeName.indexOf("_")!==0)return o}if(a.remove!="none")return N(c,a),p}function N(b,c){var f=b.parentNode,g;if(c.block)if(!k){function h(a,b,c){return a=O(a,b,c),!a||a.nodeName=="BR"||j(a)}j(b)&&!j(f)&&(!h(b,o)&&!h(b.firstChild,p,1)&&b.insertBefore(e.create("br"),b.firstChild),!h(b,p)&&!h(b.lastChild,o,1)&&b.appendChild(e.create("br")))}else f==e.getRoot()&&(!c.list_block||!G(b,c.list_block))&&d(a.grep(b.childNodes),function(a){i(k,a.nodeName.toLowerCase())?g?g.appendChild(a):g=K(a,k):g=0});if(c.selector&&c.inline&&!G(c.inline,b))return;e.remove(b,1)}function O(a,b,c){if(a){b=b?"nextSibling":"previousSibling";for(a=c?a:a[b];a;a=a[b])if(a.nodeType==1||!J(a))return a}}function P(a){return a&&a.nodeType==1&&a.getAttribute("data-mce-type")=="bookmark"}function Q(b,c){function i(a,b){function c(a){var b={};return d(e.getAttribs(a),function(c){var d=c.nodeName.toLowerCase();d.indexOf("_")!==0&&d!=="style"&&(b[d]=e.getAttrib(a,d))}),b}function f(a,b){var c,d;for(d in a)if(a.hasOwnProperty(d)){c=b[d];if(c===q)return o;if(a[d]!=c)return o;delete b[d]}for(d in b)if(b.hasOwnProperty(d))return o;return p}return a.nodeName!=b.nodeName?o:f(c(a),c(b))?f(e.parseStyle(e.getAttrib(a,"style")),e.parseStyle(e.getAttrib(b,"style")))?p:o:o}var f,g,h;if(b&&c){function j(a,b){for(g=a;g;g=g[b]){if(g.nodeType==3&&g.nodeValue.length!==0)return a;if(g.nodeType==1&&!P(g))return g}return a}b=j(b,"previousSibling"),c=j(c,"nextSibling");if(i(b,c)){for(g=b.nextSibling;g&&g!=c;)h=g,g=g.nextSibling,b.appendChild(h);return e.remove(c),d(a.grep(c.childNodes),function(a){b.appendChild(a)}),b}}return c}function R(a){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(a)}function S(a,c){var d,e,f,h;return d=a[c?"startContainer":"endContainer"],e=a[c?"startOffset":"endOffset"],d.nodeType==1&&(f=d.childNodes.length-1,!c&&e&&e--,d=d.childNodes[e>f?f:e]),d.nodeType===3&&c&&e>=d.nodeValue.length&&(d=(new g(d,b.getBody())).next()||d),d.nodeType===3&&!c&&e==0&&(d=(new g(d,b.getBody())).prev()||d),d}function T(c,d,i){function n(a){var c=e.create("span",{id:k,"data-mce-bogus":!0,style:l?"color:red":""});return a&&c.appendChild(b.getDoc().createTextNode(j)),c}function o(a,b){while(a){if(a.nodeType===3&&a.nodeValue!==j||a.childNodes.length>1)return!1;b&&a.nodeType===1&&b.push(a),a=a.firstChild}return!0}function p(a){while(a){if(a.id===k)return a;a=a.parentNode}}function q(a){var b;if(a){b=new g(a,a);for(a=b.current();a;a=b.next())if(a.nodeType===3)return a}}function r(a,b){var c,d;if(!a){a=p(f.getStart());if(!a)while(a=e.get(k))r(a,!1)}else d=f.getRng(!0),o(a)?(b!==!1&&(d.setStartBefore(a),d.setEndBefore(a)),e.remove(a)):(c=q(a),c=c.deleteData(0,1),e.remove(a,1)),f.setRng(d)}function s(){var a,b,c,e,g,k,l;a=f.getRng(!0),e=a.startOffset,k=a.startContainer,l=k.nodeValue,b=p(f.getStart()),b&&(c=q(b)),l&&e>0&&e<l.length&&/\w/.test(l.charAt(e))&&/\w/.test(l.charAt(e-1))?(g=f.getBookmark(),a.collapse(!0),a=L(a,u(d)),a=h.split(a),y(d,i,a),f.moveToBookmark(g)):(!b||c.nodeValue!==j?(b=n(!0),c=b.firstChild,a.insertNode(b),e=1,y(d,i,b)):y(d,i,b),f.setCursorLocation(c,e))}function t(){var a=f.getRng(!0),b,c,g,k,l,m,o=[],p,q;b=a.startContainer,c=a.startOffset,l=b;if(b.nodeType==3){if(c!=b.nodeValue.length||b.nodeValue===j)k=!0;l=l.parentNode}while(l){if(B(l,d,i)){m=l;break}l.nextSibling&&(k=!0),o.push(l),l=l.parentNode}if(!m)return;if(k)g=f.getBookmark(),a.collapse(!0),a=L(a,u(d),!0),a=h.split(a),z(d,i,a),f.moveToBookmark(g);else{q=n(),l=q;for(p=o.length-1;p>=0;p--)l.appendChild(o[p].cloneNode(!1)),l=l.firstChild;l.appendChild(e.doc.createTextNode(j)),l=l.firstChild,e.insertAfter(q,m),f.setCursorLocation(l,1)}}var j,k="_mce_caret",l=b.settings.caret_debug;j=a.isGecko?"​":m,b.onBeforeGetContent.addToTop(function(){var a=[],b;if(o(p(f.getStart()),a)){b=a.length;while(b--)e.setAttrib(a[b],"data-mce-bogus","1")}}),a.each("onMouseUp onKeyUp".split(" "),function(a){b[a].addToTop(function(){r()})}),b.onKeyDown.addToTop(function(a,b){var c=b.keyCode;(c==8||c==37||c==39)&&r(p(f.getStart()))}),c=="apply"?s():t()}var c={},d=a.each,e=b.dom,f=b.selection,g=a.dom.TreeWalker,h=new a.dom.RangeUtils(e),i=b.schema.isValidChild,j=e.isBlock,k=b.settings.forced_root_block,l=e.nodeIndex,m="﻿",n=/^(src|href|style)$/,o=!1,p=!0,q,w=function(a){var c;return b.dom.getParent(a,function(a){return c=b.dom.getStyle(a,"text-decoration"),c&&c!=="none"}),c},x=function(a){var c;a.nodeType===1&&a.parentNode&&a.parentNode.nodeType===1&&(c=w(a.parentNode),b.dom.getStyle(a,"color")&&c?b.dom.setStyle(a,"text-decoration",c):b.dom.getStyle(a,"textdecoration")===c&&b.dom.setStyle(a,"text-decoration",null))};a.extend(this,{get:u,register:v,apply:y,remove:z,toggle:A,match:C,matchAll:D,matchNode:B,canApply:E})}}(tinymce),tinymce.onAddEditor.add(function(a,b){var c,d,e,f=b.settings;if(f.inline_styles){d=a.explode(f.font_size_legacy_values);function g(b,c){a.each(c,function(a,c){a&&e.setStyle(b,c,a)}),e.rename(b,"span")}c={font:function(a,b){g(b,{backgroundColor:b.style.backgroundColor,color:b.color,fontFamily:b.face,fontSize:d[parseInt(b.size)-1]})},u:function(a,b){g(b,{textDecoration:"underline"})},strike:function(a,b){g(b,{textDecoration:"line-through"})}};function h(d,g){e=d.dom,f.convert_fonts_to_spans&&a.each(e.select("font,u,strike",g.node),function(a){c[a.nodeName.toLowerCase()](b.dom,a)})}b.onPreProcess.add(h),b.onSetContent.add(h),b.onInit.add(function(){b.selection.onSetContent.add(h)})}});var tinymce=null,tinyMCEPopup,tinyMCE;tinyMCEPopup={init:function(){var a=this,b,c;b=a.getWin(),tinymce=b.tinymce,tinyMCE=b.tinyMCE,a.editor=tinymce.EditorManager.activeEditor,a.params=a.editor.windowManager.params,a.features=a.editor.windowManager.features,a.dom=a.editor.windowManager.createInstance("tinymce.dom.DOMUtils",document),a.features.popup_css!==!1&&a.dom.loadCSS(a.features.popup_css||a.editor.settings.popup_css),a.listeners=[],a.onInit={add:function(b,c){a.listeners.push({func:b,scope:c})}},a.isWindow=!a.getWindowArg("mce_inline"),a.id=a.getWindowArg("mce_window_id"),a.editor.windowManager.onOpen.dispatch(a.editor.windowManager,window)},getWin:function(){return!window.frameElement&&window.dialogArguments||opener||parent||top},getWindowArg:function(a,b){var c=this.params[a];return tinymce.is(c)?c:b},getParam:function(a,b){return this.editor.getParam(a,b)},getLang:function(a,b){return this.editor.getLang(a,b)},execCommand:function(a,b,c,d){return d=d||{},d.skip_focus=1,this.restoreSelection(),this.editor.execCommand(a,b,c,d)},resizeToInnerSize:function(){var a=this;setTimeout(function(){var b=a.dom.getViewPort(window);a.editor.windowManager.resizeBy(a.getWindowArg("mce_width")-b.w,a.getWindowArg("mce_height")-b.h,a.id||window)},10)},executeOnLoad:function(s){this.onInit.add(function(){eval(s)})},storeSelection:function(){this.editor.windowManager.bookmark=tinyMCEPopup.editor.selection.getBookmark(1)},restoreSelection:function(){var a=tinyMCEPopup;!a.isWindow&&tinymce.isIE&&a.editor.selection.moveToBookmark(a.editor.windowManager.bookmark)},requireLangPack:function(){var a=this,b=a.getWindowArg("plugin_url")||a.getWindowArg("theme_url");b&&a.editor.settings.language&&a.features.translate_i18n!==!1&&a.editor.settings.language_load!==!1&&(b+="/langs/"+a.editor.settings.language+"_dlg.js",tinymce.ScriptLoader.isDone(b)||(document.write('<script type="text/javascript" src="'+tinymce._addVer(b)+'"></script>'),tinymce.ScriptLoader.markDone(b)))},pickColor:function(a,b){this.execCommand("mceColorPicker",!0,{color:document.getElementById(b).value,func:function(a){document.getElementById(b).value=a;try{document.getElementById(b).onchange()}catch(c){}}})},openBrowser:function(a,b,c){tinyMCEPopup.restoreSelection(),this.editor.execCallback("file_browser_callback",a,document.getElementById(a).value,b,window)},confirm:function(a,b,c){this.editor.windowManager.confirm(a,b,c,window)},alert:function(a,b,c){this.editor.windowManager.alert(a,b,c,window)},close:function(){function b(){a.editor.windowManager.close(window),tinymce=tinyMCE=a.editor=a.params=a.dom=a.dom.doc=null}var a=this;tinymce.isOpera?a.getWin().setTimeout(b,0):b()},_restoreSelection:function(){var a=window.event.srcElement;a.nodeName=="INPUT"&&(a.type=="submit"||a.type=="button")&&tinyMCEPopup.restoreSelection()},_onDOMLoaded:function(){var a=tinyMCEPopup,b=document.title,c,d,e;if(a.domLoaded)return;a.domLoaded=1,a.features.translate_i18n!==!1&&(d=document.body.innerHTML,tinymce.isIE&&(d=d.replace(/ (value|title|alt)=([^"][^\s>]+)/gi,' $1="$2"')),document.dir=a.editor.getParam("directionality",""),(e=a.editor.translate(d))&&e!=d&&(document.body.innerHTML=e),(e=a.editor.translate(b))&&e!=b&&(document.title=b=e)),(!a.editor.getParam("browser_preferred_colors",!1)||!a.isWindow)&&a.dom.addClass(document.body,"forceColors"),document.body.style.display="",tinymce.isIE&&(document.attachEvent("onmouseup",tinyMCEPopup._restoreSelection),a.dom.add(a.dom.select("head")[0],"base",{target:"_self"})),a.restoreSelection(),a.resizeToInnerSize(),a.isWindow?window.focus():a.editor.windowManager.setTitle(window,b),!tinymce.isIE&&!a.isWindow&&tinymce.dom.Event._add(document,"focus",function(){a.editor.windowManager.focus(a.id)}),tinymce.each(a.dom.select("select"),function(a){a.onkeydown=tinyMCEPopup._accessHandler}),tinymce.each(a.listeners,function(b){b.func.call(b.scope,a.editor)}),a.getWindowArg("mce_auto_focus",!0)&&(window.focus(),tinymce.each(document.forms,function(b){tinymce.each(b.elements,function(b){if(a.dom.hasClass(b,"mceFocus")&&!b.disabled)return b.focus(),!1})})),document.onkeyup=tinyMCEPopup._closeWinKeyHandler},_accessHandler:function(a){a=a||window.event;if(a.keyCode==13||a.keyCode==32)return a=a.target||a.srcElement,a.onchange&&a.onchange(),tinymce.dom.Event.cancel(a)},_closeWinKeyHandler:function(a){a=a||window.event,a.keyCode==27&&tinyMCEPopup.close()},_wait:function(){document.attachEvent?(document.attachEvent("onreadystatechange",function(){document.readyState==="complete"&&(document.detachEvent("onreadystatechange",arguments.callee),tinyMCEPopup._onDOMLoaded())}),document.documentElement.doScroll&&window==window.top&&function(){if(tinyMCEPopup.domLoaded)return;try{document.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}tinyMCEPopup._onDOMLoaded()}(),document.attachEvent("onload",tinyMCEPopup._onDOMLoaded)):document.addEventListener&&(window.addEventListener("DOMContentLoaded",tinyMCEPopup._onDOMLoaded,!1),window.addEventListener("load",tinyMCEPopup._onDOMLoaded,!1))}},tinyMCEPopup.init(),tinyMCEPopup._wait(),function(a){var b=/^\s*|\s*$/g,c,d="B".replace(/A(.)|B/,"$1")==="$1",e={majorVersion:"3",minorVersion:"4.7",releaseDate:"2011-11-03",_init:function(){function l(a){return a.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(a.src)?(/_(src|dev)\.js/g.test(a.src)&&(b.suffix="_src"),(j=a.src.indexOf("?"))!=-1&&(b.query=a.src.substring(j+1)),b.baseURL=a.src.substring(0,a.src.lastIndexOf("/")),i&&b.baseURL.indexOf("://")==-1&&b.baseURL.indexOf("/")!==0&&(b.baseURL=i+b.baseURL),b.baseURL):null}var b=this,c=document,d=navigator,e=d.userAgent,f,g,h,i,j,k;b.isOpera=a.opera&&opera.buildNumber,b.isWebKit=/WebKit/.test(e),b.isIE=!b.isWebKit&&!b.isOpera&&/MSIE/gi.test(e)&&/Explorer/gi.test(d.appName),b.isIE6=b.isIE&&/MSIE [56]/.test(e),b.isIE7=b.isIE&&/MSIE [7]/.test(e),b.isIE8=b.isIE&&/MSIE [8]/.test(e),b.isIE9=b.isIE&&/MSIE [9]/.test(e),b.isGecko=!b.isWebKit&&/Gecko/.test(e),b.isMac=e.indexOf("Mac")!=-1,b.isAir=/adobeair/i.test(e),b.isIDevice=/(iPad|iPhone)/.test(e),b.isIOS5=b.isIDevice&&e.match(/AppleWebKit\/(\d*)/)[1]>=534;if(a.tinyMCEPreInit){b.suffix=tinyMCEPreInit.suffix,b.baseURL=tinyMCEPreInit.base,b.query=tinyMCEPreInit.query;return}b.suffix="",g=c.getElementsByTagName("base");for(f=0;f<g.length;f++)if(k=g[f].href)/^https?:\/\/[^\/]+$/.test(k)&&(k+="/"),i=k?k.match(/.*\//)[0]:"";g=c.getElementsByTagName("script");for(f=0;f<g.length;f++)if(l(g[f]))return;h=c.getElementsByTagName("head")[0];if(h){g=h.getElementsByTagName("script");for(f=0;f<g.length;f++)if(l(g[f]))return}return},is:function(a,b){return b?b=="array"&&a.hasOwnProperty&&a instanceof Array?!0:typeof a==b:a!==c},makeMap:function(a,b,c){var d;a=a||[],b=b||",",typeof a=="string"&&(a=a.split(b)),c=c||{},d=a.length;while(d--)c[a[d]]={};return c},each:function(a,b,d){var e,f;if(!a)return 0;d=d||a;if(a.length!==c){for(e=0,f=a.length;e<f;e++)if(b.call(d,a[e],e,a)===!1)return 0}else for(e in a)if(a.hasOwnProperty(e)&&b.call(d,a[e],e,a)===!1)return 0;return 1},map:function(a,b){var c=[];return e.each(a,function(a){c.push(b(a))}),c},grep:function(a,b){var c=[];return e.each(a,function(a){(!b||b(a))&&c.push(a)}),c},inArray:function(a,b){var c,d;if(a)for(c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},extend:function(a,b){var d,f,g=arguments;for(d=1,f=g.length;d<f;d++)b=g[d],e.each(b,function(b,d){b!==c&&(a[d]=b)});return a},trim:function(a){return(a?""+a:"").replace(b,"")},create:function(a,b,c){var d=this,e,f,g,h,i,j=0;a=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(a),g=a[3].match(/(^|\.)(\w+)$/i)[2],f=d.createNS(a[3].replace(/\.\w+$/,""),c);if(f[g])return;if(a[2]=="static"){f[g]=b,this.onCreate&&this.onCreate(a[2],a[3],f[g]);return}b[g]||(b[g]=function(){},j=1),f[g]=b[g],d.extend(f[g].prototype,b),a[5]&&(e=d.resolve(a[5]).prototype,h=a[5].match(/\.(\w+)$/i)[1],i=f[g],j?f[g]=function(){return e[h].apply(this,arguments)}:f[g]=function(){return this.parent=e[h],i.apply(this,arguments)},f[g].prototype[g]=f[g],d.each(e,function(a,b){f[g].prototype[b]=e[b]}),d.each(b,function(a,b){e[b]?f[g].prototype[b]=function(){return this.parent=e[b],a.apply(this,arguments)}:b!=g&&(f[g].prototype[b]=a)})),d.each(b["static"],function(a,b){f[g][b]=a}),this.onCreate&&this.onCreate(a[2],a[3],f[g].prototype)},walk:function(a,b,c,d){d=d||this,a&&(c&&(a=a[c]),e.each(a,function(a,g){if(b.call(d,a,g,c)===!1)return!1;e.walk(a,b,c,d)}))},createNS:function(b,c){var d,e;c=c||a,b=b.split(".");for(d=0;d<b.length;d++)e=b[d],c[e]||(c[e]={}),c=c[e];return c},resolve:function(b,c){var d,e;c=c||a,b=b.split(".");for(d=0,e=b.length;d<e;d++){c=c[b[d]];if(!c)break}return c},addUnload:function(b,c){var d=this;b={func:b,scope:c||this};if(!d.unloads){function e(){var b=d.unloads,c,g;if(b){for(g in b)c=b[g],c&&c.func&&c.func.call(c.scope,1);a.detachEvent?(a.detachEvent("onbeforeunload",f),a.detachEvent("onunload",e)):a.removeEventListener&&a.removeEventListener("unload",e,!1),d.unloads=c=b=w=e=0,a.CollectGarbage&&CollectGarbage()}}function f(){var b=document;if(b.readyState=="interactive"){function c(){b.detachEvent("onstop",c),e&&e(),b=0}b&&b.attachEvent("onstop",c),a.setTimeout(function(){b&&b.detachEvent("onstop",c)},0)}}a.attachEvent?(a.attachEvent("onunload",e),a.attachEvent("onbeforeunload",f)):a.addEventListener&&a.addEventListener("unload",e,!1),d.unloads=[b]}else d.unloads.push(b);return b},removeUnload:function(a){var b=this.unloads,c=null;return e.each(b,function(d,e){if(d&&d.func==a)return b.splice(e,1),c=a,!1}),c},explode:function(a,b){return a?e.map(a.split(b||","),e.trim):a},_addVer:function(a){var b;return this.query?(b=(a.indexOf("?")==-1?"?":"&")+this.query,a.indexOf("#")==-1?a+b:a.replace("#",b+"#")):a},_replace:function(a,b,e){return d?e.replace(a,function(){var a=b,d=arguments,e;for(e=0;e<d.length-2;e++)d[e]===c?a=a.replace(new RegExp("\\$"+e,"g"),""):a=a.replace(new RegExp("\\$"+e,"g"),d[e]);return a}):e.replace(a,b)}};e._init(),a.tinymce=a.tinyMCE=e}(window),tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(a){this.scope=a||this,this.listeners=[]},add:function(a,b){return this.listeners.push({cb:a,scope:b||this.scope}),a},addToTop:function(a,b){return this.listeners.unshift({cb:a,scope:b||this.scope}),a},remove:function(a){var b=this.listeners,c=null;return tinymce.each(b,function(d,e){if(a==d.cb)return c=a,b.splice(e,1),!1}),c},dispatch:function(){var a,b=arguments,c,d=this.listeners,e;for(c=0;c<d.length;c++){e=d[c],a=e.cb.apply(e.scope,b);if(a===!1)break}return a}}),function(){var a=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(b,c){var d=this,e,f,g,h;b=tinymce.trim(b),c=d.settings=c||{};if(/^([\w\-]+):([^\/]{2})/i.test(b)||/^\s*#/.test(b)){d.source=b;return}b.indexOf("/")===0&&b.indexOf("//")!==0&&(b=(c.base_uri?c.base_uri.protocol||"http":"http")+"://mce_host"+b),/^[\w-]*:?\/\//.test(b)||(h=c.base_uri?c.base_uri.path:(new tinymce.util.URI(location.href)).directory,b=(c.base_uri&&c.base_uri.protocol||"http")+"://mce_host"+d.toAbsPath(h,b)),b=b.replace(/@@/g,"(mce_at)"),b=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(b),a(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(a,c){var e=b[c];e&&(e=e.replace(/\(mce_at\)/g,"@@")),d[a]=e});if(g=c.base_uri){d.protocol||(d.protocol=g.protocol),d.userInfo||(d.userInfo=g.userInfo),!d.port&&d.host=="mce_host"&&(d.port=g.port);if(!d.host||d.host=="mce_host")d.host=g.host;d.source=""}},setPath:function(a){var b=this;a=/^(.*?)\/?(\w+)?$/.exec(a),b.path=a[0],b.directory=a[1],b.file=a[2],b.source="",b.getURI()},toRelative:function(a){var b=this,c;return a==="./"?a:(a=new tinymce.util.URI(a,{base_uri:b}),a.host!="mce_host"&&b.host!=a.host&&a.host||b.port!=a.port||b.protocol!=a.protocol?a.getURI():(c=b.toRelPath(b.path,a.path),a.query&&(c+="?"+a.query),a.anchor&&(c+="#"+a.anchor),c))},toAbsolute:function(a,b){var a=new tinymce.util.URI(a,{base_uri:this});return a.getURI(this.host==a.host&&this.protocol==a.protocol?b:0)},toRelPath:function(a,b){var c,d=0,e="",f,g;a=a.substring(0,a.lastIndexOf("/")),a=a.split("/"),c=b.split("/");if(a.length>=c.length)for(f=0,g=a.length;f<g;f++)if(f>=c.length||a[f]!=c[f]){d=f+1;break}if(a.length<c.length)for(f=0,g=c.length;f<g;f++)if(f>=a.length||a[f]!=c[f]){d=f+1;break}if(d==1)return b;for(f=0,g=a.length-(d-1);f<g;f++)e+="../";for(f=d-1,g=c.length;f<g;f++)f!=d-1?e+="/"+c[f]:e+=c[f];return e},toAbsPath:function(b,c){var d,e=0,f=[],g,h;g=/\/$/.test(c)?"/":"",b=b.split("/"),c=c.split("/"),a(b,function(a){a&&f.push(a)}),b=f;for(d=c.length-1,f=[];d>=0;d--){if(c[d].length==0||c[d]==".")continue;if(c[d]==".."){e++;continue}if(e>0){e--;continue}f.push(c[d])}return d=b.length-e,d<=0?h=f.reverse().join("/"):h=b.slice(0,d).join("/")+"/"+f.reverse().join("/"),h.indexOf("/")!==0&&(h="/"+h),g&&h.lastIndexOf("/")!==h.length-1&&(h+=g),h},getURI:function(a){var b,c=this;if(!c.source||a)b="",a||(c.protocol&&(b+=c.protocol+"://"),c.userInfo&&(b+=c.userInfo+"@"),c.host&&(b+=c.host),c.port&&(b+=":"+c.port)),c.path&&(b+=c.path),c.query&&(b+="?"+c.query),c.anchor&&(b+="#"+c.anchor),c.source=b;return c.source}})}(),function(){var a=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(b){var c=this.get(b),d;return c&&a(c.split("&"),function(a){a=a.split("="),d=d||{},d[unescape(a[0])]=unescape(a[1])}),d},setHash:function(b,c,d,e,f,g){var h="";a(c,function(a,b){h+=(h?"&":"")+escape(b)+"="+escape(a)}),this.set(b,h,d,e,f,g)},get:function(a){var b=document.cookie,c,d=a+"=",e;if(!b)return;e=b.indexOf("; "+d);if(e==-1){e=b.indexOf(d);if(e!=0)return null}else e+=2;return c=b.indexOf(";",e),c==-1&&(c=b.length),unescape(b.substring(e+d.length,c))},set:function(a,b,c,d,e,f){document.cookie=a+"="+escape(b)+(c?"; expires="+c.toGMTString():"")+(d?"; path="+escape(d):"")+(e?"; domain="+e:"")+(f?"; secure":"")},remove:function(a,b){var c=new Date;c.setTime(c.getTime()-1e3),this.set(a,"",c,b,c)}})}(),function(){function serialize(a,b){var c,d,e;b=b||'"';if(a==null)return"null";e=typeof a;if(e=="string")return d="\bb\tt\nn\ff\rr\"\"''\\\\",b+a.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,e){return b==='"'&&a==="'"?a:(c=d.indexOf(e),c+1?"\\"+d.charAt(c+1):(a=e.charCodeAt().toString(16),"\\u"+"0000".substring(a.length)+a))})+b;if(e=="object"){if(a.hasOwnProperty&&a instanceof Array){for(c=0,d="[";c<a.length;c++)d+=(c>0?",":"")+serialize(a[c],b);return d+"]"}d="{";for(c in a)a.hasOwnProperty(c)&&(d+=typeof a[c]!="function"?(d.length>1?","+b:b)+c+b+":"+serialize(a[c],b):"");return d+"}"}return""+a}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}}(),tinymce.create("static tinymce.util.XHR",{send:function(a){function f(a){b=0;try{b=new ActiveXObject(a)}catch(c){}return b}var b,c,d=window,e=0;a.scope=a.scope||this,a.success_scope=a.success_scope||a.scope,a.error_scope=a.error_scope||a.scope,a.async=a.async===!1?!1:!0,a.data=a.data||"",b=d.XMLHttpRequest?new XMLHttpRequest:f("Microsoft.XMLHTTP")||f("Msxml2.XMLHTTP");if(b){b.overrideMimeType&&b.overrideMimeType(a.content_type),b.open(a.type||(a.data?"POST":"GET"),a.url,a.async),a.content_type&&b.setRequestHeader("Content-Type",a.content_type),b.setRequestHeader("X-Requested-With","XMLHttpRequest"),b.send(a.data);function g(){!a.async||b.readyState==4||e++>1e4?(a.success&&e<1e4&&b.status==200?a.success.call(a.success_scope,""+b.responseText,b,a):a.error&&a.error.call(a.error_scope,e>1e4?"TIMED_OUT":"GENERAL",b,a),b=null):d.setTimeout(g,10)}if(!a.async)return g();c=d.setTimeout(g,10)}}}),function(){var a=tinymce.extend,b=tinymce.util.JSON,c=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(b){this.settings=a({},b),this.count=0},send:function(d){var e=d.error,f=d.success;d=a(this.settings,d),d.success=function(a,c){a=b.parse(a),typeof a=="undefined"&&(a={error:"JSON Parse error."}),a.error?e.call(d.error_scope||d.scope,a.error,c):f.call(d.success_scope||d.scope,a.result)},d.error=function(a,b){e&&e.call(d.error_scope||d.scope,a,b)},d.data=b.serialize({id:d.id||"c"+this.count++,method:d.method,params:d.params}),d.content_type="application/json",c.send(d)},"static":{sendRPC:function(a){return(new tinymce.util.JSONRequest).send(a)}}})}(),function(a){a.VK={DELETE:46,BACKSPACE:8,ENTER:13,TAB:9,SPACEBAR:32,UP:38,DOWN:40}}(tinymce),function(a){function e(b){var e=b.dom,f=b.selection;b.onKeyDown.add(function(b,g){var h,i,j,k,l;l=g.keyCode==d;if(l||g.keyCode==c){g.preventDefault(),h=f.getRng(),i=e.getParent(h.startContainer,e.isBlock),l&&(i=e.getNext(i,e.isBlock));if(i){j=i.firstChild;while(j&&j.nodeType==3&&j.nodeValue.length==0)j=j.nextSibling;j&&j.nodeName==="SPAN"&&(k=j.cloneNode(!1))}b.getDoc().execCommand(l?"ForwardDelete":"Delete",!1,null),i=e.getParent(h.startContainer,e.isBlock),a.each(e.select("span.Apple-style-span,font.Apple-style-span",i),function(a){var b=f.getBookmark();k?e.replace(k.cloneNode(!1),a,!0):e.remove(a,!0),f.moveToBookmark(b)})}})}function f(a){a.onKeyUp.add(function(a,b){var e=b.keyCode;if(e==d||e==c)if(a.dom.isEmpty(a.getBody())){a.setContent("",{format:"raw"}),a.nodeChanged();return}})}function g(a){a.dom.bind(a.getDoc(),"focusin",function(){a.selection.setRng(a.selection.getRng())})}function h(b){b.onKeyDown.add(function(b,d){if(d.keyCode===c&&b.selection.isCollapsed()&&b.selection.getRng(!0).startOffset===0){var e=b.selection.getNode(),f=e.previousSibling;f&&f.nodeName&&f.nodeName.toLowerCase()==="hr"&&(b.dom.remove(f),a.dom.Event.cancel(d))}})}function i(a){Range.prototype.getClientRects||a.onMouseDown.add(function(a,b){if(b.target.nodeName==="HTML"){var c=a.getBody();c.blur(),setTimeout(function(){c.focus()},0)}})}function j(a){a.onClick.add(function(a,b){b=b.target,/^(IMG|HR)$/.test(b.nodeName)&&a.selection.getSel().setBaseAndExtent(b,0,b,1),b.nodeName=="A"&&a.dom.hasClass(b,"mceItemAnchor")&&a.selection.select(b),a.nodeChanged()})}function k(b){var c,d;b.dom.bind(b.getDoc(),"selectionchange",function(){d&&(clearTimeout(d),d=0),d=window.setTimeout(function(){var d=b.selection.getRng();if(!c||!a.dom.RangeUtils.compareRanges(d,c))b.nodeChanged(),c=d},50)})}function l(a){document.body.setAttribute("role","application")}var b=a.VK,c=b.BACKSPACE,d=b.DELETE;a.create("tinymce.util.Quirks",{Quirks:function(b){a.isWebKit&&(e(b),f(b),g(b),j(b),a.isIDevice&&k(b)),a.isIE&&(h(b),f(b),l(b)),a.isGecko&&(h(b),i(b))}})}(tinymce),function(a){function j(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.textContent||b.innerText||a}function k(a,b){var d,e,f,g={};if(a){a=a.split(","),b=b||10;for(d=0;d<a.length;d+=2)e=String.fromCharCode(parseInt(a[d],b)),c[e]||(f="&"+a[d+1]+";",g[e]=f,g[f]=e);return g}}var b,c,d,e=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,g=/[<>&\"\']/g,h=/&(#x|#)?([\w]+);/g,i={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};c={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},d={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},b=k("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro"
,32),a.html=a.html||{},a.html.Entities={encodeRaw:function(a,b){return a.replace(b?e:f,function(a){return c[a]||a})},encodeAllRaw:function(a){return(""+a).replace(g,function(a){return c[a]||a})},encodeNumeric:function(a,b){return a.replace(b?e:f,function(a){return a.length>1?"&#"+((a.charCodeAt(0)-55296)*1024+(a.charCodeAt(1)-56320)+65536)+";":c[a]||"&#"+a.charCodeAt(0)+";"})},encodeNamed:function(a,d,g){return g=g||b,a.replace(d?e:f,function(a){return c[a]||g[a]||a})},getEncodeFunc:function(d,g){function i(a,b){return a.replace(b?e:f,function(a){return c[a]||g[a]||"&#"+a.charCodeAt(0)+";"||a})}function j(a,b){return h.encodeNamed(a,b,g)}var h=a.html.Entities;return g=k(g)||b,d=a.makeMap(d.replace(/\+/g,",")),d.named&&d.numeric?i:d.named?g?j:h.encodeNamed:d.numeric?h.encodeNumeric:h.encodeRaw},decode:function(a){return a.replace(h,function(a,c,e){return c?(e=parseInt(e,c.length===2?16:10),e>65535?(e-=65536,String.fromCharCode(55296+(e>>10),56320+(e&1023))):i[e]||String.fromCharCode(e)):d[a]||b[a]||j(a)})}}}(tinymce),tinymce.html.Styles=function(a,b){function l(a,b,c,d){function e(a){return a=parseInt(a).toString(16),a.length>1?a:"0"+a}return"#"+e(b)+e(c)+e(d)}var c=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,d=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,e=/\s*([^:]+):\s*([^;]+);?/g,f=/\s+$/,g=/rgb/,h,i,j={},k;a=a||{},k="\\\" \\' \\; \\: ; : ﻿".split(" ");for(i=0;i<k.length;i++)j[k[i]]="﻿"+i,j["﻿"+i]=k[i];return{toHex:function(a){return a.replace(c,l)},parse:function(b){function p(a,b){var c,d,e,f;c=g[a+"-top"+b];if(!c)return;d=g[a+"-right"+b];if(c!=d)return;e=g[a+"-bottom"+b];if(d!=e)return;f=g[a+"-left"+b];if(e!=f)return;g[a+b]=f,delete g[a+"-top"+b],delete g[a+"-right"+b],delete g[a+"-bottom"+b],delete g[a+"-left"+b]}function q(a){var b=g[a],c;if(!b||b.indexOf(" ")<0)return;b=b.split(" "),c=b.length;while(c--)if(b[c]!==b[0])return!1;return g[a]=b[0],!0}function r(a,b,c,d){if(!q(b))return;if(!q(c))return;if(!q(d))return;g[a]=g[b]+" "+g[c]+" "+g[d],delete g[b],delete g[c],delete g[d]}function s(a){return m=!0,j[a]}function t(a,b){return m&&(a=a.replace(/\uFEFF[0-9]/g,function(a){return j[a]})),b||(a=a.replace(/\\([\'\";:])/g,"$1")),a}var g={},h,i,k,m,n=a.url_converter,o=a.url_converter_scope||this;if(b){b=b.replace(/\\[\"\';:\uFEFF]/g,s).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(a){return a.replace(/[;:]/g,s)});while(h=e.exec(b)){i=h[1].replace(f,"").toLowerCase(),k=h[2].replace(f,"");if(i&&k.length>0){if(i==="font-weight"&&k==="700")k="bold";else if(i==="color"||i==="background-color")k=k.toLowerCase();k=k.replace(c,l),k=k.replace(d,function(a,b,c,d,e,f){return e=e||f,e?(e=t(e),"'"+e.replace(/\'/g,"\\'")+"'"):(b=t(b||c||d),n&&(b=n.call(o,b,"style")),"url('"+b.replace(/\'/g,"\\'")+"')")}),g[i]=m?t(k,!0):k}e.lastIndex=h.index+h[0].length}p("border",""),p("border","-width"),p("border","-color"),p("border","-style"),p("padding",""),p("margin",""),r("border","border-width","border-style","border-color"),g.border==="medium none"&&delete g.border}return g},serialize:function(a,c){function g(c){var e,f,g,i;e=b.styles[c];if(e)for(f=0,g=e.length;f<g;f++)c=e[f],i=a[c],i!==h&&i.length>0&&(d+=(d.length>0?" ":"")+c+": "+i+";")}var d="",e,f;if(c&&b&&b.styles)g("*"),g(c);else for(e in a)f=a[e],f!==h&&f.length>0&&(d+=(d.length>0?" ":"")+e+": "+f+";");return d}}},function(a){function l(a,b){return a.split(b||",")}function m(a,b){function e(b){return b.replace(/[A-Z]+/g,function(b){return e(a[b])})}var c,d={};for(c in a)a.hasOwnProperty(c)&&(a[c]=e(a[c]));return e(b).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(a,b,c,e){c=l(c,"|"),d[b]={attributes:j(c),attributesOrder:c,children:j(e,"|",{"#comment":{}})}}),d}var b={},c,d,e,f,g={},h,i,j=a.makeMap,k=a.each;d="h1,h2,h3,h4,h5,h6,hr,p,div,address,pre,form,table,tbody,thead,tfoot,th,tr,td,li,ol,ul,caption,blockquote,center,dl,dt,dd,dir,fieldset,noscript,menu,isindex,samp,header,footer,article,section,hgroup",d=j(d,",",j(d.toUpperCase())),b=m({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]"),c=j("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected,autoplay,loop,controls"),e=j("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,source"),f=a.extend(j("td,th,iframe,video,audio,object"),e),h=j("pre,script,style,textarea"),i=j("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),a.html.Schema=function(m){function t(a){return new RegExp("^"+a.replace(/([?+*])/g,".$1")+"$")}function u(b){var c,d,e,f,g,h,i,k,m,n,p,r,s,u,v,w,x,y,z,A,B,C,D=/^([#+-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,E=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,F=/[*?+]/;if(b){b=l(b),o["@"]&&(x=o["@"].attributes,y=o["@"].attributesOrder);for(c=0,d=b.length;c<d;c++){h=D.exec(b[c]);if(h){v=h[1],n=h[2],w=h[3],m=h[4],s={},u=[],i={attributes:s,attributesOrder:u},v==="#"&&(i.paddEmpty=!0),v==="-"&&(i.removeEmpty=!0);if(x){for(A in x)s[A]=x[A];u.push.apply(u,y)}if(m){m=l(m,"|");for(e=0,f=m.length;e<f;e++){h=E.exec(m[e]);if(h){k={},r=h[1],p=h[2].replace(/::/g,":"),v=h[3],C=h[4],r==="!"&&(i.attributesRequired=i.attributesRequired||[],i.attributesRequired.push(p),k.required=!0);if(r==="-"){delete s[p],u.splice(a.inArray(u,p),1);continue}v&&(v==="="&&(i.attributesDefault=i.attributesDefault||[],i.attributesDefault.push({name:p,value:C}),k.defaultValue=C),v===":"&&(i.attributesForced=i.attributesForced||[],i.attributesForced.push({name:p,value:C}),k.forcedValue=C),v==="<"&&(k.validValues=j(C,"?"))),F.test(p)?(i.attributePatterns=i.attributePatterns||[],k.pattern=t(p),i.attributePatterns.push(k)):(s[p]||u.push(p),s[p]=k)}}}!x&&n=="@"&&(x=s,y=u),w&&(i.outputName=n,o[w]=i),F.test(n)?(i.pattern=t(n),q.push(i)):o[n]=i}}}}function v(a){o={},q=[],u(a),k(b,function(a,b){p[b]=a.children})}function w(a){var b=/^(~)?(.+)$/;a&&k(l(a),function(a){var c=b.exec(a),e=c[1]==="~",f=e?"span":"div",h=c[2];p[h]=p[f],g[h]=f,e||(d[h]={}),k(p,function(a,b){a[f]&&(a[h]=a[f])})})}function x(a){var b=/^([+\-]?)(\w+)\[([^\]]+)\]$/;a&&k(l(a),function(a){var c=b.exec(a),d,e;c&&(e=c[1],e?d=p[c[2]]:d=p[c[2]]={"#comment":{}},d=p[c[2]],k(l(c[3],"|"),function(a){e==="-"?delete d[a]:d[a]={}}))})}function y(a){var b=o[a],c;if(b)return b;c=q.length;while(c--){b=q[c];if(b.pattern.test(a))return b}}var n=this,o={},p={},q=[],r,s;m=m||{},m.verify_html===!1&&(m.valid_elements="*[*]"),m.valid_styles&&(r={},k(m.valid_styles,function(b,c){r[c]=a.explode(b)})),s=m.whitespace_elements?j(m.whitespace_elements):h,m.valid_elements?v(m.valid_elements):(k(b,function(a,b){o[b]={attributes:a.attributes,attributesOrder:a.attributesOrder},p[b]=a.children}),k(l("strong/b,em/i"),function(a){a=l(a,"/"),o[a[1]].outputName=a[0]}),o.img.attributesDefault=[{name:"alt",value:""}],k(l("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr"),function(a){o[a].removeEmpty=!0}),k(l("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(a){o[a].paddEmpty=!0})),w(m.custom_elements),x(m.valid_children),u(m.extended_valid_elements),x("+ol[ul|ol],+ul[ul|ol]"),y("span")||u("span[!data-mce-type|*]"),m.invalid_elements&&a.each(a.explode(m.invalid_elements),function(a){o[a]&&delete o[a]}),n.children=p,n.styles=r,n.getBoolAttrs=function(){return c},n.getBlockElements=function(){return d},n.getShortEndedElements=function(){return e},n.getSelfClosingElements=function(){return i},n.getNonEmptyElements=function(){return f},n.getWhiteSpaceElements=function(){return s},n.isValidChild=function(a,b){var c=p[a];return!!c&&!!c[b]},n.getElementRule=y,n.getCustomElements=function(){return g},n.addValidElements=u,n.setValidElements=v,n.addCustomElements=w,n.addValidChildren=x},a.html.Schema.boolAttrMap=c,a.html.Schema.blockElementsMap=d}(tinymce),function(a){a.html.SaxParser=function(b,c){var d=this,e=function(){};b=b||{},d.schema=c=c||new a.html.Schema,b.fix_self_closing!==!1&&(b.fix_self_closing=!0),a.each("comment cdata text start end pi doctype".split(" "),function(a){a&&(d[a]=b[a]||e)}),d.parse=function(d){function N(a){var b,c;b=j.length;while(b--)if(j[b].name===a)break;if(b>=0){for(c=j.length-1;c>=b;c--)a=j[c],a.valid&&e.end(a.name);j.length=b}}var e=this,f,g=0,h,i,j=[],k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J=0,K=a.html.Entities.decode,L,M;F=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([^\\s\\/<>]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/)>))","g"),G=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g,H={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi},q=c.getShortEndedElements(),E=c.getSelfClosingElements(),r=c.getBoolAttrs(),t=b.validate,p=b.remove_internals,L=b.fix_self_closing,M=a.isIE,y=/^:/;while(f=F.exec(d)){g<f.index&&e.text(K(d.substr(g,f.index-g)));if(h=f[6])h=h.toLowerCase(),M&&y.test(h)&&(h=h.substr(1)),N(h);else if(h=f[7]){h=h.toLowerCase(),M&&y.test(h)&&(h=h.substr(1)),s=h in q,L&&E[h]&&j.length>0&&j[j.length-1].name===h&&N(h);if(!t||(u=c.getElementRule(h))){v=!0,t&&(z=u.attributes,A=u.attributePatterns),(x=f[8])?(o=x.indexOf("data-mce-type")!==-1,o&&p&&(v=!1),k=[],k.map={},x.replace(G,function(a,b,c,d,e){var f,g;b=b.toLowerCase(),c=b in r?b:K(c||d||e||"");if(t&&!o&&b.indexOf("data-")!==0){f=z[b];if(!f&&A){g=A.length;while(g--){f=A[g];if(f.pattern.test(b))break}g===-1&&(f=null)}if(!f)return;if(f.validValues&&!(c in f.validValues))return}k.map[b]=c,k.push({name:b,value:c})})):(k=[],k.map={});if(t&&!o){B=u.attributesRequired,C=u.attributesDefault,D=u.attributesForced;if(D){l=D.length;while(l--)w=D[l],n=w.name,I=w.value,I==="{$uid}"&&(I="mce_"+J++),k.map[n]=I,k.push({name:n,value:I})}if(C){l=C.length;while(l--)w=C[l],n=w.name,n in k.map||(I=w.value,I==="{$uid}"&&(I="mce_"+J++),k.map[n]=I,k.push({name:n,value:I}))}if(B){l=B.length;while(l--)if(B[l]in k.map)break;l===-1&&(v=!1)}k.map["data-mce-bogus"]&&(v=!1)}v&&e.start(h,k,s)}else v=!1;if(i=H[h]){i.lastIndex=g=f.index+f[0].length,(f=i.exec(d))?(v&&(m=d.substr(g,f.index-g)),g=f.index+f[0].length):(m=d.substr(g),g=d.length),v&&m.length>0&&e.text(m,!0),v&&e.end(h),F.lastIndex=g;continue}s||(!x||x.indexOf("/")!=x.length-1?j.push({name:h,valid:v}):v&&e.end(h))}else(h=f[1])?e.comment(h):(h=f[2])?e.cdata(h):(h=f[3])?e.doctype(h):(h=f[4])&&e.pi(h,f[5]);g=f.index+f[0].length}g<d.length&&e.text(K(d.substr(g)));for(l=j.length-1;l>=0;l--)h=j[l],h.valid&&e.end(h.name)}}}(tinymce),function(a){function d(a,b,c){var d,e,f=c?"lastChild":"firstChild",g=c?"prev":"next";if(a[f])return a[f];if(a!==b){d=a[g];if(d)return d;for(e=a.parent;e&&e!==b;e=e.parent){d=e[g];if(d)return d}}}function e(a,b){this.name=a,this.type=b,b===1&&(this.attributes=[],this.attributes.map={})}var b=/^[ \t\r\n]*$/,c={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};a.extend(e.prototype,{replace:function(a){var b=this;return a.parent&&a.remove(),b.insert(a,b),b.remove(),b},attr:function(a,b){var c=this,d,e,f;if(typeof a!="string"){for(e in a)c.attr(e,a[e]);return c}if(d=c.attributes){if(b!==f){if(b===null){if(a in d.map){delete d.map[a],e=d.length;while(e--)if(d[e].name===a)return d=d.splice(e,1),c}return c}if(a in d.map){e=d.length;while(e--)if(d[e].name===a){d[e].value=b;break}}else d.push({name:a,value:b});return d.map[a]=b,c}return d.map[a]}},clone:function(){var a=this,b=new e(a.name,a.type),c,d,f,g,h;if(f=a.attributes){h=[],h.map={};for(c=0,d=f.length;c<d;c++)g=f[c],g.name!=="id"&&(h[h.length]={name:g.name,value:g.value},h.map[g.name]=g.value);b.attributes=h}return b.value=a.value,b.shortEnded=a.shortEnded,b},wrap:function(a){var b=this;return b.parent.insert(a,b),a.append(b),b},unwrap:function(){var a=this,b,c;for(b=a.firstChild;b;)c=b.next,a.insert(b,a,!0),b=c;a.remove()},remove:function(){var a=this,b=a.parent,c=a.next,d=a.prev;return b&&(b.firstChild===a?(b.firstChild=c,c&&(c.prev=null)):d.next=c,b.lastChild===a?(b.lastChild=d,d&&(d.next=null)):c.prev=d,a.parent=a.next=a.prev=null),a},append:function(a){var b=this,c;return a.parent&&a.remove(),c=b.lastChild,c?(c.next=a,a.prev=c,b.lastChild=a):b.lastChild=b.firstChild=a,a.parent=b,a},insert:function(a,b,c){var d;return a.parent&&a.remove(),d=b.parent||this,c?(b===d.firstChild?d.firstChild=a:b.prev.next=a,a.prev=b.prev,a.next=b,b.prev=a):(b===d.lastChild?d.lastChild=a:b.next.prev=a,a.next=b.next,a.prev=b,b.next=a),a.parent=d,a},getAll:function(a){var b=this,c,e=[];for(c=b.firstChild;c;c=d(c,b))c.name===a&&e.push(c);return e},empty:function(){var a=this,b,c,e;if(a.firstChild){b=[];for(e=a.firstChild;e;e=d(e,a))b.push(e);c=b.length;while(c--)e=b[c],e.parent=e.firstChild=e.lastChild=e.next=e.prev=null}return a.firstChild=a.lastChild=null,a},isEmpty:function(a){var c=this,e=c.firstChild,f,g;if(e)do{if(e.type===1){if(e.attributes.map["data-mce-bogus"])continue;if(a[e.name])return!1;f=e.attributes.length;while(f--){g=e.attributes[f].name;if(g==="name"||g.indexOf("data-")===0)return!1}}if(e.type===3&&!b.test(e.value))return!1}while(e=d(e,c));return!0},walk:function(a){return d(this,null,a)}}),a.extend(e,{create:function(a,b){var d,f;d=new e(a,c[a]||1);if(b)for(f in b)d.attr(f,b[f]);return d}}),a.html.Node=e}(tinymce),function(a){var b=a.html.Node;a.html.DomParser=function(c,d){function j(c){var f,g,h,i,j,k,l,m,n,o,p,q,r,s;q=a.makeMap("tr,td,th,tbody,thead,tfoot,table"),p=d.getNonEmptyElements();for(f=0;f<c.length;f++){g=c[f];if(!g.parent)continue;i=[g];for(h=g.parent;h&&!d.isValidChild(h.name,g.name)&&!q[h.name];h=h.parent)i.push(h);if(h&&i.length>1){i.reverse(),j=k=e.filterNode(i[0].clone());for(n=0;n<i.length-1;n++){d.isValidChild(k.name,i[n].name)?(l=e.filterNode(i[n].clone()),k.append(l)):l=k;for(m=i[n].firstChild;m&&m!=i[n+1];)s=m.next,l.append(m),m=s;k=l}j.isEmpty(p)?h.insert(g,i[0],!0):(h.insert(j,i[0],!0),h.insert(g,j)),h=i[0],(h.isEmpty(p)||h.firstChild===h.lastChild&&h.firstChild.name==="br")&&h.empty().remove()}else if(g.parent){if(g.name==="li"){r=g.prev;if(!r||r.name!=="ul"&&r.name!=="ul"){r=g.next;if(!r||r.name!=="ul"&&r.name!=="ul"){g.wrap(e.filterNode(new b("ul",1)));continue}r.insert(g,r.firstChild,!0);continue}r.append(g);continue}d.isValidChild(g.parent.name,"div")&&d.isValidChild("div",g.name)?g.wrap(e.filterNode(new b("div",1))):g.name==="style"||g.name==="script"?g.empty().remove():g.unwrap()}}}var e=this,f={},g=[],h={},i={};c=c||{},c.validate="validate"in c?c.validate:!0,c.root_name=c.root_name||"body",e.schema=d=d||new a.html.Schema,e.filterNode=function(a){var b,c,d;c in f&&(d=h[c],d?d.push(a):h[c]=[a]),b=g.length;while(b--)c=g[b].name,c in a.attributes.map&&(d=i[c],d?d.push(a):i[c]=[a]);return a},e.addNodeFilter=function(b,c){a.each(a.explode(b),function(a){var b=f[a];b||(f[a]=b=[]),b.push(c)})},e.addAttributeFilter=function(b,c){a.each(a.explode(b),function(a){var b;for(b=0;b<g.length;b++)if(g[b].name===a){g[b].callbacks.push(c);return}g.push({name:a,callbacks:[c]})})},e.parse=function(e,k){function F(){var a=m.firstChild,b,c;while(a)b=a.next,a.type==3||a.type==1&&a.name!=="p"&&!w[a.name]&&!a.attr("data-mce-type")?c?c.append(a):(c=G(E,1),m.insert(c,a),c.append(a)):c=null,a=b}function G(a,c){var d=new b(a,c),e;return a in f&&(e=h[a],e?e.push(d):h[a]=[d]),d}function H(a){var b,c,d;for(b=a.prev;b&&b.type===3;)c=b.value.replace(z,""),c.length>0?(b.value=c,b=b.prev):(d=b.prev,b.remove(),b=d)}var l,m,n,o,p,q,r,s,t,u,v,w,x,y=[],z,A,B,C,D,E;k=k||{},h={},i={},w=a.extend(a.makeMap("script,style,head,html,body,title,meta,param"),d.getBlockElements()),D=d.getNonEmptyElements(),C=d.children,v=c.validate,E="forced_root_block"in k?k.forced_root_block:c.forced_root_block,B=d.getWhiteSpaceElements(),x=/^[ \t\r\n]+/,z=/[ \t\r\n]+$/,A=/[ \t\r\n]+/g,l=new a.html.SaxParser({validate:v,fix_self_closing:!v,cdata:function(a){n.append(G("#cdata",4)).value=a},text:function(a,b){var c;B[n.name]||(a=a.replace(A," "),n.lastChild&&w[n.lastChild.name]&&(a=a.replace(x,""))),a.length!==0&&(c=G("#text",3),c.raw=!!b,n.append(c).value=a)},comment:function(a){n.append(G("#comment",8)).value=a},pi:function(a,b){n.append(G(a,7)).value=b,H(n)},doctype:function(a){var b;b=n.append(G("#doctype",10)),b.value=a,H(n)},start:function(a,b,c){var e,f,h,j,k,l,m,o;h=v?d.getElementRule(a):{};if(h){e=G(h.outputName||a,1),e.attributes=b,e.shortEnded=c,n.append(e),o=C[n.name],o&&C[e.name]&&!o[e.name]&&y.push(e),f=g.length;while(f--)k=g[f].name,k in b.map&&(t=i[k],t?t.push(e):i[k]=[e]);w[a]&&H(e),c||(n=e)}},end:function(a){var c,e,f,g,h;e=v?d.getElementRule(a):{};if(e){if(w[a]){if(!B[n.name]){for(c=n.firstChild;c&&c.type===3;)f=c.value.replace(x,""),f.length>0?(c.value=f,c=c.next):(g=c.next,c.remove(),c=g);for(c=n.lastChild;c&&c.type===3;)f=c.value.replace(z,""),f.length>0?(c.value=f,c=c.prev):(g=c.prev,c.remove(),c=g)}c=n.prev,c&&c.type===3&&(f=c.value.replace(x,""),f.length>0?c.value=f:c.remove())}if(e.removeEmpty||e.paddEmpty)if(n.isEmpty(D))if(e.paddEmpty)n.empty().append(new b("#text","3")).value=" ";else if(!n.attributes.map.name){h=n.parent,n.empty().remove(),n=h;return}n=n.parent}}},d),m=n=new b(k.context||c.root_name,11),l.parse(e),v&&y.length&&(k.context?k.invalid=!0:j(y)),E&&m.name=="body"&&F();if(!k.invalid){for(u in h){t=f[u],o=h[u],r=o.length;while(r--)o[r].parent||o.splice(r,1);for(p=0,q=t.length;p<q;p++)t[p](o,u,k)}for(p=0,q=g.length;p<q;p++){t=g[p];if(t.name in i){o=i[t.name],r=o.length;while(r--)o[r].parent||o.splice(r,1);for(r=0,s=t.callbacks.length;r<s;r++)t.callbacks[r](o,t.name,k)}}}return m},c.remove_trailing_brs&&e.addNodeFilter("br",function(b,c){var e,f=b.length,g,h=d.getBlockElements(),i=d.getNonEmptyElements(),j,k,l;h.body=1;for(e=0;e<f;e++){g=b[e],j=g.parent;if(h[g.parent.name]&&g===j.lastChild){k=g.prev;while(k){l=k.name;if(l!=="span"||k.attr("data-mce-type")!=="bookmark"){if(l!=="br")break;if(l==="br"){g=null;break}}k=k.prev}g&&(g.remove(),j.isEmpty(i)&&(elementRule=d.getElementRule(j.name),elementRule&&(elementRule.removeEmpty?j.remove():elementRule.paddEmpty&&(j.empty().append(new a.html.Node("#text",3)).value=" "))))}}})}}(tinymce),tinymce.html.Writer=function(a){var b=[],c,d,e,f,g;return a=a||{},c=a.indent,d=tinymce.makeMap(a.indent_before||""),e=tinymce.makeMap(a.indent_after||""),f=tinymce.html.Entities.getEncodeFunc(a.entity_encoding||"raw",a.entities),g=a.element_format=="html",{start:function(a,h,i){var j,k,l,m;c&&d[a]&&b.length>0&&(m=b[b.length-1],m.length>0&&m!=="\n"&&b.push("\n")),b.push("<",a);if(h)for(j=0,k=h.length;j<k;j++)l=h[j],b.push(" ",l.name,'="',f(l.value,!0),'"');!i||g?b[b.length]=">":b[b.length]=" />",i&&c&&e[a]&&b.length>0&&(m=b[b.length-1],m.length>0&&m!=="\n"&&b.push("\n"))},end:function(a){var d;b.push("</",a,">"),c&&e[a]&&b.length>0&&(d=b[b.length-1],d.length>0&&d!=="\n"&&b.push("\n"))},text:function(a,c){a.length>0&&(b[b.length]=c?a:f(a))},cdata:function(a){b.push("<![CDATA[",a,"]]>")},comment:function(a){b.push("<!--",a,"-->")},pi:function(a,d){d?b.push("<?",a," ",d,"?>"):b.push("<?",a,"?>"),c&&b.push("\n")},doctype:function(a){b.push("<!DOCTYPE",a,">",c?"\n":"")},reset:function(){b.length=0},getContent:function(){return b.join("").replace(/\n$/,"")}}},function(a){a.html.Serializer=function(b,c){var d=this,e=new a.html.Writer(b);b=b||{},b.validate="validate"in b?b.validate:!0,d.schema=c=c||new a.html.Schema,d.writer=e,d.serialize=function(a){function g(a){var b=d[a.type],h,i,j,k,l,m,n,o,p;if(!b){h=a.name,i=a.shortEnded,j=a.attributes;if(f&&j&&j.length>1){m=[],m.map={},p=c.getElementRule(a.name);for(n=0,o=p.attributesOrder.length;n<o;n++)k=p.attributesOrder[n],k in j.map&&(l=j.map[k],m.map[k]=l,m.push({name:k,value:l}));for(n=0,o=j.length;n<o;n++)k=j[n].name,k in m.map||(l=j.map[k],m.map[k]=l,m.push({name:k,value:l}));j=m}e.start(a.name,j,i);if(!i){if(a=a.firstChild)do g(a);while(a=a.next);e.end(h)}}else b(a)}var d,f;return f=b.validate,d={3:function(a,b){e.text(a.value,a.raw)},8:function(a){e.comment(a.value)},7:function(a){e.pi(a.name,a.value)},10:function(a){e.doctype(a.value)},4:function(a){e.cdata(a.value)},11:function(a){if(a=a.firstChild)do g(a);while(a=a.next)}},e.reset(),a.type==1&&!b.inner?g(a):d[11](a),e.getContent()}}}(tinymce),function(a){var b=a.each,c=a.is,d=a.isWebKit,e=a.isIE,f=a.html.Entities,g=/^([a-z0-9],?)+$/i,h=a.html.Schema.blockElementsMap,i=/^[ \t\r\n]*$/;a.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(b,c){var d=this,f,g;d.doc=b,d.win=window,d.files={},d.cssFlicker=!1,d.counter=0,d.stdMode=!a.isIE||b.documentMode>=8,d.boxModel=!a.isIE||b.compatMode=="CSS1Compat"||d.stdMode,d.hasOuterHTML="outerHTML"in b.createElement("a"),d.settings=c=a.extend({keep_values:!1,hex_colors:1},c),d.schema=c.schema,d.styles=new a.html.Styles({url_converter:c.url_converter,url_converter_scope:c.url_converter_scope},c.schema);if(a.isIE6)try{b.execCommand("BackgroundImageCache",!1,!0)}catch(h){d.cssFlicker=!0}if(e&&c.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(a){b.createElement(a)});for(g in c.schema.getCustomElements())b.createElement(g)}a.addUnload(d.destroy,d)},getRoot:function(){var a=this,b=a.settings;return b&&a.get(b.root_element)||a.doc.body},getViewPort:function(a){var b,c;return a=a?a:this.win,b=a.document,c=this.boxModel?b.documentElement:b.body,{x:a.pageXOffset||c.scrollLeft,y:a.pageYOffset||c.scrollTop,w:a.innerWidth||c.clientWidth,h:a.innerHeight||c.clientHeight}},getRect:function(a){var b,c=this,d;return a=c.get(a),b=c.getPos(a),d=c.getSize(a),{x:b.x,y:b.y,w:d.w,h:d.h}},getSize:function(a){var b=this,c,d;return a=b.get(a),c=b.getStyle(a,"width"),d=b.getStyle(a,"height"),c.indexOf("px")===-1&&(c=0),d.indexOf("px")===-1&&(d=0),{w:parseInt(c)||a.offsetWidth||a.clientWidth,h:parseInt(d)||a.offsetHeight||a.clientHeight}},getParent:function(a,b,c){return this.getParents(a,b,c,!1)},getParents:function(a,b,d,e){var f=this,g,h=f.settings,i=[];a=f.get(a),e=e===undefined,h.strict_root&&(d=d||f.getRoot()),c(b,"string")&&(g=b,b==="*"?b=function(a){return a.nodeType==1}:b=function(a){return f.is(a,g)});while(a){if(a==d||!a.nodeType||a.nodeType===9)break;if(!b||b(a)){if(!e)return a;i.push(a)}a=a.parentNode}return e?i:null},get:function(a){var b;if(a&&this.doc&&typeof a=="string"){b=a,a=this.doc.getElementById(a);if(a&&a.id!==b)return this.doc.getElementsByName(b)[1]}return a},getNext:function(a,b){return this._findSib(a,b,"nextSibling")},getPrev:function(a,b){return this._findSib(a,b,"previousSibling")},select:function(b,c){var d=this;return a.dom.Sizzle(b,d.get(c)||d.get(d.settings.root_element)||d.doc,[])},is:function(b,c){var d;if(b.length===undefined){if(c==="*")return b.nodeType==1;if(g.test(c)){c=c.toLowerCase().split(/,/),b=b.nodeName.toLowerCase();for(d=c.length-1;d>=0;d--)if(c[d]==b)return!0;return!1}}return a.dom.Sizzle.matches(c,b.nodeType?[b]:b).length>0},add:function(a,b,d,e,f){var g=this;return this.run(a,function(a){var h,i;return h=c(b,"string")?g.doc.createElement(b):b,g.setAttribs(h,d),e&&(e.nodeType?h.appendChild(e):g.setHTML(h,e)),f?h:a.appendChild(h)})},create:function(a,b,c){return this.add(this.doc.createElement(a),a,b,c,1)},createHTML:function(a,b,c){var d="",e=this,f;d+="<"+a;for(f in b)b.hasOwnProperty(f)&&(d+=" "+f+'="'+e.encode(b[f])+'"');return typeof c!="undefined"?d+">"+c+"</"+a+">":d+" />"},remove:function(b,c){return this.run(b,function(b){var d,e=b.parentNode;if(!e)return null;if(c)while(d=b.firstChild)!a.isIE||d.nodeType!==3||d.nodeValue?e.insertBefore(d,b):b.removeChild(d);return e.removeChild(b)})},setStyle:function(b,c,d){var f=this;return f.run(b,function(g){var h,i;h=g.style,c=c.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}),f.pixelStyles.test(c)&&(a.is(d,"number")||/^[\-0-9\.]+$/.test(d))&&(d+="px");switch(c){case"opacity":if(e){h.filter=d===""?"":"alpha(opacity="+d*100+")";if(!b.currentStyle||!b.currentStyle.hasLayout)h.display="inline-block"}h[c]=h["-moz-opacity"]=h["-khtml-opacity"]=d||"";break;case"float":e?h.styleFloat=d:h.cssFloat=d;break;default:h[c]=d||""}f.settings.update_styles&&f.setAttrib(g,"data-mce-style")})},getStyle:function(a,b,c){a=this.get(a);if(!a)return;if(this.doc.defaultView&&c){b=b.replace(/[A-Z]/g,function(a){return"-"+a});try{return this.doc.defaultView.getComputedStyle(a,null).getPropertyValue(b)}catch(d){return null}}return b=b.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}),b=="float"&&(b=e?"styleFloat":"cssFloat"),a.currentStyle&&c?a.currentStyle[b]:a.style?a.style[b]:undefined},setStyles:function(a,c){var d=this,e=d.settings,f;f=e.update_styles,e.update_styles=0,b(c,function(b,c){d.setStyle(a,c,b)}),e.update_styles=f,e.update_styles&&d.setAttrib(a,e.cssText)},removeAllAttribs:function(a){return this.run(a,function(a){var b,c=a.attributes;for(b=c.length-1;b>=0;b--)a.removeAttributeNode(c.item(b))})},setAttrib:function(a,d,e){var f=this;if(!a||!d)return;return f.settings.strict&&(d=d.toLowerCase()),this.run(a,function(a){var g=f.settings;if(e!==null)switch(d){case"style":if(!c(e,"string")){b(e,function(b,c){f.setStyle(a,c,b)});return}g.keep_values&&(e&&!f._isRes(e)?a.setAttribute("data-mce-style",e,2):a.removeAttribute("data-mce-style",2)),a.style.cssText=e;break;case"class":a.className=e||"";break;case"src":case"href":g.keep_values&&(g.url_converter&&(e=g.url_converter.call(g.url_converter_scope||f,e,d,a)),f.setAttrib(a,"data-mce-"+d,e,2));break;case"shape":a.setAttribute("data-mce-style",e)}c(e)&&e!==null&&e.length!==0?a.setAttribute(d,""+e,2):a.removeAttribute(d,2)})},setAttribs:function(a,c){var d=this;return this.run(a,function(a){b(c,function(b,c){d.setAttrib(a,c,b)})})},getAttrib:function(b,f,g){var h,i=this,j;b=i.get(b);if(!b||b.nodeType!==1)return g===j?!1:g;c(g)||(g="");if(/^(src|href|style|coords|shape)$/.test(f)){h=b.getAttribute("data-mce-"+f);if(h)return h}e&&i.props[f]&&(h=b[i.props[f]],h=h&&h.nodeValue?h.nodeValue:h),h||(h=b.getAttribute(f,2));if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(f))return b[i.props[f]]===!0&&h===""?f:h?f:"";if(b.nodeName==="FORM"&&b.getAttributeNode(f))return b.getAttributeNode(f).nodeValue;f==="style"&&(h=h||b.style.cssText,h&&(h=i.serializeStyle(i.parseStyle(h),b.nodeName),i.settings.keep_values&&!i._isRes(h)&&b.setAttribute("data-mce-style",h))),d&&f==="class"&&h&&(h=h.replace(/(apple|webkit)\-[a-z\-]+/gi,""));if(e)switch(f){case"rowspan":case"colspan":h===1&&(h="");break;case"size":if(h==="+0"||h===20||h===0)h="";break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":h===0&&(h="");break;case"hspace":h===-1&&(h="");break;case"maxlength":case"tabindex":if(h===32768||h===2147483647||h==="32768")h="";break;case"multiple":case"compact":case"noshade":case"nowrap":if(h===65535)return f;return g;case"shape":h=h.toLowerCase();break;default:f.indexOf("on")===0&&h&&(h=a._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+h))}return h!==j&&h!==null&&h!==""?""+h:g},getPos:function(a,b){var c=this,d=0,e=0,f,g=c.doc,h;a=c.get(a),b=b||g.body;if(a){if(a.getBoundingClientRect)return a=a.getBoundingClientRect(),f=c.boxModel?g.documentElement:g.body,d=a.left+(g.documentElement.scrollLeft||g.body.scrollLeft)-f.clientTop,e=a.top+(g.documentElement.scrollTop||g.body.scrollTop)-f.clientLeft,{x:d,y:e};h=a;while(h&&h!=b&&h.nodeType)d+=h.offsetLeft||0,e+=h.offsetTop||0,h=h.offsetParent;h=a.parentNode;while(h&&h!=b&&h.nodeType)d-=h.scrollLeft||0,e-=h.scrollTop||0,h=h.parentNode}return{x:d,y:e}},parseStyle:function(a){return this.styles.parse(a)},serializeStyle:function(a,b){return this.styles.serialize(a,b)},loadCSS:function(c){var d=this,f=d.doc,g;c||(c=""),g=d.select("head")[0],b(c.split(","),function(b){var c;if(d.files[b])return;d.files[b]=!0,c=d.create("link",{rel:"stylesheet",href:a._addVer(b)}),e&&f.documentMode&&f.recalc&&(c.onload=function(){f.recalc&&f.recalc(),c.onload=null}),g.appendChild(c)})},addClass:function(a,b){return this.run(a,function(a){var c;return b?this.hasClass(a,b)?a.className:(c=this.removeClass(a,b),a.className=(c!=""?c+" ":"")+b):0})},removeClass:function(b,c){var d=this,e;return d.run(b,function(b){var f;return d.hasClass(b,c)?(e||(e=new RegExp("(^|\\s+)"+c+"(\\s+|$)","g")),f=b.className.replace(e," "),f=a.trim(f!=" "?f:""),b.className=f,f||(b.removeAttribute("class"),b.removeAttribute("className")),f):b.className})},hasClass:function(a,b){return a=this.get(a),!a||!b?!1:(" "+a.className+" ").indexOf(" "+b+" ")!==-1},show:function(a){return this.setStyle(a,"display","block")},hide:function(a){return this.setStyle(a,"display","none")},isHidden:function(a){return a=this.get(a),!a||a.style.display=="none"||this.getStyle(a,"display")=="none"},uniqueId:function(a){return(a?a:"mce_")+this.counter++},setHTML:function(a,c){var d=this;return d.run(a,function(a){if(e){while(a.firstChild)a.removeChild(a.firstChild);try{a.innerHTML="<br />"+c,a.removeChild(a.firstChild)}catch(f){a=d.create("div"),a.innerHTML="<br />"+c,b(a.childNodes,function(b,c){c&&a.appendChild(b)})}}else a.innerHTML=c;return c})},getOuterHTML:function(a){var b,
c=this;return a=c.get(a),a?a.nodeType===1&&c.hasOuterHTML?a.outerHTML:(b=(a.ownerDocument||c.doc).createElement("body"),b.appendChild(a.cloneNode(!0)),b.innerHTML):null},setOuterHTML:function(a,b,c){function f(a,b,c){var e,f;f=c.createElement("body"),f.innerHTML=b,e=f.lastChild;while(e)d.insertAfter(e.cloneNode(!0),a),e=e.previousSibling;d.remove(a)}var d=this;return this.run(a,function(a){a=d.get(a);if(a.nodeType==1){c=c||a.ownerDocument||d.doc;if(e)try{e&&a.nodeType==1?a.outerHTML=b:f(a,b,c)}catch(g){f(a,b,c)}else f(a,b,c)}})},decode:f.decode,encode:f.encodeAllRaw,insertAfter:function(a,b){return b=this.get(b),this.run(a,function(a){var c,d;return c=b.parentNode,d=b.nextSibling,d?c.insertBefore(a,d):c.appendChild(a),a})},isBlock:function(a){var b=a.nodeType;return b?b===1&&!!h[a.nodeName]:!!h[a]},replace:function(d,e,f){var g=this;return c(e,"array")&&(d=d.cloneNode(!0)),g.run(e,function(c){return f&&b(a.grep(c.childNodes),function(a){d.appendChild(a)}),c.parentNode.replaceChild(d,c)})},rename:function(a,c){var d=this,e;return a.nodeName!=c.toUpperCase()&&(e=d.create(c),b(d.getAttribs(a),function(b){d.setAttrib(e,b.nodeName,d.getAttrib(a,b.nodeName))}),d.replace(e,a,1)),e||a},findCommonAncestor:function(a,b){var c=a,d;while(c){d=b;while(d&&c!=d)d=d.parentNode;if(c==d)break;c=c.parentNode}return!c&&a.ownerDocument?a.ownerDocument.documentElement:c},toHex:function(a){function c(a){return a=parseInt(a).toString(16),a.length>1?a:"0"+a}var b=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(a);return b?(a="#"+c(b[1])+c(b[2])+c(b[3]),a):a},getClasses:function(){function i(c){b(c.imports,function(a){i(a)}),b(c.cssRules||c.rules,function(c){switch(c.type||1){case 1:c.selectorText&&b(c.selectorText.split(","),function(b){b=b.replace(/^\s*|\s*$|^\s\./g,"");if(/\.mce/.test(b)||!/\.[\w\-]+$/.test(b))return;h=b,b=a._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",b);if(g&&!(b=g(b,h)))return;f[b]||(d.push({"class":b}),f[b]=1)});break;case 3:i(c.styleSheet)}})}var c=this,d=[],e,f={},g=c.settings.class_filter,h;if(c.classes)return c.classes;try{b(c.doc.styleSheets,i)}catch(j){}return d.length>0&&(c.classes=d),d},run:function(a,c,d){var e=this,f;return e.doc&&typeof a=="string"&&(a=e.get(a)),a?(d=d||this,!a.nodeType&&(a.length||a.length===0)?(f=[],b(a,function(a,b){a&&(typeof a=="string"&&(a=e.doc.getElementById(a)),f.push(c.call(d,a,b)))}),f):c.call(d,a)):!1},getAttribs:function(a){var b;return a=this.get(a),a?e?(b=[],a.nodeName=="OBJECT"?a.attributes:(a.nodeName==="OPTION"&&this.getAttrib(a,"selected")&&b.push({specified:1,nodeName:"selected"}),a.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(a){b.push({specified:1,nodeName:a})}),b)):a.attributes:[]},isEmpty:function(b,c){var d=this,e,f,g,h,j,k;b=b.firstChild;if(b){h=new a.dom.TreeWalker(b),c=c||d.schema?d.schema.getNonEmptyElements():null;do{g=b.nodeType;if(g===1){if(b.getAttribute("data-mce-bogus"))continue;j=b.nodeName.toLowerCase();if(c&&c[j]){k=b.parentNode;if(j==="br"&&d.isBlock(k)&&k.firstChild===b&&k.lastChild===b)continue;return!1}f=d.getAttribs(b),e=b.attributes.length;while(e--){j=b.attributes[e].nodeName;if(j==="name"||j==="data-mce-bookmark")return!1}}if(g===3&&!i.test(b.nodeValue))return!1}while(b=h.next())}return!0},destroy:function(b){var c=this;c.events&&c.events.destroy(),c.win=c.doc=c.root=c.events=null,b||a.removeUnload(c.destroy)},createRng:function(){var b=this.doc;return b.createRange?b.createRange():new a.dom.Range(this)},nodeIndex:function(a,b){var c=0,d,e,f;if(a)for(d=a.nodeType,a=a.previousSibling,e=a;a;a=a.previousSibling){f=a.nodeType;if(b&&f==3)if(f==d||!a.nodeValue.length)continue;c++,d=f}return c},split:function(b,c,d){function j(b){var c,d=b.childNodes,f=b.nodeType;if(f==1&&b.getAttribute("data-mce-type")=="bookmark")return;for(c=d.length-1;c>=0;c--)j(d[c]);if(f!=9){if(f==3&&b.nodeValue.length>0){if(!e.isBlock(b.parentNode)||a.trim(b.nodeValue).length>0)return}else if(f==1){d=b.childNodes,d.length==1&&d[0]&&d[0].nodeType==1&&d[0].getAttribute("data-mce-type")=="bookmark"&&b.parentNode.insertBefore(d[0],b);if(d.length||/^(br|hr|input|img)$/i.test(b.nodeName))return}e.remove(b)}return b}var e=this,f=e.createRng(),g,h,i;if(b&&c)return f.setStart(b.parentNode,e.nodeIndex(b)),f.setEnd(c.parentNode,e.nodeIndex(c)),g=f.extractContents(),f=e.createRng(),f.setStart(c.parentNode,e.nodeIndex(c)+1),f.setEnd(b.parentNode,e.nodeIndex(b)+1),h=f.extractContents(),i=b.parentNode,i.insertBefore(j(g),b),d?i.replaceChild(d,c):i.insertBefore(c,b),i.insertBefore(j(h),b),e.remove(b),d||c},bind:function(b,c,d,e){var f=this;return f.events||(f.events=new a.dom.EventUtils),f.events.add(b,c,d,e||this)},unbind:function(b,c,d){var e=this;return e.events||(e.events=new a.dom.EventUtils),e.events.remove(b,c,d)},_findSib:function(a,b,d){var e=this,f=b;if(a){c(f,"string")&&(f=function(a){return e.is(a,b)});for(a=a[d];a;a=a[d])if(f(a))return a}return null},_isRes:function(a){return/^(top|left|bottom|right|width|height)/i.test(a)||/;\s*(top|left|bottom|right|width|height)/i.test(a)}}),a.DOM=new a.dom.DOMUtils(document,{process_html:0})}(tinymce),function(a){function b(a){function p(a,b){I(h,a,b)}function q(a,b){I(i,a,b)}function r(a){p(a.parentNode,o(a))}function s(a){p(a.parentNode,o(a)+1)}function t(a){q(a.parentNode,o(a))}function u(a){q(a.parentNode,o(a)+1)}function v(a){a?(c[l]=c[k],c[m]=c[j]):(c[k]=c[l],c[j]=c[m]),c.collapsed=h}function w(a){r(a),u(a)}function x(a){p(a,0),q(a,a.nodeType===1?a.childNodes.length:a.nodeValue.length)}function y(a,b){var d=c[k],e=c[j],f=c[l],g=c[m],h=b.startContainer,i=b.startOffset,n=b.endContainer,o=b.endOffset;if(a===0)return H(d,e,h,i);if(a===1)return H(f,g,h,i);if(a===2)return H(f,g,n,o);if(a===3)return H(d,e,n,o)}function z(){J(g)}function A(){return J(e)}function B(){return J(f)}function C(b){var c=this[k],d=this[j],e,f;c.nodeType!==3&&c.nodeType!==4||!c.nodeValue?(c.childNodes.length>0&&(f=c.childNodes[d]),f?c.insertBefore(b,f):c.appendChild(b)):d?d>=c.nodeValue.length?a.insertAfter(b,c):(e=c.splitText(d),c.parentNode.insertBefore(b,e)):c.parentNode.insertBefore(b,c)}function D(a){var b=c.extractContents();c.insertNode(a),a.appendChild(b),c.selectNode(a)}function E(){return n(new b(a),{startContainer:c[k],startOffset:c[j],endContainer:c[l],endOffset:c[m],collapsed:c.collapsed,commonAncestorContainer:c.commonAncestorContainer})}function F(a,b){var c;if(a.nodeType==3)return a;if(b<0)return a;c=a.firstChild;while(c&&b>0)--b,c=c.nextSibling;return c?c:a}function G(){return c[k]==c[l]&&c[j]==c[m]}function H(b,c,d,e){var f,g,h,i,j,k;if(b==d)return c==e?0:c<e?-1:1;f=d;while(f&&f.parentNode!=b)f=f.parentNode;if(f){g=0,h=b.firstChild;while(h!=f&&g<c)g++,h=h.nextSibling;return c<=g?-1:1}f=b;while(f&&f.parentNode!=d)f=f.parentNode;if(f){g=0,h=d.firstChild;while(h!=f&&g<e)g++,h=h.nextSibling;return g<e?-1:1}i=a.findCommonAncestor(b,d),j=b;while(j&&j.parentNode!=i)j=j.parentNode;j||(j=i),k=d;while(k&&k.parentNode!=i)k=k.parentNode;k||(k=i);if(j==k)return 0;h=i.firstChild;while(h){if(h==j)return-1;if(h==k)return 1;h=h.nextSibling}}function I(b,d,e){var f,g;b?(c[k]=d,c[j]=e):(c[l]=d,c[m]=e),f=c[l];while(f.parentNode)f=f.parentNode;g=c[k];while(g.parentNode)g=g.parentNode;g==f?H(c[k],c[j],c[l],c[m])>0&&c.collapse(b):c.collapse(b),c.collapsed=G(),c.commonAncestorContainer=a.findCommonAncestor(c[k],c[l])}function J(a){var b,d=0,e=0,f,g,h,i,j,m;if(c[k]==c[l])return K(a);for(b=c[l],f=b.parentNode;f;b=f,f=f.parentNode){if(f==c[k])return L(b,a);++d}for(b=c[k],f=b.parentNode;f;b=f,f=f.parentNode){if(f==c[l])return M(b,a);++e}g=e-d,h=c[k];while(g>0)h=h.parentNode,g--;i=c[l];while(g<0)i=i.parentNode,g++;for(j=h.parentNode,m=i.parentNode;j!=m;j=j.parentNode,m=m.parentNode)h=j,i=m;return N(h,i,a)}function K(a){var b,e,i,l,n,o,p;a!=g&&(b=d.createDocumentFragment());if(c[j]==c[m])return b;if(c[k].nodeType==3){e=c[k].nodeValue,i=e.substring(c[j],c[m]),a!=f&&(c[k].deleteData(c[j],c[m]-c[j]),c.collapse(h));if(a==g)return;return b.appendChild(d.createTextNode(i)),b}l=F(c[k],c[j]),n=c[m]-c[j];while(n>0)o=l.nextSibling,p=R(l,a),b&&b.appendChild(p),--n,l=o;return a!=f&&c.collapse(h),b}function L(a,b){var e,h,k,l,m,n;b!=g&&(e=d.createDocumentFragment()),h=O(a,b),e&&e.appendChild(h),k=o(a),l=k-c[j];if(l<=0)return b!=f&&(c.setEndBefore(a),c.collapse(i)),e;h=a.previousSibling;while(l>0)m=h.previousSibling,n=R(h,b),e&&e.insertBefore(n,e.firstChild),--l,h=m;return b!=f&&(c.setEndBefore(a),c.collapse(i)),e}function M(a,b){var e,i,j,k,l,n;b!=g&&(e=d.createDocumentFragment()),j=P(a,b),e&&e.appendChild(j),i=o(a),++i,k=c[m]-i,j=a.nextSibling;while(k>0)l=j.nextSibling,n=R(j,b),e&&e.appendChild(n),--k,j=l;return b!=f&&(c.setStartAfter(a),c.collapse(h)),e}function N(a,b,e){var i,j,k,l,m,n,p,q;e!=g&&(j=d.createDocumentFragment()),i=P(a,e),j&&j.appendChild(i),k=a.parentNode,l=o(a),m=o(b),++l,n=m-l,p=a.nextSibling;while(n>0)q=p.nextSibling,i=R(p,e),j&&j.appendChild(i),p=q,--n;return i=O(b,e),j&&j.appendChild(i),e!=f&&(c.setStartAfter(a),c.collapse(h)),j}function O(a,b){var d=F(c[l],c[m]-1),e,f,j,k,n,o=d!=c[l];if(d==a)return Q(d,o,i,b);e=d.parentNode,f=Q(e,i,i,b);while(e){while(d)j=d.previousSibling,k=Q(d,o,i,b),b!=g&&f.insertBefore(k,f.firstChild),o=h,d=j;if(e==a)return f;d=e.previousSibling,e=e.parentNode,n=Q(e,i,i,b),b!=g&&n.appendChild(f),f=n}}function P(a,b){var d=F(c[k],c[j]),e=d!=c[k],f,l,m,n,o;if(d==a)return Q(d,e,h,b);f=d.parentNode,l=Q(f,i,h,b);while(f){while(d)m=d.nextSibling,n=Q(d,e,h,b),b!=g&&l.appendChild(n),e=h,d=m;if(f==a)return l;d=f.nextSibling,f=f.parentNode,o=Q(f,i,h,b),b!=g&&o.appendChild(l),l=o}}function Q(a,b,d,e){var h,k,l,n,o;if(b)return R(a,e);if(a.nodeType==3){h=a.nodeValue,d?(n=c[j],k=h.substring(n),l=h.substring(0,n)):(n=c[m],k=h.substring(0,n),l=h.substring(n)),e!=f&&(a.nodeValue=l);if(e==g)return;return o=a.cloneNode(i),o.nodeValue=k,o}if(e==g)return;return a.cloneNode(i)}function R(a,b){if(b!=g)return b==f?a.cloneNode(h):a;a.parentNode.removeChild(a)}var c=this,d=a.doc,e=0,f=1,g=2,h=!0,i=!1,j="startOffset",k="startContainer",l="endContainer",m="endOffset",n=tinymce.extend,o=a.nodeIndex;n(c,{startContainer:d,startOffset:0,endContainer:d,endOffset:0,collapsed:h,commonAncestorContainer:d,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:p,setEnd:q,setStartBefore:r,setStartAfter:s,setEndBefore:t,setEndAfter:u,collapse:v,selectNode:w,selectNodeContents:x,compareBoundaryPoints:y,deleteContents:z,extractContents:A,cloneContents:B,insertNode:C,surroundContents:D,cloneRange:E})}a.Range=b}(tinymce.dom),function(){function a(a){function f(b,c){var d,e=0,f,g,h,i,j,k,l=-1,m;d=b.duplicate(),d.collapse(c),m=d.parentElement();if(m.ownerDocument!==a.dom.doc)return;while(m.contentEditable==="false")m=m.parentNode;if(!m.hasChildNodes())return{node:m,inside:1};h=m.children,f=h.length-1;while(e<=f){k=Math.floor((e+f)/2),i=h[k],d.moveToElementText(i),l=d.compareEndPoints(c?"StartToStart":"EndToEnd",b);if(l>0)f=k-1;else{if(!(l<0))return{node:i};e=k+1}}if(l<0){i?d.collapse(!1):(d.moveToElementText(m),d.collapse(!0),i=m,g=!0),d.setEndPoint(c?"EndToStart":"EndToEnd",b);if(d.compareEndPoints(c?"StartToStart":"StartToEnd",b)>0){d=b.duplicate(),d.collapse(c),j=-1;while(m==d.parentElement()){if(d.move("character",-1)==0)break;j++}}j=j||d.text.replace("\r\n"," ").length}else d.collapse(!0),d.setEndPoint(c?"StartToStart":"StartToEnd",b),j=d.text.replace("\r\n"," ").length;return{node:i,position:l,offset:j,inside:g}}function g(){function m(a){var b=f(d,a),c,g,h=0,i,j,k;c=b.node,g=b.offset;if(b.inside&&!c.hasChildNodes()){e[a?"setStart":"setEnd"](c,0);return}if(g===j){e[a?"setStartBefore":"setEndAfter"](c);return}if(b.position<0){i=b.inside?c.firstChild:c.nextSibling;if(!i){e[a?"setStartAfter":"setEndAfter"](c);return}if(!g){i.nodeType==3?e[a?"setStart":"setEnd"](i,0):e[a?"setStartBefore":"setEndBefore"](i);return}while(i){k=i.nodeValue,h+=k.length;if(h>=g){c=i,h-=g,h=k.length-h;break}i=i.nextSibling}}else{i=c.previousSibling;if(!i)return e[a?"setStartBefore":"setEndBefore"](c);if(!g){c.nodeType==3?e[a?"setStart":"setEnd"](i,c.nodeValue.length):e[a?"setStartAfter":"setEndAfter"](i);return}while(i){h+=i.nodeValue.length;if(h>=g){c=i,h-=g;break}i=i.previousSibling}}e[a?"setStart":"setEnd"](c,h)}var d=a.getRng(),e=c.createRng(),g,h,i,j,k,l;g=d.item?d.item(0):d.parentElement();if(g.ownerDocument!=c.doc)return e;h=a.isCollapsed();if(d.item)return e.setStart(g.parentNode,c.nodeIndex(g)),e.setEnd(e.startContainer,e.startOffset+1),e;try{m(!0),h||m()}catch(n){if(n.number!=-2147024809)throw n;k=b.getBookmark(2),i=d.duplicate(),i.collapse(!0),g=i.parentElement(),h||(i=d.duplicate(),i.collapse(!1),j=i.parentElement(),j.innerHTML=j.innerHTML),g.innerHTML=g.innerHTML,b.moveToBookmark(k),d=a.getRng(),m(!0),h||m()}return e}var b=this,c=a.dom,d=!0,e=!1;this.getBookmark=function(b){function i(a){var a,b,d,e,f,g=[];b=a.parentNode,d=c.getRoot().parentNode;while(b!=d&&b.nodeType!==9){e=b.children,f=e.length;while(f--)if(a===e[f]){g.push(f);break}a=b,b=b.parentNode}return g}function j(a){var b;b=f(d,a);if(b)return{position:b.position,offset:b.offset,indexes:i(b.node),inside:b.inside}}var d=a.getRng(),e,g,h={};return b===2&&(d.item?h.start={ctrl:!0,indexes:i(d.item(0))}:(h.start=j(!0),a.isCollapsed()||(h.end=j()))),h},this.moveToBookmark=function(a){function e(a){var b,d,e,f;b=c.getRoot();for(d=a.length-1;d>=0;d--)f=b.children,e=a[d],e<=f.length-1&&(b=f[e]);return b}function f(c){var f=a[c?"start":"end"],g,h,i;f&&(g=f.position>0,h=d.createTextRange(),h.moveToElementText(e(f.indexes)),offset=f.offset,offset!==i?(h.collapse(f.inside||g),h.moveStart("character",g?-offset:offset)):h.collapse(c),b.setEndPoint(c?"StartToStart":"EndToStart",h),c&&b.collapse(!0))}var b,d=c.doc.body;a.start&&(a.start.ctrl?(b=d.createControlRange(),b.addElement(e(a.start.indexes)),b.select()):(b=d.createTextRange(),f(!0),f(),b.select()))},this.addRange=function(b){function m(a){var b,f,m,n,o;m=c.create("a"),b=a?g:i,f=a?h:j,n=e.duplicate();if(b==k||b==k.documentElement)b=l,f=0;b.nodeType==3?(b.parentNode.insertBefore(m,b),n.moveToElementText(m),n.moveStart("character",f),c.remove(m),e.setEndPoint(a?"StartToStart":"EndToEnd",n)):(o=b.childNodes,o.length?(f>=o.length?c.insertAfter(m,o[o.length-1]):b.insertBefore(m,o[f]),n.moveToElementText(m)):(m=k.createTextNode("﻿"),b.appendChild(m),n.moveToElementText(m.parentNode),n.collapse(d)),e.setEndPoint(a?"StartToStart":"EndToEnd",n),c.remove(m))}var e,f,g,h,i,j,k=a.dom.doc,l=k.body;g=b.startContainer,h=b.startOffset,i=b.endContainer,j=b.endOffset,e=l.createTextRange();if(g==i&&g.nodeType==1&&h==j-1&&h==j-1)try{f=l.createControlRange(),f.addElement(g.childNodes[h]),f.select();return}catch(n){}m(!0),m(),e.select()},this.getRangeAt=g}tinymce.dom.TridentSelection=a}(),function(){function n(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){i=i[a];var j=!1;while(i){if(i.sizcache===c){j=d[i.sizset];break}i.nodeType===1&&!f&&(i.sizcache=c,i.sizset=g);if(i.nodeName.toLowerCase()===b){j=i;break}i=i[a]}d[g]=j}}}function o(a,b,c,d,e,g){for(var h=0,i=d.length;h<i;h++){var j=d[h];if(j){j=j[a];var k=!1;while(j){if(j.sizcache===c){k=d[j.sizset];break}if(j.nodeType===1){g||(j.sizcache=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else if(f.filter(b,[j]).length>0){k=j;break}}j=j[a]}d[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,b=0,c=Object.prototype.toString,d=!1,e=!0;[0,0].sort(function(){return e=!1,0});var f=function(b,d,e,i){e=e||[],d=d||document;var j=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return e;var l=[],m,n,o,q,r=!0,s=f.isXML(d),t=b,u,v,w,x;do{a.exec(""),m=a.exec(t);if(m){t=m[3],l.push(m[1]);if(m[2]){q=m[3];break}}}while(m);if(l.length>1&&h.exec(b))if(l.length===2&&g.relative[l[0]])n=p(l[0]+l[1],d);else{n=g.relative[l[0]]?[d]:f(l.shift(),d);while(l.length)b=l.shift(),g.relative[b]&&(b+=l.shift()),n=p(b,n)}else{!i&&l.length>1&&d.nodeType===9&&!s&&g.match.ID.test(l[0])&&!g.match.ID.test(l[l.length-1])&&(u=f.find(l.shift(),d,s),d=u.expr?f.filter(u.expr,u.set)[0]:u.set[0]);if(d){u=i?{expr:l.pop(),set:k(i)}:f.find(l.pop(),l.length!==1||l[0]!=="~"&&l[0]!=="+"||!d.parentNode?d:d.parentNode,s),n=u.expr?f.filter(u.expr,u.set):u.set,l.length>0?o=k(n):r=!1;while(l.length)v=l.pop(),w=v,g.relative[v]?w=l.pop():v="",w==null&&(w=d),g.relative[v](o,w,s)}else o=l=[]}o||(o=n),o||f.error(v||b);if(c.call(o)==="[object Array]")if(!r)e.push.apply(e,o);else if(d&&d.nodeType===1)for(x=0;o[x]!=null;x++)o[x]&&(o[x]===!0||o[x].nodeType===1&&f.contains(d,o[x]))&&e.push(n[x]);else for(x=0;o[x]!=null;x++)o[x]&&o[x].nodeType===1&&e.push(n[x]);else k(o,e);return q&&(f(q,j,e,i),f.uniqueSort(e)),e};f.uniqueSort=function(a){if(m){d=e,a.sort(m);if(d)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},f.matches=function(a,b){return f(a,null,null,b)},f.find=function(a,b,c){var d;if(!a)return[];for(var e=0,f=g.order.length;e<f;e++){var h=g.order[e],i;if(i=g.leftMatch[h].exec(a)){var j=i[1];i.splice(1,1);if(j.substr(j.length-1)!=="\\"){i[1]=(i[1]||"").replace(/\\/g,""),d=g.find[h](i,b,c);if(d!=null){a=a.replace(g.match[h],"");break}}}}return d||(d=b.getElementsByTagName("*")),{set:d,expr:a}},f.filter=function(a,b,c,d){var e=a,h=[],i=b,j,k,l=b&&b[0]&&f.isXML(b[0]);while(a&&b.length){for(var m in g.filter)if((j=g.leftMatch[m].exec(a))!=null&&j[2]){var n=g.filter[m],o,p,q=j[1];k=!1,j.splice(1,1);if(q.substr(q.length-1)==="\\")continue;i===h&&(h=[]);if(g.preFilter[m]){j=g.preFilter[m](j,i,c,h,d,l);if(!j)k=o=!0;else if(j===!0)continue}if(j)for(var r=0;(p=i[r])!=null;r++)if(p){o=n(p,j,r,i);var s=d^!!o;c&&o!=null?s?k=!0:i[r]=!1:s&&(h.push(p),k=!0)}if(o!==undefined){c||(i=h),a=a.replace(g.match[m],"");if(!k)return[];break}}if(a===e){if(k!=null)break;f.error(a)}e=a}return i},f.error=function(a){throw"Syntax error, unrecognized expression: "+a};var g=f.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!/\W/.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var g=0,h=a.length,i;g<h;g++)if(i=a[g]){while((i=i.previousSibling)&&i.nodeType!==1);a[g]=e||i&&i.nodeName.toLowerCase()===b?i||!1:i===b}e&&f.filter(b,a,!0)},">":function(a,b){var c=typeof b=="string",d,e=0,g=a.length;if(c&&!/\W/.test(b)){b=b.toLowerCase();for(;e<g;e++){d=a[e];if(d){var h=d.parentNode;a[e]=h.nodeName.toLowerCase()===b?h:!1}}}else{for(;e<g;e++)d=a[e],d&&(a[e]=c?d.parentNode:d.parentNode===b);c&&f.filter(b,a,!0)}},"":function(a,c,d){var e=b++,f=o,g;typeof c=="string"&&!/\W/.test(c)&&(c=c.toLowerCase(),g=c,f=n),f("parentNode",c,e,a,g,d)},"~":function(a,c,d){var e=b++,f=o,g;typeof c=="string"&&!/\W/.test(c)&&(c=c.toLowerCase(),g=c,f=n),f("previousSibling",c,e,a,g,d)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(/\\/g,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(a,b){return a[1].toLowerCase()},CHILD:function(a){if(a[1]==="nth"){var c=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=c[1]+(c[2]||1)-0,a[3]=c[3]-0}return a[0]=b++,a},ATTR:function(a,b,c,d,e,f){var h=a[1].replace(/\\/g,"");return!f&&g.attrMap[h]&&(a[1]=g.attrMap[h]),a[2]==="~="&&(a[4]=" "+a[4]+" "),a},PSEUDO:function(b,c,d,e,h){if(b[1]==="not"){if(!((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))){var i=f.filter(b[3],c,d,!0^h);return d||e.push.apply(e,i),!1}b[3]=f(b[3],null,null,c)}else if(g.match.POS.test(b[0])||g.match.CHILD.test(b[0]))return!0;return b},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!f(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===a.type},button:function(a){return"button"===a.type||a.nodeName.toLowerCase()==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],h=g.filters[e];if(h)return h(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||f.getText([a])||"").indexOf(b[3])>=0;if(e==="not"){var i=b[3];for(var j=0,k=i.length;j<k;j++)if(i[j]===a)return!1;return!0}f.error("Syntax error, unrecognized expression: "+e)},CHILD:function(a,b){var c=b[1],d=a;switch(c){case"only":case"first":while(d=d.previousSibling)if(d.nodeType===1)return!1;if(c==="first")return!0;d=a;case"last":while(d=d.nextSibling)if(d.nodeType===1)return!1;return!0;case"nth":var e=b[2],f=b[3];if(e===1&&f===0)return!0;var g=b[0],h=a.parentNode;if(h&&(h.sizcache!==g||!a.nodeIndex)){var i=0;for(d=h.firstChild;d;d=d.nextSibling)d.nodeType===1&&(d.nodeIndex=++i);h.sizcache=g}var j=a.nodeIndex-f;return e===0?j===0:j%e===0&&j/e>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=g.attrHandle[c]?g.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],h=b[4];return d==null?f==="!=":f==="="?e===h:f==="*="?e.indexOf(h)>=0:f==="~="?(" "+e+" ").indexOf(h)>=0:h?f==="!="?e!==h:f==="^="?e.indexOf(h)===0:f==="$="?e.substr(e.length-h.length)===h:f==="|="?e===h||e.substr(0,h.length+1)===h+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=g.setFilters[e];if(f)return f(a,c,b,d)}}},h=g.match.POS,i=function(a,b){return"\\"+(b-0+1)};for(var j in g.match)g.match[j]=new RegExp(g.match[j].source+/(?![^\[]*\])(?![^\(]*\))/.source),g.leftMatch[j]=new RegExp(/(^(?:.|\r|\n)*?)/.source+g.match[j].source.replace(/\\(\d+)/g,i));var k=function(a,b){return a=Array.prototype.slice.call(a,0),b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(l){k=function(a,b){var d=b||[],e=0;if(c.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var f=a.length;e<f;e++)d.push(a[e]);else for(;a[e];e++)d.push(a[e]);return d}}var m;document.documentElement.compareDocumentPosition?m=function(a,b){if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a==b&&(d=!0),a.compareDocumentPosition?-1:1;var c=a.compareDocumentPosition(b)&4?-1:a===b?0:1;return c===0&&(d=!0),c}:"sourceIndex"in document.documentElement?m=function(a,b){if(!a.sourceIndex||!b.sourceIndex)return a==b&&(d=!0),a.sourceIndex?-1:1;var c=a.sourceIndex-b.sourceIndex;return c===0&&(d=!0),c}:document.createRange&&(m=function(a,b){if(!a.ownerDocument||!b.ownerDocument)return a==b&&(d=!0),a.ownerDocument?-1:1;var c=a.ownerDocument.createRange(),e=b.ownerDocument.createRange();c.setStart(a,0),c.setEnd(a,0),e.setStart(b,0),e.setEnd(b,0);var f=c.compareBoundaryPoints(Range.START_TO_END,e);return f===0&&(d=!0),f}),f.getText=function(a){var b="",c;for(var d=0;a[d];d++)c=a[d],c.nodeType===3||c.nodeType===4?b+=c.nodeValue:c.nodeType!==8&&(b+=f.getText(c.childNodes));return b},function(){var a=document.createElement("div"),b="script"+(new Date).getTime();a.innerHTML="<a name='"+b+"'/>";var c=document.documentElement;c.insertBefore(a,c.firstChild),document.getElementById(b)&&(g.find.ID=function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d?d.id===a[1]||typeof d.getAttributeNode!="undefined"&&d.getAttributeNode("id").nodeValue===a[1]?[d]:undefined:[]}},g.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),c.removeChild(a),c=a=null}(),function(){var a=document.createElement("div");a.appendChild(document.createComment("")),a.getElementsByTagName("*").length>0&&(g.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(g.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),document.querySelectorAll&&function(){var a=f,b=document.createElement("div");b.innerHTML="<p class='TEST'></p>";if(b.querySelectorAll&&b.querySelectorAll(".TEST").length===0)return;f=function(b,c,d,e){c=c||document;if(!e&&c.nodeType===9&&!f.isXML(c))try{return k(c.querySelectorAll(b),d)}catch(g){}return a(b,c,d,e)};for(var c in a)f[c]=a[c];b=null}(),function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!a.getElementsByClassName||a.getElementsByClassName("e").length===0)return;a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;g.order.splice(1,0,"CLASS"),g.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}(),f.contains=document.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(a,b){return a!==b&&(a.contains?a.contains(b):!0)},f.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var p=function(a,b){var c=[],d="",e,h=b.nodeType?[b]:b;while(e=g.match.PSEUDO.exec(a))d+=e[0],a=a.replace(g.match.PSEUDO,"");a=g.relative[a]?a+"*":a;for(var i=0,j=h.length;i<j;i++)f(a,h[i],c);return f.filter(d,c)};window.tinymce.dom.Sizzle=f}(),function(a){var b=a.each,c=a.DOM,d=a.isIE,e=a.isWebKit,f;a.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[],this.events=[]},add:function(e,f,g,h){var i,j=this,k=j.events,l;if(f instanceof Array)return l=[],b(f,function(a){l.push(j.add(e,a,g,h))}),l;if(e&&e.hasOwnProperty&&e instanceof Array)return l=[],b(e,function(a){a=c.get(a),l.push(j.add(a,f,g,h))}),l;e=c.get(e);if(!e)return;return i=function(b){if(j.disabled)return;return b=b||window.event,b&&d&&(b.target||(b.target=b.srcElement),a.extend(b,j._stoppers)),h?g.call(h,b):g(b)},f=="unload"?(a.unloads.unshift({func:i}),i):f=="init"?(j.domLoaded?i():j.inits.push(i),i):(k.push({obj:e,name:f,func:g,cfunc:i,scope:h}),j._add(e,f,i),g)},remove:function(a,d,e){var f=this,g=f.events,h=!1,i;return a&&a.hasOwnProperty&&a instanceof Array?(i=[],b(a,function(a){a=c.get(a),i.push(f.remove(a,d,e))}),i):(a=c.get(a),b(g,function(b,c){if(b.obj==a&&b.name==d&&(!e||b.func==e||b.cfunc==e))return g.splice(c,1),f._remove(a,d,b.cfunc),h=!0,!1}),h)},clear:function(a){var b=this,d=b.events,e,f;if(a){a=c.get(a);for(e=d.length-1;e>=0;e--)f=d[e],f.obj===a&&(b._remove(f.obj,f.name,f.cfunc),f.obj=f.cfunc=null,d.splice(e,1))}},cancel:function(a){return a?(this.stop(a),this.prevent(a)):!1},stop:function(a){return a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,!1},prevent:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,!1},destroy:function(){var a=this;b(a.events,function(b,c){a._remove(b.obj,b.name,b.cfunc),b.obj=b.cfunc=null}),a.events=[],a=null},_add:function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener?a.addEventListener(b,c,!1):a["on"+b]=c},_remove:function(a,b,c){if(a)try{a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener?a.removeEventListener(b,c,!1):a["on"+b]=null}catch(d){}},_pageInit:function(a){var c=this;if(c.domLoaded)return;c.domLoaded=!0,b(c.inits,function(a){a()}),c.inits=[]},_wait:function(a){var b=this,c=a.document;if(a.tinyMCE_GZ&&tinyMCE_GZ.loaded){b.domLoaded=1;return}c.attachEvent?(c.attachEvent("onreadystatechange",function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",arguments.callee),b._pageInit(a))}),c.documentElement.doScroll&&a==a.top&&function(){if(b.domLoaded)return;try{c.documentElement.doScroll("left")}catch(d){setTimeout(arguments.callee,0);return}b._pageInit(a)}()):c.addEventListener&&b._add(a,"DOMContentLoaded",function(){b._pageInit(a)}),b._add(a,"load",function(){b._pageInit(a)})},_stoppers:{preventDefault:function(){this.returnValue=!1},stopPropagation:function(){this.cancelBubble=!0}}}),f=a.dom.Event=new a.dom.EventUtils,f._wait(window),a.addUnload(function(){f.destroy()})}(tinymce),function(a){a.dom.Element=function(b,c){var d=this,e,f;d.settings=c=c||{},d.id=b,d.dom=e=c.dom||a.DOM,a.isIE||(f=e.get(d.id)),a.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(a){d[a]=function(){var c=[b],f;for(f=0;f<arguments.length;f++)c.push(arguments[f]);return c=e[a].apply(e,c),d.update(a),c}}),a.extend(d,{on:function(b,c,e){return a.dom.Event.add(d.id,b,c,e)},getXY:function(){return{x:parseInt(d.getStyle("left")),y:parseInt(d.getStyle("top"))}},getSize:function(){var a=e.get(d.id);return{w:parseInt(d.getStyle("width")||a.clientWidth),h:parseInt(d.getStyle("height")||a.clientHeight)}},moveTo:function(a,b){d.setStyles({left:a,top:b})},moveBy:function(a,b){var c=d.getXY();d.moveTo(c.x+a,c.y+b)},resizeTo:function(a,b){d.setStyles({width:a,height:b})},resizeBy:function(a,b){var c=d.getSize();d.resizeTo(c.w+a,c.h+b)},update:function(b){var f;if(a.isIE6&&c.blocker){b=b||"";if(b.indexOf("get")===0||b.indexOf("has")===0||b.indexOf("is")===0)return;if(b=="remove"){e.remove(d.blocker);return}d.blocker?f=e.get(d.blocker):(d.blocker=e.uniqueId(),f=e.add(c.container||e.getRoot(),"iframe",{id:d.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),e.setStyle(f,"opacity",0)),e.setStyles(f,{left:d.getStyle("left",1),top:d.getStyle("top",1),width:d.getStyle("width",1),height:d.getStyle("height",1),display:d.getStyle("display",1),zIndex:parseInt(d.getStyle("zIndex",1)||0)-1})}}})}}(tinymce),function(a){function b(a){return a.replace(/[\n\r]+/g,"")}var c=a.is,d=a.isIE,e=a.each;a.create("tinymce.dom.Selection",{Selection:function(b,c,d){var f=this;f.dom=b,f.win=c,f.serializer=d,e(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(b){f[b]=new a.util.Dispatcher(f)}),f.win.getSelection||(f.tridentSel=new a.dom.TridentSelection(f)),a.isIE&&b.boxModel&&this._fixIESelection(),a.addUnload(f.destroy,f)},setCursorLocation:function(a,b){var c=this,d=c.dom.createRng();d.setStart(a,b),d.setEnd(a,b),c.setRng(d),c.collapse(!1)},getContent:function(a){var b=this,d=b.getRng(),e=b.dom.create("body"),f=b.getSel(),g,h,i;return a=a||{},g=h="",a.get=!0,a.format=a.format||"html",a.forced_root_block="",b.onBeforeGetContent.dispatch(b,a),a.format=="text"?b.isCollapsed()?"":d.text||(f.toString?f.toString():""):(d.cloneContents?(i=d.cloneContents(),i&&e.appendChild(i)):c(d.item)||c(d.htmlText)?(e.innerHTML="<br>"+(d.item?d.item(0).outerHTML:d.htmlText),e.removeChild(e.firstChild)):e.innerHTML=d.toString(),/^\s/.test(e.innerHTML)&&(g=" "),/\s+$/.test(e.innerHTML)&&(h=" "),a.getInner=!0,a.content=b.isCollapsed()?"":g+b.serializer.serialize
(e,a)+h,b.onGetContent.dispatch(b,a),a.content)},setContent:function(a,b){var c=this,d=c.getRng(),e,f=c.win.document,g,h;b=b||{format:"html"},b.set=!0,a=b.content=a,b.no_events||c.onBeforeSetContent.dispatch(c,b),a=b.content;if(d.insertNode){a+='<span id="__caret">_</span>',d.startContainer==f&&d.endContainer==f?f.body.innerHTML=a:(d.deleteContents(),f.body.childNodes.length==0?f.body.innerHTML=a:d.createContextualFragment?d.insertNode(d.createContextualFragment(a)):(g=f.createDocumentFragment(),h=f.createElement("div"),g.appendChild(h),h.outerHTML=a,d.insertNode(g))),e=c.dom.get("__caret"),d=f.createRange(),d.setStartBefore(e),d.setEndBefore(e),c.setRng(d),c.dom.remove("__caret");try{c.setRng(d)}catch(i){}}else d.item&&(f.execCommand("Delete",!1,null),d=c.getRng()),/^\s+/.test(a)?(d.pasteHTML('<span id="__mce_tmp">_</span>'+a),c.dom.remove("__mce_tmp")):d.pasteHTML(a);b.no_events||c.onSetContent.dispatch(c,b)},getStart:function(){var a=this.getRng(),b,c,d,e;if(a.duplicate||a.item){if(a.item)return a.item(0);d=a.duplicate(),d.collapse(1),b=d.parentElement(),c=e=a.parentElement();while(e=e.parentNode)if(e==b){b=c;break}return b}return b=a.startContainer,b.nodeType==1&&b.hasChildNodes()&&(b=b.childNodes[Math.min(b.childNodes.length-1,a.startOffset)]),b&&b.nodeType==3?b.parentNode:b},getEnd:function(){var a=this,b=a.getRng(),c,d;return b.duplicate||b.item?b.item?b.item(0):(b=b.duplicate(),b.collapse(0),c=b.parentElement(),c&&c.nodeName=="BODY"?c.lastChild||c:c):(c=b.endContainer,d=b.endOffset,c.nodeType==1&&c.hasChildNodes()&&(c=c.childNodes[d>0?d-1:d]),c&&c.nodeType==3?c.parentNode:c)},getBookmark:function(a,b){function o(a,b){var c=0;return e(d.select(a),function(a,d){a==b&&(c=d)}),c}var c=this,d=c.dom,f,g,h,i,j,k,l,m="﻿",n;if(a==2){function p(){function g(a,d){var f=a[d?"startContainer":"endContainer"],g=a[d?"startOffset":"endOffset"],h=[],i,j,k=0;if(f.nodeType==3){if(b)for(i=f.previousSibling;i&&i.nodeType==3;i=i.previousSibling)g+=i.nodeValue.length;h.push(g)}else j=f.childNodes,g>=j.length&&j.length&&(k=1,g=Math.max(0,j.length-1)),h.push(c.dom.nodeIndex(j[g],b)+k);for(;f&&f!=e;f=f.parentNode)h.push(c.dom.nodeIndex(f,b));return h}var a=c.getRng(!0),e=d.getRoot(),f={};return f.start=g(a,!0),c.isCollapsed()||(f.end=g(a)),f}return c.tridentSel?c.tridentSel.getBookmark(a):p()}if(a)return{rng:c.getRng()};f=c.getRng(),h=d.uniqueId(),i=tinyMCE.activeEditor.selection.isCollapsed(),n="overflow:hidden;line-height:0px";if(f.duplicate||f.item){if(!!f.item)return k=f.item(0),j=k.nodeName,{name:j,index:o(j,k)};g=f.duplicate();try{f.collapse(),f.pasteHTML('<span data-mce-type="bookmark" id="'+h+'_start" style="'+n+'">'+m+"</span>"),i||(g.collapse(!1),f.moveToElementText(g.parentElement()),f.compareEndPoints("StartToEnd",g)==0&&g.move("character",-1),g.pasteHTML('<span data-mce-type="bookmark" id="'+h+'_end" style="'+n+'">'+m+"</span>"))}catch(q){return null}}else{k=c.getNode(),j=k.nodeName;if(j=="IMG")return{name:j,index:o(j,k)};g=f.cloneRange(),i||(g.collapse(!1),g.insertNode(d.create("span",{"data-mce-type":"bookmark",id:h+"_end",style:n},m))),f.collapse(!0),f.insertNode(d.create("span",{"data-mce-type":"bookmark",id:h+"_start",style:n},m))}return c.moveToBookmark({id:h,keep:1}),{id:h}},moveToBookmark:function(b){var c=this,f=c.dom,g,h,i,j,k,l,m,n;if(b)if(b.start){i=f.createRng(),j=f.getRoot();function o(a){var c=b[a?"start":"end"],d,e,f,g;if(c){f=c[0];for(e=j,d=c.length-1;d>=1;d--){g=e.childNodes;if(c[d]>g.length-1)return;e=g[c[d]]}e.nodeType===3&&(f=Math.min(c[0],e.nodeValue.length)),e.nodeType===1&&(f=Math.min(c[0],e.childNodes.length)),a?i.setStart(e,f):i.setEnd(e,f)}return!0}if(c.tridentSel)return c.tridentSel.moveToBookmark(b);o(!0)&&o()&&c.setRng(i)}else if(b.id){function p(c){var d=f.get(b.id+"_"+c),g,h,i,j,o=b.keep;if(d){g=d.parentNode,c=="start"?(o?(g=d.firstChild,h=1):h=f.nodeIndex(d),k=l=g,m=n=h):(o?(g=d.firstChild,h=1):h=f.nodeIndex(d),l=g,n=h);if(!o){j=d.previousSibling,i=d.nextSibling,e(a.grep(d.childNodes),function(a){a.nodeType==3&&(a.nodeValue=a.nodeValue.replace(/\uFEFF/g,""))});while(d=f.get(b.id+"_"+c))f.remove(d,1);j&&i&&j.nodeType==i.nodeType&&j.nodeType==3&&!a.isOpera&&(h=j.nodeValue.length,j.appendData(i.nodeValue),f.remove(i),c=="start"?(k=l=j,m=n=h):(l=j,n=h))}}}function q(a){return f.isBlock(a)&&!a.innerHTML&&(a.innerHTML=d?" ":'<br data-mce-bogus="1" />'),a}p("start"),p("end"),k&&(i=f.createRng(),i.setStart(q(k),m),i.setEnd(q(l),n),c.setRng(i))}else b.name?c.select(f.select(b.name)[b.index]):b.rng&&c.setRng(b.rng)},select:function(b,c){var d=this,e=d.dom,f=e.createRng(),g;if(b){g=e.nodeIndex(b),f.setStart(b.parentNode,g),f.setEnd(b.parentNode,g+1);if(c){function h(b,c){var d=new a.dom.TreeWalker(b,b);do{if(b.nodeType==3&&a.trim(b.nodeValue).length!=0){c?f.setStart(b,0):f.setEnd(b,b.nodeValue.length);return}if(b.nodeName=="BR"){c?f.setStartBefore(b):f.setEndBefore(b);return}}while(b=c?d.next():d.prev())}h(b,1),h(b)}d.setRng(f)}return b},isCollapsed:function(){var a=this,b=a.getRng(),c=a.getSel();return!b||b.item?!1:b.compareEndPoints?b.compareEndPoints("StartToEnd",b)===0:!c||b.collapsed},collapse:function(a){var b=this,c=b.getRng(),d;c.item&&(d=c.item(0),c=b.win.document.body.createTextRange(),c.moveToElementText(d)),c.collapse(!!a),b.setRng(c)},getSel:function(){var a=this,b=this.win;return b.getSelection?b.getSelection():b.document.selection},getRng:function(b){var c=this,d,e,f,g=c.win.document;if(b&&c.tridentSel)return c.tridentSel.getRangeAt(0);try{if(d=c.getSel())e=d.rangeCount>0?d.getRangeAt(0):d.createRange?d.createRange():g.createRange()}catch(h){}return a.isIE&&e&&e.setStart&&g.selection.createRange().item&&(f=g.selection.createRange().item(0),e=g.createRange(),e.setStartBefore(f),e.setEndAfter(f)),e||(e=g.createRange?g.createRange():g.body.createTextRange()),c.selectedRange&&c.explicitRange&&(e.compareBoundaryPoints(e.START_TO_START,c.selectedRange)===0&&e.compareBoundaryPoints(e.END_TO_END,c.selectedRange)===0?e=c.explicitRange:(c.selectedRange=null,c.explicitRange=null)),e},setRng:function(a){var b,c=this;if(!c.tridentSel){b=c.getSel();if(b){c.explicitRange=a;try{b.removeAllRanges()}catch(d){}b.addRange(a),c.selectedRange=b.getRangeAt(0)}}else{if(a.cloneRange){c.tridentSel.addRange(a);return}try{a.select()}catch(d){}}},setNode:function(a){var b=this;return b.setContent(b.dom.getOuterHTML(a)),a},getNode:function(){var a=this,b=a.getRng(),c=a.getSel(),d,e=b.startContainer,f=b.endContainer;if(!b)return a.dom.getRoot();if(b.setStart){d=b.commonAncestorContainer;if(!b.collapsed){b.startContainer==b.endContainer&&b.endOffset-b.startOffset<2&&b.startContainer.hasChildNodes()&&(d=b.startContainer.childNodes[b.startOffset]);if(e.nodeType===3&&f.nodeType===3){function g(a,b){var c=a;while(a&&a.nodeType===3&&a.length===0)a=b?a.nextSibling:a.previousSibling;return a||c}e.length===b.startOffset?e=g(e.nextSibling,!0):e=e.parentNode,b.endOffset===0?f=g(f.previousSibling,!1):f=f.parentNode;if(e&&e===f)return e}}return d&&d.nodeType==3?d.parentNode:d}return b.item?b.item(0):b.parentElement()},getSelectedBlocks:function(b,c){var d=this,e=d.dom,f,g,h,i=[];f=e.getParent(b||d.getStart(),e.isBlock),g=e.getParent(c||d.getEnd(),e.isBlock),f&&i.push(f);if(f&&g&&f!=g){h=f;var j=new a.dom.TreeWalker(f,e.getRoot());while((h=j.next())&&h!=g)e.isBlock(h)&&i.push(h)}return g&&f!=g&&i.push(g),i},normalize:function(){function e(e){var f,g,h,i=b.dom,j=i.getRoot(),k;f=c[(e?"start":"end")+"Container"],g=c[(e?"start":"end")+"Offset"],f.nodeType===9&&(f=f.body,g=0);if(f===j&&f.hasChildNodes()){f=f.childNodes[Math.min(!e&&g>0?g-1:g,f.childNodes.length-1)],g=0;if(f.hasChildNodes()){k=f,h=new a.dom.TreeWalker(f,j);do{if(k.nodeType===3){g=e?0:k.nodeValue.length-1,f=k;break}if(k.nodeName==="BR"){g=i.nodeIndex(k),f=k.parentNode;break}}while(k=e?h.next():h.prev());d=!0}}d&&c["set"+(e?"Start":"End")](f,g)}var b=this,c,d;if(a.isIE)return;c=b.getRng(),e(!0),c.collapsed&&e(),d&&b.setRng(c)},destroy:function(b){var c=this;c.win=null,b||a.removeUnload(c.destroy)},_fixIESelection:function(){function g(a,b){var d=c.createTextRange();try{d.moveToPoint(a,b)}catch(e){d=null}return d}function h(a){var b;a.button?(b=g(a.x,a.y),b&&(b.compareEndPoints("StartToStart",e)>0?b.setEndPoint("StartToStart",e):b.setEndPoint("EndToEnd",e),b.select())):i()}function i(){var c=b.selection.createRange();e&&!c.item&&c.compareEndPoints("StartToEnd",c)===0&&e.select(),a.unbind(b,"mouseup",i),a.unbind(b,"mousemove",h),e=d=0}var a=this.dom,b=a.doc,c=b.body,d,e,f;b.documentElement.unselectable=!0,a.bind(b,["mousedown","contextmenu"],function(c){if(c.target.nodeName==="HTML"){d&&i(),f=b.documentElement;if(f.scrollHeight>f.clientHeight)return;d=1,e=g(c.x,c.y),e&&(a.bind(b,"mouseup",i),a.bind(b,"mousemove",h),a.win.focus(),e.select())}})}})}(tinymce),function(a){a.dom.Serializer=function(b,c,d){var e,f,g=a.isIE,h=a.each,i;return b.apply_source_formatting||(b.indent=!1),b.remove_trailing_brs=!0,c=c||a.DOM,d=d||new a.html.Schema(b),b.entity_encoding=b.entity_encoding||"named",e=new a.util.Dispatcher(self),f=new a.util.Dispatcher(self),i=new a.html.DomParser(b,d),i.addAttributeFilter("src,href,style",function(a,d){var e=a.length,f,g,h="data-mce-"+d,i=b.url_converter,j=b.url_converter_scope,k;while(e--)f=a[e],g=f.attributes.map[h],g!==k?(f.attr(d,g.length>0?g:null),f.attr(h,null)):(g=f.attributes.map[d],d==="style"?g=c.serializeStyle(c.parseStyle(g),f.name):i&&(g=i.call(j,g,d,f.name)),f.attr(d,g.length>0?g:null))}),i.addAttributeFilter("class",function(a,b){var c=a.length,d,e;while(c--)d=a[c],e=d.attr("class").replace(/\s*mce(Item\w+|Selected)\s*/g,""),d.attr("class",e.length>0?e:null)}),i.addAttributeFilter("data-mce-type",function(a,b,c){var d=a.length,e;while(d--)e=a[d],e.attributes.map["data-mce-type"]==="bookmark"&&!c.cleanup&&e.remove()}),i.addNodeFilter("script,style",function(a,b){function f(a){return a.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,"").replace(/\s*(\/\/\s*\]\]>|\/\/\s*-->|\]\]>|-->|\]\]-->)\s*$/g,"")}var c=a.length,d,e;while(c--)d=a[c],e=d.firstChild?d.firstChild.value:"",b==="script"?(d.attr("type",(d.attr("type")||"text/javascript").replace(/^mce\-/,"")),e.length>0&&(d.firstChild.value="// <![CDATA[\n"+f(e)+"\n// ]]>")):e.length>0&&(d.firstChild.value="<!--\n"+f(e)+"\n-->")}),i.addNodeFilter("#comment",function(a,b){var c=a.length,d;while(c--)d=a[c],d.value.indexOf("[CDATA[")===0?(d.name="#cdata",d.type=4,d.value=d.value.replace(/^\[CDATA\[|\]\]$/g,"")):d.value.indexOf("mce:protected ")===0&&(d.name="#text",d.type=3,d.raw=!0,d.value=unescape(d.value).substr(14))}),i.addNodeFilter("xml:namespace,input",function(a,b){var c=a.length,d;while(c--)d=a[c],d.type===7?d.remove():d.type===1&&b==="input"&&!("type"in d.attributes.map)&&d.attr("type","text")}),b.fix_list_elements&&i.addNodeFilter("ul,ol",function(a,b){var c=a.length,d,e;while(c--)d=a[c],e=d.parent,(e.name==="ul"||e.name==="ol")&&d.prev&&d.prev.name==="li"&&d.prev.append(d)}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(a,b){var c=a.length;while(c--)a[c].attr(b,null)}),{schema:d,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,onPreProcess:e,onPostProcess:f,serialize:function(j,k){var l,m,n,o,p;return g&&c.select("script,style,select,map").length>0?(p=j.innerHTML,j=j.cloneNode(!1),c.setHTML(j,p)):j=j.cloneNode(!0),l=j.ownerDocument.implementation,l.createHTMLDocument&&(m=l.createHTMLDocument(""),h(j.nodeName=="BODY"?j.childNodes:[j],function(a){m.body.appendChild(m.importNode(a,!0))}),j.nodeName!="BODY"?j=m.body.firstChild:j=m.body,n=c.doc,c.doc=m),k=k||{},k.format=k.format||"html",k.no_events||(k.node=j,e.dispatch(self,k)),o=new a.html.Serializer(b,d),k.content=o.serialize(i.parse(k.getInner?j.innerHTML:a.trim(c.getOuterHTML(j),k),k)),k.cleanup||(k.content=k.content.replace(/\uFEFF|\u200B/g,"")),k.no_events||f.dispatch(self,k),n&&(c.doc=n),k.node=null,k.content},addRules:function(a){d.addValidElements(a)},setRules:function(a){d.setValidElements(a)}}}}(tinymce),function(a){a.dom.ScriptLoader=function(b){function l(b,c){function j(){e.remove(i),f&&(f.onreadystatechange=f.onload=f=null),c()}function k(){typeof console!="undefined"&&console.log&&console.log("Failed to load: "+b)}var d=this,e=a.DOM,f,g,h,i;i=e.uniqueId();if(a.isIE6){g=new a.util.URI(b),h=location;if(g.host==h.hostname&&g.port==h.port&&g.protocol+":"==h.protocol&&g.protocol.toLowerCase()!="file"){a.util.XHR.send({url:a._addVer(g.getURI()),success:function(a){var b=e.create("script",{type:"text/javascript"});b.text=a,document.getElementsByTagName("head")[0].appendChild(b),e.remove(b),j()},error:k});return}}f=e.create("script",{id:i,type:"text/javascript",src:a._addVer(b)}),a.isIE||(f.onload=j),f.onerror=k,a.isOpera||(f.onreadystatechange=function(){var a=f.readyState;(a=="complete"||a=="loaded")&&j()}),(document.getElementsByTagName("head")[0]||document.body).appendChild(f)}var c=0,d=1,e=2,f={},g=[],h={},i=[],j=0,k;this.isDone=function(a){return f[a]==e},this.markDone=function(a){f[a]=e},this.add=this.load=function(a,b,d){var e,i=f[a];i==k&&(g.push(a),f[a]=c),b&&(h[a]||(h[a]=[]),h[a].push({func:b,scope:d||this}))},this.loadQueue=function(a,b){this.loadScripts(g,a,b)},this.loadScripts=function(b,c,g){function n(b){a.each(h[b],function(a){a.func.call(a.scope)}),h[b]=k}var m;i.push({func:c,scope:g||this}),m=function(){var c=a.grep(b);b.length=0,a.each(c,function(a){if(f[a]==e){n(a);return}f[a]!=d&&(f[a]=d,j++,l(a,function(){f[a]=e,j--,n(a),m()}))}),j||(a.each(i,function(a){a.func.call(a.scope)}),i.length=0)},m()}},a.ScriptLoader=new a.dom.ScriptLoader}(tinymce),tinymce.dom.TreeWalker=function(a,b){function d(a,c,d,e){var f,g;if(a){if(!e&&a[c])return a[c];if(a!=b){f=a[d];if(f)return f;for(g=a.parentNode;g&&g!=b;g=g.parentNode){f=g[d];if(f)return f}}}}var c=a;this.current=function(){return c},this.next=function(a){return c=d(c,"firstChild","nextSibling",a)},this.prev=function(a){return c=d(c,"lastChild","previousSibling",a)}},function(a){a.dom.RangeUtils=function(b){var c="﻿";this.walk=function(c,d){function p(a){var b;return b=a[0],b.nodeType===3&&b===e&&f>=b.nodeValue.length&&a.splice(0,1),b=a[a.length-1],h===0&&a.length>0&&b===g&&b.nodeType===3&&a.splice(a.length-1,1),a}function q(a,b,c){var d=[];for(;a&&a!=c;a=a[b])d.push(a);return d}function r(a,b){do{if(a.parentNode==b)return a;a=a.parentNode}while(a)}function s(a,b,c){var e=c?"nextSibling":"previousSibling";for(l=a,m=l.parentNode;l&&l!=b;l=m)m=l.parentNode,n=q(l==a?l:l[e],e),n.length&&(c||n.reverse(),d(p(n)))}var e=c.startContainer,f=c.startOffset,g=c.endContainer,h=c.endOffset,i,j,k,l,m,n,o;o=b.select("td.mceSelected,th.mceSelected");if(o.length>0){a.each(o,function(a){d([a])});return}e.nodeType==1&&e.hasChildNodes()&&(e=e.childNodes[f]),g.nodeType==1&&g.hasChildNodes()&&(g=g.childNodes[Math.min(h-1,g.childNodes.length-1)]);if(e==g)return d(p([e]));i=b.findCommonAncestor(e,g);for(l=e;l;l=l.parentNode){if(l===g)return s(e,i,!0);if(l===i)break}for(l=g;l;l=l.parentNode){if(l===e)return s(g,i);if(l===i)break}j=r(e,i)||e,k=r(g,i)||g,s(e,j,!0),n=q(j==e?j:j.nextSibling,"nextSibling",k==g?k.nextSibling:k),n.length&&d(p(n)),s(g,k)},this.split=function(a){function f(a,b){return a.splitText(b)}var b=a.startContainer,c=a.startOffset,d=a.endContainer,e=a.endOffset;return b==d&&b.nodeType==3?c>0&&c<b.nodeValue.length&&(d=f(b,c),b=d.previousSibling,e>c?(e-=c,b=d=f(d,e).previousSibling,e=d.nodeValue.length,c=0):e=0):(b.nodeType==3&&c>0&&c<b.nodeValue.length&&(b=f(b,c),c=0),d.nodeType==3&&e>0&&e<d.nodeValue.length&&(d=f(d,e).previousSibling,e=d.nodeValue.length)),{startContainer:b,startOffset:c,endContainer:d,endOffset:e}}},a.dom.RangeUtils.compareRanges=function(a,b){if(a&&b){if(!a.item&&!a.duplicate)return a.startContainer==b.startContainer&&a.startOffset==b.startOffset;if(a.item&&b.item&&a.item(0)===b.item(0))return!0;if(a.isEqual&&b.isEqual&&b.isEqual(a))return!0}return!1}}(tinymce),function(a){var b=a.dom.Event,c=a.each;a.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(d,e){var f=this,g=d.root,h=d.items,i=d.enableUpDown,j=d.enableLeftRight||!d.enableUpDown,k=d.excludeFromTabOrder,l,m,n,o,p;e=e||a.DOM,l=function(a){p=a.target.id},m=function(a){e.setAttrib(a.target.id,"tabindex","-1")},o=function(a){var b=e.get(p);e.setAttrib(b,"tabindex","0"),b.focus()},f.focus=function(){e.get(p).focus()},f.destroy=function(){c(h,function(a){e.unbind(e.get(a.id),"focus",l),e.unbind(e.get(a.id),"blur",m)}),e.unbind(e.get(g),"focus",o),e.unbind(e.get(g),"keydown",n),h=e=g=f.focus=l=m=n=o=null,f.destroy=function(){}},f.moveFocus=function(a,g){var i=-1,j=f.controls,k;if(!p)return;c(h,function(a,b){if(a.id===p)return i=b,!1}),i+=a,i<0?i=h.length-1:i>=h.length&&(i=0),k=h[i],e.setAttrib(p,"tabindex","-1"),e.setAttrib(k.id,"tabindex","0"),e.get(k.id).focus(),d.actOnFocus&&d.onAction(k.id),g&&b.cancel(g)},n=function(a){var c=37,e=39,g=38,h=40,k=27,l=14,m=13,n=32;switch(a.keyCode){case c:j&&f.moveFocus(-1);break;case e:j&&f.moveFocus(1);break;case g:i&&f.moveFocus(-1);break;case h:i&&f.moveFocus(1);break;case k:d.onCancel&&(d.onCancel(),b.cancel(a));break;case l:case m:case n:d.onAction&&(d.onAction(p),b.cancel(a))}},c(h,function(a,b){var c;a.id||(a.id=e.uniqueId("_mce_item_")),k?(e.bind(a.id,"blur",m),c="-1"):c=b===0?"0":"-1",e.setAttrib(a.id,"tabindex",c),e.bind(e.get(a.id),"focus",l)}),h[0]&&(p=h[0].id),e.setAttrib(g,"tabindex","-1"),e.bind(e.get(g),"focus",o),e.bind(e.get(g),"keydown",n)}})}(tinymce),function(a){var b=a.DOM,c=a.is;a.create("tinymce.ui.Control",{Control:function(b,c,d){this.id=b,this.settings=c=c||{},this.rendered=!1,this.onRender=new a.util.Dispatcher(this),this.classPrefix="",this.scope=c.scope||this,this.disabled=0,this.active=0,this.editor=d},setAriaProperty:function(a,c){var d=b.get(this.id+"_aria")||b.get(this.id);d&&b.setAttrib(d,"aria-"+a,!!c)},focus:function(){b.get(this.id).focus()},setDisabled:function(a){a!=this.disabled&&(this.setAriaProperty("disabled",a),this.setState("Disabled",a),this.setState("Enabled",!a),this.disabled=a)},isDisabled:function(){return this.disabled},setActive:function(a){a!=this.active&&(this.setState("Active",a),this.active=a,this.setAriaProperty("pressed",a))},isActive:function(){return this.active},setState:function(a,c){var d=b.get(this.id);a=this.classPrefix+a,c?b.addClass(d,a):b.removeClass(d,a)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(a){b.setHTML(a,this.renderHTML())},postRender:function(){var a=this,b;c(a.disabled)&&(b=a.disabled,a.disabled=-1,a.setDisabled(b)),c(a.active)&&(b=a.active,a.active=-1,a.setActive(b))},remove:function(){b.remove(this.id),this.destroy()},destroy:function(){a.dom.Event.clear(this.id)}})}(tinymce),tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(a,b,c){this.parent(a,b,c),this.controls=[],this.lookup={}},add:function(a){return this.lookup[a.id]=a,this.controls.push(a),a},get:function(a){return this.lookup[a]}}),tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(a,b){this.parent(a,b),this.classPrefix="mceSeparator",this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}}),function(a){var b=a.is,c=a.DOM,d=a.each,e=a.walk;a.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(a,b){this.parent(a,b),this.classPrefix="mceMenuItem"},setSelected:function(a){this.setState("Selected",a),this.setAriaProperty("checked",!!a),this.selected=a},isSelected:function(){return this.selected},postRender:function(){var a=this;a.parent(),b(a.selected)&&a.setSelected(a.selected)}})}(tinymce),function(a){var b=a.is,c=a.DOM,d=a.each,e=a.walk;a.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(b,c){var d=this;d.parent(b,c),d.items={},d.collapsed=!1,d.menuCount=0,d.onAddItem=new a.util.Dispatcher(this)},expand:function(a){var b=this;a&&e(b,function(a){a.expand&&a.expand()},"items",b),b.collapsed=!1},collapse:function(a){var b=this;a&&e(b,function(a){a.collapse&&a.collapse()},"items",b),b.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(b){return b.settings||(b=new a.ui.MenuItem(b.id||c.uniqueId(),b)),this.onAddItem.dispatch(this,b),this.items[b.id]=b},addSeparator:function(){return this.add({separator:!0})},addMenu:function(a){return a.collapse||(a=this.createMenu(a)),this.menuCount++,this.add(a)},hasMenus:function(){return this.menuCount!==0},remove:function(a){delete this.items[a.id]},removeAll:function(){var a=this;e(a,function(a){a.removeAll?a.removeAll():a.remove(),a.destroy()},"items",a),a.items={}},createMenu:function(b){var d=new a.ui.Menu(b.id||c.uniqueId(),b);return d.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),d}})}(tinymce),function(a){var b=a.is,c=a.DOM,d=a.each,e=a.dom.Event,f=a.dom.Element;a.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(d,e){e=e||{},e.container=e.container||c.doc.body,e.offset_x=e.offset_x||0,e.offset_y=e.offset_y||0,e.vp_offset_x=e.vp_offset_x||0,e.vp_offset_y=e.vp_offset_y||0,b(e.icons)&&!e.icons&&(e["class"]+=" mceNoIcons"),this.parent(d,e),this.onShowMenu=new a.util.Dispatcher(this),this.onHideMenu=new a.util.Dispatcher(this),this.classPrefix="mceMenu"},createMenu:function(b){var d=this,e=d.settings,f;return b.container=b.container||e.container,b.parent=d,b.constrain=b.constrain||e.constrain,b["class"]=b["class"]||e["class"],b.vp_offset_x=b.vp_offset_x||e.vp_offset_x,b.vp_offset_y=b.vp_offset_y||e.vp_offset_y,b.keyboard_focus=e.keyboard_focus,f=new a.ui.DropMenu(b.id||c.uniqueId(),b),f.onAddItem.add(d.onAddItem.dispatch,d.onAddItem),f},focus:function(){var a=this;a.keyboardNav&&a.keyboardNav.focus()},update:function(){var a=this,b=a.settings,d=c.get("menu_"+a.id+"_tbl"),e=c.get("menu_"+a.id+"_co"),f,g;f=b.max_width?Math.min(d.clientWidth,b.max_width):d.clientWidth,g=b.max_height?Math.min(d.clientHeight,b.max_height):d.clientHeight,c.boxModel?a.element.setStyles({width:f,height:g}):a.element.setStyles({width:f+2,height:g+2}),b.max_width&&c.setStyle(e,"width",f),b.max_height&&(c.setStyle(e,"height",g),d.clientHeight<b.max_height&&c.setStyle(e,"overflow","hidden"))},showMenu:function(b,g,h){var i=this,j=i.settings,k,l=c.getViewPort(),m,n,o,p,q=2,r,s,t=i.classPrefix;i.collapse(1);if(i.isMenuVisible)return;i.rendered?k=c.get("menu_"+i.id):(k=c.add(i.settings.container,i.renderNode()),d(i.items,function(a){a.postRender()}),i.element=new f("menu_"+i.id,{blocker:1,container:j.container})),a.isOpera||c.setStyles(k,{left:-65535,top:-65535}),c.show(k),i.update(),b+=j.offset_x||0,g+=j.offset_y||0,l.w-=4,l.h-=4,j.constrain&&(m=k.clientWidth-q,n=k.clientHeight-q,o=l.x+l.w,p=l.y+l.h,b+j.vp_offset_x+m>o&&(b=h?h-m:Math.max(0,o-j.vp_offset_x-m)),g+j.vp_offset_y+n>p&&(g=Math.max(0,p-j.vp_offset_y-n))),c.setStyles(k,{left:b,top:g}),i.element.update(),i.isMenuVisible=1,i.mouseClickFunc=e.add(k,"click",function(a){var b;a=a.target;if(a&&(a=c.getParent(a,"tr"))&&!c.hasClass(a,t+"ItemSub")){b=i.items[a.id];if(b.isDisabled())return;r=i;while(r)r.hideMenu&&r.hideMenu(),r=r.settings.parent;return b.settings.onclick&&b.settings.onclick(a),e.cancel(a)}}),i.hasMenus()&&(i.mouseOverFunc=e.add(k,"mouseover",function(a){var b,d,e;a=a.target;if(a&&(a=c.getParent(a,"tr"))){b=i.items[a.id],i.lastMenu&&i.lastMenu.collapse(1);if(b.isDisabled())return;a&&c.hasClass(a,t+"ItemSub")&&(d=c.getRect(a),b.showMenu(d.x+d.w-q,d.y-q,d.x),i.lastMenu=b,c.addClass(c.get(b.id).firstChild,t+"ItemActive"))}})),e.add(k,"keydown",i._keyHandler,i),i.onShowMenu.dispatch(i),j.keyboard_focus&&i._setupKeyboardNav()},hideMenu:function(a){var b=this,d=c.get("menu_"+b.id),f;if(!b.isMenuVisible)return;b.keyboardNav&&b.keyboardNav.destroy(),e.remove(d,"mouseover",b.mouseOverFunc),e.remove(d,"click",b.mouseClickFunc),e.remove(d,"keydown",b._keyHandler),c.hide(d),b.isMenuVisible=0,a||b.collapse(1),b.element&&b.element.hide(),(f=c.get(b.id))&&c.removeClass(f.firstChild,b.classPrefix+"ItemActive"),b.onHideMenu.dispatch(b)},add:function(a){var b=this,d;return a=b.parent(a),b.isRendered&&(d=c.get("menu_"+b.id))&&b._add(c.select("tbody",d)[0],a),a},collapse:function(a){this.parent(a),this.hideMenu(1)},remove:function(a){return c.remove(a.id),this.destroy(),this.parent(a)},destroy:function(){var a=this,b=c.get("menu_"+a.id);a.keyboardNav&&a.keyboardNav.destroy(),e.remove(b,"mouseover",a.mouseOverFunc),e.remove(c.select("a",b),"focus",a.mouseOverFunc),e.remove(b,"click",a.mouseClickFunc),e.remove(b,"keydown",a._keyHandler),a.element&&a.element.remove(),c.remove(b)},renderNode:function(){var a=this,b=a.settings,e,g,h,i;return i=c.create("div",{role:"listbox",id:"menu_"+a.id,"class":b["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"}),a.settings.parent&&c.setAttrib(i,"aria-parent","menu_"+a.settings.parent.id),h=c.add(i,"div",{role:"presentation",id:"menu_"+a.id+"_co","class":a.classPrefix+(b["class"]?" "+b["class"]:"")}),a.element=new f("menu_"+a.id,{blocker:1,container:b.container}),b.menu_line&&c.add(h,"span",{"class":a.classPrefix+"Line"}),e=c.add(h,"table",{role:"presentation",id:"menu_"+a.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),g=c.add(e,"tbody"),d(a.items,function(b){a._add(g,b)}),a.rendered=!0,i},_setupKeyboardNav:function(){var b,d,e=this;b=c.select("#menu_"+e.id)[0],d=c.select("a[role=option]","menu_"+e.id),d.splice(0,0,b),e.keyboardNav=new a.ui.KeyboardNavigation({root:"menu_"+e.id,items:d,onCancel:function(){e.hideMenu()},enableUpDown:!0}),b.focus()},_keyHandler:function(a){var b=this,c;switch(a.keyCode){case 37:b.settings.parent&&(b.hideMenu(),b.settings.parent.focus(),e.cancel(a));break;case 39:b.mouseOverFunc&&b.mouseOverFunc(a)}},_add:function(a,b){var d,e=b.settings,f,g,h,i=this.classPrefix,j;if(e.separator){g=c.add(a,"tr",{id:b.id,"class":i+"ItemSeparator"}),c.add(g,"td",{"class":i+"ItemSeparator"}),(d=g.previousSibling)&&c.addClass(d,"mceLast");return}d=g=c.add(a,"tr",{id:b.id,"class":i+"Item "+i+"ItemEnabled"}),d=h=c.add(d,e.titleItem?"th":"td"),d=f=c.add(d,"a",{id:b.id+"_aria",role:e.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),e.parent&&(c.setAttrib(f,"aria-haspopup","true"),c.setAttrib(f,"aria-owns","menu_"+b.id)),c.addClass(h,e["class"]),j=c.add(d,"span",{"class":"mceIcon"+(e.icon?" mce_"+e.icon:"")}),e.icon_src&&c.add(j,"img",{src:e.icon_src}),d=c.add(d,e.element||"span",{"class":"mceText",title:b.settings.title},b.settings.title),b.settings.style&&c.setAttrib(d,"style",b.settings.style),a.childNodes.length==1&&c.addClass(g,"mceFirst"),(d=g.previousSibling)&&c.hasClass(d,i+"ItemSeparator")&&c.addClass(g,"mceFirst"),b.collapse&&c.addClass(g,i+"ItemSub"),(d=g.previousSibling)&&c.removeClass(d,"mceLast"),c.addClass(g,"mceLast")}})}(tinymce),function(a){var b=a.DOM;a.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(a,b,c){this.parent(a,b,c),this.classPrefix="mceButton"},renderHTML:function(){var a=this.classPrefix,c=this.settings,d,e;return e=b.encode(c.label||""),d='<a role="button" id="'+this.id+'" href="javascript:;" class="'+a+" "+a+"Enabled "+c["class"]+(e?" "+a+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+b.encode(c.title)+'">',c.image&&(!this.editor||!this.editor.forcedHighContrastMode)?d+='<img class="mceIcon" src="'+c.image+'" alt="'+b.encode(c.title)+'" />'+e:d+='<span class="mceIcon '+c["class"]+'"></span>'+(e?'<span class="'+a+'Label">'+e+"</span>":""),d+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+c.title+"</span>",d+="</a>",d},postRender:function(){var b=this,c=b.settings;a.dom.Event.add(b.id,"click",function(a){if(!b.isDisabled())return c.onclick.call(c.scope,a)})}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each,e=a.util.Dispatcher;a.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(b,c,d){var f=this;f.parent(b,c,d),f.items=[],f.onChange=new e(f),f.onPostRender=new e(f),f.onAdd=new e(f),f.onRenderMenu=new a.util.Dispatcher(this),f.classPrefix="mceListBox"},select:function(a){var b=this,c,e;if(a==undefined)return b.selectByIndex(-1);a&&a.call?e=a:e=function(b){return b==a},a!=b.selectedValue&&(d(b.items,function(a,d){if(e(a.value))return c=1,b.selectByIndex(d),!1}),c||b.selectByIndex(-1))},selectByIndex:function(a){var c=this,d,e,f;a!=c.selectedIndex&&(d=b.get(c.id+"_text"),f=b.get(c.id+"_voiceDesc"),e=c.items[a],e?(c.selectedValue=e.value,c.selectedIndex=a,b.setHTML(d,b.encode(e.title)),b.setHTML(f,c.settings.title+" - "+e.title),b.removeClass(d,"mceTitle"),b.setAttrib(c.id,"aria-valuenow",e.title)):(b.setHTML(d,b.encode(c.settings.title)),b.setHTML(f,b.encode(c.settings.title)),b.addClass(d,"mceTitle"),c.selectedValue=c.selectedIndex=null,b.setAttrib(c.id,"aria-valuenow",c.settings.title)),d=0)},add:function(b,c,d){var e=this;d=d||{},d=a.extend(d,{title:b,value:c}),e.items.push(d),e.onAdd.dispatch(e,d)},getLength:function(){return this.items.length},renderHTML:function(){var a="",c=this,d=c.settings,e=c.classPrefix;return a='<span role="listbox" aria-haspopup="true" aria-labelledby="'+c.id+'_voiceDesc" aria-describedby="'+c.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+c.id+'" cellpadding="0" cellspacing="0" class="'+e+" "+e+"Enabled"+(d["class"]?" "+d["class"]:"")+'"><tbody><tr>',a+="<td>"+b.createHTML("span",{id:c.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},c.settings.title),a+=b.createHTML("a",{id:c.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},b.encode(c.settings.title))+"</td>",a+="<td>"+b.createHTML("a",{id:c.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span></span>')+"</td>",a+="</tr></tbody></table></span>",a},showMenu:function(){var e=this,f,g=b.get(this.id),h;if(e.isDisabled()||e.items.length==0)return;if(e.menu&&e.menu.isMenuVisible)return e.hideMenu();e.isMenuRendered||(e.renderMenu(),e.isMenuRendered=!0),f=b.getPos(g),h=e.menu,h.settings.offset_x=f.x,h.settings.offset_y=f.y,h.settings.keyboard_focus=!a.isOpera,e.oldID&&h.items[e.oldID].setSelected(0),d(e.items,function(a){a.value===e.selectedValue&&(h.items[a.id].setSelected(1),e.oldID=a.id)}),h.showMenu(0,g.clientHeight),c.add(b.doc,"mousedown",e.hideMenu,e),b.addClass(e.id,e.classPrefix+"Selected")},hideMenu:function(a){var d=this;if(d.menu&&d.menu.isMenuVisible){b.removeClass(d.id,d.classPrefix+"Selected");if(!(!a||a.type!="mousedown"||a.target.id!=d.id+"_text"&&a.target.id!=d.id+"_open"))return;if(!a||!b.getParent(a.target,".mceMenu"))b.removeClass(d.id,d.classPrefix+"Selected"),c.remove(b.doc,"mousedown",d.hideMenu,d),d.menu.hideMenu()}},renderMenu:function(){var a=this,c;c=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":a.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150}),c.onHideMenu.add(function(){a.hideMenu(),a.focus()}),c.add({title:a.settings.title,"class":"mceMenuItemTitle",onclick:function(){a.settings.onselect("")!==!1&&a.select("")}}),d(a.items,function(d){d.value===undefined?c.add({title:d.title,role:"option","class":"mceMenuItemTitle",onclick:function(){a.settings.onselect("")!==!1&&a.select("")}}):(d.id=b.uniqueId(),d.role="option",d.onclick=function(){a.settings.onselect(d.value)!==!1&&a.select(d.value)},c.add(d))}),a.onRenderMenu.dispatch(a,c),a.menu=c},postRender:function(){var d=this,e=d.classPrefix;c.add(d.id,"click",d.showMenu,d),c.add(d.id,"keydown",function(a){a.keyCode==32&&(d.showMenu(a),c.cancel(a))}),c.add(d.id,"focus",function(){d._focused||(d.keyDownHandler=c.add(d.id,"keydown",function(a){a.keyCode==40&&(d.showMenu(),c.cancel(a))}),d.keyPressHandler=c.add(d.id,"keypress",function(a){var b;a.keyCode==13&&(b=d.selectedValue,d.selectedValue=null,c.cancel(a),d.settings.onselect(b))})),d._focused=1}),c.add(d.id,"blur",function(){c.remove(d.id,"keydown",d.keyDownHandler),c.remove(d.id,"keypress",d.keyPressHandler),d._focused=0});if(a.isIE6||!b.boxModel)c.add(d.id,"mouseover",function(){b.hasClass(d.id,e+"Disabled")||b.addClass(d.id,e+"Hover")}),c.add(d.id,"mouseout",function(){b.hasClass(d.id,e+"Disabled")||b.removeClass(d.id,e+"Hover")});d.onPostRender.dispatch(d,b.get(d.id))},destroy:function(){this.parent(),c.clear(this.id+"_text"),c.clear(this.id+"_open")}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each,e=a.util.Dispatcher;a.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(a,b){this.parent(a,b),this.classPrefix="mceNativeListBox"},setDisabled:function(a){b.get(this.id)
.disabled=a,this.setAriaProperty("disabled",a)},isDisabled:function(){return b.get(this.id).disabled},select:function(a){var b=this,c,e;if(a==undefined)return b.selectByIndex(-1);a&&a.call?e=a:e=function(b){return b==a},a!=b.selectedValue&&(d(b.items,function(a,d){if(e(a.value))return c=1,b.selectByIndex(d),!1}),c||b.selectByIndex(-1))},selectByIndex:function(a){b.get(this.id).selectedIndex=a+1,this.selectedValue=this.items[a]?this.items[a].value:null},add:function(a,c,d){var e,f=this;d=d||{},d.value=c,f.isRendered()&&b.add(b.get(this.id),"option",d,a),e={title:a,value:c,attribs:d},f.items.push(e),f.onAdd.dispatch(f,e)},getLength:function(){return this.items.length},renderHTML:function(){var a,c=this;return a=b.createHTML("option",{value:""},"-- "+c.settings.title+" --"),d(c.items,function(c){a+=b.createHTML("option",{value:c.value},c.title)}),a=b.createHTML("select",{id:c.id,"class":"mceNativeListBox","aria-labelledby":c.id+"_aria"},a),a+=b.createHTML("span",{id:c.id+"_aria",style:"display: none"},c.settings.title),a},postRender:function(){function g(a){var b=d.items[a.target.selectedIndex-1];b&&(b=b.value)&&(d.onChange.dispatch(d,b),d.settings.onselect&&d.settings.onselect(b))}var d=this,e,f=!0;d.rendered=!0,c.add(d.id,"change",g),c.add(d.id,"keydown",function(b){var h;c.remove(d.id,"change",e),f=!1,h=c.add(d.id,"blur",function(){if(f)return;f=!0,c.add(d.id,"change",g),c.remove(d.id,"blur",h)});if(!(!a.isWebKit||b.keyCode!=37&&b.keyCode!=39))return c.prevent(b);if(b.keyCode==13||b.keyCode==32)return g(b),c.cancel(b)}),d.onPostRender.dispatch(d,b.get(d.id))}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each;a.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(c,d,e){this.parent(c,d,e),this.onRenderMenu=new a.util.Dispatcher(this),d.menu_container=d.menu_container||b.doc.body},showMenu:function(){var a=this,d,e,f=b.get(a.id),g;if(a.isDisabled())return;a.isMenuRendered||(a.renderMenu(),a.isMenuRendered=!0);if(a.isMenuVisible)return a.hideMenu();d=b.getPos(a.settings.menu_container),e=b.getPos(f),g=a.menu,g.settings.offset_x=e.x,g.settings.offset_y=e.y,g.settings.vp_offset_x=e.x,g.settings.vp_offset_y=e.y,g.settings.keyboard_focus=a._focused,g.showMenu(0,f.clientHeight),c.add(b.doc,"mousedown",a.hideMenu,a),a.setState("Selected",1),a.isMenuVisible=1},renderMenu:function(){var a=this,b;b=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:a.settings.icons}),b.onHideMenu.add(function(){a.hideMenu(),a.focus()}),a.onRenderMenu.dispatch(a,b),a.menu=b},hideMenu:function(a){var d=this;if(a&&a.type=="mousedown"&&b.getParent(a.target,function(a){return a.id===d.id||a.id===d.id+"_open"}))return;if(!a||!b.getParent(a.target,".mceMenu"))d.setState("Selected",0),c.remove(b.doc,"mousedown",d.hideMenu,d),d.menu&&d.menu.hideMenu();d.isMenuVisible=0},postRender:function(){var a=this,b=a.settings;c.add(a.id,"click",function(){a.isDisabled()||(b.onclick&&b.onclick(a.value),a.showMenu())})}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each;a.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(a,b,c){this.parent(a,b,c),this.classPrefix="mceSplitButton"},renderHTML:function(){var a,c=this,d=c.settings,e;return a="<tbody><tr>",d.image?e=b.createHTML("img ",{src:d.image,role:"presentation","class":"mceAction "+d["class"]}):e=b.createHTML("span",{"class":"mceAction "+d["class"]},""),e+=b.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:c.id+"_voice",style:"display:none;"},d.title),a+="<td >"+b.createHTML("a",{role:"button",id:c.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+d["class"],onclick:"return false;",onmousedown:"return false;",title:d.title},e)+"</td>",e=b.createHTML("span",{"class":"mceOpen "+d["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span>'),a+="<td >"+b.createHTML("a",{role:"button",id:c.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+d["class"],onclick:"return false;",onmousedown:"return false;",title:d.title},e)+"</td>",a+="</tr></tbody>",a=b.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+d["class"],cellpadding:"0",cellspacing:"0",title:d.title},a),b.createHTML("div",{id:c.id,role:"button",tabindex:"0","aria-labelledby":c.id+"_voice","aria-haspopup":"true"},a)},postRender:function(){var d=this,e=d.settings,f;e.onclick&&(f=function(a){d.isDisabled()||(e.onclick(d.value),c.cancel(a))},c.add(d.id+"_action","click",f),c.add(d.id,["click","keydown"],function(a){var b=32,e=14,g=13,h=38,i=40;if((a.keyCode===32||a.keyCode===13||a.keyCode===14)&&!a.altKey&&!a.ctrlKey&&!a.metaKey)f(),c.cancel(a);else if(a.type==="click"||a.keyCode===i)d.showMenu(),c.cancel(a)})),c.add(d.id+"_open","click",function(a){d.showMenu(),c.cancel(a)}),c.add([d.id,d.id+"_open"],"focus",function(){d._focused=1}),c.add([d.id,d.id+"_open"],"blur",function(){d._focused=0});if(a.isIE6||!b.boxModel)c.add(d.id,"mouseover",function(){b.hasClass(d.id,"mceSplitButtonDisabled")||b.addClass(d.id,"mceSplitButtonHover")}),c.add(d.id,"mouseout",function(){b.hasClass(d.id,"mceSplitButtonDisabled")||b.removeClass(d.id,"mceSplitButtonHover")})},destroy:function(){this.parent(),c.clear(this.id+"_action"),c.clear(this.id+"_open"),c.clear(this.id)}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.is,e=a.each;a.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(b,c,d){var e=this;e.parent(b,c,d),e.settings=c=a.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},e.settings),e.onShowMenu=new a.util.Dispatcher(e),e.onHideMenu=new a.util.Dispatcher(e),e.value=c.default_color},showMenu:function(){var a=this,d,e,f,g;if(a.isDisabled())return;a.isMenuRendered||(a.renderMenu(),a.isMenuRendered=!0);if(a.isMenuVisible)return a.hideMenu();f=b.get(a.id),b.show(a.id+"_menu"),b.addClass(f,"mceSplitButtonSelected"),g=b.getPos(f),b.setStyles(a.id+"_menu",{left:g.x,top:g.y+f.clientHeight,zIndex:2e5}),f=0,c.add(b.doc,"mousedown",a.hideMenu,a),a.onShowMenu.dispatch(a),a._focused&&(a._keyHandler=c.add(a.id+"_menu","keydown",function(b){b.keyCode==27&&a.hideMenu()}),b.select("a",a.id+"_menu")[0].focus()),a.isMenuVisible=1},hideMenu:function(a){var d=this;if(d.isMenuVisible){if(a&&a.type=="mousedown"&&b.getParent(a.target,function(a){return a.id===d.id+"_open"}))return;if(!a||!b.getParent(a.target,".mceSplitButtonMenu"))b.removeClass(d.id,"mceSplitButtonSelected"),c.remove(b.doc,"mousedown",d.hideMenu,d),c.remove(d.id+"_menu","keydown",d._keyHandler),b.hide(d.id+"_menu");d.isMenuVisible=0,d.onHideMenu.dispatch()}},renderMenu:function(){var f=this,g,h=0,i=f.settings,j,k,l,m,n;return m=b.add(i.menu_container,"div",{role:"listbox",id:f.id+"_menu","class":i.menu_class+" "+i["class"],style:"position:absolute;left:0;top:-1000px;"}),g=b.add(m,"div",{"class":i["class"]+" mceSplitButtonMenu"}),b.add(g,"span",{"class":"mceMenuLine"}),j=b.add(g,"table",{role:"presentation","class":"mceColorSplitMenu"}),k=b.add(j,"tbody"),h=0,e(d(i.colors,"array")?i.colors:i.colors.split(","),function(a){a=a.replace(/^#/,""),h--||(l=b.add(k,"tr"),h=i.grid_width-1),j=b.add(l,"td"),j=b.add(j,"a",{role:"option",href:"javascript:;",style:{backgroundColor:"#"+a},title:f.editor.getLang("colors."+a,a),"data-mce-color":"#"+a}),f.editor.forcedHighContrastMode&&(j=b.add(j,"canvas",{width:16,height:16,"aria-hidden":"true"}),j.getContext&&(n=j.getContext("2d"))?(n.fillStyle="#"+a,n.fillRect(0,0,16,16)):b.remove(j))}),i.more_colors_func&&(j=b.add(k,"tr"),j=b.add(j,"td",{colspan:i.grid_width,"class":"mceMoreColors"}),j=b.add(j,"a",{role:"option",id:f.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},i.more_colors_title),c.add(j,"click",function(a){return i.more_colors_func.call(i.more_colors_scope||this),c.cancel(a)})),b.addClass(g,"mceColorSplitMenu"),new a.ui.KeyboardNavigation({root:f.id+"_menu",items:b.select("a",f.id+"_menu"),onCancel:function(){f.hideMenu(),f.focus()}}),c.add(f.id+"_menu","mousedown",function(a){return c.cancel(a)}),c.add(f.id+"_menu","click",function(a){var d;return a=b.getParent(a.target,"a",k),a&&a.nodeName.toLowerCase()=="a"&&(d=a.getAttribute("data-mce-color"))&&f.setColor(d),c.cancel(a)}),m},setColor:function(a){this.displayColor(a),this.hideMenu(),this.settings.onselect(a)},displayColor:function(a){var c=this;b.setStyle(c.id+"_preview","backgroundColor",a),c.value=a},postRender:function(){var a=this,c=a.id;a.parent(),b.add(c+"_action","div",{id:c+"_preview","class":"mceColorPreview"}),b.setStyle(a.id+"_preview","backgroundColor",a.value)},destroy:function(){this.parent(),c.clear(this.id+"_menu"),c.clear(this.id+"_more"),b.remove(this.id+"_menu")}})}(tinymce),function(a){var b=a.DOM,c=a.each,d=a.dom.Event;a.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var c=this,d=[],e=c.controls,f=a.each,g=c.settings;return d.push('<div id="'+c.id+'" role="group" aria-labelledby="'+c.id+'_voice">'),d.push("<span role='application'>"),d.push('<span id="'+c.id+'_voice" class="mceVoiceLabel" style="display:none;">'+b.encode(g.name)+"</span>"),f(e,function(a){d.push(a.renderHTML())}),d.push("</span>"),d.push("</div>"),d.join("")},focus:function(){var a=this;b.get(a.id).focus()},postRender:function(){var d=this,e=[];c(d.controls,function(a){c(a.controls,function(a){a.id&&e.push(a)})}),d.keyNav=new a.ui.KeyboardNavigation({root:d.id,items:e,onCancel:function(){a.isWebKit&&b.get(d.editor.id+"_ifr").focus(),d.editor.focus()},excludeFromTabOrder:!d.settings.tab_focus_toolbar})},destroy:function(){var a=this;a.parent(),a.keyNav.destroy(),d.clear(a.id)}})}(tinymce),function(a){var b=a.DOM,c=a.each;a.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var a=this,c="",d,e,f=a.settings,g,h,i,j;j=a.controls;for(g=0;g<j.length;g++)e=j[g],h=j[g-1],i=j[g+1],g===0&&(d="mceToolbarStart",e.Button?d+=" mceToolbarStartButton":e.SplitButton?d+=" mceToolbarStartSplitButton":e.ListBox&&(d+=" mceToolbarStartListBox"),c+=b.createHTML("td",{"class":d},b.createHTML("span",null,"<!-- IE -->"))),h&&e.ListBox&&(h.Button||h.SplitButton)&&(c+=b.createHTML("td",{"class":"mceToolbarEnd"},b.createHTML("span",null,"<!-- IE -->"))),b.stdMode?c+='<td style="position: relative">'+e.renderHTML()+"</td>":c+="<td>"+e.renderHTML()+"</td>",i&&e.ListBox&&(i.Button||i.SplitButton)&&(c+=b.createHTML("td",{"class":"mceToolbarStart"},b.createHTML("span",null,"<!-- IE -->")));return d="mceToolbarEnd",e.Button?d+=" mceToolbarEndButton":e.SplitButton?d+=" mceToolbarEndSplitButton":e.ListBox&&(d+=" mceToolbarEndListBox"),c+=b.createHTML("td",{"class":d},b.createHTML("span",null,"<!-- IE -->")),b.createHTML("table",{id:a.id,"class":"mceToolbar"+(f["class"]?" "+f["class"]:""),cellpadding:"0",cellspacing:"0",align:a.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+c+"</tr></tbody>")}})}(tinymce),function(a){var b=a.util.Dispatcher,c=a.each;a.create("tinymce.AddOnManager",{AddOnManager:function(){var a=this;a.items=[],a.urls={},a.lookup={},a.onAdd=new b(a)},get:function(a){return this.lookup[a]?this.lookup[a].instance:undefined},dependencies:function(a){var b;return this.lookup[a]&&(b=this.lookup[a].dependencies),b||[]},requireLangPack:function(b){var c=a.settings;c&&c.language&&c.language_load!==!1&&a.ScriptLoader.add(this.urls[b]+"/langs/"+c.language+".js")},add:function(a,b,c){return this.items.push(b),this.lookup[a]={instance:b,dependencies:c},this.onAdd.dispatch(this,a,b),b},createUrl:function(a,b){return typeof b=="object"?b:{prefix:a.prefix,resource:b,suffix:a.suffix}},addComponents:function(b,c){var d=this.urls[b];a.each(c,function(b){a.ScriptLoader.add(d+"/"+b)})},load:function(b,c,d,e){function h(){var g=f.dependencies(b);a.each(g,function(a){var b=f.createUrl(c,a);f.load(b.resource,b,undefined,undefined)}),d&&(e?d.call(e):d.call(a.ScriptLoader))}var f=this,g=c;if(f.urls[b])return;typeof c=="object"&&(g=c.prefix+c.resource+c.suffix),g.indexOf("/")!=0&&g.indexOf("://")==-1&&(g=a.baseURL+"/"+g),f.urls[b]=g.substring(0,g.lastIndexOf("/")),f.lookup[b]?h():a.ScriptLoader.add(g,h,e)}}),a.PluginManager=new a.AddOnManager,a.ThemeManager=new a.AddOnManager}(tinymce),function(a){var b=a.each,c=a.extend,d=a.DOM,e=a.dom.Event,f=a.ThemeManager,g=a.PluginManager,h=a.explode,i=a.util.Dispatcher,j,k=0;a.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(a.documentBaseURL)||(a.documentBaseURL+="/"),a.baseURL=(new a.util.URI(a.documentBaseURL)).toAbsolute(a.baseURL),a.baseURI=new a.util.URI(a.baseURL),a.onBeforeUnload=new i(a),e.add(window,"beforeunload",function(b){a.onBeforeUnload.dispatch(a,b)}),a.onAddEditor=new i(a),a.onRemoveEditor=new i(a),a.EditorManager=c(a,{editors:[],i18n:{},activeEditor:null,init:function(f){function o(b,c,d){var e=b[c];if(!e)return;return a.is(e,"string")&&(d=e.replace(/\.\w+$/,""),d=d?a.resolve(d):0,e=a.resolve(e)),e.apply(d||this,Array.prototype.slice.call(arguments,2))}var g=this,i,j=a.ScriptLoader,l,m=[],n;f=c({theme:"simple",language:"en"},f),g.settings=f,e.add(document,"init",function(){var c,e;o(f,"onpageload");switch(f.mode){case"exact":c=f.elements||"",c.length>0&&b(h(c),function(c){d.get(c)?(n=new a.Editor(c,f),m.push(n),n.render(1)):b(document.forms,function(e){b(e.elements,function(b){b.name===c&&(c="mce_editor_"+k++,d.setAttrib(b,"id",c),n=new a.Editor(c,f),m.push(n),n.render(1))})})});break;case"textareas":case"specific_textareas":function i(a,b){return b.constructor===RegExp?b.test(a.className):d.hasClass(a,b)}b(d.select("textarea"),function(b){if(f.editor_deselector&&i(b,f.editor_deselector))return;if(!f.editor_selector||i(b,f.editor_selector)){l=d.get(b.name),!b.id&&!l&&(b.id=b.name);if(!b.id||g.get(b.id))b.id=d.uniqueId();n=new a.Editor(b.id,f),m.push(n),n.render(1)}})}f.oninit&&(c=e=0,b(m,function(a){e++,a.initialized?c++:a.onInit.add(function(){c++,c==e&&o(f,"oninit")}),c==e&&o(f,"oninit")}))})},get:function(a){return a===j?this.editors:this.editors[a]},getInstanceById:function(a){return this.get(a)},add:function(a){var b=this,c=b.editors;return c[a.id]=a,c.push(a),b._setActive(a),b.onAddEditor.dispatch(b,a),a},remove:function(a){var b=this,c,d=b.editors;if(!d[a.id])return null;delete d[a.id];for(c=0;c<d.length;c++)if(d[c]==a){d.splice(c,1);break}return b.activeEditor==a&&b._setActive(d[0]),a.destroy(),b.onRemoveEditor.dispatch(b,a),a},execCommand:function(b,c,d){var e=this,f=e.get(d),g;switch(b){case"mceFocus":return f.focus(),!0;case"mceAddEditor":case"mceAddControl":return e.get(d)||(new a.Editor(d,e.settings)).render(),!0;case"mceAddFrameControl":g=d.window,g.tinyMCE=tinyMCE,g.tinymce=a,a.DOM.doc=g.document,a.DOM.win=g,f=new a.Editor(d.element_id,d),f.render();if(a.isIE){function h(){f.destroy(),g.detachEvent("onunload",h),g=g.tinyMCE=g.tinymce=null}g.attachEvent("onunload",h)}return d.page_window=null,!0;case"mceRemoveEditor":case"mceRemoveControl":return f&&f.remove(),!0;case"mceToggleEditor":if(!f)return e.execCommand("mceAddControl",0,d),!0;return f.isHidden()?f.show():f.hide(),!0}return e.activeEditor?e.activeEditor.execCommand(b,c,d):!1},execInstanceCommand:function(a,b,c,d){var e=this.get(a);return e?e.execCommand(b,c,d):!1},triggerSave:function(){b(this.editors,function(a){a.save()})},addI18n:function(c,d){var e,f=this.i18n;a.is(c,"string")?b(d,function(a,b){f[c+"."+b]=a}):b(c,function(a,c){b(a,function(a,d){b(a,function(a,b){d==="common"?f[c+"."+b]=a:f[c+"."+d+"."+b]=a})})})},_setActive:function(a){this.selectedInstance=this.activeEditor=a}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.extend,e=a.util.Dispatcher,f=a.each,g=a.isGecko,h=a.isIE,i=a.isWebKit,j=a.is,k=a.ThemeManager,l=a.PluginManager,m=a.inArray,n=a.grep,o=a.explode;a.create("tinymce.Editor",{Editor:function(b,c){var g=this;g.id=g.editorId=b,g.execCommands={},g.queryStateCommands={},g.queryValueCommands={},g.isNotDirty=!1,g.plugins={},f(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(a){g[a]=new e(g)}),g.settings=c=d({id:b,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:a.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:a.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",validate:!0,entity_encoding:"named",url_converter:g.convertURL,url_converter_scope:g,ie7_compat:!0},c),g.documentBaseURI=new a.util.URI(c.document_base_url||a.documentBaseURL,{base_uri:tinyMCE.baseURI}),g.baseURI=a.baseURI,g.contentCSS=[],g.execCallback("setup",g)},render:function(d){function j(){g.language&&g.language_load!==!1&&i.add(a.baseURL+"/langs/"+g.language+".js"),g.theme&&g.theme.charAt(0)!="-"&&!k.urls[g.theme]&&k.load(g.theme,"themes/"+g.theme+"/editor_template"+a.suffix+".js"),f(o(g.plugins),function(b){if(b&&!l.urls[b])if(b.charAt(0)=="-"){b=b.substr(1,b.length);var c=l.dependencies(b);f(c,function(b){var c={prefix:"plugins/",resource:b,suffix:"/editor_plugin"+a.suffix+".js"},b=l.createUrl(c,b);l.load(b.resource,b)})}else{if(b=="safari")return;l.load(b,{prefix:"plugins/",resource:b,suffix:"/editor_plugin"+a.suffix+".js"})}}),i.loadQueue(function(){e.removed||e.init()})}var e=this,g=e.settings,h=e.id,i=a.ScriptLoader;if(!c.domLoaded){c.add(document,"init",function(){e.render()});return}tinyMCE.settings=g;if(!e.getElement())return;if(a.isIDevice&&!a.isIOS5)return;!/TEXTAREA|INPUT/i.test(e.getElement().nodeName)&&g.hidden_input&&b.getParent(h,"form")&&b.insertAfter(b.create("input",{type:"hidden",name:h}),h),a.WindowManager&&(e.windowManager=new a.WindowManager(e)),g.encoding=="xml"&&e.onGetContent.add(function(a,c){c.save&&(c.content=b.encode(c.content))}),g.add_form_submit_trigger&&e.onSubmit.addToTop(function(){e.initialized&&(e.save(),e.isNotDirty=1)}),g.add_unload_trigger&&(e._beforeUnload=tinyMCE.onBeforeUnload.add(function(){e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0})})),a.addUnload(e.destroy,e),g.submit_patch&&e.onBeforeRenderUI.add(function(){var b=e.getElement().form;if(!b)return;if(b._mceOldSubmit)return;!b.submit.nodeType&&!b.submit.length&&(e.formElement=b,b._mceOldSubmit=b.submit,b.submit=function(){return a.triggerSave(),e.isNotDirty=1,e.formElement._mceOldSubmit(e.formElement)}),b=null}),j()},init:function(){function w(b){var c=l.get(b),e=l.urls[b]||a.documentBaseURL.replace(/\/$/,""),g;c&&a.inArray(v,b)===-1&&(f(l.dependencies(b),function(a){w(a)}),g=new c(d,e),d.plugins[b]=g,g.init&&(g.init(d,e),v.push(b)))}var c,d=this,e=d.settings,i,j,m=d.getElement(),n,p,q,r,s,t,u,v=[];a.add(d),e.aria_label=e.aria_label||b.getAttrib(m,"aria-label",d.getLang("aria.rich_text_area")),e.theme&&(e.theme=e.theme.replace(/-/,""),n=k.get(e.theme),d.theme=new n,d.theme.init&&e.init_theme&&d.theme.init(d,k.urls[e.theme]||a.documentBaseURL.replace(/\/$/,""))),f(o(e.plugins.replace(/\-/g,"")),w),e.popup_css!==!1&&(e.popup_css?e.popup_css=d.documentBaseURI.toAbsolute(e.popup_css):e.popup_css=d.baseURI.toAbsolute("themes/"+e.theme+"/skins/"+e.skin+"/dialog.css")),e.popup_css_add&&(e.popup_css+=","+d.documentBaseURI.toAbsolute(e.popup_css_add)),d.controlManager=new a.ControlManager(d),e.custom_undo_redo&&(d.onBeforeExecCommand.add(function(a,b,c,e,f){b!="Undo"&&b!="Redo"&&b!="mceRepaint"&&(!f||!f.skip_undo)&&d.undoManager.beforeChange()}),d.onExecCommand.add(function(a,b,c,e,f){b!="Undo"&&b!="Redo"&&b!="mceRepaint"&&(!f||!f.skip_undo)&&d.undoManager.add()})),d.onExecCommand.add(function(a,b){/^(FontName|FontSize)$/.test(b)||d.nodeChanged()});if(g){function x(a,b){(!b||!b.initial)&&d.execCommand("mceRepaint")}d.onUndo.add(x),d.onRedo.add(x),d.onSetContent.add(x)}d.onBeforeRenderUI.dispatch(d,d.controlManager),e.render_ui&&(i=e.width||m.style.width||m.offsetWidth,j=e.height||m.style.height||m.offsetHeight,d.orgDisplay=m.style.display,t=/^[0-9\.]+(|px)$/i,t.test(""+i)&&(i=Math.max(parseInt(i)+(n.deltaWidth||0),100)),t.test(""+j)&&(j=Math.max(parseInt(j)+(n.deltaHeight||0),100)),n=d.theme.renderUI({targetNode:m,width:i,height:j,deltaWidth:e.delta_width,deltaHeight:e.delta_height}),d.editorContainer=n.editorContainer),document.domain&&location.hostname!=document.domain&&(a.relaxedDomain=document.domain),b.setStyles(n.sizeContainer||n.editorContainer,{width:i,height:j}),e.content_css&&a.each(o(e.content_css),function(a){d.contentCSS.push(d.documentBaseURI.toAbsolute(a))}),j=(n.iframeHeight||j)+(typeof j=="number"?n.deltaHeight||0:""),j<100&&(j=100),d.iframeHTML=e.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">',e.document_base_url!=a.documentBaseURL&&(d.iframeHTML+='<base href="'+d.documentBaseURI.getURI()+'" />'),e.ie7_compat?d.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />':d.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />',d.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';for(u=0;u<d.contentCSS.length;u++)d.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+d.contentCSS[u]+'" />';r=e.body_id||"tinymce",r.indexOf("=")!=-1&&(r=d.getParam("body_id","","hash"),r=r[d.id]||r),s=e.body_class||"",s.indexOf("=")!=-1&&(s=d.getParam("body_class","","hash"),s=s[d.id]||""),d.iframeHTML+='</head><body id="'+r+'" class="mceContentBody '+s+'"><br></body></html>',a.relaxedDomain&&(h||a.isOpera&&parseFloat(opera.version())<11)&&(q='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+d.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()'),c=b.add(n.iframeContainer,"iframe",{id:d.id+"_ifr",src:q||'javascript:""',frameBorder:"0",allowTransparency:"true",title:e.aria_label,style:{width:"100%",height:j,display:"block"}}),d.contentAreaContainer=n.iframeContainer,b.get(n.editorContainer).style.display=d.orgDisplay,b.get(d.id).style.display="none",b.setAttrib(d.id,"aria-hidden",!0),(!a.relaxedDomain||!q)&&d.setupIframe(),m=c=n=null},setupIframe:function(){var d=this,e=d.settings,i=b.get(d.id),j=d.getDoc(),k,l;if(!h||!a.relaxedDomain)j.open(),j.write(d.iframeHTML),j.close(),a.relaxedDomain&&(j.domain=a.relaxedDomain);l=d.getBody(),l.disabled=!0,e.readonly||(l.contentEditable=!0),l.disabled=!1,d.schema=new a.html.Schema(e),d.dom=new a.dom.DOMUtils(d.getDoc(),{keep_values:!0,url_converter:d.convertURL,url_converter_scope:d,hex_colors:e.force_hex_style_colors,class_filter:e.class_filter,update_styles:1,fix_ie_paragraphs:1,schema:d.schema}),d.parser=new a.html.DomParser(e,d.schema),d.settings.allow_html_in_named_anchor||d.parser.addAttributeFilter("name",function(a,b){var c=a.length,d,e,f,g;while(c--){g=a[c];if(g.name==="a"&&g.firstChild){f=g.parent,d=g.lastChild;do e=d.prev,f.insert(d,g),d=e;while(d)}}}),d.parser.addAttributeFilter("src,href,style",function(a,b){var c=a.length,e,f=d.dom,g,h;while(c--)e=a[c],g=e.attr(b),h="data-mce-"+b,e.attributes.map[h]||(b==="style"?e.attr(h,f.serializeStyle(f.parseStyle(g),e.name)):e.attr(h,d.convertURL(g,b,e.name)))}),d.parser.addNodeFilter("script",function(a,b){var c=a.length,d;while(c--)d=a[c],d.attr("type","mce-"+(d.attr("type")||"text/javascript"))}),d.parser.addNodeFilter("#cdata",function(a,b){var c=a.length,d;while(c--)d=a[c],d.type=8,d.name="#comment",d.value="[CDATA["+d.value+"]]"}),d.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(b,c){var e=b.length,f,g=d.schema.getNonEmptyElements();while(e--)f=b[e],f.isEmpty(g)&&(f.empty().append(new a.html.Node("br",1)).shortEnded=!0)}),d.serializer=new a.dom.Serializer(e,d.dom,d.schema),d.selection=new a.dom.Selection(d.dom,d.getWin(),d.serializer),d.formatter=new a.Formatter(this),d.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(a){return!0},onformat:function(a,b,c){f(c,function(b,c){d.dom.setAttrib(a,c,b)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),f("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(a){d.formatter.register(a,{block:a,remove:"all"})}),d.formatter.register(d.settings.formats),d.undoManager=new a.UndoManager(d),d.undoManager.onAdd.add(function(a,b){if(a.hasUndo())return d.onChange.dispatch(d,b,a)}),d.undoManager.onUndo.add(function(a,b){return d.onUndo.dispatch(d,b,a)}),d.undoManager.onRedo.add(function(a,b){return d.onRedo.dispatch(d,b,a)}),d.forceBlocks=new a.ForceBlocks(d,{forced_root_block:e.forced_root_block}),d.editorCommands=new a.EditorCommands(d),d.serializer.onPreProcess.add(function(a,b){return d.onPreProcess.dispatch(d,b,a)}),d.serializer.onPostProcess.add(function(a,b){return d.onPostProcess.dispatch(d,b,a)}),d.onPreInit.dispatch(d),e.gecko_spellcheck||(d.getBody().spellcheck=0),e.readonly||d._addEvents(),d.controlManager.onPostRender.dispatch(d,d.controlManager),d.onPostRender.dispatch(d),d.quirks=new a.util.Quirks(this),e.directionality&&(d.getBody().dir=e.directionality),e.nowrap&&(d.getBody().style.whiteSpace="nowrap"),e.handle_node_change_callback&&d.onNodeChange.add(function(a,b,c){d.execCallback("handle_node_change_callback",d.id,c,-1,-1,!0,d.selection.isCollapsed())}),e.save_callback&&d.onSaveContent.add(function(a,b){var c=d.execCallback("save_callback",d.id,b.content,d.getBody());c&&(b.content=c)}),e.onchange_callback&&d.onChange.add(function(a,b){d.execCallback("onchange_callback",d,b)}),e.protect&&d.onBeforeSetContent.add(function(a,b){e.protect&&f(e.protect,function(a){b.content=b.content.replace(a,function(a){return"<!--mce:protected "+escape(a)+"-->"})})}),e.convert_newlines_to_brs&&d.onBeforeSetContent.add(function(a,b){b.initial&&(b.content=b.content.replace(/\r?\n/g,"<br />"))}),e.preformatted&&d.onPostProcess.add(function(a,b){b.content=b.content.replace(/^\s*<pre.*?>/,""),b.content=b.content.replace(/<\/pre>\s*$/,""),b.set&&(b.content='<pre class="mceItemHidden">'+b.content+"</pre>")}),e.verify_css_classes&&(d.serializer.attribValueFilter=function(a,b){var c,e;return a=="class"?(d.classesRE||(e=d.dom.getClasses(),e.length>0&&(c="",f(e,function(a){c+=(c?"|":"")+a["class"]}),d.classesRE=new RegExp("("+c+")","gi"))),!d.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(b)||d.classesRE.test(b)?b:""):b}),e.cleanup_callback&&(d.onBeforeSetContent.add(function(a,b){b.content=d.execCallback("cleanup_callback","insert_to_editor",b.content,b)}),d.onPreProcess.add(function(a,b){b.set&&d.execCallback("cleanup_callback","insert_to_editor_dom",b.node,b),b.get&&d.execCallback("cleanup_callback","get_from_editor_dom",b.node,b)}),d.onPostProcess.add(function(a,b){b.set&&(b.content=d.execCallback("cleanup_callback","insert_to_editor",b.content,b)),b.get&&(b.content=d.execCallback("cleanup_callback","get_from_editor",b.content,b))})),e.save_callback&&d.onGetContent.add(function(a,b){b.save&&(b.content=d.execCallback("save_callback",d.id,b.content,d.getBody()))}),e.handle_event_callback&&d.onEvent.add(function(a,b,e){d.execCallback("handle_event_callback",b,a,e)===!1&&c.cancel(b)}),d.onSetContent.add(function(){d.addVisual(d.getBody())}),e.padd_empty_editor&&d.onPostProcess.add(function(a,b){b.content=b.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")});if(g){function m(a,b){f(a.dom.select("a"),function(b){var c=b.parentNode;a.dom.isBlock(c)&&c.lastChild===b&&a.dom.add(c,"br",{"data-mce-bogus":1})})}d.onExecCommand.add(function(a,b){b==="CreateLink"&&m(a)}),d.onSetContent.add(d.selection.onSetContent.add(m))}d.load({initial:!0,format:"html"}),d.startContent=d.getContent({format:"raw"}),d.undoManager.add(),d.initialized=!0,d.onInit.dispatch(d),d.execCallback("setupcontent_callback",d.id,d.getBody(),d.getDoc()),d.execCallback("init_instance_callback",d),d.focus(!0),d.nodeChanged({initial:1}),f(d.contentCSS,function(a){d.dom.loadCSS(a)}),e.auto_focus&&setTimeout(function(){var b=a.get(e.auto_focus);b.selection.select(b.getBody(),1),b.selection.collapse(1),b.getBody().focus(),b.getWin().focus()},100),i=null},focus:function(b){var c,d=this,e=d.selection,f=d.settings.content_editable,g,h,i=d.getDoc();b||(g=e.getRng(),g.item&&(h=g.item(0)),d._refreshContentEditable(),e.normalize(),f||d.getWin().focus(),a.isGecko&&d.getBody().focus(),h&&h.ownerDocument==i&&(g=i.body.createControlRange(),g.addElement(h),g.select())),a.activeEditor!=d&&((c=a.activeEditor)!=null&&c.onDeactivate.dispatch(c,d),d.onActivate.dispatch(d,c)),a._setActive(d)},execCallback:function(b){var c=this,d=c.settings[b],e;if(!d)return;return c.callbackLookup&&(e=c.callbackLookup[b])&&(d=e.func,e=e.scope),j(d,"string")&&(e=d.replace(/\.\w+$/,""),e=e?a.resolve(e):0,d=a.resolve(d),c.callbackLookup=c.callbackLookup||{},c.callbackLookup[b]={func:d,scope:e}),d.apply(e||c,Array.prototype.slice.call(arguments,1))},translate:function(b){var c=this.settings.language||"en",d=a.i18n;return b?d[c+"."+b]||b.replace(/{\#([^}]+)\}/g,function(a,b){return d[c+"."+b]||"{#"+b+"}"}):""},getLang:function(b,c){return a.i18n[(this.settings.language||"en")+"."+b]||(j(c)?c:"{#"+b+"}")},getParam:function(b,c,d){var e=a.trim,g=j(this.settings[b])?this.settings[b]:c,h;return d==="hash"?(h={},j(g,"string")?f(g.indexOf("=")>0?g.split(/[;,](?![^=;,]*(?:[;,]|$))/):g.split(","),function(a){a=a.split("="),a.length>1?h[e(a[0])]=e(a[1]):h[e(a[0])]=e(a)}):h=g,h):g},nodeChanged:function(a){var b=this,c=b.selection,d=c.getStart()||b.getBody();b.initialized&&(a=a||{},d=h&&d.ownerDocument!=b.getDoc()?b.getBody():d,a.parents=[],b.dom.getParent(d,function(b){if(b.nodeName=="BODY")return!0
;a.parents.push(b)}),b.onNodeChange.dispatch(b,a?a.controlManager||b.controlManager:b.controlManager,d,c.isCollapsed(),a))},addButton:function(a,b){var c=this;c.buttons=c.buttons||{},c.buttons[a]=b},addCommand:function(a,b,c){this.execCommands[a]={func:b,scope:c||this}},addQueryStateHandler:function(a,b,c){this.queryStateCommands[a]={func:b,scope:c||this}},addQueryValueHandler:function(a,b,c){this.queryValueCommands[a]={func:b,scope:c||this}},addShortcut:function(a,b,c,d){var e=this,g;return e.settings.custom_shortcuts?(e.shortcuts=e.shortcuts||{},j(c,"string")&&(g=c,c=function(){e.execCommand(g,!1,null)}),j(c,"object")&&(g=c,c=function(){e.execCommand(g[0],g[1],g[2])}),f(o(a),function(a){var g={func:c,scope:d||this,desc:b,alt:!1,ctrl:!1,shift:!1};f(o(a,"+"),function(a){switch(a){case"alt":case"ctrl":case"shift":g[a]=!0;break;default:g.charCode=a.charCodeAt(0),g.keyCode=a.toUpperCase().charCodeAt(0)}}),e.shortcuts[(g.ctrl?"ctrl":"")+","+(g.alt?"alt":"")+","+(g.shift?"shift":"")+","+g.keyCode]=g}),!0):!1},execCommand:function(a,b,c,d){var e=this,g=0,h,i;!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(a)&&(!d||!d.skip_focus)&&e.focus(),h={},e.onBeforeExecCommand.dispatch(e,a,b,c,h);if(h.terminate)return!1;if(e.execCallback("execcommand_callback",e.id,e.selection.getNode(),a,b,c))return e.onExecCommand.dispatch(e,a,b,c,d),!0;if(h=e.execCommands[a]){i=h.func.call(h.scope,b,c);if(i!==!0)return e.onExecCommand.dispatch(e,a,b,c,d),i}f(e.plugins,function(f){if(f.execCommand&&f.execCommand(a,b,c))return e.onExecCommand.dispatch(e,a,b,c,d),g=1,!1});if(g)return!0;if(e.theme&&e.theme.execCommand&&e.theme.execCommand(a,b,c))return e.onExecCommand.dispatch(e,a,b,c,d),!0;if(e.editorCommands.execCommand(a,b,c))return e.onExecCommand.dispatch(e,a,b,c,d),!0;e.getDoc().execCommand(a,b,c),e.onExecCommand.dispatch(e,a,b,c,d)},queryCommandState:function(a){var b=this,c,d;if(b._isHidden())return;if(c=b.queryStateCommands[a]){d=c.func.call(c.scope);if(d!==!0)return d}c=b.editorCommands.queryCommandState(a);if(c!==-1)return c;try{return this.getDoc().queryCommandState(a)}catch(e){}},queryCommandValue:function(a){var b=this,c,d;if(b._isHidden())return;if(c=b.queryValueCommands[a]){d=c.func.call(c.scope);if(d!==!0)return d}c=b.editorCommands.queryCommandValue(a);if(j(c))return c;try{return this.getDoc().queryCommandValue(a)}catch(e){}},show:function(){var a=this;b.show(a.getContainer()),b.hide(a.id),a.load()},hide:function(){var a=this,c=a.getDoc();h&&c&&c.execCommand("SelectAll"),a.save(),b.hide(a.getContainer()),b.setStyle(a.id,"display",a.orgDisplay)},isHidden:function(){return!b.isHidden(this.id)},setProgressState:function(a,b,c){return this.onSetProgressState.dispatch(this,a,b,c),a},load:function(a){var b=this,c=b.getElement(),d;if(c)return a=a||{},a.load=!0,d=b.setContent(j(c.value)?c.value:c.innerHTML,a),a.element=c,a.no_events||b.onLoadContent.dispatch(b,a),a.element=c=null,d},save:function(a){var c=this,d=c.getElement(),e,g;if(!d||!c.initialized)return;return a=a||{},a.save=!0,a.no_events||(c.undoManager.typing=!1,c.undoManager.add()),a.element=d,e=a.content=c.getContent(a),a.no_events||c.onSaveContent.dispatch(c,a),e=a.content,/TEXTAREA|INPUT/i.test(d.nodeName)?d.value=e:(d.innerHTML=e,(g=b.getParent(c.id,"form"))&&f(g.elements,function(a){if(a.name==c.id)return a.value=e,!1})),a.element=d=null,e},setContent:function(b,c){var d=this,e,f=d.getBody(),g;c=c||{},c.format=c.format||"html",c.set=!0,c.content=b,c.no_events||d.onBeforeSetContent.dispatch(d,c),b=c.content;if(!a.isIE&&(b.length===0||/^\s+$/.test(b))){g=d.settings.forced_root_block,g?b="<"+g+'><br data-mce-bogus="1"></'+g+">":b='<br data-mce-bogus="1">',f.innerHTML=b,d.selection.select(f,!0),d.selection.collapse(!0);return}return c.format!=="raw"&&(b=(new a.html.Serializer({},d.schema)).serialize(d.parser.parse(b))),c.content=a.trim(b),d.dom.setHTML(f,c.content),c.no_events||d.onSetContent.dispatch(d,c),d.selection.normalize(),c.content},getContent:function(b){var c=this,d;return b=b||{},b.format=b.format||"html",b.get=!0,b.no_events||c.onBeforeGetContent.dispatch(c,b),b.format=="raw"?d=c.getBody().innerHTML:d=c.serializer.serialize(c.getBody(),b),b.content=a.trim(d),b.no_events||c.onGetContent.dispatch(c,b),b.content},isDirty:function(){var b=this;return a.trim(b.startContent)!=a.trim(b.getContent({format:"raw",no_events:1}))&&!b.isNotDirty},getContainer:function(){var a=this;return a.container||(a.container=b.get(a.editorContainer||a.id+"_parent")),a.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return b.get(this.settings.content_element||this.id)},getWin:function(){var a=this,c;return a.contentWindow||(c=b.get(a.id+"_ifr"),c&&(a.contentWindow=c.contentWindow)),a.contentWindow},getDoc:function(){var a=this,b;return a.contentDocument||(b=a.getWin(),b&&(a.contentDocument=b.document)),a.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(a,b,c){var d=this,e=d.settings;return e.urlconverter_callback?d.execCallback("urlconverter_callback",a,c,!0,b):!e.convert_urls||c&&c.nodeName=="LINK"||a.indexOf("file:")===0?a:e.relative_urls?d.documentBaseURI.toRelative(a):(a=d.documentBaseURI.toAbsolute(a,e.remove_script_host),a)},addVisual:function(a){var b=this,c=b.settings;a=a||b.getBody(),j(b.hasVisual)||(b.hasVisual=c.visual),f(b.dom.select("table,a",a),function(a){var d;switch(a.nodeName){case"TABLE":d=b.dom.getAttrib(a,"border");if(!d||d=="0")b.hasVisual?b.dom.addClass(a,c.visual_table_class):b.dom.removeClass(a,c.visual_table_class);return;case"A":d=b.dom.getAttrib(a,"name"),d&&(b.hasVisual?b.dom.addClass(a,"mceItemAnchor"):b.dom.removeClass(a,"mceItemAnchor"));return}}),b.onVisualAid.dispatch(b,a,b.hasVisual)},remove:function(){var c=this,d=c.getContainer();c.removed=1,c.hide(),c.execCallback("remove_instance_callback",c),c.onRemove.dispatch(c),c.onExecCommand.listeners=[],a.remove(c),b.remove(d)},destroy:function(b){var d=this;if(d.destroyed)return;b||(a.removeUnload(d.destroy),tinyMCE.onBeforeUnload.remove(d._beforeUnload),d.theme&&d.theme.destroy&&d.theme.destroy(),d.controlManager.destroy(),d.selection.destroy(),d.dom.destroy(),d.settings.content_editable||(c.clear(d.getWin()),c.clear(d.getDoc())),c.clear(d.getBody()),c.clear(d.formElement)),d.formElement&&(d.formElement.submit=d.formElement._mceOldSubmit,d.formElement._mceOldSubmit=null),d.contentAreaContainer=d.formElement=d.container=d.settings.content_element=d.bodyElement=d.contentDocument=d.contentWindow=null,d.selection&&(d.selection=d.selection.win=d.selection.dom=d.selection.dom.doc=null),d.destroyed=1},_addEvents:function(){function k(a,b){var c=a.type;if(d.removed)return;d.onEvent.dispatch(d,a,b)!==!1&&d[j[a.fakeType||a.type]].dispatch(d,a,b)}var d=this,e,h=d.settings,i=d.dom,j={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};f(j,function(a,c){switch(c){case"contextmenu":i.bind(d.getDoc(),c,k);break;case"paste":i.bind(d.getBody(),c,function(a){k(a)});break;case"submit":case"reset":i.bind(d.getElement().form||b.getParent(d.id,"form"),c,k);break;default:i.bind(h.content_editable?d.getBody():d.getDoc(),c,k)}}),i.bind(h.content_editable?d.getBody():g?d.getDoc():d.getWin(),"focus",function(a){d.focus(!0)}),a.isGecko&&i.bind(d.getDoc(),"DOMNodeInserted",function(a){var b;a=a.target,a.nodeType===1&&a.nodeName==="IMG"&&(b=a.getAttribute("data-mce-src"))&&(a.src=d.documentBaseURI.toAbsolute(b))});if(g){function l(){var a=this,b=a.getDoc(),c=a.settings;if(g&&!c.readonly){a._refreshContentEditable();try{b.execCommand("styleWithCSS",0,!1)}catch(d){if(!a._isHidden())try{b.execCommand("useCSS",0,!0)}catch(d){}}if(!c.table_inline_editing)try{b.execCommand("enableInlineTableEditing",!1,!1)}catch(d){}if(!c.object_resizing)try{b.execCommand("enableObjectResizing",!1,!1)}catch(d){}}}d.onBeforeExecCommand.add(l),d.onMouseDown.add(l)}d.onMouseUp.add(d.nodeChanged),d.onKeyUp.add(function(b,c){var e=c.keyCode;(e>=33&&e<=36||e>=37&&e<=40||e==13||e==45||e==46||e==8||a.isMac&&(e==91||e==93)||c.ctrlKey)&&d.nodeChanged()}),d.onKeyDown.add(function(a,b){if(b.keyCode!=8)return;var c=a.selection.getRng().startContainer,d=a.selection.getRng().startOffset;while(c&&c.nodeType&&c.nodeType!=1&&c.parentNode)c=c.parentNode;if(c&&c.parentNode&&c.parentNode.tagName==="BLOCKQUOTE"&&c.parentNode.firstChild==c&&d==0){a.formatter.toggle("blockquote",null,c.parentNode);var e=a.selection.getRng();e.setStart(c,0),e.setEnd(c,0),a.selection.setRng(e),a.selection.collapse(!1)}}),d.onReset.add(function(){d.setContent(d.startContent,{format:"raw"})});if(h.custom_shortcuts){h.custom_undo_redo_keyboard_shortcuts&&(d.addShortcut("ctrl+z",d.getLang("undo_desc"),"Undo"),d.addShortcut("ctrl+y",d.getLang("redo_desc"),"Redo")),d.addShortcut("ctrl+b",d.getLang("bold_desc"),"Bold"),d.addShortcut("ctrl+i",d.getLang("italic_desc"),"Italic"),d.addShortcut("ctrl+u",d.getLang("underline_desc"),"Underline");for(e=1;e<=6;e++)d.addShortcut("ctrl+"+e,"",["FormatBlock",!1,"h"+e]);d.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),d.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),d.addShortcut("ctrl+9","",["FormatBlock",!1,"address"]);function m(b){var c=null;return!b.altKey&&!b.ctrlKey&&!b.metaKey?c:(f(d.shortcuts,function(d){if(a.isMac&&d.ctrl!=b.metaKey)return;if(!a.isMac&&d.ctrl!=b.ctrlKey)return;if(d.alt!=b.altKey)return;if(d.shift!=b.shiftKey)return;if(b.keyCode==d.keyCode||b.charCode&&b.charCode==d.charCode)return c=d,!1}),c)}d.onKeyUp.add(function(a,b){var d=m(b);if(d)return c.cancel(b)}),d.onKeyPress.add(function(a,b){var d=m(b);if(d)return c.cancel(b)}),d.onKeyDown.add(function(a,b){var d=m(b);if(d)return d.func.call(d.scope),c.cancel(b)})}a.isIE&&i.bind(d.getDoc(),"controlselect",function(a){var b=d.resizeInfo,e;a=a.target;if(a.nodeName!=="IMG")return;b&&i.unbind(b.node,b.ev,b.cb),i.hasClass(a,"mceItemNoResize")?(ev="resizestart",e=i.bind(a,"resizestart",c.cancel,c)):(ev="resizeend",e=i.bind(a,ev,function(a){var b;a=a.target;if(b=i.getStyle(a,"width"))i.setAttrib(a,"width",b.replace(/[^0-9%]+/g,"")),i.setStyle(a,"width","");if(b=i.getStyle(a,"height"))i.setAttrib(a,"height",b.replace(/[^0-9%]+/g,"")),i.setStyle(a,"height","")})),b=d.resizeInfo={node:a,ev:ev,cb:e}}),a.isOpera&&d.onClick.add(function(a,b){c.prevent(b)});if(h.custom_undo_redo){function n(){d.undoManager.typing=!1,d.undoManager.add()}i.bind(d.getDoc(),"focusout",function(a){!d.removed&&d.undoManager.typing&&n()}),d.dom.bind(d.dom.getRoot(),"dragend",function(a){n()}),d.onKeyUp.add(function(a,b){var c=b.keyCode;(c>=33&&c<=36||c>=37&&c<=40||c==13||c==45||b.ctrlKey)&&n()}),d.onKeyDown.add(function(b,e){var f=e.keyCode,g;if(f==8){g=d.getDoc().selection;if(g&&g.createRange&&g.createRange().item)return d.undoManager.beforeChange(),b.dom.remove(g.createRange().item(0)),n(),c.cancel(e)}if(f>=33&&f<=36||f>=37&&f<=40||f==13||f==45){a.isIE&&f==13&&d.undoManager.beforeChange(),d.undoManager.typing&&n();return}(f<16||f>20)&&f!=224&&f!=91&&!d.undoManager.typing&&(d.undoManager.beforeChange(),d.undoManager.typing=!0,d.undoManager.add())}),d.onMouseDown.add(function(){d.undoManager.typing&&n()})}if(a.isGecko){function o(){var a=d.dom.getAttribs(d.selection.getStart().cloneNode(!1));return function(){var b=d.selection.getStart();b!==d.getBody()&&(d.dom.setAttrib(b,"style",null),f(a,function(a){b.setAttributeNode(a.cloneNode(!0))}))}}function p(){var a=d.selection;return!a.isCollapsed()&&a.getStart()!=a.getEnd()}d.onKeyPress.add(function(a,b){var e;if((b.keyCode==8||b.keyCode==46)&&p())return e=o(),d.getDoc().execCommand("delete",!1,null),e(),c.cancel(b)}),d.dom.bind(d.getDoc(),"cut",function(a){var b;p()&&(b=o(),d.onKeyUp.addToTop(c.cancel,c),setTimeout(function(){b(),d.onKeyUp.remove(c.cancel,c)},0))})}},_refreshContentEditable:function(){var a=this,b,c;a._isHidden()&&(b=a.getBody(),c=b.parentNode,c.removeChild(b),c.appendChild(b),b.focus())},_isHidden:function(){var a;return g?(a=this.selection.getSel(),!a||!a.rangeCount||a.rangeCount==0):0}})}(tinymce),function(a){var b=a.each,c,d=!0,e=!1;a.EditorCommands=function(f){function m(a,b,c){var f;return a=a.toLowerCase(),(f=i.exec[a])?(f(a,b,c),d):e}function n(a){var b;return a=a.toLowerCase(),(b=i.state[a])?b(a):-1}function o(a){var b;return a=a.toLowerCase(),(b=i.value[a])?b(a):e}function p(a,c){c=c||"exec",b(a,function(a,d){b(d.toLowerCase().split(","),function(b){i[c][b]=a})})}function q(a,b,d){return b===c&&(b=e),d===c&&(d=null),f.getDoc().execCommand(a,b,d)}function r(a){return k.match(a)}function s(a,b){k.toggle(a,b?{value:b}:c)}function t(a){l=h.getBookmark(a)}function u(){h.moveToBookmark(l)}var g=f.dom,h=f.selection,i={state:{},exec:{},value:{}},j=f.settings,k=f.formatter,l;a.extend(this,{execCommand:m,queryCommandState:n,queryCommandValue:o,addCommands:p}),p({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){f.undoManager.add()},"Cut,Copy,Paste":function(b){var c=f.getDoc(),e;try{q(b)}catch(g){e=d}if(e||!c.queryCommandSupported(b))a.isGecko?f.windowManager.confirm(f.getLang("clipboard_msg"),function(a){a&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):f.windowManager.alert(f.getLang("clipboard_no_support"))},unlink:function(a){h.isCollapsed()&&h.select(h.getNode()),q(a),h.collapse(e)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(a){var c=a.substring(7);b("left,center,right,full".split(","),function(a){c!=a&&k.remove("align"+a)}),s("align"+c),m("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(a){var b,c;q(a),b=g.getParent(h.getNode(),"ol,ul"),b&&(c=b.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(c.nodeName)&&(t(),g.split(c,b),u()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){s(a)},"ForeColor,HiliteColor,FontName":function(a,b,c){s(a,c)},FontSize:function(b,c,d){var e,f;d>=1&&d<=7&&(f=a.explode(j.font_size_style_values),e=a.explode(j.font_size_classes),e?d=e[d-1]||d:d=f[d-1]||d),s(b,d)},RemoveFormat:function(a){k.remove(a)},mceBlockQuote:function(a){s("blockquote")},FormatBlock:function(a,b,c){return s(c||"p")},mceCleanup:function(){var a=h.getBookmark();f.setContent(f.getContent({cleanup:d}),{cleanup:d}),h.moveToBookmark(a)},mceRemoveNode:function(a,b,c){var e=c||h.getNode();e!=f.getBody()&&(t(),f.dom.remove(e,d),u())},mceSelectNodeDepth:function(a,b,c){var d=0;g.getParent(h.getNode(),function(a){if(a.nodeType==1&&d++==c)return h.select(a),e},f.getBody())},mceSelectNode:function(a,b,c){h.select(c)},mceInsertContent:function(b,c,d){var e,i,j,k,l,m,n,o,p,q,r,s,t,u;e=f.parser,i=new a.html.Serializer({},f.schema),t='<span id="mce_marker" data-mce-type="bookmark">﻿</span>',m={content:d,format:"html"},h.onBeforeSetContent.dispatch(h,m),d=m.content,d.indexOf("{$caret}")==-1&&(d+="{$caret}"),d=d.replace(/\{\$caret\}/,t),h.isCollapsed()||f.getDoc().execCommand("Delete",!1,null),j=h.getNode(),m={context:j.nodeName.toLowerCase()},l=e.parse(d,m),r=l.lastChild;if(r.attr("id")=="mce_marker"){n=r;for(r=r.prev;r;r=r.walk(!0))if(r.type==3||!g.isBlock(r.name)){r.parent.insert(n,r,r.name==="br");break}}if(!m.invalid)d=i.serialize(l),r=j.firstChild,s=j.lastChild,!r||r===s&&r.nodeName==="BR"?g.setHTML(j,d):h.setContent(d);else{h.setContent(t),j=f.selection.getNode(),k=f.getBody(),j.nodeType==9?j=r=k:r=j;while(r!==k)j=r,r=r.parentNode;d=j==k?k.innerHTML:g.getOuterHTML(j),d=i.serialize(e.parse(d.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return i.serialize(l)}))),j==k?g.setHTML(k,d):g.setOuterHTML(j,d)}n=g.get("mce_marker"),o=g.getRect(n),p=g.getViewPort(f.getWin());if(o.y+o.h>p.y+p.h||o.y<p.y||o.x>p.x+p.w||o.x<p.x)u=a.isIE?f.getDoc().documentElement:f.getBody(),u.scrollLeft=o.x,u.scrollTop=o.y-p.h+25;q=g.createRng(),r=n.previousSibling,r&&r.nodeType==3?q.setStart(r,r.nodeValue.length):(q.setStartBefore(n),q.setEndBefore(n)),g.remove(n),h.setRng(q),h.onSetContent.dispatch(h,m),f.addVisual()},mceInsertRawHTML:function(a,b,c){h.setContent("tiny_mce_marker"),f.setContent(f.getContent().replace(/tiny_mce_marker/g,function(){return c}))},mceSetContent:function(a,b,c){f.setContent(c)},"Indent,Outdent":function(a){var c,d,e;c=j.indentation,d=/[a-z%]+$/i.exec(c),c=parseInt(c),!n("InsertUnorderedList")&&!n("InsertOrderedList")?b(h.getSelectedBlocks(),function(b){a=="outdent"?(e=Math.max(0,parseInt(b.style.paddingLeft||0)-c),g.setStyle(b,"paddingLeft",e?e+d:"")):g.setStyle(b,"paddingLeft",parseInt(b.style.paddingLeft||0)+c+d)}):q(a)},mceRepaint:function(){var b;if(a.isGecko)try{t(d),h.getSel()&&h.getSel().selectAllChildren(f.getBody()),h.collapse(d),u()}catch(c){}},mceToggleFormat:function(a,b,c){k.toggle(c)},InsertHorizontalRule:function(){f.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){f.hasVisual=!f.hasVisual,f.addVisual()},mceReplaceContent:function(a,b,c){f.execCommand("mceInsertContent",!1,c.replace(/\{\$selection\}/g,h.getContent({format:"text"})))},mceInsertLink:function(a,b,c){var d;typeof c=="string"&&(c={href:c}),d=g.getParent(h.getNode(),"a"),c.href=c.href.replace(" ","%20"),(!d||!c.href)&&k.remove("link"),c.href&&k.apply("link",c,d)},selectAll:function(){var a=g.getRoot(),b=g.createRng();b.setStart(a,0),b.setEnd(a,a.childNodes.length),f.selection.setRng(b)}}),p({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(a){return r("align"+a.substring(7))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){return r(a)},mceBlockQuote:function(){return r("blockquote")},Outdent:function(){var a;if(j.inline_styles){if((a=g.getParent(h.getStart(),g.isBlock))&&parseInt(a.style.paddingLeft)>0)return d;if((a=g.getParent(h.getEnd(),g.isBlock))&&parseInt(a.style.paddingLeft)>0)return d}return n("InsertUnorderedList")||n("InsertOrderedList")||!j.inline_styles&&!!g.getParent(h.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(a){return g.getParent(h.getNode(),a=="insertunorderedlist"?"UL":"OL")}},"state"),p({"FontSize,FontName":function(a){var b=0,c;if(c=g.getParent(h.getNode(),"span"))a=="fontsize"?b=c.style.fontSize:b=c.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase();return b}},"value"),j.custom_undo_redo&&p({Undo:function(){f.undoManager.undo()},Redo:function(){f.undoManager.redo()}})}}(tinymce),function(a){var b=a.util.Dispatcher;a.UndoManager=function(c){function h(){return a.trim(c.getContent({format:"raw",no_events:1}))}var d,e=0,f=[],g;return d={typing:!1,onAdd:new b(d),onUndo:new b(d),onRedo:new b(d),beforeChange:function(){g=c.selection.getBookmark(2,!0)},add:function(a){var b,i=c.settings,j;a=a||{},a.content=h(),j=f[e];if(j&&j.content==a.content)return null;f[e]&&(f[e].beforeBookmark=g);if(i.custom_undo_redo_levels&&f.length>i.custom_undo_redo_levels){for(b=0;b<f.length-1;b++)f[b]=f[b+1];f.length--,e=f.length}return a.bookmark=c.selection.getBookmark(2,!0),e<f.length-1&&(f.length=e+1),f.push(a),e=f.length-1,d.onAdd.dispatch(d,a),c.isNotDirty=0,a},undo:function(){var a,b;return d.typing&&(d.add(),d.typing=!1),e>0&&(a=f[--e],c.setContent(a.content,{format:"raw"}),c.selection.moveToBookmark(a.beforeBookmark),d.onUndo.dispatch(d,a)),a},redo:function(){var a;return e<f.length-1&&(a=f[++e],c.setContent(a.content,{format:"raw"}),c.selection.moveToBookmark(a.bookmark),d.onRedo.dispatch(d,a)),a},clear:function(){f=[],e=0,d.typing=!1},hasUndo:function(){return e>0||this.typing},hasRedo:function(){return e<f.length-1&&!this.typing}}}}(tinymce),function(a){function j(a){var b,c,d;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(a.nodeName)&&(b?(c=a.cloneNode(!1),c.appendChild(b),b=c):b=d=a.cloneNode(!1),b.removeAttribute("id"));while(a=a.parentNode);if(b)return{wrapper:b,inner:d}}function k(a,b){var c=b.ownerDocument.createRange();return c.setStart(a.endContainer,a.endOffset),c.setEndAfter(b),c.cloneContents().textContent.length==0}function l(a,b,c){var d,e;return b.isEmpty(c)?(d=b.getParent(c,"ul,ol"),b.getParent(d.parentNode,"ul,ol")||(b.split(d,c),e=b.create("p",0,'<br data-mce-bogus="1" />'),b.replace(e,c),a.select(e,1)),i):h}var b=a.dom.Event,c=a.isIE,d=a.isGecko,e=a.isOpera,f=a.each,g=a.extend,h=!0,i=!1;a.create("tinymce.ForceBlocks",{ForceBlocks:function(a){var b=this,c=a.settings,d;b.editor=a,b.dom=a.dom,d=(c.forced_root_block||"p").toLowerCase(),c.element=d.toUpperCase(),a.onPreInit.add(b.setup,b)},setup:function(){var e=this,f=e.editor,g=f.settings,i=f.dom,k=f.selection,l=f.schema.getBlockElements();if(g.forced_root_block){function m(){var a=k.getStart(),b=f.getBody(),c,d,e,h,j,m,n,o=-16777215;if(!a||a.nodeType!==1)return;while(a!=b){if(l[a.nodeName])return;a=a.parentNode}c=k.getRng(),c.setStart?(d=c.startContainer,e=c.startOffset,h=c.endContainer,j=c.endOffset):(c.item&&(c=f.getDoc().body.createTextRange(),c.moveToElementText(c.item(0))),tmpRng=c.duplicate(),tmpRng.collapse(!0),e=tmpRng.move("character",o)*-1,tmpRng.collapsed||(tmpRng=c.duplicate(),tmpRng.collapse(!1),j=tmpRng.move("character",o)*-1-e));for(a=b.firstChild;a;a)a.nodeType===3||a.nodeType==1&&!l[a.nodeName]?(m||(m=i.create(g.forced_root_block),a.parentNode.insertBefore(m,a)),n=a,a=a.nextSibling,m.appendChild(n)):(m=null,a=a.nextSibling);if(c.setStart)c.setStart(d,e),c.setEnd(h,j),k.setRng(c);else try{c=f.getDoc().body.createTextRange(),c.moveToElementText(b),c.collapse(!0),c.moveStart("character",e),j>0&&c.moveEnd("character",j),c.select()}catch(p){}f.nodeChanged()}f.onKeyUp.add(m),f.onClick.add(m)}g.force_br_newlines&&c&&f.onKeyPress.add(function(a,c){var d;if(c.keyCode==13&&k.getNode().nodeName!="LI")return k.setContent('<br id="__" /> ',{format:"raw"}),d=i.get("__"),d.removeAttribute("id"),k.select(d),k.collapse(),b.cancel(c)}),g.force_p_newlines&&(c?(a.addUnload(function(){e._previousFormats=0}),f.onKeyPress.add(function(a,b){e._previousFormats=0,b.keyCode==13&&!b.shiftKey&&a.selection.isCollapsed()&&g.keep_styles&&(e._previousFormats=j(a.selection.getStart()))}),f.onKeyUp.add(function(a,b){if(b.keyCode==13&&!b.shiftKey){var c=a.selection.getStart(),d=e._previousFormats;!c.hasChildNodes()&&d&&(c=i.getParent(c,i.isBlock),c&&c.nodeName!="LI"&&(c.innerHTML="",e._previousFormats?(c.appendChild(d.wrapper),d.inner.innerHTML="﻿"):c.innerHTML="﻿",k.select(c,1),k.collapse(!0),a.getDoc().execCommand("Delete",!1,null),e._previousFormats=0))}})):f.onKeyPress.add(function(a,c){c.keyCode==13&&!c.shiftKey&&!e.insertPara(c)&&b.cancel(c)}),d&&f.onKeyDown.add(function(a,b){(b.keyCode==8||b.keyCode==46)&&!b.shiftKey&&e.backspaceDelete(b,b.keyCode==8)}));if(a.isWebKit){function n(a){var b=k.getRng(),c,d=i.create("div",null," "),e,f=i.getViewPort(a.getWin()).h;b.insertNode(c=i.create("br")),b.setStartAfter(c),b.setEndAfter(c),k.setRng(b),k.getSel().focusNode==c.previousSibling&&(k.select(i.insertAfter(i.doc.createTextNode(" "),c)),k.collapse(h)),i.insertAfter(d,c),e=i.getPos(d).y,i.remove(d),e>f&&a.getWin().scrollTo(0,e)}f.onKeyPress.add(function(a,c){c.keyCode==13&&(c.shiftKey||g.force_br_newlines&&!i.getParent(k.getNode(),"h1,h2,h3,h4,h5,h6,ol,ul"))&&(n(a),b.cancel(c))})}c&&g.element!="P"&&(f.onKeyPress.add(function(a,b){e.lastElm=k.getNode().nodeName}),f.onKeyUp.add(function(a,b){var c,d=k.getNode(),f=a.getBody();f.childNodes.length===1&&d.nodeName=="P"?(d=i.rename(d,g.element),k.select(d),k.collapse(),a.nodeChanged()):b.keyCode==13&&!b.shiftKey&&e.lastElm!="P"&&(c=i.getParent(d,"p"),c&&(i.rename(c,g.element),a.nodeChanged()))}))},getParentBlock:function(a){var b=this.dom;return b.getParent(a,b.isBlock)},insertPara:function(a){function I(a,b){var c=[],f,h,j;a.innerHTML="";if(g.keep_styles){h=b;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(h.nodeName)&&(f=h.cloneNode(i),d.setAttrib(f,"id",""),c.push(f));while(h=h.parentNode)}if(c.length>0){for(j=c.length-1,f=a;j>=0;j--)f=f.appendChild(c[j]);return c[0].innerHTML=e?" ":"<br />",c[0]}a.innerHTML=e?" ":"<br />"}var b=this,c=b.editor,d=c.dom,f=c.getDoc(),g=c.settings,j=c.selection.getSel(),m=j.getRangeAt(0),n=f.body,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=d.getViewPort(c.getWin()),E,F,G;c.undoManager.beforeChange(),o=f.createRange(),o.setStart(j.anchorNode,j.anchorOffset),o.collapse(h),p=f.createRange(),p.setStart(j.focusNode,j.focusOffset),p.collapse(h),q=o.compareBoundaryPoints(o.START_TO_END,p)<0,r=q?j.anchorNode:j.focusNode,s=q?j.anchorOffset:j.focusOffset,t=q?j.focusNode:j.anchorNode,u=q?j.focusOffset:j.anchorOffset;if(r===t&&/^(TD|TH)$/.test(r.nodeName))return r.firstChild.nodeName=="BR"&&d.remove(r.firstChild),r.childNodes.length==0?(c.dom.add(r,g.element,null,"<br />"),z=c.dom.add(r,g.element,null,"<br />")):(C=r.innerHTML,r.innerHTML="",c.dom.add(r,g.element,null,C),z=c.dom.add(r,g.element,null,"<br />")),m=f.createRange(),m.selectNodeContents(z),m.collapse(1),c.selection.setRng(m),i;r==n&&t==n&&n.firstChild&&c.dom.isBlock(n.firstChild)&&(r=t=r.firstChild,s=u=0,o=f.createRange(),o.setStart(r,0),p=f.createRange(),p.setStart(t,0)),f.body.hasChildNodes()||f.body.appendChild(d.create("br")),r=r.nodeName=="HTML"?f.body:r,r=r.nodeName=="BODY"?r.firstChild:r,t=t.nodeName=="HTML"?f.body:t,t=t.nodeName=="BODY"?t.firstChild:t,v=b.getParentBlock(r),w=b.getParentBlock(t),x=v?v.nodeName:g.element;if(C=b.dom.getParent(v,"li,pre"))return C.nodeName=="LI"?l(c.selection,b.dom,C):h;v&&(v.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(d.getStyle(v,"position",1)))&&(x=g.element,v=null),w&&(w.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(d.getStyle(v,"position",1)))&&(x=g.element,w=null);if(/(TD|TABLE|TH|CAPTION)/.test(x)||v&&x=="DIV"&&/left|right/gi.test(d.getStyle(v,"float",1)))x=g.element,v=w=null;y=v&&v.nodeName==x?v.cloneNode(0):c.dom.create(x),z=w&&w.nodeName==x?w.cloneNode(0):c.dom.create(x),z.removeAttribute("id"),/^(H[1-6])$/.test(x)&&k(m,v)&&(z=c.dom.create(g.element)),C=A=r;do{if(C==n||C.nodeType==9||b.dom.isBlock(C)||/(TD|TABLE|TH|CAPTION)/.test(C.nodeName))break;A=C}while(C=C.previousSibling?C.previousSibling:C.parentNode);C=B=t;do{if(C==n||C.nodeType==9||b.dom.isBlock(C)||/(TD|TABLE|TH|CAPTION)/.test(C.nodeName))break;B=C}while(C=C.nextSibling?C.nextSibling:C.parentNode);A.nodeName==x?o.setStart(A,0):o.setStartBefore(A),o.setEnd(r,s),y.appendChild(o.cloneContents()||f.createTextNode(""));try{p.setEndAfter(B)}catch(H){}return p.setStart(t,u),z.appendChild(p.cloneContents()||f.createTextNode("")),m=f.createRange(),!A.previousSibling&&A.parentNode.nodeName==x?m.setStartBefore(A.parentNode):o.startContainer.nodeName==x&&o.startOffset==0?m.setStartBefore(o.startContainer):m.setStart(o.startContainer,o.startOffset),!B.nextSibling&&B.parentNode.nodeName==x?m.setEndAfter(B.parentNode):m.setEnd(p.endContainer,p.endOffset),m.deleteContents(),e&&c.getWin().scrollTo(0,D.y),y.firstChild&&y.firstChild.nodeName==x&&(y.innerHTML=y.firstChild.innerHTML),z.firstChild&&z.firstChild.nodeName==x&&(z.innerHTML=z.firstChild.innerHTML),d.isEmpty(y)&&I(y,r),d.isEmpty(z)&&(G=I(z,t)),e&&parseFloat(opera.version())<9.5?(m.insertNode(y),m.insertNode(z)):(m.insertNode(z),m.insertNode(y)),z.normalize(),y.normalize(),c.selection.select(z,!0),c.selection.collapse(!0),E=c.dom.getPos(z).y,(E<D.y||E+25>D.y+D.h)&&c.getWin().scrollTo(0,E<D.y?E:E-D.h+25),c.undoManager.add(),i},backspaceDelete:function(c,d){var e=this,f=e.editor,g=f.getBody(),h=f.dom,j,k=f.selection,l=k.getRng(),m=l.startContainer,j,n,o,p;if(!d&&l.collapsed&&m.nodeType==1&&l.startOffset==m.childNodes.length){p=new a.dom.TreeWalker(m.lastChild,m);for(j=m.lastChild;j;j=p.prev())if(j.nodeType==3){l.setStart(j,j.nodeValue.length),l.collapse(!0),k.setRng(l);return}}if(m&&f.dom.isBlock(m)&&!/^(TD|TH)$/.test(m.nodeName)&&d)if(m.childNodes.length==0||m.childNodes.length==1&&m.firstChild.nodeName=="BR"){j=m;while((j=j.previousSibling)&&!f.dom.isBlock(j));if(j){if(m!=g.firstChild){n=f.dom.doc.createTreeWalker(j,NodeFilter.SHOW_TEXT,null,i);while(o=n.nextNode())j=o;l=f.getDoc().createRange(),l.setStart(j,j.nodeValue?j.nodeValue.length:0),l.setEnd(j,j.nodeValue?j.nodeValue.length:0),k.setRng(l),f.dom.remove(m)}return b.cancel(c)}}}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each,e=a.extend;a.create("tinymce.ControlManager",{ControlManager:function(b,c){var e=this,f;c=c||{},e.editor=b,e.controls={},e.onAdd=new a.util.Dispatcher(e),e.onPostRender=new a.util.Dispatcher(e),e.prefix=c.prefix||b.id+"_",e._cls={},e.onPostRender.add(function(){d(e.controls,function(a){a.postRender()})})},get:function(a){return this.controls[this.prefix+a]||this.controls[a]},setActive:function(a,b){var c=null;return(c=this.get(a))&&c.setActive(b),c},setDisabled:function(a,b){var c=null;return(c=this.get(a))&&c.setDisabled(b),c},add:function(a){var b=this;return a&&(b.controls[a.id]=a,b.onAdd.dispatch(a,b)),a},createControl:function(a){var b,c=this,e=c.editor;d(e.plugins,function(d){if(d.createControl){b=d.createControl(a,c);if(b)return!1}});switch(a){case"|":case"separator":return c.createSeparator()}return!b&&e.buttons&&(b=e.buttons[a])?c.createButton(a,b):c.add(b)},createDropMenu:function(b,c,d){var f=this,g=f.editor,h,i,j,k;c=e({"class":"mceDropDown",constrain:g.settings.constrain_menus},c),c["class"]=c["class"]+" "+g.getParam("skin")+"Skin";if(j=g.getParam("skin_variant"))c["class"]+=" "+g.getParam("skin")+"Skin"+j.substring(0,1).toUpperCase()+j.substring(1);return b=f.prefix+b,k=d||f._cls.dropmenu||a.ui.DropMenu,h=f.controls[b]=new k(b,c),h.onAddItem.add(function(a,b){var c=b.settings;c.title=g.getLang(c.title,c.title),c.onclick||(c.onclick=function(a){c.cmd&&g.execCommand(c.cmd,c.ui||!1,c.value)})}),g.onRemove.add(function(){h.destroy()}),a.isIE&&(h.onShowMenu.add(function(){g.focus(),i=g.selection.getBookmark(1)}),h.onHideMenu.add(function(){i&&(g.selection.moveToBookmark(i),i=0)})),f.add(h)},createListBox:function(b,d,f){function l(b){return b.settings.use_accessible_selects&&!a.isGecko}var g=this,h=g.editor,i,j,k;return g.get(b)?null:(d.title=h.translate(d.title),d.scope=d.scope||h,d.onselect||(d.onselect=function(a){h.execCommand(d.cmd,d.ui||!1,a||d.value)}),d=e({title:d.title,"class":"mce_"+b,scope:d.scope,control_manager:g},d),b=g.prefix+b,h.settings.use_native_selects||l(h)?j=new a.ui.NativeListBox(b,d):(k=f||g._cls.listbox||a.ui.ListBox,j=new k(b,d,h)),g.controls[b]=j,a.isWebKit&&j.onPostRender.add(function(a,b){c.add(b,"mousedown",function(){h.bookmark=h.selection.getBookmark(1)}),c.add(b,"focus",function(){h.selection.moveToBookmark(h.bookmark),h.bookmark=null})}),j.hideMenu&&h.onMouseDown.add(j.hideMenu,j),g.add(j))},createButton:function(b,c,d){var f=this,g=f.editor,h,i,j;return f.get(b)?null:(c.title=g.translate(c.title),c.label=g.translate(c.label),c.scope=c.scope||g,!c.onclick&&!c.menu_button&&(c.onclick=function(){g.execCommand(c.cmd,c.ui||!1,c.value)}),c=e({title:c.title,"class":"mce_"+b,unavailable_prefix:g.getLang("unavailable",""),scope:c.scope,control_manager:f},c),b=f.prefix+b,c.menu_button?(j=d||f._cls.menubutton||a.ui.MenuButton,i=new j(b,c,g),g.onMouseDown.add(i.hideMenu,i)):(j=f._cls.button||a.ui.Button,i=new j(b,c,g)),f.add(i))},createMenuButton:function(a,b,c){return b=b||{},b.menu_button=1,this.createButton(a,b,c)},createSplitButton:function(b,c,d){var f=this,g=f.editor,h,i,j;return f.get(b)?null:(c.title=g.translate(c.title),c.scope=c.scope||g,c.onclick||(c.onclick=function(a){g.execCommand(c.cmd,c.ui||!1,a||c.value)}),c.onselect||(c.onselect=function(a){g.execCommand(c.cmd,c.ui||!1,a||c.value)}),c=e({title:c.title,"class":"mce_"+b,scope:c.scope,control_manager:f},c),b=f.prefix+b,j=d||f._cls.splitbutton||a.ui.SplitButton,i=f.add(new j(b,c,g)),g.onMouseDown.add(i.hideMenu,i),i)},createColorSplitButton:function(b,c,d){var f=this,g=f.editor,h,i,j,k;return f.get(b)?null:(c.title=g.translate(c.title),c.scope=c.scope||g,c.onclick||(c.onclick=function(b){a.isIE&&(k=g.selection.getBookmark(1)),g.execCommand(c.cmd,c.ui||!1,b||c.value)}),c.onselect||(c.onselect=function(a){g.execCommand(c.cmd,c.ui||!1,a||c.value)}),c=e({title:c.title,"class":"mce_"+b,menu_class:g.getParam("skin")+"Skin",scope:c.scope,more_colors_title:g.getLang("more_colors")},c),b=f.prefix+b,j=d||f._cls.colorsplitbutton||a.ui.ColorSplitButton,i=new j(b,c,g),g.onMouseDown.add(i.hideMenu,i),g.onRemove.add(function(){i.destroy()}),a.isIE&&(i.onShowMenu.add(function(){g.focus(),k=g.selection.getBookmark(1)}),i.onHideMenu.add(function(){k&&(g.selection.moveToBookmark(k),k=0)})),f.add(i))},createToolbar:function(b,c,d){var e,f=this,g;return b=f.prefix+b,g=d||f._cls.toolbar||a.ui.Toolbar,e=new g(b,c,f.editor),f.get(b)?null:f.add(e)},createToolbarGroup:function(b,c,d){var e,f=this,g;return b=f.prefix+b,g=d||this._cls.toolbarGroup||a.ui.ToolbarGroup,e=new g(b,c,f.editor),f.get(b)?null:f.add(e)},createSeparator:function(b){var c=b||this._cls.separator||a.ui.Separator
;return new c},setControlType:function(a,b){return this._cls[a.toLowerCase()]=b},destroy:function(){d(this.controls,function(a){a.destroy()}),this.controls=null}})}(tinymce),function(a){var b=a.util.Dispatcher,c=a.each,d=a.isIE,e=a.isOpera;a.create("tinymce.WindowManager",{WindowManager:function(a){var c=this;c.editor=a,c.onOpen=new b(c),c.onClose=new b(c),c.params={},c.features={}},open:function(b,f){var g=this,h="",i,j,k=g.editor.settings.dialog_type=="modal",l,m,n,o=a.DOM.getViewPort(),p;b=b||{},f=f||{},m=e?o.w:screen.width,n=e?o.h:screen.height,b.name=b.name||"mc_"+(new Date).getTime(),b.width=parseInt(b.width||320),b.height=parseInt(b.height||240),b.resizable=!0,b.left=b.left||parseInt(m/2)-b.width/2,b.top=b.top||parseInt(n/2)-b.height/2,f.inline=!1,f.mce_width=b.width,f.mce_height=b.height,f.mce_auto_focus=b.auto_focus,k&&d&&(b.center=!0,b.help=!1,b.dialogWidth=b.width+"px",b.dialogHeight=b.height+"px",b.scroll=b.scrollbars||!1),c(b,function(b,c){a.is(b,"boolean")&&(b=b?"yes":"no"),/^(name|url)$/.test(c)||(d&&k?h+=(h?";":"")+c+":"+b:h+=(h?",":"")+c+"="+b)}),g.features=b,g.params=f,g.onOpen.dispatch(g,b,f),p=b.url||b.file,p=a._addVer(p);try{d&&k?(l=1,window.showModalDialog(p,window,h)):l=window.open(p,b.name,h)}catch(q){}l||alert(g.editor.getLang("popup_blocked"))},close:function(a){a.close(),this.onClose.dispatch(this)},createInstance:function(b,c,d,e,f,g){var h=a.resolve(b);return new h(c,d,e,f,g)},confirm:function(a,b,c,d){d=d||window,b.call(c||this,d.confirm(this._decode(this.editor.getLang(a,a))))},alert:function(a,b,c,d){var e=this;d=d||window,d.alert(e._decode(e.editor.getLang(a,a))),b&&b.call(c||e)},resizeBy:function(a,b,c){c.resizeBy(a,b)},_decode:function(b){return a.DOM.decode(b).replace(/\\n/g,"\n")}})}(tinymce),function(a){a.Formatter=function(b){function r(a){return a instanceof Array}function s(a,b){return e.getParents(a,b,e.getRoot())}function t(a){return a.nodeType===1&&(a.face==="mceinline"||a.style.fontFamily==="mceinline")}function u(a){return a?c[a]:c}function v(a,b){a&&(typeof a!="string"?d(a,function(a,b){v(b,a)}):(b=b.length?b:[b],d(b,function(a){a.deep===q&&(a.deep=!a.selector),a.split===q&&(a.split=!a.selector||a.inline),a.remove===q&&a.selector&&!a.inline&&(a.remove="none"),a.selector&&a.inline&&(a.mixed=!0,a.block_expand=!0),typeof a.classes=="string"&&(a.classes=a.classes.split(/\s+/))}),c[a]=b))}function y(c,k,l){function w(a){var b=a.startContainer,c=a.startOffset,d,e;if(b.nodeType==1||b.nodeValue===""){b=b.nodeType==1?b.childNodes[c]:b;if(b){d=new g(b,b.parentNode);for(e=d.current();e;e=d.next())if(e.nodeType==3&&!J(e)){a.setStart(e,0);break}}}return a}function y(a,b){b=b||n,a&&(b.onformat&&b.onformat(a,b,k,l),d(b.styles,function(b,c){e.setStyle(a,c,I(b,k))}),d(b.attributes,function(b,c){e.setAttrib(a,c,I(b,k))}),d(b.classes,function(b){b=I(b,k),e.hasClass(a,b)||e.addClass(a,b)}))}function z(){function a(a,b){var c=new g(b);for(l=c.current();l;l=c.prev())if(l.childNodes.length>1||l==a)return l}var c=b.selection.getRng(),d=c.startContainer,e=c.endContainer;if(d!=e&&c.endOffset==0){var f=a(d,e),h=f.nodeType==3?f.length:f.childNodes.length;c.setEnd(f,h)}return c}function A(b,c,f,g,h){var i=[],j=-1,k,l=-1,m=-1,n;return d(b.childNodes,function(a,b){if(a.nodeName==="UL"||a.nodeName==="OL")return j=b,k=a,!1}),d(b.childNodes,function(a,b){a.nodeName==="SPAN"&&e.getAttrib(a,"data-mce-type")=="bookmark"&&(a.id==c.id+"_start"?l=b:a.id==c.id+"_end"&&(m=b))}),j<=0||l<j&&m>j?(d(a.grep(b.childNodes),h),0):(n=f.cloneNode(o),d(a.grep(b.childNodes),function(a,b){if(l<j&&b<j||l>j&&b>j)i.push(a),a.parentNode.removeChild(a)}),l<j?b.insertBefore(n,k):l>j&&b.insertBefore(n,k.nextSibling),g.push(n),d(i,function(a){n.appendChild(a)}),n)}function C(b,f,g){var l=[],q,r;q=n.inline||n.block,r=e.create(q),y(r),h.walk(b,function(b){function j(b){var p=b.nodeName.toLowerCase(),s=b.parentNode.nodeName.toLowerCase(),u;if(G(p,"br")){h=0,n.block&&e.remove(b);return}if(n.wrapper&&B(b,c,k)){h=0;return}if(n.block&&!n.wrapper&&R(p)){b=e.rename(b,q),y(b),l.push(b),h=0;return}if(n.selector){d(m,function(a){if("collapsed"in a&&a.collapsed!==v)return;e.is(b,a.selector)&&!t(b)&&(y(b,a),u=!0)});if(!n.inline||u){h=0;return}}!i(q,p)||!i(s,q)||!g&&b.nodeType===3&&b.nodeValue.length===1&&b.nodeValue.charCodeAt(0)===65279||b.id==="_mce_caret"?p=="li"&&f?h=A(b,f,r,l,j):(h=0,d(a.grep(b.childNodes),j),h=0):(h||(h=r.cloneNode(o),b.parentNode.insertBefore(h,b),l.push(h)),h.appendChild(b))}var h;d(b,j)}),n.wrap_links===!1&&d(l,function(b){function c(b){var e,f,g;if(b.nodeName==="A"){f=r.cloneNode(o),l.push(f),g=a.grep(b.childNodes);for(e=0;e<g.length;e++)f.appendChild(g[e]);b.appendChild(f)}d(a.grep(b.childNodes),c)}c(b)}),d(l,function(a){function f(a){var b=0;return d(a.childNodes,function(a){!J(a)&&!P(a)&&b++}),b}function g(a){var b,c;return d(a.childNodes,function(a){if(a.nodeType==1&&!P(a)&&!t(a))return b=a,o}),b&&F(b,n)&&(c=b.cloneNode(o),y(c),e.replace(c,a,p),e.remove(b,1)),c||a}var b;b=f(a);if((l.length>1||!j(a))&&b===0){e.remove(a,1);return}if(n.inline||n.wrapper){!n.exact&&b===1&&(a=g(a)),d(m,function(b){d(e.select(b.inline,a),function(a){var c;if(b.wrap_links===!1){c=a.parentNode;do if(c.nodeName==="A")return;while(c=c.parentNode)}M(b,k,a,b.exact?a:null)})});if(B(a.parentNode,c,k))return e.remove(a,1),a=0,p;n.merge_with_parents&&e.getParent(a.parentNode,function(b){if(B(b,c,k))return e.remove(a,1),a=0,p}),a&&n.merge_siblings!==!1&&(a=Q(O(a),a),a=Q(a,O(a,p)))}})}var m=u(c),n=m[0],q,r,s,v=f.isCollapsed();if(n)if(l)l.nodeType?(r=e.createRng(),r.setStartBefore(l),r.setEndAfter(l),C(L(r,m),null,!0)):C(l,null,!0);else if(!v||!n.inline||e.select("td.mceSelected,th.mceSelected").length){var D=b.selection.getNode();b.selection.setRng(z()),q=f.getBookmark(),C(L(f.getRng(p),m),q),n.styles&&(n.styles.color||n.styles.textDecoration)&&(a.walk(D,x,"childNodes"),x(D)),f.moveToBookmark(q),f.setRng(w(f.getRng(p))),b.nodeChanged()}else T("apply",c,k)}function z(c,i,k){function x(a){var b=a.startContainer,c=a.startOffset,d,h,i,j;b.nodeType==3&&c>=b.nodeValue.length-1&&(b=b.parentNode,c=l(b)+1);if(b.nodeType==1){i=b.childNodes,b=i[Math.min(c,i.length-1)],d=new g(b),c>i.length-1&&d.next();for(h=d.current();h;h=d.next())if(h.nodeType==3&&!J(h)){j=e.create("a",null,m),h.parentNode.insertBefore(j,h),a.setStart(h,0),f.setRng(a),e.remove(j);return}}}function y(b){var c,d,e;c=a.grep(b.childNodes);for(d=0,e=n.length;d<e;d++)if(M(n[d],i,b,b))break;if(q.deep)for(d=0,e=c.length;d<e;d++)y(c[d])}function z(a){var b;return d(s(a.parentNode).reverse(),function(a){var d;!b&&a.id!="_start"&&a.id!="_end"&&(d=B(a,c,i),d&&d.split!==!1&&(b=a))}),b}function A(a,b,c,d){var f,g,h,k,l,m;if(a){m=a.parentNode;for(f=b.parentNode;f&&f!=m;f=f.parentNode){g=f.cloneNode(o);for(l=0;l<n.length;l++)if(M(n[l],i,g,g)){g=0;break}g&&(h&&g.appendChild(h),k||(k=g),h=g)}d&&(!q.mixed||!j(a))&&(b=e.split(a,b)),h&&(c.parentNode.insertBefore(h,c),k.appendChild(c))}return b}function D(a){return A(z(a),a,a,!0)}function E(a){var b=e.get(a?"_start":"_end"),c=b[a?"firstChild":"lastChild"];return P(c)&&(c=c[a?"firstChild":"lastChild"]),e.remove(b,!0),c}function F(a){var c,e;a=L(a,n,p),q.split&&(c=S(a,p),e=S(a),c!=e?(c=K(c,"span",{id:"_start","data-mce-type":"bookmark"}),e=K(e,"span",{id:"_end","data-mce-type":"bookmark"}),D(c),D(e),c=E(p),e=E()):c=e=D(c),a.startContainer=c.parentNode,a.startOffset=l(c),a.endContainer=e.parentNode,a.endOffset=l(e)+1),h.walk(a,function(a){d(a,function(a){y(a),a.nodeType===1&&b.dom.getStyle(a,"text-decoration")==="underline"&&a.parentNode&&w(a.parentNode)==="underline"&&M({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,a)})})}var n=u(c),q=n[0],r,t,v;if(k){k.nodeType?(v=e.createRng(),v.setStartBefore(k),v.setEndAfter(k),F(v)):F(k);return}!f.isCollapsed()||!q.inline||e.select("td.mceSelected,th.mceSelected").length?(r=f.getBookmark(),F(f.getRng(p)),f.moveToBookmark(r),q.inline&&C(c,i,f.getStart())&&x(f.getRng(!0)),b.nodeChanged()):T("remove",c,i),a.isWebKit&&b.execCommand("mceCleanup")}function A(a,b,c){var d=u(a);!C(a,b,c)||"toggle"in d[0]&&!d[0].toggle?y(a,b,c):z(a,b,c)}function B(a,b,c,d){function j(a,b,f){var g,h,i=b[f],j;if(b.onmatch)return b.onmatch(a,b,f);if(i)if(i.length===q){for(g in i)if(i.hasOwnProperty(g)){f==="attributes"?h=e.getAttrib(a,g):h=H(a,g);if(d&&!h&&!b.exact)return;if((!d||b.exact)&&!G(h,I(i[g],c)))return}}else for(j=0;j<i.length;j++)if(f==="attributes"?e.getAttrib(a,i[j]):H(a,i[j]))return b;return b}var f=u(b),g,h,i;if(f&&a)for(h=0;h<f.length;h++){g=f[h];if(F(a,g)&&j(a,g,"attributes")&&j(a,g,"styles")){if(i=g.classes)for(h=0;h<i.length;h++)if(!e.hasClass(a,i[h]))return;return g}}}function C(a,b,c){function g(c){return c=e.getParent(c,function(c){return!!B(c,a,b,!0)}),B(c,a,b)}var d;return c?g(c):(c=f.getNode(),g(c)?p:(d=f.getStart(),d!=c&&g(d)?p:o))}function D(a,b){var c,d=[],g={},h,i,j;return c=f.getStart(),e.getParent(c,function(c){var e,f;for(e=0;e<a.length;e++)f=a[e],!g[f]&&B(c,f,b)&&(g[f]=!0,d.push(f))}),d}function E(a){var b=u(a),c,d,g,h,i;if(b){c=f.getStart(),d=s(c);for(h=b.length-1;h>=0;h--){i=b[h].selector;if(!i)return p;for(g=d.length-1;g>=0;g--)if(e.is(d[g],i))return p}}return o}function F(a,b){if(G(a,b.inline))return p;if(G(a,b.block))return p;if(b.selector)return e.is(a,b.selector)}function G(a,b){return a=a||"",b=b||"",a=""+(a.nodeName||a),b=""+(b.nodeName||b),a.toLowerCase()==b.toLowerCase()}function H(a,b){var c=e.getStyle(a,b);if(b=="color"||b=="backgroundColor")c=e.toHex(c);return b=="fontWeight"&&c==700&&(c="bold"),""+c}function I(a,b){return typeof a!="string"?a=a(b):b&&(a=a.replace(/%(\w+)/g,function(a,c){return b[c]||a})),a}function J(a){return a&&a.nodeType===3&&/^([\t \r\n]+|)$/.test(a.nodeValue)}function K(a,b,c){var d=e.create(b,c);return a.parentNode.insertBefore(d,a),d.appendChild(a),d}function L(a,c,d){function t(a){var b,d,g,l,m;b=d=a?f:i,m=a?"previousSibling":"nextSibling",root=e.getRoot();if(b.nodeType==3&&!J(b))if(a?h>0:k<b.nodeValue.length)return b;for(;;){if(d==root||!c[0].block_expand&&j(d))return d;for(l=d[m];l;l=l[m])if(!P(l)&&!J(l))return d;d=d.parentNode}return b}function u(a,b){b===q&&(b=a.nodeType===3?a.length:a.childNodes.length);while(a&&a.hasChildNodes())a=a.childNodes[b],a&&(b=a.nodeType===3?a.length:a.childNodes.length);return{node:a,offset:b}}var f=a.startContainer,h=a.startOffset,i=a.endContainer,k=a.endOffset,m,n,p,r;f.nodeType==1&&f.hasChildNodes()&&(n=f.childNodes.length-1,f=f.childNodes[h>n?n:h],f.nodeType==3&&(h=0)),i.nodeType==1&&i.hasChildNodes()&&(n=i.childNodes.length-1,i=i.childNodes[k>n?n:k-1],i.nodeType==3&&(k=i.nodeValue.length));if(P(f.parentNode)||P(f))f=P(f)?f:f.parentNode,f=f.nextSibling||f,f.nodeType==3&&(h=0);if(P(i.parentNode)||P(i))i=P(i)?i:i.parentNode,i=i.previousSibling||i,i.nodeType==3&&(k=i.length);if(c[0].inline){if(a.collapsed){function v(a,c,f){function m(a,b){var c,e,g=a.nodeValue;return typeof b=="undefined"&&(b=f?g.length:0),f?(c=g.lastIndexOf(" ",b),e=g.lastIndexOf(" ",b),c=c>e?c:e,c!==-1&&!d&&c++):(c=g.indexOf(" ",b),e=g.indexOf(" ",b),c=c!==-1&&(e===-1||c<e)?c:e),c}var h,i,k,l;if(a.nodeType===3){k=m(a,c);if(k!==-1)return{container:a,offset:k};l=a}h=new g(a,e.getParent(a,j)||b.getBody());while(i=h[f?"prev":"next"]())if(i.nodeType===3){l=i,k=m(i);if(k!==-1)return{container:i,offset:k}}else if(j(i))break;if(l)return f?c=0:c=l.length,{container:l,offset:c}}r=v(f,h,!0),r&&(f=r.container,h=r.offset),r=v(i,k),r&&(i=r.container,k=r.offset)}p=u(i,k);if(p.node){while(p.node&&p.offset===0&&p.node.previousSibling)p=u(p.node.previousSibling);p.node&&p.offset>0&&p.node.nodeType===3&&p.node.nodeValue.charAt(p.offset-1)===" "&&(p.offset>1?(i=p.node,i.splitText(p.offset-1)):!p.node.previousSibling)}}if(c[0].inline||c[0].block_expand){if(!c[0].inline||f.nodeType!=3||h===0)f=t(!0);if(!c[0].inline||i.nodeType!=3||k===i.nodeValue.length)i=t()}if(c[0].selector&&c[0].expand!==o&&!c[0].inline){function w(b,d){var f,g,h,i;b.nodeType==3&&b.nodeValue.length==0&&b[d]&&(b=b[d]),f=s(b);for(g=0;g<f.length;g++)for(h=0;h<c.length;h++){i=c[h];if("collapsed"in i&&i.collapsed!==a.collapsed)continue;if(e.is(f[g],i.selector))return f[g]}return b}f=w(f,"previousSibling"),i=w(i,"nextSibling")}if(c[0].block||c[0].selector){function x(a,b,d){var f;c[0].wrapper||(f=e.getParent(a,c[0].block)),f||(f=e.getParent(a.nodeType==3?a.parentNode:a,j)),f&&c[0].wrapper&&(f=s(f,"ul,ol").reverse()[0]||f);if(!f){f=a;while(f[b]&&!j(f[b])){f=f[b];if(G(f,"br"))break}}return f||a}f=x(f,"previousSibling"),i=x(i,"nextSibling"),c[0].block&&(j(f)||(f=t(!0)),j(i)||(i=t()))}return f.nodeType==1&&(h=l(f),f=f.parentNode),i.nodeType==1&&(k=l(i)+1,i=i.parentNode),{startContainer:f,startOffset:h,endContainer:i,endOffset:k}}function M(a,b,c,f){var g,h,i;if(!F(c,a))return o;if(a.remove!="all"){d(a.styles,function(a,d){a=I(a,b),typeof d=="number"&&(d=a,f=0),(!f||G(H(f,d),a))&&e.setStyle(c,d,""),i=1}),i&&e.getAttrib(c,"style")==""&&(c.removeAttribute("style"),c.removeAttribute("data-mce-style")),d(a.attributes,function(a,g){var h;a=I(a,b),typeof g=="number"&&(g=a,f=0);if(!f||G(e.getAttrib(f,g),a)){if(g=="class"){a=e.getAttrib(c,g);if(a){h="",d(a.split(/\s+/),function(a){/mce\w+/.test(a)&&(h+=(h?" ":"")+a)});if(h){e.setAttrib(c,g,h);return}}}g=="class"&&c.removeAttribute("className"),n.test(g)&&c.removeAttribute("data-mce-"+g),c.removeAttribute(g)}}),d(a.classes,function(a){a=I(a,b),(!f||e.hasClass(f,a))&&e.removeClass(c,a)}),h=e.getAttribs(c);for(g=0;g<h.length;g++)if(h[g].nodeName.indexOf("_")!==0)return o}if(a.remove!="none")return N(c,a),p}function N(b,c){var f=b.parentNode,g;if(c.block)if(!k){function h(a,b,c){return a=O(a,b,c),!a||a.nodeName=="BR"||j(a)}j(b)&&!j(f)&&(!h(b,o)&&!h(b.firstChild,p,1)&&b.insertBefore(e.create("br"),b.firstChild),!h(b,p)&&!h(b.lastChild,o,1)&&b.appendChild(e.create("br")))}else f==e.getRoot()&&(!c.list_block||!G(b,c.list_block))&&d(a.grep(b.childNodes),function(a){i(k,a.nodeName.toLowerCase())?g?g.appendChild(a):g=K(a,k):g=0});if(c.selector&&c.inline&&!G(c.inline,b))return;e.remove(b,1)}function O(a,b,c){if(a){b=b?"nextSibling":"previousSibling";for(a=c?a:a[b];a;a=a[b])if(a.nodeType==1||!J(a))return a}}function P(a){return a&&a.nodeType==1&&a.getAttribute("data-mce-type")=="bookmark"}function Q(b,c){function i(a,b){function c(a){var b={};return d(e.getAttribs(a),function(c){var d=c.nodeName.toLowerCase();d.indexOf("_")!==0&&d!=="style"&&(b[d]=e.getAttrib(a,d))}),b}function f(a,b){var c,d;for(d in a)if(a.hasOwnProperty(d)){c=b[d];if(c===q)return o;if(a[d]!=c)return o;delete b[d]}for(d in b)if(b.hasOwnProperty(d))return o;return p}return a.nodeName!=b.nodeName?o:f(c(a),c(b))?f(e.parseStyle(e.getAttrib(a,"style")),e.parseStyle(e.getAttrib(b,"style")))?p:o:o}var f,g,h;if(b&&c){function j(a,b){for(g=a;g;g=g[b]){if(g.nodeType==3&&g.nodeValue.length!==0)return a;if(g.nodeType==1&&!P(g))return g}return a}b=j(b,"previousSibling"),c=j(c,"nextSibling");if(i(b,c)){for(g=b.nextSibling;g&&g!=c;)h=g,g=g.nextSibling,b.appendChild(h);return e.remove(c),d(a.grep(c.childNodes),function(a){b.appendChild(a)}),b}}return c}function R(a){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(a)}function S(a,c){var d,e,f,h;return d=a[c?"startContainer":"endContainer"],e=a[c?"startOffset":"endOffset"],d.nodeType==1&&(f=d.childNodes.length-1,!c&&e&&e--,d=d.childNodes[e>f?f:e]),d.nodeType===3&&c&&e>=d.nodeValue.length&&(d=(new g(d,b.getBody())).next()||d),d.nodeType===3&&!c&&e==0&&(d=(new g(d,b.getBody())).prev()||d),d}function T(c,d,i){function n(a){var c=e.create("span",{id:k,"data-mce-bogus":!0,style:l?"color:red":""});return a&&c.appendChild(b.getDoc().createTextNode(j)),c}function o(a,b){while(a){if(a.nodeType===3&&a.nodeValue!==j||a.childNodes.length>1)return!1;b&&a.nodeType===1&&b.push(a),a=a.firstChild}return!0}function p(a){while(a){if(a.id===k)return a;a=a.parentNode}}function q(a){var b;if(a){b=new g(a,a);for(a=b.current();a;a=b.next())if(a.nodeType===3)return a}}function r(a,b){var c,d;if(!a){a=p(f.getStart());if(!a)while(a=e.get(k))r(a,!1)}else d=f.getRng(!0),o(a)?(b!==!1&&(d.setStartBefore(a),d.setEndBefore(a)),e.remove(a)):(c=q(a),c=c.deleteData(0,1),e.remove(a,1)),f.setRng(d)}function s(){var a,b,c,e,g,k,l;a=f.getRng(!0),e=a.startOffset,k=a.startContainer,l=k.nodeValue,b=p(f.getStart()),b&&(c=q(b)),l&&e>0&&e<l.length&&/\w/.test(l.charAt(e))&&/\w/.test(l.charAt(e-1))?(g=f.getBookmark(),a.collapse(!0),a=L(a,u(d)),a=h.split(a),y(d,i,a),f.moveToBookmark(g)):(!b||c.nodeValue!==j?(b=n(!0),c=b.firstChild,a.insertNode(b),e=1,y(d,i,b)):y(d,i,b),f.setCursorLocation(c,e))}function t(){var a=f.getRng(!0),b,c,g,k,l,m,o=[],p,q;b=a.startContainer,c=a.startOffset,l=b;if(b.nodeType==3){if(c!=b.nodeValue.length||b.nodeValue===j)k=!0;l=l.parentNode}while(l){if(B(l,d,i)){m=l;break}l.nextSibling&&(k=!0),o.push(l),l=l.parentNode}if(!m)return;if(k)g=f.getBookmark(),a.collapse(!0),a=L(a,u(d),!0),a=h.split(a),z(d,i,a),f.moveToBookmark(g);else{q=n(),l=q;for(p=o.length-1;p>=0;p--)l.appendChild(o[p].cloneNode(!1)),l=l.firstChild;l.appendChild(e.doc.createTextNode(j)),l=l.firstChild,e.insertAfter(q,m),f.setCursorLocation(l,1)}}var j,k="_mce_caret",l=b.settings.caret_debug;j=a.isGecko?"​":m,b.onBeforeGetContent.addToTop(function(){var a=[],b;if(o(p(f.getStart()),a)){b=a.length;while(b--)e.setAttrib(a[b],"data-mce-bogus","1")}}),a.each("onMouseUp onKeyUp".split(" "),function(a){b[a].addToTop(function(){r()})}),b.onKeyDown.addToTop(function(a,b){var c=b.keyCode;(c==8||c==37||c==39)&&r(p(f.getStart()))}),c=="apply"?s():t()}var c={},d=a.each,e=b.dom,f=b.selection,g=a.dom.TreeWalker,h=new a.dom.RangeUtils(e),i=b.schema.isValidChild,j=e.isBlock,k=b.settings.forced_root_block,l=e.nodeIndex,m="﻿",n=/^(src|href|style)$/,o=!1,p=!0,q,w=function(a){var c;return b.dom.getParent(a,function(a){return c=b.dom.getStyle(a,"text-decoration"),c&&c!=="none"}),c},x=function(a){var c;a.nodeType===1&&a.parentNode&&a.parentNode.nodeType===1&&(c=w(a.parentNode),b.dom.getStyle(a,"color")&&c?b.dom.setStyle(a,"text-decoration",c):b.dom.getStyle(a,"textdecoration")===c&&b.dom.setStyle(a,"text-decoration",null))};a.extend(this,{get:u,register:v,apply:y,remove:z,toggle:A,match:C,matchAll:D,matchNode:B,canApply:E})}}(tinymce),tinymce.onAddEditor.add(function(a,b){var c,d,e,f=b.settings;if(f.inline_styles){d=a.explode(f.font_size_legacy_values);function g(b,c){a.each(c,function(a,c){a&&e.setStyle(b,c,a)}),e.rename(b,"span")}c={font:function(a,b){g(b,{backgroundColor:b.style.backgroundColor,color:b.color,fontFamily:b.face,fontSize:d[parseInt(b.size)-1]})},u:function(a,b){g(b,{textDecoration:"underline"})},strike:function(a,b){g(b,{textDecoration:"line-through"})}};function h(d,g){e=d.dom,f.convert_fonts_to_spans&&a.each(e.select("font,u,strike",g.node),function(a){c[a.nodeName.toLowerCase()](b.dom,a)})}b.onPreProcess.add(h),b.onSetContent.add(h),b.onInit.add(function(){b.selection.onSetContent.add(h)})}});var TinyMCE_EditableSelects={editSelectElm:null,init:function(){var a=document.getElementsByTagName("select"),b,c=document,d;for(b=0;b<a.length;b++)a[b].className.indexOf("mceEditableSelect")!=-1&&(d=new Option(tinyMCEPopup.editor.translate("value"),"__mce_add_custom__"),d.className="mceAddSelectValue",a[b].options[a[b].options.length]=d,a[b].onchange=TinyMCE_EditableSelects.onChangeEditableSelect)},onChangeEditableSelect:function(a){var b=document,c,d=window.event?window.event.srcElement:a.target;d.options[d.selectedIndex].value=="__mce_add_custom__"&&(c=b.createElement("input"),c.id=d.id+"_custom",c.name=d.name+"_custom",c.type="text",c.style.width=d.offsetWidth+"px",d.parentNode.insertBefore(c,d),d.style.display="none",c.focus(),c.onblur=TinyMCE_EditableSelects.onBlurEditableSelectInput,c.onkeydown=TinyMCE_EditableSelects.onKeyDown,TinyMCE_EditableSelects.editSelectElm=d)},onBlurEditableSelectInput:function(){var a=TinyMCE_EditableSelects.editSelectElm;a&&(a.previousSibling.value!=""?(addSelectValue(document.forms[0],a.id,a.previousSibling.value,a.previousSibling.value),selectByValue(document.forms[0],a.id,a.previousSibling.value)):selectByValue(document.forms[0],a.id,""),a.style.display="inline",a.parentNode.removeChild(a.previousSibling),TinyMCE_EditableSelects.editSelectElm=null)},onKeyDown:function(a){a=a||window.event,a.keyCode==13&&TinyMCE_EditableSelects.onBlurEditableSelectInput()}},themeBaseURL=tinyMCEPopup.editor.baseURI.toAbsolute("themes/"+tinyMCEPopup.getParam("theme"));MCTabs.prototype.init=function(a){this.settings=a},MCTabs.prototype.getParam=function(a,b){var c=null;return c=typeof this.settings[a]=="undefined"?b:this.settings[a],c=="true"||c=="false"?c=="true":c},MCTabs.prototype.showTab=function(a){a.className="current",a.setAttribute("aria-selected",!0),a.setAttribute("aria-expanded",!0),a.tabIndex=0},MCTabs.prototype.hideTab=function(a){var b=this;a.className="",a.setAttribute("aria-selected",!1),a.setAttribute("aria-expanded",!1),a.tabIndex=-1},MCTabs.prototype.showPanel=function(a){a.className="current",a.setAttribute("aria-hidden",!1)},MCTabs.prototype.hidePanel=function(a){a.className="panel",a.setAttribute("aria-hidden",!0)},MCTabs.prototype.getPanelForTab=function(a){return tinyMCEPopup.dom.getAttrib(a,"aria-controls")},MCTabs.prototype.displayTab=function(a,b,c){var d,e,f,g,h,i,j,k=this;f=document.getElementById(a),b===undefined&&(b=k.getPanelForTab(f)),d=document.getElementById(b),e=d?d.parentNode:null,g=f?f.parentNode:null,h=k.getParam("selection_class","current");if(f&&g){i=g.childNodes;for(j=0;j<i.length;j++)i[j].nodeName=="LI"&&k.hideTab(i[j]);k.showTab(f)}if(d&&e){i=e.childNodes;for(j=0;j<i.length;j++)i[j].nodeName=="DIV"&&k.hidePanel(i[j]);c||f.focus(),k.showPanel(d)}},MCTabs.prototype.getAnchor=function(){var a,b=document.location.href;return(a=b.lastIndexOf("#"))!=-1?b.substring(a+1):""};var mcTabs=new MCTabs;tinyMCEPopup.onInit.add(function(){var a=tinyMCEPopup.getWin().tinymce,b=tinyMCEPopup.dom,c=a.each;c(b.select("div.tabs"),function(d){var e;b.setAttrib(d,"role","tablist");var f=tinyMCEPopup.dom.select("li",d),g=function(a){mcTabs.displayTab(a,mcTabs.getPanelForTab(a)),mcTabs.onChange.dispatch(a)};c(f,function(a){b.setAttrib(a,"role","tab"),b.bind(a,"click",function(b){g(a.id)})}),b.bind(b.getRoot(),"keydown",function(b){b.keyCode===9&&b.ctrlKey&&!b.altKey&&(e.moveFocus(b.shiftKey?-1:1),a.dom.Event.cancel(b))}),c(b.select("a",d),function(a){b.setAttrib(a,"tabindex","-1")}),e=tinyMCEPopup.editor.windowManager.createInstance("tinymce.ui.KeyboardNavigation",{root:d,items:f,onAction:g,actOnFocus:!0,enableLeftRight:!0,enableUpDown:!0},tinyMCEPopup.dom)})});var Validator={isEmail:function(a){return this.test(a,"^[-!#$%&'*+\\./0-9=?A-Z^_`a-z{|}~]+@[-!#$%&'*+\\/0-9=?A-Z^_`a-z{|}~]+.[-!#$%&'*+\\./0-9=?A-Z^_`a-z{|}~]+$")},isAbsUrl:function(a){return this.test(a,"^(news|telnet|nttp|file|http|ftp|https)://[-A-Za-z0-9\\.]+\\/?.*$")},isSize:function(a){return this.test(a,"^[0-9.]+(%|in|cm|mm|em|ex|pt|pc|px)?$")},isId:function(a){return this.test(a,"^[A-Za-z_]([A-Za-z0-9_])*$")},isEmpty:function(a){var b,c;if(a.nodeName=="SELECT"&&a.selectedIndex<1)return!0;if(a.type=="checkbox"&&!a.checked)return!0;if(a.type=="radio"){for(c=0,b=a.form.elements;c<b.length;c++)if(b[c].type=="radio"&&b[c].name==a.name&&b[c].checked)return!1;return!0}return(new RegExp("^\\s*$")).test(a.nodeType==1?a.value:a)},isNumber:function(a,b){return!isNaN(a.nodeType==1?a.value:a)&&(!b||!this.test(a,"^-?[0-9]*\\.[0-9]*$"))},test:function(a,b){return a=a.nodeType==1?a.value:a,a==""||(new RegExp(b)).test(a)}},AutoValidator={settings:{id_cls:"id",int_cls:"int",url_cls:"url",number_cls:"number",email_cls:"email",size_cls:"size",required_cls:"required",invalid_cls:"invalid",min_cls:"min",max_cls:"max"},init:function(a){var b;for(b in a)this.settings[b]=a[b]},validate:function(a){var b,c,d=this.settings,e=0;c=this.tags(a,"label");for(b=0;b<c.length;b++)this.removeClass(c[b],d.invalid_cls),c[b].setAttribute("aria-invalid",!1);return e+=this.validateElms(a,"input"),e+=this.validateElms(a,"select"),e+=this.validateElms(a,"textarea"),e==3},invalidate:function(a){this.mark(a.form,a)},getErrorMessages:function(a){var b,c,d=this.settings,e,f,g,h=[],i=tinyMCEPopup.editor;b=this.tags(a,"label");for(c=0;c<b.length;c++)this.hasClass(b[c],d.invalid_cls)&&(e=document.getElementById(b[c].getAttribute("for")),g={field:b[c].textContent},this.hasClass(e,d.min_cls,!0)?(message=i.getLang("invalid_data_min"),g.min=this.getNum(e,d.min_cls)):this.hasClass(e,d.number_cls)?message=i.getLang("invalid_data_number"):this.hasClass(e,d.size_cls)?message=i.getLang("invalid_data_size"):message=i.getLang("invalid_data"),message=message.replace(/{\#([^}]+)\}/g,function(a,b){return g[b]||"{#"+b+"}"}),h.push(message));return h},reset:function(a){var b=["label","input","select","textarea"],c,d,e,f=this.settings;if(a==null)return;for(c=0;c<b.length;c++){e=this.tags(a.form?a.form:a,b[c]);for(d=0;d<e.length;d++)this.removeClass(e[d],f.invalid_cls),e[d].setAttribute("aria-invalid",!1)}},validateElms:function(a,b){var c,d,e,f=this.settings,g=!0,h=Validator,i;c=this.tags(a,b);for(d=0;d<c.length;d++){e=c[d],this.removeClass(e,f.invalid_cls),this.hasClass(e,f.required_cls)&&h.isEmpty(e)&&(g=this.mark(a,e)),this.hasClass(e,f.number_cls)&&!h.isNumber(e)&&(g=this.mark(a,e)),this.hasClass(e,f.int_cls)&&!h.isNumber(e,!0)&&(g=this.mark(a,e)),this.hasClass(e,f.url_cls)&&!h.isAbsUrl(e)&&(g=this.mark(a,e)),this.hasClass(e,f.email_cls)&&!h.isEmail(e)&&(g=this.mark(a,e)),this.hasClass(e,f.size_cls)&&!h.isSize(e)&&(g=this.mark(a,e)),this.hasClass(e,f.id_cls)&&!h.isId(e)&&(g=this.mark(a,e));if(this.hasClass(e,f.min_cls,!0)){i=this.getNum(e,f.min_cls);if(isNaN(i)||parseInt(e.value)<parseInt(i))g=this.mark(a,e)}if(this.hasClass(e,f.max_cls,!0)){i=this.getNum(e,f.max_cls);if(isNaN(i)||parseInt(e.value)>parseInt(i))g=this.mark(a,e)}}return g},hasClass:function(a,b,c){return(new RegExp("\\b"+b+(c?"[0-9]+":"")+"\\b","g")).test(a.className)},getNum:function(a,b){return b=a.className.match(new RegExp("\\b"+b+"([0-9]+)\\b","g"))[0],b=b.replace(/[^0-9]/g,""),b},addClass:function(a,b,c){var d=this.removeClass(a,b);a.className=c?b+(d!=""?" "+d:""):(d!=""?d+" ":"")+b},removeClass:function(a,b){return b=a.className.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)")," "),a.className=b!=" "?b:""},tags:function(a,b){return a.getElementsByTagName(b)},mark:function(a,b){var c=this.settings;return this.addClass(b,c.invalid_cls),b.setAttribute("aria-invalid","true"),this.markLabels(a,b,c.invalid_cls),!1},markLabels:function(a,b,c){var d,e;d=this.tags(a,"label");for(e=0;e<d.length;e++)(d[e].getAttribute("for")==b.id||d[e].htmlFor==b.id)&&this.addClass(d[e],c);return null}};