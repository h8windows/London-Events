(function(a){function b(){function b(a){a==="remove"&&this.each(function(a,b){var c=e(b);c&&c.remove()}),this.find("span.mceEditor,div.mceEditor").each(function(a,b){var c=tinyMCE.get(b.id.replace(/_parent$/,""));c&&c.remove()})}function d(a){var d=this,e;if(a!==c)b.call(d),d.each(function(b,c){var d;(d=tinyMCE.get(c.id))&&d.setContent(a)});else if(d.length>0)if(e=tinyMCE.get(d[0].id))return e.getContent()}function e(a){var b=null;return a&&a.id&&f.tinymce&&(b=tinyMCE.get(a.id)),b}function g(a){return!!(a&&a.length&&f.tinymce&&a.is(":tinymce"))}var h={};a.each(["text","html","val"],function(b,f){var i=h[f]=a.fn[f],j=f==="text";a.fn[f]=function(b){var f=this;if(!g(f))return i.apply(f,arguments);if(b!==c)return d.call(f.filter(":tinymce"),b),i.apply(f.not(":tinymce"),arguments),f;var h="",k=arguments;return(j?f:f.eq(0)).each(function(b,c){var d=e(c);h+=d?j?d.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):d.getContent():i.apply(a(c),k)}),h}}),a.each(["append","prepend"],function(b,d){var f=h[d]=a.fn[d],i=d==="prepend";a.fn[d]=function(a){var b=this;if(!g(b))return f.apply(b,arguments);if(a!==c)return b.filter(":tinymce").each(function(b,c){var d=e(c);d&&d.setContent(i?a+d.getContent():d.getContent()+a)}),f.apply(b.not(":tinymce"),arguments),b}}),a.each(["remove","replaceWith","replaceAll","empty"],function(c,d){var e=h[d]=a.fn[d];a.fn[d]=function(){return b.call(this,d),e.apply(this,arguments)}}),h.attr=a.fn.attr,a.fn.attr=function(b,f,i){var j=this;if(!b||b!=="value"||!g(j))return h.attr.call(j,b,f,i);if(f!==c)return d.call(j.filter(":tinymce"),f),h.attr.call(j.not(":tinymce"),b,f,i),j;var k=j[0],l=e(k);return l?l.getContent():h.attr.call(a(k),b,f,i)}}var c,d,e=[],f=window;a.fn.tinymce=function(c){function g(){var d=[],e=0;b&&(b(),b=null),h.each(function(a,b){var f,g=b.id,i=c.oninit;g||(b.id=g=tinymce.DOM.uniqueId()),f=new tinymce.Editor(g,c),d.push(f),f.onInit.add(function(){var a,b=i;h.css("visibility",""),i&&++e==d.length&&(tinymce.is(b,"string")&&(a=b.indexOf(".")===-1?null:tinymce.resolve(b.replace(/\.\w+$/,"")),b=tinymce.resolve(b)),b.apply(a||tinymce,d))})}),a.each(d,function(a,b){b.render()})}var h=this,i,j,k,l,m,n="",o="";return h.length?c?(h.css("visibility","hidden"),!f.tinymce&&!d&&(i=c.script_url)?(d=1,k=i.substring(0,i.lastIndexOf("/")),/_(src|dev)\.js/g.test(i)&&(o="_src"),l=i.lastIndexOf("?"),l!=-1&&(n=i.substring(l+1)),f.tinyMCEPreInit=f.tinyMCEPreInit||{base:k,suffix:o,query:n},i.indexOf("gzip")!=-1&&(m=c.language||"en",i=i+(/\?/.test(i)?"&":"?")+"js=true&core=true&suffix="+escape(o)+"&themes="+escape(c.theme)+"&plugins="+escape(c.plugins)+"&languages="+m,f.tinyMCE_GZ||(tinyMCE_GZ={start:function(){function b(a){tinymce.ScriptLoader.markDone(tinyMCE.baseURI.toAbsolute(a))}tinymce.suffix=o,b("langs/"+m+".js"),b("themes/"+c.theme+"/editor_template"+o+".js"),b("themes/"+c.theme+"/langs/"+m+".js"),a.each(c.plugins.split(","),function(a,c){c&&(b("plugins/"+c+"/editor_plugin"+o+".js"),b("plugins/"+c+"/langs/"+m+".js"))})},end:function(){}})),a.ajax({type:"GET",url:i,dataType:"script",cache:!0,success:function(){tinymce.dom.Event.domLoaded=1,d=2,c.script_loaded&&c.script_loaded(),g(),a.each(e,function(a,b){b()})}})):d===1?e.push(g):g(),h):tinyMCE.get(h[0].id):h},a.extend(a.expr[":"],{tinymce:function(a){return a.id&&!!tinyMCE.get(a.id)}})})(jQuery);